(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{"+BeD":function(t,e,n){"use strict";var i=n("284h");Object.defineProperty(e,"__esModule",{value:!0}),e.LocalIndexedDBStoreBackend=d;var r=n("3sFX"),s=i(n("t+e4")),o=i(n("BLwL")),a=n("PrRn");function c(t,e,n){const i=t.openCursor(e);return new Promise((t,e)=>{const r=[];i.onerror=t=>{e(new Error("Query failed: "+t.target.errorCode))},i.onsuccess=e=>{const i=e.target.result;i?(r.push(n(i)),i.continue()):t(r)}})}function l(t){return new Promise((e,n)=>{t.oncomplete=function(t){e(t)},t.onerror=function(t){n(t.target.error)}})}function u(t){return new Promise((e,n)=>{t.onsuccess=function(t){e(t)},t.onerror=function(t){n(t.target.error)}})}function h(t){return u(t).then(t=>t.target.result)}function d(t,e){this.indexedDB=t,this._dbName="matrix-js-sdk:"+(e||"default"),this.db=null,this._disconnected=!0,this._syncAccumulator=new r.SyncAccumulator,this._isNewlyCreated=!1}d.exists=function(t,e){return o.exists(t,e="matrix-js-sdk:"+(e||"default"))},d.prototype={connect:function(){if(!this._disconnected)return a.logger.log("LocalIndexedDBStoreBackend.connect: already connected or connecting"),Promise.resolve();this._disconnected=!1,a.logger.log("LocalIndexedDBStoreBackend.connect: connecting...");const t=this.indexedDB.open(this._dbName,3);return t.onupgradeneeded=t=>{const e=t.target.result,n=t.oldVersion;a.logger.log("LocalIndexedDBStoreBackend.connect: upgrading from "+n),n<1&&(this._isNewlyCreated=!0,function(t){t.createObjectStore("users",{keyPath:["userId"]}),t.createObjectStore("accountData",{keyPath:["type"]}),t.createObjectStore("sync",{keyPath:["clobber"]})}(e)),n<2&&function(t){t.createObjectStore("oob_membership_events",{keyPath:["room_id","state_key"]}).createIndex("room","room_id")}(e),n<3&&function(t){t.createObjectStore("client_options",{keyPath:["clobber"]})}(e)},t.onblocked=()=>{a.logger.log("can't yet open LocalIndexedDBStoreBackend because it is open elsewhere")},a.logger.log("LocalIndexedDBStoreBackend.connect: awaiting connection..."),u(t).then(t=>(a.logger.log("LocalIndexedDBStoreBackend.connect: connected"),this.db=t.target.result,this.db.onversionchange=()=>{this.db.close()},this._init()))},isNewlyCreated:function(){return Promise.resolve(this._isNewlyCreated)},_init:function(){return Promise.all([this._loadAccountData(),this._loadSyncData()]).then(([t,e])=>{a.logger.log("LocalIndexedDBStoreBackend: loaded initial data"),this._syncAccumulator.accumulate({next_batch:e.nextBatch,rooms:e.roomsData,groups:e.groupsData,account_data:{events:t}})})},getOutOfBandMembers:function(t){return new Promise((e,n)=>{const i=this.db.transaction(["oob_membership_events"],"readonly").objectStore("oob_membership_events").index("room"),r=IDBKeyRange.only(t),s=i.openCursor(r),o=[];let a=!1;s.onsuccess=t=>{const n=t.target.result;if(!n)return e(o.length||a?o:null);const i=n.value;i.oob_written?a=!0:o.push(i),n.continue()},s.onerror=t=>{n(t)}}).then(e=>(a.logger.log("LL: got "+(e&&e.length)+` membershipEvents from storage for room ${t} ...`),e))},setOutOfBandMembers:async function(t,e){a.logger.log("LL: backend about to store "+e.length+" members for "+t);const n=this.db.transaction(["oob_membership_events"],"readwrite"),i=n.objectStore("oob_membership_events");e.forEach(t=>{i.put(t)}),i.put({room_id:t,oob_written:!0,state_key:0}),await l(n),a.logger.log(`LL: backend done storing for ${t}!`)},clearOutOfBandMembers:async function(t){const e=this.db.transaction(["oob_membership_events"],"readonly").objectStore("oob_membership_events").index("room"),n=IDBKeyRange.only(t),i=h(e.openKeyCursor(n,"next")).then(t=>t&&t.primaryKey[1]),r=h(e.openKeyCursor(n,"prev")).then(t=>t&&t.primaryKey[1]),[s,o]=await Promise.all([i,r]),c=this.db.transaction(["oob_membership_events"],"readwrite").objectStore("oob_membership_events"),l=IDBKeyRange.bound([t,s],[t,o]);var u;a.logger.log(`LL: Deleting all users + marker in storage for room ${t}, with key range:`,[t,s],[t,o]),await(u=c.delete(l),new Promise((t,e)=>{u.onsuccess=()=>t(u),u.onerror=t=>e(t)}))},clearDatabase:function(){return new Promise((t,e)=>{a.logger.log("Removing indexeddb instance: "+this._dbName);const n=this.indexedDB.deleteDatabase(this._dbName);n.onblocked=()=>{a.logger.log("can't yet delete indexeddb "+this._dbName+" because it is open elsewhere")},n.onerror=e=>{a.logger.warn("unable to delete js-sdk store indexeddb: "+e.target.error),t()},n.onsuccess=()=>{a.logger.log("Removed indexeddb instance: "+this._dbName),t()}})},getSavedSync:function(t){void 0===t&&(t=!0);const e=this._syncAccumulator.getJSON();return Promise.resolve(e.nextBatch?t?s.deepCopy(e):e:null)},getNextBatchToken:function(){return Promise.resolve(this._syncAccumulator.getNextBatchToken())},setSyncData:function(t){return Promise.resolve().then(()=>{this._syncAccumulator.accumulate(t)})},syncToDatabase:function(t){const e=this._syncAccumulator.getJSON();return Promise.all([this._persistUserPresenceEvents(t),this._persistAccountData(e.accountData),this._persistSyncData(e.nextBatch,e.roomsData,e.groupsData)])},_persistSyncData:function(t,e,n){return a.logger.log("Persisting sync data up to ",t),s.promiseTry(()=>{const i=this.db.transaction(["sync"],"readwrite");return i.objectStore("sync").put({clobber:"-",nextBatch:t,roomsData:e,groupsData:n}),l(i)})},_persistAccountData:function(t){return s.promiseTry(()=>{const e=this.db.transaction(["accountData"],"readwrite"),n=e.objectStore("accountData");for(let i=0;i<t.length;i++)n.put(t[i]);return l(e)})},_persistUserPresenceEvents:function(t){return s.promiseTry(()=>{const e=this.db.transaction(["users"],"readwrite"),n=e.objectStore("users");for(const i of t)n.put({userId:i[0],event:i[1]});return l(e)})},getUserPresenceEvents:function(){return s.promiseTry(()=>c(this.db.transaction(["users"],"readonly").objectStore("users"),void 0,t=>[t.value.userId,t.value.event]))},_loadAccountData:function(){return a.logger.log("LocalIndexedDBStoreBackend: loading account data..."),s.promiseTry(()=>c(this.db.transaction(["accountData"],"readonly").objectStore("accountData"),void 0,t=>t.value).then(t=>(a.logger.log("LocalIndexedDBStoreBackend: loaded account data"),t)))},_loadSyncData:function(){return a.logger.log("LocalIndexedDBStoreBackend: loading sync data..."),s.promiseTry(()=>c(this.db.transaction(["sync"],"readonly").objectStore("sync"),void 0,t=>t.value).then(t=>(a.logger.log("LocalIndexedDBStoreBackend: loaded sync data"),t.length>1&&a.logger.warn("loadSyncData: More than 1 sync row found."),t.length>0?t[0]:{})))},getClientOptions:function(){return Promise.resolve().then(()=>c(this.db.transaction(["client_options"],"readonly").objectStore("client_options"),void 0,t=>{if(t.value&&t.value&&t.value.options)return t.value.options}).then(t=>t[0]))},storeClientOptions:async function(t){const e=this.db.transaction(["client_options"],"readwrite");e.objectStore("client_options").put({clobber:"-",options:t}),await l(e)}}},"+qE3":function(t,e,n){"use strict";var i,r="object"==typeof Reflect?Reflect:null,s=r&&"function"==typeof r.apply?r.apply:function(t,e,n){return Function.prototype.apply.call(t,e,n)};i=r&&"function"==typeof r.ownKeys?r.ownKeys:Object.getOwnPropertySymbols?function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:function(t){return Object.getOwnPropertyNames(t)};var o=Number.isNaN||function(t){return t!=t};function a(){a.init.call(this)}t.exports=a,t.exports.once=function(t,e){return new Promise((function(n,i){function r(){void 0!==s&&t.removeListener("error",s),n([].slice.call(arguments))}var s;"error"!==e&&(s=function(n){t.removeListener(e,r),i(n)},t.once("error",s)),t.once(e,r)}))},a.EventEmitter=a,a.prototype._events=void 0,a.prototype._eventsCount=0,a.prototype._maxListeners=void 0;var c=10;function l(t){if("function"!=typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}function u(t){return void 0===t._maxListeners?a.defaultMaxListeners:t._maxListeners}function h(t,e,n,i){var r,s,o;if(l(n),void 0===(s=t._events)?(s=t._events=Object.create(null),t._eventsCount=0):(void 0!==s.newListener&&(t.emit("newListener",e,n.listener?n.listener:n),s=t._events),o=s[e]),void 0===o)o=s[e]=n,++t._eventsCount;else if("function"==typeof o?o=s[e]=i?[n,o]:[o,n]:i?o.unshift(n):o.push(n),(r=u(t))>0&&o.length>r&&!o.warned){o.warned=!0;var a=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");a.name="MaxListenersExceededWarning",a.emitter=t,a.type=e,a.count=o.length,console&&console.warn&&console.warn(a)}return t}function d(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function p(t,e,n){var i={fired:!1,wrapFn:void 0,target:t,type:e,listener:n},r=d.bind(i);return r.listener=n,i.wrapFn=r,r}function m(t,e,n){var i=t._events;if(void 0===i)return[];var r=i[e];return void 0===r?[]:"function"==typeof r?n?[r.listener||r]:[r]:n?function(t){for(var e=new Array(t.length),n=0;n<e.length;++n)e[n]=t[n].listener||t[n];return e}(r):g(r,r.length)}function f(t){var e=this._events;if(void 0!==e){var n=e[t];if("function"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function g(t,e){for(var n=new Array(e),i=0;i<e;++i)n[i]=t[i];return n}Object.defineProperty(a,"defaultMaxListeners",{enumerable:!0,get:function(){return c},set:function(t){if("number"!=typeof t||t<0||o(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");c=t}}),a.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},a.prototype.setMaxListeners=function(t){if("number"!=typeof t||t<0||o(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this},a.prototype.getMaxListeners=function(){return u(this)},a.prototype.emit=function(t){for(var e=[],n=1;n<arguments.length;n++)e.push(arguments[n]);var i="error"===t,r=this._events;if(void 0!==r)i=i&&void 0===r.error;else if(!i)return!1;if(i){var o;if(e.length>0&&(o=e[0]),o instanceof Error)throw o;var a=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw a.context=o,a}var c=r[t];if(void 0===c)return!1;if("function"==typeof c)s(c,this,e);else{var l=c.length,u=g(c,l);for(n=0;n<l;++n)s(u[n],this,e)}return!0},a.prototype.on=a.prototype.addListener=function(t,e){return h(this,t,e,!1)},a.prototype.prependListener=function(t,e){return h(this,t,e,!0)},a.prototype.once=function(t,e){return l(e),this.on(t,p(this,t,e)),this},a.prototype.prependOnceListener=function(t,e){return l(e),this.prependListener(t,p(this,t,e)),this},a.prototype.off=a.prototype.removeListener=function(t,e){var n,i,r,s,o;if(l(e),void 0===(i=this._events))return this;if(void 0===(n=i[t]))return this;if(n===e||n.listener===e)0==--this._eventsCount?this._events=Object.create(null):(delete i[t],i.removeListener&&this.emit("removeListener",t,n.listener||e));else if("function"!=typeof n){for(r=-1,s=n.length-1;s>=0;s--)if(n[s]===e||n[s].listener===e){o=n[s].listener,r=s;break}if(r<0)return this;0===r?n.shift():function(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}(n,r),1===n.length&&(i[t]=n[0]),void 0!==i.removeListener&&this.emit("removeListener",t,o||e)}return this},a.prototype.removeAllListeners=function(t){var e,n,i;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[t]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[t]),this;if(0===arguments.length){var r,s=Object.keys(n);for(i=0;i<s.length;++i)"removeListener"!==(r=s[i])&&this.removeAllListeners(r);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(e=n[t]))this.removeListener(t,e);else if(void 0!==e)for(i=e.length-1;i>=0;i--)this.removeListener(t,e[i]);return this},a.prototype.listeners=function(t){return m(this,t,!0)},a.prototype.rawListeners=function(t){return m(this,t,!1)},a.listenerCount=function(t,e){return"function"==typeof t.listenerCount?t.listenerCount(e):f.call(t,e)},a.prototype.listenerCount=f,a.prototype.eventNames=function(){return this._eventsCount>0?i(this._events):[]}},"+w/m":function(t,e,n){"use strict";var i=n("284h");Object.defineProperty(e,"__esModule",{value:!0}),e.OutgoingRoomKeyRequestManager=e.ROOM_KEY_REQUEST_STATES=void 0;var r=n("PrRn"),s=i(n("t+e4"));const o={UNSENT:0,SENT:1,CANCELLATION_PENDING:2,CANCELLATION_PENDING_AND_WILL_RESEND:3};function a(t){return t.room_id+" / "+t.session_id}function c(t){return"["+s.map(t,t=>`${t.userId}:${t.deviceId}`).join(",")+"]"}e.ROOM_KEY_REQUEST_STATES=o,e.OutgoingRoomKeyRequestManager=class{constructor(t,e,n){this._baseApis=t,this._deviceId=e,this._cryptoStore=n,this._sendOutgoingRoomKeyRequestsTimer=null,this._sendOutgoingRoomKeyRequestsRunning=!1,this._clientRunning=!1}start(){this._clientRunning=!0}stop(){r.logger.log("stopping OutgoingRoomKeyRequestManager"),this._clientRunning=!1}sendQueuedRequests(){this._startTimer()}async queueRoomKeyRequest(t,e,n=!1){const i=await this._cryptoStore.getOutgoingRoomKeyRequest(t);if(i)switch(i.state){case o.CANCELLATION_PENDING_AND_WILL_RESEND:case o.UNSENT:return;case o.CANCELLATION_PENDING:{const t=n?o.CANCELLATION_PENDING_AND_WILL_RESEND:o.SENT;await this._cryptoStore.updateOutgoingRoomKeyRequest(i.requestId,o.CANCELLATION_PENDING,{state:t,cancellationTxnId:this._baseApis.makeTxnId()});break}case o.SENT:if(n){const a=o.CANCELLATION_PENDING_AND_WILL_RESEND,c=await this._cryptoStore.updateOutgoingRoomKeyRequest(i.requestId,o.SENT,{state:a,cancellationTxnId:this._baseApis.makeTxnId(),requestTxnId:this._baseApis.makeTxnId()});if(!c)return await this.queueRoomKeyRequest(t,e,n);try{await this._sendOutgoingRoomKeyRequestCancellation(c,!0)}catch(s){r.logger.error("Error sending room key request cancellation; will retry later.",s)}}break;default:throw new Error("unhandled state: "+i.state)}else await this._cryptoStore.getOrAddOutgoingRoomKeyRequest({requestBody:t,recipients:e,requestId:this._baseApis.makeTxnId(),state:o.UNSENT})}cancelRoomKeyRequest(t){return this._cryptoStore.getOutgoingRoomKeyRequest(t).then(e=>{if(e)switch(e.state){case o.CANCELLATION_PENDING:case o.CANCELLATION_PENDING_AND_WILL_RESEND:return;case o.UNSENT:return r.logger.log("deleting unnecessary room key request for "+a(t)),this._cryptoStore.deleteOutgoingRoomKeyRequest(e.requestId,o.UNSENT);case o.SENT:return this._cryptoStore.updateOutgoingRoomKeyRequest(e.requestId,o.SENT,{state:o.CANCELLATION_PENDING,cancellationTxnId:this._baseApis.makeTxnId()}).then(e=>{e?this._sendOutgoingRoomKeyRequestCancellation(e).catch(t=>{r.logger.error("Error sending room key request cancellation; will retry later.",t),this._startTimer()}):r.logger.log("Tried to cancel room key request for "+a(t)+" but it was already cancelled in another tab")});default:throw new Error("unhandled state: "+e.state)}})}getOutgoingSentRoomKeyRequest(t,e){return this._cryptoStore.getOutgoingRoomKeyRequestsByTarget(t,e,[o.SENT])}async cancelAndResendAllOutgoingRequests(){const t=await this._cryptoStore.getAllOutgoingRoomKeyRequestsByState(o.SENT);return Promise.all(t.map(({requestBody:t,recipients:e})=>this.queueRoomKeyRequest(t,e,!0)))}_startTimer(){this._sendOutgoingRoomKeyRequestsTimer||(this._sendOutgoingRoomKeyRequestsTimer=global.setTimeout(()=>{if(this._sendOutgoingRoomKeyRequestsRunning)throw new Error("RoomKeyRequestSend already in progress!");this._sendOutgoingRoomKeyRequestsRunning=!0,this._sendOutgoingRoomKeyRequests().finally(()=>{this._sendOutgoingRoomKeyRequestsRunning=!1}).catch(t=>{r.logger.warn("error in OutgoingRoomKeyRequestManager: "+t)})},500))}_sendOutgoingRoomKeyRequests(){return this._clientRunning?this._cryptoStore.getOutgoingRoomKeyRequestByState([o.CANCELLATION_PENDING,o.CANCELLATION_PENDING_AND_WILL_RESEND,o.UNSENT]).then(t=>{if(!t)return void(this._sendOutgoingRoomKeyRequestsTimer=null);let e;switch(t.state){case o.UNSENT:e=this._sendOutgoingRoomKeyRequest(t);break;case o.CANCELLATION_PENDING:e=this._sendOutgoingRoomKeyRequestCancellation(t);break;case o.CANCELLATION_PENDING_AND_WILL_RESEND:e=this._sendOutgoingRoomKeyRequestCancellation(t,!0)}return e.then(()=>this._sendOutgoingRoomKeyRequests()).catch(t=>{r.logger.error("Error sending room key request; will retry later.",t),this._sendOutgoingRoomKeyRequestsTimer=null})}):(this._sendOutgoingRoomKeyRequestsTimer=null,Promise.resolve())}_sendOutgoingRoomKeyRequest(t){return r.logger.log("Requesting keys for "+a(t.requestBody)+" from "+c(t.recipients)+`(id ${t.requestId})`),this._sendMessageToDevices({action:"request",requesting_device_id:this._deviceId,request_id:t.requestId,body:t.requestBody},t.recipients,t.requestTxnId||t.requestId).then(()=>this._cryptoStore.updateOutgoingRoomKeyRequest(t.requestId,o.UNSENT,{state:o.SENT}))}_sendOutgoingRoomKeyRequestCancellation(t,e){return r.logger.log("Sending cancellation for key request for "+a(t.requestBody)+" to "+c(t.recipients)+" "+`(cancellation id ${t.cancellationTxnId})`),this._sendMessageToDevices({action:"request_cancellation",requesting_device_id:this._deviceId,request_id:t.requestId},t.recipients,t.cancellationTxnId).then(()=>e?this._cryptoStore.updateOutgoingRoomKeyRequest(t.requestId,o.CANCELLATION_PENDING_AND_WILL_RESEND,{state:o.UNSENT}):this._cryptoStore.deleteOutgoingRoomKeyRequest(t.requestId,o.CANCELLATION_PENDING))}_sendMessageToDevices(t,e,n){const i={};for(const r of e)i[r.userId]||(i[r.userId]={}),i[r.userId][r.deviceId]=t;return this._baseApis.sendToDevice("m.room_key_request",i,n)}}},"/3Bh":function(t,e,n){"use strict";var i=n("284h");Object.defineProperty(e,"__esModule",{value:!0}),e.upgradeDatabase=function(t,e){r.logger.log("Upgrading IndexedDBCryptoStore from version "+e+" to 9"),e<1&&function(t){const e=t.createObjectStore("outgoingRoomKeyRequests",{keyPath:"requestId"});e.createIndex("session",["requestBody.room_id","requestBody.session_id"]),e.createIndex("state","state")}(t),e<2&&t.createObjectStore("account"),e<3&&t.createObjectStore("sessions",{keyPath:["deviceKey","sessionId"]}).createIndex("deviceKey","deviceKey"),e<4&&t.createObjectStore("inbound_group_sessions",{keyPath:["senderCurve25519Key","sessionId"]}),e<5&&t.createObjectStore("device_data"),e<6&&t.createObjectStore("rooms"),e<7&&t.createObjectStore("sessions_needing_backup",{keyPath:["senderCurve25519Key","sessionId"]}),e<8&&t.createObjectStore("inbound_group_sessions_withheld",{keyPath:["senderCurve25519Key","sessionId"]}),e<9&&(t.createObjectStore("session_problems",{keyPath:["deviceKey","time"]}).createIndex("deviceKey","deviceKey"),t.createObjectStore("notified_error_devices",{keyPath:["userId","deviceId"]}))},e.Backend=e.VERSION=void 0;var r=n("PrRn"),s=i(n("t+e4"));function o(t,e){t._mx_abortexception=e;try{t.abort()}catch(e){}}function a(t){return new Promise((e,n)=>{t.oncomplete=()=>{void 0!==t._mx_abortexception&&n(t._mx_abortexception),e()},t.onerror=e=>{void 0!==t._mx_abortexception?n(t._mx_abortexception):(r.logger.log("Error performing indexeddb txn",e),n(e.target.error))},t.onabort=e=>{void 0!==t._mx_abortexception?n(t._mx_abortexception):(r.logger.log("Error performing indexeddb txn",e),n(e.target.error))}})}e.VERSION=9,e.Backend=class{constructor(t){this._db=t,t.onversionchange=e=>{r.logger.log(`versionchange for indexeddb ${this._dbName}: closing`),t.close()}}getOrAddOutgoingRoomKeyRequest(t){const e=t.requestBody;return new Promise((n,i)=>{const s=this._db.transaction("outgoingRoomKeyRequests","readwrite");s.onerror=i,this._getOutgoingRoomKeyRequest(s,e,i=>{if(i)return r.logger.log(`already have key request outstanding for ${e.room_id} / ${e.session_id}: not sending another`),void n(i);r.logger.log(`enqueueing key request for ${e.room_id} / `+e.session_id),s.oncomplete=()=>{n(t)},s.objectStore("outgoingRoomKeyRequests").add(t)})})}getOutgoingRoomKeyRequest(t){return new Promise((e,n)=>{const i=this._db.transaction("outgoingRoomKeyRequests","readonly");i.onerror=n,this._getOutgoingRoomKeyRequest(i,t,t=>{e(t)})})}_getOutgoingRoomKeyRequest(t,e,n){t.objectStore("outgoingRoomKeyRequests").index("session").openCursor([e.room_id,e.session_id]).onsuccess=t=>{const i=t.target.result;if(!i)return void n(null);const r=i.value;s.deepCompare(r.requestBody,e)?n(r):i.continue()}}getOutgoingRoomKeyRequestByState(t){if(0===t.length)return Promise.resolve(null);let e,n=0;const i=this._db.transaction("outgoingRoomKeyRequests","readonly"),r=i.objectStore("outgoingRoomKeyRequests"),s=t[n];return r.index("state").openCursor(s).onsuccess=function i(r){const s=r.target.result;s?e=s.value:(n++,n>=t.length||(r.target.source.openCursor(t[n]).onsuccess=i))},a(i).then(()=>e)}getAllOutgoingRoomKeyRequestsByState(t){return new Promise((e,n)=>{const i=this._db.transaction("outgoingRoomKeyRequests","readonly").objectStore("outgoingRoomKeyRequests").index("state").getAll(t);i.onsuccess=t=>e(t.target.result),i.onerror=t=>n(t.target.error)})}getOutgoingRoomKeyRequestsByTarget(t,e,n){let i=0;const r=[],s=this._db.transaction("outgoingRoomKeyRequests","readonly"),o=s.objectStore("outgoingRoomKeyRequests"),c=n[i];return o.index("state").openCursor(c).onsuccess=function s(o){const a=o.target.result;if(a){const n=a.value;n.recipients.includes({userId:t,deviceId:e})&&r.push(n),a.continue()}else{if(i++,i>=n.length)return;o.target.source.openCursor(n[i]).onsuccess=s}},a(s).then(()=>r)}updateOutgoingRoomKeyRequest(t,e,n){let i=null;const s=this._db.transaction("outgoingRoomKeyRequests","readwrite");return s.objectStore("outgoingRoomKeyRequests").openCursor(t).onsuccess=function(t){const s=t.target.result;if(!s)return;const o=s.value;o.state==e?(Object.assign(o,n),s.update(o),i=o):r.logger.warn(`Cannot update room key request from ${e} as it was already updated to `+o.state)},a(s).then(()=>i)}deleteOutgoingRoomKeyRequest(t,e){const n=this._db.transaction("outgoingRoomKeyRequests","readwrite");return n.objectStore("outgoingRoomKeyRequests").openCursor(t).onsuccess=t=>{const n=t.target.result;if(!n)return;const i=n.value;i.state==e?n.delete():r.logger.warn(`Cannot delete room key request in state ${i.state} (expected ${e})`)},a(n)}getAccount(t,e){const n=t.objectStore("account").get("-");n.onsuccess=function(){try{e(n.result||null)}catch(i){o(t,i)}}}storeAccount(t,e){t.objectStore("account").put(e,"-")}getCrossSigningKeys(t,e){const n=t.objectStore("account").get("crossSigningKeys");n.onsuccess=function(){try{e(n.result||null)}catch(i){o(t,i)}}}getSecretStorePrivateKey(t,e,n){const i=t.objectStore("account").get("ssss_cache:"+n);i.onsuccess=function(){try{e(i.result||null)}catch(n){o(t,n)}}}storeCrossSigningKeys(t,e){t.objectStore("account").put(e,"crossSigningKeys")}storeSecretStorePrivateKey(t,e,n){t.objectStore("account").put(n,"ssss_cache:"+e)}countEndToEndSessions(t,e){const n=t.objectStore("sessions").count();n.onsuccess=function(){try{e(n.result)}catch(i){o(t,i)}}}getEndToEndSessions(t,e,n){const i=e.objectStore("sessions").index("deviceKey").openCursor(t),r={};i.onsuccess=function(){const t=i.result;if(t)r[t.value.sessionId]={session:t.value.session,lastReceivedMessageTs:t.value.lastReceivedMessageTs},t.continue();else try{n(r)}catch(s){o(e,s)}}}getEndToEndSession(t,e,n,i){const r=n.objectStore("sessions").get([t,e]);r.onsuccess=function(){try{i(r.result?{session:r.result.session,lastReceivedMessageTs:r.result.lastReceivedMessageTs}:null)}catch(t){o(n,t)}}}getAllEndToEndSessions(t,e){const n=t.objectStore("sessions").openCursor();n.onsuccess=function(){try{const t=n.result;t?(e(t.value),t.continue()):e(null)}catch(i){o(t,i)}}}storeEndToEndSession(t,e,n,i){i.objectStore("sessions").put({deviceKey:t,sessionId:e,session:n.session,lastReceivedMessageTs:n.lastReceivedMessageTs})}async storeEndToEndSessionProblem(t,e,n){const i=this._db.transaction("session_problems","readwrite");return i.objectStore("session_problems").put({deviceKey:t,type:e,fixed:n,time:Date.now()}),a(i)}async getEndToEndSessionProblem(t,e){let n;const i=this._db.transaction("session_problems","readwrite"),r=i.objectStore("session_problems").index("deviceKey").getAll(t);return r.onsuccess=t=>{const i=r.result;if(!i.length)return void(n=null);i.sort((t,e)=>t.time-e.time);const s=i[i.length-1];for(const r of i)if(r.time>e)return void(n=Object.assign({},r,{fixed:s.fixed}));n=s.fixed?null:s},await a(i),n}async filterOutNotifiedErrorDevices(t){const e=this._db.transaction("notified_error_devices","readwrite").objectStore("notified_error_devices"),n=[];return await Promise.all(t.map(t=>new Promise(i=>{const{userId:r,deviceInfo:s}=t,o=e.get([r,s.deviceId]);o.onsuccess=function(){o.result||(e.put({userId:r,deviceId:s.deviceId}),n.push(t)),i()}}))),n}getEndToEndInboundGroupSession(t,e,n,i){let r=!1,s=!1;const a=n.objectStore("inbound_group_sessions").get([t,e]);a.onsuccess=function(){try{r=a.result?a.result.session:null,!1!==s&&i(r,s)}catch(t){o(n,t)}};const c=n.objectStore("inbound_group_sessions_withheld").get([t,e]);c.onsuccess=function(){try{s=c.result?c.result.session:null,!1!==r&&i(r,s)}catch(t){o(n,t)}}}getAllEndToEndInboundGroupSessions(t,e){const n=t.objectStore("inbound_group_sessions").openCursor();n.onsuccess=function(){const i=n.result;if(i){try{e({senderKey:i.value.senderCurve25519Key,sessionId:i.value.sessionId,sessionData:i.value.session})}catch(r){o(t,r)}i.continue()}else try{e(null)}catch(r){o(t,r)}}}addEndToEndInboundGroupSession(t,e,n,i){const s=i.objectStore("inbound_group_sessions").add({senderCurve25519Key:t,sessionId:e,session:n});s.onerror=n=>{"ConstraintError"===s.error.name?(n.stopPropagation(),n.preventDefault(),r.logger.log("Ignoring duplicate inbound group session: "+t+" / "+e)):o(i,new Error("Failed to add inbound group session: "+s.error))}}storeEndToEndInboundGroupSession(t,e,n,i){i.objectStore("inbound_group_sessions").put({senderCurve25519Key:t,sessionId:e,session:n})}storeEndToEndInboundGroupSessionWithheld(t,e,n,i){i.objectStore("inbound_group_sessions_withheld").put({senderCurve25519Key:t,sessionId:e,session:n})}getEndToEndDeviceData(t,e){const n=t.objectStore("device_data").get("-");n.onsuccess=function(){try{e(n.result||null)}catch(i){o(t,i)}}}storeEndToEndDeviceData(t,e){e.objectStore("device_data").put(t,"-")}storeEndToEndRoom(t,e,n){n.objectStore("rooms").put(e,t)}getEndToEndRooms(t,e){const n={},i=t.objectStore("rooms").openCursor();i.onsuccess=function(){const r=i.result;if(r)n[r.key]=r.value,r.continue();else try{e(n)}catch(s){o(t,s)}}}getSessionsNeedingBackup(t){return new Promise((e,n)=>{const i=[],r=this._db.transaction(["sessions_needing_backup","inbound_group_sessions"],"readonly");r.onerror=n,r.oncomplete=function(){e(i)};const s=r.objectStore("sessions_needing_backup"),o=r.objectStore("inbound_group_sessions"),a=s.openCursor();a.onsuccess=function(){const e=a.result;if(e){const n=o.get(e.key);n.onsuccess=function(){i.push({senderKey:n.result.senderCurve25519Key,sessionId:n.result.sessionId,sessionData:n.result.session})},(!t||i.length<t)&&e.continue()}}})}countSessionsNeedingBackup(t){t||(t=this._db.transaction("sessions_needing_backup","readonly"));const e=t.objectStore("sessions_needing_backup");return new Promise((t,n)=>{const i=e.count();i.onerror=n,i.onsuccess=()=>t(i.result)})}unmarkSessionsNeedingBackup(t,e){e||(e=this._db.transaction("sessions_needing_backup","readwrite"));const n=e.objectStore("sessions_needing_backup");return Promise.all(t.map(t=>new Promise((e,i)=>{const r=n.delete([t.senderKey,t.sessionId]);r.onsuccess=e,r.onerror=i})))}markSessionsNeedingBackup(t,e){e||(e=this._db.transaction("sessions_needing_backup","readwrite"));const n=e.objectStore("sessions_needing_backup");return Promise.all(t.map(t=>new Promise((e,i)=>{const r=n.put({senderCurve25519Key:t.senderKey,sessionId:t.sessionId});r.onsuccess=e,r.onerror=i})))}doTxn(t,e,n){const i=this._db.transaction(e,t),r=a(i),s=n(i);return r.then(()=>s)}}},"/6GC":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.RemoteIndexedDBStoreBackend=s;var i=n("PrRn"),r=n("t+e4");function s(t,e,n){this._workerScript=t,this._dbName=e,this._workerApi=n,this._worker=null,this._nextSeq=0,this._inFlight={},this._startPromise=null}s.prototype={connect:function(){return this._ensureStarted().then(()=>this._doCmd("connect"))},clearDatabase:function(){return this._ensureStarted().then(()=>this._doCmd("clearDatabase"))},isNewlyCreated:function(){return this._doCmd("isNewlyCreated")},getSavedSync:function(){return this._doCmd("getSavedSync")},getNextBatchToken:function(){return this._doCmd("getNextBatchToken")},setSyncData:function(t){return this._doCmd("setSyncData",[t])},syncToDatabase:function(t){return this._doCmd("syncToDatabase",[t])},getOutOfBandMembers:function(t){return this._doCmd("getOutOfBandMembers",[t])},setOutOfBandMembers:function(t,e){return this._doCmd("setOutOfBandMembers",[t,e])},clearOutOfBandMembers:function(t){return this._doCmd("clearOutOfBandMembers",[t])},getClientOptions:function(){return this._doCmd("getClientOptions")},storeClientOptions:function(t){return this._doCmd("storeClientOptions",[t])},getUserPresenceEvents:function(){return this._doCmd("getUserPresenceEvents")},_ensureStarted:function(){return null===this._startPromise&&(this._worker=new this._workerApi(this._workerScript),this._worker.onmessage=this._onWorkerMessage.bind(this),this._startPromise=this._doCmd("_setupWorker",[this._dbName]).then(()=>{i.logger.log("IndexedDB worker is ready")})),this._startPromise},_doCmd:function(t,e){return Promise.resolve().then(()=>{const n=this._nextSeq++,i=(0,r.defer)();return this._inFlight[n]=i,this._worker.postMessage({command:t,seq:n,args:e}),i.promise})},_onWorkerMessage:function(t){const e=t.data;if("cmd_success"==e.command||"cmd_fail"==e.command){if(void 0===e.seq)return void i.logger.error("Got reply from worker with no seq");const t=this._inFlight[e.seq];if(void 0===t)return void i.logger.error("Got reply for unknown seq "+e.seq);if(delete this._inFlight[e.seq],"cmd_success"==e.command)t.resolve(e.result);else{const n=new Error(e.error.message);n.name=e.error.name,t.reject(n)}}else i.logger.warn("Unrecognised message from worker: "+e)}}},"/pNf":function(t,e,n){"use strict";var i=n("beRh"),r=RegExp(Object.keys(i).map((function(t){return t.replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1")})).join("|"),"g");function s(t){return i[t]}t.exports=function(t){return t.replace(r,s)}},0:function(t,e,n){t.exports=n("zUnb")},"0ZCT":function(t,e,n){"use strict";for(var i=/[\\\"\x00-\x1F]/g,r={},s=0;s<32;++s)r[String.fromCharCode(s)]="\\U"+("0000"+s.toString(16)).slice(-4).toUpperCase();function o(t){return i.lastIndex=0,t.replace(i,(function(t){return r[t]}))}r["\b"]="\\b",r["\t"]="\\t",r["\n"]="\\n",r["\f"]="\\f",r["\r"]="\\r",r['"']='\\"',r["\\"]="\\\\",t.exports={stringify:function t(e){switch(typeof e){case"string":return'"'+o(e)+'"';case"number":return isFinite(e)?e:"null";case"boolean":return e;case"object":return null===e?"null":Array.isArray(e)?function(e){for(var n="[",i="",r=0;r<e.length;++r)i+=n,n=",",i+=t(e[r]);return","!=n?"[]":i+"]"}(e):function(e){var n="{",i="",r=Object.keys(e);r.sort();for(var s=0;s<r.length;++s){var a=r[s];i+=n+'"'+o(a)+'":',n=",",i+=t(e[a])}return","!=n?"{}":i+"}"}(e);default:throw new Error("Cannot stringify: "+typeof e)}}}},"0jNN":function(t,e,n){"use strict";var i=Object.prototype.hasOwnProperty,r=Array.isArray,s=function(){for(var t=[],e=0;e<256;++e)t.push("%"+((e<16?"0":"")+e.toString(16)).toUpperCase());return t}(),o=function(t,e){for(var n=e&&e.plainObjects?Object.create(null):{},i=0;i<t.length;++i)void 0!==t[i]&&(n[i]=t[i]);return n};t.exports={arrayToObject:o,assign:function(t,e){return Object.keys(e).reduce((function(t,n){return t[n]=e[n],t}),t)},combine:function(t,e){return[].concat(t,e)},compact:function(t){for(var e=[{obj:{o:t},prop:"o"}],n=[],i=0;i<e.length;++i)for(var s=e[i],o=s.obj[s.prop],a=Object.keys(o),c=0;c<a.length;++c){var l=a[c],u=o[l];"object"==typeof u&&null!==u&&-1===n.indexOf(u)&&(e.push({obj:o,prop:l}),n.push(u))}return function(t){for(;t.length>1;){var e=t.pop(),n=e.obj[e.prop];if(r(n)){for(var i=[],s=0;s<n.length;++s)void 0!==n[s]&&i.push(n[s]);e.obj[e.prop]=i}}}(e),t},decode:function(t,e,n){var i=t.replace(/\+/g," ");if("iso-8859-1"===n)return i.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(i)}catch(r){return i}},encode:function(t,e,n){if(0===t.length)return t;var i="string"==typeof t?t:String(t);if("iso-8859-1"===n)return escape(i).replace(/%u[0-9a-f]{4}/gi,(function(t){return"%26%23"+parseInt(t.slice(2),16)+"%3B"}));for(var r="",o=0;o<i.length;++o){var a=i.charCodeAt(o);45===a||46===a||95===a||126===a||a>=48&&a<=57||a>=65&&a<=90||a>=97&&a<=122?r+=i.charAt(o):a<128?r+=s[a]:a<2048?r+=s[192|a>>6]+s[128|63&a]:a<55296||a>=57344?r+=s[224|a>>12]+s[128|a>>6&63]+s[128|63&a]:(a=65536+((1023&a)<<10|1023&i.charCodeAt(o+=1)),r+=s[240|a>>18]+s[128|a>>12&63]+s[128|a>>6&63]+s[128|63&a])}return r},isBuffer:function(t){return!(!t||"object"!=typeof t||!(t.constructor&&t.constructor.isBuffer&&t.constructor.isBuffer(t)))},isRegExp:function(t){return"[object RegExp]"===Object.prototype.toString.call(t)},merge:function t(e,n,s){if(!n)return e;if("object"!=typeof n){if(r(e))e.push(n);else{if(!e||"object"!=typeof e)return[e,n];(s&&(s.plainObjects||s.allowPrototypes)||!i.call(Object.prototype,n))&&(e[n]=!0)}return e}if(!e||"object"!=typeof e)return[e].concat(n);var a=e;return r(e)&&!r(n)&&(a=o(e,s)),r(e)&&r(n)?(n.forEach((function(n,r){if(i.call(e,r)){var o=e[r];o&&"object"==typeof o&&n&&"object"==typeof n?e[r]=t(o,n,s):e.push(n)}else e[r]=n})),e):Object.keys(n).reduce((function(e,r){var o=n[r];return e[r]=i.call(e,r)?t(e[r],o,s):o,e}),a)}}},"1F5k":function(t,e,n){"use strict";var i=n("284h");Object.defineProperty(e,"__esModule",{value:!0}),e.MatrixHttpApi=c,e.retryNetworkOperation=async function(t,e){let n=0,i=null;for(;n<t;)try{if(n>0){const t=1e3*Math.pow(2,n);console.log(`network operation failed ${n} times, retrying in ${t}ms...`),await new Promise(e=>setTimeout(e,t))}return await e()}catch(r){if(!(r instanceof h))throw r;n+=1,i=r}throw i},e.AbortError=e.ConnectionError=e.MatrixError=e.PREFIX_MEDIA_R0=e.PREFIX_IDENTITY_V2=e.PREFIX_IDENTITY_V1=e.PREFIX_UNSTABLE=e.PREFIX_R0=void 0;var r=n("tA+R"),s=i(n("t+e4")),o=n("PrRn"),a=i(n("M/Il"));function c(t,e){s.checkObjectHasKeys(e,["baseUrl","request","prefix"]),e.onlyData=e.onlyData||!1,this.event_emitter=t,this.opts=e,this.useAuthorizationHeader=Boolean(e.useAuthorizationHeader),this.uploads=[]}e.PREFIX_R0="/_matrix/client/r0",e.PREFIX_UNSTABLE="/_matrix/client/unstable",e.PREFIX_IDENTITY_V1="/_matrix/identity/api/v1",e.PREFIX_IDENTITY_V2="/_matrix/identity/v2",e.PREFIX_MEDIA_R0="/_matrix/media/r0",c.prototype={setIdBaseUrl:function(t){this.opts.idBaseUrl=t},getContentUri:function(){return{base:this.opts.baseUrl,path:"/_matrix/media/r0/upload",params:{access_token:this.opts.accessToken}}},uploadContent:function(t,e){s.isFunction(e)?e={callback:e}:void 0===e&&(e={});const n=!1!==e.includeFilename,i=e.type||t.type||"application/octet-stream",r=e.name||t.name;let c=t;c.stream&&"function"!=typeof c.stream&&(o.logger.warn("Using `file.stream` as the content to upload. Future versions of the js-sdk will change this to expect `file` to be the content directly."),c=c.stream);let u=e.rawResponse;void 0===u&&(global.XMLHttpRequest?u=!1:(o.logger.warn("Returning the raw JSON from uploadContent(). Future versions of the js-sdk will change this default, to return the parsed object. Set opts.rawResponse=false to change this behaviour now."),u=!0));let h=e.onlyContentUri;u||void 0!==h||(global.XMLHttpRequest?(o.logger.warn("Returning only the content-uri from uploadContent(). Future versions of the js-sdk will change this default, to return the whole response object. Set opts.onlyContentUri=false to change this behaviour now."),h=!0):h=!1);const p={loaded:0,total:0};let m,f=null;if(u||(f=function(t){let e=JSON.parse(t);if(h&&(e=e.content_uri,void 0===e))throw Error("Bad response");return e}),global.XMLHttpRequest){const t=s.defer(),o=new global.XMLHttpRequest;p.xhr=o;const u=l(t,e.callback,this.opts.onlyData),h=function(){o.abort(),u(new Error("Timeout"))};o.timeout_timer=a.setTimeout(h,3e4),o.onreadystatechange=function(){switch(o.readyState){case global.XMLHttpRequest.DONE:var t;a.clearTimeout(o.timeout_timer);try{if(0===o.status)throw new d;if(!o.responseText)throw new Error("No response body.");t=o.responseText,f&&(t=f(t))}catch(e){return e.http_status=o.status,void u(e)}u(void 0,o,t)}},o.upload.addEventListener("progress",(function(t){a.clearTimeout(o.timeout_timer),p.loaded=t.loaded,p.total=t.total,o.timeout_timer=a.setTimeout(h,3e4),e.progressHandler&&e.progressHandler({loaded:t.loaded,total:t.total})}));let g=this.opts.baseUrl+"/_matrix/media/r0/upload";const _=[];n&&r&&_.push("filename="+encodeURIComponent(r)),this.useAuthorizationHeader||_.push("access_token="+encodeURIComponent(this.opts.accessToken)),_.length>0&&(g+="?"+_.join("&")),o.open("POST",g),this.useAuthorizationHeader&&o.setRequestHeader("Authorization","Bearer "+this.opts.accessToken),o.setRequestHeader("Content-Type",i),o.send(c),m=t.promise,m.abort=o.abort.bind(o)}else{const t={};n&&r&&(t.filename=r),m=this.authedRequest(e.callback,"POST","/upload",t,c,{prefix:"/_matrix/media/r0",headers:{"Content-Type":i},json:!1,bodyParser:f})}const g=this,_=m.finally((function(){for(let t=0;t<g.uploads.length;++t)if(g.uploads[t]===p)return void g.uploads.splice(t,1)}));return _.abort=m.abort,p.promise=_,this.uploads.push(p),_},cancelUpload:function(t){return!!t.abort&&(t.abort(),!0)},getCurrentUploads:function(){return this.uploads},idServerRequest:function(t,e,n,i,r,o){if(!this.opts.idBaseUrl)throw new Error("No Identity Server base URL set");const a=this.opts.idBaseUrl+r+n;if(void 0!==t&&!s.isFunction(t))throw Error("Expected callback to be a function but got "+typeof t);const c={uri:a,method:e,withCredentials:!1,json:!0,_matrix_opts:this.opts,headers:{}};"GET"===e?c.qs=i:"object"==typeof i&&(c.json=i),o&&(c.headers.Authorization="Bearer "+o);const u=s.defer();return this.opts.request(c,l(u,t,this.opts.onlyData)),u.promise},authedRequest:function(t,e,n,i,r,s){i||(i={}),this.useAuthorizationHeader?(isFinite(s)&&(s={localTimeoutMs:s}),s||(s={}),s.headers||(s.headers={}),s.headers.Authorization||(s.headers.Authorization="Bearer "+this.opts.accessToken),i.access_token&&delete i.access_token):i.access_token||(i.access_token=this.opts.accessToken);const o=this.request(t,e,n,i,r,s),a=this;return o.catch((function(t){"M_UNKNOWN_TOKEN"==t.errcode?a.event_emitter.emit("Session.logged_out",t):"M_CONSENT_NOT_GIVEN"==t.errcode&&a.event_emitter.emit("no_consent",t.message,t.data.consent_uri)})),o},request:function(t,e,n,i,r,s){return this.requestOtherUrl(t,e,this.opts.baseUrl+(void 0!==(s=s||{}).prefix?s.prefix:this.opts.prefix)+n,i,r,s)},requestOtherUrl:function(t,e,n,i,r,s){return null==s?s={}:isFinite(s)&&(s={localTimeoutMs:s}),this._request(t,e,n,i,r,s)},getUrl:function(t,e,n){let i="";return e&&(i="?"+s.encodeParams(e)),this.opts.baseUrl+n+t+i},_request:function(t,e,n,i,r,o){if(void 0!==t&&!s.isFunction(t))throw Error("Expected callback to be a function but got "+typeof t);o=o||{};const c=this;if(this.opts.extraParams)for(const s in this.opts.extraParams)this.opts.extraParams.hasOwnProperty(s)&&(i[s]=this.opts.extraParams[s]);const h=s.extend({},o.headers||{});let d=o.bodyParser;(void 0===o.json||o.json)&&(r&&(r=JSON.stringify(r),h["content-type"]="application/json"),h.accept||(h.accept="application/json"),void 0===d&&(d=function(t){return JSON.parse(t)}));const p=s.defer();let m,f,g=!1;const _=o.localTimeoutMs||this.opts.localTimeoutMs,y=()=>{_&&(m&&a.clearTimeout(m),m=a.setTimeout((function(){g=!0,f&&f.abort&&f.abort(),p.reject(new u({error:"Locally timed out waiting for a response",errcode:"ORG.MATRIX.JSSDK_TIMEOUT",timeout:_}))}),_))};y();const v=p.promise;try{f=this.opts.request({uri:n,method:e,withCredentials:!1,qs:i,qsStringifyOptions:o.qsStringifyOptions,useQuerystring:!0,body:r,json:!1,timeout:_,headers:h||{},_matrix_opts:this.opts},(function(e,n,i){_&&(a.clearTimeout(m),g)||l(p,t,c.opts.onlyData,d)(e,n,i)})),f&&("onprogress"in f&&(f.onprogress=t=>{y()}),f.abort&&(v.abort=f.abort.bind(f)))}catch(b){p.reject(b),t&&t(b)}return v}};const l=function(t,e,n,i){return e=e||function(){},function(s,o,a){if(s&&("AbortError"===s.name||"aborted"===s||s instanceof u||(s=new h("request failed",s))),!s)try{o.statusCode>=400?s=function(t,e){const n=t.statusCode,i=function(t){let e;if(t.getResponseHeader?e=t.getResponseHeader("Content-Type"):t.headers&&(e=t.headers["content-type"]||null),!e)return null;try{return(0,r.parse)(e)}catch(n){throw new Error(`Error parsing Content-Type '${e}': ${n}`)}}(t);let s;if(i)if("application/json"===i.type){const t="object"==typeof e?e:JSON.parse(e);s=new u(t)}else"text/plain"===i.type&&(s=new Error(`Server returned ${n} error: ${e}`));return s||(s=new Error(`Server returned ${n} error`)),s.httpStatus=n,s}(o,a):i&&(a=i(a))}catch(c){s=new Error("Error parsing server response: "+c)}if(s)t.reject(s),e(s);else{const i={code:o.statusCode,headers:o.headers,data:a};t.resolve(n?a:i),e(null,n?a:i)}}};class u extends Error{constructor(t){super("MatrixError: "+(t=t||{}).errcode),this.errcode=t.errcode,this.name=t.errcode||"Unknown error code",this.message=t.error||"Unknown message",this.data=t}}e.MatrixError=u;class h extends Error{constructor(t,e){super(t+(e?": "+e.message:"")),this._cause=e}get name(){return"ConnectionError"}get cause(){return this._cause}}e.ConnectionError=h;class d extends Error{constructor(){super("Operation aborted")}get name(){return"AbortError"}}e.AbortError=d},"284h":function(t,e,n){var i=n("cDf5");function r(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return r=function(){return t},t}t.exports=function(t){if(t&&t.__esModule)return t;if(null===t||"object"!==i(t)&&"function"!=typeof t)return{default:t};var e=r();if(e&&e.has(t))return e.get(t);var n={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in t)if(Object.prototype.hasOwnProperty.call(t,o)){var a=s?Object.getOwnPropertyDescriptor(t,o):null;a&&(a.get||a.set)?Object.defineProperty(n,o,a):n[o]=t[o]}return n.default=t,e&&e.set(t,n),n}},"3afC":function(t,e,n){"use strict";var i=n("TqRt");Object.defineProperty(e,"__esModule",{value:!0}),e.VerificationRequest=e.PHASE_DONE=e.PHASE_CANCELLED=e.PHASE_STARTED=e.PHASE_READY=e.PHASE_REQUESTED=e.PHASE_UNSENT=e.READY_TYPE=e.DONE_TYPE=e.CANCEL_TYPE=e.START_TYPE=e.REQUEST_TYPE=e.EVENT_PREFIX=void 0;var r=i(n("lSNA")),s=n("PrRn"),o=n("+qE3"),a=n("VEe5"),c=n("ucoE");const l="m.key.verification.";e.EVENT_PREFIX=l;const u=l+"request";e.REQUEST_TYPE=u;const h=l+"start";e.START_TYPE=h;const d=l+"cancel";e.CANCEL_TYPE=d,e.DONE_TYPE="m.key.verification.done";const p=l+"ready";e.READY_TYPE=p,e.PHASE_UNSENT=1,e.PHASE_REQUESTED=2,e.PHASE_READY=3,e.PHASE_STARTED=4,e.PHASE_CANCELLED=5,e.PHASE_DONE=6,e.VerificationRequest=class extends o.EventEmitter{constructor(t,e,n){super(),(0,r.default)(this,"_cancelOnTimeout",()=>{try{this.cancel(this.initiatedByMe?{reason:"Other party didn't accept in time",code:"m.timeout"}:{reason:"User didn't accept in time",code:"m.timeout"})}catch(t){s.logger.error("Error while cancelling verification request",t)}}),this.channel=t,this.channel._request=this,this._verificationMethods=e,this._client=n,this._commonMethods=[],this._setPhase(1,!1),this._eventsByUs=new Map,this._eventsByThem=new Map,this._observeOnly=!1,this._timeoutTimer=null,this._accepting=!1,this._declining=!1,this._verifierHasFinished=!1,this._cancelled=!1,this._chosenMethod=null,this._qrCodeData=null,this._requestReceivedAt=null}static validateEvent(t,e,n){const i=e.getContent();return!(!t||!t.startsWith(l))&&(i?t!==u&&t!==p||Array.isArray(i.methods)?t!==u&&t!==p&&t!==h||"string"==typeof i.from_device&&0!==i.from_device.length||(s.logger.log("VerificationRequest: validateEvent: fail because from_device"),!1):(s.logger.log("VerificationRequest: validateEvent: fail because methods"),!1):(s.logger.log("VerificationRequest: validateEvent: no content"),!1))}get invalid(){return 1===this.phase}get requested(){return 2===this.phase}get cancelled(){return 5===this.phase}get ready(){return 3===this.phase}get started(){return 4===this.phase}get done(){return 6===this.phase}get methods(){return this._commonMethods}get chosenMethod(){return this._chosenMethod}calculateEventTimeout(t){let e=this.channel.getTimestamp(t)+6e5;return this._requestReceivedAt&&!this.initiatedByMe&&this.phase<=2&&(e=Math.min(e,this._requestReceivedAt+12e4)),Math.max(0,e-Date.now())}get timeout(){const t=this._getEventByEither(u);return t?this.calculateEventTimeout(t):0}get requestEvent(){return this._getEventByEither(u)}get phase(){return this._phase}get verifier(){return this._verifier}get canAccept(){return this.phase<3&&!this._accepting&&!this._declining}get accepting(){return this._accepting}get declining(){return this._declining}get pending(){return!this.observeOnly&&6!==this._phase&&5!==this._phase}get qrCodeData(){return this._qrCodeData}otherPartySupportsMethod(t,e=!1){if(!e&&!this.ready&&!this.started)return!1;const n=this._eventsByThem.get(u)||this._eventsByThem.get(p);if(!n){if(this.started&&this.initiatedByMe){const e=this._eventsByUs.get(h),n=e&&e.getContent();return t==(n&&n.method)}return!1}const i=n.getContent();if(!i)return!1;const{methods:r}=i;return!!Array.isArray(r)&&r.includes(t)}get initiatedByMe(){if(1===this._phase&&this._eventsByUs.size+this._eventsByThem.size===0)return!0;const t=this._eventsByUs.has(u),e=this._eventsByThem.has(u);if(t&&!e)return!0;if(!t&&e)return!1;const n=this._eventsByUs.has(h),i=this._eventsByThem.has(h);return!(!n||i)}get requestingUserId(){return this.initiatedByMe?this._client.getUserId():this.otherUserId}get receivingUserId(){return this.initiatedByMe?this.otherUserId:this._client.getUserId()}get otherUserId(){return this.channel.userId}get isSelfVerification(){return this._client.getUserId()===this.otherUserId}get cancellingUserId(){const t=this._eventsByUs.get(d),e=this._eventsByThem.get(d);return t&&(!e||t.getId()<e.getId())?t.getSender():e?e.getSender():void 0}get cancellationCode(){const t=this._getEventByEither(d);return t?t.getContent().code:null}get observeOnly(){return this._observeOnly}get targetDevice(){const t=(this._eventsByThem.get(u)||this._eventsByThem.get(p)||this._eventsByThem.get(h)).getContent();return{userId:this.otherUserId,deviceId:t.from_device}}beginKeyVerification(t,e=null){if(!this.observeOnly&&!this._verifier&&(2===this.phase||3===this.phase||1===this.phase&&this.channel.constructor.canCreateRequest(h))){if(this._commonMethods.length&&!this._commonMethods.includes(t))throw(0,a.newUnknownMethodError)();if(this._verifier=this._createVerifier(t,null,e),!this._verifier)throw(0,a.newUnknownMethodError)();this._chosenMethod=t}return this._verifier}async sendRequest(){if(!this.observeOnly&&1===this._phase){const t=[...this._verificationMethods.keys()];await this.channel.send(u,{methods:t})}}async cancel({reason:t="User declined",code:e="m.user"}={}){if(!this.observeOnly&&5!==this._phase){if(this._declining=!0,this.emit("change"),this._verifier)return this._verifier.cancel((0,a.errorFactory)(e,t)());this._cancellingUserId=this._client.getUserId(),await this.channel.send(d,{code:e,reason:t})}}async accept(){if(!this.observeOnly&&2===this.phase&&!this.initiatedByMe){const t=[...this._verificationMethods.keys()];this._accepting=!0,this.emit("change"),await this.channel.send(p,{methods:t})}}waitFor(t){return new Promise((e,n)=>{const i=()=>{let r=!1;return t(this)?(e(this),r=!0):this.cancelled&&(n(new Error("cancelled")),r=!0),r&&this.off("change",i),r};i()||this.on("change",i)})}_setPhase(t,e=!0){this._phase=t,e&&this.emit("change")}_getEventByEither(t){return this._eventsByThem.get(t)||this._eventsByUs.get(t)}_getEventBy(t,e){return e?this._eventsByThem.get(t):this._eventsByUs.get(t)}_calculatePhaseTransitions(){const t=[{phase:1}],e=()=>t[t.length-1].phase,n=this._eventsByThem.has(u),i=this._getEventBy(u,n);i&&t.push({phase:2,event:i});const r=i&&this._getEventBy(p,!n);let s;if(r&&2===e()&&t.push({phase:3,event:r}),r||!i){const t=this._eventsByThem.get(h),e=this._eventsByUs.get(h);s=t&&e?t.getSender()<e.getSender()?t:e:t||e}else s=this._getEventBy(h,!n);if(s){const n=2===e()&&i.getSender()!==s.getSender(),r=1===e()&&this.channel.constructor.canCreateRequest(h);(n||3===e()||r)&&t.push({phase:4,event:s})}const o=this._eventsByUs.get("m.key.verification.done");(this._verifierHasFinished||o&&4===e())&&t.push({phase:6});const a=this._getEventByEither(d);return(this._cancelled||a)&&6!==e()?(t.push({phase:5,event:a}),t):t}_transitionToPhase(t){const{phase:e,event:n}=t;if((2===e||3===e)&&!this._wasSentByOwnDevice(n)){const t=n.getContent();this._commonMethods=t.methods.filter(t=>this._verificationMethods.has(t))}if(this.observeOnly||2!==e&&4!==e&&3!==e||this.channel.receiveStartFromOtherDevices&&this._wasSentByOwnUser(n)&&!this._wasSentByOwnDevice(n)&&(this._observeOnly=!0),4===e){const{method:t}=n.getContent();this._verifier||this.observeOnly||(this._verifier=this._createVerifier(t,n),this._verifier?this._chosenMethod=t:this.cancel({code:"m.unknown_method",reason:"Unknown method: "+t}))}}_applyPhaseTransitions(){const t=this._calculatePhaseTransitions(),e=t.findIndex(t=>t.phase===this.phase),n=t.slice(e+1);for(const i of n)this._transitionToPhase(i);return n}_isWinningStartRace(t){if(t.getType()!==h)return!1;const e=this._verifier.startEvent;let n,i;if(this.isSelfVerification)if(e){const t=e.getContent();n=t&&t.from_device}else n=this._client.getDeviceId();else n=e?e.getSender():this._client.getUserId();if(this.isSelfVerification){const e=t.getContent();i=e&&e.from_device}else i=t.getSender();return i<n}hasEventId(t){for(const e of this._eventsByUs.values())if(e.getId()===t)return!0;for(const e of this._eventsByThem.values())if(e.getId()===t)return!0;return!1}async handleEvent(t,e,n,i,r){if(this.done||this.cancelled)return;const o=this._observeOnly;if(this._adjustObserveOnly(e,n),!this.observeOnly&&!i&&await this._cancelOnError(t,e))return;if(r?this._eventsByUs.has(t):this._eventsByThem.has(t))return;const a=this.phase;this._addEvent(t,e,r);const l=this._applyPhaseTransitions();try{if(this._verifier&&!this.observeOnly){const n=this._isWinningStartRace(e);this._verifier.canSwitchStartEvent(e)&&n?this._verifier.switchStartEvent(e):i||(t===d||this._verifier.events&&this._verifier.events.includes(t))&&this._verifier.handleEvent(e)}if(l.length){n&&l.some(t=>3===t.phase)&&this.otherPartySupportsMethod(c.SCAN_QR_CODE_METHOD,!0)&&(this._qrCodeData=await c.QRCodeData.create(this,this._client));const t=l[l.length-1],{phase:e}=t;this._setupTimeout(e),this._setPhase(e)}else this._observeOnly!==o&&this.emit("change")}finally{s.logger.log(`Verification request ${this.channel.transactionId}: ${t} event with id:${e.getId()}, content:${JSON.stringify(e.getContent())} deviceId:${this.channel.deviceId}, sender:${e.getSender()}, isSentByUs:${r}, isLiveEvent:${n}, isRemoteEcho:${i}, phase:${a}=>${this.phase}, observeOnly:${o}=>${this._observeOnly}`)}}_setupTimeout(t){!this._timeoutTimer&&!this.observeOnly&&2===t&&(this._timeoutTimer=setTimeout(this._cancelOnTimeout,this.timeout)),this._timeoutTimer&&(4===t||3===t||6===t||5===t)&&(clearTimeout(this._timeoutTimer),this._timeoutTimer=null)}async _cancelOnError(t,e){if(t===h){const t=e.getContent().method;if(!this._verificationMethods.has(t))return await this.cancel((0,a.errorFromEvent)((0,a.newUnknownMethodError)())),!0}if(1!==this.phase&&(t===u&&1!==this.phase||t===p&&2!==this.phase)){s.logger.warn(`Cancelling, unexpected ${t} verification event from `+e.getSender());const n=`Unexpected ${t} event in phase ${this.phase}`;return await this.cancel((0,a.errorFromEvent)((0,a.newUnexpectedMessageError)({reason:n}))),!0}return!1}_adjustObserveOnly(t,e){e||(this._observeOnly=!0),this.calculateEventTimeout(t)<3e3&&(this._observeOnly=!0)}_addEvent(t,e,n){if(n?this._eventsByUs.set(t,e):this._eventsByThem.set(t,e),t===u){for(const[t,e]of this._eventsByThem.entries())e.getSender()!==this.otherUserId&&this._eventsByThem.delete(t);this._requestReceivedAt=Date.now()}}_createVerifier(t,e=null,n=null){n||(n=this.targetDevice);const{userId:i,deviceId:r}=n,o=this._verificationMethods.get(t);if(o)return new o(this.channel,this._client,i,r,e,this);s.logger.warn("could not find verifier constructor for method",t)}_wasSentByOwnUser(t){return t.getSender()===this._client.getUserId()}_wasSentByOwnDevice(t){if(!this._wasSentByOwnUser(t))return!1;const e=t.getContent();return!(!e||e.from_device!==this._client.getDeviceId())}onVerifierCancelled(){this._cancelled=!0;const t=this._applyPhaseTransitions();t.length&&this._setPhase(t[t.length-1].phase)}onVerifierFinished(){this.channel.send("m.key.verification.done",{}),this._verifierHasFinished=!0;const t=this._applyPhaseTransitions();t.length&&this._setPhase(t[t.length-1].phase)}getEventFromOtherParty(t){return this._eventsByThem.get(t)}}},"3sFX":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SyncAccumulator=void 0;var i=n("PrRn"),r=n("t+e4");function s(t,e){null!=e.state_key&&e.type&&(t[e.type]||(t[e.type]=Object.create(null)),t[e.type][e.state_key]=e)}e.SyncAccumulator=class{constructor(t){(t=t||{}).maxTimelineEntries=t.maxTimelineEntries||50,this.opts=t,this.accountData={},this.inviteRooms={},this.joinRooms={},this.nextBatch=null,this.groups={invite:{},join:{},leave:{}}}accumulate(t){this._accumulateRooms(t),this._accumulateGroups(t),this._accumulateAccountData(t),this.nextBatch=t.next_batch}_accumulateAccountData(t){t.account_data&&t.account_data.events&&t.account_data.events.forEach(t=>{this.accountData[t.type]=t})}_accumulateRooms(t){t.rooms&&(t.rooms.invite&&Object.keys(t.rooms.invite).forEach(e=>{this._accumulateRoom(e,"invite",t.rooms.invite[e])}),t.rooms.join&&Object.keys(t.rooms.join).forEach(e=>{this._accumulateRoom(e,"join",t.rooms.join[e])}),t.rooms.leave&&Object.keys(t.rooms.leave).forEach(e=>{this._accumulateRoom(e,"leave",t.rooms.leave[e])}))}_accumulateRoom(t,e,n){switch(e){case"invite":this._accumulateInviteState(t,n);break;case"join":this.inviteRooms[t]&&delete this.inviteRooms[t],this._accumulateJoinState(t,n);break;case"leave":this.inviteRooms[t]?delete this.inviteRooms[t]:delete this.joinRooms[t];break;default:i.logger.error("Unknown cateogory: ",e)}}_accumulateInviteState(t,e){if(!e.invite_state||!e.invite_state.events)return;if(!this.inviteRooms[t])return void(this.inviteRooms[t]={invite_state:e.invite_state});const n=this.inviteRooms[t];e.invite_state.events.forEach(t=>{let e=!1;for(let i=0;i<n.invite_state.events.length;i++){const r=n.invite_state.events[i];r.type===t.type&&r.state_key==t.state_key&&(n.invite_state.events[i]=t,e=!0)}e||n.invite_state.events.push(t)})}_accumulateJoinState(t,e){this.joinRooms[t]||(this.joinRooms[t]={_currentState:Object.create(null),_timeline:[],_accountData:Object.create(null),_unreadNotifications:{},_summary:{},_readReceipts:{}});const n=this.joinRooms[t];if(e.account_data&&e.account_data.events&&e.account_data.events.forEach(t=>{n._accountData[t.type]=t}),e.unread_notifications&&(n._unreadNotifications=e.unread_notifications),e.summary){const t="m.heroes",i="m.invited_member_count",r="m.joined_member_count",s=n._summary,o=e.summary;s[t]=o[t]||s[t],s[r]=o[r]||s[r],s[i]=o[i]||s[i]}if(e.ephemeral&&e.ephemeral.events&&e.ephemeral.events.forEach(t=>{"m.receipt"===t.type&&t.content&&Object.keys(t.content).forEach(e=>{t.content[e]["m.read"]&&Object.keys(t.content[e]["m.read"]).forEach(i=>{n._readReceipts[i]={data:t.content[e]["m.read"][i],eventId:e}})})}),e.timeline&&e.timeline.limited&&(n._timeline=[]),e.state&&e.state.events&&e.state.events.forEach(t=>{s(n._currentState,t)}),e.timeline&&e.timeline.events&&e.timeline.events.forEach((t,i)=>{s(n._currentState,t),n._timeline.push({event:t,token:0===i?e.timeline.prev_batch:null})}),n._timeline.length>this.opts.maxTimelineEntries)for(let i=n._timeline.length-this.opts.maxTimelineEntries;i<n._timeline.length;i++)if(n._timeline[i].token){n._timeline=n._timeline.slice(i,n._timeline.length);break}}_accumulateGroups(t){t.groups&&(t.groups.invite&&Object.keys(t.groups.invite).forEach(e=>{this._accumulateGroup(e,"invite",t.groups.invite[e])}),t.groups.join&&Object.keys(t.groups.join).forEach(e=>{this._accumulateGroup(e,"join",t.groups.join[e])}),t.groups.leave&&Object.keys(t.groups.leave).forEach(e=>{this._accumulateGroup(e,"leave",t.groups.leave[e])}))}_accumulateGroup(t,e,n){for(const i of["invite","join","leave"])delete this.groups[i][t];this.groups[e][t]=n}getJSON(){const t={join:{},invite:{},leave:{}};Object.keys(this.inviteRooms).forEach(e=>{t.invite[e]=this.inviteRooms[e]}),Object.keys(this.joinRooms).forEach(e=>{const n=this.joinRooms[e],i={ephemeral:{events:[]},account_data:{events:[]},state:{events:[]},timeline:{events:[],prev_batch:null},unread_notifications:n._unreadNotifications,summary:n._summary};Object.keys(n._accountData).forEach(t=>{i.account_data.events.push(n._accountData[t])});const o={type:"m.receipt",room_id:e,content:{}};Object.keys(n._readReceipts).forEach(t=>{const e=n._readReceipts[t];o.content[e.eventId]||(o.content[e.eventId]={"m.read":{}}),o.content[e.eventId]["m.read"][t]=e.data}),Object.keys(o.content).length>0&&i.ephemeral.events.push(o),n._timeline.forEach(t=>{if(!i.timeline.prev_batch){if(!t.token)return;i.timeline.prev_batch=t.token}i.timeline.events.push(t.event)});const a=Object.create(null);for(let t=i.timeline.events.length-1;t>=0;t--){const e=i.timeline.events[t];if(null==e.state_key)continue;const n=(0,r.deepCopy)(e);n.unsigned&&(n.unsigned.prev_content&&(n.content=n.unsigned.prev_content),n.unsigned.prev_sender&&(n.sender=n.unsigned.prev_sender)),s(a,n)}Object.keys(n._currentState).forEach(t=>{Object.keys(n._currentState[t]).forEach(e=>{let r=n._currentState[t][e];a[t]&&a[t][e]&&(r=a[t][e]),i.state.events.push(r)})}),t.join[e]=i});const e=[];return Object.keys(this.accountData).forEach(t=>{e.push(this.accountData[t])}),{nextBatch:this.nextBatch,roomsData:t,groupsData:this.groups,accountData:e}}getNextBatchToken(){return this.nextBatch}}},"49sm":function(t,e){var n={}.toString;t.exports=Array.isArray||function(t){return"[object Array]"==n.call(t)}},"4Cle":function(t,e,n){"use strict";var i=n("284h");Object.defineProperty(e,"__esModule",{value:!0}),e.RoomState=c;var r=n("+qE3"),s=n("vR9v"),o=n("PrRn"),a=i(n("t+e4"));function c(t,e){this.roomId=t,this.members={},this.events={},this.paginationToken=null,this._sentinels={},this._updateModifiedTime(),this._displayNameToUserIds={},this._userIdsToDisplayNames={},this._tokenToInvite={},this._joinedMemberCount=null,this._summaryJoinedMemberCount=null,this._invitedMemberCount=null,this._summaryInvitedMemberCount=null,e||(e={status:1}),this._oobMemberFlags=e}function l(t,e,n){const i=t._userIdsToDisplayNames[e];if(delete t._userIdsToDisplayNames[e],i){const n=a.removeHiddenChars(i),r=t._displayNameToUserIds[n];if(r){const i=r.filter(t=>t!==e);t._displayNameToUserIds[n]=i}}t._userIdsToDisplayNames[e]=n;const r=n&&a.removeHiddenChars(n);r&&(t._displayNameToUserIds[r]||(t._displayNameToUserIds[r]=[]),t._displayNameToUserIds[r].push(e))}a.inherits(c,r.EventEmitter),c.prototype.getJoinedMemberCount=function(){return null!==this._summaryJoinedMemberCount?this._summaryJoinedMemberCount:(null===this._joinedMemberCount&&(this._joinedMemberCount=this.getMembers().reduce((t,e)=>"join"===e.membership?t+1:t,0)),this._joinedMemberCount)},c.prototype.setJoinedMemberCount=function(t){this._summaryJoinedMemberCount=t},c.prototype.getInvitedMemberCount=function(){return null!==this._summaryInvitedMemberCount?this._summaryInvitedMemberCount:(null===this._invitedMemberCount&&(this._invitedMemberCount=this.getMembers().reduce((t,e)=>"invite"===e.membership?t+1:t,0)),this._invitedMemberCount)},c.prototype.setInvitedMemberCount=function(t){this._summaryInvitedMemberCount=t},c.prototype.getMembers=function(){return a.values(this.members)},c.prototype.getMembersExcept=function(t){return a.values(this.members).filter(e=>!t.includes(e.userId))},c.prototype.getMember=function(t){return this.members[t]||null},c.prototype.getSentinelMember=function(t){if(!t)return null;let e=this._sentinels[t];if(void 0===e){e=new s.RoomMember(this.roomId,t);const n=this.members[t];n&&e.setMembershipEvent(n.events.member,this),this._sentinels[t]=e}return e},c.prototype.getStateEvents=function(t,e){return this.events[t]?void 0===e?a.values(this.events[t]):this.events[t][e]||null:void 0===e?[]:null},c.prototype.clone=function(){const t=new c(this.roomId,this._oobMemberFlags),e=this._oobMemberFlags.status;return this._oobMemberFlags.status=1,Object.values(this.events).forEach(e=>{const n=Object.values(e);t.setStateEvents(n)}),this._oobMemberFlags.status=e,null!==this._summaryInvitedMemberCount&&t.setInvitedMemberCount(this.getInvitedMemberCount()),null!==this._summaryJoinedMemberCount&&t.setJoinedMemberCount(this.getJoinedMemberCount()),3==this._oobMemberFlags.status&&this.getMembers().forEach(e=>{e.isOutOfBand()&&t.getMember(e.userId).markOutOfBand()}),t},c.prototype.setUnknownStateEvents=function(t){const e=t.filter(t=>void 0===this.events[t.getType()]||void 0===this.events[t.getType()][t.getStateKey()]);this.setStateEvents(e)},c.prototype.setStateEvents=function(t){const e=this;this._updateModifiedTime(),a.forEach(t,(function(t){if(t.getRoomId()!==e.roomId)return;if(!t.isState())return;const n=e._getStateEventMatching(t);e._setStateEvent(t),"m.room.member"===t.getType()&&(l(e,t.getStateKey(),t.getContent().displayname),function(t,e){if(!e.getContent().third_party_invite)return;const n=(e.getContent().third_party_invite.signed||{}).token;n&&t.getStateEvents("m.room.third_party_invite",n)&&(t._tokenToInvite[n]=e)}(e,t)),e.emit("RoomState.events",t,e,n)})),a.forEach(t,(function(t){if(t.getRoomId()===e.roomId&&t.isState())if("m.room.member"===t.getType()){const n=t.getStateKey();"leave"!==t.getContent().membership&&"ban"!==t.getContent().membership||(t.getContent().avatar_url=t.getContent().avatar_url||t.getPrevContent().avatar_url,t.getContent().displayname=t.getContent().displayname||t.getPrevContent().displayname);const i=e._getOrCreateMember(n,t);i.setMembershipEvent(t,e),e._updateMember(i),e.emit("RoomState.members",t,e,i)}else if("m.room.power_levels"===t.getType()){const n=a.values(e.members);a.forEach(n,(function(n){n.setPowerLevelEvent(t),e.emit("RoomState.members",t,e,n)})),e._sentinels={}}}))},c.prototype._getOrCreateMember=function(t,e){let n=this.members[t];return n||(n=new s.RoomMember(this.roomId,t),this.members[t]=n,this.emit("RoomState.newMember",e,this,n)),n},c.prototype._setStateEvent=function(t){void 0===this.events[t.getType()]&&(this.events[t.getType()]={}),this.events[t.getType()][t.getStateKey()]=t},c.prototype._getStateEventMatching=function(t){return this.events[t.getType()]?this.events[t.getType()][t.getStateKey()]:null},c.prototype._updateMember=function(t){const e=this.getStateEvents("m.room.power_levels","");e&&t.setPowerLevelEvent(e),delete this._sentinels[t.userId],this.members[t.userId]=t,this._joinedMemberCount=null,this._invitedMemberCount=null},c.prototype.needsOutOfBandMembers=function(){return 1===this._oobMemberFlags.status},c.prototype.markOutOfBandMembersStarted=function(){1===this._oobMemberFlags.status&&(this._oobMemberFlags.status=2)},c.prototype.markOutOfBandMembersFailed=function(){2===this._oobMemberFlags.status&&(this._oobMemberFlags.status=1)},c.prototype.clearOutOfBandMembers=function(){let t=0;Object.keys(this.members).forEach(e=>{this.members[e].isOutOfBand()&&(++t,delete this.members[e])}),o.logger.log(`LL: RoomState removed ${t} members...`),this._oobMemberFlags.status=1},c.prototype.setOutOfBandMembers=function(t){o.logger.log(`LL: RoomState about to set ${t.length} OOB members ...`),2===this._oobMemberFlags.status&&(o.logger.log("LL: RoomState put in OOB_STATUS_FINISHED state ..."),this._oobMemberFlags.status=3,t.forEach(t=>this._setOutOfBandMember(t)))},c.prototype._setOutOfBandMember=function(t){if("m.room.member"!==t.getType())return;const e=t.getStateKey(),n=this.getMember(e);if(n&&!n.isOutOfBand())return;const i=this._getOrCreateMember(e,t);i.setMembershipEvent(t,this),i.markOutOfBand(),l(this,i.userId,i.name),this._setStateEvent(t),this._updateMember(i),this.emit("RoomState.members",t,this,i)},c.prototype.setTypingEvent=function(t){a.forEach(a.values(this.members),(function(e){e.setTypingEvent(t)}))},c.prototype.getInviteForThreePidToken=function(t){return this._tokenToInvite[t]||null},c.prototype._updateModifiedTime=function(){this._modified=Date.now()},c.prototype.getLastModifiedTime=function(){return this._modified},c.prototype.getUserIdsWithDisplayName=function(t){return this._displayNameToUserIds[a.removeHiddenChars(t)]||[]},c.prototype.maySendRedactionForEvent=function(t,e){const n=this.getMember(e);if(!n||"leave"===n.membership)return!1;if(t.status||t.isRedacted())return!1;const i=this.maySendEvent("m.room.redaction",e);return t.getSender()===e?i:this._hasSufficientPowerLevelFor("redact",n.powerLevel)},c.prototype._hasSufficientPowerLevelFor=function(t,e){const n=this.getStateEvents("m.room.power_levels","");let i={};n&&(i=n.getContent());let r=50;return a.isNumber(i[t])&&(r=i[t]),e>=r},c.prototype.maySendMessage=function(t){return this._maySendEventOfType("m.room.message",t,!1)},c.prototype.maySendEvent=function(t,e){return this._maySendEventOfType(t,e,!1)},c.prototype.mayClientSendStateEvent=function(t,e){return!e.isGuest()&&this.maySendStateEvent(t,e.credentials.userId)},c.prototype.maySendStateEvent=function(t,e){return this._maySendEventOfType(t,e,!0)},c.prototype._maySendEventOfType=function(t,e,n){const i=this.getStateEvents("m.room.power_levels","");let r,s={},o=0,a=0,c=0;if(i){r=i.getContent(),s=r.events||{},o=Number.isFinite(r.state_default)?r.state_default:50;const t=r.users&&r.users[e];Number.isFinite(t)?c=t:Number.isFinite(r.users_default)&&(c=r.users_default),Number.isFinite(r.events_default)&&(a=r.events_default)}let l=n?o:a;return Number.isFinite(s[t])&&(l=s[t]),c>=l},c.prototype.mayTriggerNotifOfType=function(t,e){const n=this.getMember(e);if(!n)return!1;const i=this.getStateEvents("m.room.power_levels","");let r=50;return i&&i.getContent()&&i.getContent().notifications&&a.isNumber(i.getContent().notifications[t])&&(r=i.getContent().notifications[t]),n.powerLevel>=r}},"6MUB":function(t,e,n){"use strict";var i=function(t){switch(typeof t){case"string":return t;case"boolean":return t?"true":"false";case"number":return isFinite(t)?t:"";default:return""}};t.exports=function(t,e,n,r){return e=e||"&",n=n||"=",null===t&&(t=void 0),"object"==typeof t?Object.keys(t).map((function(r){var s=encodeURIComponent(i(r))+n;return Array.isArray(t[r])?t[r].map((function(t){return s+encodeURIComponent(i(t))})).join(e):s+encodeURIComponent(i(t[r]))})).join(e):r?encodeURIComponent(i(r))+n+encodeURIComponent(i(t)):""}},"7/Kr":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ReEmitter=void 0,e.ReEmitter=class{constructor(t){this.target=t,this.boundHandlers={}}_handleEvent(t,...e){this.target.emit(t,...e)}reEmit(t,e){const n=(e,...n)=>{e(...n,t)};for(const i of e){void 0===this.boundHandlers[i]&&(this.boundHandlers[i]=this._handleEvent.bind(this,i));const e=n.bind(this,this.boundHandlers[i]);t.on(i,e)}}}},"7UXS":function(t,e,n){"use strict";var i=n("284h");Object.defineProperty(e,"__esModule",{value:!0}),e.MatrixEvent=e.EventStatus=void 0;var r=n("+qE3"),s=i(n("t+e4")),o=n("PrRn");e.EventStatus={NOT_SENT:"not_sent",ENCRYPTING:"encrypting",SENDING:"sending",QUEUED:"queued",SENT:"sent",CANCELLED:"cancelled"};const a={};function c(t){return a[t]||(a[t]=t),a[t]}const l=function(t){["state_key","type","sender","room_id","membership"].forEach(e=>{t[e]&&(t[e]=c(t[e]))}),["membership","avatar_url","displayname"].forEach(e=>{t.content&&t.content[e]&&(t.content[e]=c(t.content[e]))}),["rel_type"].forEach(e=>{t.content&&t.content["m.relates_to"]&&t.content["m.relates_to"][e]&&(t.content["m.relates_to"][e]=c(t.content["m.relates_to"][e]))}),this.event=t||{},this.sender=null,this.target=null,this.status=null,this.error=null,this.forwardLooking=!0,this._pushActions=null,this._replacingEvent=null,this._localRedactionEvent=null,this._isCancelled=!1,this._clearEvent={},this._senderCurve25519Key=null,this._claimedEd25519Key=null,this._forwardingCurve25519KeyChain=[],this._untrusted=null,this._decryptionPromise=null,this._retryDecryption=!1,this.verificationRequest=null};e.MatrixEvent=l,s.inherits(l,r.EventEmitter),s.extend(l.prototype,{getId:function(){return this.event.event_id},getSender:function(){return this.event.sender||this.event.user_id},getType:function(){return this._clearEvent.type||this.event.type},getWireType:function(){return this.event.type},getRoomId:function(){return this.event.room_id},getTs:function(){return this.event.origin_server_ts},getDate:function(){return this.event.origin_server_ts?new Date(this.event.origin_server_ts):null},getOriginalContent:function(){return this._localRedactionEvent?{}:this._clearEvent.content||this.event.content||{}},getContent:function(){return this._localRedactionEvent?{}:this._replacingEvent?this._replacingEvent.getContent()["m.new_content"]||{}:this.getOriginalContent()},getWireContent:function(){return this.event.content||{}},getPrevContent:function(){return this.getUnsigned().prev_content||this.event.prev_content||{}},getDirectionalContent:function(){return this.forwardLooking?this.getContent():this.getPrevContent()},getAge:function(){return this.getUnsigned().age||this.event.age},getLocalAge:function(){return Date.now()-this.getTs()},getStateKey:function(){return this.event.state_key},isState:function(){return void 0!==this.event.state_key},makeEncrypted:function(t,e,n,i){this._clearEvent={type:this.event.type,content:this.event.content},this.event.type=t,this.event.content=e,this._senderCurve25519Key=n,this._claimedEd25519Key=i},isBeingDecrypted:function(){return null!=this._decryptionPromise},isDecryptionFailure:function(){return this._clearEvent&&this._clearEvent.content&&"m.bad.encrypted"===this._clearEvent.content.msgtype},attemptDecryption:async function(t,e){if(!this.isEncrypted())throw new Error("Attempt to decrypt event which isn't encrypted");if(this._clearEvent&&this._clearEvent.content&&"m.bad.encrypted"!==this._clearEvent.content.msgtype)throw new Error("Attempt to decrypt event which has already been decrypted");return this._decryptionPromise?(o.logger.log(`Event ${this.getId()} already being decrypted; queueing a retry`),this._retryDecryption=!0,this._decryptionPromise):(this._decryptionPromise=this._decryptionLoop(t,e),this._decryptionPromise)},cancelAndResendKeyRequest:function(t,e){const n=this.getWireContent();return t.requestRoomKey({algorithm:n.algorithm,room_id:this.getRoomId(),session_id:n.session_id,sender_key:n.sender_key},this.getKeyRequestRecipients(e),!0)},getKeyRequestRecipients:function(t){const e=this.getWireContent(),n=[{userId:t,deviceId:"*"}],i=this.getSender();return i!==t&&n.push({userId:i,deviceId:e.device_id}),n},_decryptionLoop:async function(t,e){for(await Promise.resolve();;){let i,r;this._retryDecryption=!1;try{t?(i=await t.decryptEvent(this),e&&o.logger.info(`Decrypted event on retry (id=${this.getId()})`)):i=this._badEncryptedMessage("Encryption not enabled")}catch(n){if("DecryptionError"!==n.name)return o.logger.error(`Error ${e?"re":""}decrypting event (id=${this.getId()}): ${n.stack||n}`),this._decryptionPromise=null,void(this._retryDecryption=!1);if(r=n,this._retryDecryption){o.logger.log(`Got error decrypting event (id=${this.getId()}: `+n+"), but retrying");continue}o.logger.warn(`Error decrypting event (id=${this.getId()}): ${n.detailedString}`),i=this._badEncryptedMessage(n.message)}return this._decryptionPromise=null,this._retryDecryption=!1,this._setClearData(i),this.setPushActions(null),void this.emit("Event.decrypted",this,r)}},_badEncryptedMessage:function(t){return{clearEvent:{type:"m.room.message",content:{msgtype:"m.bad.encrypted",body:"** Unable to decrypt: "+t+" **"}}}},_setClearData:function(t){this._clearEvent=t.clearEvent,this._senderCurve25519Key=t.senderCurve25519Key||null,this._claimedEd25519Key=t.claimedEd25519Key||null,this._forwardingCurve25519KeyChain=t.forwardingCurve25519KeyChain||[],this._untrusted=t.untrusted||!1},getClearContent:function(){const t=this._clearEvent;return t&&t.content?t.content:null},isEncrypted:function(){return"m.room.encrypted"===this.event.type},getSenderKey:function(){return this._senderCurve25519Key},getKeysClaimed:function(){return{ed25519:this._claimedEd25519Key}},getClaimedEd25519Key:function(){return this._claimedEd25519Key},getForwardingCurve25519KeyChain:function(){return this._forwardingCurve25519KeyChain},isKeySourceUntrusted:function(){return this._untrusted},getUnsigned:function(){return this.event.unsigned||{}},unmarkLocallyRedacted:function(){const t=this._localRedactionEvent;return this._localRedactionEvent=null,this.event.unsigned&&(this.event.unsigned.redacted_because=null),!!t},markLocallyRedacted:function(t){this._localRedactionEvent||(this.emit("Event.beforeRedaction",this,t),this._localRedactionEvent=t,this.event.unsigned||(this.event.unsigned={}),this.event.unsigned.redacted_because=t.event)},makeRedacted:function(t){if(!t.event)throw new Error("invalid redaction_event in makeRedacted");let e;for(e in this._localRedactionEvent=null,this.emit("Event.beforeRedaction",this,t),this._replacingEvent=null,this.event.unsigned||(this.event.unsigned={}),this.event.unsigned.redacted_because=t.event,this.event)this.event.hasOwnProperty(e)&&(u[e]||delete this.event[e]);const n=h[this.getType()]||{},i=this.getContent();for(e in i)i.hasOwnProperty(e)&&(n[e]||delete i[e])},isRedacted:function(){return Boolean(this.getUnsigned().redacted_because)},isRedaction:function(){return"m.room.redaction"===this.getType()},getPushActions:function(){return this._pushActions},setPushActions:function(t){this._pushActions=t},handleRemoteEcho:function(t){const e=this.getUnsigned(),n=this.getId();this.event=t,e.redacted_because&&(this.event.unsigned||(this.event.unsigned={}),this.event.unsigned.redacted_because=e.redacted_because),this.setStatus(null),this.getId()!==n&&this.emit("Event.localEventIdReplaced",this)},isSending(){return!!this.status},setStatus(t){this.status=t,this.emit("Event.status",this,t)},replaceLocalEventId(t){this.event.event_id=t,this.emit("Event.localEventIdReplaced",this)},isRelation(t){const e=this.getWireContent(),n=e&&e["m.relates_to"];return n&&n.rel_type&&n.event_id&&(t&&n.rel_type===t||!t)},getRelation(){return this.isRelation()?this.getWireContent()["m.relates_to"]:null},makeReplaced(t){this.isRedacted()&&t||this._replacingEvent!==t&&(this._replacingEvent=t,this.emit("Event.replaced",this))},getAssociatedStatus(){return this._replacingEvent?this._replacingEvent.status:this._localRedactionEvent?this._localRedactionEvent.status:this.status},getServerAggregatedRelation(t){const e=this.getUnsigned()["m.relations"];if(e)return e[t]},replacingEventId(){const t=this.getServerAggregatedRelation("m.replace");return t?t.event_id:this._replacingEvent?this._replacingEvent.getId():void 0},replacingEvent(){return this._replacingEvent},replacingEventDate(){const t=this.getServerAggregatedRelation("m.replace");if(t){const e=t.origin_server_ts;if(Number.isFinite(e))return new Date(e)}else if(this._replacingEvent)return this._replacingEvent.getDate()},localRedactionEvent(){return this._localRedactionEvent},getAssociatedId(){const t=this.getRelation();return t?t.event_id:this.isRedaction()?this.event.redacts:void 0},hasAssocation(){return!!this.getAssociatedId()},updateAssociatedId(t){const e=this.getRelation();e?e.event_id=t:this.isRedaction()&&(this.event.redacts=t)},flagCancelled(t=!0){this._isCancelled=t},isCancelled(){return this._isCancelled},toJSON(){const t={type:this.getType(),sender:this.getSender(),content:this.getContent(),event_id:this.getId(),origin_server_ts:this.getTs(),unsigned:this.getUnsigned(),room_id:this.getRoomId()};return this.isRedaction()&&(t.redacts=this.event.redacts),this.isEncrypted()?{decrypted:t,encrypted:this.event}:t},setVerificationRequest:function(t){this.verificationRequest=t}});const u=["event_id","type","room_id","user_id","sender","state_key","prev_state","content","unsigned","origin_server_ts"].reduce((function(t,e){return t[e]=1,t}),{}),h={"m.room.member":{membership:1},"m.room.create":{creator:1},"m.room.join_rules":{join_rule:1},"m.room.power_levels":{ban:1,events:1,events_default:1,kick:1,redact:1,state_default:1,users:1,users_default:1},"m.room.aliases":{aliases:1}}},"7kwF":function(t,e,n){"use strict";var i=n("TqRt");Object.defineProperty(e,"__esModule",{value:!0}),e.VerificationBase=e.SwitchStartEventError=void 0;var r=i(n("lSNA")),s=n("7UXS"),o=n("+qE3"),a=n("PrRn"),c=n("Nfwx"),l=n("VEe5"),u=n("h3nd"),h=n("VRzr");const d=new Error("Verification timed out");class p extends Error{constructor(t){super(),this.startEvent=t}}e.SwitchStartEventError=p;class m extends o.EventEmitter{constructor(t,e,n,i,r,s){super(),this._channel=t,this._baseApis=e,this.userId=n,this.deviceId=i,this.startEvent=r,this.request=s,this.cancelled=!1,this._done=!1,this._promise=null,this._transactionTimeoutTimer=null}get initiatedByMe(){if(!this.startEvent)return!0;const t=this.startEvent.getSender(),e=this.startEvent.getContent();return t===this._baseApis.getUserId()&&e.from_device===this._baseApis.getDeviceId()}_resetTimer(){a.logger.info("Refreshing/starting the verification transaction timeout timer"),null!==this._transactionTimeoutTimer&&clearTimeout(this._transactionTimeoutTimer),this._transactionTimeoutTimer=setTimeout(()=>{this._done||this.cancelled||(a.logger.info("Triggering verification timeout"),this.cancel(d))},6e5)}_endTimer(){null!==this._transactionTimeoutTimer&&(clearTimeout(this._transactionTimeoutTimer),this._transactionTimeoutTimer=null)}_send(t,e){return this._channel.send(t,e)}_waitForEvent(t){if(this._done)return Promise.reject(new Error("Verification is already done"));const e=this.request.getEventFromOtherParty(t);return e?Promise.resolve(e):(this._expectedEvent=t,new Promise((t,e)=>{this._resolveEvent=t,this._rejectEvent=e}))}canSwitchStartEvent(){return!1}switchStartEvent(t){if(this.canSwitchStartEvent(t))if(a.logger.log("Verification Base: switching verification start event",{restartingFlow:!!this._rejectEvent}),this._rejectEvent){const e=this._rejectEvent;this._rejectEvent=void 0,e(new p(t))}else this.startEvent=t}handleEvent(t){if(!this._done)if(t.getType()===this._expectedEvent)"m.key.verification.done"!==this._expectedEvent&&(this._expectedEvent=void 0,this._rejectEvent=void 0,this._resetTimer(),this._resolveEvent(t));else if("m.key.verification.cancel"===t.getType()){const e=this._reject;if(this._reject=void 0,e){const n=t.getContent(),{reason:i,code:r}=n;e(new Error(`Other side cancelled verification because ${i} (${r})`))}}else if(this._expectedEvent){const e=new Error("Unexpected message: expecting "+this._expectedEvent+" but got "+t.getType());if(this._expectedEvent=void 0,this._rejectEvent){const t=this._rejectEvent;this._rejectEvent=void 0,t(e)}this.cancel(e)}}done(){if(this._endTimer(),!this._done){if(this.request.onVerifierFinished(),this._resolve(),this._baseApis.getUserId()!==this.userId)return;return console.log("VerificationBase.done: Self-verification done; requesting keys"),new Promise((t,e)=>{const n=this._baseApis,i=n._crypto._crossSigningInfo,r=new u.CrossSigningInfo(i.userId,{getCrossSigningKey:async t=>{console.debug("VerificationBase.done: requesting secret",t,this.deviceId);const{promise:e}=n.requestSecret("m.cross_signing."+t,[this.deviceId]),i=await e,r=(0,h.decodeBase64)(i);return Uint8Array.from(r)}},i._cacheCallbacks);r.keys=i.keys;const s=new Promise((t,e)=>{setTimeout(t,m.keyRequestTimeoutMs,new Error("Timeout"))}),o=new Promise(async t=>{if(!(await n._crypto.getSessionBackupPrivateKey())){a.logger.info("No cached backup key found. Requesting...");const t=n.requestSecret("m.megolm_backup.v1",[this.deviceId]),e=await t.promise;a.logger.info("Got key backup key, decoding...");const i=(0,h.decodeBase64)(e);a.logger.info("Decoded backup key, storing..."),n._crypto.storeSessionBackupPrivateKey(Uint8Array.from(i)),a.logger.info("Backup key stored. Starting backup restore...");const r=await n.getKeyBackupVersion();n.restoreKeyBackupWithCache(void 0,void 0,r).then(()=>{a.logger.info("Backup restored.")})}t()});return Promise.race([Promise.all([r.getCrossSigningKey("self_signing"),r.getCrossSigningKey("user_signing"),o]),s]).then(t,e)}).catch(t=>{console.warn("VerificationBase: failure while requesting keys:",t)})}}cancel(t){if(this._endTimer(),!this._done){if(this.cancelled=!0,this.request.onVerifierCancelled(),this.userId&&this.deviceId)if(t===d){const t=(0,l.newTimeoutError)();this._send(t.getType(),t.getContent())}else if(t instanceof s.MatrixEvent){if(t.getSender()!==this.userId){const e=t.getContent();"m.key.verification.cancel"===t.getType()?(e.code=e.code||"m.unknown",e.reason=e.reason||e.body||"Unknown reason",this._send("m.key.verification.cancel",e)):this._send("m.key.verification.cancel",{code:"m.unknown",reason:e.body||"Unknown reason"})}}else this._send("m.key.verification.cancel",{code:"m.unknown",reason:t.toString()});null!==this._promise?this._reject&&this._reject(t):this._promise=Promise.reject(t),this.emit("cancel",t)}}verify(){return this._promise||(this._promise=new Promise((t,e)=>{this._resolve=(...e)=>{this._done=!0,this._endTimer(),t(...e)},this._reject=(...t)=>{this._done=!0,this._endTimer(),e(...t)}}),this._doVerification&&!this._started&&(this._started=!0,this._resetTimer(),Promise.resolve(this._doVerification()).then(this.done.bind(this),this.cancel.bind(this)))),this._promise}async _verifyKeys(t,e,n){const i=[];for(const[r,s]of Object.entries(e)){const e=r.split(":",2)[1],o=this._baseApis.getStoredDevice(t,e);if(o)await n(r,o,s),i.push(e);else{const o=this._baseApis._crypto._deviceList.getStoredCrossSigningForUser(t);o&&o.getId()===e?(await n(r,c.DeviceInfo.fromStorage({keys:{[r]:e}},e),s),i.push(e)):a.logger.warn(`verification: Could not find device ${e} to verify`)}}if(!i.length)throw new Error("No devices could be verified");a.logger.info("Verification completed! Marking devices verified: ",i);for(const r of i)await this._baseApis.setDeviceVerified(t,r)}}e.VerificationBase=m,(0,r.default)(m,"keyRequestTimeoutMs",6e4)},"8zgi":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Filter=s;var i=n("OYp6");function r(t,e,n){const i=e.split(".");let r=t;for(let s=0;s<i.length-1;s++)r[i[s]]||(r[i[s]]={}),r=r[i[s]];r[i[i.length-1]]=n}function s(t,e){this.userId=t,this.filterId=e,this.definition={}}s.LAZY_LOADING_MESSAGES_FILTER={lazy_load_members:!0},s.prototype.getFilterId=function(){return this.filterId},s.prototype.getDefinition=function(){return this.definition},s.prototype.setDefinition=function(t){this.definition=t;const e=t.room,n={};e&&(e.rooms&&(n.rooms=e.rooms),e.rooms&&(n.not_rooms=e.not_rooms),this._include_leave=e.include_leave||!1),this._room_filter=new i.FilterComponent(n),this._room_timeline_filter=new i.FilterComponent(e&&e.timeline||{})},s.prototype.getRoomTimelineFilterComponent=function(){return this._room_timeline_filter},s.prototype.filterRoomTimeline=function(t){return this._room_timeline_filter.filter(this._room_filter.filter(t))},s.prototype.setTimelineLimit=function(t){r(this.definition,"room.timeline.limit",t)},s.prototype.setLazyLoadMembers=function(t){r(this.definition,"room.state.lazy_load_members",!!t)},s.prototype.setIncludeLeaveRooms=function(t){r(this.definition,"room.include_leave",t)},s.fromJson=function(t,e,n){const i=new s(t,e);return i.setDefinition(n),i}},"9BO/":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.registerAlgorithm=function(t,e,n){i[t]=e,r[t]=n},e.UnknownDeviceError=e.DecryptionError=e.DecryptionAlgorithm=e.EncryptionAlgorithm=e.DECRYPTION_CLASSES=e.ENCRYPTION_CLASSES=void 0;const i={};e.ENCRYPTION_CLASSES=i;const r={};e.DECRYPTION_CLASSES=r,e.EncryptionAlgorithm=class{constructor(t){this._userId=t.userId,this._deviceId=t.deviceId,this._crypto=t.crypto,this._olmDevice=t.olmDevice,this._baseApis=t.baseApis,this._roomId=t.roomId}prepareToEncrypt(t){}onRoomMembership(t,e,n){}},e.DecryptionAlgorithm=class{constructor(t){this._userId=t.userId,this._crypto=t.crypto,this._olmDevice=t.olmDevice,this._baseApis=t.baseApis,this._roomId=t.roomId}onRoomKeyEvent(t){}importRoomKey(t){}hasKeysForKeyRequest(t){return Promise.resolve(!1)}shareKeysWithDevice(t){throw new Error("shareKeysWithDevice not supported for this DecryptionAlgorithm")}async retryDecryptionFromSender(t){}};class s extends Error{constructor(t,e,n){super(e),this.code=t,this.name="DecryptionError",this.detailedString=function(t,e){let n=t.name+"[msg: "+t.message;return e&&(n+=", "+Object.keys(e).map(t=>t+": "+e[t]).join(", ")),n+="]",n}(this,n)}}e.DecryptionError=s;class o extends Error{constructor(t,e){super(t),this.name="UnknownDeviceError",this.devices=e}}e.UnknownDeviceError=o},"9Nfa":function(t,e,n){"use strict";var i=n("TqRt");Object.defineProperty(e,"__esModule",{value:!0}),e.encodeRecoveryKey=function(t){const e=new Buffer(s.length+t.length+1);e.set(s,0),e.set(t,s.length);let n=0;for(let i=0;i<e.length-1;++i)n^=e[i];return e[e.length-1]=n,r.default.encode(e).match(/.{1,4}/g).join(" ")},e.decodeRecoveryKey=function(t){const e=r.default.decode(t.replace(/ /g,""));let n=0;for(const i of e)n^=i;if(0!==n)throw new Error("Incorrect parity");for(let i=0;i<s.length;++i)if(e[i]!==s[i])throw new Error("Incorrect prefix");if(e.length!==s.length+global.Olm.PRIVATE_KEY_LENGTH+1)throw new Error("Incorrect length");return Uint8Array.from(e.slice(s.length,s.length+global.Olm.PRIVATE_KEY_LENGTH))};var r=i(n("B3Rj"));const s=[139,1]},B2hj:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.RoomList=void 0;var i=n("qN7M");e.RoomList=class{constructor(t){this._cryptoStore=t,this._roomEncryption={}}async init(){await this._cryptoStore.doTxn("readwrite",[i.IndexedDBCryptoStore.STORE_ROOMS],t=>{this._cryptoStore.getEndToEndRooms(t,t=>{this._roomEncryption=t})})}getRoomEncryption(t){return this._roomEncryption[t]||null}isRoomEncrypted(t){return Boolean(this.getRoomEncryption(t))}async setRoomEncryption(t,e){this._roomEncryption[t]=e,await this._cryptoStore.doTxn("readwrite",[i.IndexedDBCryptoStore.STORE_ROOMS],n=>{this._cryptoStore.storeEndToEndRoom(t,e,n)})}}},B3Rj:function(t,e,n){var i=n("QqcV");t.exports=i("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz")},BLwL:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.exists=function(t,e){return new Promise((n,i)=>{let r=!0;const s=t.open(e);s.onupgradeneeded=()=>{r=!1},s.onblocked=()=>i(),s.onsuccess=()=>{s.result.close(),r||t.deleteDatabase(e),n(r)},s.onerror=t=>i(t.target.error)})}},BqaI:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.IllegalMethod=void 0;var i=n("7kwF");class r extends i.VerificationBase{static factory(...t){return new r(...t)}static get NAME(){return"org.matrix.illegal_method"}async _doVerification(){throw new Error("Verification is not possible with this method")}}e.IllegalMethod=r},C2mt:function(t,e,n){"use strict";var i=n("284h");Object.defineProperty(e,"__esModule",{value:!0}),e.Group=o;var r=i(n("t+e4")),s=n("+qE3");function o(t){this.groupId=t,this.name=null,this.avatarUrl=null,this.myMembership=null,this.inviter=null}r.inherits(o,s.EventEmitter),o.prototype.setProfile=function(t,e){this.name===t&&this.avatarUrl===e||(this.name=t||this.groupId,this.avatarUrl=e,this.emit("Group.profile",this))},o.prototype.setMyMembership=function(t){this.myMembership!==t&&(this.myMembership=t,this.emit("Group.myMembership",this))},o.prototype.setInviter=function(t){this.inviter=t}},CxY0:function(t,e,n){"use strict";var i=n("rWzI"),r=n("Nehr");function s(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}e.parse=v,e.resolve=function(t,e){return v(t,!1,!0).resolve(e)},e.resolveObject=function(t,e){return t?v(t,!1,!0).resolveObject(e):e},e.format=function(t){return r.isString(t)&&(t=v(t)),t instanceof s?t.format():s.prototype.format.call(t)},e.Url=s;var o=/^([a-z0-9.+-]+:)/i,a=/:[0-9]*$/,c=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,l=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),u=["'"].concat(l),h=["%","/","?",";","#"].concat(u),d=["/","?","#"],p=/^[+a-z0-9A-Z_-]{0,63}$/,m=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,f={javascript:!0,"javascript:":!0},g={javascript:!0,"javascript:":!0},_={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},y=n("r8II");function v(t,e,n){if(t&&r.isObject(t)&&t instanceof s)return t;var i=new s;return i.parse(t,e,n),i}s.prototype.parse=function(t,e,n){if(!r.isString(t))throw new TypeError("Parameter 'url' must be a string, not "+typeof t);var s=t.indexOf("?"),a=-1!==s&&s<t.indexOf("#")?"?":"#",l=t.split(a);l[0]=l[0].replace(/\\/g,"/");var v=t=l.join(a);if(v=v.trim(),!n&&1===t.split("#").length){var b=c.exec(v);if(b)return this.path=v,this.href=v,this.pathname=b[1],b[2]?(this.search=b[2],this.query=e?y.parse(this.search.substr(1)):this.search.substr(1)):e&&(this.search="",this.query={}),this}var w=o.exec(v);if(w){var S=(w=w[0]).toLowerCase();this.protocol=S,v=v.substr(w.length)}if(n||w||v.match(/^\/\/[^@\/]+@[^@\/]+/)){var E="//"===v.substr(0,2);!E||w&&g[w]||(v=v.substr(2),this.slashes=!0)}if(!g[w]&&(E||w&&!_[w])){for(var k,C,x=-1,T=0;T<d.length;T++)-1!==(I=v.indexOf(d[T]))&&(-1===x||I<x)&&(x=I);for(-1!==(C=-1===x?v.lastIndexOf("@"):v.lastIndexOf("@",x))&&(k=v.slice(0,C),v=v.slice(C+1),this.auth=decodeURIComponent(k)),x=-1,T=0;T<h.length;T++){var I;-1!==(I=v.indexOf(h[T]))&&(-1===x||I<x)&&(x=I)}-1===x&&(x=v.length),this.host=v.slice(0,x),v=v.slice(x),this.parseHost(),this.hostname=this.hostname||"";var R="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!R)for(var O=this.hostname.split(/\./),A=(T=0,O.length);T<A;T++){var D=O[T];if(D&&!D.match(p)){for(var P="",M=0,N=D.length;M<N;M++)D.charCodeAt(M)>127?P+="x":P+=D[M];if(!P.match(p)){var L=O.slice(0,T),F=O.slice(T+1),U=D.match(m);U&&(L.push(U[1]),F.unshift(U[2])),F.length&&(v="/"+F.join(".")+v),this.hostname=L.join(".");break}}}this.hostname=this.hostname.length>255?"":this.hostname.toLowerCase(),R||(this.hostname=i.toASCII(this.hostname)),this.host=(this.hostname||"")+(this.port?":"+this.port:""),this.href+=this.host,R&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==v[0]&&(v="/"+v))}if(!f[S])for(T=0,A=u.length;T<A;T++){var B=u[T];if(-1!==v.indexOf(B)){var j=encodeURIComponent(B);j===B&&(j=escape(B)),v=v.split(B).join(j)}}var V=v.indexOf("#");-1!==V&&(this.hash=v.substr(V),v=v.slice(0,V));var K=v.indexOf("?");return-1!==K?(this.search=v.substr(K),this.query=v.substr(K+1),e&&(this.query=y.parse(this.query)),v=v.slice(0,K)):e&&(this.search="",this.query={}),v&&(this.pathname=v),_[S]&&this.hostname&&!this.pathname&&(this.pathname="/"),(this.pathname||this.search)&&(this.path=(this.pathname||"")+(this.search||"")),this.href=this.format(),this},s.prototype.format=function(){var t=this.auth||"";t&&(t=(t=encodeURIComponent(t)).replace(/%3A/i,":"),t+="@");var e=this.protocol||"",n=this.pathname||"",i=this.hash||"",s=!1,o="";this.host?s=t+this.host:this.hostname&&(s=t+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(s+=":"+this.port)),this.query&&r.isObject(this.query)&&Object.keys(this.query).length&&(o=y.stringify(this.query));var a=this.search||o&&"?"+o||"";return e&&":"!==e.substr(-1)&&(e+=":"),this.slashes||(!e||_[e])&&!1!==s?(s="//"+(s||""),n&&"/"!==n.charAt(0)&&(n="/"+n)):s||(s=""),i&&"#"!==i.charAt(0)&&(i="#"+i),a&&"?"!==a.charAt(0)&&(a="?"+a),e+s+(n=n.replace(/[?#]/g,(function(t){return encodeURIComponent(t)})))+(a=a.replace("#","%23"))+i},s.prototype.resolve=function(t){return this.resolveObject(v(t,!1,!0)).format()},s.prototype.resolveObject=function(t){if(r.isString(t)){var e=new s;e.parse(t,!1,!0),t=e}for(var n=new s,i=Object.keys(this),o=0;o<i.length;o++){var a=i[o];n[a]=this[a]}if(n.hash=t.hash,""===t.href)return n.href=n.format(),n;if(t.slashes&&!t.protocol){for(var c=Object.keys(t),l=0;l<c.length;l++){var u=c[l];"protocol"!==u&&(n[u]=t[u])}return _[n.protocol]&&n.hostname&&!n.pathname&&(n.path=n.pathname="/"),n.href=n.format(),n}if(t.protocol&&t.protocol!==n.protocol){if(!_[t.protocol]){for(var h=Object.keys(t),d=0;d<h.length;d++){var p=h[d];n[p]=t[p]}return n.href=n.format(),n}if(n.protocol=t.protocol,t.host||g[t.protocol])n.pathname=t.pathname;else{for(var m=(t.pathname||"").split("/");m.length&&!(t.host=m.shift()););t.host||(t.host=""),t.hostname||(t.hostname=""),""!==m[0]&&m.unshift(""),m.length<2&&m.unshift(""),n.pathname=m.join("/")}return n.search=t.search,n.query=t.query,n.host=t.host||"",n.auth=t.auth,n.hostname=t.hostname||t.host,n.port=t.port,(n.pathname||n.search)&&(n.path=(n.pathname||"")+(n.search||"")),n.slashes=n.slashes||t.slashes,n.href=n.format(),n}var f=n.pathname&&"/"===n.pathname.charAt(0),y=t.host||t.pathname&&"/"===t.pathname.charAt(0),v=y||f||n.host&&t.pathname,b=v,w=n.pathname&&n.pathname.split("/")||[],S=(m=t.pathname&&t.pathname.split("/")||[],n.protocol&&!_[n.protocol]);if(S&&(n.hostname="",n.port=null,n.host&&(""===w[0]?w[0]=n.host:w.unshift(n.host)),n.host="",t.protocol&&(t.hostname=null,t.port=null,t.host&&(""===m[0]?m[0]=t.host:m.unshift(t.host)),t.host=null),v=v&&(""===m[0]||""===w[0])),y)n.host=t.host||""===t.host?t.host:n.host,n.hostname=t.hostname||""===t.hostname?t.hostname:n.hostname,n.search=t.search,n.query=t.query,w=m;else if(m.length)w||(w=[]),w.pop(),w=w.concat(m),n.search=t.search,n.query=t.query;else if(!r.isNullOrUndefined(t.search))return S&&(n.hostname=n.host=w.shift(),(T=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@"))&&(n.auth=T.shift(),n.host=n.hostname=T.shift())),n.search=t.search,n.query=t.query,r.isNull(n.pathname)&&r.isNull(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.href=n.format(),n;if(!w.length)return n.pathname=null,n.path=n.search?"/"+n.search:null,n.href=n.format(),n;for(var E=w.slice(-1)[0],k=(n.host||t.host||w.length>1)&&("."===E||".."===E)||""===E,C=0,x=w.length;x>=0;x--)"."===(E=w[x])?w.splice(x,1):".."===E?(w.splice(x,1),C++):C&&(w.splice(x,1),C--);if(!v&&!b)for(;C--;C)w.unshift("..");!v||""===w[0]||w[0]&&"/"===w[0].charAt(0)||w.unshift(""),k&&"/"!==w.join("/").substr(-1)&&w.push("");var T,I=""===w[0]||w[0]&&"/"===w[0].charAt(0);return S&&(n.hostname=n.host=I?"":w.length?w.shift():"",(T=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@"))&&(n.auth=T.shift(),n.host=n.hostname=T.shift())),(v=v||n.host&&w.length)&&!I&&w.unshift(""),w.length?n.pathname=w.join("/"):(n.pathname=null,n.path=null),r.isNull(n.pathname)&&r.isNull(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.auth=t.auth||n.auth,n.slashes=n.slashes||t.slashes,n.href=n.format(),n},s.prototype.parseHost=function(){var t=this.host,e=a.exec(t);e&&(":"!==(e=e[0])&&(this.port=e.substr(1)),t=t.substr(0,t.length-e.length)),t&&(this.hostname=t)}},"Dr/U":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.RoomSummary=function(t,e){this.roomId=t,this.info=e}},EEJ8:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TimelineWindow=r,e.TimelineIndex=s;var i=n("tyto");function r(t,e,n){n=n||{},this._client=t,this._timelineSet=e,this._start=null,this._end=null,this._eventCount=0,this._windowLimit=n.windowLimit||1e3}function s(t,e){this.timeline=t,this.index=e}n("PrRn"),r.prototype.load=function(t,e){const n=this;e=e||20;const i=function(i){let r;const o=i.getEvents();if(t){for(let e=0;e<o.length;e++)if(o[e].getId()==t){r=e;break}if(void 0===r)throw new Error("getEventTimeline result didn't include requested event")}else r=o.length;const a=Math.min(o.length,r+Math.ceil(e/2)),c=Math.max(0,a-e);n._start=new s(i,c-i.getBaseIndex()),n._end=new s(i,a-i.getBaseIndex()),n._eventCount=a-c};if(t){const e=this._timelineSet.getTimelineForEvent(t);return e?(i(e),Promise.resolve(e)):this._client.getEventTimeline(this._timelineSet,t).then(i)}return i(this._timelineSet.getLiveTimeline()),Promise.resolve()},r.prototype.getTimelineIndex=function(t){if(t==i.EventTimeline.BACKWARDS)return this._start;if(t==i.EventTimeline.FORWARDS)return this._end;throw new Error("Invalid direction '"+t+"'")},r.prototype.extend=function(t,e){const n=this.getTimelineIndex(t);if(!n)return!1;const r=t==i.EventTimeline.BACKWARDS?n.retreat(e):n.advance(e);if(r){this._eventCount+=r;const e=this._eventCount-this._windowLimit;return e>0&&this.unpaginate(e,t!=i.EventTimeline.BACKWARDS),!0}return!1},r.prototype.canPaginate=function(t){const e=this.getTimelineIndex(t);if(!e)return!1;if(t==i.EventTimeline.BACKWARDS){if(e.index>e.minIndex())return!0}else if(e.index<e.maxIndex())return!0;return Boolean(e.timeline.getNeighbouringTimeline(t)||e.timeline.getPaginationToken(t))},r.prototype.paginate=function(t,e,n,r){void 0===n&&(n=!0),void 0===r&&(r=5);const s=this.getTimelineIndex(t);if(!s)return Promise.resolve(!1);if(s.pendingPaginate)return s.pendingPaginate;if(this.extend(t,e))return Promise.resolve(!0);if(!n||0===r)return Promise.resolve(!1);if(!s.timeline.getPaginationToken(t))return Promise.resolve(!1);const o=this,a=this._client.paginateEventTimeline(s.timeline,{backwards:t==i.EventTimeline.BACKWARDS,limit:e}).finally((function(){s.pendingPaginate=null})).then((function(n){return!!n&&o.paginate(t,e,!0,r-1)}));return s.pendingPaginate=a,a},r.prototype.unpaginate=function(t,e){const n=e?this._start:this._end;if(t>this._eventCount||t<0)throw new Error("Attemting to unpaginate "+t+" events, but only have "+this._eventCount+" in the timeline");for(;t>0;){const i=e?n.advance(t):n.retreat(t);if(i<=0)throw new Error("Unable to unpaginate any further, but still have "+this._eventCount+" events");t-=i,this._eventCount-=i}},r.prototype.getEvents=function(){if(!this._start)return[];const t=[];let e=this._start.timeline;for(;;){const n=e.getEvents();let r=0,s=n.length;e===this._start.timeline&&(r=this._start.index+e.getBaseIndex()),e===this._end.timeline&&(s=this._end.index+e.getBaseIndex());for(let e=r;e<s;e++)t.push(n[e]);if(e===this._end.timeline)break;e=e.getNeighbouringTimeline(i.EventTimeline.FORWARDS)}return t},s.prototype.minIndex=function(){return-1*this.timeline.getBaseIndex()},s.prototype.maxIndex=function(){return this.timeline.getEvents().length-this.timeline.getBaseIndex()},s.prototype.advance=function(t){if(!t)return 0;let e;if(t<0){if(e=Math.max(t,this.minIndex()-this.index),e<0)return this.index+=e,e}else if(e=Math.min(t,this.maxIndex()-this.index),e>0)return this.index+=e,e;const n=this.timeline.getNeighbouringTimeline(t<0?i.EventTimeline.BACKWARDS:i.EventTimeline.FORWARDS);return n?(this.timeline=n,this.index=t<0?this.maxIndex():this.minIndex(),this.advance(t)):0},s.prototype.retreat=function(t){return-1*this.advance(-1*t)}},EP5U:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.makeHtmlMessage=function(t,e){return{msgtype:"m.text",format:"org.matrix.custom.html",body:t,formatted_body:e}},e.makeHtmlNotice=function(t,e){return{msgtype:"m.notice",format:"org.matrix.custom.html",body:t,formatted_body:e}},e.makeHtmlEmote=function(t,e){return{msgtype:"m.emote",format:"org.matrix.custom.html",body:t,formatted_body:e}},e.makeTextMessage=function(t){return{msgtype:"m.text",body:t}},e.makeNotice=function(t){return{msgtype:"m.notice",body:t}},e.makeEmoteMessage=function(t){return{msgtype:"m.emote",body:t}}},F3w2:function(t,e,n){"use strict";var i=n("TqRt");Object.defineProperty(e,"__esModule",{value:!0}),e.SAS=void 0;var r=n("7kwF"),s=i(n("0ZCT")),o=n("VEe5"),a=n("PrRn");const c="m.key.verification.start",l=["m.key.verification.accept","m.key.verification.key","m.key.verification.mac"];let u;const h=(0,o.errorFactory)("m.mismatched_sas","Mismatched short authentication string"),d=(0,o.errorFactory)("m.mismatched_commitment","Mismatched commitment"),p=[["\ud83d\udc36","dog"],["\ud83d\udc31","cat"],["\ud83e\udd81","lion"],["\ud83d\udc0e","horse"],["\ud83e\udd84","unicorn"],["\ud83d\udc37","pig"],["\ud83d\udc18","elephant"],["\ud83d\udc30","rabbit"],["\ud83d\udc3c","panda"],["\ud83d\udc13","rooster"],["\ud83d\udc27","penguin"],["\ud83d\udc22","turtle"],["\ud83d\udc1f","fish"],["\ud83d\udc19","octopus"],["\ud83e\udd8b","butterfly"],["\ud83c\udf37","flower"],["\ud83c\udf33","tree"],["\ud83c\udf35","cactus"],["\ud83c\udf44","mushroom"],["\ud83c\udf0f","globe"],["\ud83c\udf19","moon"],["\u2601\ufe0f","cloud"],["\ud83d\udd25","fire"],["\ud83c\udf4c","banana"],["\ud83c\udf4e","apple"],["\ud83c\udf53","strawberry"],["\ud83c\udf3d","corn"],["\ud83c\udf55","pizza"],["\ud83c\udf82","cake"],["\u2764\ufe0f","heart"],["\ud83d\ude42","smiley"],["\ud83e\udd16","robot"],["\ud83c\udfa9","hat"],["\ud83d\udc53","glasses"],["\ud83d\udd27","spanner"],["\ud83c\udf85","santa"],["\ud83d\udc4d","thumbs up"],["\u2602\ufe0f","umbrella"],["\u231b","hourglass"],["\u23f0","clock"],["\ud83c\udf81","gift"],["\ud83d\udca1","light bulb"],["\ud83d\udcd5","book"],["\u270f\ufe0f","pencil"],["\ud83d\udcce","paperclip"],["\u2702\ufe0f","scissors"],["\ud83d\udd12","lock"],["\ud83d\udd11","key"],["\ud83d\udd28","hammer"],["\u260e\ufe0f","telephone"],["\ud83c\udfc1","flag"],["\ud83d\ude82","train"],["\ud83d\udeb2","bicycle"],["\u2708\ufe0f","aeroplane"],["\ud83d\ude80","rocket"],["\ud83c\udfc6","trophy"],["\u26bd","ball"],["\ud83c\udfb8","guitar"],["\ud83c\udfba","trumpet"],["\ud83d\udd14","bell"],["\u2693\ufe0f","anchor"],["\ud83c\udfa7","headphones"],["\ud83d\udcc1","folder"],["\ud83d\udccc","pin"]],m={decimal:function(t){return[1e3+(t[0]<<5|t[1]>>3),1e3+((7&t[1])<<10|t[2]<<2|t[3]>>6),1e3+((63&t[3])<<7|t[4]>>1)]},emoji:function(t){return[t[0]>>2,(3&t[0])<<4|t[1]>>4,(15&t[1])<<2|t[2]>>6,63&t[2],t[3]>>2,(3&t[3])<<4|t[4]>>4,(15&t[4])<<2|t[5]>>6].map(t=>p[t])}};function f(t,e){const n={};for(const i of e)i in m&&(n[i]=m[i](t));return n}const g={"hkdf-hmac-sha256":"calculate_mac","hmac-sha256":"calculate_mac_long_kdf"};function _(t,e){return function(...n){const i=t[g[e]].apply(t,n);return a.logger.log("SAS calculateMAC:",e,n,i),i}}const y={"curve25519-hkdf-sha256":function(t,e,n){const i=`${t._baseApis.getUserId()}|${t._baseApis.deviceId}|`+t.ourSASPubKey+"|",r=`${t.userId}|${t.deviceId}|${t.theirSASPubKey}|`;return e.generate_bytes("MATRIX_KEY_VERIFICATION_SAS|"+(t.initiatedByMe?i+r:r+i)+t._channel.transactionId,n)},curve25519:function(t,e,n){const i=`${t._baseApis.getUserId()}${t._baseApis.deviceId}`,r=`${t.userId}${t.deviceId}`;return e.generate_bytes("MATRIX_KEY_VERIFICATION_SAS"+(t.initiatedByMe?i+r:r+i)+t._channel.transactionId,n)}},v=["curve25519-hkdf-sha256","curve25519"],b=["sha256"],w=["hkdf-hmac-sha256","hmac-sha256"],S=Object.keys(m),E=new Set(v),k=new Set(b),C=new Set(w),x=new Set(S);function T(t,e){return t instanceof Array?t.filter(t=>e.has(t)):[]}class I extends r.VerificationBase{static get NAME(){return"m.sas.v1"}get events(){return l}async _doVerification(){await global.Olm.init(),u=u||new global.Olm.Utility,await this._baseApis.downloadKeys([this.userId]);let t=!1;do{try{return this.initiatedByMe?await this._doSendVerification():await this._doRespondVerification()}catch(e){if(!(e instanceof r.SwitchStartEventError))throw e;this.startEvent=e.startEvent,t=!0}}while(t)}canSwitchStartEvent(t){if(t.getType()!==c)return!1;const e=t.getContent();return e&&e.method===I.NAME&&this._waitingForAccept}async _sendStart(){const t=this._channel.completeContent(c,{method:I.NAME,from_device:this._baseApis.deviceId,key_agreement_protocols:v,hashes:b,message_authentication_codes:w,short_authentication_string:S});return await this._channel.sendCompleted(c,t),t}async _doSendVerification(){let t,e;if(this._waitingForAccept=!0,t=this.startEvent?this._channel.completedContentFromEvent(this.startEvent):await this._sendStart(),!this.initiatedByMe)throw new r.SwitchStartEventError(this.startEvent);try{e=await this._waitForEvent("m.key.verification.accept")}finally{this._waitingForAccept=!1}let n=e.getContent();const i=T(n.short_authentication_string,x);if(!(E.has(n.key_agreement_protocol)&&k.has(n.hash)&&C.has(n.message_authentication_code)&&i.length))throw(0,o.newUnknownMethodError)();if("string"!=typeof n.commitment)throw(0,o.newInvalidMessageError)();const a=n.key_agreement_protocol,c=n.message_authentication_code,l=n.commitment,p=new global.Olm.SAS;try{this.ourSASPubKey=p.get_pubkey(),await this._send("m.key.verification.key",{key:this.ourSASPubKey}),e=await this._waitForEvent("m.key.verification.key"),n=e.getContent();const r=n.key+s.default.stringify(t);if(u.sha256(r)!==l)throw d();this.theirSASPubKey=n.key,p.set_their_key(n.key);const m=y[a](this,p,6),g=new Promise((t,e)=>{this.sasEvent={sas:f(m,i),confirm:async()=>{try{await this._sendMAC(p,c),t()}catch(n){e(n)}},cancel:()=>e((0,o.newUserCancelledError)()),mismatch:()=>e(h())},this.emit("show_sas",this.sasEvent)});[e]=await Promise.all([this._waitForEvent("m.key.verification.mac").then(t=>(this._expectedEvent="m.key.verification.done",t)),g]),n=e.getContent(),await this._checkMAC(p,n,c)}finally{p.free()}}async _doRespondVerification(){let t=this._channel.completedContentFromEvent(this.startEvent);const e=T(v,new Set(t.key_agreement_protocols))[0],n=T(b,new Set(t.hashes))[0],i=T(w,new Set(t.message_authentication_codes))[0],r=T(t.short_authentication_string,x);if(void 0===e||void 0===n||void 0===i||!r.length)throw(0,o.newUnknownMethodError)();const a=new global.Olm.SAS;try{const c=a.get_pubkey()+s.default.stringify(t);await this._send("m.key.verification.accept",{key_agreement_protocol:e,hash:n,message_authentication_code:i,short_authentication_string:r,commitment:u.sha256(c)});let l=await this._waitForEvent("m.key.verification.key");t=l.getContent(),this.theirSASPubKey=t.key,a.set_their_key(t.key),this.ourSASPubKey=a.get_pubkey(),await this._send("m.key.verification.key",{key:this.ourSASPubKey});const d=y[e](this,a,6),p=new Promise((t,e)=>{this.sasEvent={sas:f(d,r),confirm:async()=>{try{await this._sendMAC(a,i),t()}catch(n){e(n)}},cancel:()=>e((0,o.newUserCancelledError)()),mismatch:()=>e(h())},this.emit("show_sas",this.sasEvent)});[l]=await Promise.all([this._waitForEvent("m.key.verification.mac").then(t=>(this._expectedEvent="m.key.verification.done",t)),p]),t=l.getContent(),await this._checkMAC(a,t,i)}finally{a.free()}}_sendMAC(t,e){const n={},i=[],r="MATRIX_KEY_VERIFICATION_MAC"+this._baseApis.getUserId()+this._baseApis.deviceId+this.userId+this.deviceId+this._channel.transactionId,s="ed25519:"+this._baseApis.deviceId;n[s]=_(t,e)(this._baseApis.getDeviceEd25519Key(),r+s),i.push(s);const o=this._baseApis.getCrossSigningId();if(o){const s="ed25519:"+o;n[s]=_(t,e)(o,r+s),i.push(s)}const a=_(t,e)(i.sort().join(","),r+"KEY_IDS");return this._send("m.key.verification.mac",{mac:n,keys:a})}async _checkMAC(t,e,n){const i="MATRIX_KEY_VERIFICATION_MAC"+this.userId+this.deviceId+this._baseApis.getUserId()+this._baseApis.deviceId+this._channel.transactionId;if(e.keys!==_(t,n)(Object.keys(e.mac).sort().join(","),i+"KEY_IDS"))throw(0,o.newKeyMismatchError)();await this._verifyKeys(this.userId,e.mac,(e,r,s)=>{if(s!==_(t,n)(r.keys[e],i+e))throw(0,o.newKeyMismatchError)()})}}e.SAS=I},FyV3:function(t,e,n){"use strict";function i(t){this._timeline=[t],this._ourEventIndex=0,this._paginateTokens={b:null,f:null},this._paginateRequests={b:null,f:null}}Object.defineProperty(e,"__esModule",{value:!0}),e.EventContext=i,i.prototype.getEvent=function(){return this._timeline[this._ourEventIndex]},i.prototype.getTimeline=function(){return this._timeline},i.prototype.getOurEventIndex=function(){return this._ourEventIndex},i.prototype.getPaginateToken=function(t){return this._paginateTokens[t?"b":"f"]},i.prototype.setPaginateToken=function(t,e){this._paginateTokens[e?"b":"f"]=t},i.prototype.addEvents=function(t,e){e?(this._timeline=t.concat(this._timeline),this._ourEventIndex+=t.length):this._timeline=this._timeline.concat(t)}},Gghg:function(t,e,n){"use strict";var i=n("TqRt");Object.defineProperty(e,"__esModule",{value:!0});var r={ContentHelpers:!0,request:!0,getRequest:!0,wrapRequest:!0,setCryptoStoreFactory:!0,createClient:!0,createNewMatrixCall:!0,setMatrixCallAudioOutput:!0,setMatrixCallAudioInput:!0,setMatrixCallVideoInput:!0};e.request=function(t){D=t},e.getRequest=function(){return D},e.wrapRequest=function(t){const e=D;D=function(n,i){return t(e,n,i)}},e.setCryptoStoreFactory=function(t){P=t},e.createClient=function(t){return"string"==typeof t&&(t={baseUrl:t}),t.request=t.request||D,t.store=t.store||new a.MemoryStore({localStorage:global.localStorage}),t.scheduler=t.scheduler||new c.MatrixScheduler,t.cryptoStore=t.cryptoStore||P(),new l.MatrixClient(t)},Object.defineProperty(e,"createNewMatrixCall",{enumerable:!0,get:function(){return O.createNewMatrixCall}}),Object.defineProperty(e,"setMatrixCallAudioOutput",{enumerable:!0,get:function(){return O.setAudioOutput}}),Object.defineProperty(e,"setMatrixCallAudioInput",{enumerable:!0,get:function(){return O.setAudioInput}}),Object.defineProperty(e,"setMatrixCallVideoInput",{enumerable:!0,get:function(){return O.setVideoInput}}),e.ContentHelpers=void 0;var s=i(n("284h")),o=n("qdUr");Object.keys(o).forEach((function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(r,t)||Object.defineProperty(e,t,{enumerable:!0,get:function(){return o[t]}}))}));var a=n("OLzX");Object.keys(a).forEach((function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(r,t)||Object.defineProperty(e,t,{enumerable:!0,get:function(){return a[t]}}))}));var c=n("LxUt");Object.keys(c).forEach((function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(r,t)||Object.defineProperty(e,t,{enumerable:!0,get:function(){return c[t]}}))}));var l=n("YuxU");Object.keys(l).forEach((function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(r,t)||Object.defineProperty(e,t,{enumerable:!0,get:function(){return l[t]}}))}));var u=n("1F5k");Object.keys(u).forEach((function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(r,t)||Object.defineProperty(e,t,{enumerable:!0,get:function(){return u[t]}}))}));var h=n("ZP3D");Object.keys(h).forEach((function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(r,t)||Object.defineProperty(e,t,{enumerable:!0,get:function(){return h[t]}}))}));var d=n("3sFX");Object.keys(d).forEach((function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(r,t)||Object.defineProperty(e,t,{enumerable:!0,get:function(){return d[t]}}))}));var p=n("Hzpt");Object.keys(p).forEach((function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(r,t)||Object.defineProperty(e,t,{enumerable:!0,get:function(){return p[t]}}))}));var m=n("7UXS");Object.keys(m).forEach((function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(r,t)||Object.defineProperty(e,t,{enumerable:!0,get:function(){return m[t]}}))}));var f=n("tyrX");Object.keys(f).forEach((function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(r,t)||Object.defineProperty(e,t,{enumerable:!0,get:function(){return f[t]}}))}));var g=n("C2mt");Object.keys(g).forEach((function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(r,t)||Object.defineProperty(e,t,{enumerable:!0,get:function(){return g[t]}}))}));var _=n("tyto");Object.keys(_).forEach((function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(r,t)||Object.defineProperty(e,t,{enumerable:!0,get:function(){return _[t]}}))}));var y=n("ouil");Object.keys(y).forEach((function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(r,t)||Object.defineProperty(e,t,{enumerable:!0,get:function(){return y[t]}}))}));var v=n("vR9v");Object.keys(v).forEach((function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(r,t)||Object.defineProperty(e,t,{enumerable:!0,get:function(){return v[t]}}))}));var b=n("4Cle");Object.keys(b).forEach((function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(r,t)||Object.defineProperty(e,t,{enumerable:!0,get:function(){return b[t]}}))}));var w=n("rWBP");Object.keys(w).forEach((function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(r,t)||Object.defineProperty(e,t,{enumerable:!0,get:function(){return w[t]}}))}));var S=n("8zgi");Object.keys(S).forEach((function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(r,t)||Object.defineProperty(e,t,{enumerable:!0,get:function(){return S[t]}}))}));var E=n("EEJ8");Object.keys(E).forEach((function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(r,t)||Object.defineProperty(e,t,{enumerable:!0,get:function(){return E[t]}}))}));var k=n("Nq7u");Object.keys(k).forEach((function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(r,t)||Object.defineProperty(e,t,{enumerable:!0,get:function(){return k[t]}}))}));var C=n("g4kb");Object.keys(C).forEach((function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(r,t)||Object.defineProperty(e,t,{enumerable:!0,get:function(){return C[t]}}))}));var x=n("e/yG");Object.keys(x).forEach((function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(r,t)||Object.defineProperty(e,t,{enumerable:!0,get:function(){return x[t]}}))}));var T=n("mhv5");Object.keys(T).forEach((function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(r,t)||Object.defineProperty(e,t,{enumerable:!0,get:function(){return T[t]}}))}));var I=n("qN7M");Object.keys(I).forEach((function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(r,t)||Object.defineProperty(e,t,{enumerable:!0,get:function(){return I[t]}}))}));var R=n("JOJy");Object.keys(R).forEach((function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(r,t)||Object.defineProperty(e,t,{enumerable:!0,get:function(){return R[t]}}))}));var O=n("HtZB");const A=Promise.resolve().then(()=>(0,s.default)(n("EP5U")));let D;e.ContentHelpers=A;let P=()=>new o.MemoryCryptoStore},H7XF:function(t,e,n){"use strict";e.byteLength=function(t){var e=l(t),n=e[1];return 3*(e[0]+n)/4-n},e.toByteArray=function(t){var e,n,i=l(t),o=i[0],a=i[1],c=new s(function(t,e,n){return 3*(e+n)/4-n}(0,o,a)),u=0,h=a>0?o-4:o;for(n=0;n<h;n+=4)e=r[t.charCodeAt(n)]<<18|r[t.charCodeAt(n+1)]<<12|r[t.charCodeAt(n+2)]<<6|r[t.charCodeAt(n+3)],c[u++]=e>>16&255,c[u++]=e>>8&255,c[u++]=255&e;return 2===a&&(e=r[t.charCodeAt(n)]<<2|r[t.charCodeAt(n+1)]>>4,c[u++]=255&e),1===a&&(e=r[t.charCodeAt(n)]<<10|r[t.charCodeAt(n+1)]<<4|r[t.charCodeAt(n+2)]>>2,c[u++]=e>>8&255,c[u++]=255&e),c},e.fromByteArray=function(t){for(var e,n=t.length,r=n%3,s=[],o=0,a=n-r;o<a;o+=16383)s.push(u(t,o,o+16383>a?a:o+16383));return 1===r?s.push(i[(e=t[n-1])>>2]+i[e<<4&63]+"=="):2===r&&s.push(i[(e=(t[n-2]<<8)+t[n-1])>>10]+i[e>>4&63]+i[e<<2&63]+"="),s.join("")};for(var i=[],r=[],s="undefined"!=typeof Uint8Array?Uint8Array:Array,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=0,c=o.length;a<c;++a)i[a]=o[a],r[o.charCodeAt(a)]=a;function l(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=t.indexOf("=");return-1===n&&(n=e),[n,n===e?0:4-n%4]}function u(t,e,n){for(var r,s=[],o=e;o<n;o+=3)s.push(i[(r=(t[o]<<16&16711680)+(t[o+1]<<8&65280)+(255&t[o+2]))>>18&63]+i[r>>12&63]+i[r>>6&63]+i[63&r]);return s.join("")}r["-".charCodeAt(0)]=62,r["_".charCodeAt(0)]=63},HtZB:function(t,e,n){"use strict";var i=n("284h");Object.defineProperty(e,"__esModule",{value:!0}),e.MatrixCall=a,e.setAudioOutput=function(t){x=t},e.setAudioInput=function(t){T=t},e.setVideoInput=function(t){I=t},e.createNewMatrixCall=function(t,e,n){const i=global.window,s=global.document;if(!i||!s)return null;const o={isOpenWebRTC:function(){const t=s.getElementById("script");if(!t||!t.length)return!1;for(let e=0;e<t.length;e++)if(t[e].src.indexOf("owr.js")>-1)return!0;return!1}},c=i.navigator.getUserMedia||i.navigator.webkitGetUserMedia||i.navigator.mozGetUserMedia;c&&(o.getUserMedia=function(){return c.apply(i.navigator,arguments)});const l=i.navigator.mediaDevices&&i.navigator.mediaDevices.getDisplayMedia||i.navigator.getDisplayMedia;l&&(o.getDisplayMedia=l.bind(i.navigator.mediaDevices));try{o.RtcPeerConnection=i.RTCPeerConnection||i.webkitRTCPeerConnection||i.mozRTCPeerConnection,o.RtcSessionDescription=i.RTCSessionDescription||i.webkitRTCSessionDescription||i.mozRTCSessionDescription,o.RtcIceCandidate=i.RTCIceCandidate||i.webkitRTCIceCandidate||i.mozRTCIceCandidate,o.vendor=null,i.mozRTCPeerConnection?o.vendor="mozilla":i.webkitRTCPeerConnection?o.vendor="webkit":i.RTCPeerConnection&&(o.vendor="generic")}catch(h){return r.logger.error("Failed to set up WebRTC object: possible browser interference?"),r.logger.error(h),null}if(!(o.RtcIceCandidate&&o.RtcSessionDescription&&o.RtcPeerConnection&&o.getUserMedia))return null;const u=!!n&&n.forceTURN;return new a({webRtc:o,client:t,URL:i.URL,roomId:e,turnServers:t.getTurnServers(),forceTURN:t._forceTURN||u})};var r=n("PrRn"),s=n("+qE3"),o=i(n("t+e4"));function a(t){this.roomId=t.roomId,this.client=t.client,this.webRtc=t.webRtc,this.forceTURN=t.forceTURN,this.URL=t.URL,this.turnServers=t.turnServers||[],0===this.turnServers.length&&this.client.isFallbackICEServerAllowed()&&this.turnServers.push({urls:[a.FALLBACK_ICE_SERVER]}),o.forEach(this.turnServers,(function(t){o.checkObjectHasKeys(t,["urls"])})),this.callId="c"+(new Date).getTime()+Math.random(),this.state="fledgling",this.didConnect=!1,this.candidateSendQueue=[],this.candidateSendTries=0,this.mediaPromises=Object.create(null),this.screenSharingStream=null,this._answerContent=null}a.CALL_TIMEOUT_MS=6e4,a.FALLBACK_ICE_SERVER="stun:turn.matrix.org",a.ERR_LOCAL_OFFER_FAILED="local_offer_failed",a.ERR_NO_USER_MEDIA="no_user_media",a.ERR_UNKNOWN_DEVICES="unknown_devices",a.ERR_SEND_INVITE="send_invite",a.ERR_SEND_ANSWER="send_answer",o.inherits(a,s.EventEmitter),a.prototype.placeVoiceCall=function(){v("placeVoiceCall"),_(this),w(this,E("voice")),this.type="voice"},a.prototype.placeVideoCall=function(t,e){v("placeVideoCall"),_(this),this.localVideoElement=e,this.remoteVideoElement=t,w(this,E("video")),this.type="video",f(this)},a.prototype.placeScreenSharingCall=async function(t,e){v("placeScreenSharingCall"),_(this),this.localVideoElement=e,this.remoteVideoElement=t;const n=this;try{n.screenSharingStream=await this.webRtc.getDisplayMedia({audio:!1}),v("Got screen stream, requesting audio stream...");const t=E("voice");w(n,t)}catch(i){n.emit("error",y(a.ERR_NO_USER_MEDIA,"Failed to get screen-sharing stream: "+i))}this.type="video",f(this)},a.prototype.playElement=function(t,e){r.logger.log("queuing play on "+e+" and element "+t),this.mediaPromises[e]=this.mediaPromises[e]?this.mediaPromises[e].then((function(){return r.logger.log("previous promise completed for "+e),t.play()}),(function(){return r.logger.log("previous promise failed for "+e),t.play()})):t.play()},a.prototype.pauseElement=function(t,e){r.logger.log("queuing pause on "+e+" and element "+t),this.mediaPromises[e]=this.mediaPromises[e]?this.mediaPromises[e].then((function(){return r.logger.log("previous promise completed for "+e),t.pause()}),(function(){return r.logger.log("previous promise failed for "+e),t.pause()})):t.pause()},a.prototype.assignElement=function(t,e,n){r.logger.log("queuing assign on "+n+" element "+t+" for "+e),this.mediaPromises[n]?this.mediaPromises[n]=this.mediaPromises[n].then((function(){r.logger.log("previous promise completed for "+n),t.srcObject=e}),(function(){r.logger.log("previous promise failed for "+n),t.srcObject=e})):t.srcObject=e},a.prototype.getLocalVideoElement=function(){return this.localVideoElement},a.prototype.getRemoteVideoElement=function(){return this.remoteVideoElement},a.prototype.getRemoteAudioElement=function(){return this.remoteAudioElement},a.prototype.setLocalVideoElement=function(t){if(this.localVideoElement=t,t&&this.localAVStream&&"video"===this.type){t.autoplay=!0,this.assignElement(t,this.localAVStream,"localVideo"),t.muted=!0;const e=this;setTimeout((function(){const t=e.getLocalVideoElement();t.play&&e.playElement(t,"localVideo")}),0)}},a.prototype.setRemoteVideoElement=function(t){this.remoteVideoElement=t,f(this)},a.prototype.setRemoteAudioElement=function(t){this.remoteVideoElement.muted=!0,this.remoteAudioElement=t,this.remoteAudioElement.muted=!1,g(this)},a.prototype._initWithInvite=function(t){this.msg=t.getContent(),this.peerConn=S(this);const e=this;this.peerConn&&this.peerConn.setRemoteDescription(new this.webRtc.RtcSessionDescription(this.msg.offer),k(e,e._onSetRemoteDescriptionSuccess),k(e,e._onSetRemoteDescriptionError)),u(this,"ringing"),this.direction="inbound",this.type=this.msg.offer&&this.msg.offer.sdp&&this.msg.offer.sdp.indexOf("m=video")>-1?"video":"voice",t.getAge()&&setTimeout((function(){"ringing"==e.state&&(v("Call invite has expired. Hanging up."),e.hangupParty="remote",u(e,"ended"),m(e),"closed"!=e.peerConn.signalingState&&e.peerConn.close(),e.emit("hangup",e))}),this.msg.lifetime-t.getAge())},a.prototype._initWithHangup=function(t){this.msg=t.getContent(),u(this,"ended")},a.prototype.answer=function(){v("Answering call %s of type %s",this.callId,this.type),this._answerContent?this._sendAnswer():this.localAVStream||this.waitForLocalAVStream?this.localAVStream?this._maybeGotUserMediaForAnswer(this.localAVStream):this.waitForLocalAVStream&&u(this,"wait_local_media"):(this.webRtc.getUserMedia(E(this.type),k(this,this._maybeGotUserMediaForAnswer),k(this,this._maybeGotUserMediaForAnswer)),u(this,"wait_local_media"))},a.prototype._replacedBy=function(t){v(this.callId+" being replaced by "+t.callId),"wait_local_media"==this.state?(v("Telling new call to wait for local media"),t.waitForLocalAVStream=!0):("create_offer"==this.state||"invite_sent"==this.state)&&(v("Handing local stream to new call"),t._maybeGotUserMediaForAnswer(this.localAVStream),delete this.localAVStream),t.localVideoElement=this.localVideoElement,t.remoteVideoElement=this.remoteVideoElement,t.remoteAudioElement=this.remoteAudioElement,this.successor=t,this.emit("replaced",t),this.hangup(!0)},a.prototype.hangup=function(t,e){"ended"!=this.state&&(v("Ending call "+this.callId),p(this,"local",t,!e),h(this,"m.call.hangup",{version:0,call_id:this.callId,reason:t}))},a.prototype.setLocalVideoMuted=function(t){this.localAVStream&&c(this.localAVStream.getVideoTracks(),!t)},a.prototype.isLocalVideoMuted=function(){return!!this.localAVStream&&!l(this.localAVStream.getVideoTracks())},a.prototype.setMicrophoneMuted=function(t){this.localAVStream&&c(this.localAVStream.getAudioTracks(),!t)},a.prototype.isMicrophoneMuted=function(){return!!this.localAVStream&&!l(this.localAVStream.getAudioTracks())},a.prototype._maybeGotUserMediaForInvite=function(t){if(this.successor)return void this.successor._maybeGotUserMediaForAnswer(t);if("ended"==this.state)return;v("_maybeGotUserMediaForInvite -> "+this.type);const e=this,n=t,i={mandatory:{OfferToReceiveAudio:!0,OfferToReceiveVideo:"video"===e.type}};if(t instanceof MediaStream){const n=this.getLocalVideoElement();n&&"video"==this.type&&(n.autoplay=!0,this.screenSharingStream?(v("Setting screen sharing stream to the local video element"),this.assignElement(n,this.screenSharingStream,"localVideo")):this.assignElement(n,t,"localVideo"),n.muted=!0,setTimeout((function(){const t=e.getLocalVideoElement();t.play&&e.playElement(t,"localVideo")}),0)),this.screenSharingStream&&(this.screenSharingStream.addTrack(t.getAudioTracks()[0]),t=this.screenSharingStream),this.localAVStream=t,c(t.getAudioTracks(),!0),this.peerConn=S(this),this.peerConn.addStream(t)}else{if("PermissionDeniedError"!==n.name)return v("Failed to getUserMedia: "+n.name),void this._getUserMediaFailed(n);v("User denied access to camera/microphone. Or possibly you are using an insecure domain. Receiving only."),this.peerConn=S(this)}this.peerConn.createOffer(k(e,e._gotLocalOffer),k(e,e._getLocalOfferFailed),i),u(e,"create_offer")},a.prototype._sendAnswer=function(t){h(this,"m.call.answer",this._answerContent).then(()=>{u(this,"connecting"),b(this)}).catch(t=>{u(this,"ringing"),this.client.cancelPendingEvent(t.event);let e=a.ERR_SEND_ANSWER,n="Failed to send answer";throw"UnknownDeviceError"==t.name&&(e=a.ERR_UNKNOWN_DEVICES,n="Unknown devices present in the room"),this.emit("error",y(e,n)),t})},a.prototype._maybeGotUserMediaForAnswer=function(t){const e=this;if("ended"==e.state)return;const n=t;if(t instanceof MediaStream){const n=e.getLocalVideoElement();n&&"video"==e.type&&(n.autoplay=!0,this.assignElement(n,t,"localVideo"),n.muted=!0,setTimeout((function(){const t=e.getLocalVideoElement();t.play&&e.playElement(t,"localVideo")}),0)),e.localAVStream=t,c(t.getAudioTracks(),!0),e.peerConn.addStream(t)}else{if("PermissionDeniedError"!==n.name)return v("Failed to getUserMedia: "+n.name),void this._getUserMediaFailed(n);v("User denied access to camera/microphone. Or possibly you are using an insecure domain. Receiving only.")}const i={mandatory:{OfferToReceiveAudio:!0,OfferToReceiveVideo:"video"===e.type}};e.peerConn.createAnswer((function(t){v("Created answer: ",t),e.peerConn.setLocalDescription(t,(function(){e._answerContent={version:0,call_id:e.callId,answer:{sdp:e.peerConn.localDescription.sdp,type:e.peerConn.localDescription.type}},e._sendAnswer()}),(function(){v("Error setting local description!")}),i)}),(function(t){v("Failed to create answer: "+t)})),u(e,"create_answer")},a.prototype._gotLocalIceCandidate=function(t){if(t.candidate){if(v("Got local ICE "+t.candidate.sdpMid+" candidate: "+t.candidate.candidate),"ended"==this.state)return;d(this,{candidate:t.candidate.candidate,sdpMid:t.candidate.sdpMid,sdpMLineIndex:t.candidate.sdpMLineIndex})}},a.prototype._gotRemoteIceCandidate=function(t){"ended"!=this.state&&(v("Got remote ICE "+t.sdpMid+" candidate: "+t.candidate),this.peerConn.addIceCandidate(new this.webRtc.RtcIceCandidate(t),(function(){}),(function(t){})))},a.prototype._receivedAnswer=function(t){"ended"!=this.state&&(this.peerConn.setRemoteDescription(new this.webRtc.RtcSessionDescription(t.answer),k(this,this._onSetRemoteDescriptionSuccess),k(this,this._onSetRemoteDescriptionError)),u(this,"connecting"))},a.prototype._gotLocalOffer=function(t){const e=this;v("Created offer: ",t),"ended"!=e.state?e.peerConn.setLocalDescription(t,(function(){h(e,"m.call.invite",{version:0,call_id:e.callId,offer:{sdp:e.peerConn.localDescription.sdp,type:e.peerConn.localDescription.type},lifetime:a.CALL_TIMEOUT_MS}).then(()=>{u(e,"invite_sent"),setTimeout((function(){"invite_sent"==e.state&&e.hangup("invite_timeout")}),a.CALL_TIMEOUT_MS)}).catch(t=>{let n=a.ERR_SEND_INVITE,i="Failed to send invite";throw"UnknownDeviceError"==t.name&&(n=a.ERR_UNKNOWN_DEVICES,i="Unknown devices present in the room"),e.client.cancelPendingEvent(t.event),p(e,"local",n,!1),e.emit("error",y(n,i)),t})}),(function(){v("Error setting local description!")})):v("Ignoring newly created offer on call ID "+e.callId+" because the call has ended")},a.prototype._getLocalOfferFailed=function(t){this.emit("error",y(a.ERR_LOCAL_OFFER_FAILED,"Failed to start audio for call!"))},a.prototype._getUserMediaFailed=function(t){p(this,"local","user_media_failed",!1),this.emit("error",y(a.ERR_NO_USER_MEDIA,"Couldn't start capturing media! Is your microphone set up and does this app have permission?"))},a.prototype._onIceConnectionStateChanged=function(){"ended"!=this.state&&(v("Ice connection state changed to: "+this.peerConn.iceConnectionState),"completed"==this.peerConn.iceConnectionState||"connected"==this.peerConn.iceConnectionState?(u(this,"connected"),this.didConnect=!0):"failed"==this.peerConn.iceConnectionState&&this.hangup("ice_failed"))},a.prototype._onSignallingStateChanged=function(){v("call "+this.callId+": Signalling state changed to: "+this.peerConn.signalingState)},a.prototype._onSetRemoteDescriptionSuccess=function(){v("Set remote description")},a.prototype._onSetRemoteDescriptionError=function(t){v("Failed to set remote description"+t)},a.prototype._onAddStream=function(t){v("Stream id "+t.stream.id+" added");const e=t.stream;e.getVideoTracks().length>0?(this.type="video",this.remoteAVStream=e,this.remoteAStream=e):(this.type="voice",this.remoteAStream=e);const n=this;C(e,(function(t){v("Track id "+t.id+" added"),t.onstarted=k(n,n._onRemoteStreamTrackStarted)})),void 0!==t.stream.oninactive?t.stream.oninactive=k(n,n._onRemoteStreamEnded):t.stream.onended=k(n,n._onRemoteStreamEnded),t.stream.onstarted=k(n,n._onRemoteStreamStarted),"video"===this.type?(f(this),g(this)):g(this)},a.prototype._onRemoteStreamStarted=function(t){u(this,"connected")},a.prototype._onRemoteStreamEnded=function(t){v("Remote stream ended"),this.hangupParty="remote",u(this,"ended"),m(this),"closed"!=this.peerConn.signalingState&&this.peerConn.close(),this.emit("hangup",this)},a.prototype._onRemoteStreamTrackStarted=function(t){u(this,"connected")},a.prototype._onHangupReceived=function(t){v("Hangup received"),p(this,"remote",t.reason,!0)},a.prototype._onAnsweredElsewhere=function(t){v("Answered elsewhere"),p(this,"remote","answered_elsewhere",!0)};const c=function(t,e){for(let n=0;n<t.length;n++)t[n].enabled=e},l=function(t){for(let e=0;e<t.length;e++)if(t[e].enabled)return!0;return!1},u=function(t,e){const n=t.state;t.state=e,t.emit("state",e,n)},h=function(t,e,n){return t.client.sendEvent(t.roomId,e,n)},d=function(t,e){t.candidateSendQueue.push(e),"ringing"!=t.state&&0===t.candidateSendTries&&setTimeout((function(){b(t)}),100)},p=function(t,e,n,i){t.getRemoteVideoElement()&&(t.getRemoteVideoElement().pause&&t.pauseElement(t.getRemoteVideoElement(),"remoteVideo"),t.assignElement(t.getRemoteVideoElement(),null,"remoteVideo")),t.getRemoteAudioElement()&&(t.getRemoteAudioElement().pause&&t.pauseElement(t.getRemoteAudioElement(),"remoteAudio"),t.assignElement(t.getRemoteAudioElement(),null,"remoteAudio")),t.getLocalVideoElement()&&(t.getLocalVideoElement().pause&&t.pauseElement(t.getLocalVideoElement(),"localVideo"),t.assignElement(t.getLocalVideoElement(),null,"localVideo")),t.hangupParty=e,t.hangupReason=n,u(t,"ended"),m(t),t.peerConn&&"closed"!==t.peerConn.signalingState&&t.peerConn.close(),i&&t.emit("hangup",t)},m=function(t){v("stopAllMedia (stream=%s)",t.localAVStream),t.localAVStream&&(C(t.localAVStream,(function(t){t.stop&&t.stop()})),t.localAVStream.stop&&t.localAVStream.stop()),t.screenSharingStream&&(C(t.screenSharingStream,(function(t){t.stop&&t.stop()})),t.screenSharingStream.stop&&t.screenSharingStream.stop()),t.remoteAVStream&&C(t.remoteAVStream,(function(t){t.stop&&t.stop()})),t.remoteAStream&&C(t.remoteAStream,(function(t){t.stop&&t.stop()}))},f=function(t){if(t.getRemoteVideoElement()&&t.remoteAVStream){const e=t.getRemoteVideoElement();e.autoplay=!0,t.assignElement(e,t.remoteAVStream,"remoteVideo"),setTimeout((function(){const e=t.getRemoteVideoElement();e.play&&t.playElement(e,"remoteVideo"),t.webRtc.isOpenWebRTC()&&u(t,"connected")}),0)}},g=async function(t){if(t.getRemoteAudioElement()&&t.remoteAStream){const e=t.getRemoteAudioElement();x&&await e.setSinkId(x),e.autoplay=!0,t.assignElement(e,t.remoteAStream,"remoteAudio"),setTimeout((function(){const e=t.getRemoteAudioElement();e.play&&t.playElement(e,"remoteAudio"),t.webRtc.isOpenWebRTC()&&u(t,"connected")}),0)}},_=function(t){if(0===t.listeners("error").length)throw new Error("You MUST attach an error listener using call.on('error', function() {})")},y=function(t,e){const n=new Error(e);return n.code=t,n},v=function(){r.logger.log(...arguments)},b=function(t){if(0===t.candidateSendQueue.length)return;const e=t.candidateSendQueue;t.candidateSendQueue=[],++t.candidateSendTries;const n={version:0,call_id:t.callId,candidates:e};v("Attempting to send "+e.length+" candidates"),h(t,"m.call.candidates",n).then((function(){t.candidateSendTries=0,b(t)}),(function(n){for(let r=0;r<e.length;r++)t.candidateSendQueue.push(e[r]);if(t.candidateSendTries>5)return v("Failed to send candidates on attempt %s. Giving up for now.",t.candidateSendTries),void(t.candidateSendTries=0);const i=500*Math.pow(2,t.candidateSendTries);++t.candidateSendTries,v("Failed to send candidates. Retrying in "+i+"ms"),setTimeout((function(){b(t)}),i)}))},w=function(t,e){t.client.callList[t.callId]=t,t.webRtc.getUserMedia(e,k(t,t._maybeGotUserMediaForInvite),k(t,t._maybeGotUserMediaForInvite)),u(t,"wait_local_media"),t.direction="outbound",t.config=e},S=function(t){const e=new t.webRtc.RtcPeerConnection({iceTransportPolicy:t.forceTURN?"relay":void 0,iceServers:t.turnServers});return e.oniceconnectionstatechange=k(t,t._onIceConnectionStateChanged),e.onsignalingstatechange=k(t,t._onSignallingStateChanged),e.onicecandidate=k(t,t._gotLocalIceCandidate),e.onaddstream=k(t,t._onAddStream),e},E=function(t){const e=!!global.window.navigator.webkitGetUserMedia;switch(t){case"voice":return{audio:{deviceId:T?{ideal:T}:void 0},video:!1};case"video":return{audio:{deviceId:T?{ideal:T}:void 0},video:{deviceId:I?{ideal:I}:void 0,width:e?{exact:640}:{ideal:640},height:e?{exact:360}:{ideal:360}}}}},k=function(t,e){return function(){return e.apply(t,arguments)}},C=function(t,e){!function(t,e){const n=t.getVideoTracks();for(let i=0;i<n.length;i++)e(n[i])}(t,e),function(t,e){const n=t.getAudioTracks();for(let i=0;i<n.length;i++)e(n[i])}(t,e)};let x,T,I},Hzpt:function(t,e,n){"use strict";function i(t,e){const n=Reflect.construct(Error,[`Store is invalid because ${t}, please stop the client, delete all data and start the client again`]);return Reflect.setPrototypeOf(n,Reflect.getPrototypeOf(this)),n.reason=t,n.value=e,n}function r(t){const e=Reflect.construct(Error,[`Crypto store is invalid because ${t}, please stop the client, delete all data and start the client again`]);return Reflect.setPrototypeOf(e,Reflect.getPrototypeOf(this)),e.reason=t,e.name="InvalidCryptoStoreError",e}Object.defineProperty(e,"__esModule",{value:!0}),e.InvalidStoreError=i,e.InvalidCryptoStoreError=r,e.KeySignatureUploadError=void 0,i.TOGGLED_LAZY_LOADING="TOGGLED_LAZY_LOADING",i.prototype=Object.create(Error.prototype,{constructor:{value:Error,enumerable:!1,writable:!0,configurable:!0}}),Reflect.setPrototypeOf(i,Error),r.TOO_NEW="TOO_NEW",r.prototype=Object.create(Error.prototype,{constructor:{value:Error,enumerable:!1,writable:!0,configurable:!0}}),Reflect.setPrototypeOf(r,Error);class s extends Error{constructor(t,e){super(t),this.value=e}}e.KeySignatureUploadError=s},IzJ1:function(t,e,n){"use strict";var i=n("284h");Object.defineProperty(e,"__esModule",{value:!0}),e.SecretStorage=e.SECRET_STORAGE_ALGORITHM_V1_AES=void 0;var r=n("+qE3"),s=n("PrRn"),o=i(n("VRzr")),a=n("PwFS"),c=n("uMDy");e.SECRET_STORAGE_ALGORITHM_V1_AES="m.secret_storage.v1.aes-hmac-sha2";class l extends r.EventEmitter{constructor(t,e){super(),this._baseApis=t,this._cryptoCallbacks=e,this._requests={},this._incomingRequests={}}async getDefaultKeyId(){const t=await this._baseApis.getAccountDataFromServer("m.secret_storage.default_key");return t?t.key:null}setDefaultKeyId(t){return new Promise(async(e,n)=>{const i=n=>{"m.secret_storage.default_key"===n.getType()&&n.getContent().key===t&&(this._baseApis.removeListener("accountData",i),e())};this._baseApis.on("accountData",i);try{await this._baseApis.setAccountData("m.secret_storage.default_key",{key:t})}catch(r){this._baseApis.removeListener("accountData",i),n(r)}})}async addKey(t,e,n){const i={algorithm:t};if(e||(e={}),e.name&&(i.name=e.name),"m.secret_storage.v1.aes-hmac-sha2"!==t)throw new Error("Unknown key algorithm "+e.algorithm);if(e.passphrase&&(i.passphrase=e.passphrase),e.key){const{iv:t,mac:n}=await l._calculateKeyCheck(e.key);i.iv=t,i.mac=n}if(!n)do{n=(0,a.randomString)(32)}while(await this._baseApis.getAccountDataFromServer("m.secret_storage.key."+n));return await this._baseApis.setAccountData("m.secret_storage.key."+n,i),n}async getKey(t){if(t||(t=await this.getDefaultKeyId()),!t)return null;const e=await this._baseApis.getAccountDataFromServer("m.secret_storage.key."+t);return e?[t,e]:null}async hasKey(t){return!!(await this.getKey(t))}async checkKey(t,e){if("m.secret_storage.v1.aes-hmac-sha2"===e.algorithm){if(e.mac){const{mac:n}=await l._calculateKeyCheck(t,e.iv);return e.mac.replace(/=+$/g,"")===n.replace(/=+$/g,"")}return!0}throw new Error("Unknown algorithm")}static async _calculateKeyCheck(t,e){return await(0,c.encryptAES)("\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0",t,"",e)}async store(t,e,n){const i={};if(!n){const t=await this.getDefaultKeyId();if(!t)throw new Error("No keys specified and no default key present");n=[t]}if(0===n.length)throw new Error("Zero keys given to encrypt with!");for(const r of n){const n=await this._baseApis.getAccountDataFromServer("m.secret_storage.key."+r);if(!n)throw new Error("Unknown key: "+r);if("m.secret_storage.v1.aes-hmac-sha2"===n.algorithm){const s={[r]:n},[,o]=await this._getSecretStorageKey(s,t);i[r]=await o.encrypt(e)}else s.logger.warn("unknown algorithm for secret storage key "+r+": "+n.algorithm)}await this._baseApis.setAccountData(t,{encrypted:i})}async _fixupStoredSecret(t,e){const n=Object.keys(e);return 1===n.length&&"encrypted"!==n[0]&&e[n[0]].passthrough&&await this.hasKey(n[0])?(console.log("Fixing up passthrough secret: "+t),await this.storePassthrough(t,n[0]),await this._baseApis.getAccountDataFromServer(t)):null}async get(t){let e=await this._baseApis.getAccountDataFromServer(t);if(!e)return;if(!e.encrypted&&(e=await this._fixupStoredSecret(t,e),!e||!e.encrypted))throw new Error("Content is not encrypted!");const n={};for(const s of Object.keys(e.encrypted)){const t=await this._baseApis.getAccountDataFromServer("m.secret_storage.key."+s),i=e.encrypted[s];"m.secret_storage.v1.aes-hmac-sha2"===t.algorithm&&i.iv&&i.ciphertext&&i.mac&&(n[s]=t)}if(0===Object.keys(n).length)throw new Error(`Could not decrypt ${t} because none of the keys it is encrypted with are for a supported algorithm`);let i,r;try{[i,r]=await this._getSecretStorageKey(n,t);const s=e.encrypted[i];return s.passthrough?(0,o.encodeBase64)(r.get_private_key()):await r.decrypt(s)}finally{r&&r.free&&r.free()}}async isStored(t,e){let n=await this._baseApis.getAccountDataFromServer(t);if(!n)return null;if(!n.encrypted&&(n=await this._fixupStoredSecret(t,n),!n||!n.encrypted))return null;void 0===e&&(e=!0);const i={};for(const r of Object.keys(n.encrypted)){const t=await this._baseApis.getAccountDataFromServer("m.secret_storage.key."+r);if(!t)continue;const e=n.encrypted[r];"m.secret_storage.v1.aes-hmac-sha2"===t.algorithm&&e.iv&&e.ciphertext&&e.mac&&(i[r]=t)}return Object.keys(i).length?i:null}request(t,e){const n=this._baseApis.makeTxnId(),i=this._requests[n]={devices:e},r=new Promise((t,e)=>{i.resolve=t,i.reject=e}),o={name:t,action:"request",requesting_device_id:this._baseApis.deviceId,request_id:n},a={};for(const s of e)a[s]=o;return s.logger.info(`Request secret ${t} from ${e}, id ${n}`),this._baseApis.sendToDevice("m.secret.request",{[this._baseApis.getUserId()]:a}),{request_id:n,promise:r,cancel:t=>{const r={action:"request_cancellation",requesting_device_id:this._baseApis.deviceId,request_id:n},s={};for(const n of e)s[n]=r;this._baseApis.sendToDevice("m.secret.request",{[this._baseApis.getUserId()]:s}),i.reject(new Error(t||"Cancelled"))}}}async _onRequestReceived(t){const e=t.getSender(),n=t.getContent();if(e!==this._baseApis.getUserId()||!(n.name&&n.action&&n.requesting_device_id&&n.request_id))return;const i=n.requesting_device_id;if("request_cancellation"===n.action)this._incomingRequests[i]&&this._incomingRequests[i][n.request_id]&&(s.logger.info("received request cancellation for secret ("+e+", "+i+", "+n.request_id+")"),this.baseApis.emit("crypto.secrets.requestCancelled",{user_id:e,device_id:i,request_id:n.request_id}));else if("request"===n.action){if(i===this._baseApis.deviceId)return;if(s.logger.info("received request for secret ("+e+", "+i+", "+n.request_id+")"),!this._cryptoCallbacks.onSecretRequested)return;const t=await this._cryptoCallbacks.onSecretRequested({user_id:e,device_id:i,request_id:n.request_id,name:n.name,device_trust:this._baseApis.checkDeviceTrust(e,i)});if(t){s.logger.info(`Preparing ${n.name} secret for ${i}`);const r={type:"m.secret.send",content:{request_id:n.request_id,secret:t}},a={algorithm:o.OLM_ALGORITHM,sender_key:this._baseApis._crypto._olmDevice.deviceCurve25519Key,ciphertext:{}};await o.ensureOlmSessionsForDevices(this._baseApis._crypto._olmDevice,this._baseApis,{[e]:[this._baseApis.getStoredDevice(e,i)]}),await o.encryptMessageForDevice(a.ciphertext,this._baseApis.getUserId(),this._baseApis.deviceId,this._baseApis._crypto._olmDevice,e,this._baseApis.getStoredDevice(e,i),r);const c={[e]:{[i]:a}};s.logger.info(`Sending ${n.name} secret for ${i}`),this._baseApis.sendToDevice("m.room.encrypted",c)}else s.logger.info(`Request denied for ${n.name} secret for ${i}`)}}_onSecretReceived(t){if(t.getSender()!==this._baseApis.getUserId())return;const e=t.getContent();s.logger.log("got secret share for request",e.request_id);const n=this._requests[e.request_id];if(n){const i=this._baseApis._crypto._deviceList.getDeviceByIdentityKey(o.OLM_ALGORITHM,t.getSenderKey());if(!i)return void s.logger.log("secret share from unknown device with key",t.getSenderKey());if(!n.devices.includes(i.deviceId))return void s.logger.log("unsolicited secret share from device",i.deviceId);n.resolve(e.secret)}}async _getSecretStorageKey(t,e){if(!this._cryptoCallbacks.getSecretStorageKey)throw new Error("No getSecretStorageKey callback supplied");const n=await this._cryptoCallbacks.getSecretStorageKey({keys:t},e);if(!n)throw new Error("getSecretStorageKey callback returned falsey");if(n.length<2)throw new Error("getSecretStorageKey callback returned invalid data");const[i,r]=n;if(!t[i])throw new Error("App returned unknown key from getSecretStorageKey!");if("m.secret_storage.v1.aes-hmac-sha2"===t[i].algorithm)return[i,{encrypt:async function(t){return await(0,c.encryptAES)(t,r,e)},decrypt:async function(t){return await(0,c.decryptAES)(t,r,e)}}];throw new Error("Unknown key type: "+t[i].algorithm)}}e.SecretStorage=l},JOJy:function(t,e,n){"use strict";var i=n("284h");Object.defineProperty(e,"__esModule",{value:!0}),e.getHttpUriForMxc=function(t,e,n,i,s,o){if("string"!=typeof e||!e)return"";if(0!==e.indexOf("mxc://"))return o?e:"";let a=e.slice(6),c="/_matrix/media/r0/download/";const l={};n&&(l.width=Math.round(n)),i&&(l.height=Math.round(i)),s&&(l.method=s),r.keys(l).length>0&&(c="/_matrix/media/r0/thumbnail/");const u=a.indexOf("#");let h="";return u>=0&&(h=a.substr(u),a=a.substr(0,u)),t+c+a+(0===r.keys(l).length?"":"?"+r.encodeParams(l))+h},e.getIdenticonUri=function(t,e,n,i){if(!e)return null;n||(n=96),i||(i=96);const s={width:n,height:i};return t+r.encodeUri("/_matrix/media/unstable/identicon/$ident",{$ident:e})+(0===r.keys(s).length?"":"?"+r.encodeParams(s))};var r=i(n("t+e4"))},K5J2:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),n("ML54"),n("tMY0");var i=n("9BO/");Object.keys(i).forEach((function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return i[t]}})}))},LxUt:function(t,e,n){"use strict";var i=n("284h");Object.defineProperty(e,"__esModule",{value:!0}),e.MatrixScheduler=s;var r=i(n("t+e4"));function s(t,e){this.retryAlgorithm=t||s.RETRY_BACKOFF_RATELIMIT,this.queueAlgorithm=e||s.QUEUE_MESSAGES,this._queues={},this._activeQueues=[],this._procFn=null}function o(t){t._procFn&&r.forEach(r.filter(r.keys(t._queues),(function(e){return-1===t._activeQueues.indexOf(e)&&t._queues[e].length>0})),(function(e){t._activeQueues.push(e),function t(e,n){const i=function(t,e){const n=t._queues[e];return r.isArray(n)?n[0]:null}(e,n);if(i)Promise.resolve().then(()=>e._procFn(i.event)).then((function(r){a(e,n),i.event.getId(),i.defer.resolve(r),t(e,n)}),(function(r){i.attempts+=1;const s=e.retryAlgorithm(i.event,i.attempts,r);i.event.getId(),-1===s?(i.event.getId(),a(e,n),i.defer.reject(r),t(e,n)):setTimeout((function(){t(e,n)}),s)}));else{const t=e._activeQueues.indexOf(n);t>=0&&e._activeQueues.splice(t,1)}}(t,e)}))}function a(t,e){const n=t._queues[e];return r.isArray(n)?n.shift():null}n("PrRn"),s.prototype.getQueueForEvent=function(t){const e=this.queueAlgorithm(t);return e&&this._queues[e]?r.map(this._queues[e],(function(t){return t.event})):null},s.prototype.removeEventFromQueue=function(t){const e=this.queueAlgorithm(t);if(!e||!this._queues[e])return!1;let n=!1;return r.removeElement(this._queues[e],(function(e){if(e.event.getId()===t.getId())return n=!0,!0})),n},s.prototype.setProcessFunction=function(t){this._procFn=t,o(this)},s.prototype.queueEvent=function(t){const e=this.queueAlgorithm(t);if(!e)return null;this._queues[e]||(this._queues[e]=[]);const n=r.defer();return this._queues[e].push({event:t,defer:n,attempts:0}),t.getId(),o(this),n.promise},s.RETRY_BACKOFF_RATELIMIT=function(t,e,n){if(400===n.httpStatus||403===n.httpStatus||401===n.httpStatus)return-1;if("rejected"===n.cors)return-1;if("M_TOO_LARGE"===n.name)return-1;if("M_LIMIT_EXCEEDED"===n.name){const t=n.data.retry_after_ms;if(t)return t}return e>4?-1:1e3*Math.pow(2,e)},s.QUEUE_MESSAGES=function(t){return"m.room.message"===t.getType()||t.hasAssocation()?"message":null}},"M/Il":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.setNow=function(t){a=t||Date.now},e.setTimeout=function(t,e){(e=e||0)<0&&(e=0);const n=Array.prototype.slice.call(arguments,2),i=a()+e,r=s++,l={runAt:i,func:t,params:n,key:r},h=u(o,(function(t){return t.runAt-i}));return o.splice(h,0,l),c(),r},e.clearTimeout=function(t){if(0===o.length)return;let e;for(e=0;e<o.length;e++)if(o[e].key==t){o.splice(e,1);break}0===e&&c()};var i=n("PrRn");let r,s=0;const o=[];let a=Date.now;function c(){r&&global.clearTimeout(r);const t=o[0];if(!t)return;const e=a(),n=Math.min(t.runAt-e,1e3);r=global.setTimeout(l,n)}function l(){let t;const e=a(),n=[];for(;;){const i=o[0];if(!i||i.runAt>e)break;t=o.shift(),n.push(t)}c();for(let s=0;s<n.length;s++){t=n[s];try{t.func.apply(global,t.params)}catch(r){i.logger.error("Uncaught exception in callback function",r.stack||r)}}}function u(t,e){let n=0,i=t.length;for(;n<i;){const r=n+i>>1;e(t[r])>0?i=r:n=r+1}return n}},M2bJ:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.LocalStorageCryptoStore=void 0;var i=n("PrRn"),r=n("qdUr");function s(t){return"crypto.sessions/"+t}function o(t){return"crypto.session.problems/"+t}function a(t,e){return"crypto.inboundgroupsessions/"+t+"/"+e}function c(t,e){return"crypto.inboundgroupsessions.withheld/"+t+"/"+e}function l(t){return"crypto.rooms/"+t}function u(t,e){try{return JSON.parse(t.getItem(e))}catch(n){i.logger.log("Error: Failed to get key %s: %s",e,n.stack||n),i.logger.log(n.stack)}return null}function h(t,e,n){t.setItem(e,JSON.stringify(n))}e.LocalStorageCryptoStore=class extends r.MemoryCryptoStore{constructor(t){super(),this.store=t}static exists(t){const e=t.length;for(let n=0;n<e;n++)if(t.key(n).startsWith("crypto."))return!0;return!1}countEndToEndSessions(t,e){let n=0;for(let i=0;i<this.store.length;++i)this.store.key(i).startsWith(s(""))&&++n;e(n)}_getEndToEndSessions(t,e,n){const i=u(this.store,s(t)),r={};for(const[s,o]of Object.entries(i||{}))r[s]="string"==typeof o?{session:o}:o;return r}getEndToEndSession(t,e,n,i){i(this._getEndToEndSessions(t)[e]||{})}getEndToEndSessions(t,e,n){n(this._getEndToEndSessions(t)||{})}getAllEndToEndSessions(t,e){for(let n=0;n<this.store.length;++n)if(this.store.key(n).startsWith(s(""))){const t=this.store.key(n).split("/")[1];for(const n of Object.values(this._getEndToEndSessions(t)))e(n)}}storeEndToEndSession(t,e,n,i){const r=this._getEndToEndSessions(t)||{};r[e]=n,h(this.store,s(t),r)}async storeEndToEndSessionProblem(t,e,n){const i=o(t),r=u(this.store,i)||[];r.push({type:e,fixed:n,time:Date.now()}),r.sort((t,e)=>t.time-e.time),h(this.store,i,r)}async getEndToEndSessionProblem(t,e){const n=o(t),i=u(this.store,n)||[];if(!i.length)return null;const r=i[i.length-1];for(const s of i)if(s.time>e)return Object.assign({},s,{fixed:r.fixed});return r.fixed?null:r}async filterOutNotifiedErrorDevices(t){const e=u(this.store,"crypto.notified_error_devices")||{},n=[];for(const i of t){const{userId:t,deviceInfo:r}=i;t in e?r.deviceId in e[t]||(n.push(i),e[t][r.deviceId]=!0):(n.push(i),e[t]={[r.deviceId]:!0})}return h(this.store,"crypto.notified_error_devices",e),n}getEndToEndInboundGroupSession(t,e,n,i){i(u(this.store,a(t,e)),u(this.store,c(t,e)))}getAllEndToEndInboundGroupSessions(t,e){for(let n=0;n<this.store.length;++n){const t=this.store.key(n);t.startsWith("crypto.inboundgroupsessions/")&&e({senderKey:t.substr("crypto.inboundgroupsessions/".length,43),sessionId:t.substr("crypto.inboundgroupsessions/".length+44),sessionData:u(this.store,t)})}e(null)}addEndToEndInboundGroupSession(t,e,n,i){u(this.store,a(t,e))||this.storeEndToEndInboundGroupSession(t,e,n,i)}storeEndToEndInboundGroupSession(t,e,n,i){h(this.store,a(t,e),n)}storeEndToEndInboundGroupSessionWithheld(t,e,n,i){h(this.store,c(t,e),n)}getEndToEndDeviceData(t,e){e(u(this.store,"crypto.device_data"))}storeEndToEndDeviceData(t,e){h(this.store,"crypto.device_data",t)}storeEndToEndRoom(t,e,n){h(this.store,l(t),e)}getEndToEndRooms(t,e){const n={},i=l("");for(let r=0;r<this.store.length;++r){const t=this.store.key(r);t.startsWith(i)&&(n[t.substr(i.length)]=u(this.store,t))}e(n)}getSessionsNeedingBackup(t){const e=u(this.store,"crypto.sessionsneedingbackup")||{},n=[];for(const i in e)if(Object.prototype.hasOwnProperty.call(e,i)){const e=i.substr(0,43),r=i.substr(44);if(this.getEndToEndInboundGroupSession(e,r,null,t=>{n.push({senderKey:e,sessionId:r,sessionData:t})}),t&&i.length>=t)break}return Promise.resolve(n)}countSessionsNeedingBackup(){const t=u(this.store,"crypto.sessionsneedingbackup")||{};return Promise.resolve(Object.keys(t).length)}unmarkSessionsNeedingBackup(t){const e=u(this.store,"crypto.sessionsneedingbackup")||{};for(const n of t)delete e[n.senderKey+"/"+n.sessionId];return h(this.store,"crypto.sessionsneedingbackup",e),Promise.resolve()}markSessionsNeedingBackup(t){const e=u(this.store,"crypto.sessionsneedingbackup")||{};for(const n of t)e[n.senderKey+"/"+n.sessionId]=!0;return h(this.store,"crypto.sessionsneedingbackup",e),Promise.resolve()}deleteAllData(){return this.store.removeItem("crypto.account"),Promise.resolve()}getAccount(t,e){e(u(this.store,"crypto.account"))}storeAccount(t,e){h(this.store,"crypto.account",e)}getCrossSigningKeys(t,e){e(u(this.store,"crypto.cross_signing_keys"))}getSecretStorePrivateKey(t,e,n){e(u(this.store,"crypto.ssss_cache."+n))}storeCrossSigningKeys(t,e){h(this.store,"crypto.cross_signing_keys",e)}storeSecretStorePrivateKey(t,e,n){h(this.store,"crypto.ssss_cache."+e,n)}doTxn(t,e,n){return Promise.resolve(n(null))}}},ML54:function(t,e,n){"use strict";var i=n("284h"),r=n("PrRn"),s=i(n("t+e4")),o=i(n("VRzr")),a=n("Nfwx"),c=n("9BO/");const l=a.DeviceInfo.DeviceVerification;function u(t){(0,s.polyfillSuper)(this,c.EncryptionAlgorithm,t),this._sessionPrepared=!1,this._prepPromise=null}function h(t){(0,s.polyfillSuper)(this,c.DecryptionAlgorithm,t)}s.inherits(u,c.EncryptionAlgorithm),u.prototype._ensureSession=function(t){if(this._prepPromise)return this._prepPromise;if(this._sessionPrepared)return Promise.resolve();const e=this;return this._prepPromise=e._crypto.downloadKeys(t).then((function(n){return e._crypto.ensureOlmSessionsForUsers(t)})).then((function(){e._sessionPrepared=!0})).finally((function(){e._prepPromise=null})),this._prepPromise},u.prototype.encryptMessage=async function(t,e,n){const i=await t.getEncryptionTargetMembers(),r=s.map(i,(function(t){return t.userId})),a=this;await this._ensureSession(r);const c={room_id:t.roomId,type:e,content:n},u={algorithm:o.OLM_ALGORITHM,sender_key:a._olmDevice.deviceCurve25519Key,ciphertext:{}},h=[];for(let s=0;s<r.length;++s){const t=r[s],e=a._crypto.getStoredDevicesForUser(t);for(let n=0;n<e.length;++n){const i=e[n];i.getIdentityKey()!=a._olmDevice.deviceCurve25519Key&&i.verified!=l.BLOCKED&&h.push(o.encryptMessageForDevice(u.ciphertext,a._userId,a._deviceId,a._olmDevice,t,i,c))}}return await Promise.all(h).then(()=>u)},s.inherits(h,c.DecryptionAlgorithm),h.prototype.decryptEvent=async function(t){const e=t.getWireContent(),n=e.sender_key,i=e.ciphertext;if(!i)throw new c.DecryptionError("OLM_MISSING_CIPHERTEXT","Missing ciphertext");if(!(this._olmDevice.deviceCurve25519Key in i))throw new c.DecryptionError("OLM_NOT_INCLUDED_IN_RECIPIENTS","Not included in recipients");const r=i[this._olmDevice.deviceCurve25519Key];let s;try{s=await this._decryptMessage(n,r)}catch(a){throw new c.DecryptionError("OLM_BAD_ENCRYPTED_MESSAGE","Bad Encrypted Message",{sender:n,err:a})}const o=JSON.parse(s);if(o.recipient!=this._userId)throw new c.DecryptionError("OLM_BAD_RECIPIENT","Message was intented for "+o.recipient);if(o.recipient_keys.ed25519!=this._olmDevice.deviceEd25519Key)throw new c.DecryptionError("OLM_BAD_RECIPIENT_KEY","Message not intended for this device",{intended:o.recipient_keys.ed25519,our_key:this._olmDevice.deviceEd25519Key});if(o.sender!=t.getSender())throw new c.DecryptionError("OLM_FORWARDED_MESSAGE","Message forwarded from "+o.sender,{reported_sender:t.getSender()});if(o.room_id!==t.getRoomId())throw new c.DecryptionError("OLM_BAD_ROOM","Message intended for room "+o.room_id,{reported_room:t.room_id});return{clearEvent:o,senderCurve25519Key:n,claimedEd25519Key:(o.keys||{}).ed25519||null}},h.prototype._decryptMessage=async function(t,e){if(0!==e.type)return this._reallyDecryptMessage(t,e);{const n=this._olmDevice._olmPrekeyPromise.then(()=>this._reallyDecryptMessage(t,e));return this._olmDevice._olmPrekeyPromise=n.catch(()=>{}),await n}},h.prototype._reallyDecryptMessage=async function(t,e){const n=await this._olmDevice.getSessionIdsForDevice(t),i={};for(let a=0;a<n.length;a++){const s=n[a];try{const n=await this._olmDevice.decryptMessage(t,s,e.type,e.body);return r.logger.log("Decrypted Olm message from "+t+" with session "+s),n}catch(o){if(await this._olmDevice.matchesSession(t,s,e.type,e.body))throw new Error("Error decrypting prekey message with existing session id "+s+": "+o.message);i[s]=o.message}}if(0!==e.type){if(0===n.length)throw new Error("No existing sessions");throw new Error("Error decrypting non-prekey message with existing sessions: "+JSON.stringify(i))}let s;try{s=await this._olmDevice.createInboundSession(t,e.type,e.body)}catch(o){throw i["(new)"]=o.message,new Error("Error decrypting prekey message: "+JSON.stringify(i))}return r.logger.log("created new inbound Olm session ID "+s.session_id+" with "+t),s.payload},(0,c.registerAlgorithm)(o.OLM_ALGORITHM,u,h)},Nehr:function(t,e,n){"use strict";t.exports={isString:function(t){return"string"==typeof t},isObject:function(t){return"object"==typeof t&&null!==t},isNull:function(t){return null===t},isNullOrUndefined:function(t){return null==t}}},Nfwx:function(t,e,n){"use strict";function i(t){Object.defineProperty(this,"deviceId",{enumerable:!0,value:t}),this.algorithms=[],this.keys={},this.verified=r.UNVERIFIED,this.known=!1,this.unsigned={},this.signatures={}}Object.defineProperty(e,"__esModule",{value:!0}),e.DeviceInfo=i,i.fromStorage=function(t,e){const n=new i(e);for(const i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);return n},i.prototype.toStorage=function(){return{algorithms:this.algorithms,keys:this.keys,verified:this.verified,known:this.known,unsigned:this.unsigned,signatures:this.signatures}},i.prototype.getFingerprint=function(){return this.keys["ed25519:"+this.deviceId]},i.prototype.getIdentityKey=function(){return this.keys["curve25519:"+this.deviceId]},i.prototype.getDisplayName=function(){return this.unsigned.device_display_name||null},i.prototype.isBlocked=function(){return this.verified==r.BLOCKED},i.prototype.isVerified=function(){return this.verified==r.VERIFIED},i.prototype.isUnverified=function(){return this.verified==r.UNVERIFIED},i.prototype.isKnown=function(){return 1==this.known};const r=i.DeviceVerification={VERIFIED:1,UNVERIFIED:0,BLOCKED:-1}},Nq7u:function(t,e,n){"use strict";var i=n("284h"),r=n("TqRt");Object.defineProperty(e,"__esModule",{value:!0}),e.InteractiveAuth=c;var s=r(n("CxY0")),o=i(n("t+e4")),a=n("PrRn");function c(t){this._matrixClient=t.matrixClient,this._data=t.authData||{},this._requestCallback=t.doRequest,this._busyChangedCallback=t.busyChanged,this._stateUpdatedCallback=t.stateUpdated||t.startAuthStage,this._resolveFunc=null,this._rejectFunc=null,this._inputs=t.inputs||{},this._requestEmailTokenCallback=t.requestEmailToken,t.sessionId&&(this._data.session=t.sessionId),this._clientSecret=t.clientSecret||this._matrixClient.generateClientSecret(),this._emailSid=t.emailSid,void 0===this._emailSid&&(this._emailSid=null),this._requestingEmailToken=!1,this._chosenFlow=null,this._currentStage=null,this._submitPromise=null}c.prototype={attemptAuth:function(){return new Promise((t,e)=>{if(this._resolveFunc=t,this._rejectFunc=e,this._data&&this._data.flows)this._startNextAuthStage();else{this._busyChangedCallback&&this._busyChangedCallback(!0);let t=null;this._data.session&&(t={session:this._data.session}),this._doRequest(t).finally(()=>{this._busyChangedCallback&&this._busyChangedCallback(!1)})}})},poll:async function(){if(!this._data.session)return;if(!this._resolveFunc)return;if(this._submitPromise)return;let t={};if("m.login.email.identity"==this._currentStage&&this._emailSid){const e={sid:this._emailSid,client_secret:this._clientSecret};if(await this._matrixClient.doesServerRequireIdServerParam()){const t=s.default.parse(this._matrixClient.getIdentityServerUrl());e.id_server=t.host}t={type:"m.login.email.identity",threepid_creds:e,threepidCreds:e}}this.submitAuthDict(t,!0)},getSessionId:function(){return this._data?this._data.session:void 0},getClientSecret:function(){return this._clientSecret},getStageParams:function(t){let e={};return this._data&&this._data.params&&(e=this._data.params),e[t]},getChosenFlow(){return this._chosenFlow},submitAuthDict:async function(t,e){if(!this._resolveFunc)throw new Error("submitAuthDict() called before attemptAuth()");for(!e&&this._busyChangedCallback&&this._busyChangedCallback(!0);this._submitPromise;)try{await this._submitPromise}catch(i){}let n;this._data.session?(n={session:this._data.session},o.extend(n,t)):n=t;try{this._submitPromise=this._doRequest(n,e),await this._submitPromise}finally{this._submitPromise=null,!e&&this._busyChangedCallback&&this._busyChangedCallback(!1)}},getEmailSid:function(){return this._emailSid},setEmailSid:function(t){this._emailSid=t},_doRequest:async function(t,e){try{const n=await this._requestCallback(t,e);this._resolveFunc(n),this._resolveFunc=null,this._rejectFunc=null}catch(n){const t=n.data?n.data.flows:null,r=this._data.flows||Boolean(t);401===n.httpStatus&&n.data&&r||(e?a.logger.log("Background poll request failed doing UI auth: ignoring",n):this._rejectFunc(n)),n.data.flows||n.data.completed||n.data.session||(n.data.flows=this._data.flows,n.data.completed=this._data.completed,n.data.session=this._data.session),this._data=n.data;try{this._startNextAuthStage()}catch(i){this._rejectFunc(i),this._resolveFunc=null,this._rejectFunc=null}if(!this._emailSid&&!this._requestingEmailToken&&this._chosenFlow.stages.includes("m.login.email.identity")){this._requestingEmailToken=!0;try{const t=await this._requestEmailTokenCallback(this._inputs.emailAddress,this._clientSecret,1,this._data.session);this._emailSid=t.sid}catch(i){this._rejectFunc(i),this._resolveFunc=null,this._rejectFunc=null}finally{this._requestingEmailToken=!1}}}},_startNextAuthStage:function(){const t=this._chooseStage();if(!t)throw new Error("No incomplete flows from the server");if(this._currentStage=t,"m.login.dummy"===t)return void this.submitAuthDict({type:"m.login.dummy"});if(this._data&&this._data.errcode||this._data.error)return void this._stateUpdatedCallback(t,{errcode:this._data.errcode||"",error:this._data.error||""});const e={};"m.login.email.identity"==t&&(e.emailSid=this._emailSid),this._stateUpdatedCallback(t,e)},_chooseStage:function(){null===this._chosenFlow&&(this._chosenFlow=this._chooseFlow()),a.logger.log("Active flow => %s",JSON.stringify(this._chosenFlow));const t=this._firstUncompletedStage(this._chosenFlow);return a.logger.log("Next stage: %s",t),t},_chooseFlow:function(){const t=this._data.flows||[],e=Boolean(this._inputs.emailAddress)||Boolean(this._emailSid),n=Boolean(this._inputs.phoneCountry)&&Boolean(this._inputs.phoneNumber);for(const r of t){let t=!1,i=!1;for(const e of r.stages)"m.login.email.identity"===e?t=!0:"m.login.msisdn"==e&&(i=!0);if(t==e&&i==n)return r}const i=new Error("No appropriate authentication flow found");throw i.name="NoAuthFlowFoundError",i.required_stages=[],e&&i.required_stages.push("m.login.email.identity"),n&&i.required_stages.push("m.login.msisdn"),i.available_flows=t,i},_firstUncompletedStage:function(t){const e=(this._data||{}).completed||[];for(let n=0;n<t.stages.length;++n){const i=t.stages[n];if(-1===e.indexOf(i))return i}}}},NxCW:function(t,e,n){"use strict";function i(){this.fromToken=null}Object.defineProperty(e,"__esModule",{value:!0}),e.StubStore=i,i.prototype={isNewlyCreated:function(){return Promise.resolve(!0)},getSyncToken:function(){return this.fromToken},setSyncToken:function(t){this.fromToken=t},storeGroup:function(t){},getGroup:function(t){return null},getGroups:function(){return[]},storeRoom:function(t){},getRoom:function(t){return null},getRooms:function(){return[]},removeRoom:function(t){},getRoomSummaries:function(){return[]},storeUser:function(t){},getUser:function(t){return null},getUsers:function(){return[]},scrollback:function(t,e){return[]},storeEvents:function(t,e,n,i){},storeFilter:function(t){},getFilter:function(t,e){return null},getFilterIdByName:function(t){return null},setFilterIdByName:function(t,e){},storeAccountDataEvents:function(t){},getAccountData:function(t){},setSyncData:function(t){return Promise.resolve()},wantsSave:function(){return!1},save:function(){},startup:function(){return Promise.resolve()},getSavedSync:function(){return Promise.resolve(null)},getSavedSyncToken:function(){return Promise.resolve(null)},deleteAllData:function(){return Promise.resolve()},getOutOfBandMembers:function(){return Promise.resolve(null)},setOutOfBandMembers:function(){return Promise.resolve()},clearOutOfBandMembers:function(){return Promise.resolve()},getClientOptions:function(){return Promise.resolve()},storeClientOptions:function(){return Promise.resolve()}}},OLzX:function(t,e,n){"use strict";var i=n("284h");Object.defineProperty(e,"__esModule",{value:!0}),e.MemoryStore=a;var r=n("rWBP"),s=i(n("t+e4"));function o(t){return"string"==typeof t&&!!t&&"undefined"!==t&&"null"!==t||"number"==typeof t}function a(t){t=t||{},this.rooms={},this.groups={},this.users={},this.syncToken=null,this.filters={},this.accountData={},this.localStorage=t.localStorage,this._oobMembers={},this._clientOptions={}}a.prototype={getSyncToken:function(){return this.syncToken},isNewlyCreated:function(){return Promise.resolve(!0)},setSyncToken:function(t){this.syncToken=t},storeGroup:function(t){this.groups[t.groupId]=t},getGroup:function(t){return this.groups[t]||null},getGroups:function(){return s.values(this.groups)},storeRoom:function(t){this.rooms[t.roomId]=t,t.currentState.on("RoomState.members",this._onRoomMember.bind(this));const e=this;t.currentState.getMembers().forEach((function(n){e._onRoomMember(null,t.currentState,n)}))},_onRoomMember:function(t,e,n){if("invite"===n.membership)return;const i=this.users[n.userId]||new r.User(n.userId);n.name&&(i.setDisplayName(n.name),n.events.member&&i.setRawDisplayName(n.events.member.getDirectionalContent().displayname)),n.events.member&&n.events.member.getContent().avatar_url&&i.setAvatarUrl(n.events.member.getContent().avatar_url),this.users[i.userId]=i},getRoom:function(t){return this.rooms[t]||null},getRooms:function(){return s.values(this.rooms)},removeRoom:function(t){this.rooms[t]&&this.rooms[t].removeListener("RoomState.members",this._onRoomMember),delete this.rooms[t]},getRoomSummaries:function(){return s.map(s.values(this.rooms),(function(t){return t.summary}))},storeUser:function(t){this.users[t.userId]=t},getUser:function(t){return this.users[t]||null},getUsers:function(){return s.values(this.users)},scrollback:function(t,e){return[]},storeEvents:function(t,e,n,i){},storeFilter:function(t){t&&(this.filters[t.userId]||(this.filters[t.userId]={}),this.filters[t.userId][t.filterId]=t)},getFilter:function(t,e){return this.filters[t]&&this.filters[t][e]?this.filters[t][e]:null},getFilterIdByName:function(t){if(!this.localStorage)return null;const e="mxjssdk_memory_filter_"+t;try{const t=this.localStorage.getItem(e);if(o(t))return t}catch(n){}return null},setFilterIdByName:function(t,e){if(!this.localStorage)return;const n="mxjssdk_memory_filter_"+t;try{o(e)?this.localStorage.setItem(n,e):this.localStorage.removeItem(n)}catch(i){}},storeAccountDataEvents:function(t){const e=this;t.forEach((function(t){e.accountData[t.getType()]=t}))},getAccountData:function(t){return this.accountData[t]},setSyncData:function(t){return Promise.resolve()},wantsSave:function(){return!1},save:function(t){},startup:function(){return Promise.resolve()},getSavedSync:function(){return Promise.resolve(null)},getSavedSyncToken:function(){return Promise.resolve(null)},deleteAllData:function(){return this.rooms={},this.users={},this.syncToken=null,this.filters={},this.accountData={},Promise.resolve()},getOutOfBandMembers:function(t){return Promise.resolve(this._oobMembers[t]||null)},setOutOfBandMembers:function(t,e){return this._oobMembers[t]=e,Promise.resolve()},clearOutOfBandMembers:function(){return this._oobMembers={},Promise.resolve()},getClientOptions:function(){return Promise.resolve(this._clientOptions)},storeClientOptions:function(t){return this._clientOptions=Object.assign({},t),Promise.resolve()}}},OYp6:function(t,e,n){"use strict";function i(t){this.filter_json=t,this.types=t.types||null,this.not_types=t.not_types||[],this.rooms=t.rooms||null,this.not_rooms=t.not_rooms||[],this.senders=t.senders||null,this.not_senders=t.not_senders||[],this.contains_url=t.contains_url||null}Object.defineProperty(e,"__esModule",{value:!0}),e.FilterComponent=i,i.prototype.check=function(t){return this._checkFields(t.getRoomId(),t.getSender(),t.getType(),!!t.getContent()&&void 0!==t.getContent().url)},i.prototype._checkFields=function(t,e,n,i){const r={rooms:function(e){return t===e},senders:function(t){return e===t},types:function(t){return function(t,e){if(e.endsWith("*")){const n=e.slice(0,-1);return t.substr(0,n.length)===n}return t===e}(n,t)}},s=this;for(let a=0;a<Object.keys(r).length;a++){const t=Object.keys(r)[a],e=r[t];if(s["not_"+t].filter(e).length>0)return!1;const n=s[t];if(n&&n.length>0&&!n.some(e))return!1}const o=this.filter_json.contains_url;return void 0===o||o===i},i.prototype.filter=function(t){return t.filter(this.check,this)},i.prototype.limit=function(){return void 0!==this.filter_json.limit?this.filter_json.limit:10}},"P5+E":function(t,e,n){"use strict";var i=n("TqRt");Object.defineProperty(e,"__esModule",{value:!0}),e.Relations=void 0;var r=i(n("lSNA")),s=n("+qE3"),o=n("7UXS");e.Relations=class extends s.EventEmitter{constructor(t,e,n){super(),(0,r.default)(this,"_onEventStatus",(t,e)=>{t.isSending()?e===o.EventStatus.CANCELLED&&(t.removeListener("Event.status",this._onEventStatus),this._removeEvent(t)):t.removeListener("Event.status",this._onEventStatus)}),(0,r.default)(this,"_onBeforeRedaction",t=>{this._relations.has(t)&&(this._relations.delete(t),"m.annotation"===this.relationType?this._removeAnnotationFromAggregation(t):"m.replace"===this.relationType&&this._targetEvent&&this._targetEvent.makeReplaced(this.getLastReplacement()),t.removeListener("Event.beforeRedaction",this._onBeforeRedaction),this.emit("Relations.redaction",t))}),this.relationType=t,this.eventType=e,this._relations=new Set,this._annotationsByKey={},this._annotationsBySender={},this._sortedAnnotationsByKey=[],this._targetEvent=null}addEvent(t){if(this._relations.has(t))return;const e=t.getRelation();if(!e)return void console.error("Event must have relation info");const n=e.rel_type,i=t.getType();this.relationType===n&&this.eventType===i?(t.isSending()&&t.on("Event.status",this._onEventStatus),this._relations.add(t),"m.annotation"===this.relationType?this._addAnnotationToAggregation(t):"m.replace"===this.relationType&&this._targetEvent&&this._targetEvent.makeReplaced(this.getLastReplacement()),t.on("Event.beforeRedaction",this._onBeforeRedaction),this.emit("Relations.add",t)):console.error("Event relation info doesn't match this container")}_removeEvent(t){if(!this._relations.has(t))return;const e=t.getRelation();if(!e)return void console.error("Event must have relation info");const n=e.rel_type,i=t.getType();this.relationType===n&&this.eventType===i?(this._relations.delete(t),"m.annotation"===this.relationType?this._removeAnnotationFromAggregation(t):"m.replace"===this.relationType&&this._targetEvent&&this._targetEvent.makeReplaced(this.getLastReplacement()),this.emit("Relations.remove",t)):console.error("Event relation info doesn't match this container")}getRelations(){return[...this._relations]}_addAnnotationToAggregation(t){const{key:e}=t.getRelation();if(!e)return;let n=this._annotationsByKey[e];n||(n=this._annotationsByKey[e]=new Set,this._sortedAnnotationsByKey.push([e,n])),n.add(t),this._sortedAnnotationsByKey.sort((t,e)=>e[1].size-t[1].size);const i=t.getSender();let r=this._annotationsBySender[i];r||(r=this._annotationsBySender[i]=new Set),r.add(t)}_removeAnnotationFromAggregation(t){const{key:e}=t.getRelation();if(!e)return;const n=this._annotationsByKey[e];n&&(n.delete(t),this._sortedAnnotationsByKey.sort((t,e)=>e[1].size-t[1].size));const i=t.getSender(),r=this._annotationsBySender[i];r&&r.delete(t)}getSortedAnnotationsByKey(){return"m.annotation"!==this.relationType?null:this._sortedAnnotationsByKey}getAnnotationsBySender(){return"m.annotation"!==this.relationType?null:this._annotationsBySender}getLastReplacement(){if("m.replace"!==this.relationType)return null;if(!this._targetEvent)return null;const t=this._targetEvent.getServerAggregatedRelation("m.replace"),e=t&&t.origin_server_ts;return this.getRelations().reduce((t,n)=>n.getSender()!==this._targetEvent.getSender()||e&&e>n.getTs()||t&&t.getTs()>n.getTs()?t:n,null)}setTargetEvent(t){if(!this._targetEvent&&(this._targetEvent=t,"m.replace"===this.relationType)){const t=this.getLastReplacement();t&&this._targetEvent.makeReplaced(t)}}}},PAYk:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.InRoomRequests=e.InRoomChannel=void 0;var i=n("3afC"),r=n("PrRn");class s{constructor(t,e,n=null){this._client=t,this._roomId=e,this.userId=n,this._requestEventId=null}get receiveStartFromOtherDevices(){return!0}get roomId(){return this._roomId}get transactionId(){return this._requestEventId}static getOtherPartyUserId(t,e){if(s.getEventType(t)!==i.REQUEST_TYPE)return;const n=e.getUserId(),r=t.getSender(),o=t.getContent().to;return r===n?o:o===n?r:void 0}getTimestamp(t){return t.getTs()}static canCreateRequest(t){return t===i.REQUEST_TYPE}static getTransactionId(t){if(s.getEventType(t)===i.REQUEST_TYPE)return t.getId();{const e=t.getRelation();if(e&&"m.reference"===e.rel_type)return e.event_id}}static validateEvent(t,e){const n=s.getTransactionId(t);if("string"!=typeof n||0===n.length)return!1;const o=s.getEventType(t),a=t.getContent();if(o===i.REQUEST_TYPE){if(!a||"string"!=typeof a.to||!a.to.length)return r.logger.log("InRoomChannel: validateEvent: no valid to "+(a&&a.to)),!1;if(!s.getOtherPartyUserId(t,e))return r.logger.log("InRoomChannel: validateEvent: not directed to or sent by me: "+t.getSender()+", "+(a&&a.to)),!1}return i.VerificationRequest.validateEvent(o,t,e)}static getEventType(t){const e=t.getType();if("m.room.message"===e){const e=t.getContent();if(e){const{msgtype:t}=e;if(t===i.REQUEST_TYPE)return i.REQUEST_TYPE}}return e&&e!==i.REQUEST_TYPE?e:""}async handleEvent(t,e,n){if(e.hasEventId(t.getId()))return;const i=s.getEventType(t);if(t.getRoomId()!==this._roomId)return;if(null===this.userId){const e=s.getOtherPartyUserId(t,this._client);e&&(this.userId=e)}const o=this._client.getUserId(),a=t.getSender();if(null!==this.userId&&a!==o&&a!==this.userId)return void r.logger.log("InRoomChannel: ignoring verification event from non-participating sender "+a);null===this._requestEventId&&(this._requestEventId=s.getTransactionId(t));const c=!!t.getUnsigned().transaction_id,l=t.getSender()===this._client.getUserId();return await e.handleEvent(i,t,n,c,l)}completedContentFromEvent(t){const e=Object.assign({},t.getContent());return e["m.relates_to"]=t.getRelation(),e}completeContent(t,e){return e=Object.assign({},e),t!==i.REQUEST_TYPE&&t!==i.READY_TYPE&&t!==i.START_TYPE||(e.from_device=this._client.getDeviceId()),t===i.REQUEST_TYPE?e={body:this._client.getUserId()+" is requesting to verify your key, but your client does not support in-chat key verification.  You will need to use legacy key verification to verify keys.",msgtype:i.REQUEST_TYPE,to:this.userId,from_device:e.from_device,methods:e.methods}:e["m.relates_to"]={rel_type:"m.reference",event_id:this.transactionId},e}send(t,e){const n=this.completeContent(t,e);return this.sendCompleted(t,n)}async sendCompleted(t,e){let n=t;t===i.REQUEST_TYPE&&(n="m.room.message");const r=await this._client.sendEvent(this._roomId,n,e);t===i.REQUEST_TYPE&&(this._requestEventId=r.event_id)}}e.InRoomChannel=s,e.InRoomRequests=class{constructor(){this._requestsByRoomId=new Map}getRequest(t){const e=t.getRoomId(),n=s.getTransactionId(t);return this._getRequestByTxnId(e,n)}getRequestByChannel(t){return this._getRequestByTxnId(t.roomId,t.transactionId)}_getRequestByTxnId(t,e){const n=this._requestsByRoomId.get(t);if(n)return n.get(e)}setRequest(t,e){this._setRequest(t.getRoomId(),s.getTransactionId(t),e)}setRequestByChannel(t,e){this._setRequest(t.roomId,t.transactionId,e)}_setRequest(t,e,n){let i=this._requestsByRoomId.get(t);i||(i=new Map,this._requestsByRoomId.set(t,i)),i.set(e,n)}removeRequest(t){const e=t.getRoomId(),n=this._requestsByRoomId.get(e);n&&(n.delete(s.getTransactionId(t)),0===n.size&&this._requestsByRoomId.delete(e))}findRequestInProgress(t){const e=this._requestsByRoomId.get(t);if(e)for(const n of e.values())if(n.pending)return n}}},PrRn:function(t,e,n){"use strict";var i=n("TqRt");Object.defineProperty(e,"__esModule",{value:!0}),e.logger=void 0;var r=i(n("XH0y"));r.default.methodFactory=function(t,e,n){return function(...e){return"error"===t||"warn"===t||"trace"===t||"info"===t?console[t](...e):console.log(...e)}};const s=r.default.getLogger("matrix");e.logger=s,s.setLevel(r.default.levels.DEBUG)},PwFS:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.randomString=function(t){let e="";const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";for(let i=0;i<t;++i)e+=n.charAt(Math.floor(Math.random()*n.length));return e}},QSc6:function(t,e,n){"use strict";var i=n("0jNN"),r=n("sxOR"),s=Object.prototype.hasOwnProperty,o={brackets:function(t){return t+"[]"},comma:"comma",indices:function(t,e){return t+"["+e+"]"},repeat:function(t){return t}},a=Array.isArray,c=Array.prototype.push,l=function(t,e){c.apply(t,a(e)?e:[e])},u=Date.prototype.toISOString,h={addQueryPrefix:!1,allowDots:!1,charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encoder:i.encode,encodeValuesOnly:!1,formatter:r.formatters[r.default],indices:!1,serializeDate:function(t){return u.call(t)},skipNulls:!1,strictNullHandling:!1},d=function t(e,n,r,s,o,c,u,d,p,m,f,g,_){var y=e;if("function"==typeof u?y=u(n,y):y instanceof Date?y=m(y):"comma"===r&&a(y)&&(y=y.join(",")),null===y){if(s)return c&&!g?c(n,h.encoder,_):n;y=""}if("string"==typeof y||"number"==typeof y||"boolean"==typeof y||i.isBuffer(y))return c?[f(g?n:c(n,h.encoder,_))+"="+f(c(y,h.encoder,_))]:[f(n)+"="+f(String(y))];var v,b=[];if(void 0===y)return b;if(a(u))v=u;else{var w=Object.keys(y);v=d?w.sort(d):w}for(var S=0;S<v.length;++S){var E=v[S];o&&null===y[E]||(a(y)?l(b,t(y[E],"function"==typeof r?r(n,E):n,r,s,o,c,u,d,p,m,f,g,_)):l(b,t(y[E],n+(p?"."+E:"["+E+"]"),r,s,o,c,u,d,p,m,f,g,_)))}return b};t.exports=function(t,e){var n,i=t,c=function(t){if(!t)return h;if(null!=t.encoder&&"function"!=typeof t.encoder)throw new TypeError("Encoder has to be a function.");var e=t.charset||h.charset;if(void 0!==t.charset&&"utf-8"!==t.charset&&"iso-8859-1"!==t.charset)throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var n=r.default;if(void 0!==t.format){if(!s.call(r.formatters,t.format))throw new TypeError("Unknown format option provided.");n=t.format}var i=r.formatters[n],o=h.filter;return("function"==typeof t.filter||a(t.filter))&&(o=t.filter),{addQueryPrefix:"boolean"==typeof t.addQueryPrefix?t.addQueryPrefix:h.addQueryPrefix,allowDots:void 0===t.allowDots?h.allowDots:!!t.allowDots,charset:e,charsetSentinel:"boolean"==typeof t.charsetSentinel?t.charsetSentinel:h.charsetSentinel,delimiter:void 0===t.delimiter?h.delimiter:t.delimiter,encode:"boolean"==typeof t.encode?t.encode:h.encode,encoder:"function"==typeof t.encoder?t.encoder:h.encoder,encodeValuesOnly:"boolean"==typeof t.encodeValuesOnly?t.encodeValuesOnly:h.encodeValuesOnly,filter:o,formatter:i,serializeDate:"function"==typeof t.serializeDate?t.serializeDate:h.serializeDate,skipNulls:"boolean"==typeof t.skipNulls?t.skipNulls:h.skipNulls,sort:"function"==typeof t.sort?t.sort:null,strictNullHandling:"boolean"==typeof t.strictNullHandling?t.strictNullHandling:h.strictNullHandling}}(e);"function"==typeof c.filter?i=(0,c.filter)("",i):a(c.filter)&&(n=c.filter);var u=[];if("object"!=typeof i||null===i)return"";var p=o[e&&e.arrayFormat in o?e.arrayFormat:e&&"indices"in e?e.indices?"indices":"repeat":"indices"];n||(n=Object.keys(i)),c.sort&&n.sort(c.sort);for(var m=0;m<n.length;++m){var f=n[m];c.skipNulls&&null===i[f]||l(u,d(i[f],f,p,c.strictNullHandling,c.skipNulls,c.encode?c.encoder:null,c.filter,c.sort,c.allowDots,c.serializeDate,c.formatter,c.encodeValuesOnly,c.charset))}var g=u.join(c.delimiter),_=!0===c.addQueryPrefix?"?":"";return c.charsetSentinel&&(_+="iso-8859-1"===c.charset?"utf8=%26%2310003%3B&":"utf8=%E2%9C%93&"),g.length>0?_+g:""}},QqcV:function(t,e,n){"use strict";var i=n("hwdV").Buffer;t.exports=function(t){if(t.length>=255)throw new TypeError("Alphabet too long");for(var e=new Uint8Array(256),n=0;n<e.length;n++)e[n]=255;for(var r=0;r<t.length;r++){var s=t.charAt(r),o=s.charCodeAt(0);if(255!==e[o])throw new TypeError(s+" is ambiguous");e[o]=r}var a=t.length,c=t.charAt(0),l=Math.log(a)/Math.log(256),u=Math.log(256)/Math.log(a);function h(t){if("string"!=typeof t)throw new TypeError("Expected String");if(0===t.length)return i.alloc(0);var n=0;if(" "!==t[n]){for(var r=0,s=0;t[n]===c;)r++,n++;for(var o=(t.length-n)*l+1>>>0,u=new Uint8Array(o);t[n];){var h=e[t.charCodeAt(n)];if(255===h)return;for(var d=0,p=o-1;(0!==h||d<s)&&-1!==p;p--,d++)u[p]=(h+=a*u[p]>>>0)%256>>>0,h=h/256>>>0;if(0!==h)throw new Error("Non-zero carry");s=d,n++}if(" "!==t[n]){for(var m=o-s;m!==o&&0===u[m];)m++;var f=i.allocUnsafe(r+(o-m));f.fill(0,0,r);for(var g=r;m!==o;)f[g++]=u[m++];return f}}}return{encode:function(e){if((Array.isArray(e)||e instanceof Uint8Array)&&(e=i.from(e)),!i.isBuffer(e))throw new TypeError("Expected Buffer");if(0===e.length)return"";for(var n=0,r=0,s=0,o=e.length;s!==o&&0===e[s];)s++,n++;for(var l=(o-s)*u+1>>>0,h=new Uint8Array(l);s!==o;){for(var d=e[s],p=0,m=l-1;(0!==d||p<r)&&-1!==m;m--,p++)h[m]=(d+=256*h[m]>>>0)%a>>>0,d=d/a>>>0;if(0!==d)throw new Error("Non-zero carry");r=p,s++}for(var f=l-r;f!==l&&0===h[f];)f++;for(var g=c.repeat(n);f<l;++f)g+=t.charAt(h[f]);return g},decodeUnsafe:h,decode:function(t){var e=h(t);if(e)return e;throw new Error("Non-base"+a+" character")}}}},Qyje:function(t,e,n){"use strict";var i=n("QSc6"),r=n("nmq7"),s=n("sxOR");t.exports={formats:s,parse:r,stringify:i}},RmcG:function(t,e,n){"use strict";var i=n("284h");Object.defineProperty(e,"__esModule",{value:!0}),e.SyncApi=f;var r=n("rWBP"),s=n("tyrX"),o=n("C2mt"),a=i(n("t+e4")),c=n("8zgi"),l=n("tyto"),u=n("TXj3"),h=n("PrRn"),d=n("Hzpt");function p(t,e){return"FILTER_SYNC_"+t+(e?"_"+e:"")}function m(...t){h.logger.log(...t)}function f(t,e){this.client=t,(e=e||{}).initialSyncLimit=void 0===e.initialSyncLimit?8:e.initialSyncLimit,e.resolveInvitesToProfiles=e.resolveInvitesToProfiles||!1,e.pollTimeout=e.pollTimeout||3e4,e.pendingEventOrdering=e.pendingEventOrdering||"chronological",e.canResetEntireTimeline||(e.canResetEntireTimeline=function(t){return!1}),this.opts=e,this._peekRoomId=null,this._currentSyncRequest=null,this._syncState=null,this._syncStateData=null,this._catchingUp=!1,this._running=!1,this._keepAliveTimer=null,this._connectionReturnedDefer=null,this._notifEvents=[],this._failedSyncCount=0,this._storeIsInvalid=!1,t.getNotifTimelineSet()&&t.reEmitter.reEmit(t.getNotifTimelineSet(),["Room.timeline","Room.timelineReset"])}function g(t,e){const n=new r.User(e);return t.reEmitter.reEmit(n,["User.avatarUrl","User.displayName","User.presence","User.currentlyActive","User.lastPresenceTs"]),n}f.prototype.createRoom=function(t){const e=this.client,{timelineSupport:n,unstableClientRelationAggregation:i}=e,r=new s.Room(t,e,e.getUserId(),{lazyLoadMembers:this.opts.lazyLoadMembers,pendingEventOrdering:this.opts.pendingEventOrdering,timelineSupport:n,unstableClientRelationAggregation:i});return e.reEmitter.reEmit(r,["Room.name","Room.timeline","Room.redaction","Room.redactionCancelled","Room.receipt","Room.tags","Room.timelineReset","Room.localEchoUpdated","Room.accountData","Room.myMembership","Room.replaceEvent"]),this._registerStateListeners(r),r},f.prototype.createGroup=function(t){const e=this.client,n=new o.Group(t);return e.reEmitter.reEmit(n,["Group.profile","Group.myMembership"]),e.store.storeGroup(n),n},f.prototype._registerStateListeners=function(t){const e=this.client;e.reEmitter.reEmit(t.currentState,["RoomState.events","RoomState.members","RoomState.newMember"]),t.currentState.on("RoomState.newMember",(function(t,n,i){i.user=e.getUser(i.userId),e.reEmitter.reEmit(i,["RoomMember.name","RoomMember.typing","RoomMember.powerLevel","RoomMember.membership"])}))},f.prototype._deregisterStateListeners=function(t){t.currentState.removeAllListeners("RoomState.events"),t.currentState.removeAllListeners("RoomState.members"),t.currentState.removeAllListeners("RoomState.newMember")},f.prototype.syncLeftRooms=function(){const t=this.client,e=this,n=new c.Filter(this.client.credentials.userId);n.setTimelineLimit(1),n.setIncludeLeaveRooms(!0);const i=this.opts.pollTimeout+8e4,r={timeout:0};return t.getOrCreateFilter(p(t.credentials.userId,"LEFT_ROOMS"),n).then((function(e){return r.filter=e,t._http.authedRequest(void 0,"GET","/sync",r,void 0,i)})).then((function(n){let i=[];n.rooms&&n.rooms.leave&&(i=e._mapSyncResponseToRoomArray(n.rooms.leave));const r=[];return i.forEach((function(n){const i=n.room;if(r.push(i),!n.isBrandNewRoom)return;n.timeline=n.timeline||{};const s=e._mapSyncEventsFormat(n.timeline,i),o=e._mapSyncEventsFormat(n.state,i);i.getLiveTimeline().setPaginationToken(n.timeline.prev_batch,l.EventTimeline.BACKWARDS),e._processRoomEvents(i,o,s),i.recalculate(),t.store.storeRoom(i),t.emit("Room",i),e._processEventsForNotifs(i,s)})),r}))},f.prototype.peek=function(t){const e=this,n=this.client;return this._peekRoomId=t,this.client.roomInitialSync(t,20).then((function(i){i.messages=i.messages||{},i.messages.chunk=i.messages.chunk||[],i.state=i.state||[];const r=e.createRoom(t),s=a.map(a.deepCopy(i.state),n.getEventMapper()),o=a.map(i.state,n.getEventMapper()),c=a.map(i.messages.chunk,n.getEventMapper());return i.presence&&a.isArray(i.presence)&&i.presence.map(n.getEventMapper()).forEach((function(t){let e=n.store.getUser(t.getContent().user_id);e?e.setPresenceEvent(t):(e=g(n,t.getContent().user_id),e.setPresenceEvent(t),n.store.storeUser(e)),n.emit("event",t)})),i.messages.start&&(r.oldState.paginationToken=i.messages.start),r.oldState.setStateEvents(s),r.currentState.setStateEvents(o),e._resolveInvites(r),r.recalculate(),r.addEventsToTimeline(c.reverse(),!0,r.getLiveTimeline(),i.messages.start),n.store.storeRoom(r),n.emit("Room",r),e._peekPoll(r),r}))},f.prototype.stopPeeking=function(){this._peekRoomId=null},f.prototype._peekPoll=function(t,e){if(this._peekRoomId!==t.roomId)return void m("Stopped peeking in room %s",t.roomId);const n=this;this.client._http.authedRequest(void 0,"GET","/events",{room_id:t.roomId,timeout:3e4,from:e},void 0,5e4).then((function(e){if(n._peekRoomId!==t.roomId)return void m("Stopped peeking in room %s",t.roomId);e.chunk.filter((function(t){return"m.presence"===t.type})).map(n.client.getEventMapper()).forEach((function(t){let e=n.client.store.getUser(t.getContent().user_id);e?e.setPresenceEvent(t):(e=g(n.client,t.getContent().user_id),e.setPresenceEvent(t),n.client.store.storeUser(e)),n.client.emit("event",t)}));const i=e.chunk.filter((function(e){return e.room_id===t.roomId&&e.event_id})).map(n.client.getEventMapper());t.addLiveEvents(i),n._peekPoll(t,e.end)}),(function(i){h.logger.error("[%s] Peek poll failed: %s",t.roomId,i),setTimeout((function(){n._peekPoll(t,e)}),3e4)}))},f.prototype.getSyncState=function(){return this._syncState},f.prototype.getSyncStateData=function(){return this._syncStateData},f.prototype.recoverFromSyncStartupError=async function(t,e){await t;const n=this._startKeepAlives();this._updateSyncState("ERROR",{error:e}),await n},f.prototype._wasLazyLoadingToggled=async function(t){t=!!t;let e=!1;if(!(await this.client.store.isNewlyCreated())){const n=await this.client.store.getClientOptions();return n&&(e=!!n.lazyLoadMembers),e!==t}return!1},f.prototype._shouldAbortSync=function(t){return"M_UNKNOWN_TOKEN"===t.errcode&&(h.logger.warn("Token no longer valid - assuming logout"),this.stop(),!0)},f.prototype.sync=function(){const t=this.client,e=this;this._running=!0,global.document&&(this._onOnlineBound=this._onOnline.bind(this),global.document.addEventListener("online",this._onOnlineBound,!1));let n=Promise.resolve(),i=null;function r(){const n=new c.Filter(t.credentials.userId);return n.setTimelineLimit(e.opts.initialSyncLimit),n}const s=async()=>{if(m("Checking lazy load status..."),this.opts.lazyLoadMembers&&t.isGuest()&&(this.opts.lazyLoadMembers=!1),this.opts.lazyLoadMembers&&(m("Checking server lazy load support..."),await t.doesServerSupportLazyLoading()?(m("Enabling lazy load on sync filter..."),this.opts.filter||(this.opts.filter=r()),this.opts.filter.setLazyLoadMembers(!0)):(m("LL: lazy loading requested but not supported by server, so disabling"),this.opts.lazyLoadMembers=!1)),m("Checking whether lazy loading has changed in store..."),await this._wasLazyLoadingToggled(this.opts.lazyLoadMembers)){this._storeIsInvalid=!0;const t=new d.InvalidStoreError(d.InvalidStoreError.TOGGLED_LAZY_LOADING,!!this.opts.lazyLoadMembers);return this._updateSyncState("ERROR",{error:t}),void h.logger.warn("InvalidStoreError: store is not usable: stopping sync.")}this.opts.lazyLoadMembers&&this.opts.crypto&&this.opts.crypto.enableLazyLoading();try{m("Storing client options..."),await this.client._storeClientOptions(),m("Stored client options")}catch(s){throw h.logger.error("Storing client options failed",s),s}!async function o(){let a,c;m("Getting filter..."),a=e.opts.filter?e.opts.filter:r();try{c=await t.getOrCreateFilter(p(t.credentials.userId),a)}catch(s){if(h.logger.error("Getting filter failed",s),e._shouldAbortSync(s))return;return m("Waiting for saved sync before retrying filter..."),await e.recoverFromSyncStartupError(n,s),void o()}t.resetNotifTimelineSet(),null===e._currentSyncRequest&&(m("Sending first sync request..."),e._currentSyncRequest=e._doSyncRequest({filterId:c},i)),m("Waiting for saved sync before starting sync processing..."),await n,e._sync({filterId:c})}()};t.isGuest()?e._sync({}):(m("Getting saved sync token..."),n=t.store.getSavedSyncToken().then(e=>(m("Got saved sync token"),i=e,m("Getting saved sync..."),t.store.getSavedSync())).then(t=>{if(m("Got reply from saved sync, exists? "+!!t),t)return e._syncFromCache(t)}).catch(t=>{h.logger.error("Getting saved sync failed",t)}),async function i(){try{m("Getting push rules...");const e=await t.getPushRules();m("Got push rules"),t.pushRules=e}catch(r){if(h.logger.error("Getting push rules failed",r),e._shouldAbortSync(r))return;return m("Waiting for saved sync before retrying push rules..."),await e.recoverFromSyncStartupError(n,r),void i()}s()}())},f.prototype.stop=function(){m("SyncApi.stop"),global.document&&(global.document.removeEventListener("online",this._onOnlineBound,!1),this._onOnlineBound=void 0),this._running=!1,this._currentSyncRequest&&this._currentSyncRequest.abort(),this._keepAliveTimer&&(clearTimeout(this._keepAliveTimer),this._keepAliveTimer=null)},f.prototype.retryImmediately=function(){return!!this._connectionReturnedDefer&&(this._startKeepAlives(0),!0)},f.prototype._syncFromCache=async function(t){m("sync(): not doing HTTP hit, instead returning stored /sync data");const e=t.nextBatch;this.client.store.setSyncToken(e);const n={oldSyncToken:null,nextSyncToken:e,catchingUp:!1,fromCache:!0},i={next_batch:e,rooms:t.roomsData,groups:t.groupsData,account_data:{events:t.accountData}};try{await this._processSyncResponse(n,i)}catch(r){h.logger.error("Error processing cached sync",r.stack||r)}this._storeIsInvalid||this._updateSyncState("PREPARED",n)},f.prototype._sync=async function(t){const e=this.client;if(!this._running)return m("Sync no longer running: exiting."),this._connectionReturnedDefer&&(this._connectionReturnedDefer.reject(),this._connectionReturnedDefer=null),void this._updateSyncState("STOPPED");const n=e.store.getSyncToken();let i;try{null===this._currentSyncRequest&&(this._currentSyncRequest=this._doSyncRequest(t,n)),i=await this._currentSyncRequest}catch(s){return void this._onSyncError(s,t)}finally{this._currentSyncRequest=null}e.store.setSyncToken(i.next_batch),this._failedSyncCount=0,await e.store.setSyncData(i);const r={oldSyncToken:n,nextSyncToken:i.next_batch,catchingUp:this._catchingUp};this.opts.crypto&&await this.opts.crypto.onSyncWillProcess(r);try{await this._processSyncResponse(r,i)}catch(s){h.logger.error("Caught /sync error",s.stack||s),this.client.emit("sync.unexpectedError",s)}r.catchingUp=this._catchingUp,t.hasSyncedBefore||(this._updateSyncState("PREPARED",r),t.hasSyncedBefore=!0),this.opts.crypto&&await this.opts.crypto.onSyncCompleted(r),this._updateSyncState("SYNCING",r),e.store.wantsSave()&&(this.opts.crypto&&await this.opts.crypto.saveDeviceList(0),e.store.save()),this._sync(t)},f.prototype._doSyncRequest=function(t,e){const n=this._getSyncParams(t,e);return this.client._http.authedRequest(void 0,"GET","/sync",n,void 0,n.timeout+8e4)},f.prototype._getSyncParams=function(t,e){let n=this.opts.pollTimeout;("SYNCING"!==this.getSyncState()||this._catchingUp)&&(this._catchingUp=!0,n=0);let i=t.filterId;this.client.isGuest()&&!i&&(i=this._getGuestFilter());const r={filter:i,timeout:n};return this.opts.disablePresence&&(r.set_presence="offline"),e?r.since=e:r._cacheBuster=Date.now(),"ERROR"!=this.getSyncState()&&"RECONNECTING"!=this.getSyncState()||(r.timeout=0),r},f.prototype._onSyncError=function(t,e){if(!this._running)return m("Sync no longer running: exiting"),this._connectionReturnedDefer&&(this._connectionReturnedDefer.reject(),this._connectionReturnedDefer=null),void this._updateSyncState("STOPPED");h.logger.error("/sync error %s",t),h.logger.error(t),this._shouldAbortSync(t)||(this._failedSyncCount++,h.logger.log("Number of consecutive failed sync requests:",this._failedSyncCount),m("Starting keep-alive"),this._startKeepAlives().then(t=>{t&&"ERROR"===this.getSyncState()&&this._updateSyncState("CATCHUP",{oldSyncToken:null,nextSyncToken:null,catchingUp:!0}),this._sync(e)}),this._currentSyncRequest=null,this._updateSyncState(this._failedSyncCount>=3?"ERROR":"RECONNECTING",{error:t}))},f.prototype._processSyncResponse=async function(t,e){const n=this.client,i=this;if(e.presence&&a.isArray(e.presence.events)&&e.presence.events.map(n.getEventMapper()).forEach((function(t){let e=n.store.getUser(t.getSender());e?e.setPresenceEvent(t):(e=g(n,t.getSender()),e.setPresenceEvent(t),n.store.storeUser(e)),n.emit("event",t)})),e.account_data&&a.isArray(e.account_data.events)){const t=e.account_data.events.map(n.getEventMapper()),i=t.reduce((t,e)=>(t[e.getId()]=n.store.getAccountData(e.getType()),t),{});n.store.storeAccountDataEvents(t),t.forEach((function(t){if("m.push_rules"===t.getType()){const e=t.getContent();n.pushRules=u.PushProcessor.rewriteDefaultRules(e)}const e=i[t.getId()];return n.emit("accountData",t,e),t}))}if(e.to_device&&a.isArray(e.to_device.events)&&e.to_device.events.length>0){const t=[];e.to_device.events.map(n.getEventMapper()).map(e=>{if("m.key.verification.cancel"===e.getType()){const n=e.getContent().transaction_id;n&&t.push(n)}return e}).forEach((function(e){const i=e.getContent();"m.room.message"!=e.getType()||"m.bad.encrypted"!=i.msgtype?("m.key.verification.start"!==e.getType()&&"m.key.verification.request"!==e.getType()||t.includes(i.transaction_id)&&e.flagCancelled(),n.emit("toDeviceEvent",e)):h.logger.log("Ignoring undecryptable to-device event from "+e.getSender())}))}else this._catchingUp=!1;e.groups&&(e.groups.invite&&this._processGroupSyncEntry(e.groups.invite,"invite"),e.groups.join&&this._processGroupSyncEntry(e.groups.join,"join"),e.groups.leave&&this._processGroupSyncEntry(e.groups.leave,"leave"));let r=[],s=[],o=[];e.rooms&&(e.rooms.invite&&(r=this._mapSyncResponseToRoomArray(e.rooms.invite)),e.rooms.join&&(s=this._mapSyncResponseToRoomArray(e.rooms.join)),e.rooms.leave&&(o=this._mapSyncResponseToRoomArray(e.rooms.leave))),this._notifEvents=[],r.forEach((function(t){const e=t.room,r=i._mapSyncEventsFormat(t.invite_state,e);i._processRoomEvents(e,r),t.isBrandNewRoom&&(e.recalculate(),n.store.storeRoom(e),n.emit("Room",e)),r.forEach((function(t){n.emit("event",t)})),e.updateMyMembership("invite")})),await a.promiseMapSeries(s,(async function(e){const r=e.room,s=i._mapSyncEventsFormat(e.state,r),o=i._mapSyncEventsFormat(e.timeline,r),c=i._mapSyncEventsFormat(e.ephemeral),u=i._mapSyncEventsFormat(e.account_data);if(e.unread_notifications){r.setUnreadNotificationCount("total",e.unread_notifications.notification_count);const t=n.isRoomEncrypted(r.roomId);(!t||t&&r.getUnreadNotificationCount("highlight")<=0)&&r.setUnreadNotificationCount("highlight",e.unread_notifications.highlight_count)}if(e.timeline=e.timeline||{},e.isBrandNewRoom)r.getLiveTimeline().setPaginationToken(e.timeline.prev_batch,l.EventTimeline.BACKWARDS);else if(e.timeline.limited){let s=!0;for(let t=o.length-1;t>=0;t--){const e=o[t].getId();if(r.getTimelineForEvent(e)){m("Already have event "+e+" in limited sync - not resetting"),s=!1,o.splice(0,t);break}}s&&(i._deregisterStateListeners(r),r.resetLiveTimeline(e.timeline.prev_batch,i.opts.canResetEntireTimeline(r.roomId)?null:t.oldSyncToken),n.resetNotifTimelineSet(),i._registerStateListeners(r))}async function h(t){if(n.emit("event",t),t.isState()&&"m.room.encryption"==t.getType()&&i.opts.crypto&&await i.opts.crypto.onCryptoEvent(t),t.isState()&&"im.vector.user_status"===t.getType()){let e=n.store.getUser(t.getStateKey());e?e._unstable_updateStatusMessage(t):(e=g(n,t.getStateKey()),e._unstable_updateStatusMessage(t),n.store.storeUser(e))}}i._processRoomEvents(r,s,o,t.fromCache),e.summary&&r.setSummary(e.summary),r.addEphemeralEvents(c),r.addAccountData(u),r.recalculate(),e.isBrandNewRoom&&(n.store.storeRoom(r),n.emit("Room",r)),i._processEventsForNotifs(r,o),await a.promiseMapSeries(s,h),await a.promiseMapSeries(o,h),c.forEach((function(t){n.emit("event",t)})),u.forEach((function(t){n.emit("event",t)})),r.updateMyMembership("join")})),o.forEach((function(t){const e=t.room,r=i._mapSyncEventsFormat(t.state,e),s=i._mapSyncEventsFormat(t.timeline,e),o=i._mapSyncEventsFormat(t.account_data);i._processRoomEvents(e,r,s),e.addAccountData(o),e.recalculate(),t.isBrandNewRoom&&(n.store.storeRoom(e),n.emit("Room",e)),i._processEventsForNotifs(e,s),r.forEach((function(t){n.emit("event",t)})),s.forEach((function(t){n.emit("event",t)})),o.forEach((function(t){n.emit("event",t)})),e.updateMyMembership("leave")})),t.oldSyncToken&&this._notifEvents.length&&(this._notifEvents.sort((function(t,e){return t.getTs()-e.getTs()})),this._notifEvents.forEach((function(t){n.getNotifTimelineSet().addLiveEvent(t)}))),e.device_lists&&this.opts.crypto&&await this.opts.crypto.handleDeviceListChanges(t,e.device_lists),this.opts.crypto&&e.device_one_time_keys_count&&this.opts.crypto.updateOneTimeKeyCount(e.device_one_time_keys_count.signed_curve25519||0)},f.prototype._startKeepAlives=function(t){return void 0===t&&(t=2e3+Math.floor(5e3*Math.random())),null!==this._keepAliveTimer&&clearTimeout(this._keepAliveTimer),t>0?this._keepAliveTimer=setTimeout(this._pokeKeepAlive.bind(this),t):this._pokeKeepAlive(),this._connectionReturnedDefer||(this._connectionReturnedDefer=a.defer()),this._connectionReturnedDefer.promise},f.prototype._pokeKeepAlive=function(t){void 0===t&&(t=!1);const e=this;function n(){clearTimeout(e._keepAliveTimer),e._connectionReturnedDefer&&(e._connectionReturnedDefer.resolve(t),e._connectionReturnedDefer=null)}this.client._http.request(void 0,"GET","/_matrix/client/versions",void 0,void 0,{prefix:"",localTimeoutMs:15e3}).then((function(){n()}),(function(i){400==i.httpStatus||404==i.httpStatus?e._keepAliveTimer=setTimeout(n,2e3):(t=!0,e._keepAliveTimer=setTimeout(e._pokeKeepAlive.bind(e,t),5e3+Math.floor(5e3*Math.random())),e._updateSyncState("ERROR",{error:i}))}))},f.prototype._processGroupSyncEntry=function(t,e){for(const n of Object.keys(t)){const i=t[n];let r=this.client.store.getGroup(n);const s=null===r;null===r&&(r=this.createGroup(n)),i.profile&&r.setProfile(i.profile.name,i.profile.avatar_url),i.inviter&&r.setInviter({userId:i.inviter}),r.setMyMembership(e),s&&this.client.emit("Group",r)}},f.prototype._mapSyncResponseToRoomArray=function(t){const e=this.client,n=this;return a.keys(t).map((function(i){const r=t[i];let s=e.store.getRoom(i),o=!1;return s||(s=n.createRoom(i),o=!0),r.room=s,r.isBrandNewRoom=o,r}))},f.prototype._mapSyncEventsFormat=function(t,e){if(!t||!a.isArray(t.events))return[];const n=this.client.getEventMapper();return t.events.map((function(t){return e&&(t.room_id=e.roomId),n(t)}))},f.prototype._resolveInvites=function(t){if(!t||!this.opts.resolveInvitesToProfiles)return;const e=this.client;t.getMembersWithMembership("invite").forEach((function(n){if(n._requestedProfileInfo)return;n._requestedProfileInfo=!0;const i=e.getUser(n.userId);let r;r=i?Promise.resolve({avatar_url:i.avatarUrl,displayname:i.displayName}):e.getProfileInfo(n.userId),r.then((function(e){const i=n.events.member;"invite"===i.getContent().membership&&(i.getContent().avatar_url=e.avatar_url,i.getContent().displayname=e.displayname,n.setMembershipEvent(i,t.currentState))}),(function(t){}))}))},f.prototype._processRoomEvents=function(t,e,n,i){const r=t.getLiveTimeline(),s=0==r.getEvents().length;if(s){for(const t of e)this.client.getPushActionsForEvent(t);r.initialiseState(e)}this._resolveInvites(t),t.recalculate(),s||(t.oldState.setStateEvents(e||[]),t.currentState.setStateEvents(e||[])),t.addLiveEvents(n||[],null,i)},f.prototype._processEventsForNotifs=function(t,e){if(this.client.getNotifTimelineSet())for(let n=0;n<e.length;n++){const t=this.client.getPushActionsForEvent(e[n]);t&&t.notify&&t.tweaks&&t.tweaks.highlight&&this._notifEvents.push(e[n])}},f.prototype._getGuestFilter=function(){return this.client._guestRooms?JSON.stringify({room:{timeline:{limit:20}}}):"{}"},f.prototype._updateSyncState=function(t,e){const n=this._syncState;this._syncState=t,this._syncStateData=e,this.client.emit("sync",this._syncState,n,e)},f.prototype._onOnline=function(){m("Browser thinks we are back online"),this._startKeepAlives(0)}},TXj3:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PushProcessor=o;var i=n("t+e4");const r=["override","content","room","sender","underride"],s=[{rule_id:".m.rule.tombstone",default:!0,enabled:!0,conditions:[{kind:"event_match",key:"type",pattern:"m.room.tombstone"},{kind:"event_match",key:"state_key",pattern:""}],actions:["notify",{set_tweak:"highlight",value:!0}]},{rule_id:".m.rule.reaction",default:!0,enabled:!0,conditions:[{kind:"event_match",key:"type",pattern:"m.reaction"}],actions:["dont_notify"]}];function o(t){const e={},n=(t,e)=>{for(let n=0;n<r.length;++n){const i=r[n],o=e[i];if(o)for(let e=0;e<o.length;++e){const n=o[e];if(!n.enabled)continue;const r=s(i,n);if(r&&this.ruleMatchesEvent(r,t))return n.kind=i,n}}return null},s=function(t,e){const n={rule_id:e.rule_id,actions:e.actions,conditions:[]};switch(t){case"underride":case"override":n.conditions=e.conditions;break;case"room":if(!e.rule_id)return null;n.conditions.push({kind:"event_match",key:"room_id",value:e.rule_id});break;case"sender":if(!e.rule_id)return null;n.conditions.push({kind:"event_match",key:"user_id",value:e.rule_id});break;case"content":if(!e.pattern)return null;n.conditions.push({kind:"event_match",key:"content.body",pattern:e.pattern})}return n},a=function(t,e){const n={event_match:h,contains_display_name:u,room_member_count:l,sender_notification_permission:c};return!!n[t.kind]&&n[t.kind](t,e)},c=function(e,n){const i=e.key;if(!i)return!1;const r=t.getRoom(n.getRoomId());return!(!r||!r.currentState)&&r.currentState.mayTriggerNotifOfType(i,n.getSender())},l=function(e,n){if(!e.is)return!1;const i=t.getRoom(n.getRoomId());if(!i||!i.currentState||!i.currentState.members)return!1;const r=i.currentState.getJoinedMemberCount(),s=e.is.match(/^([=<>]*)([0-9]*)$/);if(!s)return!1;const o=s[1],a=parseInt(s[2]);if(isNaN(a))return!1;switch(o){case"":case"==":return r==a;case"<":return r<a;case">":return r>a;case"<=":return r<=a;case">=":return r>=a;default:return!1}},u=function(e,n){let r=n.getContent();if(n.isEncrypted()&&n.getClearContent()&&(r=n.getClearContent()),!r||!r.body||"string"!=typeof r.body)return!1;const s=t.getRoom(n.getRoomId());if(!(s&&s.currentState&&s.currentState.members&&s.currentState.getMember(t.credentials.userId)))return!1;const o=s.currentState.getMember(t.credentials.userId).name,a=new RegExp("(^|\\W)"+(0,i.escapeRegExp)(o)+"(\\W|$)","i");return r.body.search(a)>-1},h=function(t,e){if(!t.key)return!1;const n=p(t.key,e);if("string"!=typeof n)return!1;if(t.value)return t.value===n;let i;return i="content.body"==t.key?d("(^|\\W)",t.pattern,"(\\W|$)"):d("^",t.pattern,"$"),!!n.match(i)},d=function(t,n,r){return e[n]||(e[n]=new RegExp(t+(0,i.globToRegexp)(n)+r,"i")),e[n]},p=function(t,e){const n=t.split(".");let r;const s=n[0];for("content"===s?(r=e.getContent(),n.shift()):"type"===s?(r=e.getType(),n.shift()):r=e.event;n.length>0;){const t=n.shift();if((0,i.isNullOrUndefined)(r[t]))return null;r=r[t]}return r};this.ruleMatchesEvent=function(t,e){let n=!0;for(let i=0;i<t.conditions.length;++i)n&=a(t.conditions[i],e);return n},this.actionsForEvent=function(e){return function(e,i){const r=function(e,i){return i?e.getSender()===t.credentials.userId?null:n(e,i.global):null}(e,i);if(!r)return{};const s=o.actionListToActionsObject(r.actions);return void 0===s.tweaks.highlight&&(s.tweaks.highlight="content"==r.kind),s}(e,t.pushRules)},this.getPushRuleById=function(e){for(const n of["global"])if(void 0!==t.pushRules[n])for(const i of r)if(void 0!==t.pushRules[n][i])for(const r of t.pushRules[n][i])if(r.rule_id===e)return r;return null}}o.actionListToActionsObject=function(t){const e={notify:!1,tweaks:{}};for(let n=0;n<t.length;++n){const i=t[n];"notify"===i?e.notify=!0:"object"==typeof i&&(void 0===i.value&&(i.value=!0),e.tweaks[i.set_tweak]=i.value)}return e},o.rewriteDefaultRules=function(t){let e=JSON.parse(JSON.stringify(t));e||(e={}),e.global||(e.global={}),e.global.override||(e.global.override=[]);const n=e.global.override;for(const i of s){const t=n.find(t=>t.rule_id===i.rule_id);t?(t.default=i.default,t.conditions=i.conditions,t.actions=i.actions):(console.warn("Adding default global override for "+i.rule_id),n.push(i))}return e}},TqRt:function(t,e){t.exports=function(t){return t&&t.__esModule?t:{default:t}}},VEe5:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.newVerificationError=r,e.errorFactory=s,e.errorFromEvent=function(t){const e=t.getContent();if(e){const{code:t,reason:n}=e;return{code:t,reason:n}}return{code:"Unknown error",reason:"m.unknown"}},e.newInvalidMessageError=e.newUserMismatchError=e.newKeyMismatchError=e.newUnexpectedMessageError=e.newUnknownMethodError=e.newUnknownTransactionError=e.newTimeoutError=e.newUserCancelledError=void 0;var i=n("7UXS");function r(t,e,n){const r=Object.assign({},{code:t,reason:e},n);return new i.MatrixEvent({type:"m.key.verification.cancel",content:r})}function s(t,e){return function(n){return r(t,e,n)}}const o=s("m.user","Cancelled by user");e.newUserCancelledError=o;const a=s("m.timeout","Timed out");e.newTimeoutError=a;const c=s("m.unknown_transaction","Unknown transaction");e.newUnknownTransactionError=c;const l=s("m.unknown_method","Unknown method");e.newUnknownMethodError=l;const u=s("m.unexpected_message","Unexpected message");e.newUnexpectedMessageError=u;const h=s("m.key_mismatch","Key mismatch");e.newKeyMismatchError=h;const d=s("m.user_error","User mismatch");e.newUserMismatchError=d;const p=s("m.invalid_message","Invalid message");e.newInvalidMessageError=p},VRzr:function(t,e,n){"use strict";var i=n("TqRt"),r=n("284h");Object.defineProperty(e,"__esModule",{value:!0}),e.encryptMessageForDevice=async function(t,e,n,i,r,a,c){const l=a.getIdentityKey(),u=await i.getSessionIdForDevice(l);if(null===u)return;s.logger.log("Using sessionid "+u+" for device "+r+":"+a.deviceId);const h={sender:e,sender_device:n,keys:{ed25519:i.deviceEd25519Key},recipient:r,recipient_keys:{ed25519:a.getFingerprint()}};o.extend(h,c),t[l]=await i.encryptMessage(l,u,JSON.stringify(h))},e.getExistingOlmSessions=async function(t,e,n){const i={},r={},s=[];for(const[o,a]of Object.entries(n))for(const e of a){const n=e.deviceId,a=e.getIdentityKey();s.push((async()=>{const s=await t.getSessionIdForDevice(a,!0);null===s?(i[o]=i[o]||[],i[o].push(e)):(r[o]=r[o]||{},r[o][n]={device:e,sessionId:s})})())}return await Promise.all(s),[i,r]},e.ensureOlmSessionsForDevices=async function(t,e,n,i,r,o){"number"==typeof i&&(o=r,r=i,i=!1);const a=[],l={},u={};for(const[c,f]of Object.entries(n)){l[c]={};for(const e of f){const n=e.deviceId,r=e.getIdentityKey();if(r===t.deviceCurve25519Key){s.logger.info("Attempted to start session with ourself! Ignoring"),l[c][n]={device:e,sessionId:null};continue}t._sessionsInProgress[r]||(t._sessionsInProgress[r]=new Promise((e,n)=>{u[r]={resolve:(...n)=>{delete t._sessionsInProgress[r],e(...n)},reject:(...e)=>{delete t._sessionsInProgress[r],n(...e)}}}));const o=await t.getSessionIdForDevice(r,u[r]);null!==o&&u[r]&&(delete t._sessionsInProgress[r],u[r].resolve(),delete u[r]),(null===o||i)&&(s.logger.info(i?"Forcing new Olm session for "+c+":"+n:"Making new Olm session for "+c+":"+n),a.push([c,n])),l[c][n]={device:e,sessionId:o}}}if(0===a.length)return l;let h;try{h=await e.claimOneTimeKeys(a,"signed_curve25519",r)}catch(m){for(const t of Object.values(u))t.resolve();throw s.logger.log("failed to claim one-time keys",m,a),m}o&&"failures"in h&&o.push(...Object.keys(h.failures));const d=h.one_time_keys||{},p=[];for(const[f,g]of Object.entries(n)){const e=d[f]||{};for(let n=0;n<g.length;n++){const r=g[n],o=r.deviceId,a=r.getIdentityKey();if(a===t.deviceCurve25519Key)continue;if(l[f][o].sessionId&&!i)continue;const h=e[o]||{};let d=null;for(const t in h)0===t.indexOf("signed_curve25519:")&&(d=h[t]);d?p.push(c(t,d,f,r).then(t=>{u[a]&&u[a].resolve(t),l[f][o].sessionId=t},t=>{throw u[a]&&u[a].resolve(),t})):(s.logger.warn("No one-time keys (alg=signed_curve25519) for device "+f+":"+o),u[a]&&u[a].resolve())}}return await Promise.all(p),l},e.verifySignature=l,e.pkSign=function(t,e,n,i){let r=!1;if(e instanceof Uint8Array){const t=new global.Olm.PkSigning;i=t.init_with_seed(e),e=t,r=!0}const s=t.signatures||{};delete t.signatures;const o=t.unsigned;t.unsigned&&delete t.unsigned;try{const c=s[n]||{};return s[n]=c,c["ed25519:"+i]=e.sign(a.default.stringify(t))}finally{t.signatures=s,o&&(t.unsigned=o),r&&e.free()}},e.pkVerify=function(t,e,n){const i="ed25519:"+e;if(!(t.signatures&&t.signatures[n]&&t.signatures[n][i]))throw new Error("No signature");const r=t.signatures[n][i],s=new global.Olm.Utility,o=t.signatures;delete t.signatures;const c=t.unsigned;t.unsigned&&delete t.unsigned;try{s.ed25519_verify(e,a.default.stringify(t),r)}finally{t.signatures=o,c&&(t.unsigned=c),s.free()}},e.encodeBase64=u,e.encodeUnpaddedBase64=function(t){return u(t).replace(/=+$/g,"")},e.decodeBase64=function(t){return Buffer.from(t,"base64")},e.MEGOLM_BACKUP_ALGORITHM=e.MEGOLM_ALGORITHM=e.OLM_ALGORITHM=void 0;var s=n("PrRn"),o=r(n("t+e4")),a=i(n("0ZCT"));async function c(t,e,n,i){const r=i.deviceId;try{await l(t,e,n,r,i.getFingerprint())}catch(a){return s.logger.error("Unable to verify signature on one-time key for device "+n+":"+r+":",a),null}let o;try{o=await t.createOutboundSession(i.getIdentityKey(),e.key)}catch(a){return s.logger.error("Error starting olm session with device "+n+":"+r+": "+a),null}return s.logger.log("Started new olm sessionid "+o+" for device "+n+":"+r),o}async function l(t,e,n,i,r){const s=((e.signatures||{})[n]||{})["ed25519:"+i];if(!s)throw Error("No signature");const o=Object.assign({},e);delete o.unsigned,delete o.signatures;const c=a.default.stringify(o);t.verifySignature(r,c,s)}function u(t){return Buffer.from(t).toString("base64")}e.OLM_ALGORITHM="m.olm.v1.curve25519-aes-sha2",e.MEGOLM_ALGORITHM="m.megolm.v1.aes-sha2",e.MEGOLM_BACKUP_ALGORITHM="m.megolm_backup.v1.curve25519-aes-sha2"},XH0y:function(t,e,n){var i,r;!function(s,o){"use strict";void 0===(r="function"==typeof(i=function(){var t=function(){},e="undefined"!=typeof window&&void 0!==window.navigator&&/Trident\/|MSIE /.test(window.navigator.userAgent),n=["trace","debug","info","warn","error"];function i(t,e){var n=t[e];if("function"==typeof n.bind)return n.bind(t);try{return Function.prototype.bind.call(n,t)}catch(i){return function(){return Function.prototype.apply.apply(n,[t,arguments])}}}function r(){console.log&&(console.log.apply?console.log.apply(console,arguments):Function.prototype.apply.apply(console.log,[console,arguments])),console.trace&&console.trace()}function s(n){return"debug"===n&&(n="log"),"undefined"!=typeof console&&("trace"===n&&e?r:void 0!==console[n]?i(console,n):void 0!==console.log?i(console,"log"):t)}function o(e,i){for(var r=0;r<n.length;r++){var s=n[r];this[s]=r<e?t:this.methodFactory(s,e,i)}this.log=this.debug}function a(t,e,n){return function(){"undefined"!=typeof console&&(o.call(this,e,n),this[t].apply(this,arguments))}}function c(t,e,n){return s(t)||a.apply(this,arguments)}function l(t,e,i){var r,s=this,a="loglevel";function l(){var t;if("undefined"!=typeof window){try{t=window.localStorage[a]}catch(i){}if(void 0===t)try{var e=window.document.cookie,n=e.indexOf(encodeURIComponent(a)+"=");-1!==n&&(t=/^([^;]+)/.exec(e.slice(n))[1])}catch(i){}return void 0===s.levels[t]&&(t=void 0),t}}t&&(a+=":"+t),s.name=t,s.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},s.methodFactory=i||c,s.getLevel=function(){return r},s.setLevel=function(e,i){if("string"==typeof e&&void 0!==s.levels[e.toUpperCase()]&&(e=s.levels[e.toUpperCase()]),!("number"==typeof e&&e>=0&&e<=s.levels.SILENT))throw"log.setLevel() called with invalid level: "+e;if(r=e,!1!==i&&function(t){var e=(n[t]||"silent").toUpperCase();if("undefined"!=typeof window){try{return void(window.localStorage[a]=e)}catch(i){}try{window.document.cookie=encodeURIComponent(a)+"="+e+";"}catch(i){}}}(e),o.call(s,e,t),"undefined"==typeof console&&e<s.levels.SILENT)return"No console available for logging"},s.setDefaultLevel=function(t){l()||s.setLevel(t,!1)},s.enableAll=function(t){s.setLevel(s.levels.TRACE,t)},s.disableAll=function(t){s.setLevel(s.levels.SILENT,t)};var u=l();null==u&&(u=null==e?"WARN":e),s.setLevel(u,!1)}var u=new l,h={};u.getLogger=function(t){if("string"!=typeof t||""===t)throw new TypeError("You must supply a name when creating a logger.");var e=h[t];return e||(e=h[t]=new l(t,u.getLevel(),u.methodFactory)),e};var d="undefined"!=typeof window?window.log:void 0;return u.noConflict=function(){return"undefined"!=typeof window&&window.log===u&&(window.log=d),u},u.getLoggers=function(){return h},u})?i.call(e,n,e,t):i)||(t.exports=r)}()},YcCt:function(t,e,n){"use strict";function i(t,e){return Object.prototype.hasOwnProperty.call(t,e)}t.exports=function(t,e,n,r){n=n||"=";var s={};if("string"!=typeof t||0===t.length)return s;var o=/\+/g;t=t.split(e=e||"&");var a=1e3;r&&"number"==typeof r.maxKeys&&(a=r.maxKeys);var c=t.length;a>0&&c>a&&(c=a);for(var l=0;l<c;++l){var u,h,d,p,m=t[l].replace(o,"%20"),f=m.indexOf(n);f>=0?(u=m.substr(0,f),h=m.substr(f+1)):(u=m,h=""),d=decodeURIComponent(u),p=decodeURIComponent(h),i(s,d)?Array.isArray(s[d])?s[d].push(p):s[d]=[s[d],p]:s[d]=p}return s}},YuTi:function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},YuxU:function(t,e,n){"use strict";var i=n("284h"),r=n("TqRt");Object.defineProperty(e,"__esModule",{value:!0}),e.MatrixClient=P,e.CRYPTO_ENABLED=void 0;var s=r(n("CxY0")),o=n("+qE3"),a=n("j0j2"),c=n("8zgi"),l=n("RmcG"),u=n("7UXS"),h=n("tyto"),d=n("tXbD"),p=n("NxCW"),m=n("HtZB"),f=i(n("t+e4")),g=n("1F5k"),_=n("JOJy"),y=i(n("EP5U")),v=i(n("VRzr")),b=n("7/Kr"),w=n("B2hj"),S=n("PrRn"),E=n("fmda"),k=n("9Nfa"),C=n("qmDw"),x=n("PwFS"),T=n("TXj3"),I=n("rWBP"),R=n("ZP3D");const O=(0,E.isCryptoAvailable)();function A(t,e,n){const i=[];for(const[s,o]of Object.entries(t))try{const t=D(o,e);t.session_id=s,t.room_id=n,i.push(t)}catch(r){S.logger.log("Failed to decrypt megolm session from backup",r)}return i}function D(t,e){return JSON.parse(e.decrypt(t.session_data.ephemeral,t.session_data.mac,t.session_data.ciphertext))}function P(t){if(t.baseUrl=f.ensureNoTrailingSlash(t.baseUrl),t.idBaseUrl=f.ensureNoTrailingSlash(t.idBaseUrl),a.MatrixBaseApis.call(this,t),this.olmVersion=null,this.reEmitter=new b.ReEmitter(this),this.store=t.store||new p.StubStore,this.deviceId=t.deviceId||null,this.credentials={userId:t.userId||null},t.deviceToImport?this.deviceId?S.logger.warn("not importing device because device ID is provided to constructor independently of exported data"):this.credentials.userId?S.logger.warn("not importing device because user ID is provided to constructor independently of exported data"):t.deviceToImport.deviceId?(this.deviceId=t.deviceToImport.deviceId,this.credentials.userId=t.deviceToImport.userId,this._exportedOlmDeviceToImport=t.deviceToImport.olmDevice):S.logger.warn("not importing device because no device ID in exported data"):t.pickleKey&&(this.pickleKey=t.pickleKey),this.scheduler=t.scheduler,this.scheduler){const t=this;this.scheduler.setProcessFunction((async function(e){const n=t.getRoom(e.getRoomId());e.status!==u.EventStatus.SENDING&&F(n,e,u.EventStatus.SENDING);const i=await U(t,e);return n&&n.updatePendingEvent(e,u.EventStatus.SENT,i.event_id),i}))}this.clientRunning=!1,this.callList={};const e=(0,m.createNewMatrixCall)(this);this._supportsVoip=!1,e&&(function(t){const e={};let n=[];function i(){if("SYNCING"===t.getSyncState()){if(n.some(t=>t.isBeingDecrypted()))return;const t={};for(let e=n.length-1;e>=0;e--){const i=n[e];"m.call.answer"!==i.getType()&&"m.call.hangup"!==i.getType()||(t[i.getContent().call_id]="yep")}n.forEach((function(e){"m.call.invite"===e.getType()&&t[e.getContent().call_id]||r(e)})),n=[]}}function r(n){const i=n.getContent();let r,s=i.call_id?t.callList[i.call_id]:void 0;if("m.call.invite"===n.getType()){if(n.getSender()===t.credentials.userId)return;if(n.getAge()>i.lifetime)return;if(s&&"ended"===s.state)return;if(s&&S.logger.log("WARN: Already have a MatrixCall with id %s but got an invite. Clobbering.",i.call_id),s=(0,m.createNewMatrixCall)(t,n.getRoomId(),{forceTURN:t._forceTURN}),!s)return void S.logger.log("Incoming call ID "+i.call_id+" but this client doesn't support WebRTC");if(s.callId=i.call_id,s._initWithInvite(n),t.callList[s.callId]=s,e[s.callId])for(r=0;r<e[s.callId].length;r++)s._gotRemoteIceCandidate(e[s.callId][r]);let o;const a=f.values(t.callList);for(r=0;r<a.length;++r){const t=a[r];if(s.roomId===t.roomId&&"outbound"===t.direction&&-1!==["wait_local_media","create_offer","invite_sent"].indexOf(t.state)){o=t;break}}o?"wait_local_media"===o.state||"create_offer"===o.state||o.callId>s.callId?(S.logger.log("Glare detected: answering incoming call "+s.callId+" and canceling outgoing call "+o.callId),o._replacedBy(s),s.answer()):(S.logger.log("Glare detected: rejecting incoming call "+s.callId+" and keeping outgoing call "+o.callId),s.hangup()):t.emit("Call.incoming",s)}else if("m.call.answer"===n.getType()){if(!s)return;n.getSender()===t.credentials.userId?"ringing"===s.state&&s._onAnsweredElsewhere(i):s._receivedAnswer(i)}else if("m.call.candidates"===n.getType()){if(n.getSender()===t.credentials.userId)return;if(s)for(r=0;r<i.candidates.length;r++)s._gotRemoteIceCandidate(i.candidates[r]);else e[i.call_id]||(e[i.call_id]=[]),e[i.call_id]=e[i.call_id].concat(i.candidates)}else"m.call.hangup"===n.getType()&&(s?"ended"!==s.state&&(s._onHangupReceived(i),delete t.callList[i.call_id]):(s=(0,m.createNewMatrixCall)(t,n.getRoomId()),s&&(s.callId=i.call_id,s._initWithHangup(n),t.callList[i.call_id]=s)))}t.on("sync",i),t.on("event",(function(t){(0===t.getType().indexOf("m.call.")||t.isBeingDecrypted())&&n.push(t),(t.isBeingDecrypted()||t.isDecryptionFailure())&&t.once("Event.decrypted",()=>{-1!==t.getType().indexOf("m.call.")&&(n.includes(t)?i():r(t))})}))}(this),this._supportsVoip=!0),this._syncingRetry=null,this._syncApi=null,this._peekSync=null,this._isGuest=!1,this._ongoingScrollbacks={},this.timelineSupport=Boolean(t.timelineSupport),this.urlPreviewCache={},this._notifTimelineSet=null,this.unstableClientRelationAggregation=!!t.unstableClientRelationAggregation,this._crypto=null,this._cryptoStore=t.cryptoStore,this._sessionStore=t.sessionStore,this._verificationMethods=t.verificationMethods,this._cryptoCallbacks=t.cryptoCallbacks||{},this._forceTURN=t.forceTURN||!1,this._fallbackICEServerAllowed=t.fallbackICEServerAllowed||!1,this._roomList=new w.RoomList(this._cryptoStore),this._pushProcessor=new T.PushProcessor(this),this._serverVersionsCache=null,this._cachedCapabilities=null,this.on("Event.decrypted",t=>{const e=t.getPushActions(),n=this._pushProcessor.actionsForEvent(t);t.setPushActions(n);const i=this.getRoom(t.getRoomId());if(!i)return;const r=i.getUnreadNotificationCount("highlight"),s=!(!e||!e.tweaks||!e.tweaks.highlight),o=!(!n||!n.tweaks||!n.tweaks.highlight);if((s!==o||r>0)&&!i.hasUserReadEvent(this.getUserId(),t.getId())){let t=r;o&&!s&&t++,!o&&s&&t--,i.setUnreadNotificationCount("highlight",t),i.getUnreadNotificationCount("total")<t&&i.setUnreadNotificationCount("total",t)}}),this.on("Room.receipt",(t,e)=>{if(e&&this.isRoomEncrypted(e.roomId)){const n=t.getContent();if(!(Object.keys(n).filter(t=>Object.keys(n[t]["m.read"]).includes(this.getUserId())).length>0))return;const i=20,r=e.getLiveTimeline().getEvents();let s=0;for(let t=r.length-1;t>=0;t--){if(t===r.length-i)return;const n=r[t];if(e.hasUserReadEvent(this.getUserId(),n.getId()))break;const o=this.getPushActionsForEvent(n);s+=o.tweaks&&o.tweaks.highlight?1:0}e.setUnreadNotificationCount("highlight",s)}})}async function M(t,e,n,i,r,s){if(!t._crypto)throw new Error("End-to-End encryption disabled");await t._crypto.setDeviceVerification(e,n,i,r,s)}function N(t,e){for(const n of e)t.prototype[n]=function(...t){if(!this._crypto)throw new Error("End-to-end encryption disabled");return this._crypto[n](...t)}}function L(t,e,n,i){return Promise.resolve().then((function(){const i=function(t,e,n){if(e.isEncrypted())return null;if(!t.isRoomEncrypted(e.getRoomId()))return null;if("m.reaction"===e.getType())return null;if(!t._crypto)throw new Error("This room is configured to use encryption, but your client does not support encryption.");return t._crypto.encryptEvent(e,n)}(t,n,e);return i?(F(e,n,u.EventStatus.ENCRYPTING),i.then(()=>{F(e,n,u.EventStatus.SENDING)})):null})).then((function(){let i;return t.scheduler&&(i=t.scheduler.queueEvent(n),i&&t.scheduler.getQueueForEvent(n).length>1&&F(e,n,u.EventStatus.QUEUED)),i||(i=U(t,n),e&&(i=i.then(t=>(e.updatePendingEvent(n,u.EventStatus.SENT,t.event_id),t)))),i})).then((function(t){return i&&i(null,t),t}),(function(t){S.logger.error("Error sending event",t.stack||t);try{n.error=t,F(e,n,u.EventStatus.NOT_SENT),t.event=n,i&&i(t)}catch(r){S.logger.error("Exception in error handler!",r.stack||t)}throw t}))}function F(t,e,n){t?t.updatePendingEvent(e,n):e.setStatus(n)}function U(t,e){const n=e._txnId?e._txnId:t.makeTxnId(),i={$roomId:e.getRoomId(),$eventType:e.getWireType(),$stateKey:e.getStateKey(),$txnId:n};let r;if(e.isState()){let t="/rooms/$roomId/state/$eventType";e.getStateKey()&&e.getStateKey().length>0&&(t="/rooms/$roomId/state/$eventType/$stateKey"),r=f.encodeUri(t,i)}else r=e.isRedaction()?f.encodeUri("/rooms/$roomId/redact/$redactsEventId/$txnId",Object.assign({$redactsEventId:e.event.redacts},i)):f.encodeUri("/rooms/$roomId/send/$eventType/$txnId",i);return t._http.authedRequest(void 0,"PUT",r,void 0,e.getWireContent()).then(t=>(S.logger.log(`Event sent to ${e.getRoomId()} with event id ${t.event_id}`),t))}function B(t,e,n,i,r,s){f.isFunction(r)&&(s=r,r=void 0);const o=f.encodeUri("/rooms/$room_id/$membership",{$room_id:e,$membership:i});return t._http.authedRequest(s,"POST",o,void 0,{user_id:n,reason:r})}function j(t,e,n){t&&t(n),e(n)}function V(t,e,n){t&&t(null,n),e(n)}function K(t,e){const n=Boolean(e&&e.preventReEmit);return function(e){const i=new u.MatrixEvent(e);i.isEncrypted()&&(n||t.reEmitter.reEmit(i,["Event.decrypted"]),i.attemptDecryption(t._crypto));const r=t.getRoom(i.getRoomId());return r&&!n&&r.reEmitter.reEmit(i,["Event.replaced"]),i}}e.CRYPTO_ENABLED=O,f.inherits(P,o.EventEmitter),f.extend(P.prototype,a.MatrixBaseApis.prototype),P.prototype.exportDevice=async function(){if(this._crypto)return{userId:this.credentials.userId,deviceId:this.deviceId,olmDevice:await this._crypto._olmDevice.export()};S.logger.warn("not exporting device if crypto is not enabled")},P.prototype.clearStores=function(){if(this._clientRunning)throw new Error("Cannot clear stores while client is running");const t=[];return t.push(this.store.deleteAllData()),this._cryptoStore&&t.push(this._cryptoStore.deleteAllData()),Promise.all(t)},P.prototype.getUserId=function(){return this.credentials&&this.credentials.userId?this.credentials.userId:null},P.prototype.getDomain=function(){return this.credentials&&this.credentials.userId?this.credentials.userId.replace(/^.*?:/,""):null},P.prototype.getUserIdLocalpart=function(){return this.credentials&&this.credentials.userId?this.credentials.userId.split(":")[0].substring(1):null},P.prototype.getDeviceId=function(){return this.deviceId},P.prototype.supportsVoip=function(){return this._supportsVoip},P.prototype.setForceTURN=function(t){this._forceTURN=t},P.prototype.getSyncState=function(){return this._syncApi?this._syncApi.getSyncState():null},P.prototype.getSyncStateData=function(){return this._syncApi?this._syncApi.getSyncStateData():null},P.prototype.isInitialSyncComplete=function(){const t=this.getSyncState();return!!t&&("PREPARED"===t||"SYNCING"===t)},P.prototype.isGuest=function(){return this._isGuest},P.prototype.getScheduler=function(){return this.scheduler},P.prototype.setGuest=function(t){this._isGuest=t},P.prototype.retryImmediately=function(){return this._syncApi.retryImmediately()},P.prototype.getNotifTimelineSet=function(){return this._notifTimelineSet},P.prototype.setNotifTimelineSet=function(t){this._notifTimelineSet=t},P.prototype.getCapabilities=function(t=!1){const e=(new Date).getTime();return this._cachedCapabilities&&!t&&e<this._cachedCapabilities.expiration?(S.logger.log("Returning cached capabilities"),Promise.resolve(this._cachedCapabilities.capabilities)):this._http.authedRequest(void 0,"GET","/capabilities").catch(t=>(S.logger.error(t),null)).then(t=>{t||(t={});const n=t.capabilities||{},i=Object.keys(n).length?216e5:6e4+5e3*Math.random();return this._cachedCapabilities={capabilities:n,expiration:e+i},S.logger.log("Caching capabilities: ",n),n})},P.prototype.initCrypto=async function(){if(!(0,E.isCryptoAvailable)())throw new Error("End-to-end encryption not supported in this js-sdk build: did you remember to load the olm library?");if(this._crypto)return void S.logger.warn("Attempt to re-initialise e2e encryption on MatrixClient");if(!this._sessionStore)throw new Error("Cannot enable encryption: no sessionStore provided");if(!this._cryptoStore)throw new Error("Cannot enable encryption: no cryptoStore provided");S.logger.log("Crypto: Starting up crypto store..."),await this._cryptoStore.startup(),S.logger.log("Crypto: initialising roomlist..."),await this._roomList.init();const t=this.getUserId();if(null===t)throw new Error("Cannot enable encryption on MatrixClient with unknown userId: ensure userId is passed in createClient().");if(null===this.deviceId)throw new Error("Cannot enable encryption on MatrixClient with unknown deviceId: ensure deviceId is passed in createClient().");const e=new E.Crypto(this,this._sessionStore,t,this.deviceId,this.store,this._cryptoStore,this._roomList,this._verificationMethods);this.reEmitter.reEmit(e,["crypto.keyBackupFailed","crypto.keyBackupSessionsRemaining","crypto.roomKeyRequest","crypto.roomKeyRequestCancellation","crypto.warning","crypto.devicesUpdated","crypto.willUpdateDevices","deviceVerificationChanged","userTrustStatusChanged","crossSigning.keysChanged"]),S.logger.log("Crypto: initialising crypto object..."),await e.init({exportedOlmDevice:this._exportedOlmDeviceToImport,pickleKey:this.pickleKey}),delete this._exportedOlmDeviceToImport,this.olmVersion=E.Crypto.getOlmVersion(),e.registerEventHandlers(this),this._crypto=e},P.prototype.isCryptoEnabled=function(){return null!==this._crypto},P.prototype.getDeviceEd25519Key=function(){return this._crypto?this._crypto.getDeviceEd25519Key():null},P.prototype.getDeviceCurve25519Key=function(){return this._crypto?this._crypto.getDeviceCurve25519Key():null},P.prototype.uploadKeys=function(){if(null===this._crypto)throw new Error("End-to-end encryption disabled");return this._crypto.uploadDeviceKeys()},P.prototype.downloadKeys=function(t,e){return null===this._crypto?Promise.reject(new Error("End-to-end encryption disabled")):this._crypto.downloadKeys(t,e)},P.prototype.getStoredDevicesForUser=function(t){if(null===this._crypto)throw new Error("End-to-end encryption disabled");return this._crypto.getStoredDevicesForUser(t)||[]},P.prototype.getStoredDevice=function(t,e){if(null===this._crypto)throw new Error("End-to-end encryption disabled");return this._crypto.getStoredDevice(t,e)||null},P.prototype.setDeviceVerified=function(t,e,n){void 0===n&&(n=!0);const i=M(this,t,e,n,null);return t==this.credentials.userId&&this._crypto.checkKeyBackup(),i},P.prototype.setDeviceBlocked=function(t,e,n){return void 0===n&&(n=!0),M(this,t,e,null,n)},P.prototype.setDeviceKnown=function(t,e,n){return void 0===n&&(n=!0),M(this,t,e,null,null,n)},P.prototype.requestVerificationDM=function(t,e){if(null===this._crypto)throw new Error("End-to-end encryption disabled");return this._crypto.requestVerificationDM(t,e)},P.prototype.findVerificationRequestDMInProgress=function(t){if(null===this._crypto)throw new Error("End-to-end encryption disabled");return this._crypto.findVerificationRequestDMInProgress(t)},P.prototype.getVerificationRequestsToDeviceInProgress=function(t){if(null===this._crypto)throw new Error("End-to-end encryption disabled");return this._crypto.getVerificationRequestsToDeviceInProgress(t)},P.prototype.requestVerification=function(t,e){if(null===this._crypto)throw new Error("End-to-end encryption disabled");return this._crypto.requestVerification(t,e)},P.prototype.beginKeyVerification=function(t,e,n){if(null===this._crypto)throw new Error("End-to-end encryption disabled");return this._crypto.beginKeyVerification(t,e,n)},P.prototype.setGlobalBlacklistUnverifiedDevices=function(t){if(null===this._crypto)throw new Error("End-to-end encryption disabled");this._crypto.setGlobalBlacklistUnverifiedDevices(t)},P.prototype.getGlobalBlacklistUnverifiedDevices=function(){if(null===this._crypto)throw new Error("End-to-end encryption disabled");return this._crypto.getGlobalBlacklistUnverifiedDevices()},P.prototype.setGlobalErrorOnUnknownDevices=function(t){if(null===this._crypto)throw new Error("End-to-end encryption disabled");this._crypto.setGlobalErrorOnUnknownDevices(t)},P.prototype.getGlobalErrorOnUnknownDevices=function(){if(null===this._crypto)throw new Error("End-to-end encryption disabled");return this._crypto.getGlobalErrorOnUnknownDevices()},N(P,["getCrossSigningId","getStoredCrossSigningForUser","checkUserTrust","checkDeviceTrust","checkOwnCrossSigningTrust","checkCrossSigningPrivateKey","legacyDeviceVerification","prepareToEncrypt","isCrossSigningReady","getCryptoTrustCrossSignedDevices","setCryptoTrustCrossSignedDevices"]),N(P,["getEventEncryptionInfo","createRecoveryKeyFromPassphrase","bootstrapSecretStorage","addSecretStorageKey","hasSecretStorageKey","storeSecret","getSecret","isSecretStored","requestSecret","getDefaultSecretStorageKeyId","setDefaultSecretStorageKeyId","checkSecretStorageKey","checkSecretStoragePrivateKey"]),P.prototype.getEventSenderDeviceInfo=async function(t){return this._crypto?this._crypto.getEventSenderDeviceInfo(t):null},P.prototype.isEventSenderVerified=async function(t){const e=await this.getEventSenderDeviceInfo(t);return!!e&&e.isVerified()},P.prototype.cancelAndResendEventRoomKeyRequest=function(t){return t.cancelAndResendKeyRequest(this._crypto,this.getUserId())},P.prototype.setRoomEncryption=function(t,e){if(!this._crypto)throw new Error("End-to-End encryption disabled");return this._crypto.setRoomEncryption(t,e)},P.prototype.isRoomEncrypted=function(t){const e=this.getRoom(t);return!!e&&(!!e.currentState.getStateEvents("m.room.encryption","")||this._roomList.isRoomEncrypted(t))},P.prototype.forceDiscardSession=function(t){if(!this._crypto)throw new Error("End-to-End encryption disabled");this._crypto.forceDiscardSession(t)},P.prototype.exportRoomKeys=function(){return this._crypto?this._crypto.exportRoomKeys():Promise.reject(new Error("End-to-end encryption disabled"))},P.prototype.importRoomKeys=function(t,e){if(!this._crypto)throw new Error("End-to-end encryption disabled");return this._crypto.importRoomKeys(t,e)},P.prototype.checkKeyBackup=function(){return this._crypto.checkKeyBackup()},P.prototype.getKeyBackupVersion=function(){return this._http.authedRequest(void 0,"GET","/room_keys/version",void 0,void 0,{prefix:g.PREFIX_UNSTABLE}).then(t=>t.algorithm!==v.MEGOLM_BACKUP_ALGORITHM?Promise.reject("Unknown backup algorithm: "+t.algorithm):"object"==typeof t.auth_data&&t.auth_data.public_key?t:Promise.reject("Invalid backup data returned")).catch(t=>{if("M_NOT_FOUND"===t.errcode)return null;throw t})},P.prototype.isKeyBackupTrusted=function(t){return this._crypto.isKeyBackupTrusted(t)},P.prototype.getKeyBackupEnabled=function(){if(null===this._crypto)throw new Error("End-to-end encryption disabled");return this._crypto._checkedForBackup?Boolean(this._crypto.backupKey):null},P.prototype.enableKeyBackup=function(t){if(null===this._crypto)throw new Error("End-to-end encryption disabled");this._crypto.backupInfo=t,this._crypto.backupKey&&this._crypto.backupKey.free(),this._crypto.backupKey=new global.Olm.PkEncryption,this._crypto.backupKey.set_recipient_key(t.auth_data.public_key),this.emit("crypto.keyBackupStatus",!0),this._crypto.scheduleKeyBackupSend()},P.prototype.disableKeyBackup=function(){if(null===this._crypto)throw new Error("End-to-end encryption disabled");this._crypto.backupInfo=null,this._crypto.backupKey&&this._crypto.backupKey.free(),this._crypto.backupKey=null,this.emit("crypto.keyBackupStatus",!1)},P.prototype.prepareKeyBackupVersion=async function(t,{secureSecretStorage:e=!1}={}){if(null===this._crypto)throw new Error("End-to-end encryption disabled");const{keyInfo:n,encodedPrivateKey:i,privateKey:r}=await this.createRecoveryKeyFromPassphrase(t);e&&(await this.storeSecret("m.megolm_backup.v1",(0,v.encodeBase64)(r)),S.logger.info("Key backup private key stored in secret storage"));const s={public_key:n.pubkey};return n.passphrase&&(s.private_key_salt=n.passphrase.salt,s.private_key_iterations=n.passphrase.iterations),{algorithm:v.MEGOLM_BACKUP_ALGORITHM,auth_data:s,recovery_key:i}},P.prototype.isKeyBackupKeyStored=async function(){return this.isSecretStored("m.megolm_backup.v1",!1)},P.prototype.createKeyBackupVersion=async function(t){if(null===this._crypto)throw new Error("End-to-end encryption disabled");const e={algorithm:t.algorithm,auth_data:t.auth_data};await this._crypto._signObject(e.auth_data),this._cryptoCallbacks.getCrossSigningKey&&this._crypto._crossSigningInfo.getId()&&await this._crypto._crossSigningInfo.signObject(e.auth_data,"master");const n=await this._http.authedRequest(void 0,"POST","/room_keys/version",void 0,e,{prefix:g.PREFIX_UNSTABLE});return await this.checkKeyBackup(),this.getKeyBackupEnabled()||S.logger.error("Key backup not usable even though we just created it"),n},P.prototype.deleteKeyBackupVersion=function(t){if(null===this._crypto)throw new Error("End-to-end encryption disabled");this._crypto.backupInfo&&this._crypto.backupInfo.version===t&&this.disableKeyBackup();const e=f.encodeUri("/room_keys/version/$version",{$version:t});return this._http.authedRequest(void 0,"DELETE",e,void 0,void 0,{prefix:g.PREFIX_UNSTABLE})},P.prototype._makeKeyBackupPath=function(t,e,n){let i;return i=void 0!==e?f.encodeUri("/room_keys/keys/$roomId/$sessionId",{$roomId:t,$sessionId:e}):void 0!==t?f.encodeUri("/room_keys/keys/$roomId",{$roomId:t}):"/room_keys/keys",{path:i,queryData:void 0===n?void 0:{version:n}}},P.prototype.sendKeyBackup=function(t,e,n,i){if(null===this._crypto)throw new Error("End-to-end encryption disabled");const r=this._makeKeyBackupPath(t,e,n);return this._http.authedRequest(void 0,"PUT",r.path,r.queryData,i,{prefix:g.PREFIX_UNSTABLE})},P.prototype.scheduleAllGroupSessionsForBackup=async function(){if(null===this._crypto)throw new Error("End-to-end encryption disabled");await this._crypto.scheduleAllGroupSessionsForBackup()},P.prototype.flagAllGroupSessionsForBackup=function(){if(null===this._crypto)throw new Error("End-to-end encryption disabled");return this._crypto.flagAllGroupSessionsForBackup()},P.prototype.isValidRecoveryKey=function(t){try{return(0,k.decodeRecoveryKey)(t),!0}catch(e){return!1}},P.prototype.keyBackupKeyFromPassword=function(t,e){return(0,C.keyFromAuthData)(e.auth_data,t)},P.prototype.keyBackupKeyFromRecoveryKey=function(t){return(0,k.decodeRecoveryKey)(t)},P.RESTORE_BACKUP_ERROR_BAD_KEY="RESTORE_BACKUP_ERROR_BAD_KEY",P.prototype.restoreKeyBackupWithPassword=async function(t,e,n,i,r){const s=await(0,C.keyFromAuthData)(i.auth_data,t);return this._restoreKeyBackup(s,e,n,i,r)},P.prototype.restoreKeyBackupWithSecretStorage=async function(t,e,n,i){const r=await this.getSecret("m.megolm_backup.v1"),s=(0,E.fixBackupKey)(r);if(s){const[t]=await this._crypto.getSecretStorageKey();await this.storeSecret("m.megolm_backup.v1",s,[t])}const o=(0,v.decodeBase64)(s||r);return this._restoreKeyBackup(o,e,n,t,i)},P.prototype.restoreKeyBackupWithRecoveryKey=function(t,e,n,i,r){const s=(0,k.decodeRecoveryKey)(t);return this._restoreKeyBackup(s,e,n,i,r)},P.prototype.restoreKeyBackupWithCache=async function(t,e,n,i){const r=await this._crypto.getSessionBackupPrivateKey();if(!r)throw new Error("Couldn't get key");return this._restoreKeyBackup(r,t,e,n,i)},P.prototype._restoreKeyBackup=function(t,e,n,i,{cacheCompleteCallback:r,progressCallback:s}={}){if(null===this._crypto)throw new Error("End-to-end encryption disabled");let o=0,a=[];const c=this._makeKeyBackupPath(e,n,i.version),l=new global.Olm.PkDecryption;let u;try{u=l.init_with_private_key(t)}catch(h){throw l.free(),h}return u!==i.auth_data.public_key?Promise.reject({errcode:P.RESTORE_BACKUP_ERROR_BAD_KEY}):(this._crypto.storeSessionBackupPrivateKey(t).catch(t=>{console.warn("Error caching session backup key:",t)}).then(r),s&&s({stage:"fetch"}),this._http.authedRequest(void 0,"GET",c.path,c.queryData,void 0,{prefix:g.PREFIX_UNSTABLE}).then(t=>{if(t.rooms)for(const[e,n]of Object.entries(t.rooms)){if(!n.sessions)continue;o+=Object.keys(n.sessions).length;const t=A(n.sessions,l,e);for(const n of t)n.room_id=e,a.push(n)}else if(t.sessions)o=Object.keys(t.sessions).length,a=A(t.sessions,l,e);else{o=1;try{const i=D(t,l);i.room_id=e,i.session_id=n,a.push(i)}catch(h){S.logger.log("Failed to decrypt megolm session from backup",h)}}return this.importRoomKeys(a,{progressCallback:s,untrusted:!0,source:"backup"})}).then(()=>this._crypto.setTrustedBackupPubKey(u)).then(()=>({total:o,imported:a.length})).finally(()=>{l.free()}))},P.prototype.deleteKeysFromBackup=function(t,e,n){if(null===this._crypto)throw new Error("End-to-end encryption disabled");const i=this._makeKeyBackupPath(t,e,n);return this._http.authedRequest(void 0,"DELETE",i.path,i.queryData,void 0,{prefix:g.PREFIX_UNSTABLE})},P.prototype.getGroup=function(t){return this.store.getGroup(t)},P.prototype.getGroups=function(){return this.store.getGroups()},P.prototype.getMediaConfig=function(t){return this._http.authedRequest(t,"GET","/config",void 0,void 0,{prefix:g.PREFIX_MEDIA_R0})},P.prototype.getRoom=function(t){return this.store.getRoom(t)},P.prototype.getRooms=function(){return this.store.getRooms()},P.prototype.getVisibleRooms=function(){const t=this.store.getRooms(),e=new Set;for(const n of t){const t=n.currentState.getStateEvents("m.room.create","");if(t){const n=t.getContent().predecessor;n&&n.room_id&&e.add(n.room_id)}}return t.filter(t=>!t.currentState.getStateEvents("m.room.tombstone","")||!e.has(t.roomId))},P.prototype.getUser=function(t){return this.store.getUser(t)},P.prototype.getUsers=function(){return this.store.getUsers()},P.prototype.setAccountData=function(t,e,n){const i=f.encodeUri("/user/$userId/account_data/$type",{$userId:this.credentials.userId,$type:t}),r=(0,g.retryNetworkOperation)(5,()=>this._http.authedRequest(void 0,"PUT",i,void 0,e));return n&&r.then(t=>n(null,t),n),r},P.prototype.getAccountData=function(t){return this.store.getAccountData(t)},P.prototype.getAccountDataFromServer=async function(t){if(this.isInitialSyncComplete()){const e=this.store.getAccountData(t);return e?e.getContent():null}const e=f.encodeUri("/user/$userId/account_data/$type",{$userId:this.credentials.userId,$type:t});try{return await this._http.authedRequest(void 0,"GET",e,void 0)}catch(n){if(n.data&&"M_NOT_FOUND"===n.data.errcode)return null;throw n}},P.prototype.getIgnoredUsers=function(){const t=this.getAccountData("m.ignored_user_list");return t&&t.getContent()&&t.getContent().ignored_users?Object.keys(t.getContent().ignored_users):[]},P.prototype.setIgnoredUsers=function(t,e){const n={ignored_users:{}};return t.map(t=>n.ignored_users[t]={}),this.setAccountData("m.ignored_user_list",n,e)},P.prototype.isUserIgnored=function(t){return-1!==this.getIgnoredUsers().indexOf(t)},P.prototype.joinRoom=function(t,e,n){if(f.isFunction(e))throw new Error("Expected 'opts' object, got function.");void 0===(e=e||{}).syncRoom&&(e.syncRoom=!0);const i=this.getRoom(t);if(i&&i.hasMembershipState(this.credentials.userId,"join"))return Promise.resolve(i);let r=Promise.resolve();e.inviteSignUrl&&(r=this._http.requestOtherUrl(void 0,"POST",e.inviteSignUrl,{mxid:this.credentials.userId}));const s={};e.viaServers&&(s.server_name=e.viaServers);const o={qsStringifyOptions:{arrayFormat:"repeat"}},a=this;return new Promise((e,i)=>{r.then((function(e){const n={};e&&(n.third_party_signed=e);const i=f.encodeUri("/join/$roomid",{$roomid:t});return a._http.authedRequest(void 0,"POST",i,s,n,o)})).then((function(t){const e=t.room_id,n=new l.SyncApi(a,a._clientOpts).createRoom(e);return Promise.resolve(n)})).then((function(t){V(n,e,t)}),(function(t){j(n,i,t)}))})},P.prototype.resendEvent=function(t,e){return F(e,t,u.EventStatus.SENDING),L(this,e,t)},P.prototype.cancelPendingEvent=function(t){if([u.EventStatus.QUEUED,u.EventStatus.NOT_SENT].indexOf(t.status)<0)throw new Error("cannot cancel an event with status "+t.status);this.scheduler&&this.scheduler.removeEventFromQueue(t),F(this.getRoom(t.getRoomId()),t,u.EventStatus.CANCELLED)},P.prototype.setRoomName=function(t,e,n){return this.sendStateEvent(t,"m.room.name",{name:e},void 0,n)},P.prototype.setRoomTopic=function(t,e,n){return this.sendStateEvent(t,"m.room.topic",{topic:e},void 0,n)},P.prototype.getRoomTags=function(t,e){const n=f.encodeUri("/user/$userId/rooms/$roomId/tags/",{$userId:this.credentials.userId,$roomId:t});return this._http.authedRequest(e,"GET",n,void 0)},P.prototype.setRoomTag=function(t,e,n,i){const r=f.encodeUri("/user/$userId/rooms/$roomId/tags/$tag",{$userId:this.credentials.userId,$roomId:t,$tag:e});return this._http.authedRequest(i,"PUT",r,void 0,n)},P.prototype.deleteRoomTag=function(t,e,n){const i=f.encodeUri("/user/$userId/rooms/$roomId/tags/$tag",{$userId:this.credentials.userId,$roomId:t,$tag:e});return this._http.authedRequest(n,"DELETE",i,void 0,void 0)},P.prototype.setRoomAccountData=function(t,e,n,i){const r=f.encodeUri("/user/$userId/rooms/$roomId/account_data/$type",{$userId:this.credentials.userId,$roomId:t,$type:e});return this._http.authedRequest(i,"PUT",r,void 0,n)},P.prototype.setPowerLevel=function(t,e,n,i,r){let s={users:{}};i&&"m.room.power_levels"===i.getType()&&(s=f.deepCopy(i.getContent())),s.users[e]=n;const o=f.encodeUri("/rooms/$roomId/state/m.room.power_levels",{$roomId:t});return this._http.authedRequest(r,"PUT",o,void 0,s)},P.prototype.sendEvent=function(t,e,n,i,r){return this._sendCompleteEvent(t,{type:e,content:n},i,r)},P.prototype._sendCompleteEvent=function(t,e,n,i){f.isFunction(n)&&(i=n,n=void 0),n||(n=this.makeTxnId());const r=new u.MatrixEvent(Object.assign(e,{event_id:"~"+t+":"+n,user_id:this.credentials.userId,sender:this.credentials.userId,room_id:t,origin_server_ts:(new Date).getTime()})),s=this.getRoom(t),o=r.getAssociatedId();if(o&&o.startsWith("~")){const t=s.getPendingEvents().find(t=>t.getId()===o);t.once("Event.localEventIdReplaced",()=>{r.updateAssociatedId(t.getId())})}const a=r.getType();return S.logger.log(`sendEvent of type ${a} in ${t} with txnId ${n}`),r._txnId=n,r.setStatus(u.EventStatus.SENDING),s&&s.addPendingEvent(r,n),r.status===u.EventStatus.NOT_SENT?Promise.reject(new Error("Event blocked by other events not yet sent")):L(this,s,r,i)},P.prototype.redactEvent=function(t,e,n,i){return this._sendCompleteEvent(t,{type:"m.room.redaction",content:{},redacts:e},n,i)},P.prototype.sendMessage=function(t,e,n,i){return f.isFunction(n)&&(i=n,n=void 0),this.sendEvent(t,"m.room.message",e,n,i)},P.prototype.sendTextMessage=function(t,e,n,i){const r=y.makeTextMessage(e);return this.sendMessage(t,r,n,i)},P.prototype.sendNotice=function(t,e,n,i){const r=y.makeNotice(e);return this.sendMessage(t,r,n,i)},P.prototype.sendEmoteMessage=function(t,e,n,i){const r=y.makeEmoteMessage(e);return this.sendMessage(t,r,n,i)},P.prototype.sendImageMessage=function(t,e,n,i,r){return f.isFunction(i)&&(r=i,i=void 0),i||(i="Image"),this.sendMessage(t,{msgtype:"m.image",url:e,info:n,body:i},r)},P.prototype.sendStickerMessage=function(t,e,n,i,r){return f.isFunction(i)&&(r=i,i=void 0),i||(i="Sticker"),this.sendEvent(t,"m.sticker",{url:e,info:n,body:i},r,void 0)},P.prototype.sendHtmlMessage=function(t,e,n,i){const r=y.makeHtmlMessage(e,n);return this.sendMessage(t,r,i)},P.prototype.sendHtmlNotice=function(t,e,n,i){const r=y.makeHtmlNotice(e,n);return this.sendMessage(t,r,i)},P.prototype.sendHtmlEmote=function(t,e,n,i){const r=y.makeHtmlEmote(e,n);return this.sendMessage(t,r,i)},P.prototype.sendReceipt=function(t,e,n,i){if("function"==typeof n&&(i=n,n={}),this.isGuest())return Promise.resolve({});const r=f.encodeUri("/rooms/$roomId/receipt/$receiptType/$eventId",{$roomId:t.getRoomId(),$receiptType:e,$eventId:t.getId()}),s=this._http.authedRequest(i,"POST",r,void 0,n||{}),o=this.getRoom(t.getRoomId());return o&&o._addLocalEchoReceipt(this.credentials.userId,t,e),s},P.prototype.sendReadReceipt=async function(t,e,n){"function"==typeof e&&(n=e,e={}),e||(e={});const i=t.getId(),r=this.getRoom(t.getRoomId());if(r&&r.hasPendingEvent(i))throw new Error(`Cannot set read receipt to a pending event (${i})`);const s={"m.hidden":Boolean(e.hidden)};return this.sendReceipt(t,"m.read",s,n)},P.prototype.setRoomReadMarkers=async function(t,e,n,i){const r=this.getRoom(t);if(r&&r.hasPendingEvent(e))throw new Error(`Cannot set read marker to a pending event (${e})`);let s;if(n){if(s=n.getId(),r&&r.hasPendingEvent(s))throw new Error(`Cannot set read receipt to a pending event (${s})`);r&&r._addLocalEchoReceipt(this.credentials.userId,n,"m.read")}return this.setRoomReadMarkersHttpRequest(t,e,s,i)},P.prototype.getUrlPreview=function(t,e,n){const i=(e=6e4*Math.floor(e/6e4))+"_"+t,r=this.urlPreviewCache[i];if(r)return n&&r.then(n).catch(n),r;const s=this._http.authedRequest(n,"GET","/preview_url",{url:t,ts:e},void 0,{prefix:g.PREFIX_MEDIA_R0});return this.urlPreviewCache[i]=s,s},P.prototype.sendTyping=function(t,e,n,i){if(this.isGuest())return Promise.resolve({});const r=f.encodeUri("/rooms/$roomId/typing/$userId",{$roomId:t,$userId:this.credentials.userId}),s={typing:e};return e&&(s.timeout=n||2e4),this._http.authedRequest(i,"PUT",r,void 0,s)},P.prototype.getRoomUpgradeHistory=function(t,e=!1){let n=this.getRoom(t);if(!n)return[];const i=[n];let r=n.currentState.getStateEvents("m.room.create","");for(;r;){S.logger.log("Looking at "+r.getId());const t=r.getContent().predecessor;if(!t||!t.room_id)break;{S.logger.log("Looking at predecessor "+t.room_id);const n=this.getRoom(t.room_id);if(!n)break;if(e){const t=n.currentState.getStateEvents("m.room.tombstone","");if(!t||t.getContent().replacement_room!==n.roomId)break}i.splice(0,0,n),r=n.currentState.getStateEvents("m.room.create","")}}let s=n.currentState.getStateEvents("m.room.tombstone","");for(;s;){const t=this.getRoom(s.getContent().replacement_room);if(!t)break;if(t.roomId===n.roomId)break;if(e){if(r=t.currentState.getStateEvents("m.room.create",""),!r||!r.getContent().predecessor)break;if(r.getContent().predecessor.room_id!==n.roomId)break}if(i.push(t),new Set(i.map(t=>t.roomId)).size<i.length)return i.slice(0,i.length-1);n=t,s=n.currentState.getStateEvents("m.room.tombstone","")}return i},P.prototype.invite=function(t,e,n){return B(this,t,e,"invite",void 0,n)},P.prototype.inviteByEmail=function(t,e,n){return this.inviteByThreePid(t,"email",e,n)},P.prototype.inviteByThreePid=async function(t,e,n,i){const r=f.encodeUri("/rooms/$roomId/invite",{$roomId:t}),s=this.getIdentityServerUrl(!0);if(!s)return Promise.reject(new g.MatrixError({error:"No supplied identity server URL",errcode:"ORG.MATRIX.JSSDK_MISSING_PARAM"}));const o={id_server:s,medium:e,address:n};if(this.identityServer&&this.identityServer.getAccessToken&&await this.doesServerAcceptIdentityAccessToken()){const t=await this.identityServer.getAccessToken();t&&(o.id_access_token=t)}return this._http.authedRequest(i,"POST",r,void 0,o)},P.prototype.leave=function(t,e){return B(this,t,void 0,"leave",void 0,e)},P.prototype.leaveRoomChain=function(t,e=!0){const n=this.getRoomUpgradeHistory(t);let i=n;if(!e){i=[];for(const e of n)if(i.push(e),e.roomId===t)break}const r={},s=[],o=t=>this.leave(t).then(()=>{r[t]=null}).catch(e=>(r[t]=e,null));for(const a of i)s.push(o(a.roomId));return Promise.all(s).then(()=>r)},P.prototype.ban=function(t,e,n,i){return B(this,t,e,"ban",n,i)},P.prototype.forget=function(t,e,n){void 0===e&&(e=!0);const i=B(this,t,void 0,"forget",void 0,n);if(!e)return i;const r=this;return i.then((function(e){return r.store.removeRoom(t),r.emit("deleteRoom",t),e}))},P.prototype.unban=function(t,e,n){const i=f.encodeUri("/rooms/$roomId/unban",{$roomId:t});return this._http.authedRequest(n,"POST",i,void 0,{user_id:e})},P.prototype.kick=function(t,e,n,i){return function(t,e,n,i,r,s){f.isFunction(r)&&(s=r,r=void 0);const o=f.encodeUri("/rooms/$roomId/state/m.room.member/$userId",{$roomId:e,$userId:n});return t._http.authedRequest(s,"PUT",o,void 0,{membership:"leave",reason:r})}(this,t,e,0,n,i)},P.prototype.getPushActionsForEvent=function(t){return t.getPushActions()||t.setPushActions(this._pushProcessor.actionsForEvent(t)),t.getPushActions()},P.prototype.setProfileInfo=function(t,e,n){const i=f.encodeUri("/profile/$userId/$info",{$userId:this.credentials.userId,$info:t});return this._http.authedRequest(n,"PUT",i,void 0,e)},P.prototype.setDisplayName=function(t,e){return this.setProfileInfo("displayname",{displayname:t},e)},P.prototype.setAvatarUrl=function(t,e){return this.setProfileInfo("avatar_url",{avatar_url:t},e)},P.prototype.mxcUrlToHttp=function(t,e,n,i,r){return(0,_.getHttpUriForMxc)(this.baseUrl,t,e,n,i,r)},P.prototype._unstable_setStatusMessage=function(t){const e="im.vector.user_status";return Promise.all(this.getRooms().map(n=>{const i="join"===n.getMyMembership(),r=2===n.getInvitedAndJoinedMemberCount();return i&&r&&n.currentState.mayClientSendStateEvent(e,this)?this.sendStateEvent(n.roomId,e,{status:t},this.getUserId()):Promise.resolve()}))},P.prototype.setPresence=function(t,e){const n=f.encodeUri("/presence/$userId/status",{$userId:this.credentials.userId});if("string"==typeof t&&(t={presence:t}),-1==["offline","online","unavailable"].indexOf(t.presence))throw new Error("Bad presence value: "+t.presence);return this._http.authedRequest(e,"PUT",n,void 0,t)},P.prototype.scrollback=function(t,e,n){f.isFunction(e)&&(n=e,e=void 0),e=e||30;let i=0,r=this._ongoingScrollbacks[t.roomId]||{};if(r.promise)return r.promise;if(r.errorTs){const t=Date.now()-r.errorTs;i=Math.max(3e3-t,0)}if(null===t.oldState.paginationToken)return Promise.resolve(t);const s=this.store.scrollback(t,e).length;if(s===e)return Promise.resolve(t);e-=s;const o=this,a=new Promise((r,s)=>{(0,f.sleep)(i).then((function(){return o._createMessagesRequest(t.roomId,t.oldState.paginationToken,e,"b")})).then((function(e){const i=f.map(e.chunk,K(o));if(e.state){const n=f.map(e.state,K(o));t.currentState.setUnknownStateEvents(n)}t.addEventsToTimeline(i,!0,t.getLiveTimeline()),t.oldState.paginationToken=e.end,0===e.chunk.length&&(t.oldState.paginationToken=null),o.store.storeEvents(t,i,e.end,!0),o._ongoingScrollbacks[t.roomId]=null,V(n,r,t)}),(function(e){o._ongoingScrollbacks[t.roomId]={errorTs:Date.now()},j(n,s,e)}))});return r={promise:a,errorTs:null},this._ongoingScrollbacks[t.roomId]=r,a},P.prototype.getEventTimeline=function(t,e){if(!this.timelineSupport)throw new Error("timeline support is disabled. Set the 'timelineSupport' parameter to true when creating MatrixClient to enable it.");if(t.getTimelineForEvent(e))return Promise.resolve(t.getTimelineForEvent(e));const n=f.encodeUri("/rooms/$roomId/context/$eventId",{$roomId:t.room.roomId,$eventId:e});let i=void 0;this._clientOpts.lazyLoadMembers&&(i={filter:JSON.stringify(c.Filter.LAZY_LOADING_MESSAGES_FILTER)});const r=this;return r._http.authedRequest(void 0,"GET",n,i).then((function(n){if(!n.event)throw new Error("'event' not in '/context' result - homeserver too old?");if(t.getTimelineForEvent(e))return t.getTimelineForEvent(e);n.events_after.reverse();const i=n.events_after.concat([n.event]).concat(n.events_before),s=f.map(i,r.getEventMapper());let o=t.getTimelineForEvent(s[0].getId());if(o){const t=f.map(n.state,r.getEventMapper());o.getState(h.EventTimeline.BACKWARDS).setUnknownStateEvents(t)}else o=t.addTimeline(),o.initialiseState(f.map(n.state,r.getEventMapper())),o.getState(h.EventTimeline.FORWARDS).paginationToken=n.end;return t.addEventsToTimeline(s,!0,o,n.start),t.getTimelineForEvent(e)||o}))},P.prototype._createMessagesRequest=function(t,e,n,i,r){const s=f.encodeUri("/rooms/$roomId/messages",{$roomId:t});void 0===n&&(n=30);const o={from:e,limit:n,dir:i};let a=null;return this._clientOpts.lazyLoadMembers&&(a=Object.assign({},c.Filter.LAZY_LOADING_MESSAGES_FILTER)),r&&(a=a||{},Object.assign(a,r.getRoomTimelineFilterComponent())),a&&(o.filter=JSON.stringify(a)),this._http.authedRequest(void 0,"GET",s,o)},P.prototype.paginateEventTimeline=function(t,e){const n=t.getTimelineSet()===this._notifTimelineSet,i=(e=e||{}).backwards||!1;if(n&&!i)throw new Error("paginateNotifTimeline can only paginate backwards");const r=i?h.EventTimeline.BACKWARDS:h.EventTimeline.FORWARDS,s=t.getPaginationToken(r);if(!s)return Promise.resolve(!1);const o=t._paginationRequests[r];if(o)return o;let a,c,l;const u=this;if(n)a="/notifications",c={limit:"limit"in e?e.limit:30,only:"highlight"},s&&"end"!==s&&(c.from=s),l=this._http.authedRequest(void 0,"GET","/notifications",c,void 0).then((function(e){const n=e.next_token,s=[];for(let t=0;t<e.notifications.length;t++){const n=e.notifications[t],i=u.getEventMapper()(n.event);i.setPushActions(T.PushProcessor.actionListToActionsObject(n.actions)),i.event.room_id=n.room_id,s[t]=i}return t.getTimelineSet().addEventsToTimeline(s,i,t,n),i&&!e.next_token&&t.setPaginationToken(null,r),!!e.next_token})).finally((function(){t._paginationRequests[r]=null})),t._paginationRequests[r]=l;else{if(!this.getRoom(t.getRoomId()))throw new Error("Unknown room "+t.getRoomId());l=this._createMessagesRequest(t.getRoomId(),s,e.limit,r,t.getFilter()),l.then((function(e){if(e.state){const n=t.getState(r),i=f.map(e.state,u.getEventMapper());n.setUnknownStateEvents(i)}const n=e.end,s=f.map(e.chunk,u.getEventMapper());return t.getTimelineSet().addEventsToTimeline(s,i,t,n),i&&e.end==e.start&&t.setPaginationToken(null,r),e.end!=e.start})).finally((function(){t._paginationRequests[r]=null})),t._paginationRequests[r]=l}return l},P.prototype.resetNotifTimelineSet=function(){this._notifTimelineSet&&this._notifTimelineSet.resetLiveTimeline("end",null)},P.prototype.peekInRoom=function(t){return this._peekSync&&this._peekSync.stopPeeking(),this._peekSync=new l.SyncApi(this,this._clientOpts),this._peekSync.peek(t)},P.prototype.stopPeeking=function(){this._peekSync&&(this._peekSync.stopPeeking(),this._peekSync=null)},P.prototype.setGuestAccess=function(t,e){const n=this.sendStateEvent(t,"m.room.guest_access",{guest_access:e.allowJoin?"can_join":"forbidden"});let i=Promise.resolve();return e.allowRead&&(i=this.sendStateEvent(t,"m.room.history_visibility",{history_visibility:"world_readable"})),Promise.all([i,n])},P.prototype.requestRegisterEmailToken=function(t,e,n,i){return this._requestTokenFromEndpoint("/register/email/requestToken",{email:t,client_secret:e,send_attempt:n,next_link:i})},P.prototype.requestRegisterMsisdnToken=function(t,e,n,i,r){return this._requestTokenFromEndpoint("/register/msisdn/requestToken",{country:t,phone_number:e,client_secret:n,send_attempt:i,next_link:r})},P.prototype.requestAdd3pidEmailToken=function(t,e,n,i){return this._requestTokenFromEndpoint("/account/3pid/email/requestToken",{email:t,client_secret:e,send_attempt:n,next_link:i})},P.prototype.requestAdd3pidMsisdnToken=function(t,e,n,i,r){return this._requestTokenFromEndpoint("/account/3pid/msisdn/requestToken",{country:t,phone_number:e,client_secret:n,send_attempt:i,next_link:r})},P.prototype.requestPasswordEmailToken=function(t,e,n,i){return this._requestTokenFromEndpoint("/account/password/email/requestToken",{email:t,client_secret:e,send_attempt:n,next_link:i})},P.prototype.requestPasswordMsisdnToken=function(t,e,n,i,r){return this._requestTokenFromEndpoint("/account/password/msisdn/requestToken",{country:t,phone_number:e,client_secret:n,send_attempt:i,next_link:r})},P.prototype._requestTokenFromEndpoint=async function(t,e){const n=Object.assign({},e);if(!(await this.doesServerSupportSeparateAddAndBind())&&this.idBaseUrl){const t=s.default.parse(this.idBaseUrl);if(!t.host)throw new Error("Invalid ID server URL: "+this.idBaseUrl);if(n.id_server=t.host,this.identityServer&&this.identityServer.getAccessToken&&await this.doesServerAcceptIdentityAccessToken()){const t=await this.identityServer.getAccessToken();t&&(n.id_access_token=t)}}return this._http.request(void 0,"POST",t,void 0,n)},P.prototype.getRoomPushRule=function(t,e){if(!this.pushRules)throw new Error("SyncApi.sync() must be done before accessing to push rules.");for(let n=0;n<this.pushRules[t].room.length;n++){const i=this.pushRules[t].room[n];if(i.rule_id===e)return i}},P.prototype.setRoomMutePushRule=function(t,e,n){const i=this;let r,s;const o=this.getRoomPushRule(t,e);if(o&&0<=o.actions.indexOf("dont_notify")&&(s=!0),n?o?s||(r=f.defer(),this.deletePushRule(t,"room",o.rule_id).then((function(){i.addPushRule(t,"room",e,{actions:["dont_notify"]}).then((function(){r.resolve()}),(function(t){r.reject(t)}))}),(function(t){r.reject(t)})),r=r.promise):r=this.addPushRule(t,"room",e,{actions:["dont_notify"]}):s&&(r=this.deletePushRule(t,"room",o.rule_id)),r)return new Promise((t,e)=>{r.then((function(){i.getPushRules().then((function(e){i.pushRules=e,t()}),(function(t){e(t)}))}),(function(t){i.getPushRules().then((function(n){i.pushRules=n,e(t)}),(function(n){e(t)}))}))})},P.prototype.searchMessageText=function(t,e){const n={search_term:t.query};return"keys"in t&&(n.keys=t.keys),this.search({body:{search_categories:{room_events:n}}},e)},P.prototype.searchRoomEvents=function(t){const e={search_categories:{room_events:{search_term:t.term,filter:t.filter,order_by:"recent",event_context:{before_limit:1,after_limit:1,include_profile:!0}}}},n={_query:e,results:[],highlights:[]};return this.search({body:e}).then(this._processRoomEventsSearch.bind(this,n))},P.prototype.backPaginateRoomEventsSearch=function(t){if(!t.next_batch)return Promise.reject(new Error("Cannot backpaginate event search any further"));if(t.pendingRequest)return t.pendingRequest;const e=this.search({body:t._query,next_batch:t.next_batch}).then(this._processRoomEventsSearch.bind(this,t)).finally((function(){t.pendingRequest=null}));return t.pendingRequest=e,e},P.prototype._processRoomEventsSearch=function(t,e){const n=e.search_categories.room_events;t.count=n.count,t.next_batch=n.next_batch;const i={};n.highlights.forEach((function(t){i[t]=1})),t.highlights.forEach((function(t){i[t]=1})),t.highlights=Object.keys(i);for(let r=0;r<n.results.length;r++){const e=d.SearchResult.fromJson(n.results[r],this.getEventMapper());t.results.push(e)}return t},P.prototype.syncLeftRooms=function(){if(this._syncedLeftRooms)return Promise.resolve([]);if(this._syncLeftRoomsPromise)return this._syncLeftRoomsPromise;const t=this,e=new l.SyncApi(this,this._clientOpts);return this._syncLeftRoomsPromise=e.syncLeftRooms(),this._syncLeftRoomsPromise.then((function(e){S.logger.log("Marking success of sync left room request"),t._syncedLeftRooms=!0})).finally((function(){t._syncLeftRoomsPromise=null})),this._syncLeftRoomsPromise},P.prototype.createFilter=function(t){const e=this,n=f.encodeUri("/user/$userId/filter",{$userId:this.credentials.userId});return this._http.authedRequest(void 0,"POST",n,void 0,t).then((function(n){const i=c.Filter.fromJson(e.credentials.userId,n.filter_id,t);return e.store.storeFilter(i),i}))},P.prototype.getFilter=function(t,e,n){if(n){const n=this.store.getFilter(t,e);if(n)return Promise.resolve(n)}const i=this,r=f.encodeUri("/user/$userId/filter/$filterId",{$userId:t,$filterId:e});return this._http.authedRequest(void 0,"GET",r,void 0,void 0).then((function(n){const r=c.Filter.fromJson(t,e,n);return i.store.storeFilter(r),r}))},P.prototype.getOrCreateFilter=async function(t,e){const n=this.store.getFilterIdByName(t);let i=void 0;if(n){try{const t=await this.getFilter(this.credentials.userId,n,!0);if(t){const r=t.getDefinition(),s=e.getDefinition();f.deepCompare(r,s)&&(i=n)}}catch(s){if("M_UNKNOWN"!==s.errcode&&"M_NOT_FOUND"!==s.errcode)throw s}i||this.store.setFilterIdByName(t,void 0)}if(i)return i;const r=await this.createFilter(e.getDefinition());return this.store.setFilterIdByName(t,r.filterId),r.filterId},P.prototype.getOpenIdToken=function(){const t=f.encodeUri("/user/$userId/openid/request_token",{$userId:this.credentials.userId});return this._http.authedRequest(void 0,"POST",t,void 0,{})},P.prototype.turnServer=function(t){return this._http.authedRequest(t,"GET","/voip/turnServer")},P.prototype.getTurnServers=function(){return this._turnServers||[]},P.prototype.setFallbackICEServerAllowed=function(t){this._fallbackICEServerAllowed=t},P.prototype.isFallbackICEServerAllowed=function(){return this._fallbackICEServerAllowed},P.prototype.isSynapseAdministrator=function(){const t=f.encodeUri("/_synapse/admin/v1/users/$userId/admin",{$userId:this.getUserId()});return this._http.authedRequest(void 0,"GET",t,void 0,void 0,{prefix:""}).then(t=>t.admin)},P.prototype.whoisSynapseUser=function(t){const e=f.encodeUri("/_synapse/admin/v1/whois/$userId",{$userId:t});return this._http.authedRequest(void 0,"GET",e,void 0,void 0,{prefix:""})},P.prototype.deactivateSynapseUser=function(t){const e=f.encodeUri("/_synapse/admin/v1/deactivate/$userId",{$userId:t});return this._http.authedRequest(void 0,"POST",e,void 0,void 0,{prefix:""})},P.prototype.startClient=async function(t){if(this.clientRunning)return;this.clientRunning=!0,"number"==typeof t&&(t={initialSyncLimit:t});const e=this.getUserId();e&&this.store.storeUser(new I.User(e)),this._crypto&&(this._crypto.uploadDeviceKeys(),this._crypto.start()),function t(e){e._supportsVoip&&e.turnServer().then((function(n){n.uris&&(S.logger.log("Got TURN URIs: "+n.uris+" refresh in "+n.ttl+" secs"),e._turnServers=[{urls:n.uris,username:n.username,credential:n.password}],e._checkTurnServersTimeoutID=setTimeout(()=>{t(e)},1e3*(n.ttl||3600)*.9))}),(function(n){S.logger.error("Failed to get TURN URIs"),e._checkTurnServersTimeoutID=setTimeout((function(){t(e)}),6e4)}))}(this),this._syncApi&&(S.logger.error("Still have sync object whilst not running: stopping old one"),this._syncApi.stop()),(t=Object.assign({},t)).crypto=this._crypto,t.canResetEntireTimeline=t=>!!this._canResetTimelineCallback&&this._canResetTimelineCallback(t),this._clientOpts=t,this._syncApi=new l.SyncApi(this,t),this._syncApi.sync(),void 0!==t.clientWellKnownPollPeriod&&(this._clientWellKnownIntervalID=setInterval(()=>{this._fetchClientWellKnown()},1e3*t.clientWellKnownPollPeriod),this._fetchClientWellKnown())},P.prototype._fetchClientWellKnown=async function(){try{this._clientWellKnown=await R.AutoDiscovery.getRawClientConfig(this.getDomain()),this.emit("WellKnown.client",this._clientWellKnown)}catch(t){S.logger.error("Failed to get client well-known",t),this._clientWellKnown=void 0,this.emit("WellKnown.error",t)}},P.prototype.getClientWellKnown=function(){return this._clientWellKnown},P.prototype._storeClientOptions=function(){const t=["boolean","string","number"],e=Object.entries(this._clientOpts).filter(([e,n])=>t.includes(typeof n)).reduce((t,[e,n])=>(t[e]=n,t),{});return this.store.storeClientOptions(e)},P.prototype.stopClient=function(){S.logger.log("stopping MatrixClient"),this.clientRunning=!1,this._syncApi&&(this._syncApi.stop(),this._syncApi=null),this._crypto&&this._crypto.stop(),this._peekSync&&this._peekSync.stopPeeking(),global.clearTimeout(this._checkTurnServersTimeoutID),void 0!==this._clientWellKnownIntervalID&&global.clearInterval(this._clientWellKnownIntervalID)},P.prototype.getVersions=async function(){return null===this._serverVersionsCache&&(this._serverVersionsCache=await this._http.request(void 0,"GET","/_matrix/client/versions",void 0,void 0,{prefix:""})),this._serverVersionsCache},P.prototype.isVersionSupported=async function(t){const{versions:e}=await this.getVersions();return e&&e.includes(t)},P.prototype.doesServerSupportLazyLoading=async function(){const t=await this.getVersions();if(!t)return!1;const e=t.versions,n=t.unstable_features;return e&&e.includes("r0.5.0")||n&&n["m.lazy_load_members"]},P.prototype.doesServerRequireIdServerParam=async function(){const t=await this.getVersions();if(!t)return!0;const e=t.versions;if(e&&e.includes("r0.6.0"))return!1;const n=t.unstable_features;return!n||void 0===n["m.require_identity_server"]||n["m.require_identity_server"]},P.prototype.doesServerAcceptIdentityAccessToken=async function(){const t=await this.getVersions();if(!t)return!1;const e=t.versions,n=t.unstable_features;return e&&e.includes("r0.6.0")||n&&n["m.id_access_token"]},P.prototype.doesServerSupportSeparateAddAndBind=async function(){const t=await this.getVersions();if(!t)return!1;const e=t.versions,n=t.unstable_features;return e&&e.includes("r0.6.0")||n&&n["m.separate_add_and_bind"]},P.prototype.doesServerSupportUnstableFeature=async function(t){const e=await this.getVersions();if(!e)return!1;const n=e.unstable_features;return n&&!!n[t]},P.prototype.hasLazyLoadMembersEnabled=function(){return!!this._clientOpts.lazyLoadMembers},P.prototype.setCanResetTimelineCallback=function(t){this._canResetTimelineCallback=t},P.prototype.getCanResetTimelineCallback=function(){return this._canResetTimelineCallback},P.prototype.relations=async function(t,e,n,i,r={}){const s=function(t,e,n){return"m.reaction"===n?n:t.isRoomEncrypted(e)?"m.room.encrypted":n}(this,t,i),o=await this.fetchRelations(t,e,n,s,r),a=this.getEventMapper();let c;o.original_event&&(c=a(o.original_event));let l=o.chunk.map(a);if("m.room.encrypted"===s){const t=c?l.concat(c):l;await Promise.all(t.map(t=>new Promise(e=>t.once("Event.decrypted",e)))),l=l.filter(t=>t.getType()===i)}return{originalEvent:c,events:l,nextBatch:o.next_batch}},P.prototype.getEventMapper=function(t){return K(this,t)},P.prototype.getCrossSigningCacheCallbacks=function(){return this._crypto&&this._crypto._crossSigningInfo.getCacheCallbacks()},P.prototype.generateClientSecret=function(){return(0,x.randomString)(32)}},ZP3D:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AutoDiscovery=void 0;var i=n("PrRn"),r=n("CxY0");class s{static get ERROR_INVALID(){return"Invalid homeserver discovery response"}static get ERROR_GENERIC_FAILURE(){return"Failed to get autodiscovery configuration from server"}static get ERROR_INVALID_HS_BASE_URL(){return"Invalid base_url for m.homeserver"}static get ERROR_INVALID_HOMESERVER(){return"Homeserver URL does not appear to be a valid Matrix homeserver"}static get ERROR_INVALID_IS_BASE_URL(){return"Invalid base_url for m.identity_server"}static get ERROR_INVALID_IDENTITY_SERVER(){return"Identity server URL does not appear to be a valid identity server"}static get ERROR_INVALID_IS(){return"Invalid identity server discovery response"}static get ERROR_MISSING_WELLKNOWN(){return"No .well-known JSON file found"}static get ERROR_INVALID_JSON(){return"Invalid JSON"}static get ALL_ERRORS(){return[s.ERROR_INVALID,s.ERROR_GENERIC_FAILURE,s.ERROR_INVALID_HS_BASE_URL,s.ERROR_INVALID_HOMESERVER,s.ERROR_INVALID_IS_BASE_URL,s.ERROR_INVALID_IDENTITY_SERVER,s.ERROR_INVALID_IS,s.ERROR_MISSING_WELLKNOWN,s.ERROR_INVALID_JSON]}static get FAIL_ERROR(){return"FAIL_ERROR"}static get FAIL_PROMPT(){return"FAIL_PROMPT"}static get PROMPT(){return"PROMPT"}static get SUCCESS(){return"SUCCESS"}static async fromDiscoveryConfig(t){const e={"m.homeserver":{state:s.FAIL_ERROR,error:s.ERROR_INVALID,base_url:null},"m.identity_server":{state:s.PROMPT,error:null,base_url:null}};if(!t||!t["m.homeserver"])return i.logger.error("No m.homeserver key in config"),e["m.homeserver"].state=s.FAIL_PROMPT,e["m.homeserver"].error=s.ERROR_INVALID,Promise.resolve(e);if(!t["m.homeserver"].base_url)return i.logger.error("No m.homeserver base_url in config"),e["m.homeserver"].state=s.FAIL_PROMPT,e["m.homeserver"].error=s.ERROR_INVALID_HS_BASE_URL,Promise.resolve(e);const n=this._sanitizeWellKnownUrl(t["m.homeserver"].base_url);if(!n)return i.logger.error("Invalid base_url for m.homeserver"),e["m.homeserver"].error=s.ERROR_INVALID_HS_BASE_URL,Promise.resolve(e);const r=await this._fetchWellKnownObject(n+"/_matrix/client/versions");if(!r||!r.raw.versions)return i.logger.error("Invalid /versions response"),e["m.homeserver"].error=s.ERROR_INVALID_HOMESERVER,e["m.homeserver"].base_url=n,Promise.resolve(e);e["m.homeserver"]={state:s.SUCCESS,error:null,base_url:n};let o="";if(t["m.identity_server"]){const n={"m.homeserver":e["m.homeserver"],"m.identity_server":{state:s.FAIL_PROMPT,error:s.ERROR_INVALID_IS,base_url:null}};if(o=this._sanitizeWellKnownUrl(t["m.identity_server"].base_url),!o)return i.logger.error("Invalid base_url for m.identity_server"),n["m.identity_server"].error=s.ERROR_INVALID_IS_BASE_URL,Promise.resolve(n);const r=await this._fetchWellKnownObject(o+"/_matrix/identity/api/v1");if(!r||!r.raw||"SUCCESS"!==r.action)return i.logger.error("Invalid /api/v1 response"),n["m.identity_server"].error=s.ERROR_INVALID_IDENTITY_SERVER,n["m.identity_server"].base_url=o,Promise.resolve(n)}return o&&o.length>0&&(e["m.identity_server"]={state:s.SUCCESS,error:null,base_url:o}),Object.keys(t).map(n=>{if("m.homeserver"===n||"m.identity_server"===n){const i=["error","state","base_url"];for(const r of Object.keys(t[n]))i.includes(r)||(e[n][r]=t[n][r])}else e[n]=t[n]}),Promise.resolve(e)}static async findClientConfig(t){if(!t||"string"!=typeof t||0===t.length)throw new Error("'domain' must be a string of non-zero length");const e={"m.homeserver":{state:s.FAIL_ERROR,error:s.ERROR_INVALID,base_url:null},"m.identity_server":{state:s.PROMPT,error:null,base_url:null}},n=await this._fetchWellKnownObject(`https://${t}/.well-known/matrix/client`);return n&&"SUCCESS"===n.action?s.fromDiscoveryConfig(n.raw):(i.logger.error("No response or error when parsing .well-known"),n.reason&&i.logger.error(n.reason),"IGNORE"===n.action?e["m.homeserver"]={state:s.PROMPT,error:null,base_url:null}:(e["m.homeserver"].state=s.FAIL_PROMPT,e["m.homeserver"].error=s.ERROR_INVALID),Promise.resolve(e))}static async getRawClientConfig(t){if(!t||"string"!=typeof t||0===t.length)throw new Error("'domain' must be a string of non-zero length");const e=await this._fetchWellKnownObject(`https://${t}/.well-known/matrix/client`);return e&&e.raw||{}}static _sanitizeWellKnownUrl(t){if(!t)return!1;try{let n=null;try{n=r.URL?new r.URL(t):new URL(t)}catch(e){n=new URL(t)}if(!n||!n.hostname)return!1;if("http:"!==n.protocol&&"https:"!==n.protocol)return!1;let i=`${n.protocol}//${n.hostname}${n.port?":"+n.port:""}${n.pathname?n.pathname:""}`;return i.endsWith("/")&&(i=i.substring(0,i.length-1)),i}catch(e){return i.logger.error(e),!1}}static async _fetchWellKnownObject(t){return new Promise((function(e,i){const r=n("Gghg").getRequest();if(!r)throw new Error("No request library available");r({method:"GET",uri:t,timeout:5e3},(t,n,i)=>{if(t||n&&(n.statusCode<200||n.statusCode>=300)){let i="FAIL_PROMPT",r=(t?t.message:null)||"General failure";return n&&404===n.statusCode&&(i="IGNORE",r=s.ERROR_MISSING_WELLKNOWN),void e({raw:{},action:i,reason:r,error:t})}try{e({raw:JSON.parse(i),action:"SUCCESS"})}catch(r){let t=s.ERROR_INVALID;"SyntaxError"===r.name&&(t=s.ERROR_INVALID_JSON),e({raw:{},action:"FAIL_PROMPT",reason:t,error:r})}})}))}}e.AutoDiscovery=s},beRh:function(t){t.exports=JSON.parse('{"0":"O","1":"l","\u05ad":"\u0596","\u05ae":"\u0598","\u05a8":"\u0599","\u05a4":"\u059a","\u1ab4":"\u06db","\u20db":"\u06db","\u0619":"\u0313","\u08f3":"\u0313","\u0343":"\u0313","\u0315":"\u0313","\u064f":"\u0313","\u065d":"\u0314","\u059c":"\u0301","\u059d":"\u0301","\u0618":"\u0301","\u0747":"\u0301","\u0341":"\u0301","\u0954":"\u0301","\u064e":"\u0301","\u0340":"\u0300","\u0953":"\u0300","\u030c":"\u0306","\ua67c":"\u0306","\u0658":"\u0306","\u065a":"\u0306","\u036e":"\u0306","\u06e8":"\u0306\u0307","\u0310":"\u0306\u0307","\u0901":"\u0306\u0307","\u0981":"\u0306\u0307","\u0a81":"\u0306\u0307","\u0b01":"\u0306\u0307","\u0c00":"\u0306\u0307","\u0c81":"\u0306\u0307","\u0d01":"\u0306\u0307","\ud805\udcbf":"\u0306\u0307","\u1cd0":"\u0302","\u0311":"\u0302","\u065b":"\u0302","\u07ee":"\u0302","\ua6f0":"\u0302","\u05af":"\u030a","\u06df":"\u030a","\u17d3":"\u030a","\u309a":"\u030a","\u0652":"\u030a","\u0b82":"\u030a","\u1036":"\u030a","\u17c6":"\u030a","\ud804\udf00":"\u030a","\u0e4d":"\u030a","\u0ecd":"\u030a","\u0366":"\u030a","\u2dea":"\u030a","\u08eb":"\u0308","\u07f3":"\u0308","\u064b":"\u030b","\u08f0":"\u030b","\u0342":"\u0303","\u0653":"\u0303","\u05c4":"\u0307","\u06ec":"\u0307","\u0740":"\u0307","\u08ea":"\u0307","\u0741":"\u0307","\u0358":"\u0307","\u05b9":"\u0307","\u05ba":"\u0307","\u05c2":"\u0307","\u05c1":"\u0307","\u07ed":"\u0307","\u0902":"\u0307","\u0a02":"\u0307","\u0a82":"\u0307","\u0bcd":"\u0307","\u0337":"\u0338","\u1ab7":"\u0328","\u0322":"\u0328","\u0345":"\u0328","\u1cd2":"\u0304","\u0305":"\u0304","\u0659":"\u0304","\u07eb":"\u0304","\ua6f1":"\u0304","\u1cda":"\u030e","\u0657":"\u0312","\u0357":"\u0350","\u08ff":"\u0350","\u08f8":"\u0350","\u0900":"\u0352","\u1ced":"\u0316","\u1cdc":"\u0329","\u0656":"\u0329","\u1cd5":"\u032b","\u0347":"\u0333","\u08f9":"\u0354","\u08fa":"\u0355","\u309b":"\uff9e","\u309c":"\uff9f","\u0336":"\u0335","\u302c":"\u0309","\u05c5":"\u0323","\u08ed":"\u0323","\u1cdd":"\u0323","\u05b4":"\u0323","\u065c":"\u0323","\u093c":"\u0323","\u09bc":"\u0323","\u0a3c":"\u0323","\u0abc":"\u0323","\u0b3c":"\u0323","\ud804\uddca":"\u0323","\ud805\udcc3":"\u0323","\ud802\ude3a":"\u0323","\u08ee":"\u0324","\u1cde":"\u0324","\u0f37":"\u0325","\u302d":"\u0325","\u0327":"\u0326","\u0321":"\u0326","\u0339":"\u0326","\u1cd9":"\u032d","\u1cd8":"\u032e","\u0952":"\u0331","\u0320":"\u0331","\u08f1":"\u064c","\u08e8":"\u064c","\u08e5":"\u064c","\ufc5e":"\ufe72\u0651","\u08f2":"\u064d","\ufc5f":"\ufe74\u0651","\ufcf2":"\ufe77\u0651","\ufc60":"\ufe76\u0651","\ufcf3":"\ufe79\u0651","\ufc61":"\ufe78\u0651","\u061a":"\u0650","\u0317":"\u0650","\ufcf4":"\ufe7b\u0651","\ufc62":"\ufe7a\u0651","\ufc63":"\ufe7c\u0670","\u065f":"\u0655","\u030d":"\u0670","\u0742":"\u073c","\u0a03":"\u0983","\u0c03":"\u0983","\u0c83":"\u0983","\u0d03":"\u0983","\u0d83":"\u0983","\u1038":"\u0983","\ud805\udcc1":"\u0983","\u17cb":"\u0e48","\u0ec8":"\u0e48","\u0ec9":"\u0e49","\u0eca":"\u0e4a","\u0ecb":"\u0e4b","\ua66f":"\u20e9","\\u2028":" ","\\u2029":" ","\u1680":" ","\u2000":" ","\u2001":" ","\u2002":" ","\u2003":" ","\u2004":" ","\u2005":" ","\u2006":" ","\u2008":" ","\u2009":" ","\u200a":" ","\u205f":" ","\xa0":" ","\u2007":" ","\u202f":" ","\u07fa":"_","\ufe4d":"_","\ufe4e":"_","\ufe4f":"_","\u2010":"-","\u2011":"-","\u2012":"-","\u2013":"-","\ufe58":"-","\u06d4":"-","\u2043":"-","\u02d7":"-","\u2212":"-","\u2796":"-","\u2cba":"-","\u2a29":"-\u0313","\u2e1a":"-\u0308","\ufb29":"-\u0307","\u2238":"-\u0307","\u2a2a":"-\u0323","\ua4fe":"-.","\uff5e":"\u301c","\u060d":",","\u066b":",","\u201a":",","\xb8":",","\ua4f9":",","\u2e32":"\u060c","\u066c":"\u060c","\u037e":";","\u2e35":"\u061b","\u0903":":","\u0a83":":","\uff1a":":","\u0589":":","\u0703":":","\u0704":":","\u16ec":":","\ufe30":":","\u1803":":","\u1809":":","\u205a":":","\u05c3":":","\u02f8":":","\ua789":":","\u2236":":","\u02d0":":","\ua4fd":":","\u2a74":"::=","\u29f4":":\u2192","\uff01":"!","\u01c3":"!","\u2d51":"!","\u203c":"!!","\u2049":"!?","\u0294":"?","\u0241":"?","\u097d":"?","\u13ae":"?","\ua6eb":"?","\u2048":"?!","\u2047":"??","\u2e2e":"\u061f","\ud834\udd6d":".","\u2024":".","\u0701":".","\u0702":".","\ua60e":".","\ud802\ude50":".","\u0660":".","\u06f0":".","\ua4f8":".","\ua4fb":".,","\u2025":"..","\ua4fa":"..","\u2026":"...","\ua6f4":"\ua6f3\ua6f3","\u30fb":"\xb7","\uff65":"\xb7","\u16eb":"\xb7","\u0387":"\xb7","\u2e31":"\xb7","\ud800\udd01":"\xb7","\u2022":"\xb7","\u2027":"\xb7","\u2219":"\xb7","\u22c5":"\xb7","\ua78f":"\xb7","\u1427":"\xb7","\u22ef":"\xb7\xb7\xb7","\u2d48":"\xb7\xb7\xb7","\u1444":"\xb7<","\u22d7":"\xb7>","\u1437":"\xb7>","\u1440":"\xb7>","\u152f":"\xb74","\u147e":"\xb7b","\u1480":"\xb7b\u0307","\u147a":"\xb7d","\u1498":"\xb7J","\u14b6":"\xb7L","\u1476":"\xb7P","\u1457":"\xb7U","\u143a":"\xb7V","\u143c":"\xb7\u0245","\u14ae":"\xb7\u0393","\u140e":"\xb7\u0394","\u1459":"\xb7\u0548","\u140c":"\xb7\u1401","\u1410":"\xb7\u1404","\u1412":"\xb7\u1405","\u1414":"\xb7\u1406","\u1417":"\xb7\u140a","\u1419":"\xb7\u140b","\u143e":"\xb7\u1432","\u1442":"\xb7\u1434","\u1446":"\xb7\u1439","\u145b":"\xb7\u144f","\u1454":"\xb7\u1450","\u145d":"\xb7\u1450","\u145f":"\xb7\u1451","\u1461":"\xb7\u1455","\u1463":"\xb7\u1456","\u1474":"\xb7\u146b","\u1478":"\xb7\u146e","\u147c":"\xb7\u1470","\u1492":"\xb7\u1489","\u1494":"\xb7\u148b","\u1496":"\xb7\u148c","\u149a":"\xb7\u148e","\u149c":"\xb7\u1490","\u149e":"\xb7\u1491","\u14ac":"\xb7\u14a3","\u14b0":"\xb7\u14a6","\u14b2":"\xb7\u14a7","\u14b4":"\xb7\u14a8","\u14b8":"\xb7\u14ab","\u14c9":"\xb7\u14c0","\u18c6":"\xb7\u14c2","\u18c8":"\xb7\u14c3","\u18ca":"\xb7\u14c4","\u18cc":"\xb7\u14c5","\u14cb":"\xb7\u14c7","\u14cd":"\xb7\u14c8","\u14dc":"\xb7\u14d3","\u14de":"\xb7\u14d5","\u14e0":"\xb7\u14d6","\u14e2":"\xb7\u14d7","\u14e4":"\xb7\u14d8","\u14e6":"\xb7\u14da","\u14e8":"\xb7\u14db","\u14f6":"\xb7\u14ed","\u14f8":"\xb7\u14ef","\u14fa":"\xb7\u14f0","\u14fc":"\xb7\u14f1","\u14fe":"\xb7\u14f2","\u1500":"\xb7\u14f4","\u1502":"\xb7\u14f5","\u1517":"\xb7\u1510","\u1519":"\xb7\u1511","\u151b":"\xb7\u1512","\u151d":"\xb7\u1513","\u151f":"\xb7\u1514","\u1521":"\xb7\u1515","\u1523":"\xb7\u1516","\u1531":"\xb7\u1528","\u1533":"\xb7\u1529","\u1535":"\xb7\u152a","\u1537":"\xb7\u152b","\u1539":"\xb7\u152d","\u153b":"\xb7\u152e","\u18ce":"\xb7\u1543","\u18cf":"\xb7\u1546","\u18d0":"\xb7\u1547","\u18d1":"\xb7\u1548","\u18d2":"\xb7\u1549","\u18d3":"\xb7\u154b","\u154e":"\xb7\u154c","\u155b":"\xb7\u155a","\u1568":"\xb7\u1567","\u18b3":"\xb7\u18b1","\u18b6":"\xb7\u18b4","\u18b9":"\xb7\u18b8","\u18c2":"\xb7\u18c0","\ua830":"\u0964","\u0965":"\u0964\u0964","\u1c3c":"\u1c3b\u1c3b","\u104b":"\u104a\u104a","\u1aa9":"\u1aa8\u1aa8","\u1aab":"\u1aaa\u1aa8","\u1b5f":"\u1b5e\u1b5e","\ud802\ude57":"\ud802\ude56\ud802\ude56","\ud805\udc4c":"\ud805\udc4b\ud805\udc4b","\ud805\ude42":"\ud805\ude41\ud805\ude41","\ud807\udc42":"\ud807\udc41\ud807\udc41","\u1c7f":"\u1c7e\u1c7e","\u055d":"\'","\uff07":"\'","\u2018":"\'","\u2019":"\'","\u201b":"\'","\u2032":"\'","\u2035":"\'","\u055a":"\'","\u05f3":"\'","`":"\'","\u1fef":"\'","\uff40":"\'","\xb4":"\'","\u0384":"\'","\u1ffd":"\'","\u1fbd":"\'","\u1fbf":"\'","\u1ffe":"\'","\u02b9":"\'","\u0374":"\'","\u02c8":"\'","\u02ca":"\'","\u02cb":"\'","\u02f4":"\'","\u02bb":"\'","\u02bd":"\'","\u02bc":"\'","\u02be":"\'","\ua78c":"\'","\u05d9":"\'","\u07f4":"\'","\u07f5":"\'","\u144a":"\'","\u16cc":"\'","\ud81b\udf51":"\'","\ud81b\udf52":"\'","\u1cd3":"\'\'","\\"":"\'\'","\uff02":"\'\'","\u201c":"\'\'","\u201d":"\'\'","\u201f":"\'\'","\u2033":"\'\'","\u2036":"\'\'","\u3003":"\'\'","\u05f4":"\'\'","\u02dd":"\'\'","\u02ba":"\'\'","\u02f6":"\'\'","\u02ee":"\'\'","\u05f2":"\'\'","\u2034":"\'\'\'","\u2037":"\'\'\'","\u2057":"\'\'\'\'","\u0181":"\'B","\u018a":"\'D","\u0149":"\'n","\u01a4":"\'P","\u01ac":"\'T","\u01b3":"\'Y","\uff3b":"(","\u2768":"(","\u2772":"(","\u3014":"(","\ufd3e":"(","\u2e28":"((","\u3220":"(\u30fc)","\u2475":"(2)","\u2487":"(2O)","\u2476":"(3)","\u2477":"(4)","\u2478":"(5)","\u2479":"(6)","\u247a":"(7)","\u247b":"(8)","\u247c":"(9)","\u249c":"(a)","\ud83c\udd10":"(A)","\u249d":"(b)","\ud83c\udd11":"(B)","\u249e":"(c)","\ud83c\udd12":"(C)","\u249f":"(d)","\ud83c\udd13":"(D)","\u24a0":"(e)","\ud83c\udd14":"(E)","\u24a1":"(f)","\ud83c\udd15":"(F)","\u24a2":"(g)","\ud83c\udd16":"(G)","\u24a3":"(h)","\ud83c\udd17":"(H)","\u24a4":"(i)","\u24a5":"(j)","\ud83c\udd19":"(J)","\u24a6":"(k)","\ud83c\udd1a":"(K)","\u2474":"(l)","\ud83c\udd18":"(l)","\u24a7":"(l)","\ud83c\udd1b":"(L)","\u247f":"(l2)","\u2480":"(l3)","\u2481":"(l4)","\u2482":"(l5)","\u2483":"(l6)","\u2484":"(l7)","\u2485":"(l8)","\u2486":"(l9)","\u247e":"(ll)","\u247d":"(lO)","\ud83c\udd1c":"(M)","\u24a9":"(n)","\ud83c\udd1d":"(N)","\u24aa":"(o)","\ud83c\udd1e":"(O)","\u24ab":"(p)","\ud83c\udd1f":"(P)","\u24ac":"(q)","\ud83c\udd20":"(Q)","\u24ad":"(r)","\ud83c\udd21":"(R)","\u24a8":"(rn)","\u24ae":"(s)","\ud83c\udd22":"(S)","\ud83c\udd2a":"(S)","\u24af":"(t)","\ud83c\udd23":"(T)","\u24b0":"(u)","\ud83c\udd24":"(U)","\u24b1":"(v)","\ud83c\udd25":"(V)","\u24b2":"(w)","\ud83c\udd26":"(W)","\u24b3":"(x)","\ud83c\udd27":"(X)","\u24b4":"(y)","\ud83c\udd28":"(Y)","\u24b5":"(z)","\ud83c\udd29":"(Z)","\u3200":"(\u1100)","\u320e":"(\uac00)","\u3201":"(\u1102)","\u320f":"(\ub098)","\u3202":"(\u1103)","\u3210":"(\ub2e4)","\u3203":"(\u1105)","\u3211":"(\ub77c)","\u3204":"(\u1106)","\u3212":"(\ub9c8)","\u3205":"(\u1107)","\u3213":"(\ubc14)","\u3206":"(\u1109)","\u3214":"(\uc0ac)","\u3207":"(\u110b)","\u3215":"(\uc544)","\u321d":"(\uc624\uc804)","\u321e":"(\uc624\ud6c4)","\u3208":"(\u110c)","\u3216":"(\uc790)","\u321c":"(\uc8fc)","\u3209":"(\u110e)","\u3217":"(\ucc28)","\u320a":"(\u110f)","\u3218":"(\uce74)","\u320b":"(\u1110)","\u3219":"(\ud0c0)","\u320c":"(\u1111)","\u321a":"(\ud30c)","\u320d":"(\u1112)","\u321b":"(\ud558)","\u3226":"(\u4e03)","\u3222":"(\u4e09)","\ud83c\ude41":"(\u4e09)","\u3228":"(\u4e5d)","\u3221":"(\u4e8c)","\ud83c\ude42":"(\u4e8c)","\u3224":"(\u4e94)","\u3239":"(\u4ee3)","\u323d":"(\u4f01)","\u3241":"(\u4f11)","\u3227":"(\u516b)","\u3225":"(\u516d)","\u3238":"(\u52b4)","\ud83c\ude47":"(\u52dd)","\u3229":"(\u5341)","\u323f":"(\u5354)","\u3234":"(\u540d)","\u323a":"(\u547c)","\u3223":"(\u56db)","\u322f":"(\u571f)","\u323b":"(\u5b66)","\ud83c\ude43":"(\u5b89)","\ud83c\ude45":"(\u6253)","\ud83c\ude48":"(\u6557)","\u3230":"(\u65e5)","\u322a":"(\u6708)","\u3232":"(\u6709)","\u322d":"(\u6728)","\ud83c\ude40":"(\u672c)","\u3231":"(\u682a)","\u322c":"(\u6c34)","\u322b":"(\u706b)","\ud83c\ude44":"(\u70b9)","\u3235":"(\u7279)","\ud83c\ude46":"(\u76d7)","\u323c":"(\u76e3)","\u3233":"(\u793e)","\u3237":"(\u795d)","\u3240":"(\u796d)","\u3242":"(\u81ea)","\u3243":"(\u81f3)","\u3236":"(\u8ca1)","\u323e":"(\u8cc7)","\u322e":"(\u91d1)","\uff3d":")","\u2769":")","\u2773":")","\u3015":")","\ufd3f":")","\u2e29":"))","\u2774":"{","\ud834\udd14":"{","\u2775":"}","\u301a":"\u27e6","\u301b":"\u27e7","\u27e8":"\u276c","\u2329":"\u276c","\u3008":"\u276c","\u31db":"\u276c","\u304f":"\u276c","\ud847\udfe8":"\u276c","\u27e9":"\u276d","\u232a":"\u276d","\u3009":"\u276d","\uff3e":"\ufe3f","\u2e3f":"\xb6","\u204e":"*","\u066d":"*","\u2217":"*","\ud800\udf1f":"*","\u1735":"/","\u2041":"/","\u2215":"/","\u2044":"/","\u2571":"/","\u27cb":"/","\u29f8":"/","\ud834\ude3a":"/","\u31d3":"/","\u3033":"/","\u2cc6":"/","\u30ce":"/","\u4e3f":"/","\u2f03":"/","\u29f6":"/\u0304","\u2afd":"//","\u2afb":"///","\uff3c":"\\\\","\ufe68":"\\\\","\u2216":"\\\\","\u27cd":"\\\\","\u29f5":"\\\\","\u29f9":"\\\\","\ud834\ude0f":"\\\\","\ud834\ude3b":"\\\\","\u31d4":"\\\\","\u4e36":"\\\\","\u2f02":"\\\\","\u2cf9":"\\\\\\\\","\u244a":"\\\\\\\\","\u27c8":"\\\\\u1455","\ua778":"&","\u0af0":"\u0970","\ud804\udcbb":"\u0970","\ud804\uddc7":"\u0970","\u26ac":"\u0970","\ud804\udddb":"\ua8fc","\u17d9":"\u0e4f","\u17d5":"\u0e5a","\u17da":"\u0e5b","\u0f0c":"\u0f0b","\u0f0e":"\u0f0d\u0f0d","\u02c4":"^","\u02c6":"^","\ua67e":"\u02c7","\u02d8":"\u02c7","\u203e":"\u02c9","\ufe49":"\u02c9","\ufe4a":"\u02c9","\ufe4b":"\u02c9","\ufe4c":"\u02c9","\xaf":"\u02c9","\uffe3":"\u02c9","\u2594":"\u02c9","\u044a":"\u02c9b","\ua651":"\u02c9bi","\u0375":"\u02cf","\u02fb":"\u02ea","\ua716":"\u02ea","\ua714":"\u02eb","\u3002":"\u02f3","\u2e30":"\xb0","\u02da":"\xb0","\u2218":"\xb0","\u25cb":"\xb0","\u25e6":"\xb0","\u235c":"\xb0\u0332","\u2364":"\xb0\u0308","\u2103":"\xb0C","\u2109":"\xb0F","\u0bf5":"\u0bf3","\u0f1b":"\u0f1a\u0f1a","\u0f1f":"\u0f1a\u0f1d","\u0fce":"\u0f1d\u0f1a","\u0f1e":"\u0f1d\u0f1d","\u24b8":"\xa9","\u24c7":"\xae","\u24c5":"\u2117","\ud834\ude1b":"\u2144","\u2bec":"\u219e","\u2bed":"\u219f","\u2bee":"\u21a0","\u2bef":"\u21a1","\u21b5":"\u21b2","\u2965":"\u21c3\u21c2","\u296f":"\u21c3\u16da","\ud835\udedb":"\u2202","\ud835\udf15":"\u2202","\ud835\udf4f":"\u2202","\ud835\udf89":"\u2202","\ud835\udfc3":"\u2202","\ud83a\udccc":"\u2202","\ud83a\udccd":"\u2202\u0335","\xf0":"\u2202\u0335","\u2300":"\u2205","\ud835\udec1":"\u2207","\ud835\udefb":"\u2207","\ud835\udf35":"\u2207","\ud835\udf6f":"\u2207","\ud835\udfa9":"\u2207","\ud806\udca8":"\u2207","\u2362":"\u2207\u0308","\u236b":"\u2207\u0334","\u2588":"\u220e","\u25a0":"\u220e","\u2a3f":"\u2210","\u16ed":"+","\u2795":"+","\ud800\ude9b":"+","\u2a23":"+\u0302","\u2a22":"+\u030a","\u2a24":"+\u0303","\u2214":"+\u0307","\u2a25":"+\u0323","\u2a26":"+\u0330","\u2a27":"+\u2082","\u2797":"\xf7","\u2039":"<","\u276e":"<","\u02c2":"<","\ud834\ude36":"<","\u1438":"<","\u16b2":"<","\u22d6":"<\xb7","\u2cb4":"<\xb7","\u1445":"<\xb7","\u226a":"<<","\u22d8":"<<<","\u1400":"=","\u2e40":"=","\u30a0":"=","\ua4ff":"=","\u225a":"=\u0306","\u2259":"=\u0302","\u2257":"=\u030a","\u2250":"=\u0307","\u2251":"=\u0307\u0323","\u2a6e":"=\u20f0","\u2a75":"==","\u2a76":"===","\u225e":"=\u036b","\u203a":">","\u276f":">","\u02c3":">","\ud834\ude37":">","\u1433":">","\ud81b\udf3f":">","\u1441":">\xb7","\u2aa5":"><","\u226b":">>","\u2a20":">>","\u22d9":">>>","\u2053":"~","\u02dc":"~","\u1fc0":"~","\u223c":"~","\u2368":"~\u0308","\u2e1e":"~\u0307","\u2a6a":"~\u0307","\u2e1f":"~\u0323","\ud83a\udcc8":"\u2220","\u22c0":"\u2227","\u222f":"\u222e\u222e","\u2230":"\u222e\u222e\u222e","\u2e2b":"\u2234","\u2e2a":"\u2235","\u2e2c":"\u2237","\ud804\uddde":"\u2248","\u264e":"\u224f","\ud83d\udf5e":"\u224f","\u2263":"\u2261","\u2a03":"\u228d","\u2a04":"\u228e","\ud834\ude38":"\u228f","\ud834\ude39":"\u2290","\u2a05":"\u2293","\u2a06":"\u2294","\u2a02":"\u2297","\u235f":"\u229b","\ud83d\udf71":"\u22a0","\ud83d\udf55":"\u22a1","\u25c1":"\u22b2","\u25b7":"\u22b3","\u2363":"\u22c6\u0308","\ufe34":"\u2307","\u25e0":"\u2312","\u2a3d":"\u2319","\u2325":"\u2324","\u29c7":"\u233b","\u25ce":"\u233e","\u29be":"\u233e","\u29c5":"\u2342","\u29b0":"\u2349","\u23c3":"\u234b","\u23c2":"\u234e","\u23c1":"\u2355","\u23c6":"\u236d","\u2638":"\u2388","\ufe35":"\u23dc","\ufe36":"\u23dd","\ufe37":"\u23de","\ufe38":"\u23df","\ufe39":"\u23e0","\ufe3a":"\u23e1","\u25b1":"\u23e5","\u23fc":"\u23fb","\ufe31":"\u2502","\uff5c":"\u2502","\u2503":"\u2502","\u250f":"\u250c","\u2523":"\u251c","\u2590":"\u258c","\u2597":"\u2596","\u259d":"\u2598","\u2610":"\u25a1","\uffed":"\u25aa","\u25b8":"\u25b6","\u25ba":"\u25b6","\u2ce9":"\u2627","\ud83d\udf0a":"\u2629","\ud83c\udf12":"\u263d","\ud83c\udf19":"\u263d","\u23fe":"\u263e","\ud83c\udf18":"\u263e","\u29d9":"\u299a","\ud83d\udf3a":"\u29df","\u2a3e":"\u2a1f","\ud800\udda0":"\u2ce8","\u2669":"\ud834\udd58\ud834\udd65","\u266a":"\ud834\udd58\ud834\udd65\ud834\udd6e","\u24ea":"\ud83c\udd0d","\u21ba":"\ud83c\udd0e","\u02d9":"\u0971","\u0d4e":"\u0971","\uff0d":"\u30fc","\u2014":"\u30fc","\u2015":"\u30fc","\u2500":"\u30fc","\u2501":"\u30fc","\u31d0":"\u30fc","\ua7f7":"\u30fc","\u1173":"\u30fc","\u3161":"\u30fc","\u4e00":"\u30fc","\u2f00":"\u30fc","\u1196":"\u30fc\u30fc","\ud7b9":"\u30fc\u1161","\ud7ba":"\u30fc\u1165","\ud7bb":"\u30fc\u1165\u4e28","\ud7bc":"\u30fc\u1169","\u1195":"\u30fc\u116e","\u1174":"\u30fc\u4e28","\u3162":"\u30fc\u4e28","\u1197":"\u30fc\u4e28\u116e","\ud83c\udd0f":"$\u20e0","\u20a4":"\xa3","\u3012":"\u20b8","\u3036":"\u20b8","\u1b5c":"\u1b50","\ua9c6":"\ua9d0","\ud805\udcd1":"\u09e7","\u0ce7":"\u0c67","\u1065":"\u1041","\u2460":"\u2780","\u2469":"\u2789","\u23e8":"\u2081\u2080","\ud835\udfd0":"2","\ud835\udfda":"2","\ud835\udfe4":"2","\ud835\udfee":"2","\ud835\udff8":"2","\ud83e\udff2":"2","\ua75a":"2","\u01a7":"2","\u03e8":"2","\ua644":"2","\u14bf":"2","\ua6ef":"2","\ua9cf":"\u0662","\u06f2":"\u0662","\u0ae8":"\u0968","\ud805\udcd2":"\u09e8","\u0ce8":"\u0c68","\u2461":"\u2781","\u01bb":"2\u0335","\ud83c\udd03":"2,","\u2489":"2.","\u33f5":"22\u65e5","\u336e":"22\u70b9","\u33f6":"23\u65e5","\u336f":"23\u70b9","\u33f7":"24\u65e5","\u3370":"24\u70b9","\u33f8":"25\u65e5","\u33f9":"26\u65e5","\u33fa":"27\u65e5","\u33fb":"28\u65e5","\u33fc":"29\u65e5","\u33f4":"2l\u65e5","\u336d":"2l\u70b9","\u249b":"2O.","\u33f3":"2O\u65e5","\u336c":"2O\u70b9","\u0de9":"\u0de8\u0dcf","\u0def":"\u0de8\u0dd3","\u33e1":"2\u65e5","\u32c1":"2\u6708","\u335a":"2\u70b9","\ud834\ude06":"3","\ud835\udfd1":"3","\ud835\udfdb":"3","\ud835\udfe5":"3","\ud835\udfef":"3","\ud835\udff9":"3","\ud83e\udff3":"3","\ua7ab":"3","\u021c":"3","\u01b7":"3","\ua76a":"3","\u2ccc":"3","\u0417":"3","\u04e0":"3","\ud81b\udf3b":"3","\ud806\udcca":"3","\u06f3":"\u0663","\ud83a\udcc9":"\u0663","\u0ae9":"\u0969","\u2462":"\u2782","\u0498":"3\u0326","\ud83c\udd04":"3,","\u248a":"3.","\u33fe":"3l\u65e5","\u33fd":"3O\u65e5","\u33e2":"3\u65e5","\u32c2":"3\u6708","\u335b":"3\u70b9","\ud835\udfd2":"4","\ud835\udfdc":"4","\ud835\udfe6":"4","\ud835\udff0":"4","\ud835\udffa":"4","\ud83e\udff4":"4","\u13ce":"4","\ud806\udcaf":"4","\u06f4":"\u0664","\u0aea":"\u096a","\u2463":"\u2783","\ud83c\udd05":"4,","\u248b":"4.","\u1530":"4\xb7","\u33e3":"4\u65e5","\u32c3":"4\u6708","\u335c":"4\u70b9","\ud835\udfd3":"5","\ud835\udfdd":"5","\ud835\udfe7":"5","\ud835\udff1":"5","\ud835\udffb":"5","\ud83e\udff5":"5","\u01bc":"5","\ud806\udcbb":"5","\u2464":"\u2784","\ud83c\udd06":"5,","\u248c":"5.","\u33e4":"5\u65e5","\u32c4":"5\u6708","\u335d":"5\u70b9","\ud835\udfd4":"6","\ud835\udfde":"6","\ud835\udfe8":"6","\ud835\udff2":"6","\ud835\udffc":"6","\ud83e\udff6":"6","\u2cd2":"6","\u0431":"6","\u13ee":"6","\ud806\udcd5":"6","\u06f6":"\u0666","\ud805\udcd6":"\u09ec","\u2465":"\u2785","\ud83c\udd07":"6,","\u248d":"6.","\u33e5":"6\u65e5","\u32c5":"6\u6708","\u335e":"6\u70b9","\ud834\ude12":"7","\ud835\udfd5":"7","\ud835\udfdf":"7","\ud835\udfe9":"7","\ud835\udff3":"7","\ud835\udffd":"7","\ud83e\udff7":"7","\ud801\udcd2":"7","\ud806\udcc6":"7","\u2466":"\u2786","\ud83c\udd08":"7,","\u248e":"7.","\u33e6":"7\u65e5","\u32c6":"7\u6708","\u335f":"7\u70b9","\u0b03":"8","\u09ea":"8","\u0a6a":"8","\ud83a\udccb":"8","\ud835\udfd6":"8","\ud835\udfe0":"8","\ud835\udfea":"8","\ud835\udff4":"8","\ud835\udffe":"8","\ud83e\udff8":"8","\u0223":"8","\u0222":"8","\ud800\udf1a":"8","\u0aee":"\u096e","\u2467":"\u2787","\ud83c\udd09":"8,","\u248f":"8.","\u33e7":"8\u65e5","\u32c7":"8\u6708","\u3360":"8\u70b9","\u0a67":"9","\u0b68":"9","\u09ed":"9","\u0d6d":"9","\ud835\udfd7":"9","\ud835\udfe1":"9","\ud835\udfeb":"9","\ud835\udff5":"9","\ud835\udfff":"9","\ud83e\udff9":"9","\ua76e":"9","\u2cca":"9","\ud806\udccc":"9","\ud806\udcac":"9","\ud806\udcd6":"9","\u0967":"\u0669","\ud806\udce4":"\u0669","\u06f9":"\u0669","\u0cef":"\u0c6f","\u2468":"\u2788","\ud83c\udd0a":"9,","\u2490":"9.","\u33e8":"9\u65e5","\u32c8":"9\u6708","\u3361":"9\u70b9","\u237a":"a","\uff41":"a","\ud835\udc1a":"a","\ud835\udc4e":"a","\ud835\udc82":"a","\ud835\udcb6":"a","\ud835\udcea":"a","\ud835\udd1e":"a","\ud835\udd52":"a","\ud835\udd86":"a","\ud835\uddba":"a","\ud835\uddee":"a","\ud835\ude22":"a","\ud835\ude56":"a","\ud835\ude8a":"a","\u0251":"a","\u03b1":"a","\ud835\udec2":"a","\ud835\udefc":"a","\ud835\udf36":"a","\ud835\udf70":"a","\ud835\udfaa":"a","\u0430":"a","\u2df6":"\u0363","\uff21":"A","\ud835\udc00":"A","\ud835\udc34":"A","\ud835\udc68":"A","\ud835\udc9c":"A","\ud835\udcd0":"A","\ud835\udd04":"A","\ud835\udd38":"A","\ud835\udd6c":"A","\ud835\udda0":"A","\ud835\uddd4":"A","\ud835\ude08":"A","\ud835\ude3c":"A","\ud835\ude70":"A","\u0391":"A","\ud835\udea8":"A","\ud835\udee2":"A","\ud835\udf1c":"A","\ud835\udf56":"A","\ud835\udf90":"A","\u0410":"A","\u13aa":"A","\u15c5":"A","\ua4ee":"A","\ud81b\udf40":"A","\ud800\udea0":"A","\u2376":"a\u0332","\u01ce":"\u0103","\u01cd":"\u0102","\u0227":"\xe5","\u0226":"\xc5","\u1e9a":"\u1ea3","\u2100":"a/c","\u2101":"a/s","\ua733":"aa","\ua732":"AA","\xe6":"ae","\u04d5":"ae","\xc6":"AE","\u04d4":"AE","\ua735":"ao","\ua734":"AO","\ud83d\udf07":"AR","\ua737":"au","\ua736":"AU","\ua739":"av","\ua73b":"av","\ua738":"AV","\ua73a":"AV","\ua73d":"ay","\ua73c":"AY","\uab7a":"\u1d00","\u2200":"\u2c6f","\ud834\ude17":"\u2c6f","\u15c4":"\u2c6f","\ua4ef":"\u2c6f","\ud801\udc1f":"\u2c70","\ud835\udc1b":"b","\ud835\udc4f":"b","\ud835\udc83":"b","\ud835\udcb7":"b","\ud835\udceb":"b","\ud835\udd1f":"b","\ud835\udd53":"b","\ud835\udd87":"b","\ud835\uddbb":"b","\ud835\uddef":"b","\ud835\ude23":"b","\ud835\ude57":"b","\ud835\ude8b":"b","\u0184":"b","\u042c":"b","\u13cf":"b","\u1472":"b","\u15af":"b","\uff22":"B","\u212c":"B","\ud835\udc01":"B","\ud835\udc35":"B","\ud835\udc69":"B","\ud835\udcd1":"B","\ud835\udd05":"B","\ud835\udd39":"B","\ud835\udd6d":"B","\ud835\udda1":"B","\ud835\uddd5":"B","\ud835\ude09":"B","\ud835\ude3d":"B","\ud835\ude71":"B","\ua7b4":"B","\u0392":"B","\ud835\udea9":"B","\ud835\udee3":"B","\ud835\udf1d":"B","\ud835\udf57":"B","\ud835\udf91":"B","\u0412":"B","\u13f4":"B","\u15f7":"B","\ua4d0":"B","\ud800\ude82":"B","\ud800\udea1":"B","\ud800\udf01":"B","\u0253":"b\u0314","\u1473":"b\u0307","\u0183":"b\u0304","\u0182":"b\u0304","\u0411":"b\u0304","\u0180":"b\u0335","\u048d":"b\u0335","\u048c":"b\u0335","\u0463":"b\u0335","\u0462":"b\u0335","\u147f":"b\xb7","\u1481":"b\u0307\xb7","\u1488":"b\'","\u042b":"bl","\u0432":"\u0299","\u13fc":"\u0299","\uff43":"c","\u217d":"c","\ud835\udc1c":"c","\ud835\udc50":"c","\ud835\udc84":"c","\ud835\udcb8":"c","\ud835\udcec":"c","\ud835\udd20":"c","\ud835\udd54":"c","\ud835\udd88":"c","\ud835\uddbc":"c","\ud835\uddf0":"c","\ud835\ude24":"c","\ud835\ude58":"c","\ud835\ude8c":"c","\u1d04":"c","\u03f2":"c","\u2ca5":"c","\u0441":"c","\uabaf":"c","\ud801\udc3d":"c","\u2ded":"\u0368","\ud83d\udf4c":"C","\ud806\udcf2":"C","\ud806\udce9":"C","\uff23":"C","\u216d":"C","\u2102":"C","\u212d":"C","\ud835\udc02":"C","\ud835\udc36":"C","\ud835\udc6a":"C","\ud835\udc9e":"C","\ud835\udcd2":"C","\ud835\udd6e":"C","\ud835\udda2":"C","\ud835\uddd6":"C","\ud835\ude0a":"C","\ud835\ude3e":"C","\ud835\ude72":"C","\u03f9":"C","\u2ca4":"C","\u0421":"C","\u13df":"C","\ua4da":"C","\ud800\udea2":"C","\ud800\udf02":"C","\ud801\udc15":"C","\ud801\udd1c":"C","\xa2":"c\u0338","\u023c":"c\u0338","\u20a1":"C\u20eb","\ud83c\udd6e":"C\u20e0","\xe7":"c\u0326","\u04ab":"c\u0326","\xc7":"C\u0326","\u04aa":"C\u0326","\u0187":"C\'","\u2105":"c/o","\u2106":"c/u","\ud83c\udd6d":"\u33c4\\t\u20dd","\u22f4":"\ua793","\u025b":"\ua793","\u03b5":"\ua793","\u03f5":"\ua793","\ud835\udec6":"\ua793","\ud835\udedc":"\ua793","\ud835\udf00":"\ua793","\ud835\udf16":"\ua793","\ud835\udf3a":"\ua793","\ud835\udf50":"\ua793","\ud835\udf74":"\ua793","\ud835\udf8a":"\ua793","\ud835\udfae":"\ua793","\ud835\udfc4":"\ua793","\u2c89":"\ua793","\u0454":"\ua793","\u0511":"\ua793","\uab9b":"\ua793","\ud806\udcce":"\ua793","\ud801\udc29":"\ua793","\u20ac":"\ua792","\u2c88":"\ua792","\u0404":"\ua792","\u2377":"\ua793\u0332","\u037d":"\ua73f","\u03ff":"\ua73e","\u217e":"d","\u2146":"d","\ud835\udc1d":"d","\ud835\udc51":"d","\ud835\udc85":"d","\ud835\udcb9":"d","\ud835\udced":"d","\ud835\udd21":"d","\ud835\udd55":"d","\ud835\udd89":"d","\ud835\uddbd":"d","\ud835\uddf1":"d","\ud835\ude25":"d","\ud835\ude59":"d","\ud835\ude8d":"d","\u0501":"d","\u13e7":"d","\u146f":"d","\ua4d2":"d","\u216e":"D","\u2145":"D","\ud835\udc03":"D","\ud835\udc37":"D","\ud835\udc6b":"D","\ud835\udc9f":"D","\ud835\udcd3":"D","\ud835\udd07":"D","\ud835\udd3b":"D","\ud835\udd6f":"D","\ud835\udda3":"D","\ud835\uddd7":"D","\ud835\ude0b":"D","\ud835\ude3f":"D","\ud835\ude73":"D","\u13a0":"D","\u15de":"D","\u15ea":"D","\ua4d3":"D","\u0257":"d\u0314","\u0256":"d\u0328","\u018c":"d\u0304","\u0111":"d\u0335","\u0110":"D\u0335","\xd0":"D\u0335","\u0189":"D\u0335","\u20ab":"d\u0335\u0331","\ua77a":"\ua779","\u147b":"d\xb7","\u1487":"d\'","\u02a4":"d\u021d","\u01f3":"dz","\u02a3":"dz","\u01f2":"Dz","\u01f1":"DZ","\u01c6":"d\u017e","\u01c5":"D\u017e","\u01c4":"D\u017d","\u02a5":"d\u0291","\uab70":"\u1d05","\u2e39":"\u1e9f","\u03b4":"\u1e9f","\ud835\udec5":"\u1e9f","\ud835\udeff":"\u1e9f","\ud835\udf39":"\u1e9f","\ud835\udf73":"\u1e9f","\ud835\udfad":"\u1e9f","\u056e":"\u1e9f","\u1577":"\u1e9f","\u212e":"e","\uff45":"e","\u212f":"e","\u2147":"e","\ud835\udc1e":"e","\ud835\udc52":"e","\ud835\udc86":"e","\ud835\udcee":"e","\ud835\udd22":"e","\ud835\udd56":"e","\ud835\udd8a":"e","\ud835\uddbe":"e","\ud835\uddf2":"e","\ud835\ude26":"e","\ud835\ude5a":"e","\ud835\ude8e":"e","\uab32":"e","\u0435":"e","\u04bd":"e","\u2df7":"\u0364","\u22ff":"E","\uff25":"E","\u2130":"E","\ud835\udc04":"E","\ud835\udc38":"E","\ud835\udc6c":"E","\ud835\udcd4":"E","\ud835\udd08":"E","\ud835\udd3c":"E","\ud835\udd70":"E","\ud835\udda4":"E","\ud835\uddd8":"E","\ud835\ude0c":"E","\ud835\ude40":"E","\ud835\ude74":"E","\u0395":"E","\ud835\udeac":"E","\ud835\udee6":"E","\ud835\udf20":"E","\ud835\udf5a":"E","\ud835\udf94":"E","\u0415":"E","\u2d39":"E","\u13ac":"E","\ua4f0":"E","\ud806\udca6":"E","\ud806\udcae":"E","\ud800\ude86":"E","\u011b":"\u0115","\u011a":"\u0114","\u0247":"e\u0338","\u0246":"E\u0338","\u04bf":"e\u0328","\uab7c":"\u1d07","\u0259":"\u01dd","\u04d9":"\u01dd","\u2203":"\u018e","\u2d3a":"\u018e","\ua4f1":"\u018e","\u025a":"\u01dd\u02de","\u1d14":"\u01ddo","\uab41":"\u01ddo\u0338","\uab42":"\u01ddo\u0335","\u04d8":"\u018f","\ud834\ude21":"\u0190","\u2107":"\u0190","\u0510":"\u0190","\u13cb":"\u0190","\ud81b\udf2d":"\u0190","\ud801\udc01":"\u0190","\u1d9f":"\u1d4b","\u1d08":"\u025c","\u0437":"\u025c","\u0499":"\u025c\u0326","\ud801\udc42":"\u025e","\ua79d":"\u029a","\ud801\udc2a":"\u029a","\ud835\udc1f":"f","\ud835\udc53":"f","\ud835\udc87":"f","\ud835\udcbb":"f","\ud835\udcef":"f","\ud835\udd23":"f","\ud835\udd57":"f","\ud835\udd8b":"f","\ud835\uddbf":"f","\ud835\uddf3":"f","\ud835\ude27":"f","\ud835\ude5b":"f","\ud835\ude8f":"f","\uab35":"f","\ua799":"f","\u017f":"f","\u1e9d":"f","\u0584":"f","\ud834\ude13":"F","\u2131":"F","\ud835\udc05":"F","\ud835\udc39":"F","\ud835\udc6d":"F","\ud835\udcd5":"F","\ud835\udd09":"F","\ud835\udd3d":"F","\ud835\udd71":"F","\ud835\udda5":"F","\ud835\uddd9":"F","\ud835\ude0d":"F","\ud835\ude41":"F","\ud835\ude75":"F","\ua798":"F","\u03dc":"F","\ud835\udfca":"F","\u15b4":"F","\ua4dd":"F","\ud806\udcc2":"F","\ud806\udca2":"F","\ud800\ude87":"F","\ud800\udea5":"F","\ud801\udd25":"F","\u0192":"f\u0326","\u0191":"F\u0326","\u1d6e":"f\u0334","\u213b":"FAX","\ufb00":"ff","\ufb03":"ffi","\ufb04":"ffl","\ufb01":"fi","\ufb02":"fl","\u02a9":"f\u014b","\u15b5":"\u2132","\ua4de":"\u2132","\ud834\ude30":"\ua7fb","\u15b7":"\ua7fb","\uff47":"g","\u210a":"g","\ud835\udc20":"g","\ud835\udc54":"g","\ud835\udc88":"g","\ud835\udcf0":"g","\ud835\udd24":"g","\ud835\udd58":"g","\ud835\udd8c":"g","\ud835\uddc0":"g","\ud835\uddf4":"g","\ud835\ude28":"g","\ud835\ude5c":"g","\ud835\ude90":"g","\u0261":"g","\u1d83":"g","\u018d":"g","\u0581":"g","\ud835\udc06":"G","\ud835\udc3a":"G","\ud835\udc6e":"G","\ud835\udca2":"G","\ud835\udcd6":"G","\ud835\udd0a":"G","\ud835\udd3e":"G","\ud835\udd72":"G","\ud835\udda6":"G","\ud835\uddda":"G","\ud835\ude0e":"G","\ud835\ude42":"G","\ud835\ude76":"G","\u050c":"G","\u13c0":"G","\u13f3":"G","\ua4d6":"G","\u1da2":"\u1d4d","\u0260":"g\u0314","\u01e7":"\u011f","\u01e6":"\u011e","\u01f5":"\u0123","\u01e5":"g\u0335","\u01e4":"G\u0335","\u0193":"G\'","\u050d":"\u0262","\uab90":"\u0262","\u13fb":"\u0262","\uff48":"h","\u210e":"h","\ud835\udc21":"h","\ud835\udc89":"h","\ud835\udcbd":"h","\ud835\udcf1":"h","\ud835\udd25":"h","\ud835\udd59":"h","\ud835\udd8d":"h","\ud835\uddc1":"h","\ud835\uddf5":"h","\ud835\ude29":"h","\ud835\ude5d":"h","\ud835\ude91":"h","\u04bb":"h","\u0570":"h","\u13c2":"h","\uff28":"H","\u210b":"H","\u210c":"H","\u210d":"H","\ud835\udc07":"H","\ud835\udc3b":"H","\ud835\udc6f":"H","\ud835\udcd7":"H","\ud835\udd73":"H","\ud835\udda7":"H","\ud835\udddb":"H","\ud835\ude0f":"H","\ud835\ude43":"H","\ud835\ude77":"H","\u0397":"H","\ud835\udeae":"H","\ud835\udee8":"H","\ud835\udf22":"H","\ud835\udf5c":"H","\ud835\udf96":"H","\u2c8e":"H","\u041d":"H","\u13bb":"H","\u157c":"H","\ua4e7":"H","\ud800\udecf":"H","\u1d78":"\u1d34","\u0266":"h\u0314","\ua695":"h\u0314","\u13f2":"h\u0314","\u2c67":"H\u0329","\u04a2":"H\u0329","\u0127":"h\u0335","\u210f":"h\u0335","\u045b":"h\u0335","\u0126":"H\u0335","\u04c9":"H\u0326","\u04c7":"H\u0326","\u043d":"\u029c","\uab8b":"\u029c","\u04a3":"\u029c\u0329","\u04ca":"\u029c\u0326","\u04c8":"\u029c\u0326","\u050a":"\u01f6","\uab80":"\u2c76","\u0370":"\u2c75","\u13a8":"\u2c75","\u13b0":"\u2c75","\ua6b1":"\u2c75","\ua795":"\ua727","\u02db":"i","\u2373":"i","\uff49":"i","\u2170":"i","\u2139":"i","\u2148":"i","\ud835\udc22":"i","\ud835\udc56":"i","\ud835\udc8a":"i","\ud835\udcbe":"i","\ud835\udcf2":"i","\ud835\udd26":"i","\ud835\udd5a":"i","\ud835\udd8e":"i","\ud835\uddc2":"i","\ud835\uddf6":"i","\ud835\ude2a":"i","\ud835\ude5e":"i","\ud835\ude92":"i","\u0131":"i","\ud835\udea4":"i","\u026a":"i","\u0269":"i","\u03b9":"i","\u1fbe":"i","\u037a":"i","\ud835\udeca":"i","\ud835\udf04":"i","\ud835\udf3e":"i","\ud835\udf78":"i","\ud835\udfb2":"i","\u0456":"i","\ua647":"i","\u04cf":"i","\uab75":"i","\u13a5":"i","\ud806\udcc3":"i","\u24db":"\u24be","\u2378":"i\u0332","\u01d0":"\u012d","\u01cf":"\u012c","\u0268":"i\u0335","\u1d7b":"i\u0335","\u1d7c":"i\u0335","\u2171":"ii","\u2172":"iii","\u0133":"ij","\u2173":"iv","\u2178":"ix","\uff4a":"j","\u2149":"j","\ud835\udc23":"j","\ud835\udc57":"j","\ud835\udc8b":"j","\ud835\udcbf":"j","\ud835\udcf3":"j","\ud835\udd27":"j","\ud835\udd5b":"j","\ud835\udd8f":"j","\ud835\uddc3":"j","\ud835\uddf7":"j","\ud835\ude2b":"j","\ud835\ude5f":"j","\ud835\ude93":"j","\u03f3":"j","\u0458":"j","\uff2a":"J","\ud835\udc09":"J","\ud835\udc3d":"J","\ud835\udc71":"J","\ud835\udca5":"J","\ud835\udcd9":"J","\ud835\udd0d":"J","\ud835\udd41":"J","\ud835\udd75":"J","\ud835\udda9":"J","\ud835\udddd":"J","\ud835\ude11":"J","\ud835\ude45":"J","\ud835\ude79":"J","\ua7b2":"J","\u037f":"J","\u0408":"J","\u13ab":"J","\u148d":"J","\ua4d9":"J","\u0249":"j\u0335","\u0248":"J\u0335","\u1499":"J\xb7","\ud835\udea5":"\u0237","\u0575":"\u0237","\uab7b":"\u1d0a","\ud835\udc24":"k","\ud835\udc58":"k","\ud835\udc8c":"k","\ud835\udcc0":"k","\ud835\udcf4":"k","\ud835\udd28":"k","\ud835\udd5c":"k","\ud835\udd90":"k","\ud835\uddc4":"k","\ud835\uddf8":"k","\ud835\ude2c":"k","\ud835\ude60":"k","\ud835\ude94":"k","\u212a":"K","\uff2b":"K","\ud835\udc0a":"K","\ud835\udc3e":"K","\ud835\udc72":"K","\ud835\udca6":"K","\ud835\udcda":"K","\ud835\udd0e":"K","\ud835\udd42":"K","\ud835\udd76":"K","\ud835\uddaa":"K","\ud835\uddde":"K","\ud835\ude12":"K","\ud835\ude46":"K","\ud835\ude7a":"K","\u039a":"K","\ud835\udeb1":"K","\ud835\udeeb":"K","\ud835\udf25":"K","\ud835\udf5f":"K","\ud835\udf99":"K","\u2c94":"K","\u041a":"K","\u13e6":"K","\u16d5":"K","\ua4d7":"K","\ud801\udd18":"K","\u0199":"k\u0314","\u2c69":"K\u0329","\u049a":"K\u0329","\u20ad":"K\u0335","\ua740":"K\u0335","\u049e":"K\u0335","\u0198":"K\'","\u05c0":"l","|":"l","\u2223":"l","\u23fd":"l","\uffe8":"l","\u0661":"l","\u06f1":"l","\ud800\udf20":"l","\ud83a\udcc7":"l","\ud835\udfcf":"l","\ud835\udfd9":"l","\ud835\udfe3":"l","\ud835\udfed":"l","\ud835\udff7":"l","\ud83e\udff1":"l","I":"l","\uff29":"l","\u2160":"l","\u2110":"l","\u2111":"l","\ud835\udc08":"l","\ud835\udc3c":"l","\ud835\udc70":"l","\ud835\udcd8":"l","\ud835\udd40":"l","\ud835\udd74":"l","\ud835\udda8":"l","\ud835\udddc":"l","\ud835\ude10":"l","\ud835\ude44":"l","\ud835\ude78":"l","\u0196":"l","\uff4c":"l","\u217c":"l","\u2113":"l","\ud835\udc25":"l","\ud835\udc59":"l","\ud835\udc8d":"l","\ud835\udcc1":"l","\ud835\udcf5":"l","\ud835\udd29":"l","\ud835\udd5d":"l","\ud835\udd91":"l","\ud835\uddc5":"l","\ud835\uddf9":"l","\ud835\ude2d":"l","\ud835\ude61":"l","\ud835\ude95":"l","\u01c0":"l","\u0399":"l","\ud835\udeb0":"l","\ud835\udeea":"l","\ud835\udf24":"l","\ud835\udf5e":"l","\ud835\udf98":"l","\u2c92":"l","\u0406":"l","\u04c0":"l","\u05d5":"l","\u05df":"l","\u0627":"l","\ud83b\ude00":"l","\ud83b\ude80":"l","\ufe8e":"l","\ufe8d":"l","\u07ca":"l","\u2d4f":"l","\u16c1":"l","\ua4f2":"l","\ud81b\udf28":"l","\ud800\ude8a":"l","\ud800\udf09":"l","\ud834\ude2a":"L","\u216c":"L","\u2112":"L","\ud835\udc0b":"L","\ud835\udc3f":"L","\ud835\udc73":"L","\ud835\udcdb":"L","\ud835\udd0f":"L","\ud835\udd43":"L","\ud835\udd77":"L","\ud835\uddab":"L","\ud835\udddf":"L","\ud835\ude13":"L","\ud835\ude47":"L","\ud835\ude7b":"L","\u2cd0":"L","\u13de":"L","\u14aa":"L","\ua4e1":"L","\ud81b\udf16":"L","\ud806\udca3":"L","\ud806\udcb2":"L","\ud801\udc1b":"L","\ud801\udd26":"L","\ufd3c":"l\u030b","\ufd3d":"l\u030b","\u0142":"l\u0338","\u0141":"L\u0338","\u026d":"l\u0328","\u0197":"l\u0335","\u019a":"l\u0335","\u026b":"l\u0334","\u0625":"l\u0655","\ufe88":"l\u0655","\ufe87":"l\u0655","\u0673":"l\u0655","\u0140":"l\xb7","\u013f":"l\xb7","\u14b7":"l\xb7","\ud83c\udd02":"l,","\u2488":"l.","\u05f1":"l\'","\u2493":"l2.","\u33eb":"l2\u65e5","\u32cb":"l2\u6708","\u3364":"l2\u70b9","\u2494":"l3.","\u33ec":"l3\u65e5","\u3365":"l3\u70b9","\u2495":"l4.","\u33ed":"l4\u65e5","\u3366":"l4\u70b9","\u2496":"l5.","\u33ee":"l5\u65e5","\u3367":"l5\u70b9","\u2497":"l6.","\u33ef":"l6\u65e5","\u3368":"l6\u70b9","\u2498":"l7.","\u33f0":"l7\u65e5","\u3369":"l7\u70b9","\u2499":"l8.","\u33f1":"l8\u65e5","\u336a":"l8\u70b9","\u249a":"l9.","\u33f2":"l9\u65e5","\u336b":"l9\u70b9","\u01c9":"lj","\u0132":"lJ","\u01c8":"Lj","\u01c7":"LJ","\u2016":"ll","\u2225":"ll","\u2161":"ll","\u01c1":"ll","\u05f0":"ll","\ud800\udd99":"l\u0335l\u0335","\u2492":"ll.","\u2162":"lll","\ud800\udd98":"l\u0335l\u0335S\u0335","\u33ea":"ll\u65e5","\u32ca":"ll\u6708","\u3363":"ll\u70b9","\u042e":"lO","\u2491":"lO.","\u33e9":"lO\u65e5","\u32c9":"lO\u6708","\u3362":"lO\u70b9","\u02aa":"ls","\u20b6":"lt","\u2163":"lV","\u2168":"lX","\u026e":"l\u021d","\u02ab":"lz","\u0623":"l\u0674","\ufe84":"l\u0674","\ufe83":"l\u0674","\u0672":"l\u0674","\u0675":"l\u0674","\ufdf3":"l\u0643\u0628\u0631","\ufdf2":"l\u0644\u0644\u0651\u0670o","\u33e0":"l\u65e5","\u32c0":"l\u6708","\u3359":"l\u70b9","\u2cd1":"\u029f","\uabae":"\u029f","\ud801\udc43":"\u029f","\uff2d":"M","\u216f":"M","\u2133":"M","\ud835\udc0c":"M","\ud835\udc40":"M","\ud835\udc74":"M","\ud835\udcdc":"M","\ud835\udd10":"M","\ud835\udd44":"M","\ud835\udd78":"M","\ud835\uddac":"M","\ud835\udde0":"M","\ud835\ude14":"M","\ud835\ude48":"M","\ud835\ude7c":"M","\u039c":"M","\ud835\udeb3":"M","\ud835\udeed":"M","\ud835\udf27":"M","\ud835\udf61":"M","\ud835\udf9b":"M","\u03fa":"M","\u2c98":"M","\u041c":"M","\u13b7":"M","\u15f0":"M","\u16d6":"M","\ua4df":"M","\ud800\udeb0":"M","\ud800\udf11":"M","\u04cd":"M\u0326","\ud83d\udf6b":"MB","\u2de8":"\u1ddf","\ud835\udc27":"n","\ud835\udc5b":"n","\ud835\udc8f":"n","\ud835\udcc3":"n","\ud835\udcf7":"n","\ud835\udd2b":"n","\ud835\udd5f":"n","\ud835\udd93":"n","\ud835\uddc7":"n","\ud835\uddfb":"n","\ud835\ude2f":"n","\ud835\ude63":"n","\ud835\ude97":"n","\u0578":"n","\u057c":"n","\uff2e":"N","\u2115":"N","\ud835\udc0d":"N","\ud835\udc41":"N","\ud835\udc75":"N","\ud835\udca9":"N","\ud835\udcdd":"N","\ud835\udd11":"N","\ud835\udd79":"N","\ud835\uddad":"N","\ud835\udde1":"N","\ud835\ude15":"N","\ud835\ude49":"N","\ud835\ude7d":"N","\u039d":"N","\ud835\udeb4":"N","\ud835\udeee":"N","\ud835\udf28":"N","\ud835\udf62":"N","\ud835\udf9c":"N","\u2c9a":"N","\ua4e0":"N","\ud801\udd13":"N","\ud800\udd8e":"N\u030a","\u0273":"n\u0328","\u019e":"n\u0329","\u03b7":"n\u0329","\ud835\udec8":"n\u0329","\ud835\udf02":"n\u0329","\ud835\udf3c":"n\u0329","\ud835\udf76":"n\u0329","\ud835\udfb0":"n\u0329","\u019d":"N\u0326","\u1d70":"n\u0334","\u01cc":"nj","\u01cb":"Nj","\u01ca":"NJ","\u2116":"No","\u0377":"\u1d0e","\u0438":"\u1d0e","\ud801\udc4d":"\u1d0e","\u0146":"\u0272","\u0c02":"o","\u0c82":"o","\u0d02":"o","\u0d82":"o","\u0966":"o","\u0a66":"o","\u0ae6":"o","\u0be6":"o","\u0c66":"o","\u0ce6":"o","\u0d66":"o","\u0e50":"o","\u0ed0":"o","\u1040":"o","\u0665":"o","\u06f5":"o","\uff4f":"o","\u2134":"o","\ud835\udc28":"o","\ud835\udc5c":"o","\ud835\udc90":"o","\ud835\udcf8":"o","\ud835\udd2c":"o","\ud835\udd60":"o","\ud835\udd94":"o","\ud835\uddc8":"o","\ud835\uddfc":"o","\ud835\ude30":"o","\ud835\ude64":"o","\ud835\ude98":"o","\u1d0f":"o","\u1d11":"o","\uab3d":"o","\u03bf":"o","\ud835\uded0":"o","\ud835\udf0a":"o","\ud835\udf44":"o","\ud835\udf7e":"o","\ud835\udfb8":"o","\u03c3":"o","\ud835\uded4":"o","\ud835\udf0e":"o","\ud835\udf48":"o","\ud835\udf82":"o","\ud835\udfbc":"o","\u2c9f":"o","\u043e":"o","\u10ff":"o","\u0585":"o","\u05e1":"o","\u0647":"o","\ud83b\ude24":"o","\ud83b\ude64":"o","\ud83b\ude84":"o","\ufeeb":"o","\ufeec":"o","\ufeea":"o","\ufee9":"o","\u06be":"o","\ufbac":"o","\ufbad":"o","\ufbab":"o","\ufbaa":"o","\u06c1":"o","\ufba8":"o","\ufba9":"o","\ufba7":"o","\ufba6":"o","\u06d5":"o","\u0d20":"o","\u101d":"o","\ud801\udcea":"o","\ud806\udcc8":"o","\ud806\udcd7":"o","\ud801\udc2c":"o","\u07c0":"O","\u09e6":"O","\u0b66":"O","\u3007":"O","\ud805\udcd0":"O","\ud806\udce0":"O","\ud835\udfce":"O","\ud835\udfd8":"O","\ud835\udfe2":"O","\ud835\udfec":"O","\ud835\udff6":"O","\ud83e\udff0":"O","\uff2f":"O","\ud835\udc0e":"O","\ud835\udc42":"O","\ud835\udc76":"O","\ud835\udcaa":"O","\ud835\udcde":"O","\ud835\udd12":"O","\ud835\udd46":"O","\ud835\udd7a":"O","\ud835\uddae":"O","\ud835\udde2":"O","\ud835\ude16":"O","\ud835\ude4a":"O","\ud835\ude7e":"O","\u039f":"O","\ud835\udeb6":"O","\ud835\udef0":"O","\ud835\udf2a":"O","\ud835\udf64":"O","\ud835\udf9e":"O","\u2c9e":"O","\u041e":"O","\u0555":"O","\u2d54":"O","\u12d0":"O","\u0b20":"O","\ud801\udcc2":"O","\ua4f3":"O","\ud806\udcb5":"O","\ud800\ude92":"O","\ud800\udeab":"O","\ud801\udc04":"O","\ud801\udd16":"O","\u2070":"\xba","\u1d52":"\xba","\u01d2":"\u014f","\u01d1":"\u014e","\u06ff":"o\u0302","\u0150":"\xd6","\xf8":"o\u0338","\uab3e":"o\u0338","\xd8":"O\u0338","\u2d41":"O\u0338","\u01fe":"O\u0338\u0301","\u0275":"o\u0335","\ua74b":"o\u0335","\u04e9":"o\u0335","\u0473":"o\u0335","\uab8e":"o\u0335","\uabbb":"o\u0335","\u2296":"O\u0335","\u229d":"O\u0335","\u236c":"O\u0335","\ud834\ude1a":"O\u0335","\ud83d\udf14":"O\u0335","\u019f":"O\u0335","\ua74a":"O\u0335","\u03b8":"O\u0335","\u03d1":"O\u0335","\ud835\udec9":"O\u0335","\ud835\udedd":"O\u0335","\ud835\udf03":"O\u0335","\ud835\udf17":"O\u0335","\ud835\udf3d":"O\u0335","\ud835\udf51":"O\u0335","\ud835\udf77":"O\u0335","\ud835\udf8b":"O\u0335","\ud835\udfb1":"O\u0335","\ud835\udfc5":"O\u0335","\u0398":"O\u0335","\u03f4":"O\u0335","\ud835\udeaf":"O\u0335","\ud835\udeb9":"O\u0335","\ud835\udee9":"O\u0335","\ud835\udef3":"O\u0335","\ud835\udf23":"O\u0335","\ud835\udf2d":"O\u0335","\ud835\udf5d":"O\u0335","\ud835\udf67":"O\u0335","\ud835\udf97":"O\u0335","\ud835\udfa1":"O\u0335","\u04e8":"O\u0335","\u0472":"O\u0335","\u2d31":"O\u0335","\u13be":"O\u0335","\u13eb":"O\u0335","\uab74":"o\u031b","\ufcd9":"o\u0670","\ud83c\udd01":"O,","\ud83c\udd00":"O.","\u01a1":"o\'","\u01a0":"O\'","\u13a4":"O\'","%":"\xba/\u2080","\u066a":"\xba/\u2080","\u2052":"\xba/\u2080","\u2030":"\xba/\u2080\u2080","\u0609":"\xba/\u2080\u2080","\u2031":"\xba/\u2080\u2080\u2080","\u060a":"\xba/\u2080\u2080\u2080","\u0153":"oe","\u0152":"OE","\u0276":"o\u1d07","\u221e":"oo","\ua74f":"oo","\ua699":"oo","\ua74e":"OO","\ua698":"OO","\ufcd7":"o\u062c","\ufc51":"o\u062c","\ufcd8":"o\u0645","\ufc52":"o\u0645","\ufd93":"o\u0645\u062c","\ufd94":"o\u0645\u0645","\ufc53":"o\u0649","\ufc54":"o\u0649","\u0d5f":"o\u0d30o","\u1010":"o\u102c","\u3358":"O\u70b9","\u2184":"\u0254","\u1d10":"\u0254","\u037b":"\u0254","\ud801\udc4b":"\u0254","\u2183":"\u0186","\u03fd":"\u0186","\ua4db":"\u0186","\ud801\udc23":"\u0186","\uab3f":"\u0254\u0338","\uab62":"\u0254e","\ud801\udc3f":"\u0277","\u2374":"p","\uff50":"p","\ud835\udc29":"p","\ud835\udc5d":"p","\ud835\udc91":"p","\ud835\udcc5":"p","\ud835\udcf9":"p","\ud835\udd2d":"p","\ud835\udd61":"p","\ud835\udd95":"p","\ud835\uddc9":"p","\ud835\uddfd":"p","\ud835\ude31":"p","\ud835\ude65":"p","\ud835\ude99":"p","\u03c1":"p","\u03f1":"p","\ud835\uded2":"p","\ud835\udee0":"p","\ud835\udf0c":"p","\ud835\udf1a":"p","\ud835\udf46":"p","\ud835\udf54":"p","\ud835\udf80":"p","\ud835\udf8e":"p","\ud835\udfba":"p","\ud835\udfc8":"p","\u2ca3":"p","\u0440":"p","\uff30":"P","\u2119":"P","\ud835\udc0f":"P","\ud835\udc43":"P","\ud835\udc77":"P","\ud835\udcab":"P","\ud835\udcdf":"P","\ud835\udd13":"P","\ud835\udd7b":"P","\ud835\uddaf":"P","\ud835\udde3":"P","\ud835\ude17":"P","\ud835\ude4b":"P","\ud835\ude7f":"P","\u03a1":"P","\ud835\udeb8":"P","\ud835\udef2":"P","\ud835\udf2c":"P","\ud835\udf66":"P","\ud835\udfa0":"P","\u2ca2":"P","\u0420":"P","\u13e2":"P","\u146d":"P","\ua4d1":"P","\ud800\ude95":"P","\u01a5":"p\u0314","\u1d7d":"p\u0335","\u1477":"p\xb7","\u1486":"P\'","\u1d29":"\u1d18","\uabb2":"\u1d18","\u03c6":"\u0278","\u03d5":"\u0278","\ud835\uded7":"\u0278","\ud835\udedf":"\u0278","\ud835\udf11":"\u0278","\ud835\udf19":"\u0278","\ud835\udf4b":"\u0278","\ud835\udf53":"\u0278","\ud835\udf85":"\u0278","\ud835\udf8d":"\u0278","\ud835\udfbf":"\u0278","\ud835\udfc7":"\u0278","\u2cab":"\u0278","\u0444":"\u0278","\ud835\udc2a":"q","\ud835\udc5e":"q","\ud835\udc92":"q","\ud835\udcc6":"q","\ud835\udcfa":"q","\ud835\udd2e":"q","\ud835\udd62":"q","\ud835\udd96":"q","\ud835\uddca":"q","\ud835\uddfe":"q","\ud835\ude32":"q","\ud835\ude66":"q","\ud835\ude9a":"q","\u051b":"q","\u0563":"q","\u0566":"q","\u211a":"Q","\ud835\udc10":"Q","\ud835\udc44":"Q","\ud835\udc78":"Q","\ud835\udcac":"Q","\ud835\udce0":"Q","\ud835\udd14":"Q","\ud835\udd7c":"Q","\ud835\uddb0":"Q","\ud835\udde4":"Q","\ud835\ude18":"Q","\ud835\ude4c":"Q","\ud835\ude80":"Q","\u2d55":"Q","\u02a0":"q\u0314","\ud83d\udf00":"QE","\u1d90":"\u024b","\u1d0b":"\u0138","\u03ba":"\u0138","\u03f0":"\u0138","\ud835\udecb":"\u0138","\ud835\udede":"\u0138","\ud835\udf05":"\u0138","\ud835\udf18":"\u0138","\ud835\udf3f":"\u0138","\ud835\udf52":"\u0138","\ud835\udf79":"\u0138","\ud835\udf8c":"\u0138","\ud835\udfb3":"\u0138","\ud835\udfc6":"\u0138","\u2c95":"\u0138","\u043a":"\u0138","\uabb6":"\u0138","\u049b":"\u0138\u0329","\u049f":"\u0138\u0335","\ud835\udc2b":"r","\ud835\udc5f":"r","\ud835\udc93":"r","\ud835\udcc7":"r","\ud835\udcfb":"r","\ud835\udd2f":"r","\ud835\udd63":"r","\ud835\udd97":"r","\ud835\uddcb":"r","\ud835\uddff":"r","\ud835\ude33":"r","\ud835\ude67":"r","\ud835\ude9b":"r","\uab47":"r","\uab48":"r","\u1d26":"r","\u2c85":"r","\u0433":"r","\uab81":"r","\ud834\ude16":"R","\u211b":"R","\u211c":"R","\u211d":"R","\ud835\udc11":"R","\ud835\udc45":"R","\ud835\udc79":"R","\ud835\udce1":"R","\ud835\udd7d":"R","\ud835\uddb1":"R","\ud835\udde5":"R","\ud835\ude19":"R","\ud835\ude4d":"R","\ud835\ude81":"R","\u01a6":"R","\u13a1":"R","\u13d2":"R","\ud801\udcb4":"R","\u1587":"R","\ua4e3":"R","\ud81b\udf35":"R","\u027d":"r\u0328","\u027c":"r\u0329","\u024d":"r\u0335","\u0493":"r\u0335","\u1d72":"r\u0334","\u0491":"r\'","\ud806\udce3":"rn","m":"rn","\u217f":"rn","\ud835\udc26":"rn","\ud835\udc5a":"rn","\ud835\udc8e":"rn","\ud835\udcc2":"rn","\ud835\udcf6":"rn","\ud835\udd2a":"rn","\ud835\udd5e":"rn","\ud835\udd92":"rn","\ud835\uddc6":"rn","\ud835\uddfa":"rn","\ud835\ude2e":"rn","\ud835\ude62":"rn","\ud835\ude96":"rn","\ud805\udf00":"rn","\u20a5":"rn\u0338","\u0271":"rn\u0326","\u1d6f":"rn\u0334","\u20a8":"Rs","\uab71":"\u0280","\uaba2":"\u0280","\u044f":"\u1d19","\u1d73":"\u027e\u0334","\u2129":"\u027f","\uff53":"s","\ud835\udc2c":"s","\ud835\udc60":"s","\ud835\udc94":"s","\ud835\udcc8":"s","\ud835\udcfc":"s","\ud835\udd30":"s","\ud835\udd64":"s","\ud835\udd98":"s","\ud835\uddcc":"s","\ud835\ude00":"s","\ud835\ude34":"s","\ud835\ude68":"s","\ud835\ude9c":"s","\ua731":"s","\u01bd":"s","\u0455":"s","\uabaa":"s","\ud806\udcc1":"s","\ud801\udc48":"s","\uff33":"S","\ud835\udc12":"S","\ud835\udc46":"S","\ud835\udc7a":"S","\ud835\udcae":"S","\ud835\udce2":"S","\ud835\udd16":"S","\ud835\udd4a":"S","\ud835\udd7e":"S","\ud835\uddb2":"S","\ud835\udde6":"S","\ud835\ude1a":"S","\ud835\ude4e":"S","\ud835\ude82":"S","\u0405":"S","\u054f":"S","\u13d5":"S","\u13da":"S","\ua4e2":"S","\ud81b\udf3a":"S","\ud800\ude96":"S","\ud801\udc20":"S","\u0282":"s\u0328","\u1d74":"s\u0334","\ua7b5":"\xdf","\u03b2":"\xdf","\u03d0":"\xdf","\ud835\udec3":"\xdf","\ud835\udefd":"\xdf","\ud835\udf37":"\xdf","\ud835\udf71":"\xdf","\ud835\udfab":"\xdf","\u13f0":"\xdf","\ud83d\udf5c":"sss","\ufb06":"st","\u222b":"\u0283","\uab4d":"\u0283","\u2211":"\u01a9","\u2140":"\u01a9","\u03a3":"\u01a9","\ud835\udeba":"\u01a9","\ud835\udef4":"\u01a9","\ud835\udf2e":"\u01a9","\ud835\udf68":"\u01a9","\ud835\udfa2":"\u01a9","\u2d49":"\u01a9","\u222c":"\u0283\u0283","\u222d":"\u0283\u0283\u0283","\u2a0c":"\u0283\u0283\u0283\u0283","\ud835\udc2d":"t","\ud835\udc61":"t","\ud835\udc95":"t","\ud835\udcc9":"t","\ud835\udcfd":"t","\ud835\udd31":"t","\ud835\udd65":"t","\ud835\udd99":"t","\ud835\uddcd":"t","\ud835\ude01":"t","\ud835\ude35":"t","\ud835\ude69":"t","\ud835\ude9d":"t","\u22a4":"T","\u27d9":"T","\ud83d\udf68":"T","\uff34":"T","\ud835\udc13":"T","\ud835\udc47":"T","\ud835\udc7b":"T","\ud835\udcaf":"T","\ud835\udce3":"T","\ud835\udd17":"T","\ud835\udd4b":"T","\ud835\udd7f":"T","\ud835\uddb3":"T","\ud835\udde7":"T","\ud835\ude1b":"T","\ud835\ude4f":"T","\ud835\ude83":"T","\u03a4":"T","\ud835\udebb":"T","\ud835\udef5":"T","\ud835\udf2f":"T","\ud835\udf69":"T","\ud835\udfa3":"T","\u2ca6":"T","\u0422":"T","\u13a2":"T","\ua4d4":"T","\ud81b\udf0a":"T","\ud806\udcbc":"T","\ud800\ude97":"T","\ud800\udeb1":"T","\ud800\udf15":"T","\u01ad":"t\u0314","\u2361":"T\u0308","\u023e":"T\u0338","\u021a":"\u0162","\u01ae":"T\u0328","\u04ac":"T\u0329","\u20ae":"T\u20eb","\u0167":"t\u0335","\u0166":"T\u0335","\u1d75":"t\u0334","\u10a0":"\ua786","\ua728":"T3","\u02a8":"t\u0255","\u2121":"TEL","\ua777":"tf","\u02a6":"ts","\u02a7":"t\u0283","\ua729":"t\u021d","\u03c4":"\u1d1b","\ud835\uded5":"\u1d1b","\ud835\udf0f":"\u1d1b","\ud835\udf49":"\u1d1b","\ud835\udf83":"\u1d1b","\ud835\udfbd":"\u1d1b","\u0442":"\u1d1b","\uab72":"\u1d1b","\u04ad":"\u1d1b\u0329","\u0163":"\u01ab","\u021b":"\u01ab","\u13bf":"\u01ab","\ud835\udc2e":"u","\ud835\udc62":"u","\ud835\udc96":"u","\ud835\udcca":"u","\ud835\udcfe":"u","\ud835\udd32":"u","\ud835\udd66":"u","\ud835\udd9a":"u","\ud835\uddce":"u","\ud835\ude02":"u","\ud835\ude36":"u","\ud835\ude6a":"u","\ud835\ude9e":"u","\ua79f":"u","\u1d1c":"u","\uab4e":"u","\uab52":"u","\u028b":"u","\u03c5":"u","\ud835\uded6":"u","\ud835\udf10":"u","\ud835\udf4a":"u","\ud835\udf84":"u","\ud835\udfbe":"u","\u057d":"u","\ud801\udcf6":"u","\ud806\udcd8":"u","\u222a":"U","\u22c3":"U","\ud835\udc14":"U","\ud835\udc48":"U","\ud835\udc7c":"U","\ud835\udcb0":"U","\ud835\udce4":"U","\ud835\udd18":"U","\ud835\udd4c":"U","\ud835\udd80":"U","\ud835\uddb4":"U","\ud835\udde8":"U","\ud835\ude1c":"U","\ud835\ude50":"U","\ud835\ude84":"U","\u054d":"U","\u1200":"U","\ud801\udcce":"U","\u144c":"U","\ua4f4":"U","\ud81b\udf42":"U","\ud806\udcb8":"U","\u01d4":"\u016d","\u01d3":"\u016c","\u1d7e":"u\u0335","\uab9c":"u\u0335","\u0244":"U\u0335","\u13cc":"U\u0335","\u1458":"U\xb7","\u1467":"U\'","\u1d6b":"ue","\uab63":"uo","\u1e43":"\uab51","\u057a":"\u0270","\u1223":"\u0270","\u2127":"\u01b1","\u162e":"\u01b1","\u1634":"\u01b1","\u1d7f":"\u028a\u0335","\u2228":"v","\u22c1":"v","\uff56":"v","\u2174":"v","\ud835\udc2f":"v","\ud835\udc63":"v","\ud835\udc97":"v","\ud835\udccb":"v","\ud835\udcff":"v","\ud835\udd33":"v","\ud835\udd67":"v","\ud835\udd9b":"v","\ud835\uddcf":"v","\ud835\ude03":"v","\ud835\ude37":"v","\ud835\ude6b":"v","\ud835\ude9f":"v","\u1d20":"v","\u03bd":"v","\ud835\udece":"v","\ud835\udf08":"v","\ud835\udf42":"v","\ud835\udf7c":"v","\ud835\udfb6":"v","\u0475":"v","\u05d8":"v","\ud805\udf06":"v","\uaba9":"v","\ud806\udcc0":"v","\ud834\ude0d":"V","\u0667":"V","\u06f7":"V","\u2164":"V","\ud835\udc15":"V","\ud835\udc49":"V","\ud835\udc7d":"V","\ud835\udcb1":"V","\ud835\udce5":"V","\ud835\udd19":"V","\ud835\udd4d":"V","\ud835\udd81":"V","\ud835\uddb5":"V","\ud835\udde9":"V","\ud835\ude1d":"V","\ud835\ude51":"V","\ud835\ude85":"V","\u0474":"V","\u2d38":"V","\u13d9":"V","\u142f":"V","\ua6df":"V","\ua4e6":"V","\ud81b\udf08":"V","\ud806\udca0":"V","\ud801\udd1d":"V","\ud800\udd97":"V\u0335","\u143b":"V\xb7","\ud83d\udf6c":"VB","\u2175":"vi","\u2176":"vii","\u2177":"viii","\u2165":"Vl","\u2166":"Vll","\u2167":"Vlll","\ud83d\udf08":"V\u1de4","\u1d27":"\u028c","\ud801\udcd8":"\u028c","\u0668":"\u0245","\u06f8":"\u0245","\u039b":"\u0245","\ud835\udeb2":"\u0245","\ud835\udeec":"\u0245","\ud835\udf26":"\u0245","\ud835\udf60":"\u0245","\ud835\udf9a":"\u0245","\u041b":"\u0245","\u2d37":"\u0245","\ud801\udcb0":"\u0245","\u1431":"\u0245","\ua6ce":"\u0245","\ua4e5":"\u0245","\ud81b\udf3d":"\u0245","\ud800\ude8d":"\u0245","\u04c5":"\u0245\u0326","\u143d":"\u0245\xb7","\u026f":"w","\ud835\udc30":"w","\ud835\udc64":"w","\ud835\udc98":"w","\ud835\udccc":"w","\ud835\udd00":"w","\ud835\udd34":"w","\ud835\udd68":"w","\ud835\udd9c":"w","\ud835\uddd0":"w","\ud835\ude04":"w","\ud835\ude38":"w","\ud835\ude6c":"w","\ud835\udea0":"w","\u1d21":"w","\u0461":"w","\u051d":"w","\u0561":"w","\ud805\udf0a":"w","\ud805\udf0e":"w","\ud805\udf0f":"w","\uab83":"w","\ud806\udcef":"W","\ud806\udce6":"W","\ud835\udc16":"W","\ud835\udc4a":"W","\ud835\udc7e":"W","\ud835\udcb2":"W","\ud835\udce6":"W","\ud835\udd1a":"W","\ud835\udd4e":"W","\ud835\udd82":"W","\ud835\uddb6":"W","\ud835\uddea":"W","\ud835\ude1e":"W","\ud835\ude52":"W","\ud835\ude86":"W","\u051c":"W","\u13b3":"W","\u13d4":"W","\ua4ea":"W","\u047d":"w\u0486\u0487","\ud805\udcc5":"w\u0307","\u20a9":"W\u0335","\ua761":"w\u0326","\u1d0d":"\u028d","\u043c":"\u028d","\uab87":"\u028d","\u04ce":"\u028d\u0326","\u166e":"x","\xd7":"x","\u292b":"x","\u292c":"x","\u2a2f":"x","\uff58":"x","\u2179":"x","\ud835\udc31":"x","\ud835\udc65":"x","\ud835\udc99":"x","\ud835\udccd":"x","\ud835\udd01":"x","\ud835\udd35":"x","\ud835\udd69":"x","\ud835\udd9d":"x","\ud835\uddd1":"x","\ud835\ude05":"x","\ud835\ude39":"x","\ud835\ude6d":"x","\ud835\udea1":"x","\u0445":"x","\u1541":"x","\u157d":"x","\u2def":"\u036f","\u166d":"X","\u2573":"X","\ud800\udf22":"X","\ud806\udcec":"X","\uff38":"X","\u2169":"X","\ud835\udc17":"X","\ud835\udc4b":"X","\ud835\udc7f":"X","\ud835\udcb3":"X","\ud835\udce7":"X","\ud835\udd1b":"X","\ud835\udd4f":"X","\ud835\udd83":"X","\ud835\uddb7":"X","\ud835\uddeb":"X","\ud835\ude1f":"X","\ud835\ude53":"X","\ud835\ude87":"X","\ua7b3":"X","\u03a7":"X","\ud835\udebe":"X","\ud835\udef8":"X","\ud835\udf32":"X","\ud835\udf6c":"X","\ud835\udfa6":"X","\u2cac":"X","\u0425":"X","\u2d5d":"X","\u16b7":"X","\ua4eb":"X","\ud800\ude90":"X","\ud800\udeb4":"X","\ud800\udf17":"X","\ud801\udd27":"X","\u2a30":"x\u0307","\u04b2":"X\u0329","\ud800\udd96":"X\u0335","\u217a":"xi","\u217b":"xii","\u216a":"Xl","\u216b":"Xll","\u0263":"y","\u1d8c":"y","\uff59":"y","\ud835\udc32":"y","\ud835\udc66":"y","\ud835\udc9a":"y","\ud835\udcce":"y","\ud835\udd02":"y","\ud835\udd36":"y","\ud835\udd6a":"y","\ud835\udd9e":"y","\ud835\uddd2":"y","\ud835\ude06":"y","\ud835\ude3a":"y","\ud835\ude6e":"y","\ud835\udea2":"y","\u028f":"y","\u1eff":"y","\uab5a":"y","\u03b3":"y","\u213d":"y","\ud835\udec4":"y","\ud835\udefe":"y","\ud835\udf38":"y","\ud835\udf72":"y","\ud835\udfac":"y","\u0443":"y","\u04af":"y","\u10e7":"y","\ud806\udcdc":"y","\uff39":"Y","\ud835\udc18":"Y","\ud835\udc4c":"Y","\ud835\udc80":"Y","\ud835\udcb4":"Y","\ud835\udce8":"Y","\ud835\udd1c":"Y","\ud835\udd50":"Y","\ud835\udd84":"Y","\ud835\uddb8":"Y","\ud835\uddec":"Y","\ud835\ude20":"Y","\ud835\ude54":"Y","\ud835\ude88":"Y","\u03a5":"Y","\u03d2":"Y","\ud835\udebc":"Y","\ud835\udef6":"Y","\ud835\udf30":"Y","\ud835\udf6a":"Y","\ud835\udfa4":"Y","\u2ca8":"Y","\u0423":"Y","\u04ae":"Y","\u13a9":"Y","\u13bd":"Y","\ua4ec":"Y","\ud81b\udf43":"Y","\ud806\udca4":"Y","\ud800\udeb2":"Y","\u01b4":"y\u0314","\u024f":"y\u0335","\u04b1":"y\u0335","\xa5":"Y\u0335","\u024e":"Y\u0335","\u04b0":"Y\u0335","\u0292":"\u021d","\ua76b":"\u021d","\u2ccd":"\u021d","\u04e1":"\u021d","\u10f3":"\u021d","\ud835\udc33":"z","\ud835\udc67":"z","\ud835\udc9b":"z","\ud835\udccf":"z","\ud835\udd03":"z","\ud835\udd37":"z","\ud835\udd6b":"z","\ud835\udd9f":"z","\ud835\uddd3":"z","\ud835\ude07":"z","\ud835\ude3b":"z","\ud835\ude6f":"z","\ud835\udea3":"z","\u1d22":"z","\uab93":"z","\ud806\udcc4":"z","\ud800\udef5":"Z","\ud806\udce5":"Z","\uff3a":"Z","\u2124":"Z","\u2128":"Z","\ud835\udc19":"Z","\ud835\udc4d":"Z","\ud835\udc81":"Z","\ud835\udcb5":"Z","\ud835\udce9":"Z","\ud835\udd85":"Z","\ud835\uddb9":"Z","\ud835\udded":"Z","\ud835\ude21":"Z","\ud835\ude55":"Z","\ud835\ude89":"Z","\u0396":"Z","\ud835\udead":"Z","\ud835\udee7":"Z","\ud835\udf21":"Z","\ud835\udf5b":"Z","\ud835\udf95":"Z","\u13c3":"Z","\ua4dc":"Z","\ud806\udca9":"Z","\u0290":"z\u0328","\u01b6":"z\u0335","\u01b5":"Z\u0335","\u0225":"z\u0326","\u0224":"Z\u0326","\u1d76":"z\u0334","\u01bf":"\xfe","\u03f8":"\xfe","\u03f7":"\xde","\ud801\udcc4":"\xde","\u2079":"\ua770","\u1d24":"\u01a8","\u03e9":"\u01a8","\ua645":"\u01a8","\u044c":"\u0185","\uab9f":"\u0185","\u044b":"\u0185i","\uab7e":"\u0242","\u02e4":"\u02c1","\ua6cd":"\u02a1","\u2299":"\u0298","\u2609":"\u0298","\u2a00":"\u0298","\ua668":"\u0298","\u2d59":"\u0298","\ud801\udcc3":"\u0298","\u213e":"\u0393","\ud835\udeaa":"\u0393","\ud835\udee4":"\u0393","\ud835\udf1e":"\u0393","\ud835\udf58":"\u0393","\ud835\udf92":"\u0393","\u2c84":"\u0393","\u0413":"\u0393","\u13b1":"\u0393","\u14a5":"\u0393","\ud81b\udf07":"\u0393","\u0492":"\u0393\u0335","\u14af":"\u0393\xb7","\u0490":"\u0393\'","\u2206":"\u0394","\u25b3":"\u0394","\ud83d\udf02":"\u0394","\ud835\udeab":"\u0394","\ud835\udee5":"\u0394","\ud835\udf1f":"\u0394","\ud835\udf59":"\u0394","\ud835\udf93":"\u0394","\u2c86":"\u0394","\u2d60":"\u0394","\u1403":"\u0394","\ud81b\udf1a":"\u0394","\ud800\ude85":"\u0394","\ud800\udea3":"\u0394","\u2359":"\u0394\u0332","\u140f":"\u0394\xb7","\u142c":"\u0394\u1420","\ud835\udfcb":"\u03dd","\ud835\udec7":"\u03b6","\ud835\udf01":"\u03b6","\ud835\udf3b":"\u03b6","\ud835\udf75":"\u03b6","\ud835\udfaf":"\u03b6","\u2ce4":"\u03d7","\ud835\udecc":"\u03bb","\ud835\udf06":"\u03bb","\ud835\udf40":"\u03bb","\ud835\udf7a":"\u03bb","\ud835\udfb4":"\u03bb","\u2c96":"\u03bb","\ud801\udcdb":"\u03bb","\xb5":"\u03bc","\ud835\udecd":"\u03bc","\ud835\udf07":"\u03bc","\ud835\udf41":"\u03bc","\ud835\udf7b":"\u03bc","\ud835\udfb5":"\u03bc","\ud835\udecf":"\u03be","\ud835\udf09":"\u03be","\ud835\udf43":"\u03be","\ud835\udf7d":"\u03be","\ud835\udfb7":"\u03be","\ud835\udeb5":"\u039e","\ud835\udeef":"\u039e","\ud835\udf29":"\u039e","\ud835\udf63":"\u039e","\ud835\udf9d":"\u039e","\u03d6":"\u03c0","\u213c":"\u03c0","\ud835\uded1":"\u03c0","\ud835\udee1":"\u03c0","\ud835\udf0b":"\u03c0","\ud835\udf1b":"\u03c0","\ud835\udf45":"\u03c0","\ud835\udf55":"\u03c0","\ud835\udf7f":"\u03c0","\ud835\udf8f":"\u03c0","\ud835\udfb9":"\u03c0","\ud835\udfc9":"\u03c0","\u1d28":"\u03c0","\u043f":"\u03c0","\u220f":"\u03a0","\u213f":"\u03a0","\ud835\udeb7":"\u03a0","\ud835\udef1":"\u03a0","\ud835\udf2b":"\u03a0","\ud835\udf65":"\u03a0","\ud835\udf9f":"\u03a0","\u2ca0":"\u03a0","\u041f":"\u03a0","\ua6db":"\u03a0","\ud800\udead":"\u03d8","\ud800\udf12":"\u03d8","\u03db":"\u03c2","\ud835\uded3":"\u03c2","\ud835\udf0d":"\u03c2","\ud835\udf47":"\u03c2","\ud835\udf81":"\u03c2","\ud835\udfbb":"\u03c2","\ud835\udebd":"\u03a6","\ud835\udef7":"\u03a6","\ud835\udf31":"\u03a6","\ud835\udf6b":"\u03a6","\ud835\udfa5":"\u03a6","\u2caa":"\u03a6","\u0424":"\u03a6","\u0553":"\u03a6","\u1240":"\u03a6","\u16f0":"\u03a6","\ud800\udeb3":"\u03a6","\uab53":"\u03c7","\uab55":"\u03c7","\ud835\uded8":"\u03c7","\ud835\udf12":"\u03c7","\ud835\udf4c":"\u03c7","\ud835\udf86":"\u03c7","\ud835\udfc0":"\u03c7","\u2cad":"\u03c7","\ud835\uded9":"\u03c8","\ud835\udf13":"\u03c8","\ud835\udf4d":"\u03c8","\ud835\udf87":"\u03c8","\ud835\udfc1":"\u03c8","\u0471":"\u03c8","\ud801\udcf9":"\u03c8","\ud835\udebf":"\u03a8","\ud835\udef9":"\u03a8","\ud835\udf33":"\u03a8","\ud835\udf6d":"\u03a8","\ud835\udfa7":"\u03a8","\u2cae":"\u03a8","\u0470":"\u03a8","\ud801\udcd1":"\u03a8","\u16d8":"\u03a8","\ud800\udeb5":"\u03a8","\u2375":"\u03c9","\ua7b7":"\u03c9","\ud835\udeda":"\u03c9","\ud835\udf14":"\u03c9","\ud835\udf4e":"\u03c9","\ud835\udf88":"\u03c9","\ud835\udfc2":"\u03c9","\u2cb1":"\u03c9","\ua64d":"\u03c9","\u2126":"\u03a9","\ud835\udec0":"\u03a9","\ud835\udefa":"\u03a9","\ud835\udf34":"\u03a9","\ud835\udf6e":"\u03a9","\ud835\udfa8":"\u03a9","\u162f":"\u03a9","\u1635":"\u03a9","\ud800\udeb6":"\u03a9","\u2379":"\u03c9\u0332","\u1f7d":"\u1ff4","\u2630":"\u2cb6","\u2cdc":"\u03ec","\u0497":"\u0436\u0329","\u0496":"\u0416\u0329","\ud834\ude0b":"\u0418","\u0376":"\u0418","\ua6a1":"\u0418","\ud801\udc25":"\u0418","\u0419":"\u040d","\u048a":"\u040d\u0326","\u045d":"\u0439","\u048b":"\u0439\u0326","\ud801\udcbc":"\u04c3","\u1d2b":"\u043b","\u04c6":"\u043b\u0326","\uab60":"\u0459","\ud801\udceb":"\ua669","\u1dee":"\u2dec","\ud801\udccd":"\u040b","\ud834\ude02":"\u04fe","\ud834\ude22":"\u0460","\u13c7":"\u0460","\u15ef":"\u0460","\u047c":"\u0460\u0486\u0487","\u18ed":"\u0460\xb7","\ua7b6":"\ua64c","\u04cc":"\u04b7","\u04cb":"\u04b6","\u04be":"\u04bc\u0328","\u2cbd":"\u0448","\u2cbc":"\u0428","\ua650":"\u042al","\u2108":"\u042d","\ud83d\udf01":"\ua658","\ud81b\udf1c":"\ua658","\ua992":"\u2c3f","\u0587":"\u0565\u0582","\u1294":"\u0571","\ufb14":"\u0574\u0565","\ufb15":"\u0574\u056b","\ufb17":"\u0574\u056d","\ufb13":"\u0574\u0576","\u2229":"\u0548","\u22c2":"\u0548","\ud834\ude45":"\u0548","\u1260":"\u0548","\u144e":"\u0548","\ua4f5":"\u0548","\u145a":"\u0548\xb7","\u1468":"\u0548\'","\ufb16":"\u057e\u0576","\u20bd":"\u0554","\u02d3":"\u0559","\u02bf":"\u0559","\u2135":"\u05d0","\ufb21":"\u05d0","\ufb2f":"\ufb2e","\ufb30":"\ufb2e","\ufb4f":"\u05d0\u05dc","\u2136":"\u05d1","\u2137":"\u05d2","\u2138":"\u05d3","\ufb22":"\u05d3","\ufb23":"\u05d4","\ufb39":"\ufb1d","\ufb24":"\u05db","\ufb25":"\u05dc","\ufb26":"\u05dd","\ufb20":"\u05e2","\ufb27":"\u05e8","\ufb2b":"\ufb2a","\ufb49":"\ufb2a","\ufb2d":"\ufb2c","\ufb28":"\u05ea","\ufe80":"\u0621","\u06fd":"\u0621\u0348","\ufe82":"\u0622","\ufe81":"\u0622","\ufb51":"\u0671","\ufb50":"\u0671","\ud83b\ude01":"\u0628","\ud83b\ude21":"\u0628","\ud83b\ude61":"\u0628","\ud83b\ude81":"\u0628","\ud83b\udea1":"\u0628","\ufe91":"\u0628","\ufe92":"\u0628","\ufe90":"\u0628","\ufe8f":"\u0628","\u0751":"\u0628\u06db","\u08b6":"\u0628\u06e2","\u08a1":"\u0628\u0654","\ufca0":"\u0628o","\ufce2":"\u0628o","\ufc9c":"\u0628\u062c","\ufc05":"\u0628\u062c","\ufc9d":"\u0628\u062d","\ufc06":"\u0628\u062d","\ufdc2":"\u0628\u062d\u0649","\ufc9e":"\u0628\u062e","\ufc07":"\u0628\u062e","\ufcd2":"\u0628\u062e","\ufc4b":"\u0628\u062e","\ufd9e":"\u0628\u062e\u0649","\ufc6a":"\u0628\u0631","\ufc6b":"\u0628\u0632","\ufc9f":"\u0628\u0645","\ufce1":"\u0628\u0645","\ufc6c":"\u0628\u0645","\ufc08":"\u0628\u0645","\ufc6d":"\u0628\u0646","\ufc6e":"\u0628\u0649","\ufc09":"\u0628\u0649","\ufc6f":"\u0628\u0649","\ufc0a":"\u0628\u0649","\ufb54":"\u067b","\ufb55":"\u067b","\ufb53":"\u067b","\ufb52":"\u067b","\u06d0":"\u067b","\ufbe6":"\u067b","\ufbe7":"\u067b","\ufbe5":"\u067b","\ufbe4":"\u067b","\ufb5c":"\u0680","\ufb5d":"\u0680","\ufb5b":"\u0680","\ufb5a":"\u0680","\u08a9":"\u0754","\u0767":"\u0754","\u2365":"\u0629","\xf6":"\u0629","\ufe94":"\u0629","\ufe93":"\u0629","\u06c3":"\u0629","\ud83b\ude15":"\u062a","\ud83b\ude35":"\u062a","\ud83b\ude75":"\u062a","\ud83b\ude95":"\u062a","\ud83b\udeb5":"\u062a","\ufe97":"\u062a","\ufe98":"\u062a","\ufe96":"\u062a","\ufe95":"\u062a","\ufca5":"\u062ao","\ufce4":"\u062ao","\ufca1":"\u062a\u062c","\ufc0b":"\u062a\u062c","\ufd50":"\u062a\u062c\u0645","\ufda0":"\u062a\u062c\u0649","\ufd9f":"\u062a\u062c\u0649","\ufca2":"\u062a\u062d","\ufc0c":"\u062a\u062d","\ufd52":"\u062a\u062d\u062c","\ufd51":"\u062a\u062d\u062c","\ufd53":"\u062a\u062d\u0645","\ufca3":"\u062a\u062e","\ufc0d":"\u062a\u062e","\ufd54":"\u062a\u062e\u0645","\ufda2":"\u062a\u062e\u0649","\ufda1":"\u062a\u062e\u0649","\ufc70":"\u062a\u0631","\ufc71":"\u062a\u0632","\ufca4":"\u062a\u0645","\ufce3":"\u062a\u0645","\ufc72":"\u062a\u0645","\ufc0e":"\u062a\u0645","\ufd55":"\u062a\u0645\u062c","\ufd56":"\u062a\u0645\u062d","\ufd57":"\u062a\u0645\u062e","\ufda4":"\u062a\u0645\u0649","\ufda3":"\u062a\u0645\u0649","\ufc73":"\u062a\u0646","\ufc74":"\u062a\u0649","\ufc0f":"\u062a\u0649","\ufc75":"\u062a\u0649","\ufc10":"\u062a\u0649","\ufb60":"\u067a","\ufb61":"\u067a","\ufb5f":"\u067a","\ufb5e":"\u067a","\ufb64":"\u067f","\ufb65":"\u067f","\ufb63":"\u067f","\ufb62":"\u067f","\ud83b\ude02":"\u062c","\ud83b\ude22":"\u062c","\ud83b\ude42":"\u062c","\ud83b\ude62":"\u062c","\ud83b\ude82":"\u062c","\ud83b\udea2":"\u062c","\ufe9f":"\u062c","\ufea0":"\u062c","\ufe9e":"\u062c","\ufe9d":"\u062c","\ufca7":"\u062c\u062d","\ufc15":"\u062c\u062d","\ufda6":"\u062c\u062d\u0649","\ufdbe":"\u062c\u062d\u0649","\ufdfb":"\u062c\u0644 \u062c\u0644l\u0644o","\ufca8":"\u062c\u0645","\ufc16":"\u062c\u0645","\ufd59":"\u062c\u0645\u062d","\ufd58":"\u062c\u0645\u062d","\ufda7":"\u062c\u0645\u0649","\ufda5":"\u062c\u0645\u0649","\ufd1d":"\u062c\u0649","\ufd01":"\u062c\u0649","\ufd1e":"\u062c\u0649","\ufd02":"\u062c\u0649","\ufb78":"\u0683","\ufb79":"\u0683","\ufb77":"\u0683","\ufb76":"\u0683","\ufb74":"\u0684","\ufb75":"\u0684","\ufb73":"\u0684","\ufb72":"\u0684","\ufb7c":"\u0686","\ufb7d":"\u0686","\ufb7b":"\u0686","\ufb7a":"\u0686","\ufb80":"\u0687","\ufb81":"\u0687","\ufb7f":"\u0687","\ufb7e":"\u0687","\ud83b\ude07":"\u062d","\ud83b\ude27":"\u062d","\ud83b\ude47":"\u062d","\ud83b\ude67":"\u062d","\ud83b\ude87":"\u062d","\ud83b\udea7":"\u062d","\ufea3":"\u062d","\ufea4":"\u062d","\ufea2":"\u062d","\ufea1":"\u062d","\u0685":"\u062d\u06db","\u0681":"\u062d\u0654","\u0772":"\u062d\u0654","\ufca9":"\u062d\u062c","\ufc17":"\u062d\u062c","\ufdbf":"\u062d\u062c\u0649","\ufcaa":"\u062d\u0645","\ufc18":"\u062d\u0645","\ufd5b":"\u062d\u0645\u0649","\ufd5a":"\u062d\u0645\u0649","\ufd1b":"\u062d\u0649","\ufcff":"\u062d\u0649","\ufd1c":"\u062d\u0649","\ufd00":"\u062d\u0649","\ud83b\ude17":"\u062e","\ud83b\ude37":"\u062e","\ud83b\ude57":"\u062e","\ud83b\ude77":"\u062e","\ud83b\ude97":"\u062e","\ud83b\udeb7":"\u062e","\ufea7":"\u062e","\ufea8":"\u062e","\ufea6":"\u062e","\ufea5":"\u062e","\ufcab":"\u062e\u062c","\ufc19":"\u062e\u062c","\ufc1a":"\u062e\u062d","\ufcac":"\u062e\u0645","\ufc1b":"\u062e\u0645","\ufd1f":"\u062e\u0649","\ufd03":"\u062e\u0649","\ufd20":"\u062e\u0649","\ufd04":"\u062e\u0649","\ud800\udee1":"\u062f","\ud83b\ude03":"\u062f","\ud83b\ude83":"\u062f","\ud83b\udea3":"\u062f","\ufeaa":"\u062f","\ufea9":"\u062f","\u0688":"\u062f\u0615","\ufb89":"\u062f\u0615","\ufb88":"\u062f\u0615","\u068e":"\u062f\u06db","\ufb87":"\u062f\u06db","\ufb86":"\u062f\u06db","\u06ee":"\u062f\u0302","\u08ae":"\u062f\u0324\u0323","\ud83b\ude18":"\u0630","\ud83b\ude98":"\u0630","\ud83b\udeb8":"\u0630","\ufeac":"\u0630","\ufeab":"\u0630","\ufc5b":"\u0630\u0670","\u068b":"\u068a\u0615","\ufb85":"\u068c","\ufb84":"\u068c","\ufb83":"\u068d","\ufb82":"\u068d","\ud83b\ude13":"\u0631","\ud83b\ude93":"\u0631","\ud83b\udeb3":"\u0631","\ufeae":"\u0631","\ufead":"\u0631","\u0691":"\u0631\u0615","\ufb8d":"\u0631\u0615","\ufb8c":"\u0631\u0615","\u0698":"\u0631\u06db","\ufb8b":"\u0631\u06db","\ufb8a":"\u0631\u06db","\u0692":"\u0631\u0306","\u08b9":"\u0631\u0306\u0307","\u06ef":"\u0631\u0302","\u076c":"\u0631\u0654","\ufc5c":"\u0631\u0670","\ufdf6":"\u0631\u0633\u0648\u0644","\ufdfc":"\u0631\u0649l\u0644","\ud83b\ude06":"\u0632","\ud83b\ude86":"\u0632","\ud83b\udea6":"\u0632","\ufeb0":"\u0632","\ufeaf":"\u0632","\u08b2":"\u0632\u0302","\u0771":"\u0697\u0615","\ud83b\ude0e":"\u0633","\ud83b\ude2e":"\u0633","\ud83b\ude4e":"\u0633","\ud83b\ude6e":"\u0633","\ud83b\ude8e":"\u0633","\ud83b\udeae":"\u0633","\ufeb3":"\u0633","\ufeb4":"\u0633","\ufeb2":"\u0633","\ufeb1":"\u0633","\u0634":"\u0633\u06db","\ud83b\ude14":"\u0633\u06db","\ud83b\ude34":"\u0633\u06db","\ud83b\ude54":"\u0633\u06db","\ud83b\ude74":"\u0633\u06db","\ud83b\ude94":"\u0633\u06db","\ud83b\udeb4":"\u0633\u06db","\ufeb7":"\u0633\u06db","\ufeb8":"\u0633\u06db","\ufeb6":"\u0633\u06db","\ufeb5":"\u0633\u06db","\u077e":"\u0633\u0302","\ufd31":"\u0633o","\ufce8":"\u0633o","\ufd32":"\u0633\u06dbo","\ufcea":"\u0633\u06dbo","\ufcad":"\u0633\u062c","\ufd34":"\u0633\u062c","\ufc1c":"\u0633\u062c","\ufd2d":"\u0633\u06db\u062c","\ufd37":"\u0633\u06db\u062c","\ufd25":"\u0633\u06db\u062c","\ufd09":"\u0633\u06db\u062c","\ufd5d":"\u0633\u062c\u062d","\ufd5e":"\u0633\u062c\u0649","\ufd69":"\u0633\u06db\u062c\u0649","\ufcae":"\u0633\u062d","\ufd35":"\u0633\u062d","\ufc1d":"\u0633\u062d","\ufd2e":"\u0633\u06db\u062d","\ufd38":"\u0633\u06db\u062d","\ufd26":"\u0633\u06db\u062d","\ufd0a":"\u0633\u06db\u062d","\ufd5c":"\u0633\u062d\u062c","\ufd68":"\u0633\u06db\u062d\u0645","\ufd67":"\u0633\u06db\u062d\u0645","\ufdaa":"\u0633\u06db\u062d\u0649","\ufcaf":"\u0633\u062e","\ufd36":"\u0633\u062e","\ufc1e":"\u0633\u062e","\ufd2f":"\u0633\u06db\u062e","\ufd39":"\u0633\u06db\u062e","\ufd27":"\u0633\u06db\u062e","\ufd0b":"\u0633\u06db\u062e","\ufda8":"\u0633\u062e\u0649","\ufdc6":"\u0633\u062e\u0649","\ufd2a":"\u0633\u0631","\ufd0e":"\u0633\u0631","\ufd29":"\u0633\u06db\u0631","\ufd0d":"\u0633\u06db\u0631","\ufcb0":"\u0633\u0645","\ufce7":"\u0633\u0645","\ufc1f":"\u0633\u0645","\ufd30":"\u0633\u06db\u0645","\ufce9":"\u0633\u06db\u0645","\ufd28":"\u0633\u06db\u0645","\ufd0c":"\u0633\u06db\u0645","\ufd61":"\u0633\u0645\u062c","\ufd60":"\u0633\u0645\u062d","\ufd5f":"\u0633\u0645\u062d","\ufd6b":"\u0633\u06db\u0645\u062e","\ufd6a":"\u0633\u06db\u0645\u062e","\ufd63":"\u0633\u0645\u0645","\ufd62":"\u0633\u0645\u0645","\ufd6d":"\u0633\u06db\u0645\u0645","\ufd6c":"\u0633\u06db\u0645\u0645","\ufd17":"\u0633\u0649","\ufcfb":"\u0633\u0649","\ufd18":"\u0633\u0649","\ufcfc":"\u0633\u0649","\ufd19":"\u0633\u06db\u0649","\ufcfd":"\u0633\u06db\u0649","\ufd1a":"\u0633\u06db\u0649","\ufcfe":"\u0633\u06db\u0649","\ud800\udef2":"\u0635","\ud83b\ude11":"\u0635","\ud83b\ude31":"\u0635","\ud83b\ude51":"\u0635","\ud83b\ude71":"\u0635","\ud83b\ude91":"\u0635","\ud83b\udeb1":"\u0635","\ufebb":"\u0635","\ufebc":"\u0635","\ufeba":"\u0635","\ufeb9":"\u0635","\u069e":"\u0635\u06db","\u08af":"\u0635\u0324\u0323","\ufcb1":"\u0635\u062d","\ufc20":"\u0635\u062d","\ufd65":"\u0635\u062d\u062d","\ufd64":"\u0635\u062d\u062d","\ufda9":"\u0635\u062d\u0649","\ufcb2":"\u0635\u062e","\ufd2b":"\u0635\u0631","\ufd0f":"\u0635\u0631","\ufdf5":"\u0635\u0644\u0639\u0645","\ufdf9":"\u0635\u0644\u0649","\ufdf0":"\u0635\u0644\u0649","\ufdfa":"\u0635\u0644\u0649 l\u0644\u0644o \u0639\u0644\u0649o \u0648\u0633\u0644\u0645","\ufcb3":"\u0635\u0645","\ufc21":"\u0635\u0645","\ufdc5":"\u0635\u0645\u0645","\ufd66":"\u0635\u0645\u0645","\ufd21":"\u0635\u0649","\ufd05":"\u0635\u0649","\ufd22":"\u0635\u0649","\ufd06":"\u0635\u0649","\ud83b\ude19":"\u0636","\ud83b\ude39":"\u0636","\ud83b\ude59":"\u0636","\ud83b\ude79":"\u0636","\ud83b\ude99":"\u0636","\ud83b\udeb9":"\u0636","\ufebf":"\u0636","\ufec0":"\u0636","\ufebe":"\u0636","\ufebd":"\u0636","\ufcb4":"\u0636\u062c","\ufc22":"\u0636\u062c","\ufcb5":"\u0636\u062d","\ufc23":"\u0636\u062d","\ufd6e":"\u0636\u062d\u0649","\ufdab":"\u0636\u062d\u0649","\ufcb6":"\u0636\u062e","\ufc24":"\u0636\u062e","\ufd70":"\u0636\u062e\u0645","\ufd6f":"\u0636\u062e\u0645","\ufd2c":"\u0636\u0631","\ufd10":"\u0636\u0631","\ufcb7":"\u0636\u0645","\ufc25":"\u0636\u0645","\ufd23":"\u0636\u0649","\ufd07":"\u0636\u0649","\ufd24":"\u0636\u0649","\ufd08":"\u0636\u0649","\ud800\udee8":"\u0637","\ud83b\ude08":"\u0637","\ud83b\ude68":"\u0637","\ud83b\ude88":"\u0637","\ud83b\udea8":"\u0637","\ufec3":"\u0637","\ufec4":"\u0637","\ufec2":"\u0637","\ufec1":"\u0637","\u069f":"\u0637\u06db","\ufcb8":"\u0637\u062d","\ufc26":"\u0637\u062d","\ufd33":"\u0637\u0645","\ufd3a":"\u0637\u0645","\ufc27":"\u0637\u0645","\ufd72":"\u0637\u0645\u062d","\ufd71":"\u0637\u0645\u062d","\ufd73":"\u0637\u0645\u0645","\ufd74":"\u0637\u0645\u0649","\ufd11":"\u0637\u0649","\ufcf5":"\u0637\u0649","\ufd12":"\u0637\u0649","\ufcf6":"\u0637\u0649","\ud83b\ude1a":"\u0638","\ud83b\ude7a":"\u0638","\ud83b\ude9a":"\u0638","\ud83b\udeba":"\u0638","\ufec7":"\u0638","\ufec8":"\u0638","\ufec6":"\u0638","\ufec5":"\u0638","\ufcb9":"\u0638\u0645","\ufd3b":"\u0638\u0645","\ufc28":"\u0638\u0645","\u060f":"\u0639","\ud83b\ude0f":"\u0639","\ud83b\ude2f":"\u0639","\ud83b\ude4f":"\u0639","\ud83b\ude6f":"\u0639","\ud83b\ude8f":"\u0639","\ud83b\udeaf":"\u0639","\ufecb":"\u0639","\ufecc":"\u0639","\ufeca":"\u0639","\ufec9":"\u0639","\ufcba":"\u0639\u062c","\ufc29":"\u0639\u062c","\ufdc4":"\u0639\u062c\u0645","\ufd75":"\u0639\u062c\u0645","\ufdf7":"\u0639\u0644\u0649o","\ufcbb":"\u0639\u0645","\ufc2a":"\u0639\u0645","\ufd77":"\u0639\u0645\u0645","\ufd76":"\u0639\u0645\u0645","\ufd78":"\u0639\u0645\u0649","\ufdb6":"\u0639\u0645\u0649","\ufd13":"\u0639\u0649","\ufcf7":"\u0639\u0649","\ufd14":"\u0639\u0649","\ufcf8":"\u0639\u0649","\ud83b\ude1b":"\u063a","\ud83b\ude3b":"\u063a","\ud83b\ude5b":"\u063a","\ud83b\ude7b":"\u063a","\ud83b\ude9b":"\u063a","\ud83b\udebb":"\u063a","\ufecf":"\u063a","\ufed0":"\u063a","\ufece":"\u063a","\ufecd":"\u063a","\ufcbc":"\u063a\u062c","\ufc2b":"\u063a\u062c","\ufcbd":"\u063a\u0645","\ufc2c":"\u063a\u0645","\ufd79":"\u063a\u0645\u0645","\ufd7b":"\u063a\u0645\u0649","\ufd7a":"\u063a\u0645\u0649","\ufd15":"\u063a\u0649","\ufcf9":"\u063a\u0649","\ufd16":"\u063a\u0649","\ufcfa":"\u063a\u0649","\ud83b\ude10":"\u0641","\ud83b\ude30":"\u0641","\ud83b\ude70":"\u0641","\ud83b\ude90":"\u0641","\ud83b\udeb0":"\u0641","\ufed3":"\u0641","\ufed4":"\u0641","\ufed2":"\u0641","\ufed1":"\u0641","\u06a7":"\u0641","\ufcbe":"\u0641\u062c","\ufc2d":"\u0641\u062c","\ufcbf":"\u0641\u062d","\ufc2e":"\u0641\u062d","\ufcc0":"\u0641\u062e","\ufc2f":"\u0641\u062e","\ufd7d":"\u0641\u062e\u0645","\ufd7c":"\u0641\u062e\u0645","\ufcc1":"\u0641\u0645","\ufc30":"\u0641\u0645","\ufdc1":"\u0641\u0645\u0649","\ufc7c":"\u0641\u0649","\ufc31":"\u0641\u0649","\ufc7d":"\u0641\u0649","\ufc32":"\u0641\u0649","\ud83b\ude1e":"\u06a1","\ud83b\ude7e":"\u06a1","\u08bb":"\u06a1","\u066f":"\u06a1","\ud83b\ude1f":"\u06a1","\ud83b\ude5f":"\u06a1","\u08bc":"\u06a1","\u06a4":"\u06a1\u06db","\ufb6c":"\u06a1\u06db","\ufb6d":"\u06a1\u06db","\ufb6b":"\u06a1\u06db","\ufb6a":"\u06a1\u06db","\u06a8":"\u06a1\u06db","\u08a4":"\u06a2\u06db","\ufb70":"\u06a6","\ufb71":"\u06a6","\ufb6f":"\u06a6","\ufb6e":"\u06a6","\ud83b\ude12":"\u0642","\ud83b\ude32":"\u0642","\ud83b\ude52":"\u0642","\ud83b\ude72":"\u0642","\ud83b\ude92":"\u0642","\ud83b\udeb2":"\u0642","\ufed7":"\u0642","\ufed8":"\u0642","\ufed6":"\u0642","\ufed5":"\u0642","\ufcc2":"\u0642\u062d","\ufc33":"\u0642\u062d","\ufdf1":"\u0642\u0644\u0649","\ufcc3":"\u0642\u0645","\ufc34":"\u0642\u0645","\ufdb4":"\u0642\u0645\u062d","\ufd7e":"\u0642\u0645\u062d","\ufd7f":"\u0642\u0645\u0645","\ufdb2":"\u0642\u0645\u0649","\ufc7e":"\u0642\u0649","\ufc35":"\u0642\u0649","\ufc7f":"\u0642\u0649","\ufc36":"\u0642\u0649","\ud83b\ude0a":"\u0643","\ud83b\ude2a":"\u0643","\ud83b\ude6a":"\u0643","\ufedb":"\u0643","\ufedc":"\u0643","\ufeda":"\u0643","\ufed9":"\u0643","\u06a9":"\u0643","\ufb90":"\u0643","\ufb91":"\u0643","\ufb8f":"\u0643","\ufb8e":"\u0643","\u06aa":"\u0643","\u06ad":"\u0643\u06db","\ufbd5":"\u0643\u06db","\ufbd6":"\u0643\u06db","\ufbd4":"\u0643\u06db","\ufbd3":"\u0643\u06db","\u0763":"\u0643\u06db","\ufc80":"\u0643l","\ufc37":"\u0643l","\ufcc4":"\u0643\u062c","\ufc38":"\u0643\u062c","\ufcc5":"\u0643\u062d","\ufc39":"\u0643\u062d","\ufcc6":"\u0643\u062e","\ufc3a":"\u0643\u062e","\ufcc7":"\u0643\u0644","\ufceb":"\u0643\u0644","\ufc81":"\u0643\u0644","\ufc3b":"\u0643\u0644","\ufcc8":"\u0643\u0645","\ufcec":"\u0643\u0645","\ufc82":"\u0643\u0645","\ufc3c":"\u0643\u0645","\ufdc3":"\u0643\u0645\u0645","\ufdbb":"\u0643\u0645\u0645","\ufdb7":"\u0643\u0645\u0649","\ufc83":"\u0643\u0649","\ufc3d":"\u0643\u0649","\ufc84":"\u0643\u0649","\ufc3e":"\u0643\u0649","\u0762":"\u06ac","\ufb94":"\u06af","\ufb95":"\u06af","\ufb93":"\u06af","\ufb92":"\u06af","\u08b0":"\u06af","\u06b4":"\u06af\u06db","\ufb9c":"\u06b1","\ufb9d":"\u06b1","\ufb9b":"\u06b1","\ufb9a":"\u06b1","\ufb98":"\u06b3","\ufb99":"\u06b3","\ufb97":"\u06b3","\ufb96":"\u06b3","\ud83b\ude0b":"\u0644","\ud83b\ude2b":"\u0644","\ud83b\ude4b":"\u0644","\ud83b\ude8b":"\u0644","\ud83b\udeab":"\u0644","\ufedf":"\u0644","\ufee0":"\u0644","\ufede":"\u0644","\ufedd":"\u0644","\u06b7":"\u0644\u06db","\u06b5":"\u0644\u0306","\ufefc":"\u0644l","\ufefb":"\u0644l","\ufefa":"\u0644l\u0655","\ufef9":"\u0644l\u0655","\ufef8":"\u0644l\u0674","\ufef7":"\u0644l\u0674","\ufccd":"\u0644o","\ufef6":"\u0644\u0622","\ufef5":"\u0644\u0622","\ufcc9":"\u0644\u062c","\ufc3f":"\u0644\u062c","\ufd83":"\u0644\u062c\u062c","\ufd84":"\u0644\u062c\u062c","\ufdba":"\u0644\u062c\u0645","\ufdbc":"\u0644\u062c\u0645","\ufdac":"\u0644\u062c\u0649","\ufcca":"\u0644\u062d","\ufc40":"\u0644\u062d","\ufdb5":"\u0644\u062d\u0645","\ufd80":"\u0644\u062d\u0645","\ufd82":"\u0644\u062d\u0649","\ufd81":"\u0644\u062d\u0649","\ufccb":"\u0644\u062e","\ufc41":"\u0644\u062e","\ufd86":"\u0644\u062e\u0645","\ufd85":"\u0644\u062e\u0645","\ufccc":"\u0644\u0645","\ufced":"\u0644\u0645","\ufc85":"\u0644\u0645","\ufc42":"\u0644\u0645","\ufd88":"\u0644\u0645\u062d","\ufd87":"\u0644\u0645\u062d","\ufdad":"\u0644\u0645\u0649","\ufc86":"\u0644\u0649","\ufc43":"\u0644\u0649","\ufc87":"\u0644\u0649","\ufc44":"\u0644\u0649","\ud83b\ude0c":"\u0645","\ud83b\ude2c":"\u0645","\ud83b\ude6c":"\u0645","\ud83b\ude8c":"\u0645","\ud83b\udeac":"\u0645","\ufee3":"\u0645","\ufee4":"\u0645","\ufee2":"\u0645","\ufee1":"\u0645","\u08a7":"\u0645\u06db","\u06fe":"\u0645\u0348","\ufc88":"\u0645l","\ufcce":"\u0645\u062c","\ufc45":"\u0645\u062c","\ufd8c":"\u0645\u062c\u062d","\ufd92":"\u0645\u062c\u062e","\ufd8d":"\u0645\u062c\u0645","\ufdc0":"\u0645\u062c\u0649","\ufccf":"\u0645\u062d","\ufc46":"\u0645\u062d","\ufd89":"\u0645\u062d\u062c","\ufd8a":"\u0645\u062d\u0645","\ufdf4":"\u0645\u062d\u0645\u062f","\ufd8b":"\u0645\u062d\u0649","\ufcd0":"\u0645\u062e","\ufc47":"\u0645\u062e","\ufd8e":"\u0645\u062e\u062c","\ufd8f":"\u0645\u062e\u0645","\ufdb9":"\u0645\u062e\u0649","\ufcd1":"\u0645\u0645","\ufc89":"\u0645\u0645","\ufc48":"\u0645\u0645","\ufdb1":"\u0645\u0645\u0649","\ufc49":"\u0645\u0649","\ufc4a":"\u0645\u0649","\ud83b\ude0d":"\u0646","\ud83b\ude2d":"\u0646","\ud83b\ude4d":"\u0646","\ud83b\ude6d":"\u0646","\ud83b\ude8d":"\u0646","\ud83b\udead":"\u0646","\ufee7":"\u0646","\ufee8":"\u0646","\ufee6":"\u0646","\ufee5":"\u0646","\u0768":"\u0646\u0615","\u0769":"\u0646\u0306","\ufcd6":"\u0646o","\ufcef":"\u0646o","\ufdb8":"\u0646\u062c\u062d","\ufdbd":"\u0646\u062c\u062d","\ufd98":"\u0646\u062c\u0645","\ufd97":"\u0646\u062c\u0645","\ufd99":"\u0646\u062c\u0649","\ufdc7":"\u0646\u062c\u0649","\ufcd3":"\u0646\u062d","\ufc4c":"\u0646\u062d","\ufd95":"\u0646\u062d\u0645","\ufd96":"\u0646\u062d\u0649","\ufdb3":"\u0646\u062d\u0649","\ufcd4":"\u0646\u062e","\ufc4d":"\u0646\u062e","\ufc8a":"\u0646\u0631","\ufc8b":"\u0646\u0632","\ufcd5":"\u0646\u0645","\ufcee":"\u0646\u0645","\ufc8c":"\u0646\u0645","\ufc4e":"\u0646\u0645","\ufd9b":"\u0646\u0645\u0649","\ufd9a":"\u0646\u0645\u0649","\ufc8d":"\u0646\u0646","\ufc8e":"\u0646\u0649","\ufc4f":"\u0646\u0649","\ufc8f":"\u0646\u0649","\ufc50":"\u0646\u0649","\u06c2":"\u06c0","\ufba5":"\u06c0","\ufba4":"\u06c0","\ud800\udee4":"\u0648","\ud83b\ude05":"\u0648","\ud83b\ude85":"\u0648","\ud83b\udea5":"\u0648","\ufeee":"\u0648","\ufeed":"\u0648","\u08b1":"\u0648","\u06cb":"\u0648\u06db","\ufbdf":"\u0648\u06db","\ufbde":"\u0648\u06db","\u06c7":"\u0648\u0313","\ufbd8":"\u0648\u0313","\ufbd7":"\u0648\u0313","\u06c6":"\u0648\u0306","\ufbda":"\u0648\u0306","\ufbd9":"\u0648\u0306","\u06c9":"\u0648\u0302","\ufbe3":"\u0648\u0302","\ufbe2":"\u0648\u0302","\u06c8":"\u0648\u0670","\ufbdc":"\u0648\u0670","\ufbdb":"\u0648\u0670","\u0624":"\u0648\u0674","\ufe86":"\u0648\u0674","\ufe85":"\u0648\u0674","\u0676":"\u0648\u0674","\u0677":"\u0648\u0313\u0674","\ufbdd":"\u0648\u0313\u0674","\ufdf8":"\u0648\u0633\u0644\u0645","\ufbe1":"\u06c5","\ufbe0":"\u06c5","\u066e":"\u0649","\ud83b\ude1c":"\u0649","\ud83b\ude7c":"\u0649","\u06ba":"\u0649","\ud83b\ude1d":"\u0649","\ud83b\ude5d":"\u0649","\ufb9f":"\u0649","\ufb9e":"\u0649","\u08bd":"\u0649","\ufbe8":"\u0649","\ufbe9":"\u0649","\ufef0":"\u0649","\ufeef":"\u0649","\u064a":"\u0649","\ud83b\ude09":"\u0649","\ud83b\ude29":"\u0649","\ud83b\ude49":"\u0649","\ud83b\ude69":"\u0649","\ud83b\ude89":"\u0649","\ud83b\udea9":"\u0649","\ufef3":"\u0649","\ufef4":"\u0649","\ufef2":"\u0649","\ufef1":"\u0649","\u06cc":"\u0649","\ufbfe":"\u0649","\ufbff":"\u0649","\ufbfd":"\u0649","\ufbfc":"\u0649","\u06d2":"\u0649","\ufbaf":"\u0649","\ufbae":"\u0649","\u0679":"\u0649\u0615","\ufb68":"\u0649\u0615","\ufb69":"\u0649\u0615","\ufb67":"\u0649\u0615","\ufb66":"\u0649\u0615","\u06bb":"\u0649\u0615","\ufba2":"\u0649\u0615","\ufba3":"\u0649\u0615","\ufba1":"\u0649\u0615","\ufba0":"\u0649\u0615","\u067e":"\u0649\u06db","\ufb58":"\u0649\u06db","\ufb59":"\u0649\u06db","\ufb57":"\u0649\u06db","\ufb56":"\u0649\u06db","\u062b":"\u0649\u06db","\ud83b\ude16":"\u0649\u06db","\ud83b\ude36":"\u0649\u06db","\ud83b\ude76":"\u0649\u06db","\ud83b\ude96":"\u0649\u06db","\ud83b\udeb6":"\u0649\u06db","\ufe9b":"\u0649\u06db","\ufe9c":"\u0649\u06db","\ufe9a":"\u0649\u06db","\ufe99":"\u0649\u06db","\u06bd":"\u0649\u06db","\u06d1":"\u0649\u06db","\u063f":"\u0649\u06db","\u08b7":"\u0649\u06db\u06e2","\u0756":"\u0649\u0306","\u06ce":"\u0649\u0306","\u08ba":"\u0649\u0306\u0307","\u063d":"\u0649\u0302","\u08a8":"\u0649\u0654","\ufc90":"\u0649\u0670","\ufc5d":"\u0649\u0670","\ufcde":"\u0649o","\ufcf1":"\u0649o","\ufce6":"\u0649\u06dbo","\u0626":"\u0649\u0674","\ufe8b":"\u0649\u0674","\ufe8c":"\u0649\u0674","\ufe8a":"\u0649\u0674","\ufe89":"\u0649\u0674","\u0678":"\u0649\u0674","\ufbeb":"\u0649\u0674l","\ufbea":"\u0649\u0674l","\ufc9b":"\u0649\u0674o","\ufce0":"\u0649\u0674o","\ufbed":"\u0649\u0674o","\ufbec":"\u0649\u0674o","\ufbf8":"\u0649\u0674\u067b","\ufbf7":"\u0649\u0674\u067b","\ufbf6":"\u0649\u0674\u067b","\ufc97":"\u0649\u0674\u062c","\ufc00":"\u0649\u0674\u062c","\ufc98":"\u0649\u0674\u062d","\ufc01":"\u0649\u0674\u062d","\ufc99":"\u0649\u0674\u062e","\ufc64":"\u0649\u0674\u0631","\ufc65":"\u0649\u0674\u0632","\ufc9a":"\u0649\u0674\u0645","\ufcdf":"\u0649\u0674\u0645","\ufc66":"\u0649\u0674\u0645","\ufc02":"\u0649\u0674\u0645","\ufc67":"\u0649\u0674\u0646","\ufbef":"\u0649\u0674\u0648","\ufbee":"\u0649\u0674\u0648","\ufbf1":"\u0649\u0674\u0648\u0313","\ufbf0":"\u0649\u0674\u0648\u0313","\ufbf3":"\u0649\u0674\u0648\u0306","\ufbf2":"\u0649\u0674\u0648\u0306","\ufbf5":"\u0649\u0674\u0648\u0670","\ufbf4":"\u0649\u0674\u0648\u0670","\ufbfb":"\u0649\u0674\u0649","\ufbfa":"\u0649\u0674\u0649","\ufc68":"\u0649\u0674\u0649","\ufbf9":"\u0649\u0674\u0649","\ufc03":"\u0649\u0674\u0649","\ufc69":"\u0649\u0674\u0649","\ufc04":"\u0649\u0674\u0649","\ufcda":"\u0649\u062c","\ufc55":"\u0649\u062c","\ufc11":"\u0649\u06db\u062c","\ufdaf":"\u0649\u062c\u0649","\ufcdb":"\u0649\u062d","\ufc56":"\u0649\u062d","\ufdae":"\u0649\u062d\u0649","\ufcdc":"\u0649\u062e","\ufc57":"\u0649\u062e","\ufc91":"\u0649\u0631","\ufc76":"\u0649\u06db\u0631","\ufc92":"\u0649\u0632","\ufc77":"\u0649\u06db\u0632","\ufcdd":"\u0649\u0645","\ufcf0":"\u0649\u0645","\ufc93":"\u0649\u0645","\ufc58":"\u0649\u0645","\ufca6":"\u0649\u06db\u0645","\ufce5":"\u0649\u06db\u0645","\ufc78":"\u0649\u06db\u0645","\ufc12":"\u0649\u06db\u0645","\ufd9d":"\u0649\u0645\u0645","\ufd9c":"\u0649\u0645\u0645","\ufdb0":"\u0649\u0645\u0649","\ufc94":"\u0649\u0646","\ufc79":"\u0649\u06db\u0646","\ufc95":"\u0649\u0649","\ufc59":"\u0649\u0649","\ufc96":"\u0649\u0649","\ufc5a":"\u0649\u0649","\ufc7a":"\u0649\u06db\u0649","\ufc13":"\u0649\u06db\u0649","\ufc7b":"\u0649\u06db\u0649","\ufc14":"\u0649\u06db\u0649","\ufbb1":"\u06d3","\ufbb0":"\u06d3","\ud800\udeb8":"\u2d40","\u205e":"\u2d42","\u2e3d":"\u2d42","\u2999":"\u2d42","\ufe19":"\u2d57","\u205d":"\u2d57","\u22ee":"\u2d57","\u0544":"\u1206","\u054c":"\u1261","\u053b":"\u12ae","\u054a":"\u1323","\u0906":"\u0905\u093e","\u0912":"\u0905\u093e\u0946","\u0913":"\u0905\u093e\u0947","\u0914":"\u0905\u093e\u0948","\u0904":"\u0905\u0946","\u0911":"\u0905\u0949","\u090d":"\u090f\u0945","\u090e":"\u090f\u0946","\u0910":"\u090f\u0947","\u0908":"\u0930\u094d\u0907","\u0abd":"\u093d","\ud804\udddc":"\ua8fb","\ud804\uddcb":"\u093a","\u0ac1":"\u0941","\u0ac2":"\u0942","\u0a4b":"\u0946","\u0a4d":"\u094d","\u0acd":"\u094d","\u0986":"\u0985\u09be","\u09e0":"\u098b\u09c3","\u09e1":"\u098b\u09c3","\ud805\udc92":"\u0998","\ud805\udc94":"\u099a","\ud805\udc96":"\u099c","\ud805\udc98":"\u099e","\ud805\udc99":"\u099f","\ud805\udc9b":"\u09a1","\ud805\udcaa":"\u09a3","\ud805\udc9e":"\u09a4","\ud805\udc9f":"\u09a5","\ud805\udca0":"\u09a6","\ud805\udca1":"\u09a7","\ud805\udca2":"\u09a8","\ud805\udca3":"\u09aa","\ud805\udca9":"\u09ac","\ud805\udca7":"\u09ae","\ud805\udca8":"\u09af","\ud805\udcab":"\u09b0","\ud805\udc9d":"\u09b2","\ud805\udcad":"\u09b7","\ud805\udcae":"\u09b8","\ud805\udcc4":"\u09bd","\ud805\udcb0":"\u09be","\ud805\udcb1":"\u09bf","\ud805\udcb9":"\u09c7","\ud805\udcbc":"\u09cb","\ud805\udcbe":"\u09cc","\ud805\udcc2":"\u09cd","\ud805\udcbd":"\u09d7","\u0a09":"\u0a73\u0a41","\u0a0a":"\u0a73\u0a42","\u0a06":"\u0a05\u0a3e","\u0a10":"\u0a05\u0a48","\u0a14":"\u0a05\u0a4c","\u0a07":"\u0a72\u0a3f","\u0a08":"\u0a72\u0a40","\u0a0f":"\u0a72\u0a47","\u0a86":"\u0a85\u0abe","\u0a91":"\u0a85\u0abe\u0ac5","\u0a93":"\u0a85\u0abe\u0ac7","\u0a94":"\u0a85\u0abe\u0ac8","\u0a8d":"\u0a85\u0ac5","\u0a8f":"\u0a85\u0ac7","\u0a90":"\u0a85\u0ac8","\u0b06":"\u0b05\u0b3e","\u0bee":"\u0b85","\u0bb0":"\u0b88","\u0bbe":"\u0b88","\u0beb":"\u0b88\u0bc1","\u0be8":"\u0b89","\u0d09":"\u0b89","\u0b8a":"\u0b89\u0bb3","\u0d0a":"\u0b89\u0d57","\u0bed":"\u0b8e","\u0bf7":"\u0b8e\u0bb5","\u0b9c":"\u0b90","\u0d1c":"\u0b90","\u0be7":"\u0b95","\u0bea":"\u0b9a","\u0bec":"\u0b9a\u0bc1","\u0bf2":"\u0b9a\u0bc2","\u0d3a":"\u0b9f\u0bbf","\u0d23":"\u0ba3","\u0bfa":"\u0ba8\u0bc0","\u0bf4":"\u0bae\u0bc0","\u0bf0":"\u0baf","\u0d34":"\u0bb4","\u0bd7":"\u0bb3","\u0bc8":"\u0ba9","\u0d36":"\u0bb6","\u0bf8":"\u0bb7","\u0d3f":"\u0bbf","\u0d40":"\u0bbf","\u0bca":"\u0bc6\u0b88","\u0bcc":"\u0bc6\u0bb3","\u0bcb":"\u0bc7\u0b88","\u0c85":"\u0c05","\u0c86":"\u0c06","\u0c87":"\u0c07","\u0c60":"\u0c0b\u0c3e","\u0c61":"\u0c0c\u0c3e","\u0c92":"\u0c12","\u0c14":"\u0c12\u0c4c","\u0c94":"\u0c12\u0c4c","\u0c13":"\u0c12\u0c55","\u0c93":"\u0c12\u0c55","\u0c9c":"\u0c1c","\u0c9e":"\u0c1e","\u0c22":"\u0c21\u0323","\u0ca3":"\u0c23","\u0c25":"\u0c27\u05bc","\u0c2d":"\u0c2c\u0323","\u0caf":"\u0c2f","\u0c20":"\u0c30\u05bc","\u0cb1":"\u0c31","\u0cb2":"\u0c32","\u0c37":"\u0c35\u0323","\u0c39":"\u0c35\u0c3e","\u0c2e":"\u0c35\u0c41","\u0c42":"\u0c41\u0c3e","\u0c44":"\u0c43\u0c3e","\u0ce1":"\u0c8c\u0cbe","\u0d08":"\u0d07\u0d57","\u0d10":"\u0d0e\u0d46","\u0d13":"\u0d12\u0d3e","\u0d14":"\u0d12\u0d57","\u0d61":"\u0d1e","\u0d6b":"\u0d26\u0d4d\u0d30","\u0d79":"\u0d28\u0d41","\u0d0c":"\u0d28\u0d41","\u0d19":"\u0d28\u0d41","\u0d6f":"\u0d28\u0d4d","\u0d7b":"\u0d28\u0d4d","\u0d6c":"\u0d28\u0d4d\u0d28","\u0d5a":"\u0d28\u0d4d\u0d2e","\u0d31":"\u0d30","\u0d6a":"\u0d30\u0d4d","\u0d7c":"\u0d30\u0d4d","\u0d6e":"\u0d35\u0d4d\u0d30","\u0d76":"\u0d39\u0d4d\u0d2e","\u0d42":"\u0d41","\u0d43":"\u0d41","\u0d48":"\u0d46\u0d46","\u0dea":"\u0da2","\u0deb":"\u0daf","\ud805\udc13":"\ud805\udc34\ud805\udc42\ud805\udc12","\ud805\udc19":"\ud805\udc34\ud805\udc42\ud805\udc18","\ud805\udc24":"\ud805\udc34\ud805\udc42\ud805\udc23","\ud805\udc2a":"\ud805\udc34\ud805\udc42\ud805\udc29","\ud805\udc2d":"\ud805\udc34\ud805\udc42\ud805\udc2c","\ud805\udc2f":"\ud805\udc34\ud805\udc42\ud805\udc2e","\ud805\uddd8":"\ud805\udd82","\ud805\uddd9":"\ud805\udd82","\ud805\uddda":"\ud805\udd83","\ud805\udddb":"\ud805\udd84","\ud805\udddc":"\ud805\uddb2","\ud805\udddd":"\ud805\uddb3","\u0e03":"\u0e02","\u0e14":"\u0e04","\u0e15":"\u0e04","\u0e21":"\u0e06","\u0e88":"\u0e08","\u0e0b":"\u0e0a","\u0e0f":"\u0e0e","\u0e17":"\u0e11","\u0e9a":"\u0e1a","\u0e9b":"\u0e1b","\u0e9d":"\u0e1d","\u0e9e":"\u0e1e","\u0e9f":"\u0e1f","\u0e26":"\u0e20","\u0e8d":"\u0e22","\u17d4":"\u0e2f","\u0e45":"\u0e32","\u0e33":"\u030a\u0e32","\u17b7":"\u0e34","\u17b8":"\u0e35","\u17b9":"\u0e36","\u17ba":"\u0e37","\u0eb8":"\u0e38","\u0eb9":"\u0e39","\u0e41":"\u0e40\u0e40","\u0edc":"\u0eab\u0e99","\u0edd":"\u0eab\u0ea1","\u0eb3":"\u030a\u0eb2","\u0f02":"\u0f60\u0f74\u0f82\u0f7f","\u0f03":"\u0f60\u0f74\u0f82\u0f14","\u0f6a":"\u0f62","\u0f00":"\u0f68\u0f7c\u0f7e","\u0f77":"\u0fb2\u0f71\u0f80","\u0f79":"\u0fb3\u0f71\u0f80","\ud807\udcb2":"\ud807\udcaa","\u1081":"\u1002\u103e","\u1000":"\u1002\u102c","\u1070":"\u1003\u103e","\u1066":"\u1015\u103e","\u101f":"\u1015\u102c","\u106f":"\u1015\u102c\u103e","\u107e":"\u107d\u103e","\u1029":"\u101e\u103c","\u102a":"\u101e\u103c\u1031\u102c\u103a","\u109e":"\u1083\u030a","\u17a3":"\u17a2","\u19d0":"\u199e","\u19d1":"\u19b1","\u1a80":"\u1a45","\u1a90":"\u1a45","\uaa53":"\uaa01","\uaa56":"\uaa23","\u1b52":"\u1b0d","\u1b53":"\u1b11","\u1b58":"\u1b28","\ua9a3":"\ua99d","\u1896":"\u185c","\u1855":"\u1835","\u1ff6":"\u13ef","\u140d":"\u1401\xb7","\u142b":"\u1401\u1420","\u1411":"\u1404\xb7","\u1413":"\u1405\xb7","\u142d":"\u1405\u1420","\u1415":"\u1406\xb7","\u1418":"\u140a\xb7","\u142e":"\u140a\u1420","\u141a":"\u140b\xb7","\u18dd":"\u141e\u18df","\u14d1":"\u1421","\u1540":"\u1429","\u143f":"\u1432\xb7","\u1443":"\u1434\xb7","\u2369":"\u1435","\u1447":"\u1439\xb7","\u145c":"\u144f\xb7","\u2e27":"\u1450","\u2283":"\u1450","\u145e":"\u1450\xb7","\u1469":"\u1450\'","\u27c9":"\u1450/","\u2ad7":"\u1450\u1455","\u1460":"\u1451\xb7","\u2e26":"\u1455","\u2282":"\u1455","\u1462":"\u1455\xb7","\u146a":"\u1455\'","\u1464":"\u1456\xb7","\u1475":"\u146b\xb7","\u1485":"\u146b\'","\u1479":"\u146e\xb7","\u147d":"\u1470\xb7","\u1603":"\u1489","\u1493":"\u1489\xb7","\u1495":"\u148b\xb7","\u1497":"\u148c\xb7","\u149b":"\u148e\xb7","\u1602":"\u1490","\u149d":"\u1490\xb7","\u149f":"\u1491\xb7","\u14ad":"\u14a3\xb7","\u14b1":"\u14a6\xb7","\u14b3":"\u14a7\xb7","\u14b5":"\u14a8\xb7","\u14b9":"\u14ab\xb7","\u14ca":"\u14c0\xb7","\u18c7":"\u14c2\xb7","\u18c9":"\u14c3\xb7","\u18cb":"\u14c4\xb7","\u18cd":"\u14c5\xb7","\u14cc":"\u14c7\xb7","\u14ce":"\u14c8\xb7","\u1604":"\u14d3","\u14dd":"\u14d3\xb7","\u14df":"\u14d5\xb7","\u14e1":"\u14d6\xb7","\u14e3":"\u14d7\xb7","\u14e5":"\u14d8\xb7","\u1607":"\u14da","\u14e7":"\u14da\xb7","\u14e9":"\u14db\xb7","\u14f7":"\u14ed\xb7","\u14f9":"\u14ef\xb7","\u14fb":"\u14f0\xb7","\u14fd":"\u14f1\xb7","\u14ff":"\u14f2\xb7","\u1501":"\u14f4\xb7","\u1503":"\u14f5\xb7","\u150c":"\u150b<","\u150e":"\u150bb","\u150d":"\u150b\u1455","\u150f":"\u150b\u1490","\u1518":"\u1510\xb7","\u151a":"\u1511\xb7","\u151c":"\u1512\xb7","\u151e":"\u1513\xb7","\u1520":"\u1514\xb7","\u1522":"\u1515\xb7","\u1524":"\u1516\xb7","\u1532":"\u1528\xb7","\u1534":"\u1529\xb7","\u1536":"\u152a\xb7","\u1538":"\u152b\xb7","\u153a":"\u152d\xb7","\u153c":"\u152e\xb7","\u1622":"\u1543","\u18e0":"\u1543\xb7","\u1623":"\u1546","\u1624":"\u154a","\u154f":"\u154c\xb7","\u1583":"\u1550b","\u1584":"\u1550b\u0307","\u1581":"\u1550d","\u157f":"\u1550P","\u166f":"\u1550\u146b","\u157e":"\u1550\u146c","\u1580":"\u1550\u146e","\u1582":"\u1550\u1470","\u1585":"\u1550\u1483","\u155c":"\u155a\xb7","\u18e3":"\u155e\xb7","\u18e4":"\u1566\xb7","\u1569":"\u1567\xb7","\u18e5":"\u156b\xb7","\u18e8":"\u1586\xb7","\u1591":"\u1595J","\u1670":"\u1595\u1489","\u158e":"\u1595\u148a","\u158f":"\u1595\u148b","\u1590":"\u1595\u148c","\u1592":"\u1595\u148e","\u1593":"\u1595\u1490","\u1594":"\u1595\u1491","\u1673":"\u1596J","\u1671":"\u1596\u148b","\u1672":"\u1596\u148c","\u1674":"\u1596\u148e","\u1675":"\u1596\u1490","\u1676":"\u1596\u1491","\u18ea":"\u1597\xb7","\u1677":"\u15a7\xb7","\u1678":"\u15a8\xb7","\u1679":"\u15a9\xb7","\u167a":"\u15aa\xb7","\u167b":"\u15ab\xb7","\u167c":"\u15ac\xb7","\u167d":"\u15ad\xb7","\u2aab":"\u15d2","\u2aaa":"\u15d5","\ua4f7":"\u15e1","\u18f0":"\u15f4\xb7","\u18f2":"\u161b\xb7","\u1dbb":"\u1646","\ua4ed":"\u1660","\u1dba":"\u18d4","\u1d3e":"\u18d6","\u18dc":"\u18df\u141e","\u02e1":"\u18f3","\u02b3":"\u18f4","\u02e2":"\u18f5","\u18db":"\u18f5","\ua6b0":"\u16b9","\u16e1":"\u16bc","\u237f":"\u16bd","\u16c2":"\u16bd","\ud834\ude3f":"\u16cb","\u2191":"\u16cf","\u21bf":"\u16d0","\u296e":"\u16d0\u21c2","\u2963":"\u16d0\u16da","\u2d63":"\u16ef","\u21be":"\u16da","\u2a21":"\u16da","\u22c4":"\u16dc","\u25c7":"\u16dc","\u25ca":"\u16dc","\u2662":"\u16dc","\ud83d\udf54":"\u16dc","\ud806\udcb7":"\u16dc","\ud800\ude94":"\u16dc","\u235a":"\u16dc\u0332","\u22c8":"\u16de","\u2a1d":"\u16de","\ud801\udcd0":"\u16e6","\u2195":"\u16e8","\ud803\udcfc":"\ud803\udc82","\ud803\udcfa":"\ud803\udca5","\u3131":"\u1100","\u11a8":"\u1100","\u1101":"\u1100\u1100","\u3132":"\u1100\u1100","\u11a9":"\u1100\u1100","\u11fa":"\u1100\u1102","\u115a":"\u1100\u1103","\u11c3":"\u1100\u1105","\u11fb":"\u1100\u1107","\u11aa":"\u1100\u1109","\u3133":"\u1100\u1109","\u11c4":"\u1100\u1109\u1100","\u11fc":"\u1100\u110e","\u11fd":"\u1100\u110f","\u11fe":"\u1100\u1112","\u3134":"\u1102","\u11ab":"\u1102","\u1113":"\u1102\u1100","\u11c5":"\u1102\u1100","\u1114":"\u1102\u1102","\u3165":"\u1102\u1102","\u11ff":"\u1102\u1102","\u1115":"\u1102\u1103","\u3166":"\u1102\u1103","\u11c6":"\u1102\u1103","\ud7cb":"\u1102\u1105","\u1116":"\u1102\u1107","\u115b":"\u1102\u1109","\u11c7":"\u1102\u1109","\u3167":"\u1102\u1109","\u115c":"\u1102\u110c","\u11ac":"\u1102\u110c","\u3135":"\u1102\u110c","\ud7cc":"\u1102\u110e","\u11c9":"\u1102\u1110","\u115d":"\u1102\u1112","\u11ad":"\u1102\u1112","\u3136":"\u1102\u1112","\u11c8":"\u1102\u1140","\u3168":"\u1102\u1140","\u3137":"\u1103","\u11ae":"\u1103","\u1117":"\u1103\u1100","\u11ca":"\u1103\u1100","\u1104":"\u1103\u1103","\u3138":"\u1103\u1103","\ud7cd":"\u1103\u1103","\ud7ce":"\u1103\u1103\u1107","\u115e":"\u1103\u1105","\u11cb":"\u1103\u1105","\ua960":"\u1103\u1106","\ua961":"\u1103\u1107","\ud7cf":"\u1103\u1107","\ua962":"\u1103\u1109","\ud7d0":"\u1103\u1109","\ud7d1":"\u1103\u1109\u1100","\ua963":"\u1103\u110c","\ud7d2":"\u1103\u110c","\ud7d3":"\u1103\u110e","\ud7d4":"\u1103\u1110","\u3139":"\u1105","\u11af":"\u1105","\ua964":"\u1105\u1100","\u11b0":"\u1105\u1100","\u313a":"\u1105\u1100","\ua965":"\u1105\u1100\u1100","\ud7d5":"\u1105\u1100\u1100","\u11cc":"\u1105\u1100\u1109","\u3169":"\u1105\u1100\u1109","\ud7d6":"\u1105\u1100\u1112","\u1118":"\u1105\u1102","\u11cd":"\u1105\u1102","\ua966":"\u1105\u1103","\u11ce":"\u1105\u1103","\u316a":"\u1105\u1103","\ua967":"\u1105\u1103\u1103","\u11cf":"\u1105\u1103\u1112","\u1119":"\u1105\u1105","\u11d0":"\u1105\u1105","\ud7d7":"\u1105\u1105\u110f","\ua968":"\u1105\u1106","\u11b1":"\u1105\u1106","\u313b":"\u1105\u1106","\u11d1":"\u1105\u1106\u1100","\u11d2":"\u1105\u1106\u1109","\ud7d8":"\u1105\u1106\u1112","\ua969":"\u1105\u1107","\u11b2":"\u1105\u1107","\u313c":"\u1105\u1107","\ud7d9":"\u1105\u1107\u1103","\ua96a":"\u1105\u1107\u1107","\u11d3":"\u1105\u1107\u1109","\u316b":"\u1105\u1107\u1109","\ua96b":"\u1105\u1107\u110b","\u11d5":"\u1105\u1107\u110b","\ud7da":"\u1105\u1107\u1111","\u11d4":"\u1105\u1107\u1112","\ua96c":"\u1105\u1109","\u11b3":"\u1105\u1109","\u313d":"\u1105\u1109","\u11d6":"\u1105\u1109\u1109","\u111b":"\u1105\u110b","\ud7dd":"\u1105\u110b","\ua96d":"\u1105\u110c","\ua96e":"\u1105\u110f","\u11d8":"\u1105\u110f","\u11b4":"\u1105\u1110","\u313e":"\u1105\u1110","\u11b5":"\u1105\u1111","\u313f":"\u1105\u1111","\u111a":"\u1105\u1112","\u3140":"\u1105\u1112","\u113b":"\u1105\u1112","\u11b6":"\u1105\u1112","\ud7f2":"\u1105\u1112","\u11d7":"\u1105\u1140","\u316c":"\u1105\u1140","\ud7db":"\u1105\u114c","\u11d9":"\u1105\u1159","\u316d":"\u1105\u1159","\ud7dc":"\u1105\u1159\u1112","\u3141":"\u1106","\u11b7":"\u1106","\ua96f":"\u1106\u1100","\u11da":"\u1106\u1100","\ud7de":"\u1106\u1102","\ud7df":"\u1106\u1102\u1102","\ua970":"\u1106\u1103","\u11db":"\u1106\u1105","\ud7e0":"\u1106\u1106","\u111c":"\u1106\u1107","\u316e":"\u1106\u1107","\u11dc":"\u1106\u1107","\ud7e1":"\u1106\u1107\u1109","\ua971":"\u1106\u1109","\u11dd":"\u1106\u1109","\u316f":"\u1106\u1109","\u11de":"\u1106\u1109\u1109","\u111d":"\u1106\u110b","\u3171":"\u1106\u110b","\u11e2":"\u1106\u110b","\ud7e2":"\u1106\u110c","\u11e0":"\u1106\u110e","\u11e1":"\u1106\u1112","\u11df":"\u1106\u1140","\u3170":"\u1106\u1140","\u3142":"\u1107","\u11b8":"\u1107","\u111e":"\u1107\u1100","\u3172":"\u1107\u1100","\u111f":"\u1107\u1102","\u1120":"\u1107\u1103","\u3173":"\u1107\u1103","\ud7e3":"\u1107\u1103","\u11e3":"\u1107\u1105","\ud7e4":"\u1107\u1105\u1111","\ud7e5":"\u1107\u1106","\u1108":"\u1107\u1107","\u3143":"\u1107\u1107","\ud7e6":"\u1107\u1107","\u112c":"\u1107\u1107\u110b","\u3179":"\u1107\u1107\u110b","\u1121":"\u1107\u1109","\u3144":"\u1107\u1109","\u11b9":"\u1107\u1109","\u1122":"\u1107\u1109\u1100","\u3174":"\u1107\u1109\u1100","\u1123":"\u1107\u1109\u1103","\u3175":"\u1107\u1109\u1103","\ud7e7":"\u1107\u1109\u1103","\u1124":"\u1107\u1109\u1107","\u1125":"\u1107\u1109\u1109","\u1126":"\u1107\u1109\u110c","\ua972":"\u1107\u1109\u1110","\u112b":"\u1107\u110b","\u3178":"\u1107\u110b","\u11e6":"\u1107\u110b","\u1127":"\u1107\u110c","\u3176":"\u1107\u110c","\ud7e8":"\u1107\u110c","\u1128":"\u1107\u110e","\ud7e9":"\u1107\u110e","\ua973":"\u1107\u110f","\u1129":"\u1107\u1110","\u3177":"\u1107\u1110","\u112a":"\u1107\u1111","\u11e4":"\u1107\u1111","\ua974":"\u1107\u1112","\u11e5":"\u1107\u1112","\u3145":"\u1109","\u11ba":"\u1109","\u112d":"\u1109\u1100","\u317a":"\u1109\u1100","\u11e7":"\u1109\u1100","\u112e":"\u1109\u1102","\u317b":"\u1109\u1102","\u112f":"\u1109\u1103","\u317c":"\u1109\u1103","\u11e8":"\u1109\u1103","\u1130":"\u1109\u1105","\u11e9":"\u1109\u1105","\u1131":"\u1109\u1106","\ud7ea":"\u1109\u1106","\u1132":"\u1109\u1107","\u317d":"\u1109\u1107","\u11ea":"\u1109\u1107","\u1133":"\u1109\u1107\u1100","\ud7eb":"\u1109\u1107\u110b","\u110a":"\u1109\u1109","\u3146":"\u1109\u1109","\u11bb":"\u1109\u1109","\ud7ec":"\u1109\u1109\u1100","\ud7ed":"\u1109\u1109\u1103","\ua975":"\u1109\u1109\u1107","\u1134":"\u1109\u1109\u1109","\u1135":"\u1109\u110b","\u1136":"\u1109\u110c","\u317e":"\u1109\u110c","\ud7ef":"\u1109\u110c","\u1137":"\u1109\u110e","\ud7f0":"\u1109\u110e","\u1138":"\u1109\u110f","\u1139":"\u1109\u1110","\ud7f1":"\u1109\u1110","\u113a":"\u1109\u1111","\ud7ee":"\u1109\u1140","\u3147":"\u110b","\u11bc":"\u110b","\u1141":"\u110b\u1100","\u11ec":"\u110b\u1100","\u11ed":"\u110b\u1100\u1100","\u1142":"\u110b\u1103","\ua976":"\u110b\u1105","\u1143":"\u110b\u1106","\u1144":"\u110b\u1107","\u1145":"\u110b\u1109","\u11f1":"\u110b\u1109","\u3182":"\u110b\u1109","\u1147":"\u110b\u110b","\u3180":"\u110b\u110b","\u11ee":"\u110b\u110b","\u1148":"\u110b\u110c","\u1149":"\u110b\u110e","\u11ef":"\u110b\u110f","\u114a":"\u110b\u1110","\u114b":"\u110b\u1111","\ua977":"\u110b\u1112","\u1146":"\u110b\u1140","\u11f2":"\u110b\u1140","\u3183":"\u110b\u1140","\u3148":"\u110c","\u11bd":"\u110c","\ud7f7":"\u110c\u1107","\ud7f8":"\u110c\u1107\u1107","\u114d":"\u110c\u110b","\u110d":"\u110c\u110c","\u3149":"\u110c\u110c","\ud7f9":"\u110c\u110c","\ua978":"\u110c\u110c\u1112","\u314a":"\u110e","\u11be":"\u110e","\u1152":"\u110e\u110f","\u1153":"\u110e\u1112","\u314b":"\u110f","\u11bf":"\u110f","\u314c":"\u1110","\u11c0":"\u1110","\ua979":"\u1110\u1110","\u314d":"\u1111","\u11c1":"\u1111","\u1156":"\u1111\u1107","\u11f3":"\u1111\u1107","\ud7fa":"\u1111\u1109","\u1157":"\u1111\u110b","\u3184":"\u1111\u110b","\u11f4":"\u1111\u110b","\ud7fb":"\u1111\u1110","\ua97a":"\u1111\u1112","\u314e":"\u1112","\u11c2":"\u1112","\u11f5":"\u1112\u1102","\u11f6":"\u1112\u1105","\u11f7":"\u1112\u1106","\u11f8":"\u1112\u1107","\ua97b":"\u1112\u1109","\u1158":"\u1112\u1112","\u3185":"\u1112\u1112","\u113d":"\u113c\u113c","\u113f":"\u113e\u113e","\u317f":"\u1140","\u11eb":"\u1140","\ud7f3":"\u1140\u1107","\ud7f4":"\u1140\u1107\u110b","\u3181":"\u114c","\u11f0":"\u114c","\ud7f5":"\u114c\u1106","\ud7f6":"\u114c\u1112","\u114f":"\u114e\u114e","\u1151":"\u1150\u1150","\u3186":"\u1159","\u11f9":"\u1159","\ua97c":"\u1159\u1159","\u3164":"\u1160","\u314f":"\u1161","\u11a3":"\u1161\u30fc","\u1176":"\u1161\u1169","\u1177":"\u1161\u116e","\u1162":"\u1161\u4e28","\u3150":"\u1161\u4e28","\u3151":"\u1163","\u1178":"\u1163\u1169","\u1179":"\u1163\u116d","\u11a4":"\u1163\u116e","\u1164":"\u1163\u4e28","\u3152":"\u1163\u4e28","\u3153":"\u1165","\u117c":"\u1165\u30fc","\u117a":"\u1165\u1169","\u117b":"\u1165\u116e","\u1166":"\u1165\u4e28","\u3154":"\u1165\u4e28","\u3155":"\u1167","\u11a5":"\u1167\u1163","\u117d":"\u1167\u1169","\u117e":"\u1167\u116e","\u1168":"\u1167\u4e28","\u3156":"\u1167\u4e28","\u3157":"\u1169","\u116a":"\u1169\u1161","\u3158":"\u1169\u1161","\u116b":"\u1169\u1161\u4e28","\u3159":"\u1169\u1161\u4e28","\u11a6":"\u1169\u1163","\u11a7":"\u1169\u1163\u4e28","\u117f":"\u1169\u1165","\u1180":"\u1169\u1165\u4e28","\ud7b0":"\u1169\u1167","\u1181":"\u1169\u1167\u4e28","\u1182":"\u1169\u1169","\ud7b1":"\u1169\u1169\u4e28","\u1183":"\u1169\u116e","\u116c":"\u1169\u4e28","\u315a":"\u1169\u4e28","\u315b":"\u116d","\ud7b2":"\u116d\u1161","\ud7b3":"\u116d\u1161\u4e28","\u1184":"\u116d\u1163","\u3187":"\u116d\u1163","\u1186":"\u116d\u1163","\u1185":"\u116d\u1163\u4e28","\u3188":"\u116d\u1163\u4e28","\ud7b4":"\u116d\u1165","\u1187":"\u116d\u1169","\u1188":"\u116d\u4e28","\u3189":"\u116d\u4e28","\u315c":"\u116e","\u1189":"\u116e\u1161","\u118a":"\u116e\u1161\u4e28","\u116f":"\u116e\u1165","\u315d":"\u116e\u1165","\u118b":"\u116e\u1165\u30fc","\u1170":"\u116e\u1165\u4e28","\u315e":"\u116e\u1165\u4e28","\ud7b5":"\u116e\u1167","\u118c":"\u116e\u1167\u4e28","\u118d":"\u116e\u116e","\u1171":"\u116e\u4e28","\u315f":"\u116e\u4e28","\ud7b6":"\u116e\u4e28\u4e28","\u3160":"\u1172","\u118e":"\u1172\u1161","\ud7b7":"\u1172\u1161\u4e28","\u118f":"\u1172\u1165","\u1190":"\u1172\u1165\u4e28","\u1191":"\u1172\u1167","\u318a":"\u1172\u1167","\u1192":"\u1172\u1167\u4e28","\u318b":"\u1172\u1167\u4e28","\ud7b8":"\u1172\u1169","\u1193":"\u1172\u116e","\u1194":"\u1172\u4e28","\u318c":"\u1172\u4e28","\u318d":"\u119e","\ud7c5":"\u119e\u1161","\u119f":"\u119e\u1165","\ud7c6":"\u119e\u1165\u4e28","\u11a0":"\u119e\u116e","\u11a2":"\u119e\u119e","\u11a1":"\u119e\u4e28","\u318e":"\u119e\u4e28","\u30d8":"\u3078","\u2341":"\u303c","\u29c4":"\u303c","\ua49e":"\ua04a","\ua4ac":"\ua050","\ua49c":"\ua0c0","\ua4a8":"\ua132","\ua4bf":"\ua259","\ua4be":"\ua2b1","\ua494":"\ua2cd","\ua4c0":"\ua3ab","\ua4c2":"\ua3b5","\ua4ba":"\ua3bf","\ua4b0":"\ua3c2","\ua4a7":"\ua458","\u22a5":"\ua4d5","\u27c2":"\ua4d5","\ud834\ude1c":"\ua4d5","\ua7b1":"\ua4d5","\ua79e":"\ua4e4","\u2141":"\ua4e8","\u2142":"\ua4f6","\ud834\ude15":"\ua4f6","\ud834\ude2b":"\ua4f6","\ud81b\udf26":"\ua4f6","\ud801\udc11":"\ua4f6","\u2143":"\ud81b\udf00","\ud806\udee6":"\ud806\udee5\ud806\udeef","\ud806\udee8":"\ud806\udee5\ud806\udee5","\ud806\udee9":"\ud806\udee5\ud806\udee5\ud806\udeef","\ud806\udeea":"\ud806\udee5\ud806\udee5\ud806\udef0","\ud806\udee7":"\ud806\udee5\ud806\udef0","\ud806\udef4":"\ud806\udef3\ud806\udeef","\ud806\udef6":"\ud806\udef3\ud806\udef3","\ud806\udef7":"\ud806\udef3\ud806\udef3\ud806\udeef","\ud806\udef8":"\ud806\udef3\ud806\udef3\ud806\udef0","\ud806\udef5":"\ud806\udef3\ud806\udef0","\ud806\udeec":"\ud806\udeeb\ud806\udeef","\ud806\udeed":"\ud806\udeeb\ud806\udeeb","\ud806\udeee":"\ud806\udeeb\ud806\udeeb\ud806\udeef","\u2295":"\ud800\udea8","\u2a01":"\ud800\udea8","\ud83d\udf28":"\ud800\udea8","\ua69a":"\ud800\udea8","\u25bd":"\ud800\udebc","\ud834\ude14":"\ud800\udebc","\ud83d\udf04":"\ud800\udebc","\u29d6":"\ud800\udec0","\ua79b":"\ud801\udc3a","\ua79a":"\ud801\udc12","\ud801\udca0":"\ud801\udc86","\ud800\udfd1":"\ud800\udf82","\ud800\udfd3":"\ud800\udf93","\ud808\udc38":"\ud800\udf9a","\u2625":"\ud802\udd9e","\ud80c\udef9":"\ud802\udd9e","\u3039":"\u5344","\uf967":"\u4e0d","\ud87e\udc00":"\u4e3d","\ufa70":"\u4e26","\u239c":"\u4e28","\u239f":"\u4e28","\u23a2":"\u4e28","\u23a5":"\u4e28","\u23aa":"\u4e28","\u23ae":"\u4e28","\u31d1":"\u4e28","\u1175":"\u4e28","\u3163":"\u4e28","\u2f01":"\u4e28","\u119c":"\u4e28\u30fc","\u1198":"\u4e28\u1161","\u1199":"\u4e28\u1163","\ud7bd":"\u4e28\u1163\u1169","\ud7be":"\u4e28\u1163\u4e28","\ud7bf":"\u4e28\u1167","\ud7c0":"\u4e28\u1167\u4e28","\u119a":"\u4e28\u1169","\ud7c1":"\u4e28\u1169\u4e28","\ud7c2":"\u4e28\u116d","\u119b":"\u4e28\u116e","\ud7c3":"\u4e28\u1172","\u119d":"\u4e28\u119e","\ud7c4":"\u4e28\u4e28","\uf905":"\u4e32","\ud87e\udc01":"\u4e38","\uf95e":"\u4e39","\ud87e\udc02":"\u4e41","\u31e0":"\u4e59","\u2f04":"\u4e59","\u31df":"\u4e5a","\u2e83":"\u4e5a","\u31d6":"\u4e5b","\u2e82":"\u4e5b","\u2ef2":"\u4e80","\uf91b":"\u4e82","\u31da":"\u4e85","\u2f05":"\u4e85","\uf9ba":"\u4e86","\u30cb":"\u4e8c","\u2f06":"\u4e8c","\ud87e\udc03":"\ud840\udd22","\u2f07":"\u4ea0","\uf977":"\u4eae","\u2f08":"\u4eba","\u30a4":"\u4ebb","\u2e85":"\u4ebb","\uf9fd":"\u4ec0","\ud87e\udc19":"\u4ecc","\uf9a8":"\u4ee4","\ud87e\udc04":"\u4f60","\u5002":"\u4f75","\ud87e\udc07":"\u4f75","\ufa73":"\u4f80","\uf92d":"\u4f86","\uf9b5":"\u4f8b","\ufa30":"\u4fae","\ud87e\udc05":"\u4fae","\ud87e\udc06":"\u4fbb","\uf965":"\u4fbf","\u503c":"\u5024","\uf9d4":"\u502b","\ud87e\udc08":"\u507a","\ud87e\udc09":"\u5099","\ud87e\udc0b":"\u50cf","\uf9bb":"\u50da","\ufa31":"\u50e7","\ud87e\udc0a":"\u50e7","\ud87e\udc0c":"\u349e","\u2f09":"\u513f","\ufa0c":"\u5140","\u2e8e":"\u5140","\ufa74":"\u5145","\ufa32":"\u514d","\ud87e\udc0e":"\u514d","\ud87e\udc0f":"\u5154","\ud87e\udc10":"\u5164","\u2f0a":"\u5165","\ud87e\udc14":"\u5167","\ufa72":"\u5168","\uf978":"\u5169","\u30cf":"\u516b","\u2f0b":"\u516b","\uf9d1":"\u516d","\ud87e\udc11":"\u5177","\ud87e\udc12":"\ud841\udd1c","\ud87e\udd1b":"\ud841\udd25","\ufa75":"\u5180","\ud87e\udc13":"\u34b9","\u2f0c":"\u5182","\ud87e\udc15":"\u518d","\ud87e\udc16":"\ud841\udd4b","\ud87e\udcd2":"\u5192","\ud87e\udcd3":"\u5195","\ud87e\uddca":"\u34bb","\ud87e\udcd4":"\u6700","\u2f0d":"\u5196","\ud87e\udc17":"\u5197","\ud87e\udc18":"\u51a4","\u2f0e":"\u51ab","\ud87e\udc1a":"\u51ac","\ufa71":"\u51b5","\ud87e\udc1b":"\u51b5","\uf92e":"\u51b7","\uf979":"\u51c9","\uf955":"\u51cc","\uf954":"\u51dc","\ufa15":"\u51de","\u2f0f":"\u51e0","\ud87e\udc0d":"\ud841\ude3a","\ud87e\udc1d":"\u51f5","\u2f10":"\u51f5","\u2f11":"\u5200","\u2e89":"\u5202","\ud87e\udc1e":"\u5203","\ufa00":"\u5207","\ud87e\udc50":"\u5207","\uf99c":"\u5217","\uf9dd":"\u5229","\ud87e\udc1f":"\u34df","\uf9ff":"\u523a","\ud87e\udc20":"\u523b","\ud87e\udc21":"\u5246","\ud87e\udc22":"\u5272","\ud87e\udc23":"\u5277","\uf9c7":"\u5289","\ud87e\uddd9":"\ud842\udc04","\u30ab":"\u529b","\uf98a":"\u529b","\u2f12":"\u529b","\uf99d":"\u52a3","\ud87e\udc24":"\u3515","\ud87e\udd92":"\u52b3","\ufa76":"\u52c7","\ud87e\udc25":"\u52c7","\ufa33":"\u52c9","\ud87e\udc26":"\u52c9","\uf952":"\u52d2","\uf92f":"\u52de","\ufa34":"\u52e4","\ud87e\udc27":"\u52e4","\uf97f":"\u52f5","\u2f13":"\u52f9","\ufa77":"\u52fa","\ud87e\udc28":"\u52fa","\ud87e\udc29":"\u5305","\ud87e\udc2a":"\u5306","\ud87e\udddd":"\ud842\udcde","\u2f14":"\u5315","\uf963":"\u5317","\ud87e\udc2b":"\u5317","\u2f15":"\u531a","\u2f16":"\u5338","\uf9eb":"\u533f","\u2f17":"\u5341","\u3038":"\u5341","\u303a":"\u5345","\ud87e\udc2c":"\u5349","\u0fd6":"\u534d","\u0fd5":"\u5350","\ufa35":"\u5351","\ud87e\udc2d":"\u5351","\ud87e\udc2e":"\u535a","\u30c8":"\u535c","\u2f18":"\u535c","\u2f19":"\u5369","\u2e8b":"\u353e","\ud87e\udc2f":"\u5373","\uf91c":"\u5375","\ud87e\udc30":"\u537d","\ud87e\udc31":"\u537f","\ud87e\udc32":"\u537f","\ud87e\udc33":"\u537f","\u2f1a":"\u5382","\ud87e\udc34":"\ud842\ude2c","\u2f1b":"\u53b6","\uf96b":"\u53c3","\u2f1c":"\u53c8","\ud87e\udc36":"\u53ca","\ud87e\udc37":"\u53df","\ud87e\udc38":"\ud842\udf63","\u30ed":"\u53e3","\u2f1d":"\u53e3","\u56d7":"\u53e3","\u2f1e":"\u53e3","\uf906":"\u53e5","\ud87e\udc39":"\u53eb","\ud87e\udc3a":"\u53f1","\ud87e\udc3b":"\u5406","\uf9de":"\u540f","\uf9ed":"\u541d","\ud87e\udc3d":"\u5438","\uf980":"\u5442","\ud87e\udc3e":"\u5448","\ud87e\udc3f":"\u5468","\ud87e\udc3c":"\u549e","\ud87e\udc40":"\u54a2","\uf99e":"\u54bd","\u439b":"\u3588","\ud87e\udc41":"\u54f6","\ud87e\udc42":"\u5510","\ud87e\udc43":"\u5553","\u555f":"\u5553","\ufa79":"\u5555","\ud87e\udc44":"\u5563","\ud87e\udc45":"\u5584","\ud87e\udc46":"\u5584","\uf90b":"\u5587","\ufa7a":"\u5599","\ud87e\udc47":"\u5599","\ufa36":"\u559d","\ufa78":"\u559d","\ud87e\udc48":"\u55ab","\ud87e\udc49":"\u55b3","\ufa0d":"\u55c0","\ud87e\udc4a":"\u55c2","\ufa7b":"\u55e2","\ufa37":"\u5606","\ud87e\udc4c":"\u5606","\ud87e\udc4e":"\u5651","\ud87e\udc4f":"\u5674","\ufa38":"\u5668","\uf9a9":"\u56f9","\ud87e\udc4b":"\u5716","\ud87e\udc4d":"\u5717","\u2f1f":"\u571f","\u58eb":"\u571f","\u2f20":"\u571f","\ud87e\udc55":"\u578b","\ud87e\udc52":"\u57ce","\u39b3":"\u363d","\ud87e\udc53":"\u57f4","\ud87e\udc54":"\u580d","\ud87e\udc57":"\u5831","\ud87e\udc56":"\u5832","\ufa39":"\u5840","\ufa10":"\u585a","\ufa7c":"\u585a","\uf96c":"\u585e","\u586b":"\u5861","\u58ff":"\u58ab","\ud87e\udc58":"\u58ac","\ufa7d":"\u58b3","\uf94a":"\u58d8","\uf942":"\u58df","\ud87e\udc59":"\ud845\udce4","\ud87e\udc51":"\u58ee","\ud87e\udc5a":"\u58f2","\ud87e\udc5b":"\u58f7","\u2f21":"\u5902","\ud87e\udc5c":"\u5906","\u2f22":"\u590a","\u30bf":"\u5915","\u2f23":"\u5915","\ud87e\udc5d":"\u591a","\ud87e\udc5e":"\u5922","\u2f24":"\u5927","\ufa7e":"\u5944","\uf90c":"\u5948","\uf909":"\u5951","\ufa7f":"\u5954","\ud87e\udc5f":"\u5962","\uf981":"\u5973","\u2f25":"\u5973","\ud87e\udc60":"\ud845\udea8","\ud87e\udc61":"\ud845\udeea","\ud87e\udc65":"\u59d8","\ud87e\udc62":"\u59ec","\ud87e\udc63":"\u5a1b","\ud87e\udc64":"\u5a27","\ufa80":"\u5a62","\ud87e\udc66":"\u5a66","\u5b00":"\u5aaf","\ud87e\udc67":"\u36ee","\ud87e\udc68":"\u36fc","\ud87e\udd86":"\u5ab5","\ud87e\udc69":"\u5b08","\ufa81":"\u5b28","\ud87e\udc6a":"\u5b3e","\ud87e\udc6b":"\u5b3e","\u2f26":"\u5b50","\u2f27":"\u5b80","\ufa04":"\u5b85","\ud87e\udc6c":"\ud846\uddc8","\ud87e\udc6d":"\u5bc3","\ud87e\udc6e":"\u5bd8","\uf95f":"\u5be7","\uf9aa":"\u5be7","\ud87e\udc6f":"\u5be7","\uf9bc":"\u5bee","\ud87e\udc70":"\u5bf3","\ud87e\udc71":"\ud846\udf18","\u2f28":"\u5bf8","\ud87e\udc72":"\u5bff","\ud87e\udc73":"\u5c06","\u2f29":"\u5c0f","\ud87e\udc75":"\u5c22","\u2e90":"\u5c22","\u2f2a":"\u5c22","\u2e8f":"\u5c23","\ud87e\udc76":"\u3781","\u2f2b":"\u5c38","\uf9bd":"\u5c3f","\ud87e\udc77":"\u5c60","\uf94b":"\u5c62","\ufa3b":"\u5c64","\uf9df":"\u5c65","\ufa3c":"\u5c6e","\ud87e\udc78":"\u5c6e","\u2f2c":"\u5c6e","\ud87e\udcf8":"\ud847\udd0b","\u2f2d":"\u5c71","\ud87e\udc79":"\u5cc0","\ud87e\udc7a":"\u5c8d","\ud87e\udc7b":"\ud847\udde4","\ud87e\udc7d":"\ud847\udde6","\uf9d5":"\u5d19","\ud87e\udc7c":"\u5d43","\uf921":"\u5d50","\ud87e\udc7f":"\u5d6b","\ud87e\udc7e":"\u5d6e","\ud87e\udc80":"\u5d7c","\ud87e\uddf4":"\u5db2","\uf9ab":"\u5dba","\u2f2e":"\u5ddb","\ud87e\udc82":"\u5de2","\u30a8":"\u5de5","\u2f2f":"\u5de5","\u2f30":"\u5df1","\u2e92":"\u5df3","\ud87e\udc83":"\u382f","\ud87e\udc84":"\u5dfd","\u2f31":"\u5dfe","\u5e32":"\u5e21","\ud87e\udc85":"\u5e28","\ud87e\udc86":"\u5e3d","\ud87e\udc87":"\u5e69","\ud87e\udc88":"\u3862","\ud87e\udc89":"\ud848\udd83","\u2f32":"\u5e72","\uf98e":"\u5e74","\ud87e\udd39":"\ud848\udd9f","\u2e93":"\u5e7a","\u2f33":"\u5e7a","\u2f34":"\u5e7f","\ufa01":"\u5ea6","\ud87e\udc8a":"\u387c","\ud87e\udc8b":"\u5eb0","\ud87e\udc8c":"\u5eb3","\ud87e\udc8d":"\u5eb6","\uf928":"\u5eca","\ud87e\udc8e":"\u5eca","\uf9a2":"\u5ec9","\ufa82":"\u5ed2","\ufa0b":"\u5ed3","\ufa83":"\u5ed9","\uf982":"\u5eec","\u2f35":"\u5ef4","\ud87e\udc90":"\u5efe","\u2f36":"\u5efe","\ud87e\udc91":"\ud848\udf31","\ud87e\udc92":"\ud848\udf31","\uf943":"\u5f04","\u2f37":"\u5f0b","\u2f38":"\u5f13","\ud87e\udc94":"\u5f22","\ud87e\udc95":"\u5f22","\u2f39":"\u5f50","\u2e94":"\u5f51","\ud87e\udc74":"\u5f53","\ud87e\udc96":"\u38c7","\u2f3a":"\u5f61","\ud87e\udc99":"\u5f62","\ufa84":"\u5f69","\ud87e\udc9a":"\u5f6b","\u2f3b":"\u5f73","\uf9d8":"\u5f8b","\ud87e\udc9b":"\u38e3","\ud87e\udc9c":"\u5f9a","\uf966":"\u5fa9","\ufa85":"\u5fad","\u2f3c":"\u5fc3","\u2e96":"\u5fc4","\u2e97":"\u38fa","\ud87e\udc9d":"\u5fcd","\ud87e\udc9e":"\u5fd7","\uf9a3":"\u5ff5","\ud87e\udc9f":"\u5ff9","\uf960":"\u6012","\uf9ac":"\u601c","\ufa6b":"\u6075","\ud87e\udca2":"\u391c","\ud87e\udca1":"\u393a","\ud87e\udca0":"\u6081","\ufa3d":"\u6094","\ud87e\udca3":"\u6094","\ud87e\udca5":"\u60c7","\ufa86":"\u60d8","\uf9b9":"\u60e1","\ud87e\udca4":"\ud849\uded4","\ufa88":"\u6108","\ufa3e":"\u6168","\uf9d9":"\u6144","\ud87e\udca6":"\u6148","\ud87e\udca7":"\u614c","\ud87e\udca9":"\u614c","\ufa87":"\u614e","\ud87e\udca8":"\u614e","\ufa8a":"\u6160","\ud87e\udcaa":"\u617a","\ufa3f":"\u618e","\ufa89":"\u618e","\ud87e\udcab":"\u618e","\uf98f":"\u6190","\ud87e\udcad":"\u61a4","\ud87e\udcae":"\u61af","\ud87e\udcac":"\u61b2","\ufad0":"\ud84a\udc44","\ufacf":"\ud84a\udc4a","\ud87e\udcaf":"\u61de","\ufa40":"\u61f2","\ufa8b":"\u61f2","\ud87e\udcb0":"\u61f2","\uf90d":"\u61f6","\ud87e\udcb1":"\u61f6","\uf990":"\u6200","\u2f3d":"\u6208","\ud87e\udcb2":"\u6210","\ud87e\udcb3":"\u621b","\uf9d2":"\u622e","\ufa8c":"\u6234","\u2f3e":"\u6236","\u6238":"\u6236","\u2f3f":"\u624b","\u2e98":"\u624c","\ud87e\udcb4":"\u625d","\ud87e\udcb5":"\u62b1","\uf925":"\u62c9","\uf95b":"\u62cf","\ufa02":"\u62d3","\ud87e\udcb6":"\u62d4","\ud87e\udcba":"\u62fc","\uf973":"\u62fe","\ud87e\udcb8":"\ud84a\udf0c","\ud87e\udcb9":"\u633d","\ud87e\udcb7":"\u6350","\ud87e\udcbb":"\u6368","\uf9a4":"\u637b","\ud87e\udcbc":"\u6383","\uf975":"\u63a0","\ud87e\udcc1":"\u63a9","\ufa8d":"\u63c4","\ud87e\udcbd":"\u63e4","\ufa8f":"\u6452","\ud87e\udcbe":"\ud84a\udff1","\ufa8e":"\u641c","\ud87e\udcbf":"\u6422","\ud87e\udcc0":"\u63c5","\ud87e\udcc3":"\u6469","\ud87e\udcc6":"\u6477","\ud87e\udcc4":"\u647e","\ud87e\udcc2":"\u3a2e","\u6409":"\u3a41","\uf991":"\u649a","\ud87e\udcc5":"\u649d","\uf930":"\u64c4","\ud87e\udcc7":"\u3a6c","\u2f40":"\u652f","\u2f41":"\u6534","\u2e99":"\u6535","\ufa41":"\u654f","\ud87e\udcc8":"\u654f","\ufa90":"\u6556","\ud87e\udcc9":"\u656c","\uf969":"\u6578","\ud87e\udcca":"\ud84c\udc0a","\u2f42":"\u6587","\u2eeb":"\u6589","\u2f43":"\u6597","\uf9be":"\u6599","\u2f44":"\u65a4","\u2f45":"\u65b9","\uf983":"\u65c5","\u2f46":"\u65e0","\u2e9b":"\u65e1","\ufa42":"\u65e2","\ud87e\udccb":"\u65e3","\u2f47":"\u65e5","\uf9e0":"\u6613","\u66f6":"\u3ada","\ud87e\udcd1":"\u3ae4","\ud87e\udccd":"\u6649","\u6669":"\u665a","\ufa12":"\u6674","\ufa91":"\u6674","\ufa43":"\u6691","\ud87e\udccf":"\u6691","\uf9c5":"\u6688","\ud87e\udcd0":"\u3b08","\ud87e\udcd5":"\u669c","\ufa06":"\u66b4","\uf98b":"\u66c6","\ud87e\udcce":"\u3b19","\ud87e\udc97":"\ud84c\udeb8","\u2f48":"\u66f0","\uf901":"\u66f4","\ud87e\udccc":"\u66f8","\u2f49":"\u6708","\ud87e\udd80":"\ud84c\udf5f","\u80a6":"\u670c","\u80d0":"\u670f","\u80ca":"\u6710","\u8101":"\u6713","\u80f6":"\u3b35","\uf929":"\u6717","\ufa92":"\u6717","\ud87e\udcd8":"\u6717","\u8127":"\u6718","\ufa93":"\u671b","\ud87e\udcd9":"\u671b","\u5e50":"\u3b3a","\u4420":"\u3b3b","\ud87e\udd89":"\ud84c\udf93","\u81a7":"\u6723","\ud87e\udd8a":"\ud84c\udf9c","\u2f4a":"\u6728","\uf9e1":"\u674e","\ud87e\udcdc":"\u6753","\ufa94":"\u6756","\ud87e\udcdb":"\u675e","\ud87e\udcdd":"\ud84c\udfc3","\u67ff":"\u676e","\uf9c8":"\u677b","\ud87e\udce0":"\u6785","\uf9f4":"\u6797","\ud87e\udcde":"\u3b49","\ufad1":"\ud84c\udfd5","\uf9c9":"\u67f3","\ud87e\udcdf":"\u67fa","\uf9da":"\u6817","\ud87e\udce5":"\u681f","\ud87e\udce1":"\u6852","\ud87e\udce3":"\ud84d\udc6d","\uf97a":"\u6881","\ufa44":"\u6885","\ud87e\udce2":"\u6885","\ud87e\udce4":"\u688e","\uf9e2":"\u68a8","\ud87e\udce6":"\u6914","\ud87e\udce8":"\u6942","\ufad2":"\u3b9d","\ud87e\udce7":"\u3b9d","\u69e9":"\u3ba3","\u6a27":"\u699d","\ud87e\udce9":"\u69a3","\ud87e\udcea":"\u69ea","\uf914":"\u6a02","\uf95c":"\u6a02","\uf9bf":"\u6a02","\uf94c":"\u6a13","\ud87e\udcec":"\ud84d\udea3","\ud87e\udceb":"\u6aa8","\uf931":"\u6ad3","\ud87e\udced":"\u6adb","\uf91d":"\u6b04","\ud87e\udcee":"\u3c18","\u2f4b":"\u6b20","\ud87e\udcef":"\u6b21","\ud87e\udcf0":"\ud84e\udca7","\ud87e\udcf1":"\u6b54","\ud87e\udcf2":"\u3c4e","\u2f4c":"\u6b62","\u2eed":"\u6b6f","\ud87e\udcf3":"\u6b72","\uf98c":"\u6b77","\ufa95":"\u6b79","\u2f4d":"\u6b79","\u2e9e":"\u6b7a","\ud87e\udcf4":"\u6b9f","\uf9a5":"\u6bae","\u2f4e":"\u6bb3","\uf970":"\u6bba","\ufa96":"\u6bba","\ud87e\udcf5":"\u6bba","\ud87e\udcf6":"\u6bbb","\ud87e\udcf7":"\ud84e\ude8d","\u2f4f":"\u6bcb","\u2e9f":"\u6bcd","\ud87e\udcf9":"\ud84e\udefa","\u2f50":"\u6bd4","\u2f51":"\u6bdb","\u2f52":"\u6c0f","\u2ea0":"\u6c11","\u2f53":"\u6c14","\u2f54":"\u6c34","\u2ea1":"\u6c35","\u2ea2":"\u6c3a","\ud87e\udcfa":"\u6c4e","\ud87e\udcfe":"\u6c67","\uf972":"\u6c88","\ud87e\udcfc":"\u6cbf","\uf968":"\u6ccc","\ud87e\udcfd":"\u6ccd","\uf9e3":"\u6ce5","\ud87e\udcfb":"\ud84f\udcbc","\uf915":"\u6d1b","\ufa05":"\u6d1e","\ud87e\udd07":"\u6d34","\ud87e\udd00":"\u6d3e","\uf9ca":"\u6d41","\ufa97":"\u6d41","\ud87e\udd02":"\u6d41","\ud87e\udcff":"\u6d16","\ud87e\udd03":"\u6d69","\uf92a":"\u6d6a","\ufa45":"\u6d77","\ud87e\udd01":"\u6d77","\ud87e\udd04":"\u6d78","\ud87e\udd05":"\u6d85","\ud87e\udd06":"\ud84f\udd1e","\uf9f5":"\u6dcb","\uf94d":"\u6dda","\uf9d6":"\u6dea","\ud87e\udd0e":"\u6df9","\ufa46":"\u6e1a","\ud87e\udd08":"\u6e2f","\ud87e\udd09":"\u6e6e","\u6f59":"\u6e88","\ufa99":"\u6ecb","\ud87e\udd0b":"\u6ecb","\uf9cb":"\u6e9c","\uf9ec":"\u6eba","\ud87e\udd0c":"\u6ec7","\uf904":"\u6ed1","\ufa98":"\u6edb","\ud87e\udd0a":"\u3d33","\uf94e":"\u6f0f","\ufa47":"\u6f22","\ufa9a":"\u6f22","\uf992":"\u6f23","\ud87e\udd0d":"\ud84f\uded1","\ud87e\udd0f":"\u6f6e","\ud87e\udd10":"\ud84f\udf5e","\ud87e\udd11":"\ud84f\udf8e","\ud87e\udd12":"\u6fc6","\uf922":"\u6feb","\uf984":"\u6ffe","\ud87e\udd15":"\u701b","\ufa9b":"\u701e","\ud87e\udd14":"\u701e","\ud87e\udd13":"\u7039","\ud87e\udd17":"\u704a","\ud87e\udd16":"\u3d96","\u2f55":"\u706b","\u2ea3":"\u706c","\ud87e\udc35":"\u7070","\ud87e\udd19":"\u7077","\ud87e\udd18":"\u707d","\uf9fb":"\u7099","\ud87e\udd1a":"\u70ad","\uf99f":"\u70c8","\uf916":"\u70d9","\ufa48":"\u716e","\ufa9c":"\u716e","\ud87e\udd1d":"\ud850\ude63","\ud87e\udd1c":"\u7145","\uf993":"\u7149","\ufa6c":"\ud850\udeee","\ud87e\udd1e":"\u719c","\uf9c0":"\u71ce","\uf9ee":"\u71d0","\ud87e\udd1f":"\ud850\udfab","\uf932":"\u7210","\uf91e":"\u721b","\ud87e\udd20":"\u7228","\u2f56":"\u722a","\ufa49":"\u722b","\u2ea4":"\u722b","\ufa9e":"\u7235","\ud87e\udd21":"\u7235","\u2f57":"\u7236","\u2f58":"\u723b","\u2ea6":"\u4e2c","\u2f59":"\u723f","\u2f5a":"\u7247","\ud87e\udd22":"\u7250","\u2f5b":"\u7259","\ud87e\udd23":"\ud851\ude08","\u2f5c":"\u725b","\uf946":"\u7262","\ud87e\udd24":"\u7280","\ud87e\udd25":"\u7295","\u2f5d":"\u72ac","\u2ea8":"\u72ad","\ufa9f":"\u72af","\uf9fa":"\u72c0","\ud87e\udd26":"\ud851\udf35","\uf92b":"\u72fc","\ufa16":"\u732a","\ufaa0":"\u732a","\ud87e\udd27":"\ud852\udc14","\uf9a7":"\u7375","\ud87e\udd28":"\u737a","\u2f5e":"\u7384","\uf961":"\u7387","\uf9db":"\u7387","\u2f5f":"\u7389","\ud87e\udd29":"\u738b","\ud87e\udd2a":"\u3eac","\ud87e\udd2b":"\u73a5","\uf9ad":"\u73b2","\ud87e\udd2c":"\u3eb8","\ud87e\udd2d":"\u3eb8","\uf917":"\u73de","\uf9cc":"\u7409","\uf9e4":"\u7406","\ufa4a":"\u7422","\ud87e\udd2e":"\u7447","\ud87e\udd2f":"\u745c","\uf9ae":"\u7469","\ufaa1":"\u7471","\ud87e\udd30":"\u7471","\ud87e\udd31":"\u7485","\uf994":"\u7489","\uf9ef":"\u7498","\ud87e\udd32":"\u74ca","\u2f60":"\u74dc","\u2f61":"\u74e6","\ud87e\udd33":"\u3f1b","\ufaa2":"\u7506","\u2f62":"\u7518","\u2f63":"\u751f","\ud87e\udd34":"\u7524","\u2f64":"\u7528","\u2f65":"\u7530","\ufaa3":"\u753b","\ud87e\udd36":"\u753e","\ud87e\udd35":"\ud853\udc36","\uf9cd":"\u7559","\uf976":"\u7565","\uf962":"\u7570","\ud87e\udd38":"\u7570","\ud87e\udd37":"\ud853\udc92","\u2f66":"\u758b","\u2f67":"\u7592","\uf9e5":"\u75e2","\ud87e\udd3a":"\u7610","\ufaa5":"\u761f","\ufaa4":"\u761d","\uf9c1":"\u7642","\uf90e":"\u7669","\u2f68":"\u7676","\u2f69":"\u767d","\ud87e\udd3b":"\ud853\udfa1","\ud87e\udd3c":"\ud853\udfb8","\u2f6a":"\u76ae","\u2f6b":"\u76bf","\ud87e\udd3d":"\ud854\udc44","\ud87e\udd3e":"\u3ffc","\ufa17":"\u76ca","\ufaa6":"\u76ca","\ufaa7":"\u76db","\uf933":"\u76e7","\ud87e\udd3f":"\u4008","\u2f6c":"\u76ee","\ufaa8":"\u76f4","\ud87e\udd40":"\u76f4","\ud87e\udd42":"\ud854\udcf2","\ud87e\udd41":"\ud854\udcf3","\uf96d":"\u7701","\ufad3":"\u4018","\ud87e\udd43":"\ud854\udd19","\ud87e\udd45":"\u771e","\ud87e\udd46":"\u771f","\ud87e\udd47":"\u771f","\ud87e\udd44":"\ud854\udd33","\ufaaa":"\u7740","\ufaa9":"\u774a","\ud87e\udd48":"\u774a","\u9fc3":"\u4039","\ufad4":"\u4039","\ud87e\udd49":"\u4039","\u6663":"\u403f","\ud87e\udd4b":"\u4046","\ud87e\udd4a":"\u778b","\ufad5":"\ud854\ude49","\ufa9d":"\u77a7","\u2f6d":"\u77db","\u2f6e":"\u77e2","\u2f6f":"\u77f3","\ud87e\udd4c":"\u4096","\ud87e\udd4d":"\ud855\udc1d","\u784f":"\u7814","\ud87e\udd4e":"\u784e","\uf9ce":"\u786b","\uf93b":"\u788c","\ud87e\udd4f":"\u788c","\ufa4b":"\u7891","\uf947":"\u78ca","\ufaab":"\u78cc","\ud87e\udd50":"\u78cc","\uf964":"\u78fb","\ud87e\udd51":"\u40e3","\uf985":"\u792a","\u2f70":"\u793a","\u2ead":"\u793b","\ufa18":"\u793c","\ufa4c":"\u793e","\ufa4e":"\u7948","\ufa4d":"\u7949","\ud87e\udd52":"\ud855\ude26","\ufa4f":"\u7950","\ufa50":"\u7956","\ud87e\udd53":"\u7956","\ufa51":"\u795d","\ufa19":"\u795e","\ufa1a":"\u7965","\ufa61":"\u8996","\ufab8":"\u8996","\uf93c":"\u797f","\ud87e\udd54":"\ud855\ude9a","\ufa52":"\u798d","\ufa53":"\u798e","\ufa1b":"\u798f","\ud87e\udd56":"\u798f","\ud87e\udd55":"\ud855\udec5","\uf9b6":"\u79ae","\u2f71":"\u79b8","\u2f72":"\u79be","\uf995":"\u79ca","\ud87e\udd58":"\u412f","\ud87e\udd57":"\u79eb","\uf956":"\u7a1c","\ud87e\udd5a":"\u7a4a","\ufa54":"\u7a40","\ud87e\udd59":"\u7a40","\ud87e\udd5b":"\u7a4f","\u2f73":"\u7a74","\ufa55":"\u7a81","\ud87e\udd5c":"\ud856\udd7c","\ufaac":"\u7ab1","\uf9f7":"\u7acb","\u2f74":"\u7acb","\u2eef":"\u7adc","\ud87e\udd5d":"\ud856\udea7","\ud87e\udd5e":"\ud856\udea7","\ud87e\udd5f":"\u7aee","\u2f75":"\u7af9","\uf9f8":"\u7b20","\ufa56":"\u7bc0","\ufaad":"\u7bc0","\ud87e\udd60":"\u4202","\ud87e\udd61":"\ud856\udfab","\ud87e\udd62":"\u7bc6","\ud87e\udd64":"\u4227","\ud87e\udd63":"\u7bc9","\ud87e\udd65":"\ud857\udc80","\ufad6":"\ud857\udcd0","\uf9a6":"\u7c3e","\uf944":"\u7c60","\u2f76":"\u7c73","\ufaae":"\u7c7b","\uf9f9":"\u7c92","\ufa1d":"\u7cbe","\ud87e\udd66":"\u7cd2","\ufa03":"\u7cd6","\ud87e\udd68":"\u7ce8","\ud87e\udd67":"\u42a0","\ud87e\udd69":"\u7ce3","\uf97b":"\u7ce7","\u2f77":"\u7cf8","\u2eaf":"\u7cf9","\ud87e\udd6b":"\ud857\udf86","\ud87e\udd6a":"\u7d00","\uf9cf":"\u7d10","\uf96a":"\u7d22","\uf94f":"\u7d2f","\u7d76":"\u7d55","\ud87e\udd6c":"\u7d63","\ufaaf":"\u7d5b","\uf93d":"\u7da0","\uf957":"\u7dbe","\ud87e\udd6e":"\u7dc7","\uf996":"\u7df4","\ufa57":"\u7df4","\ufab0":"\u7df4","\ud87e\udd6f":"\u7e02","\ud87e\udd6d":"\u4301","\ufa58":"\u7e09","\uf950":"\u7e37","\ufa59":"\u7e41","\ud87e\udd70":"\u7e45","\ud87e\udc98":"\ud858\uddda","\ud87e\udd71":"\u4334","\u2f78":"\u7f36","\ud87e\udd72":"\ud858\ude28","\ufab1":"\u7f3e","\ud87e\udd73":"\ud858\ude47","\u2f79":"\u7f51","\u2eab":"\u7f52","\u2eb2":"\u7f52","\u2eb1":"\u7f53","\ud87e\udd74":"\u4359","\ufa5a":"\u7f72","\ud87e\udd75":"\ud858\uded9","\uf9e6":"\u7f79","\ud87e\udd76":"\u7f7a","\uf90f":"\u7f85","\ud87e\udd77":"\ud858\udf3e","\u2f7a":"\u7f8a","\ud87e\udd78":"\u7f95","\uf9af":"\u7f9a","\ufa1e":"\u7fbd","\u2f7b":"\u7fbd","\ud87e\udd79":"\u7ffa","\uf934":"\u8001","\u2f7c":"\u8001","\u2eb9":"\u8002","\ufa5b":"\u8005","\ufab2":"\u8005","\ud87e\udd7a":"\u8005","\u2f7d":"\u800c","\ud87e\udd7b":"\ud859\udcda","\u2f7e":"\u8012","\ud87e\udd7c":"\ud859\udd23","\u2f7f":"\u8033","\uf9b0":"\u8046","\ud87e\udd7d":"\u8060","\ud87e\udd7e":"\ud859\udda8","\uf997":"\u806f","\ud87e\udd7f":"\u8070","\uf945":"\u807e","\u2f80":"\u807f","\u2eba":"\u8080","\u2f81":"\u8089","\uf953":"\u808b","\ud87e\udcd6":"\u80ad","\ud87e\udd82":"\u80b2","\ud87e\udd81":"\u43d5","\ud87e\udcd7":"\u43d9","\u8141":"\u80fc","\ud87e\udd83":"\u8103","\ud87e\udd85":"\u813e","\ud87e\udd84":"\u440b","\ud87e\udcda":"\u6721","\ud87e\udd87":"\ud859\udfa7","\ud87e\udd88":"\ud859\udfb5","\u6726":"\u4443","\uf926":"\u81d8","\u2f82":"\u81e3","\uf9f6":"\u81e8","\u2f83":"\u81ea","\ufa5c":"\u81ed","\u2f84":"\u81f3","\u2f85":"\u81fc","\ud87e\udc93":"\u8201","\ud87e\udd8b":"\u8201","\ud87e\udd8c":"\u8204","\u2f86":"\u820c","\ufa6d":"\u8218","\u2f87":"\u821b","\u2f88":"\u821f","\ud87e\udd8e":"\u446b","\u2f89":"\u826e","\uf97c":"\u826f","\u2f8a":"\u8272","\u2f8b":"\u8278","\ufa5d":"\u8279","\ufa5e":"\u8279","\u2ebe":"\u8279","\u2ebf":"\u8279","\u2ec0":"\u8279","\ud87e\udd90":"\u828b","\ud87e\udd8f":"\u8291","\ud87e\udd91":"\u829d","\ud87e\udd93":"\u82b1","\ud87e\udd94":"\u82b3","\ud87e\udd95":"\u82bd","\uf974":"\u82e5","\ud87e\udd98":"\u82e5","\ud87e\udd96":"\u82e6","\ud87e\udd97":"\ud85a\udf3c","\uf9fe":"\u8336","\ufab3":"\u8352","\ud87e\udd9a":"\u8363","\ud87e\udd99":"\u831d","\ud87e\udd9c":"\u8323","\ud87e\udd9d":"\u83bd","\ud87e\udda0":"\u8353","\uf93e":"\u83c9","\ud87e\udda1":"\u83ca","\ud87e\udda2":"\u83cc","\ud87e\udda3":"\u83dc","\ud87e\udd9e":"\u83e7","\ufab4":"\u83ef","\uf958":"\u83f1","\ufa5f":"\u8457","\ud87e\udd9f":"\u8457","\ud87e\udda4":"\ud85b\udc36","\ud87e\udd9b":"\u83ad","\uf918":"\u843d","\uf96e":"\u8449","\u853f":"\u848d","\ud87e\udda6":"\ud85b\udcd5","\ud87e\udda5":"\ud85b\udd6b","\uf999":"\u84ee","\ud87e\udda8":"\u84f1","\ud87e\udda9":"\u84f3","\uf9c2":"\u84fc","\ud87e\uddaa":"\u8516","\ud87e\udda7":"\u452b","\ud87e\uddac":"\u8564","\ud87e\uddad":"\ud85b\udf2c","\uf923":"\u85cd","\ud87e\uddae":"\u455d","\ud87e\uddb0":"\ud85b\udfb1","\ud87e\uddaf":"\u4561","\uf9f0":"\u85fa","\uf935":"\u8606","\ud87e\uddb2":"\u456b","\ufa20":"\u8612","\uf91f":"\u862d","\ud87e\uddb1":"\ud85c\udcd2","\u8641":"\u8637","\uf910":"\u863f","\u2f8c":"\u864d","\u2ec1":"\u864e","\ud87e\uddb3":"\u8650","\uf936":"\u865c","\ud87e\uddb4":"\u865c","\ud87e\uddb5":"\u8667","\ud87e\uddb6":"\u8669","\u2f8d":"\u866b","\ud87e\uddb7":"\u86a9","\ud87e\uddb8":"\u8688","\ud87e\uddba":"\u86e2","\ud87e\uddb9":"\u870e","\ud87e\uddbc":"\u8728","\ud87e\uddbd":"\u876b","\ud87e\uddc0":"\u87e1","\ufab5":"\u8779","\ud87e\uddbb":"\u8779","\ud87e\uddbe":"\u8786","\ud87e\uddbf":"\u45d7","\ud87e\uddab":"\ud85c\udfca","\uf911":"\u87ba","\ud87e\uddc1":"\u8801","\ud87e\uddc2":"\u45f9","\uf927":"\u881f","\u2f8e":"\u8840","\ufa08":"\u884c","\u2f8f":"\u884c","\ud87e\uddc3":"\u8860","\ud87e\uddc4":"\u8863","\u2f90":"\u8863","\u2ec2":"\u8864","\uf9a0":"\u88c2","\ud87e\uddc5":"\ud85d\ude67","\uf9e7":"\u88cf","\ud87e\uddc6":"\u88d7","\ud87e\uddc7":"\u88de","\uf9e8":"\u88e1","\uf912":"\u88f8","\ud87e\uddc9":"\u88fa","\ud87e\uddc8":"\u4635","\ufa60":"\u8910","\ufab6":"\u8941","\uf924":"\u8964","\u2f91":"\u897e","\u2ec4":"\u897f","\u2ec3":"\u8980","\ufab7":"\u8986","\ufa0a":"\u898b","\u2f92":"\u898b","\ud87e\uddcb":"\ud85e\udcae","\u2ec5":"\u89c1","\u2f93":"\u89d2","\u2f94":"\u8a00","\ud87e\uddcc":"\ud85e\udd66","\u8a7d":"\u8a2e","\u8a1e":"\u46b6","\ud87e\uddcd":"\u46be","\ud87e\uddce":"\u46c7","\ud87e\uddcf":"\u8aa0","\uf96f":"\u8aaa","\uf9a1":"\u8aaa","\ufab9":"\u8abf","\ufabb":"\u8acb","\uf97d":"\u8ad2","\uf941":"\u8ad6","\ufabe":"\u8aed","\ud87e\uddd0":"\u8aed","\ufa22":"\u8af8","\ufaba":"\u8af8","\uf95d":"\u8afe","\ufabd":"\u8afe","\ufa62":"\u8b01","\ufabc":"\u8b01","\ufa63":"\u8b39","\ufabf":"\u8b39","\uf9fc":"\u8b58","\uf95a":"\u8b80","\u8b8f":"\u8b86","\ufac0":"\u8b8a","\ud87e\uddd1":"\u8b8a","\u2ec8":"\u8ba0","\u2f95":"\u8c37","\u2f96":"\u8c46","\uf900":"\u8c48","\ud87e\uddd2":"\u8c55","\u2f97":"\u8c55","\u8c63":"\u8c5c","\u2f98":"\u8c78","\ud87e\uddd3":"\ud85f\udca8","\u2f99":"\u8c9d","\ud87e\uddd4":"\u8cab","\ud87e\uddd5":"\u8cc1","\uf948":"\u8cc2","\uf903":"\u8cc8","\ufa64":"\u8cd3","\ufa65":"\u8d08","\ufac1":"\u8d08","\ud87e\uddd6":"\u8d1b","\u2ec9":"\u8d1d","\u2f9a":"\u8d64","\u2f9b":"\u8d70","\ud87e\uddd7":"\u8d77","\u8d86":"\u8d7f","\ufad7":"\ud85f\uded3","\ud87e\uddd8":"\ud85f\udf2f","\u2f9c":"\u8db3","\ud87e\uddda":"\u8dcb","\ud87e\udddb":"\u8dbc","\u8dfa":"\u8de5","\uf937":"\u8def","\ud87e\udddc":"\u8df0","\u8e9b":"\u8e97","\u2f9d":"\u8eab","\uf902":"\u8eca","\u2f9e":"\u8eca","\ud87e\uddde":"\u8ed4","\u8f27":"\u8eff","\uf998":"\u8f26","\uf9d7":"\u8f2a","\ufac2":"\u8f38","\ud87e\udddf":"\u8f38","\ufa07":"\u8f3b","\uf98d":"\u8f62","\u2ecb":"\u8f66","\u2f9f":"\u8f9b","\ud87e\udd8d":"\u8f9e","\uf971":"\u8fb0","\u2fa0":"\u8fb0","\u2fa1":"\u8fb5","\ufa66":"\u8fb6","\u2ecc":"\u8fb6","\u2ecd":"\u8fb6","\ud87e\udc81":"\u5de1","\uf99a":"\u9023","\ufa25":"\u9038","\ufa67":"\u9038","\ufac3":"\u9072","\uf9c3":"\u907c","\ud87e\udde0":"\ud861\uddd2","\ud87e\udde1":"\ud861\udded","\uf913":"\u908f","\u2fa2":"\u9091","\ud87e\udde2":"\u9094","\uf92c":"\u90ce","\u90de":"\u90ce","\ufa2e":"\u90ce","\ud87e\udde3":"\u90f1","\ufa26":"\u90fd","\ud87e\udde5":"\ud861\udf2e","\ud87e\udde4":"\u9111","\ud87e\udde6":"\u911b","\u2fa3":"\u9149","\uf919":"\u916a","\ufac4":"\u9199","\uf9b7":"\u91b4","\u2fa4":"\u91c6","\uf9e9":"\u91cc","\u2fa5":"\u91cc","\uf97e":"\u91cf","\uf90a":"\u91d1","\u2fa6":"\u91d1","\uf9b1":"\u9234","\ud87e\udde7":"\u9238","\ufac5":"\u9276","\ud87e\udde8":"\u92d7","\ud87e\udde9":"\u92d8","\ud87e\uddea":"\u927c","\uf93f":"\u9304","\uf99b":"\u934a","\u93ae":"\u93ad","\ud87e\uddeb":"\u93f9","\ud87e\uddec":"\u9415","\ud87e\udded":"\ud862\udffa","\u2ed0":"\u9485","\u2ed1":"\u9577","\u2fa7":"\u9577","\u2ed2":"\u9578","\u2ed3":"\u957f","\u2fa8":"\u9580","\ud87e\uddee":"\u958b","\ud87e\uddef":"\u4995","\uf986":"\u95ad","\ud87e\uddf0":"\u95b7","\ud87e\uddf1":"\ud863\udd77","\u2ed4":"\u95e8","\u2fa9":"\u961c","\u2ecf":"\u961d","\u2ed6":"\u961d","\uf9c6":"\u962e","\uf951":"\u964b","\ufa09":"\u964d","\uf959":"\u9675","\uf9d3":"\u9678","\ufac6":"\u967c","\uf9dc":"\u9686","\uf9f1":"\u96a3","\ud87e\uddf2":"\u49e6","\u2faa":"\u96b6","\ufa2f":"\u96b7","\u96b8":"\u96b7","\uf9b8":"\u96b7","\u2fab":"\u96b9","\ud87e\uddf3":"\u96c3","\uf9ea":"\u96e2","\ufa68":"\u96e3","\ufac7":"\u96e3","\u2fac":"\u96e8","\uf9b2":"\u96f6","\uf949":"\u96f7","\ud87e\uddf5":"\u9723","\ud87e\uddf6":"\ud864\udd45","\uf938":"\u9732","\uf9b3":"\u9748","\u2fad":"\u9751","\u2ed8":"\u9752","\ufa1c":"\u9756","\ufac8":"\u9756","\ud87e\udc1c":"\ud864\udddf","\u2fae":"\u975e","\u2faf":"\u9762","\ud87e\uddf7":"\ud864\ude1a","\u2fb0":"\u9769","\ud87e\uddf8":"\u4a6e","\ud87e\uddf9":"\u4a76","\u2fb1":"\u97cb","\ufac9":"\u97db","\ud87e\uddfa":"\u97e0","\u2ed9":"\u97e6","\u2fb2":"\u97ed","\ud87e\uddfb":"\ud865\udc0a","\u2fb3":"\u97f3","\ufa69":"\u97ff","\ufaca":"\u97ff","\u2fb4":"\u9801","\ud87e\uddfc":"\u4ab2","\ufacb":"\u980b","\ud87e\uddfe":"\u980b","\ud87e\uddff":"\u980b","\uf9b4":"\u9818","\ud87e\ude00":"\u9829","\ud87e\uddfd":"\ud865\udc96","\ufa6a":"\u983b","\ufacc":"\u983b","\uf9d0":"\u985e","\u2eda":"\u9875","\u2fb5":"\u98a8","\ud87e\ude01":"\ud865\uddb6","\u2edb":"\u98ce","\u2fb6":"\u98db","\u2edc":"\u98de","\u2edd":"\u98df","\u2fb7":"\u98df","\u2edf":"\u98e0","\ud87e\ude02":"\u98e2","\ufa2a":"\u98ef","\ufa2b":"\u98fc","\ud87e\ude03":"\u4b33","\ufa2c":"\u9928","\ud87e\ude04":"\u9929","\u2ee0":"\u9963","\u2fb8":"\u9996","\u2fb9":"\u9999","\ud87e\ude05":"\u99a7","\u2fba":"\u99ac","\ud87e\ude06":"\u99c2","\uf91a":"\u99f1","\ud87e\ude07":"\u99fe","\uf987":"\u9a6a","\u2ee2":"\u9a6c","\u2fbb":"\u9aa8","\ud87e\ude08":"\u4bce","\u2fbc":"\u9ad8","\u2fbd":"\u9adf","\ud87e\ude09":"\ud866\udf30","\ufacd":"\u9b12","\ud87e\ude0a":"\u9b12","\u2fbe":"\u9b25","\u2fbf":"\u9b2f","\u2fc0":"\u9b32","\u2fc1":"\u9b3c","\u2ee4":"\u9b3c","\u2fc2":"\u9b5a","\uf939":"\u9b6f","\ud87e\ude0b":"\u9c40","\uf9f2":"\u9c57","\u2ee5":"\u9c7c","\u2fc3":"\u9ce5","\ud87e\ude0c":"\u9cfd","\ud87e\ude0d":"\u4cce","\ud87e\ude0f":"\u9d67","\ud87e\ude0e":"\u4ced","\ud87e\ude10":"\ud868\udcce","\ufa2d":"\u9db4","\ud87e\ude12":"\ud868\udd05","\ud87e\ude11":"\u4cf8","\uf93a":"\u9dfa","\ud87e\ude13":"\ud868\ude0e","\uf920":"\u9e1e","\u9e43":"\u9e42","\u2fc4":"\u9e75","\uf940":"\u9e7f","\u2fc5":"\u9e7f","\ud87e\ude14":"\ud868\ude91","\uf988":"\u9e97","\uf9f3":"\u9e9f","\u2fc6":"\u9ea5","\u2ee8":"\u9ea6","\ud87e\ude15":"\u9ebb","\u2fc7":"\u9ebb","\ud87e\udc8f":"\ud868\udf92","\u2fc8":"\u9ec3","\u2ee9":"\u9ec4","\u2fc9":"\u9ecd","\uf989":"\u9ece","\ud87e\ude16":"\u4d56","\u2fca":"\u9ed1","\u9ed2":"\u9ed1","\ufa3a":"\u58a8","\ud87e\ude17":"\u9ef9","\u2fcb":"\u9ef9","\u2fcc":"\u9efd","\ud87e\ude19":"\u9f05","\ud87e\ude18":"\u9efe","\u2fcd":"\u9f0e","\ud87e\ude1a":"\u9f0f","\u2fce":"\u9f13","\ud87e\ude1b":"\u9f16","\u2fcf":"\u9f20","\ud87e\ude1c":"\u9f3b","\u2fd0":"\u9f3b","\ufad8":"\u9f43","\u2fd1":"\u9f4a","\u2eec":"\u9f50","\u2fd2":"\u9f52","\ud87e\ude1d":"\ud869\ude00","\u2eee":"\u9f7f","\uf9c4":"\u9f8d","\u2fd3":"\u9f8d","\ufad9":"\u9f8e","\u2ef0":"\u9f99","\uf907":"\u9f9c","\uf908":"\u9f9c","\uface":"\u9f9c","\u2fd4":"\u9f9c","\u2ef3":"\u9f9f","\u2fd5":"\u9fa0"}')},cDf5:function(t,e){function n(e){return t.exports=n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(e)}t.exports=n},cio7:function(t,e,n){var i,r;void 0===(r="function"==typeof(i=function(){var t=XMLHttpRequest;if(!t)throw new Error("missing XMLHttpRequest");function e(s,o){if("function"!=typeof o)throw new Error("Bad callback given: "+o);if(!s)throw new Error("No options given");var a=s.onResponse;if((s="string"==typeof s?{uri:s}:JSON.parse(JSON.stringify(s))).onResponse=a,s.verbose&&(e.log=function(){var t,e,n={},s=["trace","debug","info","warn","error"];for(e=0;e<s.length;e++)n[t=s[e]]=i,"undefined"!=typeof console&&console&&console[t]&&(n[t]=r(console,t));return n}()),s.url&&(s.uri=s.url,delete s.url),!s.uri&&""!==s.uri)throw new Error("options.uri is a required argument");if("string"!=typeof s.uri)throw new Error("options.uri must be a string");for(var c=["proxy","_redirectsFollowed","maxRedirects","followRedirect"],l=0;l<c.length;l++)if(s[c[l]])throw new Error("options."+c[l]+" is not supported");if(s.callback=o,s.method=s.method||"GET",s.headers=s.headers||{},s.body=s.body||null,s.timeout=s.timeout||e.DEFAULT_TIMEOUT,s.headers.host)throw new Error("Options.headers.host is not supported");s.json&&(s.headers.accept=s.headers.accept||"application/json","GET"!==s.method&&(s.headers["content-type"]="application/json"),"boolean"!=typeof s.json?s.body=JSON.stringify(s.json):"string"!=typeof s.body&&(s.body=JSON.stringify(s.body)));var u=function(t){var e=[];for(var n in t)t.hasOwnProperty(n)&&e.push(encodeURIComponent(n)+"="+encodeURIComponent(t[n]));return e.join("&")};if(s.qs){var h="string"==typeof s.qs?s.qs:u(s.qs);s.uri=-1!==s.uri.indexOf("?")?s.uri+"&"+h:s.uri+"?"+h}if(s.form){if("string"==typeof s.form)throw"form name unsupported";if("POST"===s.method){var d=(s.encoding||"application/x-www-form-urlencoded").toLowerCase();switch(s.headers["content-type"]=d,d){case"application/x-www-form-urlencoded":s.body=u(s.form).replace(/%20/g,"+");break;case"multipart/form-data":var p=function(t){var e={};e.boundry="-------------------------------"+Math.floor(1e9*Math.random());var n=[];for(var i in t)t.hasOwnProperty(i)&&n.push("--"+e.boundry+'\nContent-Disposition: form-data; name="'+i+'"\n\n'+t[i]+"\n");return n.push("--"+e.boundry+"--"),e.body=n.join(""),e.length=e.body.length,e.type="multipart/form-data; boundary="+e.boundry,e}(s.form);s.body=p.body,s.headers["content-type"]=p.type;break;default:throw new Error("unsupported encoding:"+d)}}}return s.onResponse=s.onResponse||i,!0===s.onResponse&&(s.onResponse=o,s.callback=i),!s.headers.authorization&&s.auth&&(s.headers.authorization="Basic "+function(t){var e,n,i,r,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",o=0,a=0,c="",l=[];if(!t)return t;do{e=(r=t.charCodeAt(o++)<<16|t.charCodeAt(o++)<<8|t.charCodeAt(o++))>>12&63,n=r>>6&63,i=63&r,l[a++]=s.charAt(r>>18&63)+s.charAt(e)+s.charAt(n)+s.charAt(i)}while(o<t.length);switch(c=l.join(""),t.length%3){case 1:c=c.slice(0,-2)+"==";break;case 2:c=c.slice(0,-1)+"="}return c}(s.auth.username+":"+s.auth.password)),function(i){var r=new t,s=!1,o=function(t){var e,n=/^([\w\+\.\-]+:)(?:\/\/([^\/?#:]*)(?::(\d+))?)?/;try{e=location.href}catch(s){(e=document.createElement("a")).href="",e=e.href}var i=n.exec(e.toLowerCase())||[],r=n.exec(t.toLowerCase());return!(!r||r[1]==i[1]&&r[2]==i[2]&&(r[3]||("http:"===r[1]?80:443))==(i[3]||("http:"===i[1]?80:443)))}(i.uri),a="withCredentials"in r;if(r.seq_id=n+=1,r.id=n+": "+i.method+" "+i.uri,r._id=r.id,o&&!a){var c=new Error("Browser does not support cross-origin request: "+i.uri);return c.cors="unsupported",i.callback(c,r)}r.timeoutTimer=setTimeout((function(){s=!0;var t=new Error("ETIMEDOUT");return t.code="ETIMEDOUT",t.duration=i.timeout,e.log.error("Timeout",{id:r._id,milliseconds:i.timeout}),i.callback(t,r)}),i.timeout);var l={response:!1,loading:!1,end:!1};return r.onreadystatechange=function(n){if(s)return e.log.debug("Ignoring timed out state change",{state:r.readyState,id:r.id});if(e.log.debug("State change",{state:r.readyState,id:r.id,timed_out:s}),r.readyState===t.OPENED)for(var o in e.log.debug("Request started",{id:r.id}),i.headers)r.setRequestHeader(o,i.headers[o]);else r.readyState===t.HEADERS_RECEIVED?u():r.readyState===t.LOADING?(u(),h()):r.readyState===t.DONE&&(u(),h(),function(){if(!l.end){if(l.end=!0,e.log.debug("Request done",{id:r.id}),r.body=r.responseText,i.json)try{r.body=JSON.parse(r.responseText)}catch(t){return i.callback(t,r)}i.callback(null,r,r.body)}}())},r.open(i.method,i.uri,!0),o&&(r.withCredentials=!!i.withCredentials),r.send(i.body),r;function u(){if(!l.response){if(l.response=!0,e.log.debug("Got response",{id:r.id,status:r.status}),clearTimeout(r.timeoutTimer),r.statusCode=r.status,o&&0==r.statusCode){var t=new Error("CORS request rejected: "+i.uri);return t.cors="rejected",l.loading=!0,l.end=!0,i.callback(t,r)}i.onResponse(null,r)}}function h(){l.loading||(l.loading=!0,e.log.debug("Response body loading",{id:r.id}))}}(s)}e.log={trace:i,debug:i,info:i,warn:i,error:i};var n=0;function i(){}function r(t,e){return function(n,i){return"object"==typeof i&&(n+=" "+JSON.stringify(i)),t[e].call(t,n)}}return e.withCredentials=!1,e.DEFAULT_TIMEOUT=18e4,e.defaults=function(t,n){var i=function(e){return function(n,i){for(var r in n="string"==typeof n?{uri:n}:JSON.parse(JSON.stringify(n)),t)void 0===n[r]&&(n[r]=t[r]);return e(n,i)}},r=i(e);return r.get=i(e.get),r.post=i(e.post),r.put=i(e.put),r.head=i(e.head),r},["get","put","post","head"].forEach((function(t){var n=t.toUpperCase();e[t.toLowerCase()]=function(t){"string"==typeof t?t={method:n,uri:t}:(t=JSON.parse(JSON.stringify(t))).method=n;var i=[t].concat(Array.prototype.slice.apply(arguments,[1]));return e.apply(this,i)}})),e.couch=function(t,n){return"string"==typeof t&&(t={uri:t}),t.json=!0,t.body&&(t.json=t.body),delete t.body,n=n||i,e(t,(function(t,e,i){if(t)return n(t,e,i);if((e.statusCode<200||e.statusCode>299)&&i.error){for(var r in t=new Error("CouchDB error: "+(i.error.reason||i.error.error)),i)t[r]=i[r];return n(t,e,i)}return n(t,e,i)}))},e})?i.apply(e,[]):i)||(t.exports=r)},"e/yG":function(t,e,n){"use strict";var i=n("284h");Object.defineProperty(e,"__esModule",{value:!0}),e.IndexedDBStore=d;var r=n("OLzX"),s=i(n("t+e4")),o=n("+qE3"),a=n("+BeD"),c=n("/6GC"),l=n("rWBP"),u=n("7UXS"),h=n("PrRn");function d(t){if(r.MemoryStore.call(this,t),!t.indexedDB)throw new Error("Missing required option: indexedDB");if(t.workerScript){let e=t.workerApi;e||(e=global.Worker),this.backend=new c.RemoteIndexedDBStoreBackend(t.workerScript,t.dbName,e)}else this.backend=new a.LocalIndexedDBStoreBackend(t.indexedDB,t.dbName);this.startedUp=!1,this._syncTs=0,this._userModifiedMap={}}function p(t,e){return async function(...n){try{return await t.call(this,...n)}catch(i){h.logger.error("IndexedDBStore failure, degrading to MemoryStore",i),this.emit("degraded",i);try{h.logger.log("IndexedDBStore trying to delete degraded data"),await this.backend.clearDatabase(),h.logger.log("IndexedDBStore delete after degrading succeeeded")}catch(i){h.logger.warn("IndexedDBStore delete after degrading failed",i)}if(Object.setPrototypeOf(this,r.MemoryStore.prototype),e)return await r.MemoryStore.prototype[e].call(this,...n)}}}s.inherits(d,r.MemoryStore),s.extend(d.prototype,o.EventEmitter.prototype),d.exists=function(t,e){return a.LocalIndexedDBStoreBackend.exists(t,e)},d.prototype.startup=function(){return this.startedUp?(h.logger.log("IndexedDBStore.startup: already started"),Promise.resolve()):(h.logger.log("IndexedDBStore.startup: connecting to backend"),this.backend.connect().then(()=>(h.logger.log("IndexedDBStore.startup: loading presence events"),this.backend.getUserPresenceEvents())).then(t=>{h.logger.log("IndexedDBStore.startup: processing presence events"),t.forEach(([t,e])=>{const n=new l.User(t);e&&n.setPresenceEvent(new u.MatrixEvent(e)),this._userModifiedMap[n.userId]=n.getLastModifiedTime(),this.storeUser(n)})}))},d.prototype.getSavedSync=p((function(){return this.backend.getSavedSync()}),"getSavedSync"),d.prototype.isNewlyCreated=p((function(){return this.backend.isNewlyCreated()}),"isNewlyCreated"),d.prototype.getSavedSyncToken=p((function(){return this.backend.getNextBatchToken()}),"getSavedSyncToken"),d.prototype.deleteAllData=p((function(){return r.MemoryStore.prototype.deleteAllData.call(this),this.backend.clearDatabase().then(()=>{h.logger.log("Deleted indexeddb data.")},t=>{throw h.logger.error("Failed to delete indexeddb data: "+t),t})})),d.prototype.wantsSave=function(){return Date.now()-this._syncTs>3e5},d.prototype.save=function(t){return t||this.wantsSave()?this._reallySave():Promise.resolve()},d.prototype._reallySave=p((function(){this._syncTs=Date.now();const t=[];for(const e of this.getUsers())this._userModifiedMap[e.userId]!==e.getLastModifiedTime()&&e.events.presence&&(t.push([e.userId,e.events.presence.event]),this._userModifiedMap[e.userId]=e.getLastModifiedTime());return this.backend.syncToDatabase(t)})),d.prototype.setSyncData=p((function(t){return this.backend.setSyncData(t)}),"setSyncData"),d.prototype.getOutOfBandMembers=p((function(t){return this.backend.getOutOfBandMembers(t)}),"getOutOfBandMembers"),d.prototype.setOutOfBandMembers=p((function(t,e){return r.MemoryStore.prototype.setOutOfBandMembers.call(this,t,e),this.backend.setOutOfBandMembers(t,e)}),"setOutOfBandMembers"),d.prototype.clearOutOfBandMembers=p((function(t){return r.MemoryStore.prototype.clearOutOfBandMembers.call(this),this.backend.clearOutOfBandMembers(t)}),"clearOutOfBandMembers"),d.prototype.getClientOptions=p((function(){return this.backend.getClientOptions()}),"getClientOptions"),d.prototype.storeClientOptions=p((function(t){return r.MemoryStore.prototype.storeClientOptions.call(this,t),this.backend.storeClientOptions(t)}),"storeClientOptions")},fmda:function(t,e,n){"use strict";var i=n("284h"),r=n("TqRt");Object.defineProperty(e,"__esModule",{value:!0}),e.isCryptoAvailable=function(){return Boolean(global.Olm)},e.Crypto=D,e.fixBackupKey=P,e.verificationMethods=void 0;var s=r(n("0ZCT")),o=n("+qE3"),a=n("7/Kr"),c=n("PrRn"),l=i(n("t+e4")),u=n("mjbu"),h=i(n("VRzr")),d=n("pv4t"),p=n("Nfwx"),m=i(n("K5J2")),f=n("h3nd"),g=n("mhmA"),_=n("IzJ1"),y=n("+w/m"),v=n("qN7M"),b=n("ucoE"),w=n("F3w2"),S=n("qmDw"),E=n("9Nfa"),k=n("3afC"),C=n("PAYk"),x=n("tW1z"),T=n("BqaI"),I=n("Hzpt"),R=n("uMDy");const O=p.DeviceInfo.DeviceVerification,A={[b.ReciprocateQRCode.NAME]:b.ReciprocateQRCode,[w.SAS.NAME]:w.SAS,[b.SHOW_QR_CODE_METHOD]:T.IllegalMethod,[b.SCAN_QR_CODE_METHOD]:T.IllegalMethod};function D(t,e,n,i,r,s,o,c){if(this._onDeviceListUserCrossSigningUpdated=this._onDeviceListUserCrossSigningUpdated.bind(this),this._trustCrossSignedDevices=!0,this._reEmitter=new a.ReEmitter(this),this._baseApis=t,this._sessionStore=e,this._userId=n,this._deviceId=i,this._clientStore=r,this._cryptoStore=s,this._roomList=o,c){this._verificationMethods=new Map;for(const t of c)"string"==typeof t?A[t]&&this._verificationMethods.set(t,A[t]):t.NAME?this._verificationMethods.set(t.NAME,t):console.warn("Excluding unknown verification method "+t)}else this._verificationMethods=A;this.backupInfo=null,this.backupKey=null,this._checkedForBackup=!1,this._sendingBackups=!1,this._olmDevice=new u.OlmDevice(s),this._deviceList=new d.DeviceList(t,s,this._olmDevice),this._deviceList.on("userCrossSigningUpdated",this._onDeviceListUserCrossSigningUpdated),this._reEmitter.reEmit(this._deviceList,["crypto.devicesUpdated","crypto.willUpdateDevices"]),this._lastOneTimeKeyCheck=null,this._oneTimeKeyCheckInProgress=!1,this._roomEncryptors={},this._roomDecryptors={},this._supportedAlgorithms=l.keys(m.DECRYPTION_CLASSES),this._deviceKeys={},this._globalBlacklistUnverifiedDevices=!1,this._globalErrorOnUnknownDevices=!0,this._outgoingRoomKeyRequestManager=new y.OutgoingRoomKeyRequestManager(t,this._deviceId,this._cryptoStore),this._receivedRoomKeyRequests=[],this._receivedRoomKeyRequestCancellations=[],this._processingRoomKeyRequests=!1,this._lazyLoadMembers=!1,this._roomDeviceTrackingState={},this._lastNewSessionForced={},this._toDeviceVerificationRequests=new x.ToDeviceRequests,this._inRoomVerificationRequests=new C.InRoomRequests,this._sendKeyRequestsImmediately=!1;const h=this._baseApis._cryptoCallbacks||{},p=(0,f.createCryptoStoreCacheCallbacks)(s,this._olmDevice);this._crossSigningInfo=new f.CrossSigningInfo(n,h,p),this._secretStorage=new _.SecretStorage(t,h),!h.getCrossSigningKey&&h.getSecretStorageKey&&(h.getCrossSigningKey=async t=>f.CrossSigningInfo.getFromSecretStorage(t,this._secretStorage))}function P(t){if("string"!=typeof t||t.indexOf(",")<0)return null;const e=Uint8Array.from(t.split(","),t=>parseInt(t));return h.encodeBase64(e)}e.verificationMethods={RECIPROCATE_QR_CODE:b.ReciprocateQRCode.NAME,SAS:w.SAS.NAME},l.inherits(D,o.EventEmitter),D.prototype.init=async function(t){const{exportedOlmDevice:e,pickleKey:n}=t||{};c.logger.log("Crypto: initialising Olm..."),await global.Olm.init(),c.logger.log(e?"Crypto: initialising Olm device from exported device...":"Crypto: initialising Olm device..."),await this._olmDevice.init({fromExportedDevice:e,pickleKey:n}),c.logger.log("Crypto: loading device list..."),await this._deviceList.load(),this._deviceKeys["ed25519:"+this._deviceId]=this._olmDevice.deviceEd25519Key,this._deviceKeys["curve25519:"+this._deviceId]=this._olmDevice.deviceCurve25519Key,c.logger.log("Crypto: fetching own devices...");let i=this._deviceList.getRawStoredDevicesForUser(this._userId);i||(i={}),i[this._deviceId]||(c.logger.log("Crypto: adding this device to the store..."),i[this._deviceId]={keys:this._deviceKeys,algorithms:this._supportedAlgorithms,verified:O.VERIFIED,known:!0},this._deviceList.storeDevicesForUser(this._userId,i),this._deviceList.saveIfDirty()),await this._cryptoStore.doTxn("readonly",[v.IndexedDBCryptoStore.STORE_ACCOUNT],t=>{this._cryptoStore.getCrossSigningKeys(t,t=>{t&&0!==Object.keys(t).length&&(c.logger.log("Loaded cross-signing public keys from crypto store"),this._crossSigningInfo.setKeys(t))})}),this._deviceList.startTrackingDeviceList(this._userId),c.logger.log("Crypto: checking for key backup..."),this._checkAndStartKeyBackup()},D.prototype.getCryptoTrustCrossSignedDevices=function(){return this._trustCrossSignedDevices},D.prototype.setCryptoTrustCrossSignedDevices=function(t){this._trustCrossSignedDevices=t;for(const e of this._deviceList.getKnownUserIds()){const t=this._deviceList.getRawStoredDevicesForUser(e);for(const n of Object.keys(t)){const t=this.checkDeviceTrust(e,n);if(!t.isLocallyVerified()&&t.isCrossSigningVerified()){const t=this._deviceList.getStoredDevice(e,n);this.emit("deviceVerificationChanged",e,n,t)}}}},D.prototype.createRecoveryKeyFromPassphrase=async function(t){const e=new global.Olm.PkDecryption;try{const n={};if(t){const i=await(0,S.keyFromPassphrase)(t);n.passphrase={algorithm:"m.pbkdf2",iterations:i.iterations,salt:i.salt},n.pubkey=e.init_with_private_key(i.key)}else n.pubkey=e.generate_key();const i=e.get_private_key();return{keyInfo:n,encodedPrivateKey:(0,E.encodeRecoveryKey)(i),privateKey:i}}finally{e&&e.free()}},D.prototype.isCrossSigningReady=async function(){const t=this._crossSigningInfo.getId(),e=await this._crossSigningInfo.isStoredInSecretStorage(this._secretStorage),n=await this._secretStorage.hasKey();return t&&e&&n},D.prototype.bootstrapSecretStorage=async function({authUploadDeviceSigningKeys:t,createSecretStorageKey:e=(async()=>({})),keyBackupInfo:n,setupNewKeyBackup:i,setupNewSecretStorage:r,getKeyBackupPassphrase:s}={}){c.logger.log("Bootstrapping Secure Secret Storage");const o=new g.EncryptionSetupBuilder(this._baseApis.store.accountData,this._baseApis._cryptoCallbacks),a=new _.SecretStorage(o.accountDataClientAdapter,o.ssssCryptoCallbacks),l=new f.CrossSigningInfo(this._userId,o.crossSigningCallbacks,o.crossSigningCallbacks);let u=null;const d=async(t,e)=>{t=t||{},e&&(t.key=e);const n=await a.addKey(_.SECRET_STORAGE_ALGORITHM_V1_AES,t);return e&&o.ssssCryptoCallbacks.addPrivateKey(n,e),await a.setDefaultKeyId(n),n},p=async()=>{l.resetKeys(),await this._signObject(l.keys.master),await t(t=>t?(o.addCrossSigningKeys(t,l.keys),Promise.resolve()):this._baseApis.uploadDeviceSigningKeys(null,{}));const e=this._deviceList.getStoredDevice(this._userId,this._deviceId),i=await l.signDevice(this._userId,e);o.addKeySignature(this._userId,this._deviceId,i),n&&(await l.signObject(n.auth_data,"master"),o.addSessionBackup(n))},m=async(t,e)=>{if(!e.mac){const n=await this._baseApis._cryptoCallbacks.getSecretStorageKey({keys:{[t]:e}},"");if(n){const i=n[1];o.ssssCryptoCallbacks.addPrivateKey(t,i);const{iv:r,mac:s}=await _.SecretStorage._calculateKeyCheck(i);e.iv=r,e.mac=s,await o.setAccountData("m.secret_storage.key."+t,e)}}},y=await this.getSecretStorageKey(),[v,b]=y||[null,null],w=await this._crossSigningInfo.isStoredInSecretStorage(this._secretStorage),S=!r&&w;if(S||n)if(!S&&n){c.logger.log("Secret storage default key not found, using key backup key");const t=await this.getSessionBackupPrivateKey()||await s();await p();const e={};n.auth_data.private_key_salt&&n.auth_data.private_key_iterations&&(e.passphrase={algorithm:"m.pbkdf2",iterations:n.auth_data.private_key_iterations,salt:n.auth_data.private_key_salt,bits:256}),u=await d(e,t),await a.store("m.megolm_backup.v1",h.encodeBase64(t),[u]),c.logger.log("Adding cross signing signature to key backup"),await l.signObject(n.auth_data,"master"),o.addSessionBackup(n)}else this._crossSigningInfo.getId()?(c.logger.log("Cross signing keys are present in secret storage"),b&&b.algorithm===_.SECRET_STORAGE_ALGORITHM_V1_AES&&await m(v,b)):(c.logger.log("Cross-signing private keys found in secret storage"),await this.checkOwnCrossSigningTrust(),b&&b.algorithm===_.SECRET_STORAGE_ALGORITHM_V1_AES&&await m(v,b));else if(c.logger.log("Cross-signing private keys not found in secret storage, creating new keys"),await p(),r||!b||b.algorithm!==_.SECRET_STORAGE_ALGORITHM_V1_AES){const{keyInfo:t,privateKey:n}=await e();u=await d(t,n)}const k=o.crossSigningCallbacks.privateKeys;if(k.size&&(c.logger.log("Storing cross-signing private keys in secret storage"),this._baseApis._cryptoCallbacks.saveCrossSigningKeys||await f.CrossSigningInfo.storeInSecretStorage(k,a)),i&&!n){const t=await this._baseApis.prepareKeyBackupVersion(null,{secureSecretStorage:!1}),e=(0,E.decodeRecoveryKey)(t.recovery_key);await a.store("m.megolm_backup.v1",h.encodeBase64(e));const n={algorithm:t.algorithm,auth_data:t.auth_data};await l.signObject(n.auth_data,"master"),await this._signObject(n.auth_data),o.addSessionBackup(n)}const C=await a.get("m.megolm_backup.v1");if(C){c.logger.info("Got session backup key from secret storage: caching");const t=P(C);t&&await a.store("m.megolm_backup.v1",t,[u||v]);const e=new Uint8Array(h.decodeBase64(t||C));await o.addSessionBackupPrivateKeyToCache(e)}const x=o.buildOperation();await x.apply(this),await o.persist(this),c.logger.log("Secure Secret Storage ready")},D.prototype.addSecretStorageKey=function(t,e,n){return this._secretStorage.addKey(t,e,n)},D.prototype.hasSecretStorageKey=function(t){return this._secretStorage.hasKey(t)},D.prototype.getSecretStorageKey=function(t){return this._secretStorage.getKey(t)},D.prototype.storeSecret=function(t,e,n){return this._secretStorage.store(t,e,n)},D.prototype.getSecret=function(t){return this._secretStorage.get(t)},D.prototype.isSecretStored=function(t,e){return this._secretStorage.isStored(t,e)},D.prototype.requestSecret=function(t,e){return e||(e=Object.keys(this._deviceList.getRawStoredDevicesForUser(this._userId))),this._secretStorage.request(t,e)},D.prototype.getDefaultSecretStorageKeyId=function(){return this._secretStorage.getDefaultKeyId()},D.prototype.setDefaultSecretStorageKeyId=function(t){return this._secretStorage.setDefaultKeyId(t)},D.prototype.checkSecretStorageKey=function(t,e){return this._secretStorage.checkKey(t,e)},D.prototype.checkSecretStoragePrivateKey=function(t,e){let n=null;try{return n=new global.Olm.PkDecryption,n.init_with_private_key(t)===e}finally{n&&n.free()}},D.prototype.getSessionBackupPrivateKey=async function(){let t=await new Promise(t=>{this._cryptoStore.doTxn("readonly",[v.IndexedDBCryptoStore.STORE_ACCOUNT],e=>{this._cryptoStore.getSecretStorePrivateKey(e,t,"m.megolm_backup.v1")})});if(t&&"string"==typeof t&&(t=new Uint8Array(h.decodeBase64(P(t)||t)),await this.storeSessionBackupPrivateKey(t)),t&&t.ciphertext){const e=Buffer.from(this._olmDevice._pickleKey),n=await(0,R.decryptAES)(t,e,"m.megolm_backup.v1");t=h.decodeBase64(n)}return t},D.prototype.storeSessionBackupPrivateKey=async function(t){if(!(t instanceof Uint8Array))throw new Error("storeSessionBackupPrivateKey expects Uint8Array, got "+t);const e=Buffer.from(this._olmDevice._pickleKey);return t=await(0,R.encryptAES)(h.encodeBase64(t),e,"m.megolm_backup.v1"),this._cryptoStore.doTxn("readwrite",[v.IndexedDBCryptoStore.STORE_ACCOUNT],e=>{this._cryptoStore.storeSecretStorePrivateKey(e,"m.megolm_backup.v1",t)})},D.prototype.checkCrossSigningPrivateKey=function(t,e){let n=null;try{return n=new global.Olm.PkSigning,n.init_with_seed(t)===e}finally{n&&n.free()}},D.prototype._afterCrossSigningLocalKeyChange=async function(){c.logger.info("Starting cross-signing key change post-processing");const t=this._deviceList.getStoredDevice(this._userId,this._deviceId),e=await this._crossSigningInfo.signDevice(this._userId,t);c.logger.info("Starting background key sig upload for "+this._deviceId);const n=({shouldEmit:t})=>this._baseApis.uploadKeySignatures({[this._userId]:{[this._deviceId]:e}}).then(e=>{const{failures:i}=e||{};if(Object.keys(i||[]).length>0)throw t&&this._baseApis.emit("crypto.keySignatureUploadFailure",i,"_afterCrossSigningLocalKeyChange",n),new I.KeySignatureUploadError("Key upload failed",{failures:i});c.logger.info("Finished background key sig upload for "+this._deviceId)}).catch(t=>{c.logger.error("Error during background key sig upload for "+this._deviceId,t)});n({shouldEmit:!0});const i=this._baseApis._cryptoCallbacks.shouldUpgradeDeviceVerifications;if(i){c.logger.info("Starting device verification upgrade");const t={};for(const[e,n]of Object.entries(this._deviceList._crossSigningInfo)){const i=await this._checkForDeviceVerificationUpgrade(e,f.CrossSigningInfo.fromStorage(n,e));i&&(t[e]=i)}if(Object.keys(t).length>0){c.logger.info(`Found ${Object.keys(t).length} verif users to upgrade`);try{const e=await i({users:t});if(e)for(const n of e)n in t&&await this._baseApis.setDeviceVerified(n,t[n].crossSigningInfo.getId())}catch(r){c.logger.log("shouldUpgradeDeviceVerifications threw an error: not upgrading",r)}}c.logger.info("Finished device verification upgrade")}c.logger.info("Finished cross-signing key change post-processing")},D.prototype._checkForDeviceVerificationUpgrade=async function(t,e){const n=this._crossSigningInfo.checkUserTrust(e);if(e.firstUse&&!n.verified){const n=this._deviceList.getRawStoredDevicesForUser(t),i=await this._checkForValidDeviceSignature(t,e.keys.master,n);if(i.length)return{devices:i.map(t=>p.DeviceInfo.fromStorage(n[t],t)),crossSigningInfo:e}}},D.prototype._checkForValidDeviceSignature=async function(t,e,n){const i=[];if(n&&e.signatures&&e.signatures[t])for(const s of Object.keys(e.signatures[t])){const[,o]=s.split(":",2);if(o in n&&n[o].verified===O.VERIFIED)try{await h.verifySignature(this._olmDevice,e,t,o,n[o].keys[s]),i.push(o)}catch(r){}}return i},D.prototype.getCrossSigningId=function(t){return this._crossSigningInfo.getId(t)},D.prototype.getStoredCrossSigningForUser=function(t){return this._deviceList.getStoredCrossSigningForUser(t)},D.prototype.checkUserTrust=function(t){const e=this._deviceList.getStoredCrossSigningForUser(t);return e?this._crossSigningInfo.checkUserTrust(e):new f.UserTrustLevel(!1,!1,!1)},D.prototype.checkDeviceTrust=function(t,e){const n=this._deviceList.getStoredDevice(t,e);return this._checkDeviceInfoTrust(t,n)},D.prototype._checkDeviceInfoTrust=function(t,e){const n=!(!e||!e.isVerified()),i=this._deviceList.getStoredCrossSigningForUser(t);return e&&i?this._crossSigningInfo.checkDeviceTrust(i,e,n,this._trustCrossSignedDevices||t===this._userId):new f.DeviceTrustLevel(!1,!1,n,!1)},D.prototype._onDeviceListUserCrossSigningUpdated=async function(t){if(t===this._userId){const e=this._deviceList.getStoredCrossSigningForUser(t),n=e?e.getId():null,i=this._crossSigningInfo.getId(),r=i!==n;i&&n&&!r?await this.checkOwnCrossSigningTrust():(this._storeTrustedSelfKeys(null),this.emit("crossSigning.keysChanged",{}),this.emit("userTrustStatusChanged",this._userId,this.checkUserTrust(t)))}else{await this._checkDeviceVerifications(t);const e=this._deviceList.getStoredCrossSigningForUser(t);e&&(e.updateCrossSigningVerifiedBefore(this.checkUserTrust(t).isCrossSigningVerified()),this._deviceList.setRawStoredCrossSigningForUser(t,e.toStorage())),this.emit("userTrustStatusChanged",t,this.checkUserTrust(t))}},D.prototype.checkOwnCrossSigningTrust=async function(){const t=this._userId;await this.downloadKeys([this._userId]);const e=this._deviceList.getStoredCrossSigningForUser(t);if(!e)return void c.logger.error("Got cross-signing update event for user "+t+" but no new cross-signing information found!");const n=e.getId(),i=this._crossSigningInfo.getId()!==n;if(i){c.logger.info("Got new master public key",n);let t=null;try{if(t=(await this._crossSigningInfo.getCrossSigningKey("master",n))[1],!t)throw new Error("Cross-signing master private key not available")}finally{t&&t.free()}c.logger.info("Got matching private key from callback for new public master key")}const r=this._crossSigningInfo.getId("self_signing"),s=this._crossSigningInfo.getId("user_signing");this._storeTrustedSelfKeys(e.keys);const o={};if(r!==e.getId("self_signing")){c.logger.info("Got new self-signing key",e.getId("self_signing"));const t=this._deviceList.getStoredDevice(this._userId,this._deviceId),n=await this._crossSigningInfo.signDevice(this._userId,t);o[this._deviceId]=n}if(s!==e.getId("user_signing")&&c.logger.info("Got new user-signing key",e.getId("user_signing")),i){const t=this._crossSigningInfo.keys.master;await this._signObject(t);const e=t.signatures[this._userId]["ed25519:"+this._deviceId];o[this._crossSigningInfo.getId()]=Object.assign({},t,{signatures:{[this._userId]:{["ed25519:"+this._deviceId]:e}}})}const a=Object.keys(o);if(a.length){const t=({shouldEmit:e})=>(c.logger.info("Starting background key sig upload for "+a),this._baseApis.uploadKeySignatures({[this._userId]:o}).then(n=>{const{failures:i}=n||{};if(c.logger.info("Finished background key sig upload for "+a),Object.keys(i||[]).length>0)throw e&&this._baseApis.emit("crypto.keySignatureUploadFailure",i,"checkOwnCrossSigningTrust",t),new I.KeySignatureUploadError("Key upload failed",{failures:i})}).catch(t=>{c.logger.error("Error during background key sig upload for "+a,t)}));t({shouldEmit:!0})}this.emit("userTrustStatusChanged",t,this.checkUserTrust(t)),i&&(this._baseApis.emit("crossSigning.keysChanged",{}),await this._afterCrossSigningLocalKeyChange()),await this.checkKeyBackup()},D.prototype._storeTrustedSelfKeys=async function(t){t?this._crossSigningInfo.setKeys(t):this._crossSigningInfo.clearKeys(),await this._cryptoStore.doTxn("readwrite",[v.IndexedDBCryptoStore.STORE_ACCOUNT],t=>{this._cryptoStore.storeCrossSigningKeys(t,this._crossSigningInfo.keys)})},D.prototype._checkDeviceVerifications=async function(t){const e=this._baseApis._cryptoCallbacks.shouldUpgradeDeviceVerifications;if(e){if(c.logger.info("Starting device verification upgrade for "+t),this._crossSigningInfo.keys.user_signing){const n=this._deviceList.getStoredCrossSigningForUser(t);if(n){const i=await this._checkForDeviceVerificationUpgrade(t,n);i&&(await e({users:{[t]:i}})).includes(t)&&await this._baseApis.setDeviceVerified(t,n.getId())}}c.logger.info("Finished device verification upgrade for "+t)}},D.prototype._checkAndStartKeyBackup=async function(){if(c.logger.log("Checking key backup status..."),this._baseApis.isGuest())return c.logger.log("Skipping key backup check since user is guest"),this._checkedForBackup=!0,null;let t;try{t=await this._baseApis.getKeyBackupVersion()}catch(n){return c.logger.log("Error checking for active key backup",n),404===n.httpStatus&&(this._checkedForBackup=!0),null}this._checkedForBackup=!0;const e=await this.isKeyBackupTrusted(t);return e.usable&&!this.backupInfo?(c.logger.log("Found usable key backup v"+t.version+": enabling key backups"),this._baseApis.enableKeyBackup(t)):!e.usable&&this.backupInfo?(c.logger.log("No usable key backup: disabling key backup"),this._baseApis.disableKeyBackup()):e.usable||this.backupInfo?e.usable&&this.backupInfo&&(t.version!==this.backupInfo.version?(c.logger.log("On backup version "+this.backupInfo.version+" but found version "+t.version+": switching."),this._baseApis.disableKeyBackup(),this._baseApis.enableKeyBackup(t)):c.logger.log("Backup version "+t.version+" still current")):c.logger.log("No usable key backup: not enabling key backup"),{backupInfo:t,trustInfo:e}},D.prototype.setTrustedBackupPubKey=async function(t){this._sessionStore.setLocalTrustedBackupPubKey(t),await this.checkKeyBackup()},D.prototype.checkKeyBackup=async function(){return this._checkedForBackup=!1,this._checkAndStartKeyBackup()},D.prototype.isKeyBackupTrusted=async function(t){const e={usable:!1,trusted_locally:!1,sigs:[]};if(!(t&&t.algorithm&&t.auth_data&&t.auth_data.public_key&&t.auth_data.signatures))return c.logger.info("Key backup is absent or missing required data"),e;const n=this._sessionStore.getLocalTrustedBackupPubKey();t.auth_data.public_key===n&&(c.logger.info("Backup public key "+n+" is trusted locally"),e.trusted_locally=!0);const i=t.auth_data.signatures[this._userId]||[];for(const s of Object.keys(i)){const n=s.split(":");if("ed25519"!==n[0]){c.logger.log("Ignoring unknown signature type: "+n[0]);continue}const i={deviceId:n[1]},o=this._crossSigningInfo.getId();if(o===i.deviceId){i.crossSigningId=!0;try{await h.verifySignature(this._olmDevice,t.auth_data,this._userId,i.deviceId,o),i.valid=!0}catch(r){c.logger.warning("Bad signature from cross signing key "+o,r),i.valid=!1}e.sigs.push(i);continue}const a=this._deviceList.getStoredDevice(this._userId,i.deviceId);if(a){i.device=a,i.deviceTrust=await this.checkDeviceTrust(this._userId,i.deviceId);try{await h.verifySignature(this._olmDevice,t.auth_data,this._userId,a.deviceId,a.getFingerprint()),i.valid=!0}catch(r){c.logger.info("Bad signature from key ID "+s+" userID "+this._userId+" device ID "+a.deviceId+" fingerprint: "+a.getFingerprint(),t.auth_data,r),i.valid=!1}}else i.valid=null,c.logger.info("Ignoring signature from unknown key "+s);e.sigs.push(i)}return e.usable=e.sigs.some(t=>t.valid&&(t.device&&t.deviceTrust.isVerified()||t.crossSigningId)),e.usable|=e.trusted_locally,e},D.prototype.enableLazyLoading=function(){this._lazyLoadMembers=!0},D.prototype.registerEventHandlers=function(t){const e=this;t.on("RoomMember.membership",(function(t,n,i){try{e._onRoomMembership(t,n,i)}catch(r){c.logger.error("Error handling membership change:",r)}})),t.on("toDeviceEvent",e._onToDeviceEvent.bind(e));const n=e._onTimelineEvent.bind(e);t.on("Room.timeline",n),t.on("Event.decrypted",n)},D.prototype.start=function(){this._outgoingRoomKeyRequestManager.start()},D.prototype.stop=function(){this._outgoingRoomKeyRequestManager.stop(),this._deviceList.stop()},D.getOlmVersion=function(){return u.OlmDevice.getOlmVersion()},D.prototype.getDeviceEd25519Key=function(){return this._olmDevice.deviceEd25519Key},D.prototype.getDeviceCurve25519Key=function(){return this._olmDevice.deviceCurve25519Key},D.prototype.setGlobalBlacklistUnverifiedDevices=function(t){this._globalBlacklistUnverifiedDevices=t},D.prototype.getGlobalBlacklistUnverifiedDevices=function(){return this._globalBlacklistUnverifiedDevices},D.prototype.setGlobalErrorOnUnknownDevices=function(t){this._globalErrorOnUnknownDevices=t},D.prototype.getGlobalErrorOnUnknownDevices=function(){return this._globalErrorOnUnknownDevices},D.prototype.uploadDeviceKeys=function(){const t=this,e={algorithms:t._supportedAlgorithms,device_id:t._deviceId,keys:t._deviceKeys,user_id:t._userId};return t._signObject(e).then(()=>t._baseApis.uploadKeysRequest({device_keys:e}))},D.prototype.updateOneTimeKeyCount=function(t){if(!isFinite(t))throw new TypeError("Parameter for updateOneTimeKeyCount has to be a number");this._oneTimeKeyCount=t},D.prototype.downloadKeys=function(t,e){return this._deviceList.downloadKeys(t,e)},D.prototype.getStoredDevicesForUser=function(t){return this._deviceList.getStoredDevicesForUser(t)},D.prototype.getStoredDevice=function(t,e){return this._deviceList.getStoredDevice(t,e)},D.prototype.saveDeviceList=function(t){return this._deviceList.saveIfDirty(t)},D.prototype.setDeviceVerification=async function(t,e,n,i,r){void 0===n&&(n=null),void 0===i&&(i=null),void 0===r&&(r=null);const s=this._deviceList.getStoredCrossSigningForUser(t);if(s&&s.getId()===e){if(null!==i||null!==r)throw new Error("Cannot set blocked or known for a cross-signing key");if(!n)throw new Error("Cannot set a cross-signing key as unverified");if(this._crossSigningInfo.getId()||t!==this._crossSigningInfo.userId||(this._storeTrustedSelfKeys(s.keys),this.emit("userTrustStatusChanged",this._userId,this.checkUserTrust(t))),t!==this._userId){c.logger.info("Master key "+s.getId()+" for "+t+" marked verified. Signing...");const n=await this._crossSigningInfo.signUser(s);if(n){const i=async({shouldEmit:r})=>{c.logger.info("Uploading signature for "+t+"...");const s=await this._baseApis.uploadKeySignatures({[t]:{[e]:n}}),{failures:o}=s||{};if(Object.keys(o||[]).length>0)throw r&&this._baseApis.emit("crypto.keySignatureUploadFailure",o,"setDeviceVerification",i),new I.KeySignatureUploadError("Key upload failed",{failures:o})};await i({shouldEmit:!0})}return n}return s}const o=this._deviceList.getRawStoredDevicesForUser(t);if(!o||!o[e])throw new Error("Unknown device "+t+":"+e);const a=o[e];let l=a.verified;n?l=O.VERIFIED:null!==n&&l==O.VERIFIED&&(l=O.UNVERIFIED),i?l=O.BLOCKED:null!==i&&l==O.BLOCKED&&(l=O.UNVERIFIED);let u=a.known;if(null!==r&&(u=r),a.verified===l&&a.known===u||(a.verified=l,a.known=u,this._deviceList.storeDevicesForUser(t,o),this._deviceList.saveIfDirty()),n&&t===this._userId){c.logger.info("Own device "+e+" marked verified: signing");const n=await this._crossSigningInfo.signDevice(t,p.DeviceInfo.fromStorage(a,e));if(n){const i=async({shouldEmit:r})=>{c.logger.info("Uploading signature for "+e);const s=await this._baseApis.uploadKeySignatures({[t]:{[e]:n}}),{failures:o}=s||{};if(Object.keys(o||[]).length>0)throw r&&this._baseApis.emit("crypto.keySignatureUploadFailure",o,"setDeviceVerification",i),new I.KeySignatureUploadError("Key upload failed",{failures:o})};await i({shouldEmit:!0})}}const h=p.DeviceInfo.fromStorage(a,e);return this.emit("deviceVerificationChanged",t,e,h),h},D.prototype.findVerificationRequestDMInProgress=function(t){return this._inRoomVerificationRequests.findRequestInProgress(t)},D.prototype.getVerificationRequestsToDeviceInProgress=function(t){return this._toDeviceVerificationRequests.getRequestsInProgress(t)},D.prototype.requestVerificationDM=function(t,e){const n=this._inRoomVerificationRequests.findRequestInProgress(e);if(n)return Promise.resolve(n);const i=new C.InRoomChannel(this._baseApis,e,t);return this._requestVerificationWithChannel(t,i,this._inRoomVerificationRequests)},D.prototype.requestVerification=function(t,e){e||(e=Object.keys(this._deviceList.getRawStoredDevicesForUser(t)));const n=this._toDeviceVerificationRequests.findRequestInProgress(t,e);if(n)return Promise.resolve(n);const i=new x.ToDeviceChannel(this._baseApis,t,e,x.ToDeviceChannel.makeTransactionId());return this._requestVerificationWithChannel(t,i,this._toDeviceVerificationRequests)},D.prototype._requestVerificationWithChannel=async function(t,e,n){let i=new k.VerificationRequest(e,this._verificationMethods,this._baseApis);e.transactionId&&n.setRequestByChannel(e,i),await i.sendRequest();const r=n.getRequestByChannel(e);return r?i=r:(c.logger.log(`Crypto: adding new request to requestsByTxnId with id ${e.transactionId} ${e.roomId}`),n.setRequestByChannel(e,i)),i},D.prototype.beginKeyVerification=function(t,e,n,i=null){let r;if(i){if(r=this._toDeviceVerificationRequests.getRequestBySenderAndTxnId(e,i),!r)throw new Error(`No request found for user ${e} with transactionId `+i)}else{i=x.ToDeviceChannel.makeTransactionId();const t=new x.ToDeviceChannel(this._baseApis,e,[n],i,n);r=new k.VerificationRequest(t,this._verificationMethods,this._baseApis),this._toDeviceVerificationRequests.setRequestBySenderAndTxnId(e,i,r)}return r.beginKeyVerification(t,{userId:e,deviceId:n})},D.prototype.legacyDeviceVerification=async function(t,e,n){const i=x.ToDeviceChannel.makeTransactionId(),r=new x.ToDeviceChannel(this._baseApis,t,[e],i,e),s=new k.VerificationRequest(r,this._verificationMethods,this._baseApis);this._toDeviceVerificationRequests.setRequestBySenderAndTxnId(t,i,s);const o=s.beginKeyVerification(n,{userId:t,deviceId:e});return await Promise.race([o.verify(),s.waitFor(t=>t.started)]),s},D.prototype.getOlmSessionsForUser=async function(t){const e=this.getStoredDevicesForUser(t)||[],n={};for(let i=0;i<e.length;++i){const t=e[i],r=t.getIdentityKey(),s=await this._olmDevice.getSessionInfoForDevice(r);n[t.deviceId]={deviceIdKey:r,sessions:s}}return n},D.prototype.getEventSenderDeviceInfo=function(t){const e=t.getSenderKey(),n=t.getWireContent().algorithm;if(!e||!n)return null;if(t.getForwardingCurve25519KeyChain().length>0)return null;if(t.isKeySourceUntrusted())return null;const i=this._deviceList.getDeviceByIdentityKey(n,e);if(null===i)return null;const r=t.getClaimedEd25519Key();return r?r!==i.getFingerprint()?(c.logger.warn("Event "+t.getId()+" claims ed25519 key "+r+"but sender device has key "+i.getFingerprint()),null):i:(c.logger.warn("Event "+t.getId()+" claims no ed25519 key: cannot verify sending device"),null)},D.prototype.getEventEncryptionInfo=function(t){const e={};if(e.senderKey=t.getSenderKey(),e.algorithm=t.getWireContent().algorithm,!e.senderKey||!e.algorithm)return e.encrypted=!1,e;e.encrypted=!0;const n=t.getForwardingCurve25519KeyChain();e.authenticated=!(n.length>0||t.isKeySourceUntrusted()),e.sender=this._deviceList.getDeviceByIdentityKey(e.algorithm,e.senderKey);const i=t.getClaimedEd25519Key();return i||(c.logger.warn("Event "+t.getId()+" claims no ed25519 key: cannot verify sending device"),e.mismatchedSender=!0),e.sender&&i!==e.sender.getFingerprint()&&(c.logger.warn("Event "+t.getId()+" claims ed25519 key "+i+"but sender device has key "+e.sender.getFingerprint()),e.mismatchedSender=!0),e},D.prototype.forceDiscardSession=function(t){const e=this._roomEncryptors[t];if(void 0===e)throw new Error("Room not encrypted");if(void 0===e.forceDiscardSession)throw new Error("Room encryption algorithm doesn't support session discarding");e.forceDiscardSession()},D.prototype.setRoomEncryption=async function(t,e,n){if(!e.algorithm)return void c.logger.log("Ignoring setRoomEncryption with no algorithm");const i=this._roomList.getRoomEncryption(t);if(i&&JSON.stringify(i)!=JSON.stringify(e))return void c.logger.error("Ignoring m.room.encryption event which requests a change of config in "+t);if(this._roomEncryptors[t])return;let r=null;i||(r=this._roomList.setRoomEncryption(t,e));const s=m.ENCRYPTION_CLASSES[e.algorithm];if(!s)throw new Error("Unable to encrypt with "+e.algorithm);const o=new s({userId:this._userId,deviceId:this._deviceId,crypto:this,olmDevice:this._olmDevice,baseApis:this._baseApis,roomId:t,config:e});this._roomEncryptors[t]=o,r&&await r,this._lazyLoadMembers?c.logger.log("Enabling encryption in "+t):(c.logger.log("Enabling encryption in "+t+"; starting to track device lists for all users therein"),await this.trackRoomDevices(t),this.inhibitDeviceQuery||this._deviceList.refreshOutdatedDeviceLists())},D.prototype.trackRoomDevices=function(t){let e=this._roomDeviceTrackingState[t];return e||(e=(async()=>{if(!this._roomEncryptors[t])return;const e=this._clientStore.getRoom(t);if(!e)throw new Error("Unable to start tracking devices in unknown room "+t);c.logger.log(`Starting to track devices for room ${t} ...`),(await e.getEncryptionTargetMembers()).forEach(t=>{this._deviceList.startTrackingDeviceList(t.userId)})})(),this._roomDeviceTrackingState[t]=e),e},D.prototype.ensureOlmSessionsForUsers=function(t){const e={};for(let n=0;n<t.length;++n){const i=t[n];e[i]=[];const r=this.getStoredDevicesForUser(i)||[];for(let t=0;t<r.length;++t){const n=r[t];n.getIdentityKey()!=this._olmDevice.deviceCurve25519Key&&n.verified!=O.BLOCKED&&e[i].push(n)}}return h.ensureOlmSessionsForDevices(this._olmDevice,this._baseApis,e)},D.prototype.exportRoomKeys=async function(){const t=[];return await this._cryptoStore.doTxn("readonly",[v.IndexedDBCryptoStore.STORE_INBOUND_GROUP_SESSIONS],e=>{this._cryptoStore.getAllEndToEndInboundGroupSessions(e,e=>{if(null===e)return;const n=this._olmDevice.exportInboundGroupSession(e.senderKey,e.sessionId,e.sessionData);delete n.first_known_index,n.algorithm=h.MEGOLM_ALGORITHM,t.push(n)})}),t},D.prototype.importRoomKeys=function(t,e={}){let n=0,i=0;const r=t.length;function s(){e.progressCallback({stage:"load_keys",successes:n,failures:i,total:r})}return Promise.all(t.map(t=>t.room_id&&t.algorithm?this._getRoomDecryptor(t.room_id,t.algorithm).importRoomKey(t,e).finally(t=>{n++,e.progressCallback&&s()}):(c.logger.warn("ignoring room key entry with missing fields",t),i++,e.progressCallback&&s(),null)))},D.prototype.scheduleKeyBackupSend=async function(t=1e4){if(!this._sendingBackups){this._sendingBackups=!0;try{const n=Math.random()*t;await(0,l.sleep)(n);let i=0;for(;;){if(!this.backupKey)return;try{if(0===await this._backupPendingKeys(200))return;i=0}catch(e){if(i++,c.logger.log("Key backup request failed",e),e.data&&("M_NOT_FOUND"==e.data.errcode||"M_WRONG_ROOM_KEYS_VERSION"==e.data.errcode))throw await this.checkKeyBackup(),this.emit("crypto.keyBackupFailed",e.data.errcode),e}i&&await(0,l.sleep)(1e3*Math.pow(2,Math.min(i-1,4)))}}finally{this._sendingBackups=!1}}},D.prototype._backupPendingKeys=async function(t){const e=await this._cryptoStore.getSessionsNeedingBackup(t);if(!e.length)return 0;let n=await this._cryptoStore.countSessionsNeedingBackup();this.emit("crypto.keyBackupSessionsRemaining",n);const i={};for(const r of e){const t=r.sessionData.room_id;void 0===i[t]&&(i[t]={sessions:{}});const e=await this._olmDevice.exportInboundGroupSession(r.senderKey,r.sessionId,r.sessionData);e.algorithm=h.MEGOLM_ALGORITHM,delete e.session_id,delete e.room_id;const n=e.first_known_index;delete e.first_known_index;const s=this.backupKey.encrypt(JSON.stringify(e)),o=(e.forwarding_curve25519_key_chain||[]).length,a=this._deviceList.getUserByIdentityKey(h.MEGOLM_ALGORITHM,r.senderKey),c=this._deviceList.getDeviceByIdentityKey(h.MEGOLM_ALGORITHM,r.senderKey),l=this._checkDeviceInfoTrust(a,c).isVerified();i[t].sessions[r.sessionId]={first_message_index:n,forwarded_count:o,is_verified:l,session_data:s}}return await this._baseApis.sendKeyBackup(void 0,void 0,this.backupInfo.version,{rooms:i}),await this._cryptoStore.unmarkSessionsNeedingBackup(e),n=await this._cryptoStore.countSessionsNeedingBackup(),this.emit("crypto.keyBackupSessionsRemaining",n),e.length},D.prototype.backupGroupSession=async function(t,e,n,i,r,s,o){if(!this.backupInfo)throw new Error("Key backups are not enabled");await this._cryptoStore.markSessionsNeedingBackup([{senderKey:e,sessionId:i}]),this.scheduleKeyBackupSend()},D.prototype.scheduleAllGroupSessionsForBackup=async function(){await this.flagAllGroupSessionsForBackup(),this.scheduleKeyBackupSend(0)},D.prototype.flagAllGroupSessionsForBackup=async function(){await this._cryptoStore.doTxn("readwrite",[v.IndexedDBCryptoStore.STORE_INBOUND_GROUP_SESSIONS,v.IndexedDBCryptoStore.STORE_BACKUP],t=>{this._cryptoStore.getAllEndToEndInboundGroupSessions(t,e=>{null!==e&&this._cryptoStore.markSessionsNeedingBackup([e],t)})});const t=await this._cryptoStore.countSessionsNeedingBackup();return this.emit("crypto.keyBackupSessionsRemaining",t),t},D.prototype.prepareToEncrypt=function(t){const e=this._roomEncryptors[t.roomId];e&&e.prepareToEncrypt(t)},D.prototype.encryptEvent=async function(t,e){if(!e)throw new Error("Cannot send encrypted messages in unknown rooms");const n=t.getRoomId(),i=this._roomEncryptors[n];if(!i)throw new Error("Room was previously configured to use encryption, but is no longer. Perhaps the homeserver is hiding the configuration event.");this._roomDeviceTrackingState[n]||this.trackRoomDevices(n),await this._roomDeviceTrackingState[n];let r=t.getContent();const s=r["m.relates_to"];s&&(r=Object.assign({},r),delete r["m.relates_to"]);const o=await i.encryptMessage(e,t.getType(),r);s&&(o["m.relates_to"]=s),t.makeEncrypted("m.room.encrypted",o,this._olmDevice.deviceCurve25519Key,this._olmDevice.deviceEd25519Key)},D.prototype.decryptEvent=function(t){if(t.isRedacted())return Promise.resolve({clearEvent:{room_id:t.getRoomId(),type:"m.room.message",content:{}}});const e=t.getWireContent();return this._getRoomDecryptor(t.getRoomId(),e.algorithm).decryptEvent(t)},D.prototype.handleDeviceListChanges=async function(t,e){t.oldSyncToken&&await this._evalDeviceListChanges(e)},D.prototype.requestRoomKey=function(t,e,n=!1){return this._outgoingRoomKeyRequestManager.queueRoomKeyRequest(t,e,n).then(()=>{this._sendKeyRequestsImmediately&&this._outgoingRoomKeyRequestManager.sendQueuedRequests()}).catch(t=>{c.logger.error("Error requesting key for event",t)})},D.prototype.cancelRoomKeyRequest=function(t){this._outgoingRoomKeyRequestManager.cancelRoomKeyRequest(t).catch(t=>{c.logger.warn("Error clearing pending room key requests",t)})},D.prototype.cancelAndResendAllOutgoingKeyRequests=function(){return this._outgoingRoomKeyRequestManager.cancelAndResendAllOutgoingRequests()},D.prototype.onCryptoEvent=async function(t){const e=t.getRoomId(),n=t.getContent();try{await this.setRoomEncryption(e,n,!0)}catch(i){c.logger.error("Error configuring encryption in room "+e+":",i)}},D.prototype.onSyncWillProcess=async function(t){t.oldSyncToken||(c.logger.log("Initial sync performed - resetting device tracking state"),this._deviceList.stopTrackingAllDeviceLists(),this._deviceList.startTrackingDeviceList(this._userId),this._roomDeviceTrackingState={}),this._sendKeyRequestsImmediately=!1},D.prototype.onSyncCompleted=async function(t){const e=t.nextSyncToken;this._deviceList.setSyncToken(t.nextSyncToken),this._deviceList.saveIfDirty(),this._deviceList.lastKnownSyncToken=e,this._deviceList.startTrackingDeviceList(this._userId),this._deviceList.refreshOutdatedDeviceLists(),t.catchingUp||(function(t){if(t._oneTimeKeyCheckInProgress)return;const e=Date.now();if(null!==t._lastOneTimeKeyCheck&&e-t._lastOneTimeKeyCheck<6e4)return;t._lastOneTimeKeyCheck=e;const n=t._olmDevice.maxNumberOfOneTimeKeys(),i=Math.floor(n/2);t._oneTimeKeyCheckInProgress=!0,Promise.resolve().then(()=>void 0!==t._oneTimeKeyCount?Promise.resolve(t._oneTimeKeyCount):t._baseApis.uploadKeysRequest({}).then(t=>t.one_time_key_counts.signed_curve25519||0)).then(e=>function e(n){if(i<=n)return Promise.resolve();const r=Math.min(i-n,5);return t._olmDevice.generateOneTimeKeys(r).then(()=>async function(t){const e=await t._olmDevice.getOneTimeKeys(),n={},i=[];for(const s in e.curve25519)if(e.curve25519.hasOwnProperty(s)){const r={key:e.curve25519[s]};n["signed_curve25519:"+s]=r,i.push(t._signObject(r))}await Promise.all(i);const r=await t._baseApis.uploadKeysRequest({one_time_keys:n});return await t._olmDevice.markKeysAsPublished(),r}(t)).then(t=>{if(t.one_time_key_counts&&t.one_time_key_counts.signed_curve25519)return e(t.one_time_key_counts.signed_curve25519);throw new Error("response for uploading keys does not contain one_time_key_counts.signed_curve25519")})}(e)).catch(t=>{c.logger.error("Error uploading one-time keys",t.stack||t)}).finally(()=>{t._oneTimeKeyCount=void 0,t._oneTimeKeyCheckInProgress=!1})}(this),this._processReceivedRoomKeyRequests(),this._outgoingRoomKeyRequestManager.sendQueuedRequests(),this._sendKeyRequestsImmediately=!0)},D.prototype._evalDeviceListChanges=async function(t){if(t.changed&&Array.isArray(t.changed)&&t.changed.forEach(t=>{this._deviceList.invalidateUserDeviceList(t)}),t.left&&Array.isArray(t.left)&&t.left.length){const e=new Set(await this._getTrackedE2eUsers());t.left.forEach(t=>{e.has(t)||this._deviceList.stopTrackingDeviceList(t)})}},D.prototype._getTrackedE2eUsers=async function(){const t=[];for(const e of this._getTrackedE2eRooms()){const n=await e.getEncryptionTargetMembers();for(const e of n)t.push(e.userId)}return t},D.prototype._getTrackedE2eRooms=function(){return this._clientStore.getRooms().filter(t=>{if(!this._roomEncryptors[t.roomId])return!1;if(!this._roomDeviceTrackingState[t.roomId])return!1;const e=t.getMyMembership();return"join"===e||"invite"===e})},D.prototype._onToDeviceEvent=function(t){try{c.logger.log(`received to_device ${t.getType()} from: ${t.getSender()} id: ${t.getId()}`),"m.room_key"==t.getType()||"m.forwarded_room_key"==t.getType()?this._onRoomKeyEvent(t):"m.room_key_request"==t.getType()?this._onRoomKeyRequestEvent(t):"m.secret.request"===t.getType()?this._secretStorage._onRequestReceived(t):"m.secret.send"===t.getType()?this._secretStorage._onSecretReceived(t):"org.matrix.room_key.withheld"===t.getType()?this._onRoomKeyWithheldEvent(t):t.getContent().transaction_id?this._onKeyVerificationMessage(t):"m.bad.encrypted"===t.getContent().msgtype?this._onToDeviceBadEncrypted(t):t.isBeingDecrypted()&&t.once("Event.decrypted",t=>{this._onToDeviceEvent(t)})}catch(e){c.logger.error("Error handling toDeviceEvent:",e)}},D.prototype._onRoomKeyEvent=function(t){const e=t.getContent();e.room_id&&e.algorithm?(this._checkedForBackup||this._checkAndStartKeyBackup(),this._getRoomDecryptor(e.room_id,e.algorithm).onRoomKeyEvent(t)):c.logger.error("key event is missing fields")},D.prototype._onRoomKeyWithheldEvent=function(t){const e=t.getContent();if(!(("m.no_olm"===e.code||e.room_id&&e.session_id)&&e.algorithm&&e.sender_key))return void c.logger.error("key withheld event is missing fields");c.logger.info(`Got room key withheld event from ${t.getSender()} (${e.sender_key}) for ${e.algorithm}/${e.room_id}/${e.session_id} with reason ${e.code} (${e.reason})`);const n=this._getRoomDecryptor(e.room_id,e.algorithm);if(n.onRoomKeyWithheldEvent&&n.onRoomKeyWithheldEvent(t),!e.room_id){const t=this._getRoomDecryptors(e.algorithm);for(const n of t)n.retryDecryptionFromSender(e.sender_key)}},D.prototype._onKeyVerificationMessage=function(t){x.ToDeviceChannel.validateEvent(t,this._baseApis)&&this._handleVerificationEvent(t,this._toDeviceVerificationRequests,t=>{if(!x.ToDeviceChannel.canCreateRequest(x.ToDeviceChannel.getEventType(t)))return;const e=t.getContent(),n=e&&e.from_device;if(!n)return;const i=t.getSender(),r=new x.ToDeviceChannel(this._baseApis,i,[n]);return new k.VerificationRequest(r,this._verificationMethods,this._baseApis)})},D.prototype._onTimelineEvent=function(t,e,n,i,{liveEvent:r}={}){C.InRoomChannel.validateEvent(t,this._baseApis)&&this._handleVerificationEvent(t,this._inRoomVerificationRequests,t=>{const e=new C.InRoomChannel(this._baseApis,t.getRoomId());return new k.VerificationRequest(e,this._verificationMethods,this._baseApis)},r)},D.prototype._handleVerificationEvent=async function(t,e,n,i=!0){let r=e.getRequest(t),s=!1;if(!r){if(r=n(t),!r)return void c.logger.log("Crypto: could not find VerificationRequest for "+t.getType()+", and could not create one, so ignoring.");s=!0,e.setRequest(t,r)}t.setVerificationRequest(r);try{await r.channel.handleEvent(t,r,i)}catch(o){c.logger.error("error while handling verification event: "+o.message)}s&&!r.initiatedByMe&&!r.invalid&&!r.observeOnly&&this._baseApis.emit("crypto.verification.request",r)},D.prototype._onToDeviceBadEncrypted=async function(t){const e=t.getWireContent(),n=t.getSender(),i=e.algorithm,r=e.sender_key,s=()=>{const t=this._getRoomDecryptors(h.MEGOLM_ALGORITHM);for(const e of t)e.retryDecryptionFromSender(r)};if(void 0===n||void 0===r||void 0===r)return;this._lastNewSessionForced[n]=this._lastNewSessionForced[n]||{};const o=this._lastNewSessionForced[n][r]||0;if(o+36e5>Date.now())return c.logger.debug("New session already forced with device "+n+":"+r+" at "+o+": not forcing another"),await this._olmDevice.recordSessionProblem(r,"wedged",!0),void s();let a=this._deviceList.getDeviceByIdentityKey(i,r);if(!a&&(await this.downloadKeys([n],!1),a=this._deviceList.getDeviceByIdentityKey(i,r),!a))return c.logger.info("Couldn't find device for identity key "+r+": not re-establishing session"),await this._olmDevice.recordSessionProblem(r,"wedged",!1),void s();const l={};l[n]=[a],await h.ensureOlmSessionsForDevices(this._olmDevice,this._baseApis,l,!0),this._lastNewSessionForced[n][r]=Date.now();const u={algorithm:h.OLM_ALGORITHM,sender_key:this._olmDevice.deviceCurve25519Key,ciphertext:{}};await h.encryptMessageForDevice(u.ciphertext,this._userId,this._deviceId,this._olmDevice,n,a,{type:"m.dummy"}),await this._olmDevice.recordSessionProblem(r,"wedged",!0),s(),await this._baseApis.sendToDevice("m.room.encrypted",{[n]:{[a.deviceId]:u}});const d=await this._outgoingRoomKeyRequestManager.getOutgoingSentRoomKeyRequest(n,a.deviceId);for(const c of d)this.requestRoomKey(c.requestBody,c.recipients,!0)},D.prototype._onRoomMembership=function(t,e,n){const i=e.roomId,r=this._roomEncryptors[i];r&&(this._roomDeviceTrackingState[i]&&("join"==e.membership?(c.logger.log("Join event for "+e.userId+" in "+i),this._deviceList.startTrackingDeviceList(e.userId)):"invite"==e.membership&&this._clientStore.getRoom(i).shouldEncryptForInvitedMembers()&&(c.logger.log("Invite event for "+e.userId+" in "+i),this._deviceList.startTrackingDeviceList(e.userId))),r.onRoomMembership(t,e,n))},D.prototype._onRoomKeyRequestEvent=function(t){const e=t.getContent();if("request"===e.action){const e=new M(t);this._receivedRoomKeyRequests.push(e)}else if("request_cancellation"===e.action){const e=new N(t);this._receivedRoomKeyRequestCancellations.push(e)}},D.prototype._processReceivedRoomKeyRequests=async function(){if(!this._processingRoomKeyRequests){this._processingRoomKeyRequests=!0;try{const t=this._receivedRoomKeyRequests;this._receivedRoomKeyRequests=[];const e=this._receivedRoomKeyRequestCancellations;this._receivedRoomKeyRequestCancellations=[],await Promise.all(t.map(t=>this._processReceivedRoomKeyRequest(t))),await Promise.all(e.map(t=>this._processReceivedRoomKeyRequestCancellation(t)))}catch(t){c.logger.error("Error processing room key requsts: "+t)}finally{this._processingRoomKeyRequests=!1}}},D.prototype._processReceivedRoomKeyRequest=async function(t){const e=t.userId,n=t.deviceId,i=t.requestBody,r=i.room_id,s=i.algorithm;if(c.logger.log(`m.room_key_request from ${e}:${n} for ${r} / ${i.session_id} (id ${t.requestId})`),e!==this._userId){if(!this._roomEncryptors[r])return void c.logger.debug("room key request for unencrypted room "+r);const t=this._roomEncryptors[r],s=this._deviceList.getStoredDevice(e,n);if(!s)return void c.logger.debug(`Ignoring keyshare for unknown device ${e}:${n}`);try{await t.reshareKeyWithDevice(i.sender_key,i.session_id,e,s)}catch(a){c.logger.warn("Failed to re-share keys for session "+i.session_id+" with device "+e+":"+s.deviceId,a)}return}if(n===this._deviceId)return void c.logger.log("Ignoring room key request from ourselves");if(!this._roomDecryptors[r])return void c.logger.log("room key request for unencrypted room "+r);const o=this._roomDecryptors[r][s];if(o)if(await o.hasKeysForKeyRequest(t)){if(t.share=()=>{o.shareKeysWithDevice(t)},this.checkDeviceTrust(e,n).isVerified())return c.logger.log("device is already verified: sharing keys"),void t.share();this.emit("crypto.roomKeyRequest",t)}else c.logger.log(`room key request for unknown session ${r} / `+i.session_id);else c.logger.log(`room key request for unknown alg ${s} in room ${r}`)},D.prototype._processReceivedRoomKeyRequestCancellation=async function(t){c.logger.log(`m.room_key_request cancellation for ${t.userId}:${t.deviceId} (id ${t.requestId})`),this.emit("crypto.roomKeyRequestCancellation",t)},D.prototype._getRoomDecryptor=function(t,e){let n,i;if((t=t||null)&&(n=this._roomDecryptors[t],n||(this._roomDecryptors[t]=n={}),i=n[e],i))return i;const r=m.DECRYPTION_CLASSES[e];if(!r)throw new m.DecryptionError("UNKNOWN_ENCRYPTION_ALGORITHM",'Unknown encryption algorithm "'+e+'".');return i=new r({userId:this._userId,crypto:this,olmDevice:this._olmDevice,baseApis:this._baseApis,roomId:t}),n&&(n[e]=i),i},D.prototype._getRoomDecryptors=function(t){const e=[];for(const n of Object.values(this._roomDecryptors))t in n&&e.push(n[t]);return e},D.prototype._signObject=async function(t){const e=t.signatures||{},n=t.unsigned;delete t.signatures,delete t.unsigned,e[this._userId]=e[this._userId]||{},e[this._userId]["ed25519:"+this._deviceId]=await this._olmDevice.sign(s.default.stringify(t)),t.signatures=e,void 0!==n&&(t.unsigned=n)};class M{constructor(t){const e=t.getContent();this.userId=t.getSender(),this.deviceId=e.requesting_device_id,this.requestId=e.request_id,this.requestBody=e.body||{},this.share=()=>{throw new Error("don't know how to share keys for this request yet")}}}class N{constructor(t){const e=t.getContent();this.userId=t.getSender(),this.deviceId=e.requesting_device_id,this.requestId=e.request_id}}},g4kb:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SERVICE_TYPES=void 0;const i=Object.freeze({IS:"SERVICE_TYPE_IS",IM:"SERVICE_TYPE_IM"});e.SERVICE_TYPES=i},h3nd:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.createCryptoStoreCacheCallbacks=function(t,e){return{getCrossSigningKeyCache:async function(n,r){const s=await new Promise(e=>t.doTxn("readonly",[o.IndexedDBCryptoStore.STORE_ACCOUNT],i=>{t.getSecretStorePrivateKey(i,e,n)}));if(s&&s.ciphertext){const t=Buffer.from(e._pickleKey),r=await(0,a.decryptAES)(s,t,n);return(0,i.decodeBase64)(r)}return s},storeCrossSigningKeyCache:async function(n,r){if(!(r instanceof Uint8Array))throw new Error("storeCrossSigningKeyCache expects Uint8Array, got "+r);const s=Buffer.from(e._pickleKey);return r=await(0,a.encryptAES)((0,i.encodeBase64)(r),s,n),t.doTxn("readwrite",[o.IndexedDBCryptoStore.STORE_ACCOUNT],e=>{t.storeSecretStorePrivateKey(e,n,r)})}}},e.DeviceTrustLevel=e.UserTrustLevel=e.CrossSigningLevel=e.CrossSigningInfo=void 0;var i=n("VRzr"),r=n("+qE3"),s=n("PrRn"),o=n("qN7M"),a=n("uMDy");function c(t){return Object.values(t.keys)[0]}class l extends r.EventEmitter{constructor(t,e,n){super(),Object.defineProperty(this,"userId",{enumerable:!0,value:t}),this._callbacks=e||{},this._cacheCallbacks=n||{},this.keys={},this.firstUse=!0,this.crossSigningVerifiedBefore=!1}async getCrossSigningKey(t,e){const n=["self_signing","user_signing"].indexOf(t)>=0;if(!this._callbacks.getCrossSigningKey)throw new Error("No getCrossSigningKey callback supplied");function i(t){if(!t)return;const n=new global.Olm.PkSigning,i=n.init_with_seed(t);if(i===e)return[i,n];n.free()}let r;void 0===e&&(e=this.getId(t)),this._cacheCallbacks.getCrossSigningKeyCache&&n&&(r=await this._cacheCallbacks.getCrossSigningKeyCache(t,e));const s=i(r);if(s)return s;r=await this._callbacks.getCrossSigningKey(t,e);const o=i(r);if(o)return this._cacheCallbacks.storeCrossSigningKeyCache&&n&&await this._cacheCallbacks.storeCrossSigningKeyCache(t,r),o;if(!r)throw new Error("getCrossSigningKey callback for "+t+" returned falsey");throw new Error("Key type "+t+" from getCrossSigningKey callback did not match")}static fromStorage(t,e){const n=new l(e);for(const i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);return n}toStorage(){return{keys:this.keys,firstUse:this.firstUse,crossSigningVerifiedBefore:this.crossSigningVerifiedBefore}}async isStoredInSecretStorage(t){const e=await t.isStored("m.cross_signing.master",!1)||{};function n(t){for(const n of Object.keys(e))t[n]||delete e[n]}for(const i of["self_signing","user_signing"])n(await t.isStored("m.cross_signing."+i,!1)||{});return Object.keys(e).length?e:null}static async storeInSecretStorage(t,e){for(const[n,r]of t){const t=(0,i.encodeBase64)(r);await e.store("m.cross_signing."+n,t)}}static async getFromSecretStorage(t,e){const n=await e.get("m.cross_signing."+t);return(0,i.decodeBase64)(n)}getId(t){return this.keys[t=t||"master"]?c(this.keys[t]):null}async resetKeys(t){if(!this._callbacks.saveCrossSigningKeys)throw new Error("No saveCrossSigningKeys callback supplied");if(void 0===t||t&u.MASTER||!this.keys.master)t=u.MASTER|u.USER_SIGNING|u.SELF_SIGNING;else if(0===t)return;const e={},n={};let r,s;try{if(t&u.MASTER?(r=new global.Olm.PkSigning,e.master=r.generate_seed(),s=r.init_with_seed(e.master),n.master={user_id:this.userId,usage:["master"],keys:{["ed25519:"+s]:s}}):[s,r]=await this.getCrossSigningKey("master"),t&u.SELF_SIGNING){const t=new global.Olm.PkSigning;try{e.self_signing=t.generate_seed();const o=t.init_with_seed(e.self_signing);n.self_signing={user_id:this.userId,usage:["self_signing"],keys:{["ed25519:"+o]:o}},(0,i.pkSign)(n.self_signing,r,this.userId,s)}finally{t.free()}}if(t&u.USER_SIGNING){const t=new global.Olm.PkSigning;try{e.user_signing=t.generate_seed();const o=t.init_with_seed(e.user_signing);n.user_signing={user_id:this.userId,usage:["user_signing"],keys:{["ed25519:"+o]:o}},(0,i.pkSign)(n.user_signing,r,this.userId,s)}finally{t.free()}}Object.assign(this.keys,n),this._callbacks.saveCrossSigningKeys(e)}finally{r&&r.free()}}clearKeys(){this.keys={}}setKeys(t){const e={};if(t.master){if(t.master.user_id!==this.userId){const e="Mismatched user ID "+t.master.user_id+" in master key from "+this.userId;throw s.logger.error(e),new Error(e)}this.keys.master?c(t.master)!==this.getId()&&(this.firstUse=!1):this.firstUse=!0,e.master=t.master}else{if(!this.keys.master)throw new Error("Tried to set cross-signing keys without a master key");e.master=this.keys.master}const n=c(e.master);if(t.user_signing){if(t.user_signing.user_id!==this.userId){const e="Mismatched user ID "+t.master.user_id+" in user_signing key from "+this.userId;throw s.logger.error(e),new Error(e)}try{(0,i.pkVerify)(t.user_signing,n,this.userId)}catch(r){throw s.logger.error("invalid signature on user-signing key"),r}}if(t.self_signing){if(t.self_signing.user_id!==this.userId){const e="Mismatched user ID "+t.master.user_id+" in self_signing key from "+this.userId;throw s.logger.error(e),new Error(e)}try{(0,i.pkVerify)(t.self_signing,n,this.userId)}catch(r){throw s.logger.error("invalid signature on self-signing key"),r}}t.master&&(this.keys.master=t.master,this.keys.self_signing=null,this.keys.user_signing=null),t.self_signing&&(this.keys.self_signing=t.self_signing),t.user_signing&&(this.keys.user_signing=t.user_signing)}updateCrossSigningVerifiedBefore(t){!this.crossSigningVerifiedBefore&&t&&(this.crossSigningVerifiedBefore=!0)}async signObject(t,e){if(!this.keys[e])throw new Error("Attempted to sign with "+e+" key but no such key present");const[n,r]=await this.getCrossSigningKey(e);try{return(0,i.pkSign)(t,r,this.userId,n),t}finally{r.free()}}async signUser(t){if(this.keys.user_signing)return this.signObject(t.keys.master,"user_signing");s.logger.info("No user signing key: not signing user")}async signDevice(t,e){if(t!==this.userId)throw new Error(`Trying to sign ${t}'s device; can only sign our own device`);if(this.keys.self_signing)return this.signObject({algorithms:e.algorithms,keys:e.keys,device_id:e.deviceId,user_id:t},"self_signing");s.logger.info("No self signing key: not signing device")}checkUserTrust(t){if(this.userId===t.userId&&this.getId()&&this.getId()===t.getId()&&this.getId("self_signing")&&this.getId("self_signing")===t.getId("self_signing"))return new h(!0,!0,this.firstUse);if(!this.keys.user_signing)return new h(!1,!1,t.firstUse);let e;const n=t.keys.master,r=this.getId("user_signing");try{(0,i.pkVerify)(n,r,this.userId),e=!0}catch(s){e=!1}return new h(e,t.crossSigningVerifiedBefore,t.firstUse)}checkDeviceTrust(t,e,n,r){const s=this.checkUserTrust(t),o=t.keys.self_signing;if(!o)return new d(!1,!1,n,r);const a=function(t,e){return{algorithms:t.algorithms,keys:t.keys,device_id:t.deviceId,user_id:e,signatures:t.signatures}}(e,t.userId);try{return(0,i.pkVerify)(o,t.getId(),t.userId),(0,i.pkVerify)(a,c(o),t.userId),d.fromUserTrustLevel(s,n,r)}catch(l){return new d(!1,!1,n,r)}}getCacheCallbacks(){return this._cacheCallbacks}}e.CrossSigningInfo=l;const u={MASTER:4,USER_SIGNING:2,SELF_SIGNING:1};e.CrossSigningLevel=u;class h{constructor(t,e,n){this._crossSigningVerified=t,this._crossSigningVerifiedBefore=e,this._tofu=n}isVerified(){return this.isCrossSigningVerified()}isCrossSigningVerified(){return this._crossSigningVerified}wasCrossSigningVerified(){return this._crossSigningVerifiedBefore}isTofu(){return this._tofu}}e.UserTrustLevel=h;class d{constructor(t,e,n,i){this._crossSigningVerified=t,this._tofu=e,this._localVerified=n,this._trustCrossSignedDevices=i}static fromUserTrustLevel(t,e,n){return new d(t._crossSigningVerified,t._tofu,e,n)}isVerified(){return Boolean(this.isLocallyVerified()||this._trustCrossSignedDevices&&this.isCrossSigningVerified())}isCrossSigningVerified(){return this._crossSigningVerified}isLocallyVerified(){return this._localVerified}isTofu(){return this._tofu}}e.DeviceTrustLevel=d},hwdV:function(t,e,n){var i=n("tjlA"),r=i.Buffer;function s(t,e){for(var n in t)e[n]=t[n]}function o(t,e,n){return r(t,e,n)}r.from&&r.alloc&&r.allocUnsafe&&r.allocUnsafeSlow?t.exports=i:(s(i,e),e.Buffer=o),s(r,o),o.from=function(t,e,n){if("number"==typeof t)throw new TypeError("Argument must not be a number");return r(t,e,n)},o.alloc=function(t,e,n){if("number"!=typeof t)throw new TypeError("Argument must be a number");var i=r(t);return void 0!==e?"string"==typeof n?i.fill(e,n):i.fill(e):i.fill(0),i},o.allocUnsafe=function(t){if("number"!=typeof t)throw new TypeError("Argument must be a number");return r(t)},o.allocUnsafeSlow=function(t){if("number"!=typeof t)throw new TypeError("Argument must be a number");return i.SlowBuffer(t)}},j0j2:function(t,e,n){"use strict";var i=n("284h");Object.defineProperty(e,"__esModule",{value:!0}),e.MatrixBaseApis=u;var r=n("g4kb"),s=n("PrRn"),o=n("TXj3"),a=i(n("t+e4")),c=n("1F5k");function l(t,e){switch(t){case r.SERVICE_TYPES.IS:return e+c.PREFIX_IDENTITY_V2+"/terms";case r.SERVICE_TYPES.IM:return e+"/_matrix/integrations/v1/terms";default:throw new Error("Unsupported service type")}}function u(t){a.checkObjectHasKeys(t,["baseUrl","request"]),this.baseUrl=t.baseUrl,this.idBaseUrl=t.idBaseUrl,this.identityServer=t.identityServer,this._http=new c.MatrixHttpApi(this,{baseUrl:t.baseUrl,idBaseUrl:t.idBaseUrl,accessToken:t.accessToken,request:t.request,prefix:c.PREFIX_R0,onlyData:!0,extraParams:t.queryParams,localTimeoutMs:t.localTimeoutMs,useAuthorizationHeader:t.useAuthorizationHeader}),this._txnCtr=0}u.prototype.getHomeserverUrl=function(){return this.baseUrl},u.prototype.getIdentityServerUrl=function(t=!1){return t&&(this.idBaseUrl.startsWith("http://")||this.idBaseUrl.startsWith("https://"))?this.idBaseUrl.split("://")[1]:this.idBaseUrl},u.prototype.setIdentityServerUrl=function(t){this.idBaseUrl=a.ensureNoTrailingSlash(t),this._http.setIdBaseUrl(this.idBaseUrl)},u.prototype.getAccessToken=function(){return this._http.opts.accessToken||null},u.prototype.isLoggedIn=function(){return void 0!==this._http.opts.accessToken},u.prototype.makeTxnId=function(){return"m"+(new Date).getTime()+"."+this._txnCtr++},u.prototype.isUsernameAvailable=function(t){return this._http.authedRequest(void 0,"GET","/register/available",{username:t}).then(t=>t.available)},u.prototype.register=function(t,e,n,i,r,s,o,a){!0===r?r={email:!0}:null==r&&(r={}),"function"==typeof o&&(a=o,o=void 0),n&&(i.session=n);const c={auth:i};return null!=t&&(c.username=t),null!=e&&(c.password=e),r.email&&(c.bind_email=!0),r.msisdn&&(c.bind_msisdn=!0),null!=s&&(c.guest_access_token=s),null!=o&&(c.inhibit_login=o),null!=e&&(c.x_show_msisdn=!0),this.registerRequest(c,void 0,a)},u.prototype.registerGuest=function(t,e){return(t=t||{}).body=t.body||{},this.registerRequest(t.body,"guest",e)},u.prototype.registerRequest=function(t,e,n){const i={};return e&&(i.kind=e),this._http.request(n,"POST","/register",i,t)},u.prototype.loginFlows=function(t){return this._http.request(t,"GET","/login")},u.prototype.login=function(t,e,n){const i={type:t};return a.extend(i,e),this._http.authedRequest((t,e)=>{e&&e.access_token&&e.user_id&&(this._http.opts.accessToken=e.access_token,this.credentials={userId:e.user_id}),n&&n(t,e)},"POST","/login",void 0,i)},u.prototype.loginWithPassword=function(t,e,n){return this.login("m.login.password",{user:t,password:e},n)},u.prototype.loginWithSAML2=function(t,e){return this.login("m.login.saml2",{relay_state:t},e)},u.prototype.getCasLoginUrl=function(t){return this.getSsoLoginUrl(t,"cas")},u.prototype.getSsoLoginUrl=function(t,e){return void 0===e&&(e="sso"),this._http.getUrl("/login/"+e+"/redirect",{redirectUrl:t},c.PREFIX_R0)},u.prototype.loginWithToken=function(t,e){return this.login("m.login.token",{token:t},e)},u.prototype.logout=function(t){return this._http.authedRequest(t,"POST","/logout")},u.prototype.deactivateAccount=function(t,e){if("function"==typeof e)throw new Error("deactivateAccount no longer accepts a callback parameter");const n={};return t&&(n.auth=t),void 0!==e&&(n.erase=e),this._http.authedRequest(void 0,"POST","/account/deactivate",void 0,n)},u.prototype.getFallbackAuthUrl=function(t,e){const n=a.encodeUri("/auth/$loginType/fallback/web",{$loginType:t});return this._http.getUrl(n,{session:e},c.PREFIX_R0)},u.prototype.createRoom=function(t,e){return this._http.authedRequest(e,"POST","/createRoom",void 0,t)},u.prototype.fetchRelations=async function(t,e,n,i,r){const s={};r.from&&(s.from=r.from);const o=a.encodeParams(s),l=a.encodeUri("/rooms/$roomId/relations/$eventId/$relationType/$eventType?"+o,{$roomId:t,$eventId:e,$relationType:n,$eventType:i});return await this._http.authedRequest(void 0,"GET",l,null,null,{prefix:c.PREFIX_UNSTABLE})},u.prototype.roomState=function(t,e){const n=a.encodeUri("/rooms/$roomId/state",{$roomId:t});return this._http.authedRequest(e,"GET",n)},u.prototype.fetchRoomEvent=function(t,e,n){const i=a.encodeUri("/rooms/$roomId/event/$eventId",{$roomId:t,$eventId:e});return this._http.authedRequest(n,"GET",i)},u.prototype.members=function(t,e,n,i,r){const s={};e&&(s.membership=e),n&&(s.not_membership=n),i&&(s.at=i);const o=a.encodeParams(s),c=a.encodeUri("/rooms/$roomId/members?"+o,{$roomId:t});return this._http.authedRequest(r,"GET",c)},u.prototype.upgradeRoom=function(t,e){const n=a.encodeUri("/rooms/$roomId/upgrade",{$roomId:t});return this._http.authedRequest(void 0,"POST",n,void 0,{new_version:e})},u.prototype.getGroupSummary=function(t){const e=a.encodeUri("/groups/$groupId/summary",{$groupId:t});return this._http.authedRequest(void 0,"GET",e)},u.prototype.getGroupProfile=function(t){const e=a.encodeUri("/groups/$groupId/profile",{$groupId:t});return this._http.authedRequest(void 0,"GET",e)},u.prototype.setGroupProfile=function(t,e){const n=a.encodeUri("/groups/$groupId/profile",{$groupId:t});return this._http.authedRequest(void 0,"POST",n,void 0,e)},u.prototype.setGroupJoinPolicy=function(t,e){const n=a.encodeUri("/groups/$groupId/settings/m.join_policy",{$groupId:t});return this._http.authedRequest(void 0,"PUT",n,void 0,{"m.join_policy":e})},u.prototype.getGroupUsers=function(t){const e=a.encodeUri("/groups/$groupId/users",{$groupId:t});return this._http.authedRequest(void 0,"GET",e)},u.prototype.getGroupInvitedUsers=function(t){const e=a.encodeUri("/groups/$groupId/invited_users",{$groupId:t});return this._http.authedRequest(void 0,"GET",e)},u.prototype.getGroupRooms=function(t){const e=a.encodeUri("/groups/$groupId/rooms",{$groupId:t});return this._http.authedRequest(void 0,"GET",e)},u.prototype.inviteUserToGroup=function(t,e){const n=a.encodeUri("/groups/$groupId/admin/users/invite/$userId",{$groupId:t,$userId:e});return this._http.authedRequest(void 0,"PUT",n,void 0,{})},u.prototype.removeUserFromGroup=function(t,e){const n=a.encodeUri("/groups/$groupId/admin/users/remove/$userId",{$groupId:t,$userId:e});return this._http.authedRequest(void 0,"PUT",n,void 0,{})},u.prototype.addUserToGroupSummary=function(t,e,n){const i=a.encodeUri(n?"/groups/$groupId/summary/$roleId/users/$userId":"/groups/$groupId/summary/users/$userId",{$groupId:t,$roleId:n,$userId:e});return this._http.authedRequest(void 0,"PUT",i,void 0,{})},u.prototype.removeUserFromGroupSummary=function(t,e){const n=a.encodeUri("/groups/$groupId/summary/users/$userId",{$groupId:t,$userId:e});return this._http.authedRequest(void 0,"DELETE",n,void 0,{})},u.prototype.addRoomToGroupSummary=function(t,e,n){const i=a.encodeUri(n?"/groups/$groupId/summary/$categoryId/rooms/$roomId":"/groups/$groupId/summary/rooms/$roomId",{$groupId:t,$categoryId:n,$roomId:e});return this._http.authedRequest(void 0,"PUT",i,void 0,{})},u.prototype.removeRoomFromGroupSummary=function(t,e){const n=a.encodeUri("/groups/$groupId/summary/rooms/$roomId",{$groupId:t,$roomId:e});return this._http.authedRequest(void 0,"DELETE",n,void 0,{})},u.prototype.addRoomToGroup=function(t,e,n){void 0===n&&(n=!0);const i=a.encodeUri("/groups/$groupId/admin/rooms/$roomId",{$groupId:t,$roomId:e});return this._http.authedRequest(void 0,"PUT",i,void 0,{"m.visibility":{type:n?"public":"private"}})},u.prototype.updateGroupRoomVisibility=function(t,e,n){const i=a.encodeUri("/groups/$groupId/admin/rooms/$roomId/config/m.visibility",{$groupId:t,$roomId:e});return this._http.authedRequest(void 0,"PUT",i,void 0,{type:n?"public":"private"})},u.prototype.removeRoomFromGroup=function(t,e){const n=a.encodeUri("/groups/$groupId/admin/rooms/$roomId",{$groupId:t,$roomId:e});return this._http.authedRequest(void 0,"DELETE",n,void 0,{})},u.prototype.acceptGroupInvite=function(t,e=null){const n=a.encodeUri("/groups/$groupId/self/accept_invite",{$groupId:t});return this._http.authedRequest(void 0,"PUT",n,void 0,e||{})},u.prototype.joinGroup=function(t){const e=a.encodeUri("/groups/$groupId/self/join",{$groupId:t});return this._http.authedRequest(void 0,"PUT",e,void 0,{})},u.prototype.leaveGroup=function(t){const e=a.encodeUri("/groups/$groupId/self/leave",{$groupId:t});return this._http.authedRequest(void 0,"PUT",e,void 0,{})},u.prototype.getJoinedGroups=function(){const t=a.encodeUri("/joined_groups");return this._http.authedRequest(void 0,"GET",t)},u.prototype.createGroup=function(t){const e=a.encodeUri("/create_group");return this._http.authedRequest(void 0,"POST",e,void 0,t)},u.prototype.getPublicisedGroups=function(t){const e=a.encodeUri("/publicised_groups");return this._http.authedRequest(void 0,"POST",e,void 0,{user_ids:t})},u.prototype.setGroupPublicity=function(t,e){const n=a.encodeUri("/groups/$groupId/self/update_publicity",{$groupId:t});return this._http.authedRequest(void 0,"PUT",n,void 0,{publicise:e})},u.prototype.getStateEvent=function(t,e,n,i){const r={$roomId:t,$eventType:e,$stateKey:n};let s=a.encodeUri("/rooms/$roomId/state/$eventType",r);return void 0!==n&&(s=a.encodeUri(s+"/$stateKey",r)),this._http.authedRequest(i,"GET",s)},u.prototype.sendStateEvent=function(t,e,n,i,r){const s={$roomId:t,$eventType:e,$stateKey:i};let o=a.encodeUri("/rooms/$roomId/state/$eventType",s);return void 0!==i&&(o=a.encodeUri(o+"/$stateKey",s)),this._http.authedRequest(r,"PUT",o,void 0,n)},u.prototype.roomInitialSync=function(t,e,n){a.isFunction(e)&&(n=e,e=void 0);const i=a.encodeUri("/rooms/$roomId/initialSync",{$roomId:t});return e||(e=30),this._http.authedRequest(n,"GET",i,{limit:e})},u.prototype.setRoomReadMarkersHttpRequest=function(t,e,n,i){const r=a.encodeUri("/rooms/$roomId/read_markers",{$roomId:t}),s={"m.fully_read":e,"m.read":n,"m.hidden":Boolean(!!i&&i.hidden)};return this._http.authedRequest(void 0,"POST",r,void 0,s)},u.prototype.getJoinedRooms=function(){const t=a.encodeUri("/joined_rooms");return this._http.authedRequest(void 0,"GET",t)},u.prototype.getJoinedRoomMembers=function(t){const e=a.encodeUri("/rooms/$roomId/joined_members",{$roomId:t});return this._http.authedRequest(void 0,"GET",e)},u.prototype.publicRooms=function(t,e){"function"==typeof t&&(e=t,t={}),void 0===t&&(t={});const n={};return t.server&&(n.server=t.server,delete t.server),0===Object.keys(t).length&&0===Object.keys(n).length?this._http.authedRequest(e,"GET","/publicRooms"):this._http.authedRequest(e,"POST","/publicRooms",n,t)},u.prototype.createAlias=function(t,e,n){const i=a.encodeUri("/directory/room/$alias",{$alias:t});return this._http.authedRequest(n,"PUT",i,void 0,{room_id:e})},u.prototype.deleteAlias=function(t,e){const n=a.encodeUri("/directory/room/$alias",{$alias:t});return this._http.authedRequest(e,"DELETE",n,void 0,void 0)},u.prototype.unstableGetLocalAliases=function(t,e){const n=a.encodeUri("/rooms/$roomId/aliases",{$roomId:t});return this._http.authedRequest(e,"GET",n,null,null,{prefix:c.PREFIX_UNSTABLE+"/org.matrix.msc2432"})},u.prototype.getRoomIdForAlias=function(t,e){const n=a.encodeUri("/directory/room/$alias",{$alias:t});return this._http.authedRequest(e,"GET",n)},u.prototype.resolveRoomAlias=function(t,e){const n=a.encodeUri("/directory/room/$alias",{$alias:t});return this._http.request(e,"GET",n)},u.prototype.getRoomDirectoryVisibility=function(t,e){const n=a.encodeUri("/directory/list/room/$roomId",{$roomId:t});return this._http.authedRequest(e,"GET",n)},u.prototype.setRoomDirectoryVisibility=function(t,e,n){const i=a.encodeUri("/directory/list/room/$roomId",{$roomId:t});return this._http.authedRequest(n,"PUT",i,void 0,{visibility:e})},u.prototype.setRoomDirectoryVisibilityAppService=function(t,e,n,i){const r=a.encodeUri("/directory/list/appservice/$networkId/$roomId",{$networkId:t,$roomId:e});return this._http.authedRequest(i,"PUT",r,void 0,{visibility:n})},u.prototype.searchUserDirectory=function(t){const e={search_term:t.term};return void 0!==t.limit&&(e.limit=t.limit),this._http.authedRequest(void 0,"POST","/user_directory/search",void 0,e)},u.prototype.uploadContent=function(t,e){return this._http.uploadContent(t,e)},u.prototype.cancelUpload=function(t){return this._http.cancelUpload(t)},u.prototype.getCurrentUploads=function(){return this._http.getCurrentUploads()},u.prototype.getProfileInfo=function(t,e,n){a.isFunction(e)&&(n=e,e=void 0);const i=e?a.encodeUri("/profile/$userId/$info",{$userId:t,$info:e}):a.encodeUri("/profile/$userId",{$userId:t});return this._http.authedRequest(n,"GET",i)},u.prototype.getThreePids=function(t){return this._http.authedRequest(t,"GET","/account/3pid",void 0,void 0)},u.prototype.addThreePid=function(t,e,n){return this._http.authedRequest(n,"POST","/account/3pid",null,{threePidCreds:t,bind:e})},u.prototype.addThreePidOnly=async function(t){const e=await this.isVersionSupported("r0.6.0")?c.PREFIX_R0:c.PREFIX_UNSTABLE;return this._http.authedRequest(void 0,"POST","/account/3pid/add",null,t,{prefix:e})},u.prototype.bindThreePid=async function(t){const e=await this.isVersionSupported("r0.6.0")?c.PREFIX_R0:c.PREFIX_UNSTABLE;return this._http.authedRequest(void 0,"POST","/account/3pid/bind",null,t,{prefix:e})},u.prototype.unbindThreePid=async function(t,e){const n={medium:t,address:e,id_server:this.getIdentityServerUrl(!0)},i=await this.isVersionSupported("r0.6.0")?c.PREFIX_R0:c.PREFIX_UNSTABLE;return this._http.authedRequest(void 0,"POST","/account/3pid/unbind",null,n,{prefix:i})},u.prototype.deleteThreePid=function(t,e){return this._http.authedRequest(void 0,"POST","/account/3pid/delete",null,{medium:t,address:e})},u.prototype.setPassword=function(t,e,n){return this._http.authedRequest(n,"POST","/account/password",null,{auth:t,new_password:e})},u.prototype.getDevices=function(){return this._http.authedRequest(void 0,"GET","/devices",void 0,void 0)},u.prototype.setDeviceDetails=function(t,e){const n=a.encodeUri("/devices/$device_id",{$device_id:t});return this._http.authedRequest(void 0,"PUT",n,void 0,e)},u.prototype.deleteDevice=function(t,e){const n=a.encodeUri("/devices/$device_id",{$device_id:t}),i={};return e&&(i.auth=e),this._http.authedRequest(void 0,"DELETE",n,void 0,i)},u.prototype.deleteMultipleDevices=function(t,e){const n={devices:t};return e&&(n.auth=e),this._http.authedRequest(void 0,"POST","/delete_devices",void 0,n)},u.prototype.getPushers=function(t){return this._http.authedRequest(t,"GET","/pushers",void 0,void 0)},u.prototype.setPusher=function(t,e){return this._http.authedRequest(e,"POST","/pushers/set",null,t)},u.prototype.getPushRules=function(t){return this._http.authedRequest(t,"GET","/pushrules/").then(t=>o.PushProcessor.rewriteDefaultRules(t))},u.prototype.addPushRule=function(t,e,n,i,r){const s=a.encodeUri("/pushrules/"+t+"/$kind/$ruleId",{$kind:e,$ruleId:n});return this._http.authedRequest(r,"PUT",s,void 0,i)},u.prototype.deletePushRule=function(t,e,n,i){const r=a.encodeUri("/pushrules/"+t+"/$kind/$ruleId",{$kind:e,$ruleId:n});return this._http.authedRequest(i,"DELETE",r)},u.prototype.setPushRuleEnabled=function(t,e,n,i,r){const s=a.encodeUri("/pushrules/"+t+"/$kind/$ruleId/enabled",{$kind:e,$ruleId:n});return this._http.authedRequest(r,"PUT",s,void 0,{enabled:i})},u.prototype.setPushRuleActions=function(t,e,n,i,r){const s=a.encodeUri("/pushrules/"+t+"/$kind/$ruleId/actions",{$kind:e,$ruleId:n});return this._http.authedRequest(r,"PUT",s,void 0,{actions:i})},u.prototype.search=function(t,e){const n={};return t.next_batch&&(n.next_batch=t.next_batch),this._http.authedRequest(e,"POST","/search",n,t.body)},u.prototype.uploadKeysRequest=function(t,e,n){return this._http.authedRequest(n,"POST","/keys/upload",void 0,t)},u.prototype.uploadKeySignatures=function(t){return this._http.authedRequest(void 0,"POST","/keys/signatures/upload",void 0,t,{prefix:c.PREFIX_UNSTABLE})},u.prototype.downloadKeysForUsers=function(t,e){if(a.isFunction(e))throw new Error("downloadKeysForUsers no longer accepts a callback parameter");const n={device_keys:{}};return"token"in(e=e||{})&&(n.token=e.token),t.forEach(t=>{n.device_keys[t]=[]}),this._http.authedRequest(void 0,"POST","/keys/query",void 0,n)},u.prototype.claimOneTimeKeys=function(t,e,n){const i={};void 0===e&&(e="signed_curve25519");for(let s=0;s<t.length;++s){const n=t[s][0],r=t[s][1],o=i[n]||{};i[n]=o,o[r]=e}const r={one_time_keys:i};return n&&(r.timeout=n),this._http.authedRequest(void 0,"POST","/keys/claim",void 0,r)},u.prototype.getKeyChanges=function(t,e){return this._http.authedRequest(void 0,"GET","/keys/changes",{from:t,to:e},void 0)},u.prototype.uploadDeviceSigningKeys=function(t,e){const n=Object.assign({},e);return t&&Object.assign(n,{auth:t}),this._http.authedRequest(void 0,"POST","/keys/device_signing/upload",void 0,n,{prefix:c.PREFIX_UNSTABLE})},u.prototype.registerWithIdentityServer=function(t){if(!this.idBaseUrl)throw new Error("No Identity Server base URL set");return this._http.requestOtherUrl(void 0,"POST",this.idBaseUrl+c.PREFIX_IDENTITY_V2+"/account/register",null,t)},u.prototype.requestEmailToken=async function(t,e,n,i,r,s){const o={client_secret:e,email:t,send_attempt:n,next_link:i};return await this._http.idServerRequest(r,"POST","/validate/email/requestToken",o,c.PREFIX_IDENTITY_V2,s)},u.prototype.requestMsisdnToken=async function(t,e,n,i,r,s,o){const a={client_secret:n,country:t,phone_number:e,send_attempt:i,next_link:r};return await this._http.idServerRequest(s,"POST","/validate/msisdn/requestToken",a,c.PREFIX_IDENTITY_V2,o)},u.prototype.submitMsisdnToken=async function(t,e,n,i){const r={sid:t,client_secret:e,token:n};return await this._http.idServerRequest(void 0,"POST","/validate/msisdn/submitToken",r,c.PREFIX_IDENTITY_V2,i)},u.prototype.submitMsisdnTokenOtherUrl=function(t,e,n,i){return this._http.requestOtherUrl(void 0,"POST",t,void 0,{sid:e,client_secret:n,token:i})},u.prototype.getIdentityHashDetails=function(t){return this._http.idServerRequest(void 0,"GET","/hash_details",null,c.PREFIX_IDENTITY_V2,t)},u.prototype.identityHashedLookup=async function(t,e){const n={},i=await this.getIdentityHashDetails(e);if(!i||!i.lookup_pepper||!i.algorithms)throw new Error("Unsupported identity server: bad response");n.pepper=i.lookup_pepper;const r={};if(i.algorithms.includes("sha256")){const e=new global.Olm.Utility;n.addresses=t.map(t=>{const i=t[0].toLowerCase(),s=t[1].toLowerCase(),o=e.sha256(`${i} ${s} ${n.pepper}`).replace(/\+/g,"-").replace(/\//g,"_");return r[o]=t[0],o}),n.algorithm="sha256"}else{if(!i.algorithms.includes("none"))throw new Error("Unsupported identity server: unknown hash algorithm");n.addresses=t.map(t=>{const e=`${t[0].toLowerCase()} ${t[1].toLowerCase()}`;return r[e]=t[0],e}),n.algorithm="none"}const s=await this._http.idServerRequest(void 0,"POST","/lookup",n,c.PREFIX_IDENTITY_V2,e);if(!s||!s.mappings)return[];const o=[];for(const a of Object.keys(s.mappings)){const t=s.mappings[a],e=r[a];if(!e)throw new Error("Identity server returned more results than expected");o.push({address:e,mxid:t})}return o},u.prototype.lookupThreePid=async function(t,e,n,i){const r=(await this.identityHashedLookup([[e,t]],i)).find(t=>t.address===e);if(!r)return n&&n(null,{}),{};const s={address:e,medium:t,mxid:r.mxid};return n&&n(null,s),s},u.prototype.bulkLookupThreePids=async function(t,e){const n=await this.identityHashedLookup(t.map(t=>[t[1],t[0]]),e),i=[];for(const r of n){const e=t.find(t=>t[1]===r.address);if(!e)throw new Error("Identity sever returned unexpected results");i.push([e[0],r.address,r.mxid])}return{threepids:i}},u.prototype.getIdentityAccount=function(t){return this._http.idServerRequest(void 0,"GET","/account",void 0,c.PREFIX_IDENTITY_V2,t)},u.prototype.sendToDevice=function(t,e,n){const i=a.encodeUri("/sendToDevice/$eventType/$txnId",{$eventType:t,$txnId:n||this.makeTxnId()}),r={messages:e},o=Object.keys(e).reduce((t,n)=>(t[n]=Object.keys(e[n]),t),{});return s.logger.log("PUT "+i,o),this._http.authedRequest(void 0,"PUT",i,void 0,r)},u.prototype.getThirdpartyProtocols=function(){return this._http.authedRequest(void 0,"GET","/thirdparty/protocols",void 0,void 0).then(t=>{if(!t||"object"!=typeof t)throw new Error("/thirdparty/protocols did not return an object: "+t);return t})},u.prototype.getThirdpartyLocation=function(t,e){const n=a.encodeUri("/thirdparty/location/$protocol",{$protocol:t});return this._http.authedRequest(void 0,"GET",n,e,void 0)},u.prototype.getThirdpartyUser=function(t,e){const n=a.encodeUri("/thirdparty/user/$protocol",{$protocol:t});return this._http.authedRequest(void 0,"GET",n,e,void 0)},u.prototype.getTerms=function(t,e){const n=l(t,e);return this._http.requestOtherUrl(void 0,"GET",n)},u.prototype.agreeToTerms=function(t,e,n,i){const r=l(t,e);return this._http.requestOtherUrl(void 0,"POST",r,null,{user_accepts:i},{headers:{Authorization:"Bearer "+n}})},u.prototype.reportEvent=function(t,e,n,i){const r=a.encodeUri("/rooms/$roomId/report/$eventId",{$roomId:t,$eventId:e});return this._http.authedRequest(void 0,"POST",r,null,{score:n,reason:i})}},"kVK+":function(t,e){e.read=function(t,e,n,i,r){var s,o,a=8*r-i-1,c=(1<<a)-1,l=c>>1,u=-7,h=n?r-1:0,d=n?-1:1,p=t[e+h];for(h+=d,s=p&(1<<-u)-1,p>>=-u,u+=a;u>0;s=256*s+t[e+h],h+=d,u-=8);for(o=s&(1<<-u)-1,s>>=-u,u+=i;u>0;o=256*o+t[e+h],h+=d,u-=8);if(0===s)s=1-l;else{if(s===c)return o?NaN:1/0*(p?-1:1);o+=Math.pow(2,i),s-=l}return(p?-1:1)*o*Math.pow(2,s-i)},e.write=function(t,e,n,i,r,s){var o,a,c,l=8*s-r-1,u=(1<<l)-1,h=u>>1,d=23===r?Math.pow(2,-24)-Math.pow(2,-77):0,p=i?0:s-1,m=i?1:-1,f=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,o=u):(o=Math.floor(Math.log(e)/Math.LN2),e*(c=Math.pow(2,-o))<1&&(o--,c*=2),(e+=o+h>=1?d/c:d*Math.pow(2,1-h))*c>=2&&(o++,c/=2),o+h>=u?(a=0,o=u):o+h>=1?(a=(e*c-1)*Math.pow(2,r),o+=h):(a=e*Math.pow(2,h-1)*Math.pow(2,r),o=0));r>=8;t[n+p]=255&a,p+=m,a/=256,r-=8);for(o=o<<r|a,l+=r;l>0;t[n+p]=255&o,p+=m,o/=256,l-=8);t[n+p-m]|=128*f}},lSNA:function(t,e){t.exports=function(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}},mhmA:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.EncryptionSetupOperation=e.EncryptionSetupBuilder=void 0;var i=n("7UXS"),r=n("+qE3"),s=n("h3nd"),o=n("qN7M"),a=n("1F5k");e.EncryptionSetupBuilder=class{constructor(t,e){this.accountDataClientAdapter=new l(t),this.crossSigningCallbacks=new u,this.ssssCryptoCallbacks=new h(e),this._crossSigningKeys=null,this._keySignatures=null,this._keyBackupInfo=null}addCrossSigningKeys(t,e){this._crossSigningKeys={auth:t,keys:e}}addSessionBackup(t){this._keyBackupInfo=t}addSessionBackupPrivateKeyToCache(t){this._sessionBackupPrivateKey=t}addKeySignature(t,e,n){this._keySignatures||(this._keySignatures={});const i=this._keySignatures[t]||{};this._keySignatures[t]=i,i[e]=n}setAccountData(t,e){return this.accountDataClientAdapter.setAccountData(t,e)}buildOperation(){return new c(this.accountDataClientAdapter._values,this._crossSigningKeys,this._keyBackupInfo,this._keySignatures)}async persist(t){if(this._crossSigningKeys){const e=(0,s.createCryptoStoreCacheCallbacks)(t._cryptoStore,t._olmDevice);for(const t of["self_signing","user_signing"]){const n=this.crossSigningCallbacks.privateKeys.get(t);await e.storeCrossSigningKeyCache(t,n)}await t._cryptoStore.doTxn("readwrite",[o.IndexedDBCryptoStore.STORE_ACCOUNT],e=>{t._cryptoStore.storeCrossSigningKeys(e,this._crossSigningKeys.keys)})}this._sessionBackupPrivateKey&&await t.storeSessionBackupPrivateKey(this._sessionBackupPrivateKey)}};class c{constructor(t,e,n,i){this._accountData=t,this._crossSigningKeys=e,this._keyBackupInfo=n,this._keySignatures=i}async apply(t){const e=t._baseApis;if(this._accountData)for(const[n,i]of this._accountData)await e.setAccountData(n,i);if(this._crossSigningKeys){const n={};for(const[t,e]of Object.entries(this._crossSigningKeys.keys))n[t+"_key"]=e;await e.uploadDeviceSigningKeys(this._crossSigningKeys.auth,n),t._crossSigningInfo.setKeys(this._crossSigningKeys.keys)}this._keySignatures&&await e.uploadKeySignatures(this._keySignatures),this._keyBackupInfo&&(this._keyBackupInfo.version?await e._http.authedRequest(void 0,"PUT","/room_keys/version/"+this._keyBackupInfo.version,void 0,{algorithm:this._keyBackupInfo.algorithm,auth_data:this._keyBackupInfo.auth_data},{prefix:a.PREFIX_UNSTABLE}):await e._http.authedRequest(void 0,"POST","/room_keys/version",void 0,this._keyBackupInfo,{prefix:a.PREFIX_UNSTABLE}))}}e.EncryptionSetupOperation=c;class l extends r.EventEmitter{constructor(t){super(),this._existingValues=t,this._values=new Map}getAccountDataFromServer(t){return Promise.resolve(this.getAccountData(t))}getAccountData(t){const e=this._values.get(t);if(e)return e;const n=this._existingValues[t];return n?n.getContent():null}setAccountData(t,e){const n=this._values.get(t);return this._values.set(t,e),Promise.resolve().then(()=>{const r=new i.MatrixEvent({type:t,content:e});this.emit("accountData",r,n)})}}class u{constructor(){this.privateKeys=new Map}getCrossSigningKeyCache(t,e){return this.getCrossSigningKey(t,e)}storeCrossSigningKeyCache(t,e){return this.privateKeys.set(t,e),Promise.resolve()}getCrossSigningKey(t,e){return Promise.resolve(this.privateKeys.get(t))}saveCrossSigningKeys(t){for(const[e,n]of Object.entries(t))this.privateKeys.set(e,n)}}class h{constructor(t){this._privateKeys=new Map,this._delegateCryptoCallbacks=t}async getSecretStorageKey({keys:t},e){for(const n of Object.keys(t)){const t=this._privateKeys.get(n);if(t)return[n,t]}if(this._delegateCryptoCallbacks){const n=await this._delegateCryptoCallbacks.getSecretStorageKey({keys:t},e);if(n){const[t,e]=n;this._privateKeys.set(t,e)}return n}}addPrivateKey(t,e){this._privateKeys.set(t,e)}}},mhv5:function(t,e,n){"use strict";var i=n("284h");Object.defineProperty(e,"__esModule",{value:!0}),e.WebStorageSessionStore=o;var r=i(n("t+e4"));n("PrRn");const s="session.e2e.";function o(t){if(this.store=t,!(r.isFunction(t.getItem)&&r.isFunction(t.setItem)&&r.isFunction(t.removeItem)&&r.isFunction(t.key)&&"number"==typeof t.length))throw new Error("Supplied webStore does not meet the WebStorage API interface")}o.prototype={removeEndToEndAccount:function(){this.store.removeItem(a)},getEndToEndAccount:function(){return this.store.getItem(a)},getAllEndToEndDevices:function(){const t=h(""),e={};for(let n=0;n<this.store.length;++n){const i=this.store.key(n),r=i.substr(t.length);i.startsWith(t)&&(e[r]=m(this.store,i))}return e},getEndToEndDeviceTrackingStatus:function(){return m(this.store,l)},getEndToEndDeviceSyncToken:function(){return m(this.store,c)},removeEndToEndDeviceData:function(){g(this.store,h("")),g(this.store,l),g(this.store,c)},getEndToEndSessions:function(t){return m(this.store,d(t))},getAllEndToEndSessions:function(){const t=f(this.store,d("")),e={};for(const n of t)e[n.substr(d("").length)]=m(this.store,n);return e},removeAllEndToEndSessions:function(){g(this.store,d(""))},getAllEndToEndInboundGroupSessionKeys:function(){const t=s+"inboundgroupsessions/",e=[];for(let n=0;n<this.store.length;n++){const i=this.store.key(n);i.startsWith(t)&&e.push({senderKey:i.substr(t.length,43),sessionId:i.substr(t.length+44)})}return e},getEndToEndInboundGroupSession:function(t,e){const n=function(t,e){return s+"inboundgroupsessions/"+t+"/"+e}(t,e);return this.store.getItem(n)},removeAllEndToEndInboundGroupSessions:function(){g(this.store,s+"inboundgroupsessions/")},getAllEndToEndRooms:function(){const t=f(this.store,p("")),e={};for(const n of t)e[n.substr(p("").length)]=m(this.store,n);return e},removeAllEndToEndRooms:function(){g(this.store,p(""))},setLocalTrustedBackupPubKey:function(t){this.store.setItem(u,t)},getLocalTrustedBackupPubKey:function(){return this.store.getItem(u)}};const a=s+"account",c=s+"device_sync_token",l=s+"device_tracking",u=s+"trusted_backup_pubkey";function h(t){return s+"devices/"+t}function d(t){return s+"sessions/"+t}function p(t){return s+"rooms/"+t}function m(t,e){try{return JSON.parse(t.getItem(e))}catch(n){}return null}function f(t,e){const n=[];for(let i=0;i<t.length;++i){const r=t.key(i);r.startsWith(e)&&n.push(r)}return n}function g(t,e){const n=[];for(let i=0;i<t.length;++i){const r=t.key(i);r.startsWith(e)&&n.push(r)}for(const i of n)t.removeItem(i)}},mjbu:function(t,e,n){"use strict";var i=n("284h");Object.defineProperty(e,"__esModule",{value:!0}),e.OlmDevice=c,e.WITHHELD_MESSAGES=void 0;var r=n("PrRn"),s=n("qN7M"),o=i(n("K5J2"));function a(t){if(void 0===t)throw new Error("payloadString undefined");if(t.length>49152){const e=new Error("Message too long ("+t.length+" bytes). The maximum for an encrypted message is 49152 bytes.");throw e.data={errcode:"M_TOO_LARGE",error:"Payload too large for encrypted message"},e}}function c(t){this._cryptoStore=t,this._pickleKey="DEFAULT_KEY",this.deviceCurve25519Key=null,this.deviceEd25519Key=null,this._maxOneTimeKeys=null,this._outboundGroupSessionStore={},this._inboundGroupSessionMessageIndexes={},this._sessionsInProgress={},this._olmPrekeyPromise=Promise.resolve()}c.prototype.init=async function(t={}){let e;const n=new global.Olm.Account,{pickleKey:i,fromExportedDevice:r}=t;try{r?(i&&console.warn("ignoring opts.pickleKey because opts.fromExportedDevice is present."),this._pickleKey=r.pickleKey,await async function(t,e,n,i){await e.doTxn("readwrite",[s.IndexedDBCryptoStore.STORE_ACCOUNT,s.IndexedDBCryptoStore.STORE_SESSIONS],n=>{e.storeAccount(n,t.pickledAccount),t.sessions.forEach(t=>{const{deviceKey:i,sessionId:r}=t;e.storeEndToEndSession(i,r,{session:t.session,lastReceivedMessageTs:t.lastReceivedMessageTs},n)})}),i.unpickle(n,t.pickledAccount)}(r,this._cryptoStore,this._pickleKey,n)):(i&&(this._pickleKey=i),await async function(t,e,n){await t.doTxn("readwrite",[s.IndexedDBCryptoStore.STORE_ACCOUNT],i=>{t.getAccount(i,r=>{null!==r?n.unpickle(e,r):(n.create(),r=n.pickle(e),t.storeAccount(i,r))})})}(this._cryptoStore,this._pickleKey,n)),e=JSON.parse(n.identity_keys()),this._maxOneTimeKeys=n.max_number_of_one_time_keys()}finally{n.free()}this.deviceCurve25519Key=e.curve25519,this.deviceEd25519Key=e.ed25519},c.getOlmVersion=function(){return global.Olm.get_library_version()},c.prototype._getAccount=function(t,e){this._cryptoStore.getAccount(t,t=>{const n=new global.Olm.Account;try{n.unpickle(this._pickleKey,t),e(n)}finally{n.free()}})},c.prototype._storeAccount=function(t,e){this._cryptoStore.storeAccount(t,e.pickle(this._pickleKey))},c.prototype.export=async function(){const t={pickleKey:this._pickleKey};return await this._cryptoStore.doTxn("readonly",[s.IndexedDBCryptoStore.STORE_ACCOUNT,s.IndexedDBCryptoStore.STORE_SESSIONS],e=>{this._cryptoStore.getAccount(e,e=>{t.pickledAccount=e}),t.sessions=[],this._cryptoStore.getAllEndToEndSessions(e,e=>{t.sessions.push(e)})}),t},c.prototype._getSession=function(t,e,n,i){this._cryptoStore.getEndToEndSession(t,e,n,t=>{this._unpickleSession(t,i)})},c.prototype._unpickleSession=function(t,e){const n=new global.Olm.Session;try{n.unpickle(this._pickleKey,t.session),e(Object.assign({},t,{session:n}))}finally{n.free()}},c.prototype._saveSession=function(t,e,n){const i=e.session.session_id(),r=Object.assign(e,{session:e.session.pickle(this._pickleKey)});this._cryptoStore.storeEndToEndSession(t,i,r,n)},c.prototype._getUtility=function(t){const e=new global.Olm.Utility;try{return t(e)}finally{e.free()}},c.prototype.sign=async function(t){let e;return await this._cryptoStore.doTxn("readonly",[s.IndexedDBCryptoStore.STORE_ACCOUNT],n=>{this._getAccount(n,n=>{e=n.sign(t)})}),e},c.prototype.getOneTimeKeys=async function(){let t;return await this._cryptoStore.doTxn("readonly",[s.IndexedDBCryptoStore.STORE_ACCOUNT],e=>{this._getAccount(e,e=>{t=JSON.parse(e.one_time_keys())})}),t},c.prototype.maxNumberOfOneTimeKeys=function(){return this._maxOneTimeKeys},c.prototype.markKeysAsPublished=async function(){await this._cryptoStore.doTxn("readwrite",[s.IndexedDBCryptoStore.STORE_ACCOUNT],t=>{this._getAccount(t,e=>{e.mark_keys_as_published(),this._storeAccount(t,e)})})},c.prototype.generateOneTimeKeys=function(t){return this._cryptoStore.doTxn("readwrite",[s.IndexedDBCryptoStore.STORE_ACCOUNT],e=>{this._getAccount(e,n=>{n.generate_one_time_keys(t),this._storeAccount(e,n)})})},c.prototype.createOutboundSession=async function(t,e){let n;return await this._cryptoStore.doTxn("readwrite",[s.IndexedDBCryptoStore.STORE_ACCOUNT,s.IndexedDBCryptoStore.STORE_SESSIONS],i=>{this._getAccount(i,r=>{const s=new global.Olm.Session;try{s.create_outbound(r,t,e),n=s.session_id(),this._storeAccount(i,r);const o={session:s,lastReceivedMessageTs:Date.now()};this._saveSession(t,o,i)}finally{s.free()}})}),n},c.prototype.createInboundSession=async function(t,e,n){if(0!==e)throw new Error("Need messageType == 0 to create inbound session");let i;return await this._cryptoStore.doTxn("readwrite",[s.IndexedDBCryptoStore.STORE_ACCOUNT,s.IndexedDBCryptoStore.STORE_SESSIONS],r=>{this._getAccount(r,s=>{const o=new global.Olm.Session;try{o.create_inbound_from(s,t,n),s.remove_one_time_keys(o),this._storeAccount(r,s);const a=o.decrypt(e,n),c={session:o,lastReceivedMessageTs:Date.now()};this._saveSession(t,c,r),i={payload:a,session_id:o.session_id()}}finally{o.free()}})}),i},c.prototype.getSessionIdsForDevice=async function(t){if(this._sessionsInProgress[t]){r.logger.log("waiting for olm session to be created");try{await this._sessionsInProgress[t]}catch(n){}}let e;return await this._cryptoStore.doTxn("readonly",[s.IndexedDBCryptoStore.STORE_SESSIONS],n=>{this._cryptoStore.getEndToEndSessions(t,n,t=>{e=Object.keys(t)})}),e},c.prototype.getSessionIdForDevice=async function(t,e){const n=await this.getSessionInfoForDevice(t,e);if(0===n.length)return null;let i=0;for(let r=1;r<n.length;r++){const t=n[r],e=void 0===t.lastReceivedMessageTs?0:t.lastReceivedMessageTs,s=n[i],o=void 0===s.lastReceivedMessageTs?0:s.lastReceivedMessageTs;(e>o||e===o&&t.sessionId<s.sessionId)&&(i=r)}return n[i].sessionId},c.prototype.getSessionInfoForDevice=async function(t,e){if(this._sessionsInProgress[t]&&!e){r.logger.log("waiting for olm session to be created");try{await this._sessionsInProgress[t]}catch(i){}}const n=[];return await this._cryptoStore.doTxn("readonly",[s.IndexedDBCryptoStore.STORE_SESSIONS],e=>{this._cryptoStore.getEndToEndSessions(t,e,t=>{const e=Object.keys(t).sort();for(const i of e)this._unpickleSession(t[i],t=>{n.push({lastReceivedMessageTs:t.lastReceivedMessageTs,hasReceivedMessage:t.session.has_received_message(),sessionId:i})})})}),n},c.prototype.encryptMessage=async function(t,e,n){let i;return a(n),await this._cryptoStore.doTxn("readwrite",[s.IndexedDBCryptoStore.STORE_SESSIONS],s=>{this._getSession(t,e,s,o=>{const a=o.session.describe();r.logger.log("encryptMessage: Olm Session ID "+e+" to "+t+": "+a),i=o.session.encrypt(n),this._saveSession(t,o,s)})}),i},c.prototype.decryptMessage=async function(t,e,n,i){let o;return await this._cryptoStore.doTxn("readwrite",[s.IndexedDBCryptoStore.STORE_SESSIONS],s=>{this._getSession(t,e,s,a=>{const c=a.session.describe();r.logger.log("decryptMessage: Olm Session ID "+e+" from "+t+": "+c),o=a.session.decrypt(n,i),a.lastReceivedMessageTs=Date.now(),this._saveSession(t,a,s)})}),o},c.prototype.matchesSession=async function(t,e,n,i){if(0!==n)return!1;let r;return await this._cryptoStore.doTxn("readonly",[s.IndexedDBCryptoStore.STORE_SESSIONS],n=>{this._getSession(t,e,n,t=>{r=t.session.matches_inbound(i)})}),r},c.prototype.recordSessionProblem=async function(t,e,n){await this._cryptoStore.storeEndToEndSessionProblem(t,e,n)},c.prototype.sessionMayHaveProblems=async function(t,e){return await this._cryptoStore.getEndToEndSessionProblem(t,e)},c.prototype.filterOutNotifiedErrorDevices=async function(t){return await this._cryptoStore.filterOutNotifiedErrorDevices(t)},c.prototype._saveOutboundGroupSession=function(t){const e=t.pickle(this._pickleKey);this._outboundGroupSessionStore[t.session_id()]=e},c.prototype._getOutboundGroupSession=function(t,e){const n=this._outboundGroupSessionStore[t];if(void 0===n)throw new Error("Unknown outbound group session "+t);const i=new global.Olm.OutboundGroupSession;try{return i.unpickle(this._pickleKey,n),e(i)}finally{i.free()}},c.prototype.createOutboundGroupSession=function(){const t=new global.Olm.OutboundGroupSession;try{return t.create(),this._saveOutboundGroupSession(t),t.session_id()}finally{t.free()}},c.prototype.encryptGroupMessage=function(t,e){const n=this;return r.logger.log("encrypting msg with megolm session "+t),a(e),this._getOutboundGroupSession(t,(function(t){const i=t.encrypt(e);return n._saveOutboundGroupSession(t),i}))},c.prototype.getOutboundGroupSessionKey=function(t){return this._getOutboundGroupSession(t,(function(t){return{chain_index:t.message_index(),key:t.session_key()}}))},c.prototype._unpickleInboundGroupSession=function(t,e){const n=new global.Olm.InboundGroupSession;try{return n.unpickle(this._pickleKey,t.session),e(n)}finally{n.free()}},c.prototype._getInboundGroupSession=function(t,e,n,i,r){this._cryptoStore.getEndToEndInboundGroupSession(e,n,i,(e,n)=>{if(null!==e){if(null!==t&&t!==e.room_id)throw new Error("Mismatched room_id for inbound group session (expected "+e.room_id+", was "+t+")");this._unpickleInboundGroupSession(e,t=>{r(t,e,n)})}else r(null,null,n)})},c.prototype.addInboundGroupSession=async function(t,e,n,i,o,a,c,l={}){await this._cryptoStore.doTxn("readwrite",[s.IndexedDBCryptoStore.STORE_INBOUND_GROUP_SESSIONS,s.IndexedDBCryptoStore.STORE_INBOUND_GROUP_SESSIONS_WITHHELD],s=>{this._getInboundGroupSession(t,e,i,s,(u,h)=>{const d=new global.Olm.InboundGroupSession;try{if(c?d.import_session(o):d.create(o),i!=d.session_id())throw new Error("Mismatched group session ID from senderKey: "+e);if(u&&(r.logger.log("Update for megolm session "+e+"/"+i),u.first_known_index()<=d.first_known_index()))return void r.logger.log("Keeping existing megolm session "+i);r.logger.info("Storing megolm session "+e+"/"+i+" with first index "+d.first_known_index());const h=Object.assign({},l,{room_id:t,session:d.pickle(this._pickleKey),keysClaimed:a,forwardingCurve25519KeyChain:n});this._cryptoStore.storeEndToEndInboundGroupSession(e,i,h,s)}finally{d.free()}})})},c.prototype.addInboundGroupSessionWithheld=async function(t,e,n,i,r){await this._cryptoStore.doTxn("readwrite",[s.IndexedDBCryptoStore.STORE_INBOUND_GROUP_SESSIONS_WITHHELD],s=>{this._cryptoStore.storeEndToEndInboundGroupSessionWithheld(e,n,{room_id:t,code:i,reason:r},s)})};const l={"m.unverified":"The sender has disabled encrypting to unverified devices.","m.blacklisted":"The sender has blocked you.","m.unauthorised":"You are not authorised to read the message.","m.no_olm":"Unable to establish a secure channel."};function u(t){return t.code&&t.code in l?l[t.code]:t.reason?t.reason:"decryption key withheld"}e.WITHHELD_MESSAGES=l,c.prototype.decryptGroupMessage=async function(t,e,n,i,r,a){let c,l;if(await this._cryptoStore.doTxn("readwrite",[s.IndexedDBCryptoStore.STORE_INBOUND_GROUP_SESSIONS,s.IndexedDBCryptoStore.STORE_INBOUND_GROUP_SESSIONS_WITHHELD],s=>{this._getInboundGroupSession(t,e,n,s,(t,h,d)=>{if(null===t)return d&&(l=new o.DecryptionError("MEGOLM_UNKNOWN_INBOUND_SESSION_ID",u(d),{session:e+"|"+n})),void(c=null);let p;try{p=t.decrypt(i)}catch(f){return void(l=f&&"OLM.UNKNOWN_MESSAGE_INDEX"===f.message&&d?new o.DecryptionError("MEGOLM_UNKNOWN_INBOUND_SESSION_ID",u(d),{session:e+"|"+n}):f)}let m=p.plaintext;if(void 0===m)m=p;else{const t=e+"|"+n+"|"+p.message_index;if(t in this._inboundGroupSessionMessageIndexes){const e=this._inboundGroupSessionMessageIndexes[t];if(e.id!==r||e.timestamp!==a)return void(l=new Error("Duplicate message index, possible replay attack: "+t))}this._inboundGroupSessionMessageIndexes[t]={id:r,timestamp:a}}h.session=t.pickle(this._pickleKey),this._cryptoStore.storeEndToEndInboundGroupSession(e,n,h,s),c={result:m,keysClaimed:h.keysClaimed||{},senderKey:e,forwardingCurve25519KeyChain:h.forwardingCurve25519KeyChain||[],untrusted:h.untrusted}})}),l)throw l;return c},c.prototype.hasInboundSessionKeys=async function(t,e,n){let i;return await this._cryptoStore.doTxn("readonly",[s.IndexedDBCryptoStore.STORE_INBOUND_GROUP_SESSIONS,s.IndexedDBCryptoStore.STORE_INBOUND_GROUP_SESSIONS_WITHHELD],s=>{this._cryptoStore.getEndToEndInboundGroupSession(e,n,s,s=>{null!==s?t!==s.room_id?(r.logger.warn(`requested keys for inbound group session ${e}|`+n+", with incorrect room_id "+`(expected ${s.room_id}, `+`was ${t})`),i=!1):i=!0:i=!1})}),i},c.prototype.getInboundGroupSessionKey=async function(t,e,n,i){let r;return await this._cryptoStore.doTxn("readonly",[s.IndexedDBCryptoStore.STORE_INBOUND_GROUP_SESSIONS,s.IndexedDBCryptoStore.STORE_INBOUND_GROUP_SESSIONS_WITHHELD],s=>{this._getInboundGroupSession(t,e,n,s,(t,e)=>{if(null===t)return void(r=null);void 0===i&&(i=t.first_known_index());const n=t.export_session(i);r={chain_index:i,key:n,forwarding_curve25519_key_chain:e.forwardingCurve25519KeyChain||[],sender_claimed_ed25519_key:(e.keysClaimed||{}).ed25519||null}})}),r},c.prototype.exportInboundGroupSession=function(t,e,n){return this._unpickleInboundGroupSession(n,i=>{const r=i.first_known_index();return{sender_key:t,sender_claimed_keys:n.keysClaimed,room_id:n.room_id,session_id:e,session_key:i.export_session(r),forwarding_curve25519_key_chain:i.forwardingCurve25519KeyChain||[],first_known_index:i.first_known_index()}})},c.prototype.verifySignature=function(t,e,n){this._getUtility((function(i){i.ed25519_verify(t,e,n)}))}},nmq7:function(t,e,n){"use strict";var i=n("0jNN"),r=Object.prototype.hasOwnProperty,s={allowDots:!1,allowPrototypes:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decoder:i.decode,delimiter:"&",depth:5,ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictNullHandling:!1},o=function(t){return t.replace(/&#(\d+);/g,(function(t,e){return String.fromCharCode(parseInt(e,10))}))},a=function(t,e,n){if(t){var i=n.allowDots?t.replace(/\.([^.[]+)/g,"[$1]"):t,s=/(\[[^[\]]*])/g,o=/(\[[^[\]]*])/.exec(i),a=o?i.slice(0,o.index):i,c=[];if(a){if(!n.plainObjects&&r.call(Object.prototype,a)&&!n.allowPrototypes)return;c.push(a)}for(var l=0;null!==(o=s.exec(i))&&l<n.depth;){if(l+=1,!n.plainObjects&&r.call(Object.prototype,o[1].slice(1,-1))&&!n.allowPrototypes)return;c.push(o[1])}return o&&c.push("["+i.slice(o.index)+"]"),function(t,e,n){for(var i=e,r=t.length-1;r>=0;--r){var s,o=t[r];if("[]"===o&&n.parseArrays)s=[].concat(i);else{s=n.plainObjects?Object.create(null):{};var a="["===o.charAt(0)&&"]"===o.charAt(o.length-1)?o.slice(1,-1):o,c=parseInt(a,10);n.parseArrays||""!==a?!isNaN(c)&&o!==a&&String(c)===a&&c>=0&&n.parseArrays&&c<=n.arrayLimit?(s=[])[c]=i:s[a]=i:s={0:i}}i=s}return i}(c,e,n)}};t.exports=function(t,e){var n=function(t){if(!t)return s;if(null!=t.decoder&&"function"!=typeof t.decoder)throw new TypeError("Decoder has to be a function.");if(void 0!==t.charset&&"utf-8"!==t.charset&&"iso-8859-1"!==t.charset)throw new Error("The charset option must be either utf-8, iso-8859-1, or undefined");return{allowDots:void 0===t.allowDots?s.allowDots:!!t.allowDots,allowPrototypes:"boolean"==typeof t.allowPrototypes?t.allowPrototypes:s.allowPrototypes,arrayLimit:"number"==typeof t.arrayLimit?t.arrayLimit:s.arrayLimit,charset:void 0===t.charset?s.charset:t.charset,charsetSentinel:"boolean"==typeof t.charsetSentinel?t.charsetSentinel:s.charsetSentinel,comma:"boolean"==typeof t.comma?t.comma:s.comma,decoder:"function"==typeof t.decoder?t.decoder:s.decoder,delimiter:"string"==typeof t.delimiter||i.isRegExp(t.delimiter)?t.delimiter:s.delimiter,depth:"number"==typeof t.depth?t.depth:s.depth,ignoreQueryPrefix:!0===t.ignoreQueryPrefix,interpretNumericEntities:"boolean"==typeof t.interpretNumericEntities?t.interpretNumericEntities:s.interpretNumericEntities,parameterLimit:"number"==typeof t.parameterLimit?t.parameterLimit:s.parameterLimit,parseArrays:!1!==t.parseArrays,plainObjects:"boolean"==typeof t.plainObjects?t.plainObjects:s.plainObjects,strictNullHandling:"boolean"==typeof t.strictNullHandling?t.strictNullHandling:s.strictNullHandling}}(e);if(""===t||null==t)return n.plainObjects?Object.create(null):{};for(var c="string"==typeof t?function(t,e){var n,a={},c=(e.ignoreQueryPrefix?t.replace(/^\?/,""):t).split(e.delimiter,e.parameterLimit===1/0?void 0:e.parameterLimit),l=-1,u=e.charset;if(e.charsetSentinel)for(n=0;n<c.length;++n)0===c[n].indexOf("utf8=")&&("utf8=%E2%9C%93"===c[n]?u="utf-8":"utf8=%26%2310003%3B"===c[n]&&(u="iso-8859-1"),l=n,n=c.length);for(n=0;n<c.length;++n)if(n!==l){var h,d,p=c[n],m=p.indexOf("]="),f=-1===m?p.indexOf("="):m+1;-1===f?(h=e.decoder(p,s.decoder,u),d=e.strictNullHandling?null:""):(h=e.decoder(p.slice(0,f),s.decoder,u),d=e.decoder(p.slice(f+1),s.decoder,u)),d&&e.interpretNumericEntities&&"iso-8859-1"===u&&(d=o(d)),d&&e.comma&&d.indexOf(",")>-1&&(d=d.split(",")),a[h]=r.call(a,h)?i.combine(a[h],d):d}return a}(t,n):t,l=n.plainObjects?Object.create(null):{},u=Object.keys(c),h=0;h<u.length;++h){var d=u[h],p=a(d,c[d],n);l=i.merge(l,p,n)}return i.compact(l)}},ouil:function(t,e,n){"use strict";var i=n("284h");Object.defineProperty(e,"__esModule",{value:!0}),e.EventTimelineSet=h;var r=n("+qE3"),s=n("tyto"),o=n("7UXS"),a=i(n("t+e4")),c=n("PrRn"),l=n("P5+E");let u;function h(t,e){this.room=t,this._timelineSupport=Boolean(e.timelineSupport),this._liveTimeline=new s.EventTimeline(this),this._unstableClientRelationAggregation=!!e.unstableClientRelationAggregation,this._timelines=[this._liveTimeline],this._eventIdToTimeline={},this._filter=e.filter||null,this._unstableClientRelationAggregation&&(this._relations={})}u=c.logger.log.bind(c.logger),a.inherits(h,r.EventEmitter),h.prototype.getTimelines=function(){return this._timelines},h.prototype.getFilter=function(){return this._filter},h.prototype.setFilter=function(t){this._filter=t},h.prototype.getPendingEvents=function(){return this.room?this._filter?this._filter.filterRoomTimeline(this.room.getPendingEvents()):this.room.getPendingEvents():[]},h.prototype.getLiveTimeline=function(){return this._liveTimeline},h.prototype.eventIdToTimeline=function(t){return this._eventIdToTimeline[t]},h.prototype.replaceEventId=function(t,e){const n=this._eventIdToTimeline[t];n&&(delete this._eventIdToTimeline[t],this._eventIdToTimeline[e]=n)},h.prototype.resetLiveTimeline=function(t,e){const n=!this._timelineSupport||!e,i=this._liveTimeline,r=n?i.forkLive(s.EventTimeline.FORWARDS):i.fork(s.EventTimeline.FORWARDS);n?(this._timelines=[r],this._eventIdToTimeline={}):this._timelines.push(r),e&&i.setPaginationToken(e,s.EventTimeline.FORWARDS),r.setPaginationToken(t,s.EventTimeline.BACKWARDS),this._liveTimeline=r,this.emit("Room.timelineReset",this.room,this,n)},h.prototype.getTimelineForEvent=function(t){const e=this._eventIdToTimeline[t];return void 0===e?null:e},h.prototype.findEventById=function(t){const e=this.getTimelineForEvent(t);if(e)return a.findElement(e.getEvents(),(function(e){return e.getId()==t}))},h.prototype.addTimeline=function(){if(!this._timelineSupport)throw new Error("timeline support is disabled. Set the 'timelineSupport' parameter to true when creating MatrixClient to enable it.");const t=new s.EventTimeline(this);return this._timelines.push(t),t},h.prototype.addEventsToTimeline=function(t,e,n,i){if(!n)throw new Error("'timeline' not specified for EventTimelineSet.addEventsToTimeline");if(!e&&n==this._liveTimeline)throw new Error("EventTimelineSet.addEventsToTimeline cannot be used for adding events to the live timeline - use Room.addLiveEvents instead");if(this._filter&&!(t=this._filter.filterRoomTimeline(t)).length)return;const r=e?s.EventTimeline.BACKWARDS:s.EventTimeline.FORWARDS,o=e?s.EventTimeline.FORWARDS:s.EventTimeline.BACKWARDS;let a=!1,l=!1;for(let h=0;h<t.length;h++){const i=t[h],d=i.getId(),p=this._eventIdToTimeline[d];if(!p){this.addEventToTimeline(i,n,e),l=!0,a=!0;continue}if(l=!1,p==n){u("Event "+d+" already in timeline "+n);continue}const m=n.getNeighbouringTimeline(r);if(m){u(p==m?"Event "+d+" in neighbouring timeline - switching to "+p:"Event "+d+" already in a different timeline "+p),n=p;continue}c.logger.info("Already have timeline for "+d+" - joining timeline "+n+" to "+p);const f=p===this._liveTimeline,g=n===this._liveTimeline,_=r===s.EventTimeline.BACKWARDS&&f,y=r===s.EventTimeline.FORWARDS&&g;_||y?(_&&c.logger.warn("Refusing to set a preceding existingTimeLine on our timeline as the existingTimeLine is live ("+p+")"),y&&c.logger.warn("Refusing to set our preceding timeline on a existingTimeLine as our timeline is live ("+n+")")):(n.setNeighbouringTimeline(p,r),p.setNeighbouringTimeline(n,o),n=p,a=!0)}if(l||!a){if(r===s.EventTimeline.FORWARDS&&n===this._liveTimeline)return c.logger.warn({lastEventWasNew:l,didUpdate:a}),void c.logger.warn(`Refusing to set forwards pagination token of live timeline ${n} to ${i}`);n.setPaginationToken(i,r)}},h.prototype.addLiveEvent=function(t,e,n){if(this._filter&&!this._filter.filterRoomTimeline([t]).length)return;const i=this._eventIdToTimeline[t.getId()];if(i)if("replace"===e){u("EventTimelineSet.addLiveEvent: replacing duplicate event "+t.getId());const e=i.getEvents();for(let n=0;n<e.length;n++)if(e[n].getId()===t.getId()){s.EventTimeline.setEventMetadata(t,i.getState(s.EventTimeline.FORWARDS),!1),e[n].encryptedType||(e[n]=t);break}}else u("EventTimelineSet.addLiveEvent: ignoring duplicate event "+t.getId());else this.addEventToTimeline(t,this._liveTimeline,!1,n)},h.prototype.addEventToTimeline=function(t,e,n,i){const r=t.getId();e.addEvent(t,n),this._eventIdToTimeline[r]=e,this.setRelationsTarget(t),this.aggregateRelations(t);const s={timeline:e,liveEvent:!n&&e==this._liveTimeline&&!i};this.emit("Room.timeline",t,this.room,Boolean(n),!1,s)},h.prototype.handleRemoteEcho=function(t,e,n){const i=this._eventIdToTimeline[e];i?(delete this._eventIdToTimeline[e],this._eventIdToTimeline[n]=i):this._filter?this._filter.filterRoomTimeline([t]).length&&this.addEventToTimeline(t,this._liveTimeline,!1):this.addEventToTimeline(t,this._liveTimeline,!1)},h.prototype.removeEvent=function(t){const e=this._eventIdToTimeline[t];if(!e)return null;const n=e.removeEvent(t);return n&&(delete this._eventIdToTimeline[t],this.emit("Room.timeline",n,this.room,void 0,!0,{timeline:e})),n},h.prototype.compareEventOrdering=function(t,e){if(t==e)return 0;const n=this._eventIdToTimeline[t],i=this._eventIdToTimeline[e];if(void 0===n)return null;if(void 0===i)return null;if(n===i){let i,r;const s=n.getEvents();for(let n=0;n<s.length&&(void 0===i||void 0===r);n++){const o=s[n].getId();o==t&&(i=n),o==e&&(r=n)}return i-r}let r=n;for(;r;){if(r===i)return-1;r=r.getNeighbouringTimeline(s.EventTimeline.FORWARDS)}for(r=n;r;){if(r===i)return 1;r=r.getNeighbouringTimeline(s.EventTimeline.BACKWARDS)}return null},h.prototype.getRelationsForEvent=function(t,e,n){if(!this._unstableClientRelationAggregation)throw new Error("Client-side relation aggregation is disabled");if(!t||!e||!n)throw new Error("Invalid arguments for `getRelationsForEvent`");return((this._relations[t]||{})[e]||{})[n]},h.prototype.setRelationsTarget=function(t){if(!this._unstableClientRelationAggregation)return;const e=this._relations[t.getId()];if(!e)return;const n=e["m.replace"];if(!n)return;const i=n["m.room.message"];i&&i.setTargetEvent(t)},h.prototype.aggregateRelations=function(t){if(!this._unstableClientRelationAggregation)return;if(t.isRedacted()||t.status===o.EventStatus.CANCELLED)return;if(t.isBeingDecrypted())return void t.once("Event.decrypted",()=>{this.aggregateRelations(t)});const e=t.getRelation();if(!e)return;const n=e.event_id,i=e.rel_type,r=t.getType();let s=this._relations[n];s||(s=this._relations[n]={});let a=s[i];a||(a=s[i]={});let c,u=a[r],h=!1;u||(u=a[r]=new l.Relations(i,r,this.room),h=!0,c=this.findEventById(n),c&&u.setTargetEvent(c)),u.addEvent(t),h&&c&&c.emit("Event.relationsCreated",i,r)}},pv4t:function(t,e,n){"use strict";var i=n("284h");Object.defineProperty(e,"__esModule",{value:!0}),e.DeviceList=void 0;var r=n("+qE3"),s=n("PrRn"),o=n("Nfwx"),a=n("h3nd"),c=i(n("VRzr")),l=n("qN7M"),u=n("t+e4");e.DeviceList=class extends r.EventEmitter{constructor(t,e,n){super(),this._cryptoStore=e,this._devices={},this._crossSigningInfo={},this._userByIdentityKey={},this._deviceTrackingStatus={},this._syncToken=null,this._serialiser=new h(t,n,this),this._keyDownloadsInProgressByUser={},this._dirty=!1,this._savePromise=null,this._resolveSavePromise=null,this._savePromiseTime=null,this._saveTimer=null,this._hasFetched=null}async load(){await this._cryptoStore.doTxn("readonly",[l.IndexedDBCryptoStore.STORE_DEVICE_DATA],t=>{this._cryptoStore.getEndToEndDeviceData(t,t=>{this._hasFetched=Boolean(t&&t.devices),this._devices=t?t.devices:{},this._crossSigningInfo=t&&t.crossSigningInfo||{},this._deviceTrackingStatus=t?t.trackingStatus:{},this._syncToken=t?t.syncToken:null,this._userByIdentityKey={};for(const e of Object.keys(this._devices)){const t=this._devices[e];for(const n of Object.keys(t)){const i=t[n].keys["curve25519:"+n];void 0!==i&&(this._userByIdentityKey[i]=e)}}})});for(const t of Object.keys(this._deviceTrackingStatus))2==this._deviceTrackingStatus[t]&&(this._deviceTrackingStatus[t]=1)}stop(){null!==this._saveTimer&&clearTimeout(this._saveTimer)}async saveIfDirty(t){if(!this._dirty)return Promise.resolve(!1);void 0===t&&(t=500);const e=Date.now+t;this._savePromiseTime&&e<this._savePromiseTime&&(clearTimeout(this._saveTimer),this._saveTimer=null,this._savePromiseTime=null);let n=this._savePromise;if(null===n&&(n=new Promise((t,e)=>{this._resolveSavePromise=t}),this._savePromise=n),null===this._saveTimer){const n=this._resolveSavePromise;this._savePromiseTime=e,this._saveTimer=setTimeout(()=>{s.logger.log("Saving device tracking data",this._syncToken),this._savePromiseTime=null,this._saveTimer=null,this._savePromise=null,this._resolveSavePromise=null,this._cryptoStore.doTxn("readwrite",[l.IndexedDBCryptoStore.STORE_DEVICE_DATA],t=>{this._cryptoStore.storeEndToEndDeviceData({devices:this._devices,crossSigningInfo:this._crossSigningInfo,trackingStatus:this._deviceTrackingStatus,syncToken:this._syncToken},t)}).then(()=>{this._dirty=!1,n()},t=>{s.logger.error("Failed to save device tracking data",this._syncToken),s.logger.error(t)})},t)}return n}getSyncToken(){return this._syncToken}setSyncToken(t){this._syncToken=t}downloadKeys(t,e){const n=[],i=[];if(t.forEach(t=>{const r=this._deviceTrackingStatus[t];this._keyDownloadsInProgressByUser[t]?(s.logger.log("downloadKeys: already have a download in progress for "+t+": awaiting its result"),i.push(this._keyDownloadsInProgressByUser[t])):(e||3!=r)&&n.push(t)}),0!=n.length){s.logger.log("downloadKeys: downloading for",n);const t=this._doKeyDownload(n);i.push(t)}return 0===i.length&&s.logger.log("downloadKeys: already have all necessary keys"),Promise.all(i).then(()=>this._getDevicesFromStore(t))}_getDevicesFromStore(t){const e={},n=this;return t.map((function(t){e[t]={},(n.getStoredDevicesForUser(t)||[]).map((function(n){e[t][n.deviceId]=n}))})),e}getKnownUserIds(){return Object.keys(this._devices)}getStoredDevicesForUser(t){const e=this._devices[t];if(!e)return null;const n=[];for(const i in e)e.hasOwnProperty(i)&&n.push(o.DeviceInfo.fromStorage(e[i],i));return n}getRawStoredDevicesForUser(t){return this._devices[t]}getStoredCrossSigningForUser(t){return this._crossSigningInfo[t]?a.CrossSigningInfo.fromStorage(this._crossSigningInfo[t],t):null}storeCrossSigningForUser(t,e){this._crossSigningInfo[t]=e,this._dirty=!0}getStoredDevice(t,e){const n=this._devices[t];if(n&&n[e])return o.DeviceInfo.fromStorage(n[e],e)}getUserByIdentityKey(t,e){return t!==c.OLM_ALGORITHM&&t!==c.MEGOLM_ALGORITHM?null:this._userByIdentityKey[e]}getDeviceByIdentityKey(t,e){const n=this.getUserByIdentityKey(t,e);if(!n)return null;const i=this._devices[n];if(!i)return null;for(const r in i){if(!i.hasOwnProperty(r))continue;const t=i[r];for(const n in t.keys)if(t.keys.hasOwnProperty(n)&&0===n.indexOf("curve25519:")&&t.keys[n]==e)return o.DeviceInfo.fromStorage(t,r)}return null}storeDevicesForUser(t,e){if(void 0!==this._devices[t])for(const[n,i]of Object.entries(this._devices[t]))delete this._userByIdentityKey[i.keys["curve25519:"+n]];this._devices[t]=e;for(const[n,i]of Object.entries(e))this._userByIdentityKey[i.keys["curve25519:"+n]]=t;this._dirty=!0}startTrackingDeviceList(t){if("string"!=typeof t)throw new Error("userId must be a string; was "+t);this._deviceTrackingStatus[t]||(s.logger.log("Now tracking device list for "+t),this._deviceTrackingStatus[t]=1,this._dirty=!0)}stopTrackingDeviceList(t){this._deviceTrackingStatus[t]&&(s.logger.log("No longer tracking device list for "+t),this._deviceTrackingStatus[t]=0,this._dirty=!0)}stopTrackingAllDeviceLists(){for(const t of Object.keys(this._deviceTrackingStatus))this._deviceTrackingStatus[t]=0;this._dirty=!0}invalidateUserDeviceList(t){this._deviceTrackingStatus[t]&&(s.logger.log("Marking device list outdated for",t),this._deviceTrackingStatus[t]=1,this._dirty=!0)}refreshOutdatedDeviceLists(){this.saveIfDirty();const t=[];for(const e of Object.keys(this._deviceTrackingStatus))1==this._deviceTrackingStatus[e]&&t.push(e);return this._doKeyDownload(t)}_setRawStoredDevicesForUser(t,e){if(void 0!==this._devices[t])for(const[n,i]of Object.entries(this._devices[t]))delete this._userByIdentityKey[i.keys["curve25519:"+n]];this._devices[t]=e;for(const[n,i]of Object.entries(e))this._userByIdentityKey[i.keys["curve25519:"+n]]=t}setRawStoredCrossSigningForUser(t,e){this._crossSigningInfo[t]=e}_doKeyDownload(t){if(0===t.length)return Promise.resolve();const e=this._serialiser.updateDevicesForUsers(t,this._syncToken).then(()=>{n(!0)},e=>{throw s.logger.error("Error downloading keys for "+t+":",e),n(!1),e});t.forEach(t=>{this._keyDownloadsInProgressByUser[t]=e,1==this._deviceTrackingStatus[t]&&(this._deviceTrackingStatus[t]=2)});const n=n=>{this.emit("crypto.willUpdateDevices",t,!this._hasFetched),t.forEach(t=>{this._dirty=!0,this._keyDownloadsInProgressByUser[t]===e?(delete this._keyDownloadsInProgressByUser[t],2==this._deviceTrackingStatus[t]&&(n?(this._deviceTrackingStatus[t]=3,s.logger.log("Device list for",t,"now up to date")):this._deviceTrackingStatus[t]=1)):s.logger.log("Another update in the queue for",t,"- not marking up-to-date")}),this.saveIfDirty(),this.emit("crypto.devicesUpdated",t,!this._hasFetched),this._hasFetched=!0};return e}};class h{constructor(t,e,n){this._baseApis=t,this._olmDevice=e,this._deviceList=n,this._downloadInProgress=!1,this._keyDownloadsQueuedByUser={},this._queuedQueryDeferred=null,this._syncToken=null}updateDevicesForUsers(t,e){return t.forEach(t=>{this._keyDownloadsQueuedByUser[t]=!0}),this._queuedQueryDeferred||(this._queuedQueryDeferred=(0,u.defer)()),this._syncToken=e,this._downloadInProgress?(s.logger.log("Queued key download for",t),this._queuedQueryDeferred.promise):this._doQueuedQueries()}_doQueuedQueries(){if(this._downloadInProgress)throw new Error("DeviceListUpdateSerialiser._doQueuedQueries called with request active");const t=Object.keys(this._keyDownloadsQueuedByUser);this._keyDownloadsQueuedByUser={};const e=this._queuedQueryDeferred;this._queuedQueryDeferred=null,s.logger.log("Starting key download for",t),this._downloadInProgress=!0;const n={};return this._syncToken&&(n.token=this._syncToken),this._baseApis.downloadKeysForUsers(t,n).then(async e=>{const n=e.device_keys||{},i=e.master_keys||{},r=e.self_signing_keys||{},o=e.user_signing_keys||{};for(const c of t){await(0,u.sleep)(5);try{await this._processQueryResponseForUser(c,n[c],{master:i[c],self_signing:r[c],user_signing:o[c]})}catch(a){s.logger.error(`Error processing keys for ${c}:`,a)}}}).then(()=>{s.logger.log("Completed key download for "+t),this._downloadInProgress=!1,e.resolve(),this._queuedQueryDeferred&&this._doQueuedQueries()},n=>{s.logger.warn("Error downloading keys for "+t+":",n),this._downloadInProgress=!1,e.reject(n)}),e.promise}async _processQueryResponseForUser(t,e,n){s.logger.log("got device keys for "+t+":",e),s.logger.log("got cross-signing keys for "+t+":",n);{const n={},i=this._deviceList.getRawStoredDevicesForUser(t);i&&Object.keys(i).forEach(t=>{const e=o.DeviceInfo.fromStorage(i[t],t);n[t]=e}),await async function(t,e,n,i){let r=!1;for(const o in n)n.hasOwnProperty(o)&&(o in i||(s.logger.log("Device "+e+":"+o+" has been removed"),delete n[o],r=!0));for(const o in i){if(!i.hasOwnProperty(o))continue;const a=i[o];a.user_id===e?a.device_id===o?await d(t,n,a)&&(r=!0):s.logger.warn("Mismatched device_id "+a.device_id+" in keys from "+e+":"+o):s.logger.warn("Mismatched user_id "+a.user_id+" in keys from "+e+":"+o)}return r}(this._olmDevice,t,n,e||{});const r={};Object.keys(n).forEach(t=>{r[t]=n[t].toStorage()}),this._deviceList._setRawStoredDevicesForUser(t,r)}if(n&&(n.master||n.self_signing||n.user_signing)){const e=this._deviceList.getStoredCrossSigningForUser(t)||new a.CrossSigningInfo(t);e.setKeys(n),this._deviceList.setRawStoredCrossSigningForUser(t,e.toStorage()),this._deviceList.emit("userCrossSigningUpdated",t)}}}async function d(t,e,n){if(!n.keys)return!1;const i=n.device_id,r=n.user_id,a=n.keys["ed25519:"+i];if(!a)return s.logger.warn("Device "+r+":"+i+" has no ed25519 key"),!1;const l=n.unsigned||{},u=n.signatures||{};try{await c.verifySignature(t,n,r,i,a)}catch(d){return s.logger.warn("Unable to verify signature on device "+r+":"+i+":"+d),!1}let h;if(i in e){if(h=e[i],h.getFingerprint()!=a)return s.logger.warn("Ed25519 key for device "+r+":"+i+" has changed"),!1}else e[i]=h=new o.DeviceInfo(i);return h.keys=n.keys||{},h.algorithms=n.algorithms||[],h.unsigned=l,h.signatures=u,!0}},qN7M:function(t,e,n){"use strict";var i=n("284h");Object.defineProperty(e,"__esModule",{value:!0}),e.IndexedDBCryptoStore=void 0;var r=n("PrRn"),s=n("M2bJ"),o=n("qdUr"),a=i(n("/3Bh")),c=n("Hzpt"),l=i(n("BLwL"));class u{constructor(t,e){this._indexedDB=t,this._dbName=e,this._backendPromise=null,this._backend=null}static exists(t,e){return l.exists(t,e)}startup(){return this._backendPromise||(this._backendPromise=new Promise((t,e)=>{if(!this._indexedDB)return void e(new Error("no indexeddb support available"));r.logger.log("connecting to indexeddb "+this._dbName);const n=this._indexedDB.open(this._dbName,a.VERSION);n.onupgradeneeded=t=>{a.upgradeDatabase(t.target.result,t.oldVersion)},n.onblocked=()=>{r.logger.log("can't yet open IndexedDBCryptoStore because it is open elsewhere")},n.onerror=t=>{r.logger.log("Error connecting to indexeddb",t),e(t.target.error)},n.onsuccess=e=>{const n=e.target.result;r.logger.log("connected to indexeddb "+this._dbName),t(new a.Backend(n))}}).then(t=>t.doTxn("readonly",[u.STORE_INBOUND_GROUP_SESSIONS,u.STORE_INBOUND_GROUP_SESSIONS_WITHHELD],e=>{t.getEndToEndInboundGroupSession("","",e,()=>{})}).then(()=>t)).catch(t=>{if("VersionError"===t.name)throw r.logger.warn("Crypto DB is too new for us to use!",t),new c.InvalidCryptoStoreError(c.InvalidCryptoStoreError.TOO_NEW);r.logger.warn("unable to connect to indexeddb "+this._dbName+": falling back to localStorage store: "+t);try{return new s.LocalStorageCryptoStore(global.localStorage)}catch(t){return r.logger.warn("unable to open localStorage: falling back to in-memory store: "+t),new o.MemoryCryptoStore}}).then(t=>{this._backend=t})),this._backendPromise}deleteAllData(){return new Promise((t,e)=>{if(!this._indexedDB)return void e(new Error("no indexeddb support available"));r.logger.log("Removing indexeddb instance: "+this._dbName);const n=this._indexedDB.deleteDatabase(this._dbName);n.onblocked=()=>{r.logger.log("can't yet delete IndexedDBCryptoStore because it is open elsewhere")},n.onerror=t=>{r.logger.log("Error deleting data from indexeddb",t),e(t.target.error)},n.onsuccess=()=>{r.logger.log("Removed indexeddb instance: "+this._dbName),t()}}).catch(t=>{r.logger.warn("unable to delete IndexedDBCryptoStore: "+t)})}getOrAddOutgoingRoomKeyRequest(t){return this._backend.getOrAddOutgoingRoomKeyRequest(t)}getOutgoingRoomKeyRequest(t){return this._backend.getOutgoingRoomKeyRequest(t)}getOutgoingRoomKeyRequestByState(t){return this._backend.getOutgoingRoomKeyRequestByState(t)}getAllOutgoingRoomKeyRequestsByState(t){return this._backend.getAllOutgoingRoomKeyRequestsByState(t)}getOutgoingRoomKeyRequestsByTarget(t,e,n){return this._backend.getOutgoingRoomKeyRequestsByTarget(t,e,n)}updateOutgoingRoomKeyRequest(t,e,n){return this._backend.updateOutgoingRoomKeyRequest(t,e,n)}deleteOutgoingRoomKeyRequest(t,e){return this._backend.deleteOutgoingRoomKeyRequest(t,e)}getAccount(t,e){this._backend.getAccount(t,e)}storeAccount(t,e){this._backend.storeAccount(t,e)}getCrossSigningKeys(t,e){this._backend.getCrossSigningKeys(t,e)}getSecretStorePrivateKey(t,e,n){this._backend.getSecretStorePrivateKey(t,e,n)}storeCrossSigningKeys(t,e){this._backend.storeCrossSigningKeys(t,e)}storeSecretStorePrivateKey(t,e,n){this._backend.storeSecretStorePrivateKey(t,e,n)}countEndToEndSessions(t,e){this._backend.countEndToEndSessions(t,e)}getEndToEndSession(t,e,n,i){this._backend.getEndToEndSession(t,e,n,i)}getEndToEndSessions(t,e,n){this._backend.getEndToEndSessions(t,e,n)}getAllEndToEndSessions(t,e){this._backend.getAllEndToEndSessions(t,e)}storeEndToEndSession(t,e,n,i){this._backend.storeEndToEndSession(t,e,n,i)}storeEndToEndSessionProblem(t,e,n){return this._backend.storeEndToEndSessionProblem(t,e,n)}getEndToEndSessionProblem(t,e){return this._backend.getEndToEndSessionProblem(t,e)}filterOutNotifiedErrorDevices(t){return this._backend.filterOutNotifiedErrorDevices(t)}getEndToEndInboundGroupSession(t,e,n,i){this._backend.getEndToEndInboundGroupSession(t,e,n,i)}getAllEndToEndInboundGroupSessions(t,e){this._backend.getAllEndToEndInboundGroupSessions(t,e)}addEndToEndInboundGroupSession(t,e,n,i){this._backend.addEndToEndInboundGroupSession(t,e,n,i)}storeEndToEndInboundGroupSession(t,e,n,i){this._backend.storeEndToEndInboundGroupSession(t,e,n,i)}storeEndToEndInboundGroupSessionWithheld(t,e,n,i){this._backend.storeEndToEndInboundGroupSessionWithheld(t,e,n,i)}storeEndToEndDeviceData(t,e){this._backend.storeEndToEndDeviceData(t,e)}getEndToEndDeviceData(t,e){this._backend.getEndToEndDeviceData(t,e)}storeEndToEndRoom(t,e,n){this._backend.storeEndToEndRoom(t,e,n)}getEndToEndRooms(t,e){this._backend.getEndToEndRooms(t,e)}getSessionsNeedingBackup(t){return this._backend.getSessionsNeedingBackup(t)}countSessionsNeedingBackup(t){return this._backend.countSessionsNeedingBackup(t)}unmarkSessionsNeedingBackup(t,e){return this._backend.unmarkSessionsNeedingBackup(t,e)}markSessionsNeedingBackup(t,e){return this._backend.markSessionsNeedingBackup(t,e)}doTxn(t,e,n){return this._backend.doTxn(t,e,n)}}e.IndexedDBCryptoStore=u,u.STORE_ACCOUNT="account",u.STORE_SESSIONS="sessions",u.STORE_INBOUND_GROUP_SESSIONS="inbound_group_sessions",u.STORE_INBOUND_GROUP_SESSIONS_WITHHELD="inbound_group_sessions_withheld",u.STORE_DEVICE_DATA="device_data",u.STORE_ROOMS="rooms",u.STORE_BACKUP="sessions_needing_backup"},qdUr:function(t,e,n){"use strict";var i=n("284h"),r=n("TqRt");Object.defineProperty(e,"__esModule",{value:!0}),e.MemoryCryptoStore=void 0;var s=r(n("lSNA")),o=n("PrRn"),a=i(n("t+e4"));function c(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function l(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?c(Object(n),!0).forEach((function(e){(0,s.default)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}e.MemoryCryptoStore=class{constructor(){this._outgoingRoomKeyRequests=[],this._account=null,this._crossSigningKeys=null,this._privateKeys={},this._backupKeys={},this._sessions={},this._sessionProblems={},this._notifiedErrorDevices={},this._inboundGroupSessions={},this._inboundGroupSessionsWithheld={},this._deviceData=null,this._rooms={},this._sessionsNeedingBackup={}}async startup(){return this}deleteAllData(){return Promise.resolve()}getOrAddOutgoingRoomKeyRequest(t){const e=t.requestBody;return a.promiseTry(()=>{const n=this._getOutgoingRoomKeyRequest(e);return n?(o.logger.log(`already have key request outstanding for ${e.room_id} / ${e.session_id}: not sending another`),n):(o.logger.log(`enqueueing key request for ${e.room_id} / `+e.session_id),this._outgoingRoomKeyRequests.push(t),t)})}getOutgoingRoomKeyRequest(t){return Promise.resolve(this._getOutgoingRoomKeyRequest(t))}_getOutgoingRoomKeyRequest(t){for(const e of this._outgoingRoomKeyRequests)if(a.deepCompare(e.requestBody,t))return e;return null}getOutgoingRoomKeyRequestByState(t){for(const e of this._outgoingRoomKeyRequests)for(const n of t)if(e.state===n)return Promise.resolve(e);return Promise.resolve(null)}getAllOutgoingRoomKeyRequestsByState(t){return Promise.resolve(this._outgoingRoomKeyRequests.filter(e=>e.state==t))}getOutgoingRoomKeyRequestsByTarget(t,e,n){const i=[];for(const r of this._outgoingRoomKeyRequests)for(const s of n)r.state===s&&r.recipients.includes({userId:t,deviceId:e})&&i.push(r);return Promise.resolve(i)}updateOutgoingRoomKeyRequest(t,e,n){for(const i of this._outgoingRoomKeyRequests)if(i.requestId===t)return i.state!=e?(o.logger.warn(`Cannot update room key request from ${e} as it was already updated to `+i.state),Promise.resolve(null)):(Object.assign(i,n),Promise.resolve(i));return Promise.resolve(null)}deleteOutgoingRoomKeyRequest(t,e){for(let n=0;n<this._outgoingRoomKeyRequests.length;n++){const i=this._outgoingRoomKeyRequests[n];if(i.requestId===t)return i.state!=e?(o.logger.warn(`Cannot delete room key request in state ${i.state} (expected ${e})`),Promise.resolve(null)):(this._outgoingRoomKeyRequests.splice(n,1),Promise.resolve(i))}return Promise.resolve(null)}getAccount(t,e){e(this._account)}storeAccount(t,e){this._account=e}getCrossSigningKeys(t,e){e(this._crossSigningKeys)}getSecretStorePrivateKey(t,e,n){return e(this._privateKeys[n]||null)}storeCrossSigningKeys(t,e){this._crossSigningKeys=e}storeSecretStorePrivateKey(t,e,n){this._privateKeys[e]=n}countEndToEndSessions(t,e){return Object.keys(this._sessions).length}getEndToEndSession(t,e,n,i){i((this._sessions[t]||{})[e]||null)}getEndToEndSessions(t,e,n){n(this._sessions[t]||{})}getAllEndToEndSessions(t,e){Object.entries(this._sessions).forEach(([t,n])=>{Object.entries(n).forEach(([n,i])=>{e(l(l({},i),{},{deviceKey:t,sessionId:n}))})})}storeEndToEndSession(t,e,n,i){let r=this._sessions[t];void 0===r&&(r={},this._sessions[t]=r),r[e]=n}async storeEndToEndSessionProblem(t,e,n){const i=this._sessionProblems[t]=this._sessionProblems[t]||[];i.push({type:e,fixed:n,time:Date.now()}),i.sort((t,e)=>t.time-e.time)}async getEndToEndSessionProblem(t,e){const n=this._sessionProblems[t]||[];if(!n.length)return null;const i=n[n.length-1];for(const r of n)if(r.time>e)return Object.assign({},r,{fixed:i.fixed});return i.fixed?null:i}async filterOutNotifiedErrorDevices(t){const e=this._notifiedErrorDevices,n=[];for(const i of t){const{userId:t,deviceInfo:r}=i;t in e?r.deviceId in e[t]||(n.push(i),e[t][r.deviceId]=!0):(n.push(i),e[t]={[r.deviceId]:!0})}return n}getEndToEndInboundGroupSession(t,e,n,i){const r=t+"/"+e;i(this._inboundGroupSessions[r]||null,this._inboundGroupSessionsWithheld[r]||null)}getAllEndToEndInboundGroupSessions(t,e){for(const n of Object.keys(this._inboundGroupSessions))e({senderKey:n.substr(0,43),sessionId:n.substr(44),sessionData:this._inboundGroupSessions[n]});e(null)}addEndToEndInboundGroupSession(t,e,n,i){const r=t+"/"+e;void 0===this._inboundGroupSessions[r]&&(this._inboundGroupSessions[r]=n)}storeEndToEndInboundGroupSession(t,e,n,i){this._inboundGroupSessions[t+"/"+e]=n}storeEndToEndInboundGroupSessionWithheld(t,e,n,i){this._inboundGroupSessionsWithheld[t+"/"+e]=n}getEndToEndDeviceData(t,e){e(this._deviceData)}storeEndToEndDeviceData(t,e){this._deviceData=t}storeEndToEndRoom(t,e,n){this._rooms[t]=e}getEndToEndRooms(t,e){e(this._rooms)}getSessionsNeedingBackup(t){const e=[];for(const n in this._sessionsNeedingBackup)if(this._inboundGroupSessions[n]&&(e.push({senderKey:n.substr(0,43),sessionId:n.substr(44),sessionData:this._inboundGroupSessions[n]}),t&&n.length>=t))break;return Promise.resolve(e)}countSessionsNeedingBackup(){return Promise.resolve(Object.keys(this._sessionsNeedingBackup).length)}unmarkSessionsNeedingBackup(t){for(const e of t)delete this._sessionsNeedingBackup[e.senderKey+"/"+e.sessionId];return Promise.resolve()}markSessionsNeedingBackup(t){for(const e of t)this._sessionsNeedingBackup[e.senderKey+"/"+e.sessionId]=!0;return Promise.resolve()}doTxn(t,e,n){return Promise.resolve(n(null))}}},qmDw:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.keyFromAuthData=async function(t,e){if(!global.Olm)throw new Error("Olm is not available");if(!t.private_key_salt||!t.private_key_iterations)throw new Error("Salt and/or iterations not found: this backup cannot be restored with a passphrase");return await r(e,t.private_key_salt,t.private_key_iterations,t.private_key_bits||256)},e.keyFromPassphrase=async function(t){if(!global.Olm)throw new Error("Olm is not available");const e=(0,i.randomString)(32);return{key:await r(t,e,5e5,256),salt:e,iterations:5e5}},e.deriveKey=r;var i=n("PwFS");async function r(t,e,n,i=256){const r=global.crypto.subtle,s=global.TextEncoder;if(!r||!s)throw new Error("Password-based backup is not avaiable on this platform");const o=await r.importKey("raw",(new s).encode(t),{name:"PBKDF2"},!1,["deriveBits"]),a=await r.deriveBits({name:"PBKDF2",salt:(new s).encode(e),iterations:n,hash:"SHA-512"},o,i);return new Uint8Array(a)}},r8II:function(t,e,n){"use strict";e.decode=e.parse=n("YcCt"),e.encode=e.stringify=n("6MUB")},rWBP:function(t,e,n){"use strict";var i=n("284h");Object.defineProperty(e,"__esModule",{value:!0}),e.User=o;var r=i(n("t+e4")),s=n("+qE3");function o(t){this.userId=t,this.presence="offline",this.presenceStatusMsg=null,this._unstable_statusMessage="",this.displayName=t,this.rawDisplayName=t,this.avatarUrl=null,this.lastActiveAgo=0,this.lastPresenceTs=0,this.currentlyActive=!1,this.events={presence:null,profile:null},this._updateModifiedTime()}r.inherits(o,s.EventEmitter),o.prototype.setPresenceEvent=function(t){if("m.presence"!==t.getType())return;const e=null===this.events.presence;this.events.presence=t;const n=[];(t.getContent().presence!==this.presence||e)&&n.push("User.presence"),t.getContent().avatar_url&&t.getContent().avatar_url!==this.avatarUrl&&n.push("User.avatarUrl"),t.getContent().displayname&&t.getContent().displayname!==this.displayName&&n.push("User.displayName"),void 0!==t.getContent().currently_active&&t.getContent().currently_active!==this.currentlyActive&&n.push("User.currentlyActive"),this.presence=t.getContent().presence,n.push("User.lastPresenceTs"),t.getContent().status_msg&&(this.presenceStatusMsg=t.getContent().status_msg),t.getContent().displayname&&(this.displayName=t.getContent().displayname),t.getContent().avatar_url&&(this.avatarUrl=t.getContent().avatar_url),this.lastActiveAgo=t.getContent().last_active_ago,this.lastPresenceTs=Date.now(),this.currentlyActive=t.getContent().currently_active,this._updateModifiedTime();for(let i=0;i<n.length;i++)this.emit(n[i],t,this)},o.prototype.setDisplayName=function(t){const e=this.displayName;this.displayName=t,t!==e&&this._updateModifiedTime()},o.prototype.setRawDisplayName=function(t){this.rawDisplayName=t},o.prototype.setAvatarUrl=function(t){const e=this.avatarUrl;this.avatarUrl=t,t!==e&&this._updateModifiedTime()},o.prototype._updateModifiedTime=function(){this._modified=Date.now()},o.prototype.getLastModifiedTime=function(){return this._modified},o.prototype.getLastActiveTs=function(){return this.lastPresenceTs-this.lastActiveAgo},o.prototype._unstable_updateStatusMessage=function(t){this._unstable_statusMessage=t.getContent()?t.getContent().status:"",this._updateModifiedTime(),this.emit("User._unstable_statusMessage",this)}},rWzI:function(t,e,n){(function(t){var i;!function(r){"object"==typeof global&&global;var s,o=2147483647,a=/^xn--/,c=/[^\x20-\x7E]/,l=/[\x2E\u3002\uFF0E\uFF61]/g,u={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},h=Math.floor,d=String.fromCharCode;function p(t){throw RangeError(u[t])}function m(t,e){for(var n=t.length,i=[];n--;)i[n]=e(t[n]);return i}function f(t,e){var n=t.split("@"),i="";return n.length>1&&(i=n[0]+"@",t=n[1]),i+m((t=t.replace(l,".")).split("."),e).join(".")}function g(t){for(var e,n,i=[],r=0,s=t.length;r<s;)(e=t.charCodeAt(r++))>=55296&&e<=56319&&r<s?56320==(64512&(n=t.charCodeAt(r++)))?i.push(((1023&e)<<10)+(1023&n)+65536):(i.push(e),r--):i.push(e);return i}function _(t){return m(t,(function(t){var e="";return t>65535&&(e+=d((t-=65536)>>>10&1023|55296),t=56320|1023&t),e+d(t)})).join("")}function y(t,e){return t+22+75*(t<26)-((0!=e)<<5)}function v(t,e,n){var i=0;for(t=n?h(t/700):t>>1,t+=h(t/e);t>455;i+=36)t=h(t/35);return h(i+36*t/(t+38))}function b(t){var e,n,i,r,s,a,c,l,u,d,m,f=[],g=t.length,y=0,b=128,w=72;for((n=t.lastIndexOf("-"))<0&&(n=0),i=0;i<n;++i)t.charCodeAt(i)>=128&&p("not-basic"),f.push(t.charCodeAt(i));for(r=n>0?n+1:0;r<g;){for(s=y,a=1,c=36;r>=g&&p("invalid-input"),((l=(m=t.charCodeAt(r++))-48<10?m-22:m-65<26?m-65:m-97<26?m-97:36)>=36||l>h((o-y)/a))&&p("overflow"),y+=l*a,!(l<(u=c<=w?1:c>=w+26?26:c-w));c+=36)a>h(o/(d=36-u))&&p("overflow"),a*=d;w=v(y-s,e=f.length+1,0==s),h(y/e)>o-b&&p("overflow"),b+=h(y/e),y%=e,f.splice(y++,0,b)}return _(f)}function w(t){var e,n,i,r,s,a,c,l,u,m,f,_,b,w,S,E=[];for(_=(t=g(t)).length,e=128,n=0,s=72,a=0;a<_;++a)(f=t[a])<128&&E.push(d(f));for(i=r=E.length,r&&E.push("-");i<_;){for(c=o,a=0;a<_;++a)(f=t[a])>=e&&f<c&&(c=f);for(c-e>h((o-n)/(b=i+1))&&p("overflow"),n+=(c-e)*b,e=c,a=0;a<_;++a)if((f=t[a])<e&&++n>o&&p("overflow"),f==e){for(l=n,u=36;!(l<(m=u<=s?1:u>=s+26?26:u-s));u+=36)E.push(d(y(m+(S=l-m)%(w=36-m),0))),l=h(S/w);E.push(d(y(l,0))),s=v(n,b,i==r),n=0,++i}++n,++e}return E.join("")}s={version:"1.3.2",ucs2:{decode:g,encode:_},decode:b,encode:w,toASCII:function(t){return f(t,(function(t){return c.test(t)?"xn--"+w(t):t}))},toUnicode:function(t){return f(t,(function(t){return a.test(t)?b(t.slice(4).toLowerCase()):t}))}},void 0===(i=(function(){return s}).call(e,n,e,t))||(t.exports=i)}()}).call(this,n("YuTi")(t))},sxOR:function(t,e,n){"use strict";var i=String.prototype.replace,r=/%20/g;t.exports={default:"RFC3986",formatters:{RFC1738:function(t){return i.call(t,r,"+")},RFC3986:function(t){return t}},RFC1738:"RFC1738",RFC3986:"RFC3986"}},"t+e4":function(t,e,n){"use strict";var i=n("TqRt");Object.defineProperty(e,"__esModule",{value:!0}),e.encodeParams=function(t){let e="";for(const n in t)t.hasOwnProperty(n)&&(e+="&"+encodeURIComponent(n)+"="+encodeURIComponent(t[n]));return e.substring(1)},e.encodeUri=function(t,e){for(const n in e)e.hasOwnProperty(n)&&(t=t.replace(n,encodeURIComponent(e[n])));return t},e.map=function(t,e){const n=new Array(t.length);for(let i=0;i<t.length;i++)n[i]=e(t[i]);return n},e.filter=function(t,e){const n=[];for(let i=0;i<t.length;i++)e(t[i],i,t)&&n.push(t[i]);return n},e.keys=function(t){const e=[];for(const n in t)t.hasOwnProperty(n)&&e.push(n);return e},e.values=function(t){const e=[];for(const n in t)t.hasOwnProperty(n)&&e.push(t[n]);return e},e.forEach=function(t,e){for(let n=0;n<t.length;n++)e(t[n],n)},e.findElement=function(t,e,n){let i;if(n){for(i=t.length-1;i>=0;i--)if(e(t[i],i,t))return t[i]}else for(i=0;i<t.length;i++)if(e(t[i],i,t))return t[i]},e.removeElement=function(t,e,n){let i,r;if(n){for(i=t.length-1;i>=0;i--)if(e(t[i],i,t))return r=t[i],t.splice(i,1),r}else for(i=0;i<t.length;i++)if(e(t[i],i,t))return r=t[i],t.splice(i,1),r;return!1},e.isFunction=function(t){return"[object Function]"===Object.prototype.toString.call(t)},e.isArray=function(t){return Array.isArray?Array.isArray(t):Boolean(t&&t.constructor===Array)},e.checkObjectHasKeys=function(t,e){for(let n=0;n<e.length;n++)if(!t.hasOwnProperty(e[n]))throw new Error("Missing required key: "+e[n])},e.checkObjectHasNoAdditionalKeys=function(t,e){for(const n in t)if(t.hasOwnProperty(n)&&-1===e.indexOf(n))throw new Error("Unknown key: "+n)},e.deepCopy=function(t){return JSON.parse(JSON.stringify(t))},e.deepCompare=function t(e,n){if(e===n)return!0;if(typeof e!=typeof n)return!1;if("number"==typeof e&&isNaN(e)&&isNaN(n))return!0;if(null===e||null===n)return e===n;if(!(e instanceof Object))return!1;if(e.constructor!==n.constructor||e.prototype!==n.prototype)return!1;if(e instanceof RegExp||e instanceof Date)return e.toString()===n.toString();if(e instanceof Array){if(e.length!==n.length)return!1;for(let i=0;i<e.length;i++)if(!t(e[i],n[i]))return!1}else{let i;for(i in n)if(n.hasOwnProperty(i)!==e.hasOwnProperty(i))return!1;for(i in n){if(n.hasOwnProperty(i)!==e.hasOwnProperty(i))return!1;if(!t(e[i],n[i]))return!1}}return!0},e.extend=function(){const t=arguments[0]||{};for(let e=1;e<arguments.length;e++){const n=arguments[e];if(n)for(const e in n)t[e]=n[e]}return t},e.runPolyfills=function(){Array.prototype.filter||(Array.prototype.filter=function(t){if(null==this)throw new TypeError;const e=Object(this),n=e.length>>>0;if("function"!=typeof t)throw new TypeError;const i=[],r=arguments.length>=2?arguments[1]:void 0;for(let s=0;s<n;s++)if(s in e){const n=e[s];t.call(r,n,s,e)&&i.push(n)}return i}),Array.prototype.map||(Array.prototype.map=function(t,e){let n,i;if(null==this)throw new TypeError(" this is null or not defined");const r=Object(this),s=r.length>>>0;if("function"!=typeof t)throw new TypeError(t+" is not a function");arguments.length>1&&(n=e);const o=new Array(s);for(i=0;i<s;){let e,s;i in r&&(e=r[i],s=t.call(n,e,i,r),o[i]=s),i++}return o}),Array.prototype.forEach||(Array.prototype.forEach=function(t,e){let n,i;if(null==this)throw new TypeError(" this is null or not defined");const r=Object(this),s=r.length>>>0;if("function"!=typeof t)throw new TypeError(t+" is not a function");for(arguments.length>1&&(n=e),i=0;i<s;){let e;i in r&&(e=r[i],t.call(n,e,i,r)),i++}})},e.inherits=function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})},e.polyfillSuper=function(t,e,...n){try{e.call(t,...n)}catch(i){const r=new e(...n);Object.assign(t,r)}},e.isNumber=function(t){return"number"==typeof t&&isFinite(t)},e.removeHiddenChars=function(t){return(0,r.default)(t.normalize("NFD").replace(s,""))},e.escapeRegExp=o,e.globToRegexp=function(t,e){e="boolean"!=typeof e||e;let n=o(t);return n=n.replace(/\\\*/g,".*"),n=n.replace(/\?/g,"."),e&&(n=n.replace(/\\\[(!|)(.*)\\]/g,(function(t,e,n,i,r){return"["+(e?"^":"")+n.replace(/\\-/,"-")+"]"}))),n},e.ensureNoTrailingSlash=function(t){return t&&t.endsWith("/")?t.substr(0,t.length-1):t},e.sleep=function(t,e){return new Promise(n=>{setTimeout(n,t,e)})},e.isNullOrUndefined=function(t){return null==t},e.defer=function(){let t,e;const n=new Promise((n,i)=>{t=n,e=i});return{resolve:t,reject:e,promise:n}},e.promiseMapSeries=async function(t,e){for(const n of await t)await e(await n)},e.promiseTry=function(t){return new Promise(e=>e(t()))},e.setCrypto=function(t){a=t},e.getCrypto=function(){return a};var r=i(n("/pNf"));const s=/[\u2000-\u200F\u202A-\u202F\u0300-\u036f\uFEFF\s]/g;function o(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}let a},"tA+R":function(t,e,n){"use strict";var i=/; *([!#$%&'*+.^_`|~0-9A-Za-z-]+) *= *("(?:[\u000b\u0020\u0021\u0023-\u005b\u005d-\u007e\u0080-\u00ff]|\\[\u000b\u0020-\u00ff])*"|[!#$%&'*+.^_`|~0-9A-Za-z-]+) */g,r=/^[\u000b\u0020-\u007e\u0080-\u00ff]+$/,s=/^[!#$%&'*+.^_`|~0-9A-Za-z-]+$/,o=/\\([\u000b\u0020-\u00ff])/g,a=/([\\"])/g,c=/^[!#$%&'*+.^_`|~0-9A-Za-z-]+\/[!#$%&'*+.^_`|~0-9A-Za-z-]+$/;function l(t){var e=String(t);if(s.test(e))return e;if(e.length>0&&!r.test(e))throw new TypeError("invalid parameter value");return'"'+e.replace(a,"\\$1")+'"'}function u(t){this.parameters=Object.create(null),this.type=t}e.format=function(t){if(!t||"object"!=typeof t)throw new TypeError("argument obj is required");var e=t.parameters,n=t.type;if(!n||!c.test(n))throw new TypeError("invalid type");var i=n;if(e&&"object"==typeof e)for(var r,o=Object.keys(e).sort(),a=0;a<o.length;a++){if(!s.test(r=o[a]))throw new TypeError("invalid parameter name");i+="; "+r+"="+l(e[r])}return i},e.parse=function(t){if(!t)throw new TypeError("argument string is required");var e="object"==typeof t?function(t){var e;if("function"==typeof t.getHeader?e=t.getHeader("content-type"):"object"==typeof t.headers&&(e=t.headers&&t.headers["content-type"]),"string"!=typeof e)throw new TypeError("content-type header is missing from object");return e}(t):t;if("string"!=typeof e)throw new TypeError("argument string is required to be a string");var n=e.indexOf(";"),r=-1!==n?e.substr(0,n).trim():e.trim();if(!c.test(r))throw new TypeError("invalid media type");var s=new u(r.toLowerCase());if(-1!==n){var a,l,h;for(i.lastIndex=n;l=i.exec(e);){if(l.index!==n)throw new TypeError("invalid parameter format");n+=l[0].length,a=l[1].toLowerCase(),'"'===(h=l[2])[0]&&(h=h.substr(1,h.length-2).replace(o,"$1")),s.parameters[a]=h}if(n!==e.length)throw new TypeError("invalid parameter format")}return s}},tMY0:function(t,e,n){"use strict";var i=n("284h"),r=n("PrRn"),s=i(n("t+e4")),o=i(n("VRzr")),a=n("9BO/"),c=n("mjbu");function l(t){this.sessionId=t,this.useCount=0,this.creationTime=(new Date).getTime(),this.sharedWithDevices={},this.blockedDevicesNotified={}}function u(t){(0,s.polyfillSuper)(this,a.EncryptionAlgorithm,t),this._setupPromise=Promise.resolve(),this._outboundSessions={},this._sessionRotationPeriodMsgs=100,this._sessionRotationPeriodMs=6048e5,void 0!==t.config.rotation_period_ms&&(this._sessionRotationPeriodMs=t.config.rotation_period_ms),void 0!==t.config.rotation_period_msgs&&(this._sessionRotationPeriodMsgs=t.config.rotation_period_msgs)}function h(t){(0,s.polyfillSuper)(this,a.DecryptionAlgorithm,t),this._pendingEvents={},this.olmlib=o}l.prototype.needsRotation=function(t,e){const n=(new Date).getTime()-this.creationTime;return(this.useCount>=t||n>=e)&&(r.logger.log("Rotating megolm session after "+this.useCount+" messages, "+n+"ms"),!0)},l.prototype.markSharedWithDevice=function(t,e,n){this.sharedWithDevices[t]||(this.sharedWithDevices[t]={}),this.sharedWithDevices[t][e]=n},l.prototype.markNotifiedBlockedDevice=function(t,e){this.blockedDevicesNotified[t]||(this.blockedDevicesNotified[t]={}),this.blockedDevicesNotified[t][e]=!0},l.prototype.sharedWithTooManyDevices=function(t){for(const e in this.sharedWithDevices)if(this.sharedWithDevices.hasOwnProperty(e)){if(!t.hasOwnProperty(e))return r.logger.log("Starting new megolm session because we shared with "+e),!0;for(const n in this.sharedWithDevices[e])if(this.sharedWithDevices[e].hasOwnProperty(n)&&!t[e].hasOwnProperty(n))return r.logger.log("Starting new megolm session because we shared with "+e+":"+n),!0}},s.inherits(u,a.EncryptionAlgorithm),u.prototype._ensureOutboundSession=async function(t,e,n){let i;function s(){return i}const a=this._setupPromise.then(async s=>{i=s,i&&i.needsRotation(this._sessionRotationPeriodMsgs,this._sessionRotationPeriodMs)&&(r.logger.log("Starting new megolm session because we need to rotate."),i=null),i&&i.sharedWithTooManyDevices(t)&&(i=null),i||(r.logger.log("Starting new megolm session for room "+this._roomId),i=await this._prepareNewSession(),r.logger.log(`Started new megolm session ${i.sessionId} for room `+this._roomId),this._outboundSessions[i.sessionId]=i);const a={};for(const[e,n]of Object.entries(t))for(const[t,r]of Object.entries(n))r.getIdentityKey()!=this._olmDevice.deviceCurve25519Key&&(i.sharedWithDevices[e]&&void 0!==i.sharedWithDevices[e][t]||(a[e]=a[e]||[],a[e].push(r)));const c=this._olmDevice.getOutboundGroupSessionKey(i.sessionId),l={type:"m.room_key",content:{algorithm:o.MEGOLM_ALGORITHM,room_id:this._roomId,session_id:i.sessionId,session_key:c.key,chain_index:c.chain_index}},[u,h]=await o.getExistingOlmSessions(this._olmDevice,this._baseApis,a);await Promise.all([(async()=>{await this._shareKeyWithOlmSessions(i,c,l,h)})(),(async()=>{const t=[],e=Date.now(),r=[];await this._shareKeyWithDevices(i,c,l,u,t,n?1e4:2e3,r),!n&&Date.now()-e<1e4?(async()=>{const e={},n=new Set;for(const t of r)n.add(t);const s=[];for(const{userId:i,deviceInfo:r}of t){const t=i.slice(i.indexOf(":")+1);n.has(t)?(e[i]=e[i]||[],e[i].push(r)):s.push({userId:i,deviceInfo:r})}await this._shareKeyWithDevices(i,c,l,e,s,3e4),await this._notifyFailedOlmDevices(i,c,s)})():await this._notifyFailedOlmDevices(i,c,t)})(),(async()=>{const t={};for(const[n,r]of Object.entries(e))for(const[e,s]of Object.entries(r))i.blockedDevicesNotified[n]&&void 0!==i.blockedDevicesNotified[n][e]||(t[n]=t[n]||{},t[n][e]={device:s});await this._notifyBlockedDevices(i,t)})()])});return this._setupPromise=a.then(s,s),a.then(s)},u.prototype._prepareNewSession=async function(){const t=this._olmDevice.createOutboundGroupSession(),e=this._olmDevice.getOutboundGroupSessionKey(t);return await this._olmDevice.addInboundGroupSession(this._roomId,this._olmDevice.deviceCurve25519Key,[],t,e.key,{ed25519:this._olmDevice.deviceEd25519Key}),this._crypto.backupInfo&&this._crypto.backupGroupSession(this._roomId,this._olmDevice.deviceCurve25519Key,[],t,e.key).catch(t=>{r.logger.log("Failed to back up megolm session",t)}),new l(t)},u.prototype._getDevicesWithoutSessions=function(t,e,n){n=n||[];for(const[i,r]of Object.entries(e)){const e=t[i];for(const t of r){const r=t.deviceId;e[r].sessionId||(n.push({userId:i,deviceInfo:t}),delete e[r])}}return n},u.prototype._splitDevices=function(t){let e=[];const n=[e];for(const[i,r]of Object.entries(t)){for(const t of Object.values(r))e.push({userId:i,deviceInfo:t.device});e.length>20&&(e=[],n.push(e))}return 0===e.length&&n.pop(),n},u.prototype._encryptAndSendKeysToDevices=function(t,e,n,i){const s={},a=[];for(let r=0;r<n.length;r++){const t={algorithm:o.OLM_ALGORITHM,sender_key:this._olmDevice.deviceCurve25519Key,ciphertext:{}},e=n[r],c=e.userId,l=e.deviceInfo,u=l.deviceId;s[c]||(s[c]={}),s[c][u]=t,a.push(o.encryptMessageForDevice(t.ciphertext,this._userId,this._deviceId,this._olmDevice,c,l,i))}return Promise.all(a).then(()=>{for(const t of Object.keys(s)){for(const e of Object.keys(s[t]))0===Object.keys(s[t][e].ciphertext).length&&(r.logger.log("No ciphertext for device "+t+":"+e+": pruning"),delete s[t][e]);0===Object.keys(s[t]).length&&(r.logger.log("Pruned all devices for user "+t),delete s[t])}if(0!==Object.keys(s).length)return this._baseApis.sendToDevice("m.room.encrypted",s).then(()=>{for(const n of Object.keys(s))for(const i of Object.keys(s[n]))t.markSharedWithDevice(n,i,e)});r.logger.log("No users left to send to: aborting")})},u.prototype._sendBlockedNotificationsToDevices=async function(t,e,n){const i={};for(const r of e){const t=r.userId,e=r.deviceInfo,s=e.deviceInfo.deviceId,o=Object.assign({},n);o.code=e.code,o.reason=e.reason,"m.no_olm"===o.code&&(delete o.room_id,delete o.session_id),i[t]||(i[t]={}),i[t][s]=o}await this._baseApis.sendToDevice("org.matrix.room_key.withheld",i);for(const r of Object.keys(i))for(const e of Object.keys(i[r]))t.markNotifiedBlockedDevice(r,e)},u.prototype.reshareKeyWithDevice=async function(t,e,n,i){const s=this._outboundSessions[e];if(!s)return void r.logger.debug(`megolm session ${e} not found: not re-sharing keys`);if(void 0===s.sharedWithDevices[n])return void r.logger.debug(`megolm session ${e} never shared with user ${n}`);const a=s.sharedWithDevices[n][i.deviceId];if(void 0===a)return void r.logger.debug("megolm session ID "+e+" never shared with device "+n+":"+i.deviceId);const c=await this._olmDevice.getInboundGroupSessionKey(this._roomId,t,e,a);if(!c)return void r.logger.warn(`No inbound session key found for megolm ${e}: not re-sharing keys`);await o.ensureOlmSessionsForDevices(this._olmDevice,this._baseApis,{[n]:[i]});const l={type:"m.forwarded_room_key",content:{algorithm:o.MEGOLM_ALGORITHM,room_id:this._roomId,session_id:e,session_key:c.key,chain_index:c.chain_index,sender_key:t,sender_claimed_ed25519_key:c.sender_claimed_ed25519_key,forwarding_curve25519_key_chain:c.forwarding_curve25519_key_chain}},u={algorithm:o.OLM_ALGORITHM,sender_key:this._olmDevice.deviceCurve25519Key,ciphertext:{}};await o.encryptMessageForDevice(u.ciphertext,this._userId,this._deviceId,this._olmDevice,n,i,l),await this._baseApis.sendToDevice("m.room.encrypted",{[n]:{[i.deviceId]:u}}),r.logger.debug(`Re-shared key for megolm session ${e} with ${n}:${i.deviceId}`)},u.prototype._shareKeyWithDevices=async function(t,e,n,i,r,s,a){const c=await o.ensureOlmSessionsForDevices(this._olmDevice,this._baseApis,i,s,a);this._getDevicesWithoutSessions(c,i,r),await this._shareKeyWithOlmSessions(t,e,n,c)},u.prototype._shareKeyWithOlmSessions=async function(t,e,n,i){const s=this._splitDevices(i);for(let a=0;a<s.length;a++)try{await this._encryptAndSendKeysToDevices(t,e.chain_index,s[a],n),r.logger.log(`Completed megolm keyshare for ${t.sessionId} in ${this._roomId} (slice ${a+1}/${s.length})`)}catch(o){throw r.logger.log(`megolm keyshare for ${t.sessionId} in ${this._roomId} (slice ${a+1}/${s.length}) failed`),o}},u.prototype._notifyFailedOlmDevices=async function(t,e,n){for(const{userId:s,deviceInfo:o}of n)t.markSharedWithDevice(s,o.deviceId,e.chain_index);const i=await this._olmDevice.filterOutNotifiedErrorDevices(n),r={};for(const{userId:s,deviceInfo:o}of i)r[s]=r[s]||{},r[s][o.deviceId]={device:{code:"m.no_olm",reason:c.WITHHELD_MESSAGES["m.no_olm"],deviceInfo:o}};await this._notifyBlockedDevices(t,r)},u.prototype._notifyBlockedDevices=async function(t,e){const n={room_id:this._roomId,session_id:t.sessionId,algorithm:o.MEGOLM_ALGORITHM,sender_key:this._olmDevice.deviceCurve25519Key},i=this._splitDevices(e);for(let o=0;o<i.length;o++)try{await this._sendBlockedNotificationsToDevices(t,i[o],n),r.logger.log(`Completed blacklist notification for ${t.sessionId} in ${this._roomId} (slice ${o+1}/${i.length})`)}catch(s){throw r.logger.log(`blacklist notification for ${t.sessionId} in ${this._roomId} (slice ${o+1}/${i.length}) failed`),s}},u.prototype.prepareToEncrypt=function(t){this.encryptionPreparation||(r.logger.debug("Preparing to encrypt events for "+this._roomId),this.encryptionPreparation=(async()=>{const[e,n]=await this._getDevicesInRoom(t);this._crypto.getGlobalErrorOnUnknownDevices()&&this._removeUnknownDevices(e),await this._ensureOutboundSession(e,n,!0),delete this.encryptionPreparation})())},u.prototype.encryptMessage=async function(t,e,n){if(r.logger.log("Starting to encrypt event for "+this._roomId),this.encryptionPreparation)try{await this.encryptionPreparation}catch(u){}const[i,s]=await this._getDevicesInRoom(t);this._crypto.getGlobalErrorOnUnknownDevices()&&this._checkForUnknownDevices(i);const a=await this._ensureOutboundSession(i,s),c=this._olmDevice.encryptGroupMessage(a.sessionId,JSON.stringify({room_id:this._roomId,type:e,content:n})),l={algorithm:o.MEGOLM_ALGORITHM,sender_key:this._olmDevice.deviceCurve25519Key,ciphertext:c,session_id:a.sessionId,device_id:this._deviceId};return a.useCount++,l},u.prototype.forceDiscardSession=function(){this._setupPromise=this._setupPromise.then(()=>null)},u.prototype._checkForUnknownDevices=function(t){const e={};if(Object.keys(t).forEach(n=>{Object.keys(t[n]).forEach(i=>{const r=t[n][i];r.isUnverified()&&!r.isKnown()&&(e[n]||(e[n]={}),e[n][i]=r)})}),Object.keys(e).length)throw new a.UnknownDeviceError("This room contains unknown devices which have not been verified. We strongly recommend you verify them before continuing.",e)},u.prototype._removeUnknownDevices=function(t){for(const[e,n]of Object.entries(t)){for(const[t,e]of Object.entries(n))e.isUnverified()&&!e.isKnown()&&delete n[t];0===Object.keys(n).length&&delete t[e]}},u.prototype._getDevicesInRoom=async function(t){const e=await t.getEncryptionTargetMembers(),n=s.map(e,(function(t){return t.userId}));let i=this._crypto.getGlobalBlacklistUnverifiedDevices();"boolean"==typeof t.getBlacklistUnverifiedDevices()&&(i=t.getBlacklistUnverifiedDevices());const r=await this._crypto.downloadKeys(n,!1),o={};for(const s in r){if(!r.hasOwnProperty(s))continue;const t=r[s];for(const e in t){if(!t.hasOwnProperty(e))continue;const n=this._crypto.checkDeviceTrust(s,e);if(t[e].isBlocked()||!n.isVerified()&&i){o[s]||(o[s]={});const n=t[e].isBlocked()?{code:"m.blacklisted",reason:c.WITHHELD_MESSAGES["m.blacklisted"]}:{code:"m.unverified",reason:c.WITHHELD_MESSAGES["m.unverified"]};n.deviceInfo=t[e],o[s][e]=n,delete t[e]}}}return[r,o]},s.inherits(h,a.DecryptionAlgorithm);const d={no_olm:"The sender was unable to establish a secure channel.",unknown:"The secure channel with the sender was corrupted."};h.prototype.decryptEvent=async function(t){const e=t.getWireContent();if(!e.sender_key||!e.session_id||!e.ciphertext)throw new a.DecryptionError("MEGOLM_MISSING_FIELDS","Missing fields in input");let n;this._addEventToPendingList(t);try{n=await this._olmDevice.decryptGroupMessage(t.getRoomId(),e.sender_key,e.session_id,e.ciphertext,t.getId(),t.getTs())}catch(r){if("DecryptionError"===r.name)throw r;let n="OLM_DECRYPT_GROUP_MESSAGE_ERROR";throw r&&"OLM.UNKNOWN_MESSAGE_INDEX"===r.message&&(this._requestKeysForEvent(t),n="OLM_UNKNOWN_MESSAGE_INDEX"),new a.DecryptionError(n,r?r.toString():"Unknown Error: Error is undefined",{session:e.sender_key+"|"+e.session_id})}if(null===n){this._requestKeysForEvent(t);const n=await this._olmDevice.sessionMayHaveProblems(e.sender_key,t.getTs()-12e4);if(n){let t=d[n.type]||d.unknown;throw n.fixed&&(t+=" Trying to create a new secure channel and re-requesting the keys."),new a.DecryptionError("MEGOLM_UNKNOWN_INBOUND_SESSION_ID",t,{session:e.sender_key+"|"+e.session_id})}throw new a.DecryptionError("MEGOLM_UNKNOWN_INBOUND_SESSION_ID","The sender's device has not sent us the keys for this message.",{session:e.sender_key+"|"+e.session_id})}this._removeEventFromPendingList(t);const i=JSON.parse(n.result);if(i.room_id!==t.getRoomId())throw new a.DecryptionError("MEGOLM_BAD_ROOM","Message intended for room "+i.room_id);return{clearEvent:i,senderCurve25519Key:n.senderKey,claimedEd25519Key:n.keysClaimed.ed25519,forwardingCurve25519KeyChain:n.forwardingCurve25519KeyChain,untrusted:n.untrusted}},h.prototype._requestKeysForEvent=function(t){const e=t.getWireContent(),n=t.getKeyRequestRecipients(this._userId);this._crypto.requestRoomKey({room_id:t.getRoomId(),algorithm:e.algorithm,sender_key:e.sender_key,session_id:e.session_id},n)},h.prototype._addEventToPendingList=function(t){const e=t.getWireContent(),n=e.sender_key,i=e.session_id;this._pendingEvents[n]||(this._pendingEvents[n]=new Map);const r=this._pendingEvents[n];r.has(i)||r.set(i,new Set),r.get(i).add(t)},h.prototype._removeEventFromPendingList=function(t){const e=t.getWireContent(),n=e.sender_key,i=this._pendingEvents[n],r=i&&i.get(e.session_id);r&&(r.delete(t),0===r.size&&i.delete(n),0===i.size&&delete this._pendingEvents[n])},h.prototype.onRoomKeyEvent=function(t){const e=t.getContent(),n=e.session_id;let i,o=t.getSenderKey(),a=[],c=!1;if(e.room_id&&n&&e.session_key){if(o){if("m.forwarded_room_key"==t.getType()){if(c=!0,a=e.forwarding_curve25519_key_chain,s.isArray(a)||(a=[]),a=a.slice(),a.push(o),o=e.sender_key,!o)return void r.logger.error("forwarded_room_key event is missing sender_key field");const t=e.sender_claimed_ed25519_key;if(!t)return void r.logger.error("forwarded_room_key_event is missing sender_claimed_ed25519_key field");i={ed25519:t}}else i=t.getKeysClaimed();return this._olmDevice.addInboundGroupSession(e.room_id,o,a,n,e.session_key,i,c).then(()=>{this._retryDecryption(o,n).then(t=>{t&&this._crypto.cancelRoomKeyRequest({algorithm:e.algorithm,room_id:e.room_id,session_id:e.session_id,sender_key:o})})}).then(()=>{this._crypto.backupInfo&&this._crypto.backupGroupSession(e.room_id,o,a,e.session_id,e.session_key,i,c).catch(t=>{r.logger.log("Failed to back up megolm session",t)})}).catch(t=>{r.logger.error("Error handling m.room_key_event: "+t)})}r.logger.error("key event has no sender key (not encrypted?)")}else r.logger.error("key event is missing fields")},h.prototype.onRoomKeyWithheldEvent=async function(t){const e=t.getContent(),n=e.sender_key;if("m.no_olm"===e.code){const i=t.getSender();if(r.logger.warn(`${i}:${n} was unable to establish an olm session with us`),await this._olmDevice.getSessionIdForDevice(n))return r.logger.debug("New session already created.  Not creating a new one."),await this._olmDevice.recordSessionProblem(n,"no_olm",!0),void this.retryDecryptionFromSender(n);let s=this._crypto._deviceList.getDeviceByIdentityKey(e.algorithm,n);if(!s&&(await this._crypto.downloadKeys([i],!1),s=this._crypto._deviceList.getDeviceByIdentityKey(e.algorithm,n),!s))return r.logger.info("Couldn't find device for identity key "+n+": not establishing session"),await this._olmDevice.recordSessionProblem(n,"no_olm",!1),void this.retryDecryptionFromSender(n);await o.ensureOlmSessionsForDevices(this._olmDevice,this._baseApis,{[i]:[s]},!1);const a={algorithm:o.OLM_ALGORITHM,sender_key:this._olmDevice.deviceCurve25519Key,ciphertext:{}};await o.encryptMessageForDevice(a.ciphertext,this._userId,this._deviceId,this._olmDevice,i,s,{type:"m.dummy"}),await this._olmDevice.recordSessionProblem(n,"no_olm",!0),this.retryDecryptionFromSender(n),await this._baseApis.sendToDevice("m.room.encrypted",{[i]:{[s.deviceId]:a}})}else await this._olmDevice.addInboundGroupSessionWithheld(e.room_id,n,e.session_id,e.code,e.reason)},h.prototype.hasKeysForKeyRequest=function(t){const e=t.requestBody;return this._olmDevice.hasInboundSessionKeys(e.room_id,e.sender_key,e.session_id)},h.prototype.shareKeysWithDevice=function(t){const e=t.userId,n=t.deviceId,i=this._crypto.getStoredDevice(e,n),s=t.requestBody;this.olmlib.ensureOlmSessionsForDevices(this._olmDevice,this._baseApis,{[e]:[i]}).then(t=>t[e][n].sessionId?(r.logger.log("sharing keys for session "+s.sender_key+"|"+s.session_id+" with device "+e+":"+n),this._buildKeyForwardingMessage(s.room_id,s.sender_key,s.session_id)):null).then(t=>{const r={algorithm:o.OLM_ALGORITHM,sender_key:this._olmDevice.deviceCurve25519Key,ciphertext:{}};return this.olmlib.encryptMessageForDevice(r.ciphertext,this._userId,this._deviceId,this._olmDevice,e,i,t).then(()=>this._baseApis.sendToDevice("m.room.encrypted",{[e]:{[n]:r}}))})},h.prototype._buildKeyForwardingMessage=async function(t,e,n){const i=await this._olmDevice.getInboundGroupSessionKey(t,e,n);return{type:"m.forwarded_room_key",content:{algorithm:o.MEGOLM_ALGORITHM,room_id:t,sender_key:e,sender_claimed_ed25519_key:i.sender_claimed_ed25519_key,session_id:n,session_key:i.key,chain_index:i.chain_index,forwarding_curve25519_key_chain:i.forwarding_curve25519_key_chain}}},h.prototype.importRoomKey=function(t,e={}){return this._olmDevice.addInboundGroupSession(t.room_id,t.sender_key,t.forwarding_curve25519_key_chain,t.session_id,t.session_key,t.sender_claimed_keys,!0,e.untrusted?{untrusted:e.untrusted}:{}).then(()=>{this._crypto.backupInfo&&"backup"!==e.source&&this._crypto.backupGroupSession(t.room_id,t.sender_key,t.forwarding_curve25519_key_chain,t.session_id,t.session_key,t.sender_claimed_keys,!0).catch(t=>{r.logger.log("Failed to back up megolm session",t)}),this._retryDecryption(t.sender_key,t.session_id)})},h.prototype._retryDecryption=async function(t,e){const n=this._pendingEvents[t];if(!n)return!0;const i=n.get(e);return!i||(r.logger.debug("Retrying decryption on events",[...i]),await Promise.all([...i].map(async t=>{try{await t.attemptDecryption(this._crypto,!0)}catch(e){}})),!(this._pendingEvents[t]||{})[e])},h.prototype.retryDecryptionFromSender=async function(t){const e=this._pendingEvents[t];return!e||(delete this._pendingEvents[t],await Promise.all([...e].map(async([t,e])=>{await Promise.all([...e].map(async t=>{try{await t.attemptDecryption(this._crypto)}catch(e){}}))})),!this._pendingEvents[t])},(0,a.registerAlgorithm)(o.MEGOLM_ALGORITHM,u,h)},tW1z:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ToDeviceRequests=e.ToDeviceChannel=void 0;var i=n("PwFS"),r=n("PrRn"),s=n("3afC"),o=n("VEe5"),a=n("7UXS");class c{constructor(t,e,n,i=null,r=null){this._client=t,this.userId=e,this._devices=n,this.transactionId=i,this._deviceId=r}isToDevices(t){if(t.length===this._devices.length){for(const e of t)if(!this._devices.find(t=>t.deviceId===e.deviceId))return!1;return!0}return!1}get deviceId(){return this._deviceId}static getEventType(t){return t.getType()}static getTransactionId(t){const e=t.getContent();return e&&e.transaction_id}static canCreateRequest(t){return t===s.REQUEST_TYPE||t===s.START_TYPE}static validateEvent(t,e){if(t.isCancelled())return r.logger.warn("Ignoring flagged verification request from "+t.getSender()),!1;const n=t.getContent();if(!n)return r.logger.warn("ToDeviceChannel.validateEvent: invalid: no content"),!1;if(!n.transaction_id)return r.logger.warn("ToDeviceChannel.validateEvent: invalid: no transaction_id"),!1;const i=t.getType();if(i===s.REQUEST_TYPE){if(!Number.isFinite(n.timestamp))return r.logger.warn("ToDeviceChannel.validateEvent: invalid: no timestamp"),!1;if(t.getSender()===e.getUserId()&&n.from_device==e.getDeviceId())return r.logger.warn("ToDeviceChannel.validateEvent: invalid: from own device"),!1}return s.VerificationRequest.validateEvent(i,t,e)}getTimestamp(t){const e=t.getContent();return e&&e.timestamp}async handleEvent(t,e,n){const i=t.getType(),r=t.getContent();if(i===s.REQUEST_TYPE||i===s.READY_TYPE||i===s.START_TYPE){this.transactionId||(this.transactionId=r.transaction_id);const t=r.from_device;if(!this._deviceId&&this._devices.includes(t)&&(this._deviceId=t),!this._deviceId||this._deviceId!==t){const e=this.completeContent((0,o.errorFromEvent)((0,o.newUnexpectedMessageError)()));return this._sendToDevices(s.CANCEL_TYPE,e,[t])}}const a=e.phase===s.PHASE_STARTED||e.phase===s.PHASE_READY;if(await e.handleEvent(t.getType(),t,n,!1,!1),(i===s.START_TYPE||i===s.READY_TYPE)&&!a&&(e.phase===s.PHASE_STARTED||e.phase===s.PHASE_READY)&&this._deviceId){const t=this._devices.filter(t=>t!==this._deviceId);if(t.length){const e=this.completeContent({code:"m.accepted",reason:"Verification request accepted by another device"});await this._sendToDevices(s.CANCEL_TYPE,e,t)}}}completedContentFromEvent(t){return t.getContent()}completeContent(t,e){return e=Object.assign({},e),this.transactionId&&(e.transaction_id=this.transactionId),t!==s.REQUEST_TYPE&&t!==s.READY_TYPE&&t!==s.START_TYPE||(e.from_device=this._client.getDeviceId()),t===s.REQUEST_TYPE&&(e.timestamp=Date.now()),e}send(t,e={}){t!==s.REQUEST_TYPE&&t!==s.START_TYPE||this.transactionId||(this.transactionId=c.makeTransactionId());const n=this.completeContent(t,e);return this.sendCompleted(t,n)}async sendCompleted(t,e){let n;n=t===s.REQUEST_TYPE?await this._sendToDevices(t,e,this._devices):await this._sendToDevices(t,e,[this._deviceId]);const i=new a.MatrixEvent({sender:this._client.getUserId(),content:e,type:t});return await this._request.handleEvent(t,i,!0,!0,!0),n}_sendToDevices(t,e,n){if(n.length){const i={};for(const t of n)i[t]=e;return this._client.sendToDevice(t,{[this.userId]:i})}return Promise.resolve()}static makeTransactionId(){return(0,i.randomString)(32)}}e.ToDeviceChannel=c,e.ToDeviceRequests=class{constructor(){this._requestsByUserId=new Map}getRequest(t){return this.getRequestBySenderAndTxnId(t.getSender(),c.getTransactionId(t))}getRequestByChannel(t){return this.getRequestBySenderAndTxnId(t.userId,t.transactionId)}getRequestBySenderAndTxnId(t,e){const n=this._requestsByUserId.get(t);if(n)return n.get(e)}setRequest(t,e){this.setRequestBySenderAndTxnId(t.getSender(),c.getTransactionId(t),e)}setRequestByChannel(t,e){this.setRequestBySenderAndTxnId(t.userId,t.transactionId,e)}setRequestBySenderAndTxnId(t,e,n){let i=this._requestsByUserId.get(t);i||(i=new Map,this._requestsByUserId.set(t,i)),i.set(e,n)}removeRequest(t){const e=t.getSender(),n=this._requestsByUserId.get(e);n&&(n.delete(c.getTransactionId(t)),0===n.size&&this._requestsByUserId.delete(e))}findRequestInProgress(t,e){const n=this._requestsByUserId.get(t);if(n)for(const i of n.values())if(i.pending&&i.channel.isToDevices(e))return i}getRequestsInProgress(t){const e=this._requestsByUserId.get(t);return e?Array.from(e.values()).filter(t=>t.pending):[]}}},tXbD:function(t,e,n){"use strict";var i=n("284h");Object.defineProperty(e,"__esModule",{value:!0}),e.SearchResult=o;var r=i(n("t+e4")),s=n("FyV3");function o(t,e){this.rank=t,this.context=e}o.fromJson=function(t,e){const n=t.context||{},i=n.events_before||[],a=n.events_after||[],c=new s.EventContext(e(t.result));return c.setPaginateToken(n.start,!0),c.addEvents(r.map(i,e),!0),c.addEvents(r.map(a,e),!1),c.setPaginateToken(n.end,!1),new o(t.rank,c)}},tjlA:function(t,e,n){"use strict";var i=n("H7XF"),r=n("kVK+"),s=n("49sm");function o(){return c.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function a(t,e){if(o()<e)throw new RangeError("Invalid typed array length");return c.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(e)).__proto__=c.prototype:(null===t&&(t=new c(e)),t.length=e),t}function c(t,e,n){if(!(c.TYPED_ARRAY_SUPPORT||this instanceof c))return new c(t,e,n);if("number"==typeof t){if("string"==typeof e)throw new Error("If encoding is specified then the first argument must be a string");return h(this,t)}return l(this,t,e,n)}function l(t,e,n,i){if("number"==typeof e)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer?function(t,e,n,i){if(n<0||e.byteLength<n)throw new RangeError("'offset' is out of bounds");if(e.byteLength<n+(i||0))throw new RangeError("'length' is out of bounds");return e=void 0===n&&void 0===i?new Uint8Array(e):void 0===i?new Uint8Array(e,n):new Uint8Array(e,n,i),c.TYPED_ARRAY_SUPPORT?(t=e).__proto__=c.prototype:t=d(t,e),t}(t,e,n,i):"string"==typeof e?function(t,e,n){if("string"==typeof n&&""!==n||(n="utf8"),!c.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var i=0|m(e,n),r=(t=a(t,i)).write(e,n);return r!==i&&(t=t.slice(0,r)),t}(t,e,n):function(t,e){if(c.isBuffer(e)){var n=0|p(e.length);return 0===(t=a(t,n)).length||e.copy(t,0,0,n),t}if(e){if("undefined"!=typeof ArrayBuffer&&e.buffer instanceof ArrayBuffer||"length"in e)return"number"!=typeof e.length||(i=e.length)!=i?a(t,0):d(t,e);if("Buffer"===e.type&&s(e.data))return d(t,e.data)}var i;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(t,e)}function u(t){if("number"!=typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function h(t,e){if(u(e),t=a(t,e<0?0:0|p(e)),!c.TYPED_ARRAY_SUPPORT)for(var n=0;n<e;++n)t[n]=0;return t}function d(t,e){var n=e.length<0?0:0|p(e.length);t=a(t,n);for(var i=0;i<n;i+=1)t[i]=255&e[i];return t}function p(t){if(t>=o())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+o().toString(16)+" bytes");return 0|t}function m(t,e){if(c.isBuffer(t))return t.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!=typeof t&&(t=""+t);var n=t.length;if(0===n)return 0;for(var i=!1;;)switch(e){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return B(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return j(t).length;default:if(i)return B(t).length;e=(""+e).toLowerCase(),i=!0}}function f(t,e,n){var i=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return R(this,e,n);case"utf8":case"utf-8":return x(this,e,n);case"ascii":return T(this,e,n);case"latin1":case"binary":return I(this,e,n);case"base64":return C(this,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return O(this,e,n);default:if(i)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),i=!0}}function g(t,e,n){var i=t[e];t[e]=t[n],t[n]=i}function _(t,e,n,i,r){if(0===t.length)return-1;if("string"==typeof n?(i=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=r?0:t.length-1),n<0&&(n=t.length+n),n>=t.length){if(r)return-1;n=t.length-1}else if(n<0){if(!r)return-1;n=0}if("string"==typeof e&&(e=c.from(e,i)),c.isBuffer(e))return 0===e.length?-1:y(t,e,n,i,r);if("number"==typeof e)return e&=255,c.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?r?Uint8Array.prototype.indexOf.call(t,e,n):Uint8Array.prototype.lastIndexOf.call(t,e,n):y(t,[e],n,i,r);throw new TypeError("val must be string, number or Buffer")}function y(t,e,n,i,r){var s,o=1,a=t.length,c=e.length;if(void 0!==i&&("ucs2"===(i=String(i).toLowerCase())||"ucs-2"===i||"utf16le"===i||"utf-16le"===i)){if(t.length<2||e.length<2)return-1;o=2,a/=2,c/=2,n/=2}function l(t,e){return 1===o?t[e]:t.readUInt16BE(e*o)}if(r){var u=-1;for(s=n;s<a;s++)if(l(t,s)===l(e,-1===u?0:s-u)){if(-1===u&&(u=s),s-u+1===c)return u*o}else-1!==u&&(s-=s-u),u=-1}else for(n+c>a&&(n=a-c),s=n;s>=0;s--){for(var h=!0,d=0;d<c;d++)if(l(t,s+d)!==l(e,d)){h=!1;break}if(h)return s}return-1}function v(t,e,n,i){n=Number(n)||0;var r=t.length-n;i?(i=Number(i))>r&&(i=r):i=r;var s=e.length;if(s%2!=0)throw new TypeError("Invalid hex string");i>s/2&&(i=s/2);for(var o=0;o<i;++o){var a=parseInt(e.substr(2*o,2),16);if(isNaN(a))return o;t[n+o]=a}return o}function b(t,e,n,i){return V(B(e,t.length-n),t,n,i)}function w(t,e,n,i){return V(function(t){for(var e=[],n=0;n<t.length;++n)e.push(255&t.charCodeAt(n));return e}(e),t,n,i)}function S(t,e,n,i){return w(t,e,n,i)}function E(t,e,n,i){return V(j(e),t,n,i)}function k(t,e,n,i){return V(function(t,e){for(var n,i,r=[],s=0;s<t.length&&!((e-=2)<0);++s)i=(n=t.charCodeAt(s))>>8,r.push(n%256),r.push(i);return r}(e,t.length-n),t,n,i)}function C(t,e,n){return i.fromByteArray(0===e&&n===t.length?t:t.slice(e,n))}function x(t,e,n){n=Math.min(t.length,n);for(var i=[],r=e;r<n;){var s,o,a,c,l=t[r],u=null,h=l>239?4:l>223?3:l>191?2:1;if(r+h<=n)switch(h){case 1:l<128&&(u=l);break;case 2:128==(192&(s=t[r+1]))&&(c=(31&l)<<6|63&s)>127&&(u=c);break;case 3:o=t[r+2],128==(192&(s=t[r+1]))&&128==(192&o)&&(c=(15&l)<<12|(63&s)<<6|63&o)>2047&&(c<55296||c>57343)&&(u=c);break;case 4:o=t[r+2],a=t[r+3],128==(192&(s=t[r+1]))&&128==(192&o)&&128==(192&a)&&(c=(15&l)<<18|(63&s)<<12|(63&o)<<6|63&a)>65535&&c<1114112&&(u=c)}null===u?(u=65533,h=1):u>65535&&(i.push((u-=65536)>>>10&1023|55296),u=56320|1023&u),i.push(u),r+=h}return function(t){var e=t.length;if(e<=4096)return String.fromCharCode.apply(String,t);for(var n="",i=0;i<e;)n+=String.fromCharCode.apply(String,t.slice(i,i+=4096));return n}(i)}function T(t,e,n){var i="";n=Math.min(t.length,n);for(var r=e;r<n;++r)i+=String.fromCharCode(127&t[r]);return i}function I(t,e,n){var i="";n=Math.min(t.length,n);for(var r=e;r<n;++r)i+=String.fromCharCode(t[r]);return i}function R(t,e,n){var i,r=t.length;(!e||e<0)&&(e=0),(!n||n<0||n>r)&&(n=r);for(var s="",o=e;o<n;++o)s+=(i=t[o])<16?"0"+i.toString(16):i.toString(16);return s}function O(t,e,n){for(var i=t.slice(e,n),r="",s=0;s<i.length;s+=2)r+=String.fromCharCode(i[s]+256*i[s+1]);return r}function A(t,e,n){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>n)throw new RangeError("Trying to access beyond buffer length")}function D(t,e,n,i,r,s){if(!c.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>r||e<s)throw new RangeError('"value" argument is out of bounds');if(n+i>t.length)throw new RangeError("Index out of range")}function P(t,e,n,i){e<0&&(e=65535+e+1);for(var r=0,s=Math.min(t.length-n,2);r<s;++r)t[n+r]=(e&255<<8*(i?r:1-r))>>>8*(i?r:1-r)}function M(t,e,n,i){e<0&&(e=4294967295+e+1);for(var r=0,s=Math.min(t.length-n,4);r<s;++r)t[n+r]=e>>>8*(i?r:3-r)&255}function N(t,e,n,i,r,s){if(n+i>t.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function L(t,e,n,i,s){return s||N(t,0,n,4),r.write(t,e,n,i,23,4),n+4}function F(t,e,n,i,s){return s||N(t,0,n,8),r.write(t,e,n,i,52,8),n+8}e.Buffer=c,e.SlowBuffer=function(t){return+t!=t&&(t=0),c.alloc(+t)},e.INSPECT_MAX_BYTES=50,c.TYPED_ARRAY_SUPPORT=void 0!==global.TYPED_ARRAY_SUPPORT?global.TYPED_ARRAY_SUPPORT:function(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()&&"function"==typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(e){return!1}}(),e.kMaxLength=o(),c.poolSize=8192,c._augment=function(t){return t.__proto__=c.prototype,t},c.from=function(t,e,n){return l(null,t,e,n)},c.TYPED_ARRAY_SUPPORT&&(c.prototype.__proto__=Uint8Array.prototype,c.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&c[Symbol.species]===c&&Object.defineProperty(c,Symbol.species,{value:null,configurable:!0})),c.alloc=function(t,e,n){return function(t,e,n,i){return u(e),e<=0?a(null,e):void 0!==n?"string"==typeof i?a(null,e).fill(n,i):a(null,e).fill(n):a(null,e)}(0,t,e,n)},c.allocUnsafe=function(t){return h(null,t)},c.allocUnsafeSlow=function(t){return h(null,t)},c.isBuffer=function(t){return!(null==t||!t._isBuffer)},c.compare=function(t,e){if(!c.isBuffer(t)||!c.isBuffer(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var n=t.length,i=e.length,r=0,s=Math.min(n,i);r<s;++r)if(t[r]!==e[r]){n=t[r],i=e[r];break}return n<i?-1:i<n?1:0},c.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},c.concat=function(t,e){if(!s(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return c.alloc(0);var n;if(void 0===e)for(e=0,n=0;n<t.length;++n)e+=t[n].length;var i=c.allocUnsafe(e),r=0;for(n=0;n<t.length;++n){var o=t[n];if(!c.isBuffer(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(i,r),r+=o.length}return i},c.byteLength=m,c.prototype._isBuffer=!0,c.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)g(this,e,e+1);return this},c.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)g(this,e,e+3),g(this,e+1,e+2);return this},c.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)g(this,e,e+7),g(this,e+1,e+6),g(this,e+2,e+5),g(this,e+3,e+4);return this},c.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?x(this,0,t):f.apply(this,arguments)},c.prototype.equals=function(t){if(!c.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===c.compare(this,t)},c.prototype.inspect=function(){var t="",n=e.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(t+=" ... ")),"<Buffer "+t+">"},c.prototype.compare=function(t,e,n,i,r){if(!c.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(void 0===e&&(e=0),void 0===n&&(n=t?t.length:0),void 0===i&&(i=0),void 0===r&&(r=this.length),e<0||n>t.length||i<0||r>this.length)throw new RangeError("out of range index");if(i>=r&&e>=n)return 0;if(i>=r)return-1;if(e>=n)return 1;if(this===t)return 0;for(var s=(r>>>=0)-(i>>>=0),o=(n>>>=0)-(e>>>=0),a=Math.min(s,o),l=this.slice(i,r),u=t.slice(e,n),h=0;h<a;++h)if(l[h]!==u[h]){s=l[h],o=u[h];break}return s<o?-1:o<s?1:0},c.prototype.includes=function(t,e,n){return-1!==this.indexOf(t,e,n)},c.prototype.indexOf=function(t,e,n){return _(this,t,e,n,!0)},c.prototype.lastIndexOf=function(t,e,n){return _(this,t,e,n,!1)},c.prototype.write=function(t,e,n,i){if(void 0===e)i="utf8",n=this.length,e=0;else if(void 0===n&&"string"==typeof e)i=e,n=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e|=0,isFinite(n)?(n|=0,void 0===i&&(i="utf8")):(i=n,n=void 0)}var r=this.length-e;if((void 0===n||n>r)&&(n=r),t.length>0&&(n<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");i||(i="utf8");for(var s=!1;;)switch(i){case"hex":return v(this,t,e,n);case"utf8":case"utf-8":return b(this,t,e,n);case"ascii":return w(this,t,e,n);case"latin1":case"binary":return S(this,t,e,n);case"base64":return E(this,t,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return k(this,t,e,n);default:if(s)throw new TypeError("Unknown encoding: "+i);i=(""+i).toLowerCase(),s=!0}},c.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},c.prototype.slice=function(t,e){var n,i=this.length;if((t=~~t)<0?(t+=i)<0&&(t=0):t>i&&(t=i),(e=void 0===e?i:~~e)<0?(e+=i)<0&&(e=0):e>i&&(e=i),e<t&&(e=t),c.TYPED_ARRAY_SUPPORT)(n=this.subarray(t,e)).__proto__=c.prototype;else{var r=e-t;n=new c(r,void 0);for(var s=0;s<r;++s)n[s]=this[s+t]}return n},c.prototype.readUIntLE=function(t,e,n){t|=0,e|=0,n||A(t,e,this.length);for(var i=this[t],r=1,s=0;++s<e&&(r*=256);)i+=this[t+s]*r;return i},c.prototype.readUIntBE=function(t,e,n){t|=0,e|=0,n||A(t,e,this.length);for(var i=this[t+--e],r=1;e>0&&(r*=256);)i+=this[t+--e]*r;return i},c.prototype.readUInt8=function(t,e){return e||A(t,1,this.length),this[t]},c.prototype.readUInt16LE=function(t,e){return e||A(t,2,this.length),this[t]|this[t+1]<<8},c.prototype.readUInt16BE=function(t,e){return e||A(t,2,this.length),this[t]<<8|this[t+1]},c.prototype.readUInt32LE=function(t,e){return e||A(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},c.prototype.readUInt32BE=function(t,e){return e||A(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},c.prototype.readIntLE=function(t,e,n){t|=0,e|=0,n||A(t,e,this.length);for(var i=this[t],r=1,s=0;++s<e&&(r*=256);)i+=this[t+s]*r;return i>=(r*=128)&&(i-=Math.pow(2,8*e)),i},c.prototype.readIntBE=function(t,e,n){t|=0,e|=0,n||A(t,e,this.length);for(var i=e,r=1,s=this[t+--i];i>0&&(r*=256);)s+=this[t+--i]*r;return s>=(r*=128)&&(s-=Math.pow(2,8*e)),s},c.prototype.readInt8=function(t,e){return e||A(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},c.prototype.readInt16LE=function(t,e){e||A(t,2,this.length);var n=this[t]|this[t+1]<<8;return 32768&n?4294901760|n:n},c.prototype.readInt16BE=function(t,e){e||A(t,2,this.length);var n=this[t+1]|this[t]<<8;return 32768&n?4294901760|n:n},c.prototype.readInt32LE=function(t,e){return e||A(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},c.prototype.readInt32BE=function(t,e){return e||A(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},c.prototype.readFloatLE=function(t,e){return e||A(t,4,this.length),r.read(this,t,!0,23,4)},c.prototype.readFloatBE=function(t,e){return e||A(t,4,this.length),r.read(this,t,!1,23,4)},c.prototype.readDoubleLE=function(t,e){return e||A(t,8,this.length),r.read(this,t,!0,52,8)},c.prototype.readDoubleBE=function(t,e){return e||A(t,8,this.length),r.read(this,t,!1,52,8)},c.prototype.writeUIntLE=function(t,e,n,i){t=+t,e|=0,n|=0,i||D(this,t,e,n,Math.pow(2,8*n)-1,0);var r=1,s=0;for(this[e]=255&t;++s<n&&(r*=256);)this[e+s]=t/r&255;return e+n},c.prototype.writeUIntBE=function(t,e,n,i){t=+t,e|=0,n|=0,i||D(this,t,e,n,Math.pow(2,8*n)-1,0);var r=n-1,s=1;for(this[e+r]=255&t;--r>=0&&(s*=256);)this[e+r]=t/s&255;return e+n},c.prototype.writeUInt8=function(t,e,n){return t=+t,e|=0,n||D(this,t,e,1,255,0),c.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=255&t,e+1},c.prototype.writeUInt16LE=function(t,e,n){return t=+t,e|=0,n||D(this,t,e,2,65535,0),c.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):P(this,t,e,!0),e+2},c.prototype.writeUInt16BE=function(t,e,n){return t=+t,e|=0,n||D(this,t,e,2,65535,0),c.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):P(this,t,e,!1),e+2},c.prototype.writeUInt32LE=function(t,e,n){return t=+t,e|=0,n||D(this,t,e,4,4294967295,0),c.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t):M(this,t,e,!0),e+4},c.prototype.writeUInt32BE=function(t,e,n){return t=+t,e|=0,n||D(this,t,e,4,4294967295,0),c.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):M(this,t,e,!1),e+4},c.prototype.writeIntLE=function(t,e,n,i){if(t=+t,e|=0,!i){var r=Math.pow(2,8*n-1);D(this,t,e,n,r-1,-r)}var s=0,o=1,a=0;for(this[e]=255&t;++s<n&&(o*=256);)t<0&&0===a&&0!==this[e+s-1]&&(a=1),this[e+s]=(t/o>>0)-a&255;return e+n},c.prototype.writeIntBE=function(t,e,n,i){if(t=+t,e|=0,!i){var r=Math.pow(2,8*n-1);D(this,t,e,n,r-1,-r)}var s=n-1,o=1,a=0;for(this[e+s]=255&t;--s>=0&&(o*=256);)t<0&&0===a&&0!==this[e+s+1]&&(a=1),this[e+s]=(t/o>>0)-a&255;return e+n},c.prototype.writeInt8=function(t,e,n){return t=+t,e|=0,n||D(this,t,e,1,127,-128),c.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[e]=255&t,e+1},c.prototype.writeInt16LE=function(t,e,n){return t=+t,e|=0,n||D(this,t,e,2,32767,-32768),c.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):P(this,t,e,!0),e+2},c.prototype.writeInt16BE=function(t,e,n){return t=+t,e|=0,n||D(this,t,e,2,32767,-32768),c.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):P(this,t,e,!1),e+2},c.prototype.writeInt32LE=function(t,e,n){return t=+t,e|=0,n||D(this,t,e,4,2147483647,-2147483648),c.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):M(this,t,e,!0),e+4},c.prototype.writeInt32BE=function(t,e,n){return t=+t,e|=0,n||D(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),c.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):M(this,t,e,!1),e+4},c.prototype.writeFloatLE=function(t,e,n){return L(this,t,e,!0,n)},c.prototype.writeFloatBE=function(t,e,n){return L(this,t,e,!1,n)},c.prototype.writeDoubleLE=function(t,e,n){return F(this,t,e,!0,n)},c.prototype.writeDoubleBE=function(t,e,n){return F(this,t,e,!1,n)},c.prototype.copy=function(t,e,n,i){if(n||(n=0),i||0===i||(i=this.length),e>=t.length&&(e=t.length),e||(e=0),i>0&&i<n&&(i=n),i===n)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(i<0)throw new RangeError("sourceEnd out of bounds");i>this.length&&(i=this.length),t.length-e<i-n&&(i=t.length-e+n);var r,s=i-n;if(this===t&&n<e&&e<i)for(r=s-1;r>=0;--r)t[r+e]=this[r+n];else if(s<1e3||!c.TYPED_ARRAY_SUPPORT)for(r=0;r<s;++r)t[r+e]=this[r+n];else Uint8Array.prototype.set.call(t,this.subarray(n,n+s),e);return s},c.prototype.fill=function(t,e,n,i){if("string"==typeof t){if("string"==typeof e?(i=e,e=0,n=this.length):"string"==typeof n&&(i=n,n=this.length),1===t.length){var r=t.charCodeAt(0);r<256&&(t=r)}if(void 0!==i&&"string"!=typeof i)throw new TypeError("encoding must be a string");if("string"==typeof i&&!c.isEncoding(i))throw new TypeError("Unknown encoding: "+i)}else"number"==typeof t&&(t&=255);if(e<0||this.length<e||this.length<n)throw new RangeError("Out of range index");if(n<=e)return this;var s;if(e>>>=0,n=void 0===n?this.length:n>>>0,t||(t=0),"number"==typeof t)for(s=e;s<n;++s)this[s]=t;else{var o=c.isBuffer(t)?t:B(new c(t,i).toString()),a=o.length;for(s=0;s<n-e;++s)this[s+e]=o[s%a]}return this};var U=/[^+\/0-9A-Za-z-_]/g;function B(t,e){var n;e=e||1/0;for(var i=t.length,r=null,s=[],o=0;o<i;++o){if((n=t.charCodeAt(o))>55295&&n<57344){if(!r){if(n>56319){(e-=3)>-1&&s.push(239,191,189);continue}if(o+1===i){(e-=3)>-1&&s.push(239,191,189);continue}r=n;continue}if(n<56320){(e-=3)>-1&&s.push(239,191,189),r=n;continue}n=65536+(r-55296<<10|n-56320)}else r&&(e-=3)>-1&&s.push(239,191,189);if(r=null,n<128){if((e-=1)<0)break;s.push(n)}else if(n<2048){if((e-=2)<0)break;s.push(n>>6|192,63&n|128)}else if(n<65536){if((e-=3)<0)break;s.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;s.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return s}function j(t){return i.toByteArray(function(t){if((t=function(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}(t).replace(U,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function V(t,e,n,i){for(var r=0;r<i&&!(r+n>=e.length||r>=t.length);++r)e[r+n]=t[r];return r}},tyrX:function(t,e,n){"use strict";var i=n("284h");Object.defineProperty(e,"__esModule",{value:!0}),e.Room=g;var r=n("+qE3"),s=n("ouil"),o=n("tyto"),a=n("JOJy"),c=i(n("t+e4")),l=n("7UXS"),u=n("vR9v"),h=n("Dr/U"),d=n("PrRn"),p=n("7/Kr");const m=["1","2","3","4","5"];function f(t,e,n){const i={content:{},type:"m.receipt",room_id:e.getRoomId()};return i.content[e.getId()]={},i.content[e.getId()][n]={},i.content[e.getId()][n][t]={ts:e.getTs()},new l.MatrixEvent(i)}function g(t,e,n,i){if((i=i||{}).pendingEventOrdering=i.pendingEventOrdering||"chronological",this.setMaxListeners(100),this.reEmitter=new p.ReEmitter(this),-1===["chronological","detached"].indexOf(i.pendingEventOrdering))throw new Error("opts.pendingEventOrdering MUST be either 'chronological' or 'detached'. Got: '"+i.pendingEventOrdering+"'");this.myUserId=n,this.roomId=t,this.name=t,this.tags={},this.accountData={},this.summary=null,this.storageToken=i.storageToken,this._opts=i,this._txnToEvent={},this._receipts={},this._receiptCacheByEventId={},this._realReceipts={},this._notificationCounts={},this._timelineSets=[new s.EventTimelineSet(this,i)],this.reEmitter.reEmit(this.getUnfilteredTimelineSet(),["Room.timeline","Room.timelineReset"]),this._fixUpLegacyTimelineFields(),this._filteredTimelineSets={},"detached"==this._opts.pendingEventOrdering&&(this._pendingEventList=[]),this._blacklistUnverifiedDevices=null,this._selfMembership=null,this._summaryHeroes=null,this._client=e,this._membersPromise=this._opts.lazyLoadMembers?null:Promise.resolve()}c.inherits(g,r.EventEmitter),g.prototype.getVersion=function(){const t=this.currentState.getStateEvents("m.room.create","");if(!t)return d.logger.warn("Room "+this.roomId+" does not have an m.room.create event"),"1";const e=t.getContent().room_version;return void 0===e?"1":e},g.prototype.shouldUpgradeToVersion=function(){return m.includes(this.getVersion())?null:"5"},g.prototype.getRecommendedVersion=async function(){let t=(await this._client.getCapabilities())["m.room_versions"];if(!t){t={default:"5",available:{}};for(const e of m)t.available[e]="stable"}let e=this._checkVersionAgainstCapability(t);if(e.urgent&&e.needsUpgrade){if(d.logger.warn("Refreshing room version capability because the server looks to be supporting a newer room version we don't know about."),t=(await this._client.getCapabilities(!0))["m.room_versions"],!t)return d.logger.warn("No room version capability - assuming upgrade required."),e;e=this._checkVersionAgainstCapability(t)}return e},g.prototype._checkVersionAgainstCapability=function(t){const e=this.getVersion();d.logger.log(`[${this.roomId}] Current version: ${e}`),d.logger.log(`[${this.roomId}] Version capability: `,t);const n={version:e,needsUpgrade:!1,urgent:!1};return e===t.default||Object.keys(t.available).filter(e=>"stable"===t.available[e]).includes(e)||(n.version=t.default,n.needsUpgrade=!0,n.urgent=!!this.getVersion().match(/^[0-9]+[0-9.]*$/g),d.logger.warn(n.urgent?"URGENT upgrade required on "+this.roomId:"Non-urgent upgrade required on "+this.roomId)),n},g.prototype.userMayUpgradeRoom=function(t){return this.currentState.maySendStateEvent("m.room.tombstone",t)},g.prototype.getPendingEvents=function(){if("detached"!==this._opts.pendingEventOrdering)throw new Error("Cannot call getPendingEvents with pendingEventOrdering == "+this._opts.pendingEventOrdering);return this._pendingEventList},g.prototype.hasPendingEvent=function(t){if("detached"!==this._opts.pendingEventOrdering)throw new Error("Cannot call hasPendingEvent with pendingEventOrdering == "+this._opts.pendingEventOrdering);return this._pendingEventList.some(e=>e.getId()===t)},g.prototype.getLiveTimeline=function(){return this.getUnfilteredTimelineSet().getLiveTimeline()},g.prototype.getLastActiveTimestamp=function(){const t=this.getLiveTimeline().getEvents();return t.length?t[t.length-1].getTs():Number.MIN_SAFE_INTEGER},g.prototype.getMyMembership=function(){return this._selfMembership},g.prototype.getDMInviter=function(){if(this.myUserId){const t=this.getMember(this.myUserId);if(t)return t.getDMInviter()}if("invite"===this._selfMembership&&2==this.getInvitedAndJoinedMemberCount()&&this._summaryHeroes.length)return this._summaryHeroes[0]},g.prototype.guessDMUserId=function(){const t=this.getMember(this.myUserId);if(t){const e=t.getDMInviter();if(e)return e}if(Array.isArray(this._summaryHeroes)&&this._summaryHeroes.length)return this._summaryHeroes[0];const e=this.currentState.getMembers().find(t=>t.userId!==this.myUserId);return e?e.userId:this.myUserId},g.prototype.getAvatarFallbackMember=function(){if(this.getInvitedAndJoinedMemberCount()>2)return;const t=Array.isArray(this._summaryHeroes)&&this._summaryHeroes.length;if(t){const t=this._summaryHeroes.map(t=>this.getMember(t)).find(t=>!!t);if(t)return t}const e=this.currentState.getMembers();if(e.length<=2){const t=e.find(t=>t.userId!==this.myUserId);if(t)return t}if(t){const t=this._summaryHeroes.map(t=>this._client.getUser(t)).find(t=>!!t);if(t){const e=new u.RoomMember(this.roomId,t.userId);return e.user=t,e}}},g.prototype.updateMyMembership=function(t){const e=this._selfMembership;this._selfMembership=t,e!==t&&("leave"===t&&this._cleanupAfterLeaving(),this.emit("Room.myMembership",this,t,e))},g.prototype._loadMembersFromServer=async function(){const t=this._client.store.getSyncToken(),e=c.encodeParams({not_membership:"leave",at:t}),n=c.encodeUri("/rooms/$roomId/members?"+e,{$roomId:this.roomId}),i=this._client._http;return(await i.authedRequest(void 0,"GET",n)).chunk},g.prototype._loadMembers=async function(){let t=!1,e=await this._client.store.getOutOfBandMembers(this.roomId);return null===e&&(t=!0,e=await this._loadMembersFromServer(),d.logger.log(`LL: got ${e.length} members from server for room `+this.roomId)),{memberEvents:e.map(this._client.getEventMapper()),fromServer:t}},g.prototype.loadMembersIfNeeded=function(){if(this._membersPromise)return this._membersPromise;this.currentState.markOutOfBandMembersStarted();const t=this._loadMembers().then(t=>(this.currentState.setOutOfBandMembers(t.memberEvents),this._client.isCryptoEnabled()&&this._client.isRoomEncrypted(this.roomId)&&this._client._crypto.trackRoomDevices(this.roomId),t.fromServer)).catch(t=>{throw this._membersPromise=null,this.currentState.markOutOfBandMembersFailed(),t});return t.then(t=>{if(t){const t=this.currentState.getMembers().filter(t=>t.isOutOfBand()).map(t=>t.events.member.event);return d.logger.log("LL: telling store to write "+t.length+" members for room "+this.roomId),this._client.store.setOutOfBandMembers(this.roomId,t).catch(t=>{d.logger.log("LL: storing OOB room members failed, oh well",t)})}}).catch(t=>{d.logger.error(t)}),this._membersPromise=t,this._membersPromise},g.prototype.clearLoadedMembersIfNeeded=async function(){this._opts.lazyLoadMembers&&this._membersPromise&&(await this.loadMembersIfNeeded(),await this._client.store.clearOutOfBandMembers(this.roomId),this.currentState.clearOutOfBandMembers(),this._membersPromise=null)},g.prototype._cleanupAfterLeaving=function(){this.clearLoadedMembersIfNeeded().catch(t=>{d.logger.error(`error after clearing loaded members from room ${this.roomId} after leaving`),d.logger.log(t)})},g.prototype.resetLiveTimeline=function(t,e){for(let n=0;n<this._timelineSets.length;n++)this._timelineSets[n].resetLiveTimeline(t,e);this._fixUpLegacyTimelineFields()},g.prototype._fixUpLegacyTimelineFields=function(){this.timeline=this.getLiveTimeline().getEvents(),this.oldState=this.getLiveTimeline().getState(o.EventTimeline.BACKWARDS),this.currentState=this.getLiveTimeline().getState(o.EventTimeline.FORWARDS)},g.prototype.hasUnverifiedDevices=async function(){if(!this._client.isRoomEncrypted(this.roomId))return!1;const t=await this.getEncryptionTargetMembers();for(const e of t)if(this._client.getStoredDevicesForUser(e.userId).some(t=>t.isUnverified()))return!0;return!1},g.prototype.getTimelineSets=function(){return this._timelineSets},g.prototype.getUnfilteredTimelineSet=function(){return this._timelineSets[0]},g.prototype.getTimelineForEvent=function(t){return this.getUnfilteredTimelineSet().getTimelineForEvent(t)},g.prototype.addTimeline=function(){return this.getUnfilteredTimelineSet().addTimeline()},g.prototype.findEventById=function(t){return this.getUnfilteredTimelineSet().findEventById(t)},g.prototype.getUnreadNotificationCount=function(t){return this._notificationCounts[t=t||"total"]},g.prototype.setUnreadNotificationCount=function(t,e){this._notificationCounts[t]=e},g.prototype.setSummary=function(t){const e=t["m.heroes"],n=t["m.joined_member_count"],i=t["m.invited_member_count"];Number.isInteger(n)&&this.currentState.setJoinedMemberCount(n),Number.isInteger(i)&&this.currentState.setInvitedMemberCount(i),Array.isArray(e)&&(this._summaryHeroes=e.filter(t=>t!==this.myUserId))},g.prototype.setBlacklistUnverifiedDevices=function(t){this._blacklistUnverifiedDevices=t},g.prototype.getBlacklistUnverifiedDevices=function(){return this._blacklistUnverifiedDevices},g.prototype.getAvatarUrl=function(t,e,n,i,r){const s=this.currentState.getStateEvents("m.room.avatar","");if(void 0===r&&(r=!0),!s&&!r)return null;const o=s?s.getContent().url:null;return o?(0,a.getHttpUriForMxc)(t,o,e,n,i):r?(0,a.getIdenticonUri)(t,this.roomId,e,n):null},g.prototype.getAliases=function(){const t=[],e=this.currentState.getStateEvents("m.room.aliases");if(e)for(let n=0;n<e.length;++n){const i=e[n];if(c.isArray(i.getContent().aliases)){const e=i.getContent().aliases.filter(t=>"string"==typeof t&&"#"===t[0]&&!!t.endsWith(":"+i.getStateKey()));Array.prototype.push.apply(t,e)}}return t},g.prototype.getCanonicalAlias=function(){const t=this.currentState.getStateEvents("m.room.canonical_alias","");return t&&t.getContent().alias||null},g.prototype.getAltAliases=function(){const t=this.currentState.getStateEvents("m.room.canonical_alias","");return t&&t.getContent().alt_aliases||[]},g.prototype.addEventsToTimeline=function(t,e,n,i){n.getTimelineSet().addEventsToTimeline(t,e,n,i)},g.prototype.getMember=function(t){return this.currentState.getMember(t)},g.prototype.getJoinedMembers=function(){return this.getMembersWithMembership("join")},g.prototype.getJoinedMemberCount=function(){return this.currentState.getJoinedMemberCount()},g.prototype.getInvitedMemberCount=function(){return this.currentState.getInvitedMemberCount()},g.prototype.getInvitedAndJoinedMemberCount=function(){return this.getInvitedMemberCount()+this.getJoinedMemberCount()},g.prototype.getMembersWithMembership=function(t){return c.filter(this.currentState.getMembers(),(function(e){return e.membership===t}))},g.prototype.getEncryptionTargetMembers=async function(){await this.loadMembersIfNeeded();let t=this.getMembersWithMembership("join");return this.shouldEncryptForInvitedMembers()&&(t=t.concat(this.getMembersWithMembership("invite"))),t},g.prototype.shouldEncryptForInvitedMembers=function(){const t=this.currentState.getStateEvents("m.room.history_visibility","");return t&&t.getContent()&&"joined"!==t.getContent().history_visibility},g.prototype.getDefaultRoomName=function(t){return y(this,t,!0)},g.prototype.hasMembershipState=function(t,e){const n=this.getMember(t);return!!n&&n.membership===e},g.prototype.getOrCreateFilteredTimelineSet=function(t){if(this._filteredTimelineSets[t.filterId])return this._filteredTimelineSets[t.filterId];const e=Object.assign({filter:t},this._opts),n=new s.EventTimelineSet(this,e);this.reEmitter.reEmit(n,["Room.timeline","Room.timelineReset"]),this._filteredTimelineSets[t.filterId]=n,this._timelineSets.push(n);const i=this.getLiveTimeline();i.getEvents().forEach((function(t){n.addLiveEvent(t)}));let r=i;for(;r.getNeighbouringTimeline(o.EventTimeline.BACKWARDS);)r=r.getNeighbouringTimeline(o.EventTimeline.BACKWARDS);return n.getLiveTimeline().setPaginationToken(r.getPaginationToken(o.EventTimeline.BACKWARDS),o.EventTimeline.BACKWARDS),n},g.prototype.removeFilteredTimelineSet=function(t){const e=this._filteredTimelineSets[t.filterId];delete this._filteredTimelineSets[t.filterId];const n=this._timelineSets.indexOf(e);n>-1&&this._timelineSets.splice(n,1)},g.prototype._addLiveEvent=function(t,e,n){if(t.isRedaction()){const e=t.event.redacts,n=this.getUnfilteredTimelineSet().findEventById(e);n&&(n.makeRedacted(t),n.getStateKey()&&this.currentState.getStateEvents(n.getType(),n.getStateKey()).getId()===n.getId()&&this.currentState.setStateEvents([n]),this.emit("Room.redaction",t,this))}if(t.getUnsigned().transaction_id){const e=this._txnToEvent[t.getUnsigned().transaction_id];if(e)return void this._handleRemoteEcho(t,e)}for(let i=0;i<this._timelineSets.length;i++)this._timelineSets[i].addLiveEvent(t,e,n);t.sender&&"m.room.redaction"!==t.getType()&&this.addReceipt(f(t.sender.userId,t,"m.read"),!0)},g.prototype.addPendingEvent=function(t,e){if(t.status!==l.EventStatus.SENDING)throw new Error("addPendingEvent called on an event with status "+t.status);if(this._txnToEvent[e])throw new Error("addPendingEvent called on an event with known txnId "+e);if(o.EventTimeline.setEventMetadata(t,this.getLiveTimeline().getState(o.EventTimeline.FORWARDS),!1),this._txnToEvent[e]=t,"detached"==this._opts.pendingEventOrdering){if(this._pendingEventList.some(t=>t.status===l.EventStatus.NOT_SENT)&&(d.logger.warn("Setting event as NOT_SENT due to messages in the same state"),t.setStatus(l.EventStatus.NOT_SENT)),this._pendingEventList.push(t),t.isRelation()&&this._aggregateNonLiveRelation(t),t.isRedaction()){const e=t.event.redacts;let n=this._pendingEventList&&this._pendingEventList.find(t=>t.getId()===e);n||(n=this.getUnfilteredTimelineSet().findEventById(e)),n&&(n.markLocallyRedacted(t),this.emit("Room.redaction",t,this))}}else for(let n=0;n<this._timelineSets.length;n++){const e=this._timelineSets[n];e.getFilter()?e.getFilter().filterRoomTimeline([t]).length&&e.addEventToTimeline(t,e.getLiveTimeline(),!1):e.addEventToTimeline(t,e.getLiveTimeline(),!1)}this.emit("Room.localEchoUpdated",t,this,null,null)},g.prototype._aggregateNonLiveRelation=function(t){for(let e=0;e<this._timelineSets.length;e++){const n=this._timelineSets[e];n.getFilter()?n.getFilter().filterRoomTimeline([t]).length&&n.aggregateRelations(t):n.aggregateRelations(t)}},g.prototype._handleRemoteEcho=function(t,e){const n=e.getId(),i=t.getId(),r=e.status;d.logger.debug(`Got remote echo for event ${n} -> ${i} old status `+r),delete this._txnToEvent[t.getUnsigned().transaction_id],this._pendingEventList&&c.removeElement(this._pendingEventList,(function(t){return t.getId()==n}),!1),e.handleRemoteEcho(t.event);for(let s=0;s<this._timelineSets.length;s++)this._timelineSets[s].handleRemoteEcho(e,n,i);this.emit("Room.localEchoUpdated",e,this,n,r)};const _=function(){var t={};return t[l.EventStatus.ENCRYPTING]=[l.EventStatus.SENDING,l.EventStatus.NOT_SENT],t[l.EventStatus.SENDING]=[l.EventStatus.ENCRYPTING,l.EventStatus.QUEUED,l.EventStatus.NOT_SENT,l.EventStatus.SENT],t[l.EventStatus.QUEUED]=[l.EventStatus.SENDING,l.EventStatus.CANCELLED],t[l.EventStatus.SENT]=[],t[l.EventStatus.NOT_SENT]=[l.EventStatus.SENDING,l.EventStatus.QUEUED,l.EventStatus.CANCELLED],t[l.EventStatus.CANCELLED]=[],t}();function y(t,e,n){if(!n){const e=t.currentState.getStateEvents("m.room.name","");if(e&&e.getContent()&&e.getContent().name)return e.getContent().name}let i=t.getCanonicalAlias();if(!i){const e=t.getAltAliases();e.length&&(i=e[0])}if(i)return i;const r=t.currentState.getJoinedMemberCount()+t.currentState.getInvitedMemberCount()-1;let s=null;if(t._summaryHeroes)s=t._summaryHeroes.map(e=>{const n=t.getMember(e);return n?n.name:e});else{let n=t.currentState.getMembers().filter(t=>t.userId!==e&&("invite"===t.membership||"join"===t.membership));n.sort((t,e)=>t.userId.localeCompare(e.userId)),n=n.slice(0,5),s=n.map(t=>t.name)}if(r)return v(s,r);if("join"==t.getMyMembership()){const e=t.currentState.getStateEvents("m.room.third_party_invite");if(e&&e.length)return"Inviting "+v(e.map(t=>t.getContent().display_name))}let o=s;return o.length||(o=t.currentState.getMembers().filter(t=>t.userId!==e&&"invite"!==t.membership&&"join"!==t.membership).map(t=>t.name)),o.length?`Empty room (was ${v(o)})`:"Empty room"}function v(t,e=t.length+1){const n=e-1;return t.length?1===t.length&&n<=1?t[0]:2===t.length&&n<=2?`${t[0]} and ${t[1]}`:n>1?`${t[0]} and ${n} others`:t[0]+" and 1 other":"Empty room"}g.prototype.updatePendingEvent=function(t,e,n){if(d.logger.log(`setting pendingEvent status to ${e} in ${t.getRoomId()} event ID ${t.getId()} -> ${n}`),e==l.EventStatus.SENT&&!n)throw new Error("updatePendingEvent called with status=SENT, but no new event id");if(e==l.EventStatus.SENT&&this.getUnfilteredTimelineSet().eventIdToTimeline(n))return;const i=t.status,r=t.getId();if(!i)throw new Error("updatePendingEventStatus called on an event which is not a local echo.");const s=_[i];if(!s||s.indexOf(e)<0)throw new Error("Invalid EventStatus transition "+i+"->"+e);if(t.setStatus(e),e==l.EventStatus.SENT){t.replaceLocalEventId(n);for(let t=0;t<this._timelineSets.length;t++)this._timelineSets[t].replaceEventId(r,n)}else if(e==l.EventStatus.CANCELLED){if(this._pendingEventList){const t=this._pendingEventList.findIndex(t=>t.getId()===r);if(-1!==t){const[e]=this._pendingEventList.splice(t,1);e.isRedaction()&&this._revertRedactionLocalEcho(e)}}this.removeEvent(r)}this.emit("Room.localEchoUpdated",t,this,r,i)},g.prototype._revertRedactionLocalEcho=function(t){const e=t.event.redacts;if(!e)return;const n=this.getUnfilteredTimelineSet().findEventById(e);n&&(n.unmarkLocallyRedacted(),this.emit("Room.redactionCancelled",t,this),n.isRelation()&&this._aggregateNonLiveRelation(n))},g.prototype.addLiveEvents=function(t,e,n){let i;if(e&&-1===["replace","ignore"].indexOf(e))throw new Error("duplicateStrategy MUST be either 'replace' or 'ignore'");for(i=0;i<this._timelineSets.length;i++){const t=this._timelineSets[i].getLiveTimeline();if(t.getPaginationToken(o.EventTimeline.FORWARDS))throw new Error("live timeline "+i+" is no longer live - it has a pagination token ("+t.getPaginationToken(o.EventTimeline.FORWARDS)+")");if(t.getNeighbouringTimeline(o.EventTimeline.FORWARDS))throw new Error("live timeline "+i+" is no longer live - it has a neighbouring timeline")}for(i=0;i<t.length;i++)this._addLiveEvent(t[i],e,n)},g.prototype.addEphemeralEvents=function(t){for(const e of t)"m.typing"===e.getType()?this.currentState.setTypingEvent(e):"m.receipt"===e.getType()&&this.addReceipt(e)},g.prototype.removeEvents=function(t){for(let e=0;e<t.length;++e)this.removeEvent(t[e])},g.prototype.removeEvent=function(t){let e=!1;for(let n=0;n<this._timelineSets.length;n++){const i=this._timelineSets[n].removeEvent(t);i&&(i.isRedaction()&&this._revertRedactionLocalEcho(i),e=!0)}return e},g.prototype.recalculate=function(){const t=this,e=this.currentState.getStateEvents("m.room.member",this.myUserId);e&&"invite"===e.getContent().membership&&c.forEach(e.event.invite_room_state||[],(function(e){t.currentState.getStateEvents(e.type,e.state_key)||t.currentState.setStateEvents([new l.MatrixEvent({type:e.type,state_key:e.state_key,content:e.content,event_id:"$fake"+Date.now(),room_id:t.roomId,user_id:t.myUserId})])}));const n=this.name;this.name=y(this,this.myUserId),this.summary=new h.RoomSummary(this.roomId,{title:this.name}),n!==this.name&&this.emit("Room.name",this)},g.prototype.getUsersReadUpTo=function(t){return this.getReceiptsForEvent(t).filter((function(t){return"m.read"===t.type})).map((function(t){return t.userId}))},g.prototype.getEventReadUpTo=function(t,e){let n=this._receipts;return e&&(n=this._realReceipts),void 0===n["m.read"]||void 0===n["m.read"][t]?null:n["m.read"][t].eventId},g.prototype.hasUserReadEvent=function(t,e){const n=this.getEventReadUpTo(t,!1);if(n===e)return!0;if(this.timeline.length&&this.timeline[this.timeline.length-1].getSender()&&this.timeline[this.timeline.length-1].getSender()===t)return!0;for(let i=this.timeline.length-1;i>=0;--i){const t=this.timeline[i];if(t.getId()===e)return!1;if(t.getId()===n)return!0}return!1},g.prototype.getReceiptsForEvent=function(t){return this._receiptCacheByEventId[t.getId()]||[]},g.prototype.addReceipt=function(t,e){void 0===e&&(e=!1),e||this._addReceiptsToStructure(t,this._realReceipts),this._addReceiptsToStructure(t,this._receipts),this._receiptCacheByEventId=this._buildReceiptCache(this._receipts),this.emit("Room.receipt",t,this)},g.prototype._addReceiptsToStructure=function(t,e){const n=this;c.keys(t.getContent()).forEach((function(i){c.keys(t.getContent()[i]).forEach((function(r){c.keys(t.getContent()[i][r]).forEach((function(s){const o=t.getContent()[i][r][s];e[r]||(e[r]={});const a=e[r][s];if(a){const t=n.getUnfilteredTimelineSet().compareEventOrdering(a.eventId,i);if(null!==t&&t>=0)return}else e[r][s]={};e[r][s]={eventId:i,data:o}}))}))}))},g.prototype._buildReceiptCache=function(t){const e={};return c.keys(t).forEach((function(n){c.keys(t[n]).forEach((function(i){const r=t[n][i];e[r.eventId]||(e[r.eventId]=[]),e[r.eventId].push({userId:i,type:n,data:r.data})}))})),e},g.prototype._addLocalEchoReceipt=function(t,e,n){this.addReceipt(f(t,e,n),!0)},g.prototype.addTags=function(t){this.tags=t.getContent().tags||{},this.emit("Room.tags",t,this)},g.prototype.addAccountData=function(t){for(let e=0;e<t.length;e++){const n=t[e];"m.tag"===n.getType()&&this.addTags(n);const i=this.accountData[n.getType()];this.accountData[n.getType()]=n,this.emit("Room.accountData",n,this,i)}},g.prototype.getAccountData=function(t){return this.accountData[t]},g.prototype.maySendMessage=function(){return"join"===this.getMyMembership()&&this.currentState.maySendEvent("m.room.message",this.myUserId)}},tyto:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.EventTimeline=r;var i=n("4Cle");function r(t){this._eventTimelineSet=t,this._roomId=t.room?t.room.roomId:null,this._events=[],this._baseIndex=0,this._startState=new i.RoomState(this._roomId),this._startState.paginationToken=null,this._endState=new i.RoomState(this._roomId),this._endState.paginationToken=null,this._prevTimeline=null,this._nextTimeline=null,this._paginationRequests={b:null,f:null},this._name=this._roomId+":"+(new Date).toISOString()}r.BACKWARDS="b",r.FORWARDS="f",r.prototype.initialiseState=function(t){if(this._events.length>0)throw new Error("Cannot initialise state after events are added");for(const e of t)Object.freeze(e);this._startState.setStateEvents(t),this._endState.setStateEvents(t)},r.prototype.forkLive=function(t){const e=this.getState(t),n=new r(this._eventTimelineSet);return n._startState=e.clone(),n._endState=e,this._endState=e.clone(),n},r.prototype.fork=function(t){const e=this.getState(t),n=new r(this._eventTimelineSet);return n._startState=e.clone(),n._endState=e.clone(),n},r.prototype.getRoomId=function(){return this._roomId},r.prototype.getFilter=function(){return this._eventTimelineSet.getFilter()},r.prototype.getTimelineSet=function(){return this._eventTimelineSet},r.prototype.getBaseIndex=function(){return this._baseIndex},r.prototype.getEvents=function(){return this._events},r.prototype.getState=function(t){if(t==r.BACKWARDS)return this._startState;if(t==r.FORWARDS)return this._endState;throw new Error("Invalid direction '"+t+"'")},r.prototype.getPaginationToken=function(t){return this.getState(t).paginationToken},r.prototype.setPaginationToken=function(t,e){this.getState(e).paginationToken=t},r.prototype.getNeighbouringTimeline=function(t){if(t==r.BACKWARDS)return this._prevTimeline;if(t==r.FORWARDS)return this._nextTimeline;throw new Error("Invalid direction '"+t+"'")},r.prototype.setNeighbouringTimeline=function(t,e){if(this.getNeighbouringTimeline(e))throw new Error("timeline already has a neighbouring timeline - cannot reset neighbour (direction: "+e+")");if(e==r.BACKWARDS)this._prevTimeline=t;else{if(e!=r.FORWARDS)throw new Error("Invalid direction '"+e+"'");this._nextTimeline=t}this.setPaginationToken(null,e)},r.prototype.addEvent=function(t,e){const n=e?this._startState:this._endState,i=this.getTimelineSet();let s;i.room&&i.room.getUnfilteredTimelineSet()===i&&(r.setEventMetadata(t,n,e),t.isState()&&(n.setStateEvents([t]),t.sender&&("m.room.member"!==t.getType()||e)||r.setEventMetadata(t,n,e))),s=e?0:this._events.length,this._events.splice(s,0,t),e&&this._baseIndex++},r.setEventMetadata=function(t,e,n){t.sender=e.getSentinelMember(t.getSender()),"m.room.member"===t.getType()&&(t.target=e.getSentinelMember(t.getStateKey())),t.isState()&&n&&(t.forwardLooking=!1)},r.prototype.removeEvent=function(t){for(let e=this._events.length-1;e>=0;e--){const n=this._events[e];if(n.getId()==t)return this._events.splice(e,1),e<this._baseIndex&&this._baseIndex--,n}return null},r.prototype.toString=function(){return this._name}},uMDy:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.encryptAES=function(...t){return s?async function(t,e,n,i){let o;i?o=(0,r.decodeBase64)(i):(o=new Uint8Array(16),window.crypto.getRandomValues(o)),o[8]&=127;const[a,l]=await c(e,n),u=(new TextEncoder).encode(t),h=await s.encrypt({name:"AES-CTR",counter:o,length:64},a,u),d=await s.sign({name:"HMAC"},l,h);return{iv:(0,r.encodeBase64)(o),ciphertext:(0,r.encodeBase64)(h),mac:(0,r.encodeBase64)(d)}}(...t):async function(t,e,n,s){const o=(0,i.getCrypto)();if(!o)throw new Error("No usable crypto implementation");let c;c=s?(0,r.decodeBase64)(s):o.randomBytes(16),c[8]&=127;const[l,u]=a(e,n),h=o.createCipheriv("aes-256-ctr",l,c),d=h.update(t,"utf-8","base64")+h.final("base64"),p=o.createHmac("sha256",u).update(d,"base64").digest("base64");return{iv:(0,r.encodeBase64)(c),ciphertext:d,mac:p}}(...t)},e.decryptAES=function(...t){return s?async function(t,e,n){const[i,o]=await c(e,n),a=(0,r.decodeBase64)(t.ciphertext);if(!(await s.verify({name:"HMAC"},o,(0,r.decodeBase64)(t.mac),a)))throw new Error(`Error decrypting secret ${n}: bad MAC`);const l=await s.decrypt({name:"AES-CTR",counter:(0,r.decodeBase64)(t.iv),length:64},i,a);return(new TextDecoder).decode(new Uint8Array(l))}(...t):async function(t,e,n){const s=(0,i.getCrypto)();if(!s)throw new Error("No usable crypto implementation");const[o,c]=a(e,n);if(s.createHmac("sha256",c).update(t.ciphertext,"base64").digest("base64").replace(/=+$/g,"")!==t.mac.replace(/=+$/g,""))throw new Error(`Error decrypting secret ${n}: bad MAC`);const l=s.createDecipheriv("aes-256-ctr",o,(0,r.decodeBase64)(t.iv));return l.update(t.ciphertext,"base64","utf-8")+l.final("utf-8")}(...t)};var i=n("t+e4"),r=n("VRzr");const s="undefined"!=typeof window&&window.crypto?window.crypto.subtle||window.crypto.webkitSubtle:null,o=new Uint8Array(8);function a(t,e){const n=(0,i.getCrypto)(),r=n.createHmac("sha256",o).update(t).digest(),s=Buffer.alloc(1,1),a=n.createHmac("sha256",r).update(e,"utf-8").update(s).digest();return s[0]=2,[a,n.createHmac("sha256",r).update(a).update(e,"utf-8").update(s).digest()]}async function c(t,e){const n=await s.importKey("raw",t,{name:"HKDF"},!1,["deriveBits"]),i=await s.deriveBits({name:"HKDF",salt:o,info:(new TextEncoder).encode(e),hash:"SHA-256"},n,512),r=i.slice(0,32),a=i.slice(32),c=s.importKey("raw",r,{name:"AES-CTR"},!1,["encrypt","decrypt"]),l=s.importKey("raw",a,{name:"HMAC",hash:{name:"SHA-256"}},!1,["sign","verify"]);return await Promise.all([c,l])}},ucoE:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.QRCodeData=e.ReciprocateQRCode=e.SCAN_QR_CODE_METHOD=e.SHOW_QR_CODE_METHOD=void 0;var i=n("7kwF"),r=n("VEe5"),s=n("VRzr");e.SHOW_QR_CODE_METHOD="m.qr_code.show.v1",e.SCAN_QR_CODE_METHOD="m.qr_code.scan.v1";class o extends i.VerificationBase{static factory(...t){return new o(...t)}static get NAME(){return"m.reciprocate.v1"}async _doVerification(){if(!this.startEvent)throw new Error("It is not currently possible to start verificationwith this method yet.");const{qrCodeData:t}=this.request;if(this.startEvent.getContent().secret!==t.encodedSharedSecret)throw(0,r.newKeyMismatchError)();await new Promise((t,e)=>{this.reciprocateQREvent={confirm:t,cancel:()=>e((0,r.newUserCancelledError)())},this.emit("show_reciprocate_qr",this.reciprocateQREvent)});const e={};switch(t.mode){case a:{const n=t.otherUserMasterKey;e["ed25519:"+n]=n;break}case c:e["ed25519:"+this.request.targetDevice.deviceId]=t.otherDeviceKey;break;case l:{const n=t.myMasterKey;e["ed25519:"+n]=n;break}}await this._verifyKeys(this.userId,e,(t,n,i)=>{const s=e[t];if(!s)throw(0,r.newKeyMismatchError)();if(i!==s)throw console.error("key ID from key info does not match"),(0,r.newKeyMismatchError)();for(const o in n.keys){if(!o.startsWith("ed25519"))continue;const t=e[o];if(!t)throw(0,r.newKeyMismatchError)();if(n.keys[o]!==t)throw console.error("master key does not match"),(0,r.newKeyMismatchError)()}})}}e.ReciprocateQRCode=o;const a=0,c=1,l=2;class u{constructor(t,e,n,i,r,s){this._sharedSecret=e,this._mode=t,this._otherUserMasterKey=n,this._otherDeviceKey=i,this._myMasterKey=r,this._buffer=s}static async create(t,e){const n=u._generateSharedSecret(),i=u._determineMode(t,e);let r=null,s=null,o=null;if(i===a)r=e.getStoredCrossSigningForUser(t.otherUserId).getId("master");else if(i===c)s=await u._getOtherDeviceKey(t,e);else if(i===l){const t=e.getUserId();o=e.getStoredCrossSigningForUser(t).getId("master")}const h=u._generateQrData(t,e,i,n,r,s,o),d=u._generateBuffer(h);return new u(i,n,r,s,o,d)}get buffer(){return this._buffer}get mode(){return this._mode}get otherDeviceKey(){return this._otherDeviceKey}get otherUserMasterKey(){return this._otherUserMasterKey}get myMasterKey(){return this._myMasterKey}get encodedSharedSecret(){return this._sharedSecret}static _generateSharedSecret(){const t=new Uint8Array(11);return global.crypto.getRandomValues(t),(0,s.encodeUnpaddedBase64)(t)}static async _getOtherDeviceKey(t,e){const n=e.getUserId(),i=t.targetDevice,r=i?i.deviceId:null,s=e.getStoredDevice(n,r);if(!s)throw new Error("could not find device "+r);return s.getFingerprint()}static _determineMode(t,e){const n=e.getUserId();let i=a;return n===t.otherUserId&&(i=e.checkUserTrust(n).isCrossSigningVerified()?c:l),i}static _generateQrData(t,e,n,i,r,s,o){const u=e.getUserId(),h={prefix:"MATRIX",version:2,mode:n,transactionId:t.channel.transactionId,firstKeyB64:"",secondKeyB64:"",secretB64:i},d=e.getStoredCrossSigningForUser(u);return n===a?(h.firstKeyB64=d.getId("master"),h.secondKeyB64=r):n===c?(h.firstKeyB64=d.getId("master"),h.secondKeyB64=s):n===l&&(h.firstKeyB64=e.getDeviceEd25519Key(),h.secondKeyB64=o),h}static _generateBuffer(t){let e=Buffer.alloc(0);const n=t=>{const n=Buffer.from([t]);e=Buffer.concat([e,n])},i=(t,n,i=!0)=>{const r=Buffer.from(t,n);i&&(t=>{const n=Buffer.alloc(2);n.writeInt16BE(t,0),e=Buffer.concat([e,n])})(r.byteLength),e=Buffer.concat([e,r])},r=t=>{const n=(0,s.decodeBase64)(t),i=Buffer.from(n);e=Buffer.concat([e,i])};return i(t.prefix,"ascii",!1),n(t.version),n(t.mode),i(t.transactionId,"utf-8"),r(t.firstKeyB64),r(t.secondKeyB64),r(t.secretB64),e}}e.QRCodeData=u},vR9v:function(t,e,n){"use strict";var i=n("284h");Object.defineProperty(e,"__esModule",{value:!0}),e.RoomMember=a;var r=n("+qE3"),s=n("JOJy"),o=i(n("t+e4"));function a(t,e){this.roomId=t,this.userId=e,this.typing=!1,this.name=e,this.rawDisplayName=e,this.powerLevel=0,this.powerLevelNorm=0,this.user=null,this.membership=null,this.events={member:null},this._isOutOfBand=!1,this._updateModifiedTime()}o.inherits(a,r.EventEmitter),a.prototype.markOutOfBand=function(){this._isOutOfBand=!0},a.prototype.isOutOfBand=function(){return this._isOutOfBand},a.prototype.setMembershipEvent=function(t,e){if("m.room.member"!==t.getType())return;this._isOutOfBand=!1,this.events.member=t;const n=this.membership;this.membership=t.getDirectionalContent().membership;const i=this.name;this.name=function(t,e,n){if(!e||e===t)return t;if(!o.removeHiddenChars(e))return t;if(!n)return e;let i=/@.+:.+/.test(e);return i||(i=/[\u200E\u200F\u202A-\u202F]/.test(e)),i||(i=n.getUserIdsWithDisplayName(e).some(e=>e!==t)),i?e+" ("+t+")":e}(this.userId,t.getDirectionalContent().displayname,e),this.rawDisplayName=t.getDirectionalContent().displayname||this.userId,n!==this.membership&&(this._updateModifiedTime(),this.emit("RoomMember.membership",t,this,n)),i!==this.name&&(this._updateModifiedTime(),this.emit("RoomMember.name",t,this,i))},a.prototype.setPowerLevelEvent=function(t){if("m.room.power_levels"!==t.getType())return;const e=t.getDirectionalContent();let n=e.users_default||0;o.forEach(o.values(e.users),(function(t){n=Math.max(n,t)}));const i=this.powerLevel,r=this.powerLevelNorm;this.powerLevel=e.users&&void 0!==e.users[this.userId]?e.users[this.userId]:void 0!==e.users_default?e.users_default:0,this.powerLevelNorm=0,n>0&&(this.powerLevelNorm=100*this.powerLevel/n),i===this.powerLevel&&r===this.powerLevelNorm||(this._updateModifiedTime(),this.emit("RoomMember.powerLevel",t,this))},a.prototype.setTypingEvent=function(t){if("m.typing"!==t.getType())return;const e=this.typing;this.typing=!1;const n=t.getContent().user_ids;o.isArray(n)&&(-1!==n.indexOf(this.userId)&&(this.typing=!0),e!==this.typing&&(this._updateModifiedTime(),this.emit("RoomMember.typing",t,this)))},a.prototype._updateModifiedTime=function(){this._modified=Date.now()},a.prototype.getLastModifiedTime=function(){return this._modified},a.prototype.isKicked=function(){return"leave"===this.membership&&this.events.member.getSender()!==this.events.member.getStateKey()},a.prototype.getDMInviter=function(){if(this.events.member){const t=this.events.member;let e=t.getContent(),n=t.getSender();if("join"===e.membership&&(e=t.getPrevContent(),n=t.getUnsigned().prev_sender),"invite"===e.membership&&e.is_direct)return n}},a.prototype.getAvatarUrl=function(t,e,n,i,r,o){void 0===r&&(r=!0);const a=this.getMxcAvatarUrl();return a||r?(0,s.getHttpUriForMxc)(t,a,e,n,i,o)||(r?(0,s.getIdenticonUri)(t,this.userId,e,n):null):null},a.prototype.getMxcAvatarUrl=function(){return this.events.member?this.events.member.getDirectionalContent().avatar_url:this.user?this.user.avatarUrl:null}},xPRb:function(t,e,n){"use strict";var i=n("TqRt"),r=n("284h");Object.defineProperty(e,"__esModule",{value:!0});var s={};e.default=void 0;var o=r(n("Gghg"));Object.keys(o).forEach((function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(s,t)||Object.defineProperty(e,t,{enumerable:!0,get:function(){return o[t]}}))}));var a=i(n("cio7")),c=i(n("Qyje"));let l;o.request((function(t,e){return t.qs=c.default.stringify(t.qs||{},t.qsStringifyOptions),(0,a.default)(t,e)}));try{l=global.indexedDB}catch(u){}l&&o.setCryptoStoreFactory((function(){return new o.IndexedDBCryptoStore(l,"matrix-js-sdk:crypto")})),e.default=o,global.matrixcs=o},zUnb:function(t,e,n){"use strict";function i(t){return"function"==typeof t}n.r(e);let r=!1;const s={Promise:void 0,set useDeprecatedSynchronousErrorHandling(t){if(t){const t=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+t.stack)}else r&&console.log("RxJS: Back to a better error behavior. Thank you. <3");r=t},get useDeprecatedSynchronousErrorHandling(){return r}};function o(t){setTimeout(()=>{throw t},0)}const a={closed:!0,next(t){},error(t){if(s.useDeprecatedSynchronousErrorHandling)throw t;o(t)},complete(){}},c=(()=>Array.isArray||(t=>t&&"number"==typeof t.length))();function l(t){return null!==t&&"object"==typeof t}const u=(()=>{function t(t){return Error.call(this),this.message=t?`${t.length} errors occurred during unsubscription:\n${t.map((t,e)=>`${e+1}) ${t.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=t,this}return t.prototype=Object.create(Error.prototype),t})();let h=(()=>{class t{constructor(t){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,t&&(this._unsubscribe=t)}unsubscribe(){let e;if(this.closed)return;let{_parentOrParents:n,_unsubscribe:r,_subscriptions:s}=this;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,n instanceof t)n.remove(this);else if(null!==n)for(let t=0;t<n.length;++t)n[t].remove(this);if(i(r))try{r.call(this)}catch(o){e=o instanceof u?d(o.errors):[o]}if(c(s)){let t=-1,n=s.length;for(;++t<n;){const n=s[t];if(l(n))try{n.unsubscribe()}catch(o){e=e||[],o instanceof u?e=e.concat(d(o.errors)):e.push(o)}}}if(e)throw new u(e)}add(e){let n=e;if(!e)return t.EMPTY;switch(typeof e){case"function":n=new t(e);case"object":if(n===this||n.closed||"function"!=typeof n.unsubscribe)return n;if(this.closed)return n.unsubscribe(),n;if(!(n instanceof t)){const e=n;n=new t,n._subscriptions=[e]}break;default:throw new Error("unrecognized teardown "+e+" added to Subscription.")}let{_parentOrParents:i}=n;if(null===i)n._parentOrParents=this;else if(i instanceof t){if(i===this)return n;n._parentOrParents=[i,this]}else{if(-1!==i.indexOf(this))return n;i.push(this)}const r=this._subscriptions;return null===r?this._subscriptions=[n]:r.push(n),n}remove(t){const e=this._subscriptions;if(e){const n=e.indexOf(t);-1!==n&&e.splice(n,1)}}}var e;return t.EMPTY=((e=new t).closed=!0,e),t})();function d(t){return t.reduce((t,e)=>t.concat(e instanceof u?e.errors:e),[])}const p=(()=>"function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random())();class m extends h{constructor(t,e,n){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=a;break;case 1:if(!t){this.destination=a;break}if("object"==typeof t){t instanceof m?(this.syncErrorThrowable=t.syncErrorThrowable,this.destination=t,t.add(this)):(this.syncErrorThrowable=!0,this.destination=new f(this,t));break}default:this.syncErrorThrowable=!0,this.destination=new f(this,t,e,n)}}[p](){return this}static create(t,e,n){const i=new m(t,e,n);return i.syncErrorThrowable=!1,i}next(t){this.isStopped||this._next(t)}error(t){this.isStopped||(this.isStopped=!0,this._error(t))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(t){this.destination.next(t)}_error(t){this.destination.error(t),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parentOrParents:t}=this;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=t,this}}class f extends m{constructor(t,e,n,r){let s;super(),this._parentSubscriber=t;let o=this;i(e)?s=e:e&&(s=e.next,n=e.error,r=e.complete,e!==a&&(o=Object.create(e),i(o.unsubscribe)&&this.add(o.unsubscribe.bind(o)),o.unsubscribe=this.unsubscribe.bind(this))),this._context=o,this._next=s,this._error=n,this._complete=r}next(t){if(!this.isStopped&&this._next){const{_parentSubscriber:e}=this;s.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?this.__tryOrSetError(e,this._next,t)&&this.unsubscribe():this.__tryOrUnsub(this._next,t)}}error(t){if(!this.isStopped){const{_parentSubscriber:e}=this,{useDeprecatedSynchronousErrorHandling:n}=s;if(this._error)n&&e.syncErrorThrowable?(this.__tryOrSetError(e,this._error,t),this.unsubscribe()):(this.__tryOrUnsub(this._error,t),this.unsubscribe());else if(e.syncErrorThrowable)n?(e.syncErrorValue=t,e.syncErrorThrown=!0):o(t),this.unsubscribe();else{if(this.unsubscribe(),n)throw t;o(t)}}}complete(){if(!this.isStopped){const{_parentSubscriber:t}=this;if(this._complete){const e=()=>this._complete.call(this._context);s.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?(this.__tryOrSetError(t,e),this.unsubscribe()):(this.__tryOrUnsub(e),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(t,e){try{t.call(this._context,e)}catch(n){if(this.unsubscribe(),s.useDeprecatedSynchronousErrorHandling)throw n;o(n)}}__tryOrSetError(t,e,n){if(!s.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{e.call(this._context,n)}catch(i){return s.useDeprecatedSynchronousErrorHandling?(t.syncErrorValue=i,t.syncErrorThrown=!0,!0):(o(i),!0)}return!1}_unsubscribe(){const{_parentSubscriber:t}=this;this._context=null,this._parentSubscriber=null,t.unsubscribe()}}const g=(()=>"function"==typeof Symbol&&Symbol.observable||"@@observable")();function _(t){return t}let y=(()=>{class t{constructor(t){this._isScalar=!1,t&&(this._subscribe=t)}lift(e){const n=new t;return n.source=this,n.operator=e,n}subscribe(t,e,n){const{operator:i}=this,r=function(t,e,n){if(t){if(t instanceof m)return t;if(t[p])return t[p]()}return t||e||n?new m(t,e,n):new m(a)}(t,e,n);if(r.add(i?i.call(r,this.source):this.source||s.useDeprecatedSynchronousErrorHandling&&!r.syncErrorThrowable?this._subscribe(r):this._trySubscribe(r)),s.useDeprecatedSynchronousErrorHandling&&r.syncErrorThrowable&&(r.syncErrorThrowable=!1,r.syncErrorThrown))throw r.syncErrorValue;return r}_trySubscribe(t){try{return this._subscribe(t)}catch(e){s.useDeprecatedSynchronousErrorHandling&&(t.syncErrorThrown=!0,t.syncErrorValue=e),function(t){for(;t;){const{closed:e,destination:n,isStopped:i}=t;if(e||i)return!1;t=n&&n instanceof m?n:null}return!0}(t)?t.error(e):console.warn(e)}}forEach(t,e){return new(e=v(e))((e,n)=>{let i;i=this.subscribe(e=>{try{t(e)}catch(r){n(r),i&&i.unsubscribe()}},n,e)})}_subscribe(t){const{source:e}=this;return e&&e.subscribe(t)}[g](){return this}pipe(...t){return 0===t.length?this:(0===(e=t).length?_:1===e.length?e[0]:function(t){return e.reduce((t,e)=>e(t),t)})(this);var e}toPromise(t){return new(t=v(t))((t,e)=>{let n;this.subscribe(t=>n=t,t=>e(t),()=>t(n))})}}return t.create=e=>new t(e),t})();function v(t){if(t||(t=s.Promise||Promise),!t)throw new Error("no Promise impl found");return t}const b=(()=>{function t(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return t.prototype=Object.create(Error.prototype),t})();class w extends h{constructor(t,e){super(),this.subject=t,this.subscriber=e,this.closed=!1}unsubscribe(){if(this.closed)return;this.closed=!0;const t=this.subject,e=t.observers;if(this.subject=null,!e||0===e.length||t.isStopped||t.closed)return;const n=e.indexOf(this.subscriber);-1!==n&&e.splice(n,1)}}class S extends m{constructor(t){super(t),this.destination=t}}let E=(()=>{class t extends y{constructor(){super(),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}[p](){return new S(this)}lift(t){const e=new k(this,this);return e.operator=t,e}next(t){if(this.closed)throw new b;if(!this.isStopped){const{observers:e}=this,n=e.length,i=e.slice();for(let r=0;r<n;r++)i[r].next(t)}}error(t){if(this.closed)throw new b;this.hasError=!0,this.thrownError=t,this.isStopped=!0;const{observers:e}=this,n=e.length,i=e.slice();for(let r=0;r<n;r++)i[r].error(t);this.observers.length=0}complete(){if(this.closed)throw new b;this.isStopped=!0;const{observers:t}=this,e=t.length,n=t.slice();for(let i=0;i<e;i++)n[i].complete();this.observers.length=0}unsubscribe(){this.isStopped=!0,this.closed=!0,this.observers=null}_trySubscribe(t){if(this.closed)throw new b;return super._trySubscribe(t)}_subscribe(t){if(this.closed)throw new b;return this.hasError?(t.error(this.thrownError),h.EMPTY):this.isStopped?(t.complete(),h.EMPTY):(this.observers.push(t),new w(this,t))}asObservable(){const t=new y;return t.source=this,t}}return t.create=(t,e)=>new k(t,e),t})();class k extends E{constructor(t,e){super(),this.destination=t,this.source=e}next(t){const{destination:e}=this;e&&e.next&&e.next(t)}error(t){const{destination:e}=this;e&&e.error&&this.destination.error(t)}complete(){const{destination:t}=this;t&&t.complete&&this.destination.complete()}_subscribe(t){const{source:e}=this;return e?this.source.subscribe(t):h.EMPTY}}function C(t){return t&&"function"==typeof t.schedule}class x extends m{constructor(t,e,n){super(),this.parent=t,this.outerValue=e,this.outerIndex=n,this.index=0}_next(t){this.parent.notifyNext(this.outerValue,t,this.outerIndex,this.index++,this)}_error(t){this.parent.notifyError(t,this),this.unsubscribe()}_complete(){this.parent.notifyComplete(this),this.unsubscribe()}}const T=t=>e=>{for(let n=0,i=t.length;n<i&&!e.closed;n++)e.next(t[n]);e.complete()};function I(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}const R=I(),O=t=>t&&"number"==typeof t.length&&"function"!=typeof t;function A(t){return!!t&&"function"!=typeof t.subscribe&&"function"==typeof t.then}const D=t=>{if(t&&"function"==typeof t[g])return i=t,t=>{const e=i[g]();if("function"!=typeof e.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return e.subscribe(t)};if(O(t))return T(t);if(A(t))return n=t,t=>(n.then(e=>{t.closed||(t.next(e),t.complete())},e=>t.error(e)).then(null,o),t);if(t&&"function"==typeof t[R])return e=t,t=>{const n=e[R]();for(;;){const e=n.next();if(e.done){t.complete();break}if(t.next(e.value),t.closed)break}return"function"==typeof n.return&&t.add(()=>{n.return&&n.return()}),t};{const e=l(t)?"an invalid object":`'${t}'`;throw new TypeError(`You provided ${e} where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.`)}var e,n,i};function P(t,e,n,i,r=new x(t,n,i)){if(!r.closed)return e instanceof y?e.subscribe(r):D(e)(r)}class M extends m{notifyNext(t,e,n,i,r){this.destination.next(e)}notifyError(t,e){this.destination.error(t)}notifyComplete(t){this.destination.complete()}}function N(t,e){return function(n){if("function"!=typeof t)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return n.lift(new L(t,e))}}class L{constructor(t,e){this.project=t,this.thisArg=e}call(t,e){return e.subscribe(new F(t,this.project,this.thisArg))}}class F extends m{constructor(t,e,n){super(t),this.project=e,this.count=0,this.thisArg=n||this}_next(t){let e;try{e=this.project.call(this.thisArg,t,this.count++)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}function U(t,e){return new y(n=>{const i=new h;let r=0;return i.add(e.schedule((function(){r!==t.length?(n.next(t[r++]),n.closed||i.add(this.schedule())):n.complete()}))),i})}function B(t,e){return e?function(t,e){if(null!=t){if(function(t){return t&&"function"==typeof t[g]}(t))return function(t,e){return new y(n=>{const i=new h;return i.add(e.schedule(()=>{const r=t[g]();i.add(r.subscribe({next(t){i.add(e.schedule(()=>n.next(t)))},error(t){i.add(e.schedule(()=>n.error(t)))},complete(){i.add(e.schedule(()=>n.complete()))}}))})),i})}(t,e);if(A(t))return function(t,e){return new y(n=>{const i=new h;return i.add(e.schedule(()=>t.then(t=>{i.add(e.schedule(()=>{n.next(t),i.add(e.schedule(()=>n.complete()))}))},t=>{i.add(e.schedule(()=>n.error(t)))}))),i})}(t,e);if(O(t))return U(t,e);if(function(t){return t&&"function"==typeof t[R]}(t)||"string"==typeof t)return function(t,e){if(!t)throw new Error("Iterable cannot be null");return new y(n=>{const i=new h;let r;return i.add(()=>{r&&"function"==typeof r.return&&r.return()}),i.add(e.schedule(()=>{r=t[R](),i.add(e.schedule((function(){if(n.closed)return;let t,e;try{const n=r.next();t=n.value,e=n.done}catch(i){return void n.error(i)}e?n.complete():(n.next(t),this.schedule())})))})),i})}(t,e)}throw new TypeError((null!==t&&typeof t||t)+" is not observable")}(t,e):t instanceof y?t:new y(D(t))}function j(t,e,n=Number.POSITIVE_INFINITY){return"function"==typeof e?i=>i.pipe(j((n,i)=>B(t(n,i)).pipe(N((t,r)=>e(n,t,i,r))),n)):("number"==typeof e&&(n=e),e=>e.lift(new V(t,n)))}class V{constructor(t,e=Number.POSITIVE_INFINITY){this.project=t,this.concurrent=e}call(t,e){return e.subscribe(new K(t,this.project,this.concurrent))}}class K extends M{constructor(t,e,n=Number.POSITIVE_INFINITY){super(t),this.project=e,this.concurrent=n,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}_next(t){this.active<this.concurrent?this._tryNext(t):this.buffer.push(t)}_tryNext(t){let e;const n=this.index++;try{e=this.project(t,n)}catch(i){return void this.destination.error(i)}this.active++,this._innerSub(e,t,n)}_innerSub(t,e,n){const i=new x(this,e,n),r=this.destination;r.add(i);const s=P(this,t,void 0,void 0,i);s!==i&&r.add(s)}_complete(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}notifyNext(t,e,n,i,r){this.destination.next(e)}notifyComplete(t){const e=this.buffer;this.remove(t),this.active--,e.length>0?this._next(e.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}function q(t=Number.POSITIVE_INFINITY){return j(_,t)}function G(t,e){return e?U(t,e):new y(T(t))}function $(...t){let e=Number.POSITIVE_INFINITY,n=null,i=t[t.length-1];return C(i)?(n=t.pop(),t.length>1&&"number"==typeof t[t.length-1]&&(e=t.pop())):"number"==typeof i&&(e=t.pop()),null===n&&1===t.length&&t[0]instanceof y?t[0]:q(e)(G(t,n))}function H(){return function(t){return t.lift(new z(t))}}class z{constructor(t){this.connectable=t}call(t,e){const{connectable:n}=this;n._refCount++;const i=new W(t,n),r=e.subscribe(i);return i.closed||(i.connection=n.connect()),r}}class W extends m{constructor(t,e){super(t),this.connectable=e}_unsubscribe(){const{connectable:t}=this;if(!t)return void(this.connection=null);this.connectable=null;const e=t._refCount;if(e<=0)return void(this.connection=null);if(t._refCount=e-1,e>1)return void(this.connection=null);const{connection:n}=this,i=t._connection;this.connection=null,!i||n&&i!==n||i.unsubscribe()}}class Y extends y{constructor(t,e){super(),this.source=t,this.subjectFactory=e,this._refCount=0,this._isComplete=!1}_subscribe(t){return this.getSubject().subscribe(t)}getSubject(){const t=this._subject;return t&&!t.isStopped||(this._subject=this.subjectFactory()),this._subject}connect(){let t=this._connection;return t||(this._isComplete=!1,t=this._connection=new h,t.add(this.source.subscribe(new Q(this.getSubject(),this))),t.closed&&(this._connection=null,t=h.EMPTY)),t}refCount(){return H()(this)}}const X=(()=>{const t=Y.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:t._subscribe},_isComplete:{value:t._isComplete,writable:!0},getSubject:{value:t.getSubject},connect:{value:t.connect},refCount:{value:t.refCount}}})();class Q extends S{constructor(t,e){super(t),this.connectable=e}_error(t){this._unsubscribe(),super._error(t)}_complete(){this.connectable._isComplete=!0,this._unsubscribe(),super._complete()}_unsubscribe(){const t=this.connectable;if(t){this.connectable=null;const e=t._connection;t._refCount=0,t._subject=null,t._connection=null,e&&e.unsubscribe()}}}function Z(){return new E}function J(){return t=>{return H()((e=Z,function(t){let n;n="function"==typeof e?e:function(){return e};const i=Object.create(t,X);return i.source=t,i.subjectFactory=n,i})(t));var e}}function tt(t){return{toString:t}.toString()}function et(t,e,n){return tt(()=>{const i=function(t){return function(...e){if(t){const n=t(...e);for(const t in n)this[t]=n[t]}}}(e);function r(...t){if(this instanceof r)return i.apply(this,t),this;const e=new r(...t);return n.annotation=e,n;function n(t,n,i){const r=t.hasOwnProperty("__parameters__")?t.__parameters__:Object.defineProperty(t,"__parameters__",{value:[]}).__parameters__;for(;r.length<=i;)r.push(null);return(r[i]=r[i]||[]).push(e),t}}return n&&(r.prototype=Object.create(n.prototype)),r.prototype.ngMetadataName=t,r.annotationCls=r,r})}const nt=et("Inject",t=>({token:t})),it=et("Optional"),rt=et("Self"),st=et("SkipSelf");var ot=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}({});function at(t){for(let e in t)if(t[e]===at)return e;throw Error("Could not find renamed property on target object.")}function ct(t,e){for(const n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function lt(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function ut(t){return{factory:t.factory,providers:t.providers||[],imports:t.imports||[]}}function ht(t){return dt(t,t[mt])||dt(t,t[_t])}function dt(t,e){return e&&e.token===t?e:null}function pt(t){return t&&(t.hasOwnProperty(ft)||t.hasOwnProperty(yt))?t[ft]:null}const mt=at({"\u0275prov":at}),ft=at({"\u0275inj":at}),gt=at({"\u0275provFallback":at}),_t=at({ngInjectableDef:at}),yt=at({ngInjectorDef:at});function vt(t){if("string"==typeof t)return t;if(Array.isArray(t))return"["+t.map(vt).join(", ")+"]";if(null==t)return""+t;if(t.overriddenName)return""+t.overriddenName;if(t.name)return""+t.name;const e=t.toString();if(null==e)return""+e;const n=e.indexOf("\n");return-1===n?e:e.substring(0,n)}function bt(t,e){return null==t||""===t?null===e?"":e:null==e||""===e?t:t+" "+e}const wt=at({__forward_ref__:at});function St(t){return t.__forward_ref__=St,t.toString=function(){return vt(this())},t}function Et(t){return kt(t)?t():t}function kt(t){return"function"==typeof t&&t.hasOwnProperty(wt)&&t.__forward_ref__===St}const Ct="undefined"!=typeof globalThis&&globalThis,xt="undefined"!=typeof window&&window,Tt="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,It="undefined"!=typeof global&&global,Rt=Ct||It||xt||Tt,Ot=at({"\u0275cmp":at}),At=at({"\u0275dir":at}),Dt=at({"\u0275pipe":at}),Pt=at({"\u0275mod":at}),Mt=at({"\u0275loc":at}),Nt=at({"\u0275fac":at}),Lt=at({__NG_ELEMENT_ID__:at});class Ft{constructor(t,e){this._desc=t,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof e?this.__NG_ELEMENT_ID__=e:void 0!==e&&(this.\u0275prov=lt({token:this,providedIn:e.providedIn||"root",factory:e.factory}))}toString(){return"InjectionToken "+this._desc}}const Ut=new Ft("INJECTOR",-1),Bt={},jt=/\n/gm,Vt=at({provide:String,useValue:at});let Kt,qt=void 0;function Gt(t){const e=qt;return qt=t,e}function $t(t){const e=Kt;return Kt=t,e}function Ht(t,e=ot.Default){if(void 0===qt)throw new Error("inject() must be called from an injection context");return null===qt?Yt(t,void 0,e):qt.get(t,e&ot.Optional?null:void 0,e)}function zt(t,e=ot.Default){return(Kt||Ht)(Et(t),e)}const Wt=zt;function Yt(t,e,n){const i=ht(t);if(i&&"root"==i.providedIn)return void 0===i.value?i.value=i.factory():i.value;if(n&ot.Optional)return null;if(void 0!==e)return e;throw new Error(`Injector: NOT_FOUND [${vt(t)}]`)}function Xt(t){const e=[];for(let n=0;n<t.length;n++){const i=Et(t[n]);if(Array.isArray(i)){if(0===i.length)throw new Error("Arguments array must have arguments.");let t=void 0,n=ot.Default;for(let e=0;e<i.length;e++){const r=i[e];r instanceof it||"Optional"===r.ngMetadataName||r===it?n|=ot.Optional:r instanceof st||"SkipSelf"===r.ngMetadataName||r===st?n|=ot.SkipSelf:r instanceof rt||"Self"===r.ngMetadataName||r===rt?n|=ot.Self:t=r instanceof nt||r===nt?r.token:r}e.push(zt(t,n))}else e.push(zt(i))}return e}class Qt{get(t,e=Bt){if(e===Bt){const e=new Error(`NullInjectorError: No provider for ${vt(t)}!`);throw e.name="NullInjectorError",e}return e}}class Zt{}class Jt{}function te(t,e){t.forEach(t=>Array.isArray(t)?te(t,e):e(t))}function ee(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function ne(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function ie(t,e){const n=[];for(let i=0;i<t;i++)n.push(e);return n}function re(t,e,n){let i=oe(t,e);return i>=0?t[1|i]=n:(i=~i,function(t,e,n,i){let r=t.length;if(r==e)t.push(n,i);else if(1===r)t.push(i,t[0]),t[0]=n;else{for(r--,t.push(t[r-1],t[r]);r>e;)t[r]=t[r-2],r--;t[e]=n,t[e+1]=i}}(t,i,e,n)),i}function se(t,e){const n=oe(t,e);if(n>=0)return t[1|n]}function oe(t,e){return function(t,e,n){let i=0,r=t.length>>1;for(;r!==i;){const n=i+(r-i>>1),s=t[n<<1];if(e===s)return n<<1;s>e?r=n:i=n+1}return~(r<<1)}(t,e)}var ae=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}({}),ce=function(t){return t[t.Emulated=0]="Emulated",t[t.Native=1]="Native",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}({});const le={},ue=[];let he=0;function de(t){return tt(()=>{const e={},n={type:t.type,providersResolver:null,decls:t.decls,vars:t.vars,factory:null,template:t.template||null,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputs:null,outputs:null,exportAs:t.exportAs||null,onPush:t.changeDetection===ae.OnPush,directiveDefs:null,pipeDefs:null,selectors:t.selectors||ue,viewQuery:t.viewQuery||null,features:t.features||null,data:t.data||{},encapsulation:t.encapsulation||ce.Emulated,id:"c",styles:t.styles||ue,_:null,setInput:null,schemas:t.schemas||null,tView:null},i=t.directives,r=t.features,s=t.pipes;return n.id+=he++,n.inputs=_e(t.inputs,e),n.outputs=_e(t.outputs),r&&r.forEach(t=>t(n)),n.directiveDefs=i?()=>("function"==typeof i?i():i).map(pe):null,n.pipeDefs=s?()=>("function"==typeof s?s():s).map(me):null,n})}function pe(t){return be(t)||function(t){return t[At]||null}(t)}function me(t){return function(t){return t[Dt]||null}(t)}const fe={};function ge(t){const e={type:t.type,bootstrap:t.bootstrap||ue,declarations:t.declarations||ue,imports:t.imports||ue,exports:t.exports||ue,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null};return null!=t.id&&tt(()=>{fe[t.id]=t.type}),e}function _e(t,e){if(null==t)return le;const n={};for(const i in t)if(t.hasOwnProperty(i)){let r=t[i],s=r;Array.isArray(r)&&(s=r[1],r=r[0]),n[r]=i,e&&(e[r]=s)}return n}const ye=de;function ve(t){return{type:t.type,name:t.name,factory:null,pure:!1!==t.pure,onDestroy:t.type.prototype.ngOnDestroy||null}}function be(t){return t[Ot]||null}function we(t,e){return t.hasOwnProperty(Nt)?t[Nt]:null}function Se(t,e){const n=t[Pt]||null;if(!n&&!0===e)throw new Error(`Type ${vt(t)} does not have '\u0275mod' property.`);return n}function Ee(t){return Array.isArray(t)&&"object"==typeof t[1]}function ke(t){return Array.isArray(t)&&!0===t[1]}function Ce(t){return 0!=(8&t.flags)}function xe(t){return 2==(2&t.flags)}function Te(t){return 1==(1&t.flags)}function Ie(t){return null!==t.template}function Re(t){return 0!=(512&t[2])}class Oe{constructor(t,e,n){this.previousValue=t,this.currentValue=e,this.firstChange=n}isFirstChange(){return this.firstChange}}function Ae(){return De}function De(t){return t.type.prototype.ngOnChanges&&(t.setInput=Me),Pe}function Pe(){const t=Ne(this),e=null==t?void 0:t.current;if(e){const n=t.previous;if(n===le)t.previous=e;else for(let t in e)n[t]=e[t];t.current=null,this.ngOnChanges(e)}}function Me(t,e,n,i){const r=Ne(t)||function(t,e){return t.__ngSimpleChanges__=e}(t,{previous:le,current:null}),s=r.current||(r.current={}),o=r.previous,a=this.declaredInputs[n],c=o[a];s[a]=new Oe(c&&c.currentValue,e,o===le),t[i]=e}function Ne(t){return t.__ngSimpleChanges__||null}Ae.ngInherit=!0;let Le=void 0;function Fe(){return void 0!==Le?Le:"undefined"!=typeof document?document:void 0}function Ue(t){return!!t.listen}const Be={createRenderer:(t,e)=>Fe()};function je(t){for(;Array.isArray(t);)t=t[0];return t}function Ve(t,e){return je(e[t+20])}function Ke(t,e){return je(e[t.index])}function qe(t,e){return t.data[e+20]}function Ge(t,e){return t[e+20]}function $e(t,e){const n=e[t];return Ee(n)?n:n[0]}function He(t){const e=function(t){return t.__ngContext__||null}(t);return e?Array.isArray(e)?e:e.lView:null}function ze(t){return 4==(4&t[2])}function We(t){return 128==(128&t[2])}function Ye(t,e){return null===t||null==e?null:t[e]}function Xe(t){t[18]=0}function Qe(t,e){t[5]+=e;let n=t,i=t[3];for(;null!==i&&(1===e&&1===n[5]||-1===e&&0===n[5]);)i[5]+=e,n=i,i=i[3]}const Ze={lFrame:Sn(null),bindingsEnabled:!0,checkNoChangesMode:!1};function Je(){return Ze.bindingsEnabled}function tn(){return Ze.lFrame.lView}function en(){return Ze.lFrame.tView}function nn(t){Ze.lFrame.contextLView=t}function rn(){return Ze.lFrame.previousOrParentTNode}function sn(t,e){Ze.lFrame.previousOrParentTNode=t,Ze.lFrame.isParent=e}function on(){return Ze.lFrame.isParent}function an(){Ze.lFrame.isParent=!1}function cn(){return Ze.checkNoChangesMode}function ln(t){Ze.checkNoChangesMode=t}function un(){const t=Ze.lFrame;let e=t.bindingRootIndex;return-1===e&&(e=t.bindingRootIndex=t.tView.bindingStartIndex),e}function hn(){return Ze.lFrame.bindingIndex}function dn(){return Ze.lFrame.bindingIndex++}function pn(t){const e=Ze.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}function mn(t,e){const n=Ze.lFrame;n.bindingIndex=n.bindingRootIndex=t,fn(e)}function fn(t){Ze.lFrame.currentDirectiveIndex=t}function gn(t){const e=Ze.lFrame.currentDirectiveIndex;return-1===e?null:t[e]}function _n(){return Ze.lFrame.currentQueryIndex}function yn(t){Ze.lFrame.currentQueryIndex=t}function vn(t,e){const n=wn();Ze.lFrame=n,n.previousOrParentTNode=e,n.lView=t}function bn(t,e){const n=wn(),i=t[1];Ze.lFrame=n,n.previousOrParentTNode=e,n.lView=t,n.tView=i,n.contextLView=t,n.bindingIndex=i.bindingStartIndex}function wn(){const t=Ze.lFrame,e=null===t?null:t.child;return null===e?Sn(t):e}function Sn(t){const e={previousOrParentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:0,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null};return null!==t&&(t.child=e),e}function En(){const t=Ze.lFrame;return Ze.lFrame=t.parent,t.previousOrParentTNode=null,t.lView=null,t}const kn=En;function Cn(){const t=En();t.isParent=!0,t.tView=null,t.selectedIndex=0,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function xn(){return Ze.lFrame.selectedIndex}function Tn(t){Ze.lFrame.selectedIndex=t}function In(){const t=Ze.lFrame;return qe(t.tView,t.selectedIndex)}function Rn(){Ze.lFrame.currentNamespace="http://www.w3.org/2000/svg"}function On(){Ze.lFrame.currentNamespace=null}function An(t,e){for(let n=e.directiveStart,i=e.directiveEnd;n<i;n++){const e=t.data[n].type.prototype,{ngAfterContentInit:i,ngAfterContentChecked:r,ngAfterViewInit:s,ngAfterViewChecked:o,ngOnDestroy:a}=e;i&&(t.contentHooks||(t.contentHooks=[])).push(-n,i),r&&((t.contentHooks||(t.contentHooks=[])).push(n,r),(t.contentCheckHooks||(t.contentCheckHooks=[])).push(n,r)),s&&(t.viewHooks||(t.viewHooks=[])).push(-n,s),o&&((t.viewHooks||(t.viewHooks=[])).push(n,o),(t.viewCheckHooks||(t.viewCheckHooks=[])).push(n,o)),null!=a&&(t.destroyHooks||(t.destroyHooks=[])).push(n,a)}}function Dn(t,e,n){Nn(t,e,3,n)}function Pn(t,e,n,i){(3&t[2])===n&&Nn(t,e,n,i)}function Mn(t,e){let n=t[2];(3&n)===e&&(n&=2047,n+=1,t[2]=n)}function Nn(t,e,n,i){const r=null!=i?i:-1;let s=0;for(let o=void 0!==i?65535&t[18]:0;o<e.length;o++)if("number"==typeof e[o+1]){if(s=e[o],null!=i&&s>=i)break}else e[o]<0&&(t[18]+=65536),(s<r||-1==r)&&(Ln(t,n,e,o),t[18]=(4294901760&t[18])+o+2),o++}function Ln(t,e,n,i){const r=n[i]<0,s=n[i+1],o=t[r?-n[i]:n[i]];r?t[2]>>11<t[18]>>16&&(3&t[2])===e&&(t[2]+=2048,s.call(o)):s.call(o)}class Fn{constructor(t,e,n){this.factory=t,this.resolving=!1,this.canSeeViewProviders=e,this.injectImpl=n}}function Un(t,e,n){const i=Ue(t);let r=0;for(;r<n.length;){const s=n[r];if("number"==typeof s){if(0!==s)break;r++;const o=n[r++],a=n[r++],c=n[r++];i?t.setAttribute(e,a,c,o):e.setAttributeNS(o,a,c)}else{const o=s,a=n[++r];jn(o)?i&&t.setProperty(e,o,a):i?t.setAttribute(e,o,a):e.setAttribute(o,a),r++}}return r}function Bn(t){return 3===t||4===t||6===t}function jn(t){return 64===t.charCodeAt(0)}function Vn(t,e){if(null===e||0===e.length);else if(null===t||0===t.length)t=e.slice();else{let n=-1;for(let i=0;i<e.length;i++){const r=e[i];"number"==typeof r?n=r:0===n||Kn(t,n,r,null,-1===n||2===n?e[++i]:null)}}return t}function Kn(t,e,n,i,r){let s=0,o=t.length;if(-1===e)o=-1;else for(;s<t.length;){const n=t[s++];if("number"==typeof n){if(n===e){o=-1;break}if(n>e){o=s-1;break}}}for(;s<t.length;){const e=t[s];if("number"==typeof e)break;if(e===n){if(null===i)return void(null!==r&&(t[s+1]=r));if(i===t[s+1])return void(t[s+2]=r)}s++,null!==i&&s++,null!==r&&s++}-1!==o&&(t.splice(o,0,e),s=o+1),t.splice(s++,0,n),null!==i&&t.splice(s++,0,i),null!==r&&t.splice(s++,0,r)}function qn(t){return-1!==t}function Gn(t){return 32767&t}function $n(t){return t>>16}function Hn(t,e){let n=$n(t),i=e;for(;n>0;)i=i[15],n--;return i}function zn(t){return"string"==typeof t?t:null==t?"":""+t}function Wn(t){return"function"==typeof t?t.name||t.toString():"object"==typeof t&&null!=t&&"function"==typeof t.type?t.type.name||t.type.toString():zn(t)}const Yn=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(Rt))();function Xn(t){return{name:"window",target:t.ownerDocument.defaultView}}function Qn(t){return t instanceof Function?t():t}let Zn=!0;function Jn(t){const e=Zn;return Zn=t,e}let ti=0;function ei(t,e){const n=ii(t,e);if(-1!==n)return n;const i=e[1];i.firstCreatePass&&(t.injectorIndex=e.length,ni(i.data,t),ni(e,null),ni(i.blueprint,null));const r=ri(t,e),s=t.injectorIndex;if(qn(r)){const t=Gn(r),n=Hn(r,e),i=n[1].data;for(let r=0;r<8;r++)e[s+r]=n[t+r]|i[t+r]}return e[s+8]=r,s}function ni(t,e){t.push(0,0,0,0,0,0,0,0,e)}function ii(t,e){return-1===t.injectorIndex||t.parent&&t.parent.injectorIndex===t.injectorIndex||null==e[t.injectorIndex+8]?-1:t.injectorIndex}function ri(t,e){if(t.parent&&-1!==t.parent.injectorIndex)return t.parent.injectorIndex;let n=e[6],i=1;for(;n&&-1===n.injectorIndex;)n=(e=e[15])?e[6]:null,i++;return n?n.injectorIndex|i<<16:-1}function si(t,e,n){!function(t,e,n){let i;"string"==typeof n?i=n.charCodeAt(0)||0:n.hasOwnProperty(Lt)&&(i=n[Lt]),null==i&&(i=n[Lt]=ti++);const r=255&i,s=1<<r,o=64&r,a=32&r,c=e.data;128&r?o?a?c[t+7]|=s:c[t+6]|=s:a?c[t+5]|=s:c[t+4]|=s:o?a?c[t+3]|=s:c[t+2]|=s:a?c[t+1]|=s:c[t]|=s}(t,e,n)}function oi(t,e,n,i=ot.Default,r){if(null!==t){const r=function(t){if("string"==typeof t)return t.charCodeAt(0)||0;const e=t.hasOwnProperty(Lt)?t[Lt]:void 0;return"number"==typeof e&&e>0?255&e:e}(n);if("function"==typeof r){vn(e,t);try{const t=r();if(null!=t||i&ot.Optional)return t;throw new Error(`No provider for ${Wn(n)}!`)}finally{kn()}}else if("number"==typeof r){if(-1===r)return new pi(t,e);let s=null,o=ii(t,e),a=-1,c=i&ot.Host?e[16][6]:null;for((-1===o||i&ot.SkipSelf)&&(a=-1===o?ri(t,e):e[o+8],di(i,!1)?(s=e[1],o=Gn(a),e=Hn(a,e)):o=-1);-1!==o;){a=e[o+8];const t=e[1];if(hi(r,o,t.data)){const t=ci(o,e,n,s,i,c);if(t!==ai)return t}di(i,e[1].data[o+8]===c)&&hi(r,o,e)?(s=t,o=Gn(a),e=Hn(a,e)):o=-1}}}if(i&ot.Optional&&void 0===r&&(r=null),0==(i&(ot.Self|ot.Host))){const t=e[9],s=$t(void 0);try{return t?t.get(n,r,i&ot.Optional):Yt(n,r,i&ot.Optional)}finally{$t(s)}}if(i&ot.Optional)return r;throw new Error(`NodeInjector: NOT_FOUND [${Wn(n)}]`)}const ai={};function ci(t,e,n,i,r,s){const o=e[1],a=o.data[t+8],c=li(a,o,n,null==i?xe(a)&&Zn:i!=o&&3===a.type,r&ot.Host&&s===a);return null!==c?ui(e,o,c,a):ai}function li(t,e,n,i,r){const s=t.providerIndexes,o=e.data,a=1048575&s,c=t.directiveStart,l=s>>20,u=r?a+l:t.directiveEnd;for(let h=i?a:a+l;h<u;h++){const t=o[h];if(h<c&&n===t||h>=c&&t.type===n)return h}if(r){const t=o[c];if(t&&Ie(t)&&t.type===n)return c}return null}function ui(t,e,n,i){let r=t[n];const s=e.data;if(r instanceof Fn){const o=r;if(o.resolving)throw new Error("Circular dep for "+Wn(s[n]));const a=Jn(o.canSeeViewProviders);let c;o.resolving=!0,o.injectImpl&&(c=$t(o.injectImpl)),vn(t,i);try{r=t[n]=o.factory(void 0,s,t,i),e.firstCreatePass&&n>=i.directiveStart&&function(t,e,n){const{ngOnChanges:i,ngOnInit:r,ngDoCheck:s}=e.type.prototype;if(i){const i=De(e);(n.preOrderHooks||(n.preOrderHooks=[])).push(t,i),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t,i)}r&&(n.preOrderHooks||(n.preOrderHooks=[])).push(0-t,r),s&&((n.preOrderHooks||(n.preOrderHooks=[])).push(t,s),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t,s))}(n,s[n],e)}finally{o.injectImpl&&$t(c),Jn(a),o.resolving=!1,kn()}}return r}function hi(t,e,n){const i=64&t,r=32&t;let s;return s=128&t?i?r?n[e+7]:n[e+6]:r?n[e+5]:n[e+4]:i?r?n[e+3]:n[e+2]:r?n[e+1]:n[e],!!(s&1<<t)}function di(t,e){return!(t&ot.Self||t&ot.Host&&e)}class pi{constructor(t,e){this._tNode=t,this._lView=e}get(t,e){return oi(this._tNode,this._lView,t,void 0,e)}}function mi(t){const e=t;if(kt(t))return()=>{const t=mi(Et(e));return t?t():null};let n=we(e);if(null===n){const t=pt(e);n=t&&t.factory}return n||null}function fi(t){return tt(()=>{const e=t.prototype.constructor,n=e[Nt]||mi(e),i=Object.prototype;let r=Object.getPrototypeOf(t.prototype).constructor;for(;r&&r!==i;){const t=r[Nt]||mi(r);if(t&&t!==n)return t;r=Object.getPrototypeOf(r)}return t=>new t})}function gi(t){return t.ngDebugContext}function _i(t){return t.ngOriginalError}function yi(t,...e){t.error(...e)}class vi{constructor(){this._console=console}handleError(t){const e=this._findOriginalError(t),n=this._findContext(t),i=function(t){return t.ngErrorLogger||yi}(t);i(this._console,"ERROR",t),e&&i(this._console,"ORIGINAL ERROR",e),n&&i(this._console,"ERROR CONTEXT",n)}_findContext(t){return t?gi(t)?gi(t):this._findContext(_i(t)):null}_findOriginalError(t){let e=_i(t);for(;e&&_i(e);)e=_i(e);return e}}class bi{constructor(t){this.changingThisBreaksApplicationSecurity=t}toString(){return"SafeValue must use [property]=binding: "+this.changingThisBreaksApplicationSecurity+" (see http://g.co/ng/security#xss)"}}class wi extends bi{getTypeName(){return"HTML"}}class Si extends bi{getTypeName(){return"Style"}}class Ei extends bi{getTypeName(){return"Script"}}class ki extends bi{getTypeName(){return"URL"}}class Ci extends bi{getTypeName(){return"ResourceURL"}}function xi(t){return t instanceof bi?t.changingThisBreaksApplicationSecurity:t}function Ti(t,e){const n=Ii(t);if(null!=n&&n!==e){if("ResourceURL"===n&&"URL"===e)return!0;throw new Error(`Required a safe ${e}, got a ${n} (see http://g.co/ng/security#xss)`)}return n===e}function Ii(t){return t instanceof bi&&t.getTypeName()||null}let Ri=!0,Oi=!1;function Ai(){return Oi=!0,Ri}class Di{getInertBodyElement(t){t="<body><remove></remove>"+t+"</body>";try{const e=(new window.DOMParser).parseFromString(t,"text/html").body;return e.removeChild(e.firstChild),e}catch(e){return null}}}class Pi{constructor(t){if(this.defaultDoc=t,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const t=this.inertDocument.createElement("html");this.inertDocument.appendChild(t);const e=this.inertDocument.createElement("body");t.appendChild(e)}}getInertBodyElement(t){const e=this.inertDocument.createElement("template");if("content"in e)return e.innerHTML=t,e;const n=this.inertDocument.createElement("body");return n.innerHTML=t,this.defaultDoc.documentMode&&this.stripCustomNsAttrs(n),n}stripCustomNsAttrs(t){const e=t.attributes;for(let i=e.length-1;0<i;i--){const n=e.item(i).name;"xmlns:ns1"!==n&&0!==n.indexOf("ns1:")||t.removeAttribute(n)}let n=t.firstChild;for(;n;)n.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(n),n=n.nextSibling}}const Mi=/^(?:(?:https?|mailto|ftp|tel|file):|[^&:/?#]*(?:[/?#]|$))/gi,Ni=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function Li(t){return(t=String(t)).match(Mi)||t.match(Ni)?t:(Ai()&&console.warn(`WARNING: sanitizing unsafe URL value ${t} (see http://g.co/ng/security#xss)`),"unsafe:"+t)}function Fi(t){const e={};for(const n of t.split(","))e[n]=!0;return e}function Ui(...t){const e={};for(const n of t)for(const t in n)n.hasOwnProperty(t)&&(e[t]=!0);return e}const Bi=Fi("area,br,col,hr,img,wbr"),ji=Fi("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),Vi=Fi("rp,rt"),Ki=Ui(Vi,ji),qi=Ui(Bi,Ui(ji,Fi("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Ui(Vi,Fi("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),Ki),Gi=Fi("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),$i=Fi("srcset"),Hi=Ui(Gi,$i,Fi("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Fi("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),zi=Fi("script,style,template");class Wi{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(t){let e=t.firstChild,n=!0;for(;e;)if(e.nodeType===Node.ELEMENT_NODE?n=this.startElement(e):e.nodeType===Node.TEXT_NODE?this.chars(e.nodeValue):this.sanitizedSomething=!0,n&&e.firstChild)e=e.firstChild;else for(;e;){e.nodeType===Node.ELEMENT_NODE&&this.endElement(e);let t=this.checkClobberedElement(e,e.nextSibling);if(t){e=t;break}e=this.checkClobberedElement(e,e.parentNode)}return this.buf.join("")}startElement(t){const e=t.nodeName.toLowerCase();if(!qi.hasOwnProperty(e))return this.sanitizedSomething=!0,!zi.hasOwnProperty(e);this.buf.push("<"),this.buf.push(e);const n=t.attributes;for(let r=0;r<n.length;r++){const t=n.item(r),e=t.name,s=e.toLowerCase();if(!Hi.hasOwnProperty(s)){this.sanitizedSomething=!0;continue}let o=t.value;Gi[s]&&(o=Li(o)),$i[s]&&(i=o,o=(i=String(i)).split(",").map(t=>Li(t.trim())).join(", ")),this.buf.push(" ",e,'="',Qi(o),'"')}var i;return this.buf.push(">"),!0}endElement(t){const e=t.nodeName.toLowerCase();qi.hasOwnProperty(e)&&!Bi.hasOwnProperty(e)&&(this.buf.push("</"),this.buf.push(e),this.buf.push(">"))}chars(t){this.buf.push(Qi(t))}checkClobberedElement(t,e){if(e&&(t.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error("Failed to sanitize html because the element is clobbered: "+t.outerHTML);return e}}const Yi=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Xi=/([^\#-~ |!])/g;function Qi(t){return t.replace(/&/g,"&amp;").replace(Yi,(function(t){return"&#"+(1024*(t.charCodeAt(0)-55296)+(t.charCodeAt(1)-56320)+65536)+";"})).replace(Xi,(function(t){return"&#"+t.charCodeAt(0)+";"})).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let Zi;function Ji(t,e){let n=null;try{Zi=Zi||function(t){return function(){try{return!!(new window.DOMParser).parseFromString("","text/html")}catch(t){return!1}}()?new Di:new Pi(t)}(t);let i=e?String(e):"";n=Zi.getInertBodyElement(i);let r=5,s=i;do{if(0===r)throw new Error("Failed to sanitize html because the input is unstable");r--,i=s,s=n.innerHTML,n=Zi.getInertBodyElement(i)}while(i!==s);const o=new Wi,a=o.sanitizeChildren(tr(n)||n);return Ai()&&o.sanitizedSomething&&console.warn("WARNING: sanitizing HTML stripped some content, see http://g.co/ng/security#xss"),a}finally{if(n){const t=tr(n)||n;for(;t.firstChild;)t.removeChild(t.firstChild)}}}function tr(t){return"content"in t&&function(t){return t.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===t.nodeName}(t)?t.content:null}var er=function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t}({});function nr(t){const e=rr();return e?e.sanitize(er.HTML,t)||"":Ti(t,"HTML")?xi(t):Ji(Fe(),zn(t))}function ir(t){const e=rr();return e?e.sanitize(er.URL,t)||"":Ti(t,"URL")?xi(t):Li(zn(t))}function rr(){const t=tn();return t&&t[12]}function sr(t,e){t.__ngContext__=e}function or(t){throw new Error("Multiple components match node with tagname "+t.tagName)}function ar(){throw new Error("Cannot mix multi providers and regular providers")}function cr(t,e,n){let i=t.length;for(;;){const r=t.indexOf(e,n);if(-1===r)return r;if(0===r||t.charCodeAt(r-1)<=32){const n=e.length;if(r+n===i||t.charCodeAt(r+n)<=32)return r}n=r+1}}function lr(t,e,n){let i=0;for(;i<t.length;){let r=t[i++];if(n&&"class"===r){if(r=t[i],-1!==cr(r.toLowerCase(),e,0))return!0}else if(1===r){for(;i<t.length&&"string"==typeof(r=t[i++]);)if(r.toLowerCase()===e)return!0;return!1}}return!1}function ur(t){return 0===t.type&&"ng-template"!==t.tagName}function hr(t,e,n){return e===(0!==t.type||n?t.tagName:"ng-template")}function dr(t,e,n){let i=4;const r=t.attrs||[],s=function(t){for(let e=0;e<t.length;e++)if(Bn(t[e]))return e;return t.length}(r);let o=!1;for(let a=0;a<e.length;a++){const c=e[a];if("number"!=typeof c){if(!o)if(4&i){if(i=2|1&i,""!==c&&!hr(t,c,n)||""===c&&1===e.length){if(pr(i))return!1;o=!0}}else{const l=8&i?c:e[++a];if(8&i&&null!==t.attrs){if(!lr(t.attrs,l,n)){if(pr(i))return!1;o=!0}continue}const u=mr(8&i?"class":c,r,ur(t),n);if(-1===u){if(pr(i))return!1;o=!0;continue}if(""!==l){let t;t=u>s?"":r[u+1].toLowerCase();const e=8&i?t:null;if(e&&-1!==cr(e,l,0)||2&i&&l!==t){if(pr(i))return!1;o=!0}}}}else{if(!o&&!pr(i)&&!pr(c))return!1;if(o&&pr(c))continue;o=!1,i=c|1&i}}return pr(i)||o}function pr(t){return 0==(1&t)}function mr(t,e,n,i){if(null===e)return-1;let r=0;if(i||!n){let n=!1;for(;r<e.length;){const i=e[r];if(i===t)return r;if(3===i||6===i)n=!0;else{if(1===i||2===i){let t=e[++r];for(;"string"==typeof t;)t=e[++r];continue}if(4===i)break;if(0===i){r+=4;continue}}r+=n?1:2}return-1}return function(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){const i=t[n];if("number"==typeof i)return-1;if(i===e)return n;n++}return-1}(e,t)}function fr(t,e,n=!1){for(let i=0;i<e.length;i++)if(dr(t,e[i],n))return!0;return!1}function gr(t,e){t:for(let n=0;n<e.length;n++){const i=e[n];if(t.length===i.length){for(let e=0;e<t.length;e++)if(t[e]!==i[e])continue t;return!0}}return!1}function _r(t,e){return t?":not("+e.trim()+")":e}function yr(t){let e=t[0],n=1,i=2,r="",s=!1;for(;n<t.length;){let o=t[n];if("string"==typeof o)if(2&i){const e=t[++n];r+="["+o+(e.length>0?'="'+e+'"':"")+"]"}else 8&i?r+="."+o:4&i&&(r+=" "+o);else""===r||pr(o)||(e+=_r(s,r),r=""),i=o,s=s||!pr(i);n++}return""!==r&&(e+=_r(s,r)),e}const vr={};function br(t){const e=t[3];return ke(e)?e[3]:e}function wr(t){return Er(t[13])}function Sr(t){return Er(t[4])}function Er(t){for(;null!==t&&!ke(t);)t=t[4];return t}function kr(t){Cr(en(),tn(),xn()+t,cn())}function Cr(t,e,n,i){if(!i)if(3==(3&e[2])){const i=t.preOrderCheckHooks;null!==i&&Dn(e,i,n)}else{const i=t.preOrderHooks;null!==i&&Pn(e,i,0,n)}Tn(n)}function xr(t,e){return t<<17|e<<2}function Tr(t){return t>>17&32767}function Ir(t){return 2|t}function Rr(t){return(131068&t)>>2}function Or(t,e){return-131069&t|e<<2}function Ar(t){return 1|t}function Dr(t,e){const n=t.contentQueries;if(null!==n)for(let i=0;i<n.length;i+=2){const r=n[i],s=n[i+1];if(-1!==s){const n=t.data[s];yn(r),n.contentQueries(2,e[s],s)}}}function Pr(t,e,n){return Ue(e)?e.createElement(t,n):null===n?e.createElement(t):e.createElementNS(n,t)}function Mr(t,e,n,i,r,s,o,a,c,l){const u=e.blueprint.slice();return u[0]=r,u[2]=140|i,Xe(u),u[3]=u[15]=t,u[8]=n,u[10]=o||t&&t[10],u[11]=a||t&&t[11],u[12]=c||t&&t[12]||null,u[9]=l||t&&t[9]||null,u[6]=s,u[16]=2==e.type?t[16]:u,u}function Nr(t,e,n,i,r,s){const o=n+20,a=t.data[o]||function(t,e,n,i,r,s){const o=rn(),a=on(),c=a?o:o&&o.parent,l=t.data[n]=Hr(0,c&&c!==e?c:null,i,n,r,s);return null===t.firstChild&&(t.firstChild=l),o&&(!a||null!=o.child||null===l.parent&&2!==o.type?a||(o.next=l):o.child=l),l}(t,e,o,i,r,s);return sn(a,!0),a}function Lr(t,e,n){bn(e,e[6]);try{const i=t.viewQuery;null!==i&&ms(1,i,n);const r=t.template;null!==r&&Br(t,e,r,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),t.staticContentQueries&&Dr(t,e),t.staticViewQueries&&ms(2,t.viewQuery,n);const s=t.components;null!==s&&function(t,e){for(let n=0;n<e.length;n++)ls(t,e[n])}(e,s)}catch(i){throw t.firstCreatePass&&(t.incompleteFirstPass=!0),i}finally{e[2]&=-5,Cn()}}function Fr(t,e,n,i){const r=e[2];if(256==(256&r))return;bn(e,e[6]);const s=cn();try{Xe(e),Ze.lFrame.bindingIndex=t.bindingStartIndex,null!==n&&Br(t,e,n,2,i);const o=3==(3&r);if(!s)if(o){const n=t.preOrderCheckHooks;null!==n&&Dn(e,n,null)}else{const n=t.preOrderHooks;null!==n&&Pn(e,n,0,null),Mn(e,0)}if(function(t){for(let e=wr(t);null!==e;e=Sr(e)){if(!e[2])continue;const t=e[9];for(let e=0;e<t.length;e++){const n=t[e],i=n[3];0==(1024&n[2])&&Qe(i,1),n[2]|=1024}}}(e),function(t){for(let e=wr(t);null!==e;e=Sr(e))for(let t=10;t<e.length;t++){const n=e[t],i=n[1];We(n)&&Fr(i,n,i.template,n[8])}}(e),null!==t.contentQueries&&Dr(t,e),!s)if(o){const n=t.contentCheckHooks;null!==n&&Dn(e,n)}else{const n=t.contentHooks;null!==n&&Pn(e,n,1),Mn(e,1)}!function(t,e){try{const n=t.expandoInstructions;if(null!==n){let i=t.expandoStartIndex,r=-1,s=-1;for(let t=0;t<n.length;t++){const o=n[t];"number"==typeof o?o<=0?(s=0-o,Tn(s),i+=9+n[++t],r=i):i+=o:(null!==o&&(mn(i,r),o(2,e[r])),r++)}}}finally{Tn(-1)}}(t,e);const a=t.components;null!==a&&function(t,e){for(let n=0;n<e.length;n++)cs(t,e[n])}(e,a);const c=t.viewQuery;if(null!==c&&ms(2,c,i),!s)if(o){const n=t.viewCheckHooks;null!==n&&Dn(e,n)}else{const n=t.viewHooks;null!==n&&Pn(e,n,2),Mn(e,2)}!0===t.firstUpdatePass&&(t.firstUpdatePass=!1),s||(e[2]&=-73),1024&e[2]&&(e[2]&=-1025,Qe(e[3],-1))}finally{Cn()}}function Ur(t,e,n,i){const r=e[10],s=!cn(),o=ze(e);try{s&&!o&&r.begin&&r.begin(),o&&Lr(t,e,i),Fr(t,e,n,i)}finally{s&&!o&&r.end&&r.end()}}function Br(t,e,n,i,r){const s=xn();try{Tn(-1),2&i&&e.length>20&&Cr(t,e,0,cn()),n(i,r)}finally{Tn(s)}}function jr(t,e,n){if(Ce(e)){const i=e.directiveEnd;for(let r=e.directiveStart;r<i;r++){const e=t.data[r];e.contentQueries&&e.contentQueries(1,n[r],r)}}}function Vr(t,e,n){Je()&&(function(t,e,n,i){const r=n.directiveStart,s=n.directiveEnd;t.firstCreatePass||ei(n,e),sr(i,e);const o=n.initialInputs;for(let a=r;a<s;a++){const i=t.data[a],s=Ie(i);s&&rs(e,n,i);const c=ui(e,t,a,n);sr(c,e),null!==o&&ss(0,a-r,c,i,0,o),s&&($e(n.index,e)[8]=c)}}(t,e,n,Ke(n,e)),128==(128&n.flags)&&function(t,e,n){const i=n.directiveStart,r=n.directiveEnd,s=t.expandoInstructions,o=t.firstCreatePass,a=n.index-20,c=Ze.lFrame.currentDirectiveIndex;try{Tn(a);for(let n=i;n<r;n++){const i=t.data[n],r=e[n];fn(n),null!==i.hostBindings||0!==i.hostVars||null!==i.hostAttrs?Zr(i,r):o&&s.push(null)}}finally{Tn(-1),fn(c)}}(t,e,n))}function Kr(t,e,n=Ke){const i=e.localNames;if(null!==i){let r=e.index+1;for(let s=0;s<i.length;s+=2){const o=i[s+1],a=-1===o?n(e,t):t[o];t[r++]=a}}}function qr(t){const e=t.tView;return null===e||e.incompleteFirstPass?t.tView=Gr(1,-1,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts):e}function Gr(t,e,n,i,r,s,o,a,c,l){const u=20+i,h=u+r,d=function(t,e){const n=[];for(let i=0;i<e;i++)n.push(i<t?null:vr);return n}(u,h);return d[1]={type:t,id:e,blueprint:d,template:n,queries:null,viewQuery:a,node:null,data:d.slice().fill(null,u),bindingStartIndex:u,expandoStartIndex:h,expandoInstructions:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof s?s():s,pipeRegistry:"function"==typeof o?o():o,firstChild:null,schemas:c,consts:l,incompleteFirstPass:!1}}function $r(t,e,n,i){const r=gs(e);r.push(n),t.firstCreatePass&&function(t){return t.cleanup||(t.cleanup=[])}(t).push(i,r.length-1)}function Hr(t,e,n,i,r,s){return{type:n,index:i,injectorIndex:e?e.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,tagName:r,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function zr(t,e,n){for(let i in t)if(t.hasOwnProperty(i)){const r=t[i];(n=null===n?{}:n).hasOwnProperty(i)?n[i].push(e,r):n[i]=[e,r]}return n}function Wr(t,e,n,i,r,s,o,a){const c=Ke(e,n);let l,u=e.inputs;var h;!a&&null!=u&&(l=u[i])?(vs(t,n,l,i,r),xe(e)&&function(t,e){const n=$e(e,t);16&n[2]||(n[2]|=64)}(n,e.index)):3===e.type&&(i="class"===(h=i)?"className":"for"===h?"htmlFor":"formaction"===h?"formAction":"innerHtml"===h?"innerHTML":"readonly"===h?"readOnly":"tabindex"===h?"tabIndex":h,r=null!=o?o(r,e.tagName||"",i):r,Ue(s)?s.setProperty(c,i,r):jn(i)||(c.setProperty?c.setProperty(i,r):c[i]=r))}function Yr(t,e,n,i){let r=!1;if(Je()){const s=function(t,e,n){const i=t.directiveRegistry;let r=null;if(i)for(let s=0;s<i.length;s++){const o=i[s];fr(n,o.selectors,!1)&&(r||(r=[]),si(ei(n,e),t,o.type),Ie(o)?(2&n.flags&&or(n),ts(t,n),r.unshift(o)):r.push(o))}return r}(t,e,n),o=null===i?null:{"":-1};if(null!==s){let i=0;r=!0,ns(n,t.data.length,s.length);for(let t=0;t<s.length;t++){const e=s[t];e.providersResolver&&e.providersResolver(e)}Jr(t,n,s.length);let a=!1,c=!1;for(let r=0;r<s.length;r++){const l=s[r];n.mergedAttrs=Vn(n.mergedAttrs,l.hostAttrs),is(t,e,l),es(t.data.length-1,l,o),null!==l.contentQueries&&(n.flags|=8),null===l.hostBindings&&null===l.hostAttrs&&0===l.hostVars||(n.flags|=128);const u=l.type.prototype;!a&&(u.ngOnChanges||u.ngOnInit||u.ngDoCheck)&&((t.preOrderHooks||(t.preOrderHooks=[])).push(n.index-20),a=!0),c||!u.ngOnChanges&&!u.ngDoCheck||((t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(n.index-20),c=!0),Xr(t,l),i+=l.hostVars}!function(t,e){const n=e.directiveEnd,i=t.data,r=e.attrs,s=[];let o=null,a=null;for(let c=e.directiveStart;c<n;c++){const t=i[c],n=t.inputs,l=null===r||ur(e)?null:os(n,r);s.push(l),o=zr(n,c,o),a=zr(t.outputs,c,a)}null!==o&&(o.hasOwnProperty("class")&&(e.flags|=16),o.hasOwnProperty("style")&&(e.flags|=32)),e.initialInputs=s,e.inputs=o,e.outputs=a}(t,n),Qr(t,e,i)}o&&function(t,e,n){if(e){const i=t.localNames=[];for(let t=0;t<e.length;t+=2){const r=n[e[t+1]];if(null==r)throw new Error(`Export of name '${e[t+1]}' not found!`);i.push(e[t],r)}}}(n,i,o)}return n.mergedAttrs=Vn(n.mergedAttrs,n.attrs),r}function Xr(t,e){const n=t.expandoInstructions;n.push(e.hostBindings),0!==e.hostVars&&n.push(e.hostVars)}function Qr(t,e,n){for(let i=0;i<n;i++)e.push(vr),t.blueprint.push(vr),t.data.push(null)}function Zr(t,e){null!==t.hostBindings&&t.hostBindings(1,e)}function Jr(t,e,n){const i=20-e.index,r=t.data.length-(1048575&e.providerIndexes);(t.expandoInstructions||(t.expandoInstructions=[])).push(i,r,n)}function ts(t,e){e.flags|=2,(t.components||(t.components=[])).push(e.index)}function es(t,e,n){if(n){if(e.exportAs)for(let i=0;i<e.exportAs.length;i++)n[e.exportAs[i]]=t;Ie(e)&&(n[""]=t)}}function ns(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function is(t,e,n){t.data.push(n);const i=n.factory||(n.factory=we(n.type)),r=new Fn(i,Ie(n),null);t.blueprint.push(r),e.push(r)}function rs(t,e,n){const i=Ke(e,t),r=qr(n),s=t[10],o=us(t,Mr(t,r,null,n.onPush?64:16,i,e,s,s.createRenderer(i,n)));t[e.index]=o}function ss(t,e,n,i,r,s){const o=s[e];if(null!==o){const t=i.setInput;for(let e=0;e<o.length;){const r=o[e++],s=o[e++],a=o[e++];null!==t?i.setInput(n,a,r,s):n[s]=a}}}function os(t,e){let n=null,i=0;for(;i<e.length;){const r=e[i];if(0!==r)if(5!==r){if("number"==typeof r)break;t.hasOwnProperty(r)&&(null===n&&(n=[]),n.push(r,t[r],e[i+1])),i+=2}else i+=2;else i+=4}return n}function as(t,e,n,i){return new Array(t,!0,!1,e,null,0,i,n,null,null)}function cs(t,e){const n=$e(e,t);if(We(n)){const t=n[1];80&n[2]?Fr(t,n,t.template,n[8]):n[5]>0&&function t(e){for(let i=wr(e);null!==i;i=Sr(i))for(let e=10;e<i.length;e++){const n=i[e];if(1024&n[2]){const t=n[1];Fr(t,n,t.template,n[8])}else n[5]>0&&t(n)}const n=e[1].components;if(null!==n)for(let i=0;i<n.length;i++){const r=$e(n[i],e);We(r)&&r[5]>0&&t(r)}}(n)}}function ls(t,e){const n=$e(e,t),i=n[1];!function(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}(i,n),Lr(i,n,n[8])}function us(t,e){return t[13]?t[14][4]=e:t[13]=e,t[14]=e,e}function hs(t){for(;t;){t[2]|=64;const e=br(t);if(Re(t)&&!e)return t;t=e}return null}function ds(t,e,n){const i=e[10];i.begin&&i.begin();try{Fr(t,e,t.template,n)}catch(r){throw ys(e,r),r}finally{i.end&&i.end()}}function ps(t){!function(t){for(let e=0;e<t.components.length;e++){const n=t.components[e],i=He(n),r=i[1];Ur(r,i,r.template,n)}}(t[8])}function ms(t,e,n){yn(0),e(t,n)}const fs=(()=>Promise.resolve(null))();function gs(t){return t[7]||(t[7]=[])}function _s(t,e,n){return(null===t||Ie(t))&&(n=function(t){for(;Array.isArray(t);){if("object"==typeof t[1])return t;t=t[0]}return null}(n[e.index])),n[11]}function ys(t,e){const n=t[9],i=n?n.get(vi,null):null;i&&i.handleError(e)}function vs(t,e,n,i,r){for(let s=0;s<n.length;){const o=n[s++],a=n[s++],c=e[o],l=t.data[o];null!==l.setInput?l.setInput(c,r,i,a):c[a]=r}}function bs(t,e,n){const i=Ve(e,t),r=t[11];Ue(r)?r.setValue(i,n):i.textContent=n}function ws(t,e){const n=e[3];return-1===t.index?ke(n)?n:null:n}function Ss(t,e){const n=ws(t,e);return n?Ms(e[11],n[7]):null}function Es(t,e,n,i,r){if(null!=i){let s,o=!1;ke(i)?s=i:Ee(i)&&(o=!0,i=i[0]);const a=je(i);0===t&&null!==n?null==r?Ds(e,n,a):As(e,n,a,r||null):1===t&&null!==n?As(e,n,a,r||null):2===t?function(t,e,n){const i=Ms(t,e);i&&function(t,e,n,i){Ue(t)?t.removeChild(e,n,i):e.removeChild(n)}(t,i,e,n)}(e,a,o):3===t&&e.destroyNode(a),null!=s&&function(t,e,n,i,r){const s=n[7];s!==je(n)&&Es(e,t,i,s,r);for(let o=10;o<n.length;o++){const r=n[o];Bs(r[1],r,t,e,i,s)}}(e,t,s,n,r)}}function ks(t,e,n,i){const r=Ss(t.node,e);r&&Bs(t,e,e[11],n?1:2,r,i)}function Cs(t,e){const n=t[9],i=n.indexOf(e);1024&e[2]&&Qe(e[3],-1),n.splice(i,1)}function xs(t,e){if(t.length<=10)return;const n=10+e,i=t[n];if(i){const r=i[17];null!==r&&r!==t&&Cs(r,i),e>0&&(t[n-1][4]=i[4]);const s=ne(t,10+e);ks(i[1],i,!1,null);const o=s[19];null!==o&&o.detachView(s[1]),i[3]=null,i[4]=null,i[2]&=-129}return i}function Ts(t,e){if(!(256&e[2])){const n=e[11];Ue(n)&&n.destroyNode&&Bs(t,e,n,3,null,null),function(t){let e=t[13];if(!e)return Rs(t[1],t);for(;e;){let n=null;if(Ee(e))n=e[13];else{const t=e[10];t&&(n=t)}if(!n){for(;e&&!e[4]&&e!==t;)Ee(e)&&Rs(e[1],e),e=Is(e,t);null===e&&(e=t),Ee(e)&&Rs(e[1],e),n=e&&e[4]}e=n}}(e)}}function Is(t,e){let n;return Ee(t)&&(n=t[6])&&2===n.type?ws(n,t):t[3]===e?null:t[3]}function Rs(t,e){if(!(256&e[2])){e[2]&=-129,e[2]|=256,function(t,e){let n;if(null!=t&&null!=(n=t.destroyHooks))for(let i=0;i<n.length;i+=2){const t=e[n[i]];if(!(t instanceof Fn)){const e=n[i+1];if(Array.isArray(e))for(let n=0;n<e.length;n+=2)e[n+1].call(t[e[n]]);else e.call(t)}}}(t,e),function(t,e){const n=t.cleanup;if(null!==n){const t=e[7];for(let i=0;i<n.length-1;i+=2)if("string"==typeof n[i]){const r=n[i+1],s="function"==typeof r?r(e):je(e[r]),o=t[n[i+2]],a=n[i+3];"boolean"==typeof a?s.removeEventListener(n[i],o,a):a>=0?t[a]():t[-a].unsubscribe(),i+=2}else n[i].call(t[n[i+1]]);e[7]=null}}(t,e);const n=e[6];n&&3===n.type&&Ue(e[11])&&e[11].destroy();const i=e[17];if(null!==i&&ke(e[3])){i!==e[3]&&Cs(i,e);const n=e[19];null!==n&&n.detachView(t)}}}function Os(t,e,n){let i=e.parent;for(;null!=i&&(4===i.type||5===i.type);)i=(e=i).parent;if(null==i){const t=n[6];return 2===t.type?Ss(t,n):n[0]}if(e&&5===e.type&&4&e.flags)return Ke(e,n).parentNode;if(2&i.flags){const e=t.data,n=e[e[i.index].directiveStart].encapsulation;if(n!==ce.ShadowDom&&n!==ce.Native)return null}return Ke(i,n)}function As(t,e,n,i){Ue(t)?t.insertBefore(e,n,i):e.insertBefore(n,i,!0)}function Ds(t,e,n){Ue(t)?t.appendChild(e,n):e.appendChild(n)}function Ps(t,e,n,i){null!==i?As(t,e,n,i):Ds(t,e,n)}function Ms(t,e){return Ue(t)?t.parentNode(e):e.parentNode}function Ns(t,e){if(2===t.type){const n=ws(t,e);return null===n?null:Fs(n.indexOf(e,10)-10,n)}return 4===t.type||5===t.type?Ke(t,e):null}function Ls(t,e,n,i){const r=Os(t,i,e);if(null!=r){const t=e[11],s=Ns(i.parent||e[6],e);if(Array.isArray(n))for(let e=0;e<n.length;e++)Ps(t,r,n[e],s);else Ps(t,r,n,s)}}function Fs(t,e){const n=10+t+1;if(n<e.length){const t=e[n],i=t[1].firstChild;if(null!==i)return function t(e,n){if(null!==n){const i=n.type;if(3===i)return Ke(n,e);if(0===i)return Fs(-1,e[n.index]);if(4===i||5===i){const i=n.child;if(null!==i)return t(e,i);{const t=e[n.index];return ke(t)?Fs(-1,t):je(t)}}{const i=e[16],r=i[6],s=br(i),o=r.projection[n.projection];return null!=o?t(s,o):t(e,n.next)}}return null}(t,i)}return e[7]}function Us(t,e,n,i,r,s,o){for(;null!=n;){const a=i[n.index],c=n.type;o&&0===e&&(a&&sr(je(a),i),n.flags|=4),64!=(64&n.flags)&&(4===c||5===c?(Us(t,e,n.child,i,r,s,!1),Es(e,t,r,a,s)):1===c?js(t,e,i,n,r,s):Es(e,t,r,a,s)),n=o?n.projectionNext:n.next}}function Bs(t,e,n,i,r,s){Us(n,i,t.node.child,e,r,s,!1)}function js(t,e,n,i,r,s){const o=n[16],a=o[6].projection[i.projection];if(Array.isArray(a))for(let c=0;c<a.length;c++)Es(e,t,r,a[c],s);else Us(t,e,a,o[3],r,s,!0)}function Vs(t,e,n){Ue(t)?t.setAttribute(e,"style",n):e.style.cssText=n}function Ks(t,e,n){Ue(t)?""===n?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n):e.className=n}class qs{constructor(t,e){this._lView=t,this._cdRefInjectingView=e,this._appRef=null,this._viewContainerRef=null}get rootNodes(){const t=this._lView;return null==t[0]?function t(e,n,i,r,s=!1){for(;null!==i;){const o=n[i.index];if(null!==o&&r.push(je(o)),ke(o))for(let e=10;e<o.length;e++){const n=o[e],i=n[1].firstChild;null!==i&&t(n[1],n,i,r)}const a=i.type;if(4===a||5===a)t(e,n,i.child,r);else if(1===a){const e=n[16],s=e[6].projection[i.projection];if(Array.isArray(s))r.push(...s);else{const n=br(e);t(n[1],n,s,r,!0)}}i=s?i.projectionNext:i.next}return r}(t[1],t,t[6].child,[]):[]}get context(){return this._lView[8]}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._viewContainerRef){const t=this._viewContainerRef.indexOf(this);t>-1&&this._viewContainerRef.detach(t),this._viewContainerRef=null}Ts(this._lView[1],this._lView)}onDestroy(t){$r(this._lView[1],this._lView,null,t)}markForCheck(){hs(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){ds(this._lView[1],this._lView,this.context)}checkNoChanges(){!function(t,e,n){ln(!0);try{ds(t,e,n)}finally{ln(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(t){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._viewContainerRef=t}detachFromAppRef(){var t;this._appRef=null,Bs(this._lView[1],t=this._lView,t[11],2,null,null)}attachToAppRef(t){if(this._viewContainerRef)throw new Error("This view is already attached to a ViewContainer!");this._appRef=t}}class Gs extends qs{constructor(t){super(t),this._view=t}detectChanges(){ps(this._view)}checkNoChanges(){!function(t){ln(!0);try{ps(t)}finally{ln(!1)}}(this._view)}get context(){return null}}let $s,Hs,zs;function Ws(t,e,n){return $s||($s=class extends t{}),new $s(Ke(e,n))}function Ys(t,e,n,i){return Hs||(Hs=class extends t{constructor(t,e,n){super(),this._declarationView=t,this._declarationTContainer=e,this.elementRef=n}createEmbeddedView(t){const e=this._declarationTContainer.tViews,n=Mr(this._declarationView,e,t,16,null,e.node);n[17]=this._declarationView[this._declarationTContainer.index];const i=this._declarationView[19];return null!==i&&(n[19]=i.createEmbeddedView(e)),Lr(e,n,t),new qs(n)}}),0===n.type?new Hs(i,n,Ws(e,n,i)):null}function Xs(t,e,n,i){let r;zs||(zs=class extends t{constructor(t,e,n){super(),this._lContainer=t,this._hostTNode=e,this._hostView=n}get element(){return Ws(e,this._hostTNode,this._hostView)}get injector(){return new pi(this._hostTNode,this._hostView)}get parentInjector(){const t=ri(this._hostTNode,this._hostView),e=Hn(t,this._hostView),n=function(t,e,n){if(n.parent&&-1!==n.parent.injectorIndex){const t=n.parent.injectorIndex;let e=n.parent;for(;null!=e.parent&&t==e.parent.injectorIndex;)e=e.parent;return e}let i=$n(t),r=e,s=e[6];for(;i>1;)r=r[15],s=r[6],i--;return s}(t,this._hostView,this._hostTNode);return qn(t)&&null!=n?new pi(n,e):new pi(null,this._hostView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(t){return null!==this._lContainer[8]&&this._lContainer[8][t]||null}get length(){return this._lContainer.length-10}createEmbeddedView(t,e,n){const i=t.createEmbeddedView(e||{});return this.insert(i,n),i}createComponent(t,e,n,i,r){const s=n||this.parentInjector;if(!r&&null==t.ngModule&&s){const t=s.get(Zt,null);t&&(r=t)}const o=t.create(s,i,void 0,r);return this.insert(o.hostView,e),o}insert(t,e){const n=t._lView,i=n[1];if(t.destroyed)throw new Error("Cannot insert a destroyed View in a ViewContainer!");if(this.allocateContainerIfNeeded(),ke(n[3])){const e=this.indexOf(t);if(-1!==e)this.detach(e);else{const e=n[3],i=new zs(e,e[6],e[3]);i.detach(i.indexOf(t))}}const r=this._adjustIndex(e);return function(t,e,n,i){const r=10+i,s=n.length;i>0&&(n[r-1][4]=e),i<s-10?(e[4]=n[r],ee(n,10+i,e)):(n.push(e),e[4]=null),e[3]=n;const o=e[17];null!==o&&n!==o&&function(t,e){const n=t[9];e[16]!==e[3][3][16]&&(t[2]=!0),null===n?t[9]=[e]:n.push(e)}(o,e);const a=e[19];null!==a&&a.insertView(t),e[2]|=128}(i,n,this._lContainer,r),ks(i,n,!0,Fs(r,this._lContainer)),t.attachToViewContainerRef(this),ee(this._lContainer[8],r,t),t}move(t,e){if(t.destroyed)throw new Error("Cannot move a destroyed View in a ViewContainer!");return this.insert(t,e)}indexOf(t){const e=this._lContainer[8];return null!==e?e.indexOf(t):-1}remove(t){this.allocateContainerIfNeeded();const e=this._adjustIndex(t,-1);!function(t,e){const n=xs(t,e);n&&Ts(n[1],n)}(this._lContainer,e),ne(this._lContainer[8],e)}detach(t){this.allocateContainerIfNeeded();const e=this._adjustIndex(t,-1),n=xs(this._lContainer,e);return n&&null!=ne(this._lContainer[8],e)?new qs(n):null}_adjustIndex(t,e=0){return null==t?this.length+e:t}allocateContainerIfNeeded(){null===this._lContainer[8]&&(this._lContainer[8]=[])}});const s=i[n.index];if(ke(s))r=s;else{let t;if(4===n.type)t=je(s);else if(t=i[11].createComment(""),Re(i)){const e=i[11],r=Ke(n,i);As(e,Ms(e,r),t,function(t,e){return Ue(t)?t.nextSibling(e):e.nextSibling}(e,r))}else Ls(i[1],i,t,n);i[n.index]=r=as(s,i,t,n),us(i,r)}return new zs(r,n,i)}function Qs(t=!1){return function(t,e,n){if(!n&&xe(t)){const n=$e(t.index,e);return new qs(n,n)}return 3===t.type||0===t.type||4===t.type||5===t.type?new qs(e[16],e):null}(rn(),tn(),t)}let Zs=(()=>{class t{}return t.__NG_ELEMENT_ID__=()=>Js(),t})();const Js=Qs,to=Function,eo=new Ft("Set Injector scope."),no={},io={},ro=[];let so=void 0;function oo(){return void 0===so&&(so=new Qt),so}function ao(t,e=null,n=null,i){return new co(t,n,e||oo(),i)}class co{constructor(t,e,n,i=null){this.parent=n,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const r=[];e&&te(e,n=>this.processProvider(n,t,e)),te([t],t=>this.processInjectorType(t,[],r)),this.records.set(Ut,ho(void 0,this));const s=this.records.get(eo);this.scope=null!=s?s.value:null,this.source=i||("object"==typeof t?null:vt(t))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(t=>t.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(t,e=Bt,n=ot.Default){this.assertNotDestroyed();const i=Gt(this);try{if(!(n&ot.SkipSelf)){let e=this.records.get(t);if(void 0===e){const n=("function"==typeof(r=t)||"object"==typeof r&&r instanceof Ft)&&ht(t);e=n&&this.injectableDefInScope(n)?ho(lo(t),no):null,this.records.set(t,e)}if(null!=e)return this.hydrate(t,e)}return(n&ot.Self?oo():this.parent).get(t,e=n&ot.Optional&&e===Bt?null:e)}catch(s){if("NullInjectorError"===s.name){if((s.ngTempTokenPath=s.ngTempTokenPath||[]).unshift(vt(t)),i)throw s;return function(t,e,n,i){const r=t.ngTempTokenPath;throw e.__source&&r.unshift(e.__source),t.message=function(t,e,n,i=null){t=t&&"\n"===t.charAt(0)&&"\u0275"==t.charAt(1)?t.substr(2):t;let r=vt(e);if(Array.isArray(e))r=e.map(vt).join(" -> ");else if("object"==typeof e){let t=[];for(let n in e)if(e.hasOwnProperty(n)){let i=e[n];t.push(n+":"+("string"==typeof i?JSON.stringify(i):vt(i)))}r=`{${t.join(", ")}}`}return`${n}${i?"("+i+")":""}[${r}]: ${t.replace(jt,"\n  ")}`}("\n"+t.message,r,n,i),t.ngTokenPath=r,t.ngTempTokenPath=null,t}(s,t,"R3InjectorError",this.source)}throw s}finally{Gt(i)}var r}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(t=>this.get(t))}toString(){const t=[];return this.records.forEach((e,n)=>t.push(vt(n))),`R3Injector[${t.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}processInjectorType(t,e,n){if(!(t=Et(t)))return!1;let i=pt(t);const r=null==i&&t.ngModule||void 0,s=void 0===r?t:r,o=-1!==n.indexOf(s);if(void 0!==r&&(i=pt(r)),null==i)return!1;if(null!=i.imports&&!o){let t;n.push(s);try{te(i.imports,i=>{this.processInjectorType(i,e,n)&&(void 0===t&&(t=[]),t.push(i))})}finally{}if(void 0!==t)for(let e=0;e<t.length;e++){const{ngModule:n,providers:i}=t[e];te(i,t=>this.processProvider(t,n,i||ro))}}this.injectorDefTypes.add(s),this.records.set(s,ho(i.factory,no));const a=i.providers;if(null!=a&&!o){const e=t;te(a,t=>this.processProvider(t,e,a))}return void 0!==r&&void 0!==t.providers}processProvider(t,e,n){let i=mo(t=Et(t))?t:Et(t&&t.provide);const r=function(t,e,n){return po(t)?ho(void 0,t.useValue):ho(uo(t,e,n),no)}(t,e,n);if(mo(t)||!0!==t.multi){const t=this.records.get(i);t&&void 0!==t.multi&&ar()}else{let e=this.records.get(i);e?void 0===e.multi&&ar():(e=ho(void 0,no,!0),e.factory=()=>Xt(e.multi),this.records.set(i,e)),i=t,e.multi.push(t)}this.records.set(i,r)}hydrate(t,e){var n;return e.value===io?function(t){throw new Error("Cannot instantiate cyclic dependency! "+t)}(vt(t)):e.value===no&&(e.value=io,e.value=e.factory()),"object"==typeof e.value&&e.value&&null!==(n=e.value)&&"object"==typeof n&&"function"==typeof n.ngOnDestroy&&this.onDestroy.add(e.value),e.value}injectableDefInScope(t){return!!t.providedIn&&("string"==typeof t.providedIn?"any"===t.providedIn||t.providedIn===this.scope:this.injectorDefTypes.has(t.providedIn))}}function lo(t){const e=ht(t),n=null!==e?e.factory:we(t);if(null!==n)return n;const i=pt(t);if(null!==i)return i.factory;if(t instanceof Ft)throw new Error(`Token ${vt(t)} is missing a \u0275prov definition.`);if(t instanceof Function)return function(t){const e=t.length;if(e>0){const n=ie(e,"?");throw new Error(`Can't resolve all parameters for ${vt(t)}: (${n.join(", ")}).`)}const n=function(t){const e=t&&(t[mt]||t[_t]||t[gt]&&t[gt]());if(e){const n=function(t){if(t.hasOwnProperty("name"))return t.name;const e=(""+t).match(/^function\s*([^\s(]+)/);return null===e?"":e[1]}(t);return console.warn(`DEPRECATED: DI is instantiating a token "${n}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${n}" class.`),e}return null}(t);return null!==n?()=>n.factory(t):()=>new t}(t);throw new Error("unreachable")}function uo(t,e,n){let i=void 0;if(mo(t)){const e=Et(t);return we(e)||lo(e)}if(po(t))i=()=>Et(t.useValue);else if((r=t)&&r.useFactory)i=()=>t.useFactory(...Xt(t.deps||[]));else if(function(t){return!(!t||!t.useExisting)}(t))i=()=>zt(Et(t.useExisting));else{const r=Et(t&&(t.useClass||t.provide));if(r||function(t,e,n){let i="";throw t&&e&&(i=` - only instances of Provider and Type are allowed, got: [${e.map(t=>t==n?"?"+n+"?":"...").join(", ")}]`),new Error(`Invalid provider for the NgModule '${vt(t)}'`+i)}(e,n,t),!function(t){return!!t.deps}(t))return we(r)||lo(r);i=()=>new r(...Xt(t.deps))}var r;return i}function ho(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function po(t){return null!==t&&"object"==typeof t&&Vt in t}function mo(t){return"function"==typeof t}const fo=function(t,e,n){return function(t,e=null,n=null,i){const r=ao(t,e,n,i);return r._resolveInjectorDefTypes(),r}({name:n},e,t,n)};let go=(()=>{class t{static create(t,e){return Array.isArray(t)?fo(t,e,""):fo(t.providers,t.parent,t.name||"")}}return t.THROW_IF_NOT_FOUND=Bt,t.NULL=new Qt,t.\u0275prov=lt({token:t,providedIn:"any",factory:()=>zt(Ut)}),t.__NG_ELEMENT_ID__=-1,t})();const _o=new Ft("AnalyzeForEntryComponents");function yo(t,e,n){let i=n?t.styles:null,r=n?t.classes:null,s=0;if(null!==e)for(let o=0;o<e.length;o++){const t=e[o];"number"==typeof t?s=t:1==s?r=bt(r,t):2==s&&(i=bt(i,t+": "+e[++o]+";"))}n?t.styles=i:t.stylesWithoutHost=i,n?t.classes=r:t.classesWithoutHost=r}let vo=null;function bo(){if(!vo){const t=Rt.Symbol;if(t&&t.iterator)vo=t.iterator;else{const t=Object.getOwnPropertyNames(Map.prototype);for(let e=0;e<t.length;++e){const n=t[e];"entries"!==n&&"size"!==n&&Map.prototype[n]===Map.prototype.entries&&(vo=n)}}}return vo}class wo{constructor(t){this.wrapped=t}static wrap(t){return new wo(t)}static unwrap(t){return wo.isWrapped(t)?t.wrapped:t}static isWrapped(t){return t instanceof wo}}function So(t){return!!Eo(t)&&(Array.isArray(t)||!(t instanceof Map)&&bo()in t)}function Eo(t){return null!==t&&("function"==typeof t||"object"==typeof t)}function ko(t,e,n){return t[e]=n}function Co(t,e,n){return!Object.is(t[e],n)&&(t[e]=n,!0)}function xo(t,e,n,i){const r=Co(t,e,n);return Co(t,e+1,i)||r}function To(t,e,n,i){const r=tn();return Co(r,dn(),e)&&(en(),function(t,e,n,i,r,s){const o=Ke(t,e),a=e[11];if(null==i)Ue(a)?a.removeAttribute(o,n,s):o.removeAttribute(n);else{const e=null==r?zn(i):r(i,t.tagName||"",n);Ue(a)?a.setAttribute(o,n,e,s):s?o.setAttributeNS(s,n,e):o.setAttribute(n,e)}}(In(),r,t,e,n,i)),To}function Io(t,e,n,i){return Co(t,dn(),n)?e+zn(n)+i:vr}function Ro(t,e,n,i,r,s,o,a){const c=tn(),l=en(),u=t+20,h=l.firstCreatePass?function(t,e,n,i,r,s,o,a,c){const l=e.consts,u=Nr(e,n[6],t,0,o||null,Ye(l,a));Yr(e,n,u,Ye(l,c)),An(e,u);const h=u.tViews=Gr(2,-1,i,r,s,e.directiveRegistry,e.pipeRegistry,null,e.schemas,l),d=Hr(0,null,2,-1,null,null);return d.injectorIndex=u.injectorIndex,h.node=d,null!==e.queries&&(e.queries.template(e,u),h.queries=e.queries.embeddedTView(u)),u}(t,l,c,e,n,i,r,s,o):l.data[u];sn(h,!1);const d=c[11].createComment("");Ls(l,c,d,h),sr(d,c),us(c,c[u]=as(d,c,d,h)),Te(h)&&Vr(l,c,h),null!=o&&Kr(c,h,a)}function Oo(t){return Ge(Ze.lFrame.contextLView,t)}function Ao(t,e=ot.Default){const n=tn();return null==n?zt(t,e):oi(rn(),n,Et(t),e)}function Do(t){return function(t,e){if("class"===e)return t.classes;if("style"===e)return t.styles;const n=t.attrs;if(n){const t=n.length;let i=0;for(;i<t;){const r=n[i];if(Bn(r))break;if(0===r)i+=2;else if("number"==typeof r)for(i++;i<t&&"string"==typeof n[i];)i++;else{if(r===e)return n[i+1];i+=2}}}return null}(rn(),t)}function Po(t,e,n){const i=tn();return Co(i,dn(),e)&&Wr(en(),In(),i,t,e,i[11],n,!1),Po}function Mo(t,e,n,i,r){const s=r?"class":"style";vs(t,n,e.inputs[s],s,i)}function No(t,e,n,i){const r=tn(),s=en(),o=20+t,a=r[11],c=r[o]=Pr(e,a,Ze.lFrame.currentNamespace),l=s.firstCreatePass?function(t,e,n,i,r,s,o){const a=e.consts,c=Ye(a,s),l=Nr(e,n[6],t,3,r,c);return Yr(e,n,l,Ye(a,o)),null!==l.attrs&&yo(l,l.attrs,!1),null!==l.mergedAttrs&&yo(l,l.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,l),l}(t,s,r,0,e,n,i):s.data[o];sn(l,!0);const u=l.mergedAttrs;null!==u&&Un(a,c,u);const h=l.classes;null!==h&&Ks(a,c,h);const d=l.styles;null!==d&&Vs(a,c,d),Ls(s,r,c,l),0===Ze.lFrame.elementDepthCount&&sr(c,r),Ze.lFrame.elementDepthCount++,Te(l)&&(Vr(s,r,l),jr(s,l,r)),null!==i&&Kr(r,l)}function Lo(){let t=rn();on()?an():(t=t.parent,sn(t,!1));const e=t;Ze.lFrame.elementDepthCount--;const n=en();n.firstCreatePass&&(An(n,t),Ce(t)&&n.queries.elementEnd(t)),null!=e.classesWithoutHost&&function(t){return 0!=(16&t.flags)}(e)&&Mo(n,e,tn(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function(t){return 0!=(32&t.flags)}(e)&&Mo(n,e,tn(),e.stylesWithoutHost,!1)}function Fo(t,e,n,i){No(t,e,n,i),Lo()}function Uo(t,e,n){const i=tn(),r=en(),s=t+20,o=r.firstCreatePass?function(t,e,n,i,r){const s=e.consts,o=Ye(s,i),a=Nr(e,n[6],t,4,"ng-container",o);return null!==o&&yo(a,o,!0),Yr(e,n,a,Ye(s,r)),null!==e.queries&&e.queries.elementStart(e,a),a}(t,r,i,e,n):r.data[s];sn(o,!0);const a=i[s]=i[11].createComment("");Ls(r,i,a,o),sr(a,i),Te(o)&&(Vr(r,i,o),jr(r,o,i)),null!=n&&Kr(i,o)}function Bo(){let t=rn();const e=en();on()?an():(t=t.parent,sn(t,!1)),e.firstCreatePass&&(An(e,t),Ce(t)&&e.queries.elementEnd(t))}function jo(){return tn()}function Vo(t){return!!t&&"function"==typeof t.then}function Ko(t){return!!t&&"function"==typeof t.subscribe}function qo(t,e,n=!1,i){const r=tn(),s=en(),o=rn();return $o(s,r,r[11],o,t,e,n,i),qo}function Go(t,e,n=!1,i){const r=rn(),s=tn(),o=en();return $o(o,s,_s(gn(o.data),r,s),r,t,e,n,i),Go}function $o(t,e,n,i,r,s,o=!1,a){const c=Te(i),l=t.firstCreatePass&&(t.cleanup||(t.cleanup=[])),u=gs(e);let h=!0;if(3===i.type){const d=Ke(i,e),p=a?a(d):le,m=p.target||d,f=u.length,g=a?t=>a(je(t[i.index])).target:i.index;if(Ue(n)){let o=null;if(!a&&c&&(o=function(t,e,n,i){const r=t.cleanup;if(null!=r)for(let s=0;s<r.length-1;s+=2){const t=r[s];if(t===n&&r[s+1]===i){const t=e[7],n=r[s+2];return t.length>n?t[n]:null}"string"==typeof t&&(s+=2)}return null}(t,e,r,i.index)),null!==o)(o.__ngLastListenerFn__||o).__ngNextListenerFn__=s,o.__ngLastListenerFn__=s,h=!1;else{s=zo(i,e,s,!1);const t=n.listen(p.name||m,r,s);u.push(s,t),l&&l.push(r,g,f,f+1)}}else s=zo(i,e,s,!0),m.addEventListener(r,s,o),u.push(s),l&&l.push(r,g,f,o)}const d=i.outputs;let p;if(h&&null!==d&&(p=d[r])){const t=p.length;if(t)for(let n=0;n<t;n+=2){const t=e[p[n]][p[n+1]].subscribe(s),o=u.length;u.push(s,t),l&&l.push(r,i.index,o,-(o+1))}}}function Ho(t,e,n){try{return!1!==e(n)}catch(i){return ys(t,i),!1}}function zo(t,e,n,i){return function r(s){if(s===Function)return n;const o=2&t.flags?$e(t.index,e):e;0==(32&e[2])&&hs(o);let a=Ho(e,n,s),c=r.__ngNextListenerFn__;for(;c;)a=Ho(e,c,s)&&a,c=c.__ngNextListenerFn__;return i&&!1===a&&(s.preventDefault(),s.returnValue=!1),a}}function Wo(t=1){return function(t){return(Ze.lFrame.contextLView=function(t,e){for(;t>0;)e=e[15],t--;return e}(t,Ze.lFrame.contextLView))[8]}(t)}function Yo(t,e){let n=null;const i=function(t){const e=t.attrs;if(null!=e){const t=e.indexOf(5);if(0==(1&t))return e[t+1]}return null}(t);for(let r=0;r<e.length;r++){const s=e[r];if("*"!==s){if(null===i?fr(t,s,!0):gr(i,s))return r}else n=r}return n}function Xo(t){const e=tn()[16][6];if(!e.projection){const n=e.projection=ie(t?t.length:1,null),i=n.slice();let r=e.child;for(;null!==r;){const e=t?Yo(r,t):0;null!==e&&(i[e]?i[e].projectionNext=r:n[e]=r,i[e]=r),r=r.next}}}function Qo(t,e=0,n){const i=tn(),r=en(),s=Nr(r,i[6],t,1,null,n||null);null===s.projection&&(s.projection=e),an(),function(t,e,n){js(e[11],0,e,n,Os(t,n,e),Ns(n.parent||e[6],e))}(r,i,s)}const Zo=[];function Jo(t,e,n,i,r){const s=t[n+1],o=null===e;let a=i?Tr(s):Rr(s),c=!1;for(;0!==a&&(!1===c||o);){const n=t[a+1];ta(t[a],e)&&(c=!0,t[a+1]=i?Ar(n):Ir(n)),a=i?Tr(n):Rr(n)}c&&(t[n+1]=i?Ir(s):Ar(s))}function ta(t,e){return null===t||null==e||(Array.isArray(t)?t[1]:t)===e||!(!Array.isArray(t)||"string"!=typeof e)&&oe(t,e)>=0}const ea={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function na(t){return t.substring(ea.key,ea.keyEnd)}function ia(t,e){const n=ea.textEnd;return n===e?-1:(e=ea.keyEnd=function(t,e,n){for(;e<n&&t.charCodeAt(e)>32;)e++;return e}(t,ea.key=e,n),ra(t,e,n))}function ra(t,e,n){for(;e<n&&t.charCodeAt(e)<=32;)e++;return e}function sa(t,e,n){return ca(t,e,n,!1),sa}function oa(t,e){return ca(t,e,null,!0),oa}function aa(t,e){for(let n=function(t){return function(t){ea.key=0,ea.keyEnd=0,ea.value=0,ea.valueEnd=0,ea.textEnd=t.length}(t),ia(t,ra(t,0,ea.textEnd))}(e);n>=0;n=ia(e,n))re(t,na(e),!0)}function ca(t,e,n,i){const r=tn(),s=en(),o=pn(2);s.firstUpdatePass&&ha(s,t,o,i),e!==vr&&Co(r,o,e)&&ma(s,s.data[xn()+20],r,r[11],t,r[o+1]=function(t,e){return null==t||("string"==typeof e?t+=e:"object"==typeof t&&(t=vt(xi(t)))),t}(e,n),i,o)}function la(t,e,n,i){const r=en(),s=pn(2);r.firstUpdatePass&&ha(r,null,s,i);const o=tn();if(n!==vr&&Co(o,s,n)){const a=r.data[xn()+20];if(_a(a,i)&&!ua(r,s)){let t=i?a.classesWithoutHost:a.stylesWithoutHost;null!==t&&(n=bt(t,n||"")),Mo(r,a,o,n,i)}else!function(t,e,n,i,r,s,o,a){r===vr&&(r=Zo);let c=0,l=0,u=0<r.length?r[0]:null,h=0<s.length?s[0]:null;for(;null!==u||null!==h;){const d=c<r.length?r[c+1]:void 0,p=l<s.length?s[l+1]:void 0;let m=null,f=void 0;u===h?(c+=2,l+=2,d!==p&&(m=h,f=p)):null===h||null!==u&&u<h?(c+=2,m=u):(l+=2,m=h,f=p),null!==m&&ma(t,e,n,i,m,f,o,a),u=c<r.length?r[c]:null,h=l<s.length?s[l]:null}}(r,a,o,o[11],o[s+1],o[s+1]=function(t,e,n){if(null==n||""===n)return Zo;const i=[],r=xi(n);if(Array.isArray(r))for(let s=0;s<r.length;s++)t(i,r[s],!0);else if("object"==typeof r)for(const s in r)r.hasOwnProperty(s)&&t(i,s,r[s]);else"string"==typeof r&&e(i,r);return i}(t,e,n),i,s)}}function ua(t,e){return e>=t.expandoStartIndex}function ha(t,e,n,i){const r=t.data;if(null===r[n+1]){const s=r[xn()+20],o=ua(t,n);_a(s,i)&&null===e&&!o&&(e=!1),e=function(t,e,n,i){const r=gn(t);let s=i?e.residualClasses:e.residualStyles;if(null===r)0===(i?e.classBindings:e.styleBindings)&&(n=pa(n=da(null,t,e,n,i),e.attrs,i),s=null);else{const o=e.directiveStylingLast;if(-1===o||t[o]!==r)if(n=da(r,t,e,n,i),null===s){let n=function(t,e,n){const i=n?e.classBindings:e.styleBindings;if(0!==Rr(i))return t[Tr(i)]}(t,e,i);void 0!==n&&Array.isArray(n)&&(n=da(null,t,e,n[1],i),n=pa(n,e.attrs,i),function(t,e,n,i){t[Tr(n?e.classBindings:e.styleBindings)]=i}(t,e,i,n))}else s=function(t,e,n){let i=void 0;const r=e.directiveEnd;for(let s=1+e.directiveStylingLast;s<r;s++)i=pa(i,t[s].hostAttrs,n);return pa(i,e.attrs,n)}(t,e,i)}return void 0!==s&&(i?e.residualClasses=s:e.residualStyles=s),n}(r,s,e,i),function(t,e,n,i,r,s){let o=s?e.classBindings:e.styleBindings,a=Tr(o),c=Rr(o);t[i]=n;let l,u=!1;if(Array.isArray(n)){const t=n;l=t[1],(null===l||oe(t,l)>0)&&(u=!0)}else l=n;if(r)if(0!==c){const e=Tr(t[a+1]);t[i+1]=xr(e,a),0!==e&&(t[e+1]=Or(t[e+1],i)),t[a+1]=131071&t[a+1]|i<<17}else t[i+1]=xr(a,0),0!==a&&(t[a+1]=Or(t[a+1],i)),a=i;else t[i+1]=xr(c,0),0===a?a=i:t[c+1]=Or(t[c+1],i),c=i;u&&(t[i+1]=Ir(t[i+1])),Jo(t,l,i,!0),Jo(t,l,i,!1),function(t,e,n,i,r){const s=r?t.residualClasses:t.residualStyles;null!=s&&"string"==typeof e&&oe(s,e)>=0&&(n[i+1]=Ar(n[i+1]))}(e,l,t,i,s),o=xr(a,c),s?e.classBindings=o:e.styleBindings=o}(r,s,e,n,o,i)}}function da(t,e,n,i,r){let s=null;const o=n.directiveEnd;let a=n.directiveStylingLast;for(-1===a?a=n.directiveStart:a++;a<o&&(s=e[a],i=pa(i,s.hostAttrs,r),s!==t);)a++;return null!==t&&(n.directiveStylingLast=a),i}function pa(t,e,n){const i=n?1:2;let r=-1;if(null!==e)for(let s=0;s<e.length;s++){const o=e[s];"number"==typeof o?r=o:r===i&&(Array.isArray(t)||(t=void 0===t?[]:["",t]),re(t,o,!!n||e[++s]))}return void 0===t?null:t}function ma(t,e,n,i,r,s,o,a){if(3!==e.type)return;const c=t.data,l=c[a+1];ga(1==(1&l)?fa(c,e,n,r,Rr(l),o):void 0)||(ga(s)||function(t){return 2==(2&t)}(l)&&(s=fa(c,null,n,r,a,o)),function(t,e,n,i,r){const s=Ue(t);if(e)r?s?t.addClass(n,i):n.classList.add(i):s?t.removeClass(n,i):n.classList.remove(i);else{const e=-1==i.indexOf("-")?void 0:2;null==r?s?t.removeStyle(n,i,e):n.style.removeProperty(i):s?t.setStyle(n,i,r,e):n.style.setProperty(i,r)}}(i,o,Ve(xn(),n),r,s))}function fa(t,e,n,i,r,s){const o=null===e;let a=void 0;for(;r>0;){const e=t[r],s=Array.isArray(e),c=s?e[1]:e,l=null===c;let u=n[r+1];u===vr&&(u=l?Zo:void 0);let h=l?se(u,i):c===i?u:void 0;if(s&&!ga(h)&&(h=se(e,i)),ga(h)&&(a=h,o))return a;const d=t[r+1];r=o?Tr(d):Rr(d)}if(null!==e){let t=s?e.residualClasses:e.residualStyles;null!=t&&(a=se(t,i))}return a}function ga(t){return void 0!==t}function _a(t,e){return 0!=(t.flags&(e?16:32))}function ya(t,e=""){const n=tn(),i=en(),r=t+20,s=i.firstCreatePass?Nr(i,n[6],t,3,null,null):i.data[r],o=n[r]=function(t,e){return Ue(e)?e.createText(t):e.createTextNode(t)}(e,n[11]);Ls(i,n,o,s),sn(s,!1)}function va(t){return ba("",t,""),va}function ba(t,e,n){const i=tn(),r=Io(i,t,e,n);return r!==vr&&bs(i,xn(),r),ba}function wa(t,e,n,i,r){const s=tn(),o=function(t,e,n,i,r,s){const o=xo(t,hn(),n,r);return pn(2),o?e+zn(n)+i+zn(r)+s:vr}(s,t,e,n,i,r);return o!==vr&&bs(s,xn(),o),wa}function Sa(t,e,n,i,r,s,o){const a=tn(),c=function(t,e,n,i,r,s,o,a){const c=function(t,e,n,i,r){const s=xo(t,e,n,i);return Co(t,e+2,r)||s}(t,hn(),n,r,o);return pn(3),c?e+zn(n)+i+zn(r)+s+zn(o)+a:vr}(a,t,e,n,i,r,s,o);return c!==vr&&bs(a,xn(),c),Sa}function Ea(t,e,n,i,r,s,o,a,c){const l=tn(),u=function(t,e,n,i,r,s,o,a,c,l){const u=function(t,e,n,i,r,s){const o=xo(t,e,n,i);return xo(t,e+2,r,s)||o}(t,hn(),n,r,o,c);return pn(4),u?e+zn(n)+i+zn(r)+s+zn(o)+a+zn(c)+l:vr}(l,t,e,n,i,r,s,o,a,c);return u!==vr&&bs(l,xn(),u),Ea}function ka(t,e,n){la(re,aa,Io(tn(),t,e,n),!0)}function Ca(t,e,n){const i=tn();return Co(i,dn(),e)&&Wr(en(),In(),i,t,e,i[11],n,!0),Ca}function xa(t,e,n){const i=tn();if(Co(i,dn(),e)){const r=en(),s=In();Wr(r,s,i,t,e,_s(gn(r.data),s,i),n,!0)}return xa}function Ta(t,e){const n=He(t)[1],i=n.data.length-1;An(n,{directiveStart:i,directiveEnd:i+1})}function Ia(t){let e=Object.getPrototypeOf(t.type.prototype).constructor,n=!0;const i=[t];for(;e;){let r=void 0;if(Ie(t))r=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new Error("Directives cannot inherit Components");r=e.\u0275dir}if(r){if(n){i.push(r);const e=t;e.inputs=Ra(t.inputs),e.declaredInputs=Ra(t.declaredInputs),e.outputs=Ra(t.outputs);const n=r.hostBindings;n&&Da(t,n);const s=r.viewQuery,o=r.contentQueries;if(s&&Oa(t,s),o&&Aa(t,o),ct(t.inputs,r.inputs),ct(t.declaredInputs,r.declaredInputs),ct(t.outputs,r.outputs),Ie(r)&&r.data.animation){const e=t.data;e.animation=(e.animation||[]).concat(r.data.animation)}}const e=r.features;if(e)for(let i=0;i<e.length;i++){const r=e[i];r&&r.ngInherit&&r(t),r===Ia&&(n=!1)}}e=Object.getPrototypeOf(e)}!function(t){let e=0,n=null;for(let i=t.length-1;i>=0;i--){const r=t[i];r.hostVars=e+=r.hostVars,r.hostAttrs=Vn(r.hostAttrs,n=Vn(n,r.hostAttrs))}}(i)}function Ra(t){return t===le?{}:t===ue?[]:t}function Oa(t,e){const n=t.viewQuery;t.viewQuery=n?(t,i)=>{e(t,i),n(t,i)}:e}function Aa(t,e){const n=t.contentQueries;t.contentQueries=n?(t,i,r)=>{e(t,i,r),n(t,i,r)}:e}function Da(t,e){const n=t.hostBindings;t.hostBindings=n?(t,i)=>{e(t,i),n(t,i)}:e}function Pa(t,e,n,i,r){if(t=Et(t),Array.isArray(t))for(let s=0;s<t.length;s++)Pa(t[s],e,n,i,r);else{const s=en(),o=tn();let a=mo(t)?t:Et(t.provide),c=uo(t);const l=rn(),u=1048575&l.providerIndexes,h=l.directiveStart,d=l.providerIndexes>>20;if(mo(t)||!t.multi){const i=new Fn(c,r,Ao),p=La(a,e,r?u:u+d,h);-1===p?(si(ei(l,o),s,a),Ma(s,t,e.length),e.push(a),l.directiveStart++,l.directiveEnd++,r&&(l.providerIndexes+=1048576),n.push(i),o.push(i)):(n[p]=i,o[p]=i)}else{const p=La(a,e,u+d,h),m=La(a,e,u,u+d),f=p>=0&&n[p],g=m>=0&&n[m];if(r&&!g||!r&&!f){si(ei(l,o),s,a);const u=function(t,e,n,i,r){const s=new Fn(t,n,Ao);return s.multi=[],s.index=e,s.componentProviders=0,Na(s,r,i&&!n),s}(r?Ua:Fa,n.length,r,i,c);!r&&g&&(n[m].providerFactory=u),Ma(s,t,e.length,0),e.push(a),l.directiveStart++,l.directiveEnd++,r&&(l.providerIndexes+=1048576),n.push(u),o.push(u)}else Ma(s,t,p>-1?p:m,Na(n[r?m:p],c,!r&&i));!r&&i&&g&&n[m].componentProviders++}}}function Ma(t,e,n,i){const r=mo(e);if(r||e.useClass){const s=(e.useClass||e).prototype.ngOnDestroy;if(s){const o=t.destroyHooks||(t.destroyHooks=[]);if(!r&&e.multi){const t=o.indexOf(n);-1===t?o.push(n,[i,s]):o[t+1].push(i,s)}else o.push(n,s)}}}function Na(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function La(t,e,n,i){for(let r=n;r<i;r++)if(e[r]===t)return r;return-1}function Fa(t,e,n,i){return Ba(this.multi,[])}function Ua(t,e,n,i){const r=this.multi;let s;if(this.providerFactory){const t=this.providerFactory.componentProviders,e=ui(n,n[1],this.providerFactory.index,i);s=e.slice(0,t),Ba(r,s);for(let n=t;n<e.length;n++)s.push(e[n])}else s=[],Ba(r,s);return s}function Ba(t,e){for(let n=0;n<t.length;n++)e.push((0,t[n])());return e}function ja(t,e=[]){return n=>{n.providersResolver=(n,i)=>function(t,e,n){const i=en();if(i.firstCreatePass){const r=Ie(t);Pa(n,i.data,i.blueprint,r,!0),Pa(e,i.data,i.blueprint,r,!1)}}(n,i?i(t):t,e)}}class Va{}class Ka{resolveComponentFactory(t){throw function(t){const e=Error(`No component factory found for ${vt(t)}. Did you add it to @NgModule.entryComponents?`);return e.ngComponent=t,e}(t)}}let qa=(()=>{class t{}return t.NULL=new Ka,t})(),Ga=(()=>{class t{constructor(t){this.nativeElement=t}}return t.__NG_ELEMENT_ID__=()=>$a(t),t})();const $a=function(t){return Ws(t,rn(),tn())};class Ha{}var za=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}({});let Wa=(()=>{class t{}return t.__NG_ELEMENT_ID__=()=>Ya(),t})();const Ya=function(){const t=tn(),e=$e(rn().index,t);return function(t){const e=t[11];if(Ue(e))return e;throw new Error("Cannot inject Renderer2 when the application uses Renderer3!")}(Ee(e)?e:t)};let Xa=(()=>{class t{}return t.\u0275prov=lt({token:t,providedIn:"root",factory:()=>null}),t})();class Qa{constructor(t){this.full=t,this.major=t.split(".")[0],this.minor=t.split(".")[1],this.patch=t.split(".").slice(2).join(".")}}const Za=new Qa("10.0.5");class Ja{constructor(){}supports(t){return So(t)}create(t){return new ec(t)}}const tc=(t,e)=>e;class ec{constructor(t){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=t||tc}forEachItem(t){let e;for(e=this._itHead;null!==e;e=e._next)t(e)}forEachOperation(t){let e=this._itHead,n=this._removalsHead,i=0,r=null;for(;e||n;){const s=!n||e&&e.currentIndex<sc(n,i,r)?e:n,o=sc(s,i,r),a=s.currentIndex;if(s===n)i--,n=n._nextRemoved;else if(e=e._next,null==s.previousIndex)i++;else{r||(r=[]);const t=o-i,e=a-i;if(t!=e){for(let n=0;n<t;n++){const i=n<r.length?r[n]:r[n]=0,s=i+n;e<=s&&s<t&&(r[n]=i+1)}r[s.previousIndex]=e-t}}o!==a&&t(s,o,a)}}forEachPreviousItem(t){let e;for(e=this._previousItHead;null!==e;e=e._nextPrevious)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachMovedItem(t){let e;for(e=this._movesHead;null!==e;e=e._nextMoved)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}forEachIdentityChange(t){let e;for(e=this._identityChangesHead;null!==e;e=e._nextIdentityChange)t(e)}diff(t){if(null==t&&(t=[]),!So(t))throw new Error(`Error trying to diff '${vt(t)}'. Only arrays and iterables are allowed`);return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e,n,i,r=this._itHead,s=!1;if(Array.isArray(t)){this.length=t.length;for(let e=0;e<this.length;e++)n=t[e],i=this._trackByFn(e,n),null!==r&&Object.is(r.trackById,i)?(s&&(r=this._verifyReinsertion(r,n,i,e)),Object.is(r.item,n)||this._addIdentityChange(r,n)):(r=this._mismatch(r,n,i,e),s=!0),r=r._next}else e=0,function(t,e){if(Array.isArray(t))for(let n=0;n<t.length;n++)e(t[n]);else{const n=t[bo()]();let i;for(;!(i=n.next()).done;)e(i.value)}}(t,t=>{i=this._trackByFn(e,t),null!==r&&Object.is(r.trackById,i)?(s&&(r=this._verifyReinsertion(r,t,i,e)),Object.is(r.item,t)||this._addIdentityChange(r,t)):(r=this._mismatch(r,t,i,e),s=!0),r=r._next,e++}),this.length=e;return this._truncate(r),this.collection=t,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let t,e;for(t=this._previousItHead=this._itHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._additionsHead;null!==t;t=t._nextAdded)t.previousIndex=t.currentIndex;for(this._additionsHead=this._additionsTail=null,t=this._movesHead;null!==t;t=e)t.previousIndex=t.currentIndex,e=t._nextMoved;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(t,e,n,i){let r;return null===t?r=this._itTail:(r=t._prev,this._remove(t)),null!==(t=null===this._linkedRecords?null:this._linkedRecords.get(n,i))?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._moveAfter(t,r,i)):null!==(t=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null))?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._reinsertAfter(t,r,i)):t=this._addAfter(new nc(e,n),r,i),t}_verifyReinsertion(t,e,n,i){let r=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null);return null!==r?t=this._reinsertAfter(r,t._prev,i):t.currentIndex!=i&&(t.currentIndex=i,this._addToMoves(t,i)),t}_truncate(t){for(;null!==t;){const e=t._next;this._addToRemovals(this._unlink(t)),t=e}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(t,e,n){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(t);const i=t._prevRemoved,r=t._nextRemoved;return null===i?this._removalsHead=r:i._nextRemoved=r,null===r?this._removalsTail=i:r._prevRemoved=i,this._insertAfter(t,e,n),this._addToMoves(t,n),t}_moveAfter(t,e,n){return this._unlink(t),this._insertAfter(t,e,n),this._addToMoves(t,n),t}_addAfter(t,e,n){return this._insertAfter(t,e,n),this._additionsTail=null===this._additionsTail?this._additionsHead=t:this._additionsTail._nextAdded=t,t}_insertAfter(t,e,n){const i=null===e?this._itHead:e._next;return t._next=i,t._prev=e,null===i?this._itTail=t:i._prev=t,null===e?this._itHead=t:e._next=t,null===this._linkedRecords&&(this._linkedRecords=new rc),this._linkedRecords.put(t),t.currentIndex=n,t}_remove(t){return this._addToRemovals(this._unlink(t))}_unlink(t){null!==this._linkedRecords&&this._linkedRecords.remove(t);const e=t._prev,n=t._next;return null===e?this._itHead=n:e._next=n,null===n?this._itTail=e:n._prev=e,t}_addToMoves(t,e){return t.previousIndex===e||(this._movesTail=null===this._movesTail?this._movesHead=t:this._movesTail._nextMoved=t),t}_addToRemovals(t){return null===this._unlinkedRecords&&(this._unlinkedRecords=new rc),this._unlinkedRecords.put(t),t.currentIndex=null,t._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=t,t._prevRemoved=null):(t._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=t),t}_addIdentityChange(t,e){return t.item=e,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=t:this._identityChangesTail._nextIdentityChange=t,t}}class nc{constructor(t,e){this.item=t,this.trackById=e,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class ic{constructor(){this._head=null,this._tail=null}add(t){null===this._head?(this._head=this._tail=t,t._nextDup=null,t._prevDup=null):(this._tail._nextDup=t,t._prevDup=this._tail,t._nextDup=null,this._tail=t)}get(t,e){let n;for(n=this._head;null!==n;n=n._nextDup)if((null===e||e<=n.currentIndex)&&Object.is(n.trackById,t))return n;return null}remove(t){const e=t._prevDup,n=t._nextDup;return null===e?this._head=n:e._nextDup=n,null===n?this._tail=e:n._prevDup=e,null===this._head}}class rc{constructor(){this.map=new Map}put(t){const e=t.trackById;let n=this.map.get(e);n||(n=new ic,this.map.set(e,n)),n.add(t)}get(t,e){const n=this.map.get(t);return n?n.get(t,e):null}remove(t){const e=t.trackById;return this.map.get(e).remove(t)&&this.map.delete(e),t}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function sc(t,e,n){const i=t.previousIndex;if(null===i)return i;let r=0;return n&&i<n.length&&(r=n[i]),i+e+r}class oc{constructor(){}supports(t){return t instanceof Map||Eo(t)}create(){return new ac}}class ac{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(t){let e;for(e=this._mapHead;null!==e;e=e._next)t(e)}forEachPreviousItem(t){let e;for(e=this._previousMapHead;null!==e;e=e._nextPrevious)t(e)}forEachChangedItem(t){let e;for(e=this._changesHead;null!==e;e=e._nextChanged)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}diff(t){if(t){if(!(t instanceof Map||Eo(t)))throw new Error(`Error trying to diff '${vt(t)}'. Only maps and objects are allowed`)}else t=new Map;return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e=this._mapHead;if(this._appendAfter=null,this._forEach(t,(t,n)=>{if(e&&e.key===n)this._maybeAddToChanges(e,t),this._appendAfter=e,e=e._next;else{const i=this._getOrCreateRecordForKey(n,t);e=this._insertBeforeOrAppend(e,i)}}),e){e._prev&&(e._prev._next=null),this._removalsHead=e;for(let t=e;null!==t;t=t._nextRemoved)t===this._mapHead&&(this._mapHead=null),this._records.delete(t.key),t._nextRemoved=t._next,t.previousValue=t.currentValue,t.currentValue=null,t._prev=null,t._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(t,e){if(t){const n=t._prev;return e._next=t,e._prev=n,t._prev=e,n&&(n._next=e),t===this._mapHead&&(this._mapHead=e),this._appendAfter=t,t}return this._appendAfter?(this._appendAfter._next=e,e._prev=this._appendAfter):this._mapHead=e,this._appendAfter=e,null}_getOrCreateRecordForKey(t,e){if(this._records.has(t)){const n=this._records.get(t);this._maybeAddToChanges(n,e);const i=n._prev,r=n._next;return i&&(i._next=r),r&&(r._prev=i),n._next=null,n._prev=null,n}const n=new cc(t);return this._records.set(t,n),n.currentValue=e,this._addToAdditions(n),n}_reset(){if(this.isDirty){let t;for(this._previousMapHead=this._mapHead,t=this._previousMapHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._changesHead;null!==t;t=t._nextChanged)t.previousValue=t.currentValue;for(t=this._additionsHead;null!=t;t=t._nextAdded)t.previousValue=t.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(t,e){Object.is(e,t.currentValue)||(t.previousValue=t.currentValue,t.currentValue=e,this._addToChanges(t))}_addToAdditions(t){null===this._additionsHead?this._additionsHead=this._additionsTail=t:(this._additionsTail._nextAdded=t,this._additionsTail=t)}_addToChanges(t){null===this._changesHead?this._changesHead=this._changesTail=t:(this._changesTail._nextChanged=t,this._changesTail=t)}_forEach(t,e){t instanceof Map?t.forEach(e):Object.keys(t).forEach(n=>e(t[n],n))}}class cc{constructor(t){this.key=t,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}let lc=(()=>{class t{constructor(t){this.factories=t}static create(e,n){if(null!=n){const t=n.factories.slice();e=e.concat(t)}return new t(e)}static extend(e){return{provide:t,useFactory:n=>{if(!n)throw new Error("Cannot extend IterableDiffers without a parent injector");return t.create(e,n)},deps:[[t,new st,new it]]}}find(t){const e=this.factories.find(e=>e.supports(t));if(null!=e)return e;throw new Error(`Cannot find a differ supporting object '${t}' of type '${n=t,n.name||typeof n}'`);var n}}return t.\u0275prov=lt({token:t,providedIn:"root",factory:()=>new t([new Ja])}),t})(),uc=(()=>{class t{constructor(t){this.factories=t}static create(e,n){if(n){const t=n.factories.slice();e=e.concat(t)}return new t(e)}static extend(e){return{provide:t,useFactory:n=>{if(!n)throw new Error("Cannot extend KeyValueDiffers without a parent injector");return t.create(e,n)},deps:[[t,new st,new it]]}}find(t){const e=this.factories.find(e=>e.supports(t));if(e)return e;throw new Error(`Cannot find a differ supporting object '${t}'`)}}return t.\u0275prov=lt({token:t,providedIn:"root",factory:()=>new t([new oc])}),t})();const hc=[new oc],dc=new lc([new Ja]),pc=new uc(hc);let mc=(()=>{class t{}return t.__NG_ELEMENT_ID__=()=>fc(t,Ga),t})();const fc=function(t,e){return Ys(t,e,rn(),tn())};let gc=(()=>{class t{}return t.__NG_ELEMENT_ID__=()=>_c(t,Ga),t})();const _c=function(t,e){return Xs(t,e,rn(),tn())},yc={};class vc extends qa{constructor(t){super(),this.ngModule=t}resolveComponentFactory(t){const e=be(t);return new Sc(e,this.ngModule)}}function bc(t){const e=[];for(let n in t)t.hasOwnProperty(n)&&e.push({propName:t[n],templateName:n});return e}const wc=new Ft("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>Yn});class Sc extends Va{constructor(t,e){super(),this.componentDef=t,this.ngModule=e,this.componentType=t.type,this.selector=t.selectors.map(yr).join(","),this.ngContentSelectors=t.ngContentSelectors?t.ngContentSelectors:[],this.isBoundToModule=!!e}get inputs(){return bc(this.componentDef.inputs)}get outputs(){return bc(this.componentDef.outputs)}create(t,e,n,i){const r=(i=i||this.ngModule)?function(t,e){return{get:(n,i,r)=>{const s=t.get(n,yc,r);return s!==yc||i===yc?s:e.get(n,i,r)}}}(t,i.injector):t,s=r.get(Ha,Be),o=r.get(Xa,null),a=s.createRenderer(null,this.componentDef),c=this.componentDef.selectors[0][0]||"div",l=n?function(t,e,n){if(Ue(t))return t.selectRootElement(e,n===ce.ShadowDom);let i="string"==typeof e?t.querySelector(e):e;return i.textContent="",i}(a,n,this.componentDef.encapsulation):Pr(c,s.createRenderer(null,this.componentDef),function(t){const e=t.toLowerCase();return"svg"===e?"http://www.w3.org/2000/svg":"math"===e?"http://www.w3.org/1998/MathML/":null}(c)),u=this.componentDef.onPush?576:528,h={components:[],scheduler:Yn,clean:fs,playerHandler:null,flags:0},d=Gr(0,-1,null,1,0,null,null,null,null,null),p=Mr(null,d,h,u,null,null,s,a,o,r);let m,f;bn(p,null);try{const t=function(t,e,n,i,r,s){const o=n[1];n[20]=t;const a=Nr(o,null,0,3,null,null),c=a.mergedAttrs=e.hostAttrs;null!==c&&(yo(a,c,!0),null!==t&&(Un(r,t,c),null!==a.classes&&Ks(r,t,a.classes),null!==a.styles&&Vs(r,t,a.styles)));const l=i.createRenderer(t,e),u=Mr(n,qr(e),null,e.onPush?64:16,n[20],a,i,l,void 0);return o.firstCreatePass&&(si(ei(a,n),o,e.type),ts(o,a),ns(a,n.length,1)),us(n,u),n[20]=u}(l,this.componentDef,p,s,a);if(l)if(n)Un(a,l,["ng-version",Za.full]);else{const{attrs:t,classes:e}=function(t){const e=[],n=[];let i=1,r=2;for(;i<t.length;){let s=t[i];if("string"==typeof s)2===r?""!==s&&e.push(s,t[++i]):8===r&&n.push(s);else{if(!pr(r))break;r=s}i++}return{attrs:e,classes:n}}(this.componentDef.selectors[0]);t&&Un(a,l,t),e&&e.length>0&&Ks(a,l,e.join(" "))}if(f=qe(d,0),void 0!==e){const t=f.projection=[];for(let n=0;n<this.ngContentSelectors.length;n++){const i=e[n];t.push(null!=i?Array.from(i):null)}}m=function(t,e,n,i,r){const s=n[1],o=function(t,e,n){const i=rn();t.firstCreatePass&&(n.providersResolver&&n.providersResolver(n),Jr(t,i,1),is(t,e,n));const r=ui(e,t,e.length-1,i);sr(r,e);const s=Ke(i,e);return s&&sr(s,e),r}(s,n,e);i.components.push(o),t[8]=o,r&&r.forEach(t=>t(o,e)),e.contentQueries&&e.contentQueries(1,o,n.length-1);const a=rn();if(s.firstCreatePass&&(null!==e.hostBindings||null!==e.hostAttrs)){Tn(a.index-20);const t=n[1];Xr(t,e),Qr(t,n,e.hostVars),Zr(e,o)}return o}(t,this.componentDef,p,h,[Ta]),Lr(d,p,null)}finally{Cn()}const g=new Ec(this.componentType,m,Ws(Ga,f,p),p,f);return d.node.child=f,g}}class Ec extends class{}{constructor(t,e,n,i,r){super(),this.location=n,this._rootLView=i,this._tNode=r,this.destroyCbs=[],this.instance=e,this.hostView=this.changeDetectorRef=new Gs(i),function(t,e,n,i){let r=t.node;null==r&&(t.node=r=Hr(0,null,2,-1,null,null)),i[6]=r}(i[1],0,0,i),this.componentType=t}get injector(){return new pi(this._tNode,this._rootLView)}destroy(){this.destroyCbs&&(this.destroyCbs.forEach(t=>t()),this.destroyCbs=null,!this.hostView.destroyed&&this.hostView.destroy())}onDestroy(t){this.destroyCbs&&this.destroyCbs.push(t)}}const kc=void 0;var Cc=["en",[["a","p"],["AM","PM"],kc],[["AM","PM"],kc,kc],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],kc,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],kc,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",kc,"{1} 'at' {0}",kc],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function(t){let e=Math.floor(Math.abs(t)),n=t.toString().replace(/^[^.]*\.?/,"").length;return 1===e&&0===n?1:5}];let xc={};function Tc(t){return t in xc||(xc[t]=Rt.ng&&Rt.ng.common&&Rt.ng.common.locales&&Rt.ng.common.locales[t]),xc[t]}var Ic=function(t){return t[t.LocaleId=0]="LocaleId",t[t.DayPeriodsFormat=1]="DayPeriodsFormat",t[t.DayPeriodsStandalone=2]="DayPeriodsStandalone",t[t.DaysFormat=3]="DaysFormat",t[t.DaysStandalone=4]="DaysStandalone",t[t.MonthsFormat=5]="MonthsFormat",t[t.MonthsStandalone=6]="MonthsStandalone",t[t.Eras=7]="Eras",t[t.FirstDayOfWeek=8]="FirstDayOfWeek",t[t.WeekendRange=9]="WeekendRange",t[t.DateFormat=10]="DateFormat",t[t.TimeFormat=11]="TimeFormat",t[t.DateTimeFormat=12]="DateTimeFormat",t[t.NumberSymbols=13]="NumberSymbols",t[t.NumberFormats=14]="NumberFormats",t[t.CurrencyCode=15]="CurrencyCode",t[t.CurrencySymbol=16]="CurrencySymbol",t[t.CurrencyName=17]="CurrencyName",t[t.Currencies=18]="Currencies",t[t.Directionality=19]="Directionality",t[t.PluralCase=20]="PluralCase",t[t.ExtraData=21]="ExtraData",t}({});let Rc="en-US";function Oc(t){var e,n;n="Expected localeId to be defined",null==(e=t)&&function(t,e,n,i){throw new Error("ASSERTION ERROR: "+t+` [Expected=> null != ${e} <=Actual]`)}(n,e),"string"==typeof t&&(Rc=t.toLowerCase().replace(/_/g,"-"))}const Ac=new Map;class Dc extends Zt{constructor(t,e){super(),this._parent=e,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new vc(this);const n=Se(t),i=t[Mt]||null;i&&Oc(i),this._bootstrapComponents=Qn(n.bootstrap),this._r3Injector=ao(t,e,[{provide:Zt,useValue:this},{provide:qa,useValue:this.componentFactoryResolver}],vt(t)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(t)}get(t,e=go.THROW_IF_NOT_FOUND,n=ot.Default){return t===go||t===Zt||t===Ut?this:this._r3Injector.get(t,e,n)}destroy(){const t=this._r3Injector;!t.destroyed&&t.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(t){this.destroyCbs.push(t)}}class Pc extends Jt{constructor(t){super(),this.moduleType=t,null!==Se(t)&&function t(e){if(null!==e.\u0275mod.id){const t=e.\u0275mod.id;(function(t,e,n){if(e&&e!==n)throw new Error(`Duplicate module registered for ${t} - ${vt(e)} vs ${vt(e.name)}`)})(t,Ac.get(t),e),Ac.set(t,e)}let n=e.\u0275mod.imports;n instanceof Function&&(n=n()),n&&n.forEach(e=>t(e))}(t)}create(t){return new Dc(this.moduleType,t)}}function Mc(t,e,n,i){return Fc(tn(),un(),t,e,n,i)}function Nc(t,e,n,i,r){return function(t,e,n,i,r,s,o){const a=e+n;return xo(t,a,r,s)?ko(t,a+2,o?i.call(o,r,s):i(r,s)):Lc(t,a+2)}(tn(),un(),t,e,n,i,r)}function Lc(t,e){const n=t[e];return n===vr?void 0:n}function Fc(t,e,n,i,r,s){const o=e+n;return Co(t,o,r)?ko(t,o+1,s?i.call(s,r):i(r)):Lc(t,o+1)}function Uc(t,e){const n=en();let i;const r=t+20;n.firstCreatePass?(i=function(t,e){if(e)for(let n=e.length-1;n>=0;n--){const i=e[n];if(t===i.name)return i}throw new Error(`The pipe '${t}' could not be found!`)}(e,n.pipeRegistry),n.data[r]=i,i.onDestroy&&(n.destroyHooks||(n.destroyHooks=[])).push(r,i.onDestroy)):i=n.data[r];const s=i.factory||(i.factory=we(i.type)),o=$t(Ao),a=Jn(!1),c=s();return Jn(a),$t(o),function(t,e,n,i){const r=n+20;r>=t.data.length&&(t.data[r]=null,t.blueprint[r]=null),e[r]=i}(n,tn(),t,c),c}function Bc(t,e,n){const i=tn(),r=Ge(i,t);return function(t,e){return wo.isWrapped(e)&&(e=wo.unwrap(e),t[hn()]=vr),e}(i,function(t,e){return t[1].data[e+20].pure}(i,t)?Fc(i,un(),e,r.transform,n,r):r.transform(n))}const jc=class extends E{constructor(t=!1){super(),this.__isAsync=t}emit(t){super.next(t)}subscribe(t,e,n){let i,r=t=>null,s=()=>null;t&&"object"==typeof t?(i=this.__isAsync?e=>{setTimeout(()=>t.next(e))}:e=>{t.next(e)},t.error&&(r=this.__isAsync?e=>{setTimeout(()=>t.error(e))}:e=>{t.error(e)}),t.complete&&(s=this.__isAsync?()=>{setTimeout(()=>t.complete())}:()=>{t.complete()})):(i=this.__isAsync?e=>{setTimeout(()=>t(e))}:e=>{t(e)},e&&(r=this.__isAsync?t=>{setTimeout(()=>e(t))}:t=>{e(t)}),n&&(s=this.__isAsync?()=>{setTimeout(()=>n())}:()=>{n()}));const o=super.subscribe(i,r,s);return t instanceof h&&t.add(o),o}};function Vc(){return this._results[bo()]()}class Kc{constructor(){this.dirty=!0,this._results=[],this.changes=new jc,this.length=0;const t=bo(),e=Kc.prototype;e[t]||(e[t]=Vc)}map(t){return this._results.map(t)}filter(t){return this._results.filter(t)}find(t){return this._results.find(t)}reduce(t,e){return this._results.reduce(t,e)}forEach(t){this._results.forEach(t)}some(t){return this._results.some(t)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(t){this._results=function t(e,n){void 0===n&&(n=e);for(let i=0;i<e.length;i++){let r=e[i];Array.isArray(r)?(n===e&&(n=e.slice(0,i)),t(r,n)):n!==e&&n.push(r)}return n}(t),this.dirty=!1,this.length=this._results.length,this.last=this._results[this.length-1],this.first=this._results[0]}notifyOnChanges(){this.changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}class qc{constructor(t){this.queryList=t,this.matches=null}clone(){return new qc(this.queryList)}setDirty(){this.queryList.setDirty()}}class Gc{constructor(t=[]){this.queries=t}createEmbeddedView(t){const e=t.queries;if(null!==e){const n=null!==t.contentQueries?t.contentQueries[0]:e.length,i=[];for(let t=0;t<n;t++){const n=e.getByIndex(t);i.push(this.queries[n.indexInDeclarationView].clone())}return new Gc(i)}return null}insertView(t){this.dirtyQueriesWithMatches(t)}detachView(t){this.dirtyQueriesWithMatches(t)}dirtyQueriesWithMatches(t){for(let e=0;e<this.queries.length;e++)null!==al(t,e).matches&&this.queries[e].setDirty()}}class $c{constructor(t,e,n,i=null){this.predicate=t,this.descendants=e,this.isStatic=n,this.read=i}}class Hc{constructor(t=[]){this.queries=t}elementStart(t,e){for(let n=0;n<this.queries.length;n++)this.queries[n].elementStart(t,e)}elementEnd(t){for(let e=0;e<this.queries.length;e++)this.queries[e].elementEnd(t)}embeddedTView(t){let e=null;for(let n=0;n<this.length;n++){const i=null!==e?e.length:0,r=this.getByIndex(n).embeddedTView(t,i);r&&(r.indexInDeclarationView=n,null!==e?e.push(r):e=[r])}return null!==e?new Hc(e):null}template(t,e){for(let n=0;n<this.queries.length;n++)this.queries[n].template(t,e)}getByIndex(t){return this.queries[t]}get length(){return this.queries.length}track(t){this.queries.push(t)}}class zc{constructor(t,e=-1){this.metadata=t,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=e}elementStart(t,e){this.isApplyingToNode(e)&&this.matchTNode(t,e)}elementEnd(t){this._declarationNodeIndex===t.index&&(this._appliesToNextNode=!1)}template(t,e){this.elementStart(t,e)}embeddedTView(t,e){return this.isApplyingToNode(t)?(this.crossesNgTemplate=!0,this.addMatch(-t.index,e),new zc(this.metadata)):null}isApplyingToNode(t){if(this._appliesToNextNode&&!1===this.metadata.descendants){const e=this._declarationNodeIndex;let n=t.parent;for(;null!==n&&4===n.type&&n.index!==e;)n=n.parent;return e===(null!==n?n.index:-1)}return this._appliesToNextNode}matchTNode(t,e){if(Array.isArray(this.metadata.predicate)){const n=this.metadata.predicate;for(let i=0;i<n.length;i++)this.matchTNodeWithReadOption(t,e,Wc(e,n[i]))}else{const n=this.metadata.predicate;n===mc?0===e.type&&this.matchTNodeWithReadOption(t,e,-1):this.matchTNodeWithReadOption(t,e,li(e,t,n,!1,!1))}}matchTNodeWithReadOption(t,e,n){if(null!==n){const i=this.metadata.read;if(null!==i)if(i===Ga||i===gc||i===mc&&0===e.type)this.addMatch(e.index,-2);else{const n=li(e,t,i,!1,!1);null!==n&&this.addMatch(e.index,n)}else this.addMatch(e.index,n)}}addMatch(t,e){null===this.matches?this.matches=[t,e]:this.matches.push(t,e)}}function Wc(t,e){const n=t.localNames;if(null!==n)for(let i=0;i<n.length;i+=2)if(n[i]===e)return n[i+1];return null}function Yc(t,e,n,i){return-1===n?function(t,e){return 3===t.type||4===t.type?Ws(Ga,t,e):0===t.type?Ys(mc,Ga,t,e):null}(e,t):-2===n?function(t,e,n){return n===Ga?Ws(Ga,e,t):n===mc?Ys(mc,Ga,e,t):n===gc?Xs(gc,Ga,e,t):void 0}(t,e,i):ui(t,t[1],n,e)}function Xc(t,e,n,i){const r=e[19].queries[i];if(null===r.matches){const i=t.data,s=n.matches,o=[];for(let t=0;t<s.length;t+=2){const r=s[t];o.push(r<0?null:Yc(e,i[r],s[t+1],n.metadata.read))}r.matches=o}return r.matches}function Qc(t){const e=tn(),n=en(),i=_n();yn(i+1);const r=al(n,i);if(t.dirty&&ze(e)===r.metadata.isStatic){if(null===r.matches)t.reset([]);else{const s=r.crossesNgTemplate?function t(e,n,i,r){const s=e.queries.getByIndex(i),o=s.matches;if(null!==o){const a=Xc(e,n,s,i);for(let e=0;e<o.length;e+=2){const i=o[e];if(i>0)r.push(a[e/2]);else{const s=o[e+1],a=n[-i];for(let e=10;e<a.length;e++){const n=a[e];n[17]===n[3]&&t(n[1],n,s,r)}if(null!==a[9]){const e=a[9];for(let n=0;n<e.length;n++){const i=e[n];t(i[1],i,s,r)}}}}}return r}(n,e,i,[]):Xc(n,e,r,i);t.reset(s),t.notifyOnChanges()}return!0}return!1}function Zc(t,e,n){tl(en(),tn(),t,e,n,!0)}function Jc(t,e,n){tl(en(),tn(),t,e,n,!1)}function tl(t,e,n,i,r,s){t.firstCreatePass&&(ol(t,new $c(n,i,s,r),-1),s&&(t.staticViewQueries=!0)),sl(t,e)}function el(t,e,n,i){il(en(),tn(),e,n,i,!1,rn(),t)}function nl(t,e,n,i){il(en(),tn(),e,n,i,!0,rn(),t)}function il(t,e,n,i,r,s,o,a){t.firstCreatePass&&(ol(t,new $c(n,i,s,r),o.index),function(t,e){const n=t.contentQueries||(t.contentQueries=[]);e!==(t.contentQueries.length?n[n.length-1]:-1)&&n.push(t.queries.length-1,e)}(t,a),s&&(t.staticContentQueries=!0)),sl(t,e)}function rl(){return t=tn(),e=_n(),t[19].queries[e].queryList;var t,e}function sl(t,e){const n=new Kc;$r(t,e,n,n.destroy),null===e[19]&&(e[19]=new Gc),e[19].queries.push(new qc(n))}function ol(t,e,n){null===t.queries&&(t.queries=new Hc),t.queries.track(new zc(e,n))}function al(t,e){return t.queries.getByIndex(e)}const cl=new Ft("Application Initializer");let ll=(()=>{class t{constructor(t){this.appInits=t,this.initialized=!1,this.done=!1,this.donePromise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}runInitializers(){if(this.initialized)return;const t=[],e=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let n=0;n<this.appInits.length;n++){const e=this.appInits[n]();Vo(e)&&t.push(e)}Promise.all(t).then(()=>{e()}).catch(t=>{this.reject(t)}),0===t.length&&e(),this.initialized=!0}}return t.\u0275fac=function(e){return new(e||t)(zt(cl,8))},t.\u0275prov=lt({token:t,factory:t.\u0275fac}),t})();const ul=new Ft("AppId"),hl={provide:ul,useFactory:function(){return`${dl()}${dl()}${dl()}`},deps:[]};function dl(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const pl=new Ft("Platform Initializer"),ml=new Ft("Platform ID"),fl=new Ft("appBootstrapListener");let gl=(()=>{class t{log(t){console.log(t)}warn(t){console.warn(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=lt({token:t,factory:t.\u0275fac}),t})();const _l=new Ft("LocaleId"),yl=new Ft("DefaultCurrencyCode");class vl{constructor(t,e){this.ngModuleFactory=t,this.componentFactories=e}}const bl=function(t){return new Pc(t)},wl=bl,Sl=function(t){return Promise.resolve(bl(t))},El=function(t){const e=bl(t),n=Qn(Se(t).declarations).reduce((t,e)=>{const n=be(e);return n&&t.push(new Sc(n)),t},[]);return new vl(e,n)},kl=El,Cl=function(t){return Promise.resolve(El(t))};let xl=(()=>{class t{constructor(){this.compileModuleSync=wl,this.compileModuleAsync=Sl,this.compileModuleAndAllComponentsSync=kl,this.compileModuleAndAllComponentsAsync=Cl}clearCache(){}clearCacheFor(t){}getModuleId(t){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=lt({token:t,factory:t.\u0275fac}),t})();const Tl=(()=>Promise.resolve(0))();function Il(t){"undefined"==typeof Zone?Tl.then(()=>{t&&t.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",t)}class Rl{constructor({enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:e=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new jc(!1),this.onMicrotaskEmpty=new jc(!1),this.onStable=new jc(!1),this.onError=new jc(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched(),this._nesting=0,this._outer=this._inner=Zone.current,Zone.wtfZoneSpec&&(this._inner=this._inner.fork(Zone.wtfZoneSpec)),Zone.TaskTrackingZoneSpec&&(this._inner=this._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(this._inner=this._inner.fork(Zone.longStackTraceZoneSpec)),this.shouldCoalesceEventChangeDetection=e,this.lastRequestAnimationFrameId=-1,this.nativeRequestAnimationFrame=function(){let t=Rt.requestAnimationFrame,e=Rt.cancelAnimationFrame;if("undefined"!=typeof Zone&&t&&e){const n=t[Zone.__symbol__("OriginalDelegate")];n&&(t=n);const i=e[Zone.__symbol__("OriginalDelegate")];i&&(e=i)}return{nativeRequestAnimationFrame:t,nativeCancelAnimationFrame:e}}().nativeRequestAnimationFrame,function(t){const e=!!t.shouldCoalesceEventChangeDetection&&t.nativeRequestAnimationFrame&&(()=>{!function(t){-1===t.lastRequestAnimationFrameId&&(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(Rt,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,Pl(t),Dl(t)},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),Pl(t))}(t)});t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0,maybeDelayChangeDetection:e},onInvokeTask:(n,i,r,s,o,a)=>{try{return Ml(t),n.invokeTask(r,s,o,a)}finally{e&&"eventTask"===s.type&&e(),Nl(t)}},onInvoke:(e,n,i,r,s,o,a)=>{try{return Ml(t),e.invoke(i,r,s,o,a)}finally{Nl(t)}},onHasTask:(e,n,i,r)=>{e.hasTask(i,r),n===i&&("microTask"==r.change?(t._hasPendingMicrotasks=r.microTask,Pl(t),Dl(t)):"macroTask"==r.change&&(t.hasPendingMacrotasks=r.macroTask))},onHandleError:(e,n,i,r)=>(e.handleError(i,r),t.runOutsideAngular(()=>t.onError.emit(r)),!1)})}(this)}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Rl.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(Rl.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(t,e,n){return this._inner.run(t,e,n)}runTask(t,e,n,i){const r=this._inner,s=r.scheduleEventTask("NgZoneEvent: "+i,t,Al,Ol,Ol);try{return r.runTask(s,e,n)}finally{r.cancelTask(s)}}runGuarded(t,e,n){return this._inner.runGuarded(t,e,n)}runOutsideAngular(t){return this._outer.run(t)}}function Ol(){}const Al={};function Dl(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function Pl(t){t.hasPendingMicrotasks=!!(t._hasPendingMicrotasks||t.shouldCoalesceEventChangeDetection&&-1!==t.lastRequestAnimationFrameId)}function Ml(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function Nl(t){t._nesting--,Dl(t)}class Ll{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new jc,this.onMicrotaskEmpty=new jc,this.onStable=new jc,this.onError=new jc}run(t,e,n){return t.apply(e,n)}runGuarded(t,e,n){return t.apply(e,n)}runOutsideAngular(t){return t()}runTask(t,e,n,i){return t.apply(e,n)}}let Fl=(()=>{class t{constructor(t){this._ngZone=t,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Rl.assertNotInAngularZone(),Il(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Il(()=>{for(;0!==this._callbacks.length;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb(this._didWork)}this._didWork=!1});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(e=>!e.updateCb||!e.updateCb(t)||(clearTimeout(e.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,e,n){let i=-1;e&&e>0&&(i=setTimeout(()=>{this._callbacks=this._callbacks.filter(t=>t.timeoutId!==i),t(this._didWork,this.getPendingTasks())},e)),this._callbacks.push({doneCb:t,timeoutId:i,updateCb:n})}whenStable(t,e,n){if(n&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/dist/task-tracking.js" loaded?');this.addCallback(t,e,n),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(t,e,n){return[]}}return t.\u0275fac=function(e){return new(e||t)(zt(Rl))},t.\u0275prov=lt({token:t,factory:t.\u0275fac}),t})(),Ul=(()=>{class t{constructor(){this._applications=new Map,Vl.addToWindow(this)}registerApplication(t,e){this._applications.set(t,e)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,e=!0){return Vl.findTestabilityInTree(this,t,e)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=lt({token:t,factory:t.\u0275fac}),t})();class Bl{addToWindow(t){}findTestabilityInTree(t,e,n){return null}}let jl,Vl=new Bl;const Kl=new Ft("AllowMultipleToken");class ql{constructor(t,e){this.name=t,this.token=e}}function Gl(t,e,n=[]){const i="Platform: "+e,r=new Ft(i);return(e=[])=>{let s=$l();if(!s||s.injector.get(Kl,!1))if(t)t(n.concat(e).concat({provide:r,useValue:!0}));else{const t=n.concat(e).concat({provide:r,useValue:!0},{provide:eo,useValue:"platform"});!function(t){if(jl&&!jl.destroyed&&!jl.injector.get(Kl,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");jl=t.get(Hl);const e=t.get(pl,null);e&&e.forEach(t=>t())}(go.create({providers:t,name:i}))}return function(t){const e=$l();if(!e)throw new Error("No platform exists!");if(!e.injector.get(t,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return e}(r)}}function $l(){return jl&&!jl.destroyed?jl:null}let Hl=(()=>{class t{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,e){const n=function(t,e){let n;return n="noop"===t?new Ll:("zone.js"===t?void 0:t)||new Rl({enableLongStackTrace:Ai(),shouldCoalesceEventChangeDetection:e}),n}(e?e.ngZone:void 0,e&&e.ngZoneEventCoalescing||!1),i=[{provide:Rl,useValue:n}];return n.run(()=>{const e=go.create({providers:i,parent:this.injector,name:t.moduleType.name}),r=t.create(e),s=r.injector.get(vi,null);if(!s)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return r.onDestroy(()=>Yl(this._modules,r)),n.runOutsideAngular(()=>n.onError.subscribe({next:t=>{s.handleError(t)}})),function(t,e,n){try{const i=n();return Vo(i)?i.catch(n=>{throw e.runOutsideAngular(()=>t.handleError(n)),n}):i}catch(i){throw e.runOutsideAngular(()=>t.handleError(i)),i}}(s,n,()=>{const t=r.injector.get(ll);return t.runInitializers(),t.donePromise.then(()=>(Oc(r.injector.get(_l,"en-US")||"en-US"),this._moduleDoBootstrap(r),r))})})}bootstrapModule(t,e=[]){const n=zl({},e);return function(t,e,n){const i=new Pc(n);return Promise.resolve(i)}(0,0,t).then(t=>this.bootstrapModuleFactory(t,n))}_moduleDoBootstrap(t){const e=t.injector.get(Wl);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(t=>e.bootstrap(t));else{if(!t.instance.ngDoBootstrap)throw new Error(`The module ${vt(t.instance.constructor)} was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. Please define one of these.`);t.instance.ngDoBootstrap(e)}this._modules.push(t)}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach(t=>t.destroy()),this._destroyListeners.forEach(t=>t()),this._destroyed=!0}get destroyed(){return this._destroyed}}return t.\u0275fac=function(e){return new(e||t)(zt(go))},t.\u0275prov=lt({token:t,factory:t.\u0275fac}),t})();function zl(t,e){return Array.isArray(e)?e.reduce(zl,t):Object.assign(Object.assign({},t),e)}let Wl=(()=>{class t{constructor(t,e,n,i,r,s){this._zone=t,this._console=e,this._injector=n,this._exceptionHandler=i,this._componentFactoryResolver=r,this._initStatus=s,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._enforceNoNewChanges=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._enforceNoNewChanges=Ai(),this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const o=new y(t=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{t.next(this._stable),t.complete()})}),a=new y(t=>{let e;this._zone.runOutsideAngular(()=>{e=this._zone.onStable.subscribe(()=>{Rl.assertNotInAngularZone(),Il(()=>{this._stable||this._zone.hasPendingMacrotasks||this._zone.hasPendingMicrotasks||(this._stable=!0,t.next(!0))})})});const n=this._zone.onUnstable.subscribe(()=>{Rl.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{t.next(!1)}))});return()=>{e.unsubscribe(),n.unsubscribe()}});this.isStable=$(o,a.pipe(J()))}bootstrap(t,e){if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");let n;n=t instanceof Va?t:this._componentFactoryResolver.resolveComponentFactory(t),this.componentTypes.push(n.componentType);const i=n.isBoundToModule?void 0:this._injector.get(Zt),r=n.create(go.NULL,[],e||n.selector,i);r.onDestroy(()=>{this._unloadComponent(r)});const s=r.injector.get(Fl,null);return s&&r.injector.get(Ul).registerApplication(r.location.nativeElement,s),this._loadComponent(r),Ai()&&this._console.log("Angular is running in development mode. Call enableProdMode() to enable production mode."),r}tick(){if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");try{this._runningTick=!0;for(let t of this._views)t.detectChanges();if(this._enforceNoNewChanges)for(let t of this._views)t.checkNoChanges()}catch(t){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(t))}finally{this._runningTick=!1}}attachView(t){const e=t;this._views.push(e),e.attachToAppRef(this)}detachView(t){const e=t;Yl(this._views,e),e.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t),this._injector.get(fl,[]).concat(this._bootstrapListeners).forEach(e=>e(t))}_unloadComponent(t){this.detachView(t.hostView),Yl(this.components,t)}ngOnDestroy(){this._views.slice().forEach(t=>t.destroy())}get viewCount(){return this._views.length}}return t.\u0275fac=function(e){return new(e||t)(zt(Rl),zt(gl),zt(go),zt(vi),zt(qa),zt(ll))},t.\u0275prov=lt({token:t,factory:t.\u0275fac}),t})();function Yl(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}class Xl{}class Ql{}const Zl={factoryPathPrefix:"",factoryPathSuffix:".ngfactory"};let Jl=(()=>{class t{constructor(t,e){this._compiler=t,this._config=e||Zl}load(t){return this.loadAndCompile(t)}loadAndCompile(t){let[e,i]=t.split("#");return void 0===i&&(i="default"),n("zn8P")(e).then(t=>t[i]).then(t=>tu(t,e,i)).then(t=>this._compiler.compileModuleAsync(t))}loadFactory(t){let[e,i]=t.split("#"),r="NgFactory";return void 0===i&&(i="default",r=""),n("zn8P")(this._config.factoryPathPrefix+e+this._config.factoryPathSuffix).then(t=>t[i+r]).then(t=>tu(t,e,i))}}return t.\u0275fac=function(e){return new(e||t)(zt(xl),zt(Ql,8))},t.\u0275prov=lt({token:t,factory:t.\u0275fac}),t})();function tu(t,e,n){if(!t)throw new Error(`Cannot find '${n}' in '${e}'`);return t}const eu=Gl(null,"core",[{provide:ml,useValue:"unknown"},{provide:Hl,deps:[go]},{provide:Ul,deps:[]},{provide:gl,deps:[]}]),nu=[{provide:Wl,useClass:Wl,deps:[Rl,gl,go,vi,qa,ll]},{provide:wc,deps:[Rl],useFactory:function(t){let e=[];return t.onStable.subscribe(()=>{for(;e.length;)e.pop()()}),function(t){e.push(t)}}},{provide:ll,useClass:ll,deps:[[new it,cl]]},{provide:xl,useClass:xl,deps:[]},hl,{provide:lc,useFactory:function(){return dc},deps:[]},{provide:uc,useFactory:function(){return pc},deps:[]},{provide:_l,useFactory:function(t){return Oc(t=t||"undefined"!=typeof $localize&&$localize.locale||"en-US"),t},deps:[[new nt(_l),new it,new st]]},{provide:yl,useValue:"USD"}];let iu=(()=>{class t{constructor(t){}}return t.\u0275mod=ge({type:t}),t.\u0275inj=ut({factory:function(e){return new(e||t)(zt(Wl))},providers:nu}),t})(),ru=null;function su(){return ru}const ou=new Ft("DocumentToken");let au=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=lt({factory:cu,token:t,providedIn:"platform"}),t})();function cu(){return zt(uu)}const lu=new Ft("Location Initialized");let uu=(()=>{class t extends au{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=su().getLocation(),this._history=su().getHistory()}getBaseHrefFromDOM(){return su().getBaseHref(this._doc)}onPopState(t){su().getGlobalEventTarget(this._doc,"window").addEventListener("popstate",t,!1)}onHashChange(t){su().getGlobalEventTarget(this._doc,"window").addEventListener("hashchange",t,!1)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,e,n){hu()?this._history.pushState(t,e,n):this.location.hash=n}replaceState(t,e,n){hu()?this._history.replaceState(t,e,n):this.location.hash=n}forward(){this._history.forward()}back(){this._history.back()}getState(){return this._history.state}}return t.\u0275fac=function(e){return new(e||t)(zt(ou))},t.\u0275prov=lt({factory:du,token:t,providedIn:"platform"}),t})();function hu(){return!!window.history.pushState}function du(){return new uu(zt(ou))}function pu(t,e){if(0==t.length)return e;if(0==e.length)return t;let n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,2==n?t+e.substring(1):1==n?t+e:t+"/"+e}function mu(t){const e=t.match(/#|\?|$/),n=e&&e.index||t.length;return t.slice(0,n-("/"===t[n-1]?1:0))+t.slice(n)}function fu(t){return t&&"?"!==t[0]?"?"+t:t}let gu=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=lt({factory:_u,token:t,providedIn:"root"}),t})();function _u(t){const e=zt(ou).location;return new vu(zt(au),e&&e.origin||"")}const yu=new Ft("appBaseHref");let vu=(()=>{class t extends gu{constructor(t,e){if(super(),this._platformLocation=t,null==e&&(e=this._platformLocation.getBaseHrefFromDOM()),null==e)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=e}onPopState(t){this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t)}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return pu(this._baseHref,t)}path(t=!1){const e=this._platformLocation.pathname+fu(this._platformLocation.search),n=this._platformLocation.hash;return n&&t?`${e}${n}`:e}pushState(t,e,n,i){const r=this.prepareExternalUrl(n+fu(i));this._platformLocation.pushState(t,e,r)}replaceState(t,e,n,i){const r=this.prepareExternalUrl(n+fu(i));this._platformLocation.replaceState(t,e,r)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}}return t.\u0275fac=function(e){return new(e||t)(zt(au),zt(yu,8))},t.\u0275prov=lt({token:t,factory:t.\u0275fac}),t})(),bu=(()=>{class t extends gu{constructor(t,e){super(),this._platformLocation=t,this._baseHref="",null!=e&&(this._baseHref=e)}onPopState(t){this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t)}getBaseHref(){return this._baseHref}path(t=!1){let e=this._platformLocation.hash;return null==e&&(e="#"),e.length>0?e.substring(1):e}prepareExternalUrl(t){const e=pu(this._baseHref,t);return e.length>0?"#"+e:e}pushState(t,e,n,i){let r=this.prepareExternalUrl(n+fu(i));0==r.length&&(r=this._platformLocation.pathname),this._platformLocation.pushState(t,e,r)}replaceState(t,e,n,i){let r=this.prepareExternalUrl(n+fu(i));0==r.length&&(r=this._platformLocation.pathname),this._platformLocation.replaceState(t,e,r)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}}return t.\u0275fac=function(e){return new(e||t)(zt(au),zt(yu,8))},t.\u0275prov=lt({token:t,factory:t.\u0275fac}),t})(),wu=(()=>{class t{constructor(t,e){this._subject=new jc,this._urlChangeListeners=[],this._platformStrategy=t;const n=this._platformStrategy.getBaseHref();this._platformLocation=e,this._baseHref=mu(Eu(n)),this._platformStrategy.onPopState(t=>{this._subject.emit({url:this.path(!0),pop:!0,state:t.state,type:t.type})})}path(t=!1){return this.normalize(this._platformStrategy.path(t))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(t,e=""){return this.path()==this.normalize(t+fu(e))}normalize(e){return t.stripTrailingSlash(function(t,e){return t&&e.startsWith(t)?e.substring(t.length):e}(this._baseHref,Eu(e)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)}go(t,e="",n=null){this._platformStrategy.pushState(n,"",t,e),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+fu(e)),n)}replaceState(t,e="",n=null){this._platformStrategy.replaceState(n,"",t,e),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+fu(e)),n)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}onUrlChange(t){this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(t=>{this._notifyUrlChangeListeners(t.url,t.state)}))}_notifyUrlChangeListeners(t="",e){this._urlChangeListeners.forEach(n=>n(t,e))}subscribe(t,e,n){return this._subject.subscribe({next:t,error:e,complete:n})}}return t.\u0275fac=function(e){return new(e||t)(zt(gu),zt(au))},t.normalizeQueryParams=fu,t.joinWithSlash=pu,t.stripTrailingSlash=mu,t.\u0275prov=lt({factory:Su,token:t,providedIn:"root"}),t})();function Su(){return new wu(zt(gu),zt(au))}function Eu(t){return t.replace(/\/index.html$/,"")}var ku=function(t){return t[t.Zero=0]="Zero",t[t.One=1]="One",t[t.Two=2]="Two",t[t.Few=3]="Few",t[t.Many=4]="Many",t[t.Other=5]="Other",t}({});class Cu{}let xu=(()=>{class t extends Cu{constructor(t){super(),this.locale=t}getPluralCategory(t,e){switch(function(t){return function(t){const e=function(t){return t.toLowerCase().replace(/_/g,"-")}(t);let n=Tc(e);if(n)return n;const i=e.split("-")[0];if(n=Tc(i),n)return n;if("en"===i)return Cc;throw new Error(`Missing locale data for the locale "${t}".`)}(t)[Ic.PluralCase]}(e||this.locale)(t)){case ku.Zero:return"zero";case ku.One:return"one";case ku.Two:return"two";case ku.Few:return"few";case ku.Many:return"many";default:return"other"}}}return t.\u0275fac=function(e){return new(e||t)(zt(_l))},t.\u0275prov=lt({token:t,factory:t.\u0275fac}),t})(),Tu=(()=>{class t{constructor(t,e,n,i){this._iterableDiffers=t,this._keyValueDiffers=e,this._ngEl=n,this._renderer=i,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(t){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof t?t.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(t){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof t?t.split(/\s+/):t,this._rawClass&&(So(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const t=this._iterableDiffer.diff(this._rawClass);t&&this._applyIterableChanges(t)}else if(this._keyValueDiffer){const t=this._keyValueDiffer.diff(this._rawClass);t&&this._applyKeyValueChanges(t)}}_applyKeyValueChanges(t){t.forEachAddedItem(t=>this._toggleClass(t.key,t.currentValue)),t.forEachChangedItem(t=>this._toggleClass(t.key,t.currentValue)),t.forEachRemovedItem(t=>{t.previousValue&&this._toggleClass(t.key,!1)})}_applyIterableChanges(t){t.forEachAddedItem(t=>{if("string"!=typeof t.item)throw new Error("NgClass can only toggle CSS classes expressed as strings, got "+vt(t.item));this._toggleClass(t.item,!0)}),t.forEachRemovedItem(t=>this._toggleClass(t.item,!1))}_applyClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(t=>this._toggleClass(t,!0)):Object.keys(t).forEach(e=>this._toggleClass(e,!!t[e])))}_removeClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(t=>this._toggleClass(t,!1)):Object.keys(t).forEach(t=>this._toggleClass(t,!1)))}_toggleClass(t,e){(t=t.trim())&&t.split(/\s+/g).forEach(t=>{e?this._renderer.addClass(this._ngEl.nativeElement,t):this._renderer.removeClass(this._ngEl.nativeElement,t)})}}return t.\u0275fac=function(e){return new(e||t)(Ao(lc),Ao(uc),Ao(Ga),Ao(Wa))},t.\u0275dir=ye({type:t,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"}}),t})();class Iu{constructor(t,e,n,i){this.$implicit=t,this.ngForOf=e,this.index=n,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Ru=(()=>{class t{constructor(t,e,n){this._viewContainer=t,this._template=e,this._differs=n,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){Ai()&&null!=t&&"function"!=typeof t&&console&&console.warn&&console.warn(`trackBy must be a function, but received ${JSON.stringify(t)}. See https://angular.io/api/common/NgForOf#change-propagation for more information.`),this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const n=this._ngForOf;if(!this._differ&&n)try{this._differ=this._differs.find(n).create(this.ngForTrackBy)}catch(e){throw new Error(`Cannot find a differ supporting object '${n}' of type '${t=n,t.name||typeof t}'. NgFor only supports binding to Iterables such as Arrays.`)}}var t;if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const e=[];t.forEachOperation((t,n,i)=>{if(null==t.previousIndex){const n=this._viewContainer.createEmbeddedView(this._template,new Iu(null,this._ngForOf,-1,-1),null===i?void 0:i),r=new Ou(t,n);e.push(r)}else if(null==i)this._viewContainer.remove(null===n?void 0:n);else if(null!==n){const r=this._viewContainer.get(n);this._viewContainer.move(r,i);const s=new Ou(t,r);e.push(s)}});for(let n=0;n<e.length;n++)this._perViewChange(e[n].view,e[n].record);for(let n=0,i=this._viewContainer.length;n<i;n++){const t=this._viewContainer.get(n);t.context.index=n,t.context.count=i,t.context.ngForOf=this._ngForOf}t.forEachIdentityChange(t=>{this._viewContainer.get(t.currentIndex).context.$implicit=t.item})}_perViewChange(t,e){t.context.$implicit=e.item}static ngTemplateContextGuard(t,e){return!0}}return t.\u0275fac=function(e){return new(e||t)(Ao(gc),Ao(mc),Ao(lc))},t.\u0275dir=ye({type:t,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),t})();class Ou{constructor(t,e){this.record=t,this.view=e}}let Au=(()=>{class t{constructor(t,e){this._viewContainer=t,this._context=new Du,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=e}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){Pu("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){Pu("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,e){return!0}}return t.\u0275fac=function(e){return new(e||t)(Ao(gc),Ao(mc))},t.\u0275dir=ye({type:t,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),t})();class Du{constructor(){this.$implicit=null,this.ngIf=null}}function Pu(t,e){if(e&&!e.createEmbeddedView)throw new Error(`${t} must be a TemplateRef, but received '${vt(e)}'.`)}class Mu{constructor(t,e){this._viewContainerRef=t,this._templateRef=e,this._created=!1}create(){this._created=!0,this._viewContainerRef.createEmbeddedView(this._templateRef)}destroy(){this._created=!1,this._viewContainerRef.clear()}enforceState(t){t&&!this._created?this.create():!t&&this._created&&this.destroy()}}let Nu=(()=>{class t{constructor(){this._defaultUsed=!1,this._caseCount=0,this._lastCaseCheckIndex=0,this._lastCasesMatched=!1}set ngSwitch(t){this._ngSwitch=t,0===this._caseCount&&this._updateDefaultCases(!0)}_addCase(){return this._caseCount++}_addDefault(t){this._defaultViews||(this._defaultViews=[]),this._defaultViews.push(t)}_matchCase(t){const e=t==this._ngSwitch;return this._lastCasesMatched=this._lastCasesMatched||e,this._lastCaseCheckIndex++,this._lastCaseCheckIndex===this._caseCount&&(this._updateDefaultCases(!this._lastCasesMatched),this._lastCaseCheckIndex=0,this._lastCasesMatched=!1),e}_updateDefaultCases(t){if(this._defaultViews&&t!==this._defaultUsed){this._defaultUsed=t;for(let e=0;e<this._defaultViews.length;e++)this._defaultViews[e].enforceState(t)}}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=ye({type:t,selectors:[["","ngSwitch",""]],inputs:{ngSwitch:"ngSwitch"}}),t})(),Lu=(()=>{class t{constructor(t,e,n){this.ngSwitch=n,n._addCase(),this._view=new Mu(t,e)}ngDoCheck(){this._view.enforceState(this.ngSwitch._matchCase(this.ngSwitchCase))}}return t.\u0275fac=function(e){return new(e||t)(Ao(gc),Ao(mc),Ao(Nu,1))},t.\u0275dir=ye({type:t,selectors:[["","ngSwitchCase",""]],inputs:{ngSwitchCase:"ngSwitchCase"}}),t})(),Fu=(()=>{class t{constructor(t,e,n){n._addDefault(new Mu(t,e))}}return t.\u0275fac=function(e){return new(e||t)(Ao(gc),Ao(mc),Ao(Nu,1))},t.\u0275dir=ye({type:t,selectors:[["","ngSwitchDefault",""]]}),t})(),Uu=(()=>{class t{constructor(t,e,n){this._ngEl=t,this._differs=e,this._renderer=n,this._ngStyle=null,this._differ=null}set ngStyle(t){this._ngStyle=t,!this._differ&&t&&(this._differ=this._differs.find(t).create())}ngDoCheck(){if(this._differ){const t=this._differ.diff(this._ngStyle);t&&this._applyChanges(t)}}_setStyle(t,e){const[n,i]=t.split(".");null!=(e=null!=e&&i?`${e}${i}`:e)?this._renderer.setStyle(this._ngEl.nativeElement,n,e):this._renderer.removeStyle(this._ngEl.nativeElement,n)}_applyChanges(t){t.forEachRemovedItem(t=>this._setStyle(t.key,null)),t.forEachAddedItem(t=>this._setStyle(t.key,t.currentValue)),t.forEachChangedItem(t=>this._setStyle(t.key,t.currentValue))}}return t.\u0275fac=function(e){return new(e||t)(Ao(Ga),Ao(uc),Ao(Wa))},t.\u0275dir=ye({type:t,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"}}),t})(),Bu=(()=>{class t{constructor(t){this._viewContainerRef=t,this._viewRef=null,this.ngTemplateOutletContext=null,this.ngTemplateOutlet=null}ngOnChanges(t){if(this._shouldRecreateView(t)){const t=this._viewContainerRef;this._viewRef&&t.remove(t.indexOf(this._viewRef)),this._viewRef=this.ngTemplateOutlet?t.createEmbeddedView(this.ngTemplateOutlet,this.ngTemplateOutletContext):null}else this._viewRef&&this.ngTemplateOutletContext&&this._updateExistingContext(this.ngTemplateOutletContext)}_shouldRecreateView(t){const e=t.ngTemplateOutletContext;return!!t.ngTemplateOutlet||e&&this._hasContextShapeChanged(e)}_hasContextShapeChanged(t){const e=Object.keys(t.previousValue||{}),n=Object.keys(t.currentValue||{});if(e.length===n.length){for(let t of n)if(-1===e.indexOf(t))return!0;return!1}return!0}_updateExistingContext(t){for(let e of Object.keys(t))this._viewRef.context[e]=this.ngTemplateOutletContext[e]}}return t.\u0275fac=function(e){return new(e||t)(Ao(gc))},t.\u0275dir=ye({type:t,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet"},features:[Ae]}),t})();class ju{createSubscription(t,e){return t.subscribe({next:e,error:t=>{throw t}})}dispose(t){t.unsubscribe()}onDestroy(t){t.unsubscribe()}}class Vu{createSubscription(t,e){return t.then(e,t=>{throw t})}dispose(t){}onDestroy(t){}}const Ku=new Vu,qu=new ju;let Gu=(()=>{class t{constructor(t){this._ref=t,this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null}ngOnDestroy(){this._subscription&&this._dispose()}transform(t){return this._obj?t!==this._obj?(this._dispose(),this.transform(t)):this._latestValue:(t&&this._subscribe(t),this._latestValue)}_subscribe(t){this._obj=t,this._strategy=this._selectStrategy(t),this._subscription=this._strategy.createSubscription(t,e=>this._updateLatestValue(t,e))}_selectStrategy(e){if(Vo(e))return Ku;if(Ko(e))return qu;throw Error(`InvalidPipeArgument: '${e}' for pipe '${vt(t)}'`)}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(t,e){t===this._obj&&(this._latestValue=e,this._ref.markForCheck())}}return t.\u0275fac=function(e){return new(e||t)(function(t=ot.Default){const e=Qs(!0);if(null!=e||t&ot.Optional)return e;throw new Error("No provider for ChangeDetectorRef!")}())},t.\u0275pipe=ve({name:"async",type:t,pure:!1}),t})(),$u=(()=>{class t{}return t.\u0275mod=ge({type:t}),t.\u0275inj=ut({factory:function(e){return new(e||t)},providers:[{provide:Cu,useClass:xu}]}),t})(),Hu=(()=>{class t{}return t.\u0275prov=lt({token:t,providedIn:"root",factory:()=>new zu(zt(ou),window,zt(vi))}),t})();class zu{constructor(t,e,n){this.document=t,this.window=e,this.errorHandler=n,this.offset=()=>[0,0]}setOffset(t){this.offset=Array.isArray(t)?()=>t:t}getScrollPosition(){return this.supportScrollRestoration()?[this.window.scrollX,this.window.scrollY]:[0,0]}scrollToPosition(t){this.supportScrollRestoration()&&this.window.scrollTo(t[0],t[1])}scrollToAnchor(t){if(this.supportScrollRestoration()){t=this.window.CSS&&this.window.CSS.escape?this.window.CSS.escape(t):t.replace(/(\"|\'\ |:|\.|\[|\]|,|=)/g,"\\$1");try{const e=this.document.querySelector("#"+t);if(e)return void this.scrollToElement(e);const n=this.document.querySelector(`[name='${t}']`);if(n)return void this.scrollToElement(n)}catch(e){this.errorHandler.handleError(e)}}}setHistoryScrollRestoration(t){if(this.supportScrollRestoration()){const e=this.window.history;e&&e.scrollRestoration&&(e.scrollRestoration=t)}}scrollToElement(t){const e=t.getBoundingClientRect(),n=e.left+this.window.pageXOffset,i=e.top+this.window.pageYOffset,r=this.offset();this.window.scrollTo(n-r[0],i-r[1])}supportScrollRestoration(){try{return!!this.window&&!!this.window.scrollTo}catch(t){return!1}}}class Wu extends class extends class{}{constructor(){super()}supportsDOMEvents(){return!0}}{static makeCurrent(){var t;t=new Wu,ru||(ru=t)}getProperty(t,e){return t[e]}log(t){window.console&&window.console.log&&window.console.log(t)}logGroup(t){window.console&&window.console.group&&window.console.group(t)}logGroupEnd(){window.console&&window.console.groupEnd&&window.console.groupEnd()}onAndCancel(t,e,n){return t.addEventListener(e,n,!1),()=>{t.removeEventListener(e,n,!1)}}dispatchEvent(t,e){t.dispatchEvent(e)}remove(t){return t.parentNode&&t.parentNode.removeChild(t),t}getValue(t){return t.value}createElement(t,e){return(e=e||this.getDefaultDocument()).createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,e){return"window"===e?window:"document"===e?t:"body"===e?t.body:null}getHistory(){return window.history}getLocation(){return window.location}getBaseHref(t){const e=Xu||(Xu=document.querySelector("base"),Xu)?Xu.getAttribute("href"):null;return null==e?null:(n=e,Yu||(Yu=document.createElement("a")),Yu.setAttribute("href",n),"/"===Yu.pathname.charAt(0)?Yu.pathname:"/"+Yu.pathname);var n}resetBaseElement(){Xu=null}getUserAgent(){return window.navigator.userAgent}performanceNow(){return window.performance&&window.performance.now?window.performance.now():(new Date).getTime()}supportsCookies(){return!0}getCookie(t){return function(t,e){e=encodeURIComponent(e);for(const n of t.split(";")){const t=n.indexOf("="),[i,r]=-1==t?[n,""]:[n.slice(0,t),n.slice(t+1)];if(i.trim()===e)return decodeURIComponent(r)}return null}(document.cookie,t)}}let Yu,Xu=null;const Qu=new Ft("TRANSITION_ID"),Zu=[{provide:cl,useFactory:function(t,e,n){return()=>{n.get(ll).donePromise.then(()=>{const n=su();Array.prototype.slice.apply(e.querySelectorAll("style[ng-transition]")).filter(e=>e.getAttribute("ng-transition")===t).forEach(t=>n.remove(t))})}},deps:[Qu,ou,go],multi:!0}];class Ju{static init(){var t;t=new Ju,Vl=t}addToWindow(t){Rt.getAngularTestability=(e,n=!0)=>{const i=t.findTestabilityInTree(e,n);if(null==i)throw new Error("Could not find testability for element.");return i},Rt.getAllAngularTestabilities=()=>t.getAllTestabilities(),Rt.getAllAngularRootElements=()=>t.getAllRootElements(),Rt.frameworkStabilizers||(Rt.frameworkStabilizers=[]),Rt.frameworkStabilizers.push(t=>{const e=Rt.getAllAngularTestabilities();let n=e.length,i=!1;const r=function(e){i=i||e,n--,0==n&&t(i)};e.forEach((function(t){t.whenStable(r)}))})}findTestabilityInTree(t,e,n){if(null==e)return null;const i=t.getTestability(e);return null!=i?i:n?su().isShadowRoot(e)?this.findTestabilityInTree(t,e.host,!0):this.findTestabilityInTree(t,e.parentElement,!0):null}}const th=new Ft("EventManagerPlugins");let eh=(()=>{class t{constructor(t,e){this._zone=e,this._eventNameToPlugin=new Map,t.forEach(t=>t.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,e,n){return this._findPluginFor(e).addEventListener(t,e,n)}addGlobalEventListener(t,e,n){return this._findPluginFor(e).addGlobalEventListener(t,e,n)}getZone(){return this._zone}_findPluginFor(t){const e=this._eventNameToPlugin.get(t);if(e)return e;const n=this._plugins;for(let i=0;i<n.length;i++){const e=n[i];if(e.supports(t))return this._eventNameToPlugin.set(t,e),e}throw new Error("No event manager plugin found for event "+t)}}return t.\u0275fac=function(e){return new(e||t)(zt(th),zt(Rl))},t.\u0275prov=lt({token:t,factory:t.\u0275fac}),t})();class nh{constructor(t){this._doc=t}addGlobalEventListener(t,e,n){const i=su().getGlobalEventTarget(this._doc,t);if(!i)throw new Error(`Unsupported event target ${i} for event ${e}`);return this.addEventListener(i,e,n)}}let ih=(()=>{class t{constructor(){this._stylesSet=new Set}addStyles(t){const e=new Set;t.forEach(t=>{this._stylesSet.has(t)||(this._stylesSet.add(t),e.add(t))}),this.onStylesAdded(e)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=lt({token:t,factory:t.\u0275fac}),t})(),rh=(()=>{class t extends ih{constructor(t){super(),this._doc=t,this._hostNodes=new Set,this._styleNodes=new Set,this._hostNodes.add(t.head)}_addStylesToHost(t,e){t.forEach(t=>{const n=this._doc.createElement("style");n.textContent=t,this._styleNodes.add(e.appendChild(n))})}addHost(t){this._addStylesToHost(this._stylesSet,t),this._hostNodes.add(t)}removeHost(t){this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach(e=>this._addStylesToHost(t,e))}ngOnDestroy(){this._styleNodes.forEach(t=>su().remove(t))}}return t.\u0275fac=function(e){return new(e||t)(zt(ou))},t.\u0275prov=lt({token:t,factory:t.\u0275fac}),t})();const sh={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},oh=/%COMP%/g;function ah(t,e,n){for(let i=0;i<e.length;i++){let r=e[i];Array.isArray(r)?ah(t,r,n):(r=r.replace(oh,t),n.push(r))}return n}function ch(t){return e=>{if("__ngUnwrap__"===e)return t;!1===t(e)&&(e.preventDefault(),e.returnValue=!1)}}let lh=(()=>{class t{constructor(t,e,n){this.eventManager=t,this.sharedStylesHost=e,this.appId=n,this.rendererByCompId=new Map,this.defaultRenderer=new uh(t)}createRenderer(t,e){if(!t||!e)return this.defaultRenderer;switch(e.encapsulation){case ce.Emulated:{let n=this.rendererByCompId.get(e.id);return n||(n=new hh(this.eventManager,this.sharedStylesHost,e,this.appId),this.rendererByCompId.set(e.id,n)),n.applyToHost(t),n}case ce.Native:case ce.ShadowDom:return new dh(this.eventManager,this.sharedStylesHost,t,e);default:if(!this.rendererByCompId.has(e.id)){const t=ah(e.id,e.styles,[]);this.sharedStylesHost.addStyles(t),this.rendererByCompId.set(e.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return t.\u0275fac=function(e){return new(e||t)(zt(eh),zt(rh),zt(ul))},t.\u0275prov=lt({token:t,factory:t.\u0275fac}),t})();class uh{constructor(t){this.eventManager=t,this.data=Object.create(null)}destroy(){}createElement(t,e){return e?document.createElementNS(sh[e]||e,t):document.createElement(t)}createComment(t){return document.createComment(t)}createText(t){return document.createTextNode(t)}appendChild(t,e){t.appendChild(e)}insertBefore(t,e,n){t&&t.insertBefore(e,n)}removeChild(t,e){t&&t.removeChild(e)}selectRootElement(t,e){let n="string"==typeof t?document.querySelector(t):t;if(!n)throw new Error(`The selector "${t}" did not match any elements`);return e||(n.textContent=""),n}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,e,n,i){if(i){e=i+":"+e;const r=sh[i];r?t.setAttributeNS(r,e,n):t.setAttribute(e,n)}else t.setAttribute(e,n)}removeAttribute(t,e,n){if(n){const i=sh[n];i?t.removeAttributeNS(i,e):t.removeAttribute(`${n}:${e}`)}else t.removeAttribute(e)}addClass(t,e){t.classList.add(e)}removeClass(t,e){t.classList.remove(e)}setStyle(t,e,n,i){i&za.DashCase?t.style.setProperty(e,n,i&za.Important?"important":""):t.style[e]=n}removeStyle(t,e,n){n&za.DashCase?t.style.removeProperty(e):t.style[e]=""}setProperty(t,e,n){t[e]=n}setValue(t,e){t.nodeValue=e}listen(t,e,n){return"string"==typeof t?this.eventManager.addGlobalEventListener(t,e,ch(n)):this.eventManager.addEventListener(t,e,ch(n))}}class hh extends uh{constructor(t,e,n,i){super(t),this.component=n;const r=ah(i+"-"+n.id,n.styles,[]);e.addStyles(r),this.contentAttr="_ngcontent-%COMP%".replace(oh,i+"-"+n.id),this.hostAttr=function(t){return"_nghost-%COMP%".replace(oh,t)}(i+"-"+n.id)}applyToHost(t){super.setAttribute(t,this.hostAttr,"")}createElement(t,e){const n=super.createElement(t,e);return super.setAttribute(n,this.contentAttr,""),n}}class dh extends uh{constructor(t,e,n,i){super(t),this.sharedStylesHost=e,this.hostEl=n,this.component=i,this.shadowRoot=i.encapsulation===ce.ShadowDom?n.attachShadow({mode:"open"}):n.createShadowRoot(),this.sharedStylesHost.addHost(this.shadowRoot);const r=ah(i.id,i.styles,[]);for(let s=0;s<r.length;s++){const t=document.createElement("style");t.textContent=r[s],this.shadowRoot.appendChild(t)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(t,e){return super.appendChild(this.nodeOrShadowRoot(t),e)}insertBefore(t,e,n){return super.insertBefore(this.nodeOrShadowRoot(t),e,n)}removeChild(t,e){return super.removeChild(this.nodeOrShadowRoot(t),e)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}}let ph=(()=>{class t extends nh{constructor(t){super(t)}supports(t){return!0}addEventListener(t,e,n){return t.addEventListener(e,n,!1),()=>this.removeEventListener(t,e,n)}removeEventListener(t,e,n){return t.removeEventListener(e,n)}}return t.\u0275fac=function(e){return new(e||t)(zt(ou))},t.\u0275prov=lt({token:t,factory:t.\u0275fac}),t})();const mh=["alt","control","meta","shift"],fh={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},gh={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},_h={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey};let yh=(()=>{class t extends nh{constructor(t){super(t)}supports(e){return null!=t.parseEventName(e)}addEventListener(e,n,i){const r=t.parseEventName(n),s=t.eventCallback(r.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>su().onAndCancel(e,r.domEventName,s))}static parseEventName(e){const n=e.toLowerCase().split("."),i=n.shift();if(0===n.length||"keydown"!==i&&"keyup"!==i)return null;const r=t._normalizeKey(n.pop());let s="";if(mh.forEach(t=>{const e=n.indexOf(t);e>-1&&(n.splice(e,1),s+=t+".")}),s+=r,0!=n.length||0===r.length)return null;const o={};return o.domEventName=i,o.fullKey=s,o}static getEventFullKey(t){let e="",n=function(t){let e=t.key;if(null==e){if(e=t.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===t.location&&gh.hasOwnProperty(e)&&(e=gh[e]))}return fh[e]||e}(t);return n=n.toLowerCase()," "===n?n="space":"."===n&&(n="dot"),mh.forEach(i=>{i!=n&&(0,_h[i])(t)&&(e+=i+".")}),e+=n,e}static eventCallback(e,n,i){return r=>{t.getEventFullKey(r)===e&&i.runGuarded(()=>n(r))}}static _normalizeKey(t){switch(t){case"esc":return"escape";default:return t}}}return t.\u0275fac=function(e){return new(e||t)(zt(ou))},t.\u0275prov=lt({token:t,factory:t.\u0275fac}),t})(),vh=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=lt({factory:function(){return zt(bh)},token:t,providedIn:"root"}),t})(),bh=(()=>{class t extends vh{constructor(t){super(),this._doc=t}sanitize(t,e){if(null==e)return null;switch(t){case er.NONE:return e;case er.HTML:return Ti(e,"HTML")?xi(e):Ji(this._doc,String(e));case er.STYLE:return Ti(e,"Style")?xi(e):e;case er.SCRIPT:if(Ti(e,"Script"))return xi(e);throw new Error("unsafe value used in a script context");case er.URL:return Ii(e),Ti(e,"URL")?xi(e):Li(String(e));case er.RESOURCE_URL:if(Ti(e,"ResourceURL"))return xi(e);throw new Error("unsafe value used in a resource URL context (see http://g.co/ng/security#xss)");default:throw new Error(`Unexpected SecurityContext ${t} (see http://g.co/ng/security#xss)`)}}bypassSecurityTrustHtml(t){return new wi(t)}bypassSecurityTrustStyle(t){return new Si(t)}bypassSecurityTrustScript(t){return new Ei(t)}bypassSecurityTrustUrl(t){return new ki(t)}bypassSecurityTrustResourceUrl(t){return new Ci(t)}}return t.\u0275fac=function(e){return new(e||t)(zt(ou))},t.\u0275prov=lt({factory:function(){return t=zt(Ut),new bh(t.get(ou));var t},token:t,providedIn:"root"}),t})();const wh=Gl(eu,"browser",[{provide:ml,useValue:"browser"},{provide:pl,useValue:function(){Wu.makeCurrent(),Ju.init()},multi:!0},{provide:ou,useFactory:function(){return function(t){Le=t}(document),document},deps:[]}]),Sh=[[],{provide:eo,useValue:"root"},{provide:vi,useFactory:function(){return new vi},deps:[]},{provide:th,useClass:ph,multi:!0,deps:[ou,Rl,ml]},{provide:th,useClass:yh,multi:!0,deps:[ou]},[],{provide:lh,useClass:lh,deps:[eh,rh,ul]},{provide:Ha,useExisting:lh},{provide:ih,useExisting:rh},{provide:rh,useClass:rh,deps:[ou]},{provide:Fl,useClass:Fl,deps:[Rl]},{provide:eh,useClass:eh,deps:[th,Rl]},[]];let Eh=(()=>{class t{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(e){return{ngModule:t,providers:[{provide:ul,useValue:e.appId},{provide:Qu,useExisting:ul},Zu]}}}return t.\u0275mod=ge({type:t}),t.\u0275inj=ut({factory:function(e){return new(e||t)(zt(t,12))},providers:Sh,imports:[$u,iu]}),t})();function kh(t){return null!=t&&""+t!="false"}function Ch(t,e=0){return function(t){return!isNaN(parseFloat(t))&&!isNaN(Number(t))}(t)?Number(t):e}function xh(t){return Array.isArray(t)?t:[t]}function Th(t){return null==t?"":"string"==typeof t?t:t+"px"}function Ih(t){return t instanceof Ga?t.nativeElement:t}"undefined"!=typeof window&&window;class Rh extends h{constructor(t,e){super()}schedule(t,e=0){return this}}class Oh extends Rh{constructor(t,e){super(t,e),this.scheduler=t,this.work=e,this.pending=!1}schedule(t,e=0){if(this.closed)return this;this.state=t;const n=this.id,i=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(i,n,e)),this.pending=!0,this.delay=e,this.id=this.id||this.requestAsyncId(i,this.id,e),this}requestAsyncId(t,e,n=0){return setInterval(t.flush.bind(t,this),n)}recycleAsyncId(t,e,n=0){if(null!==n&&this.delay===n&&!1===this.pending)return e;clearInterval(e)}execute(t,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const n=this._execute(t,e);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(t,e){let n=!1,i=void 0;try{this.work(t)}catch(r){n=!0,i=!!r&&r||new Error(r)}if(n)return this.unsubscribe(),i}_unsubscribe(){const t=this.id,e=this.scheduler,n=e.actions,i=n.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==i&&n.splice(i,1),null!=t&&(this.id=this.recycleAsyncId(e,t,null)),this.delay=null}}let Ah=(()=>{class t{constructor(e,n=t.now){this.SchedulerAction=e,this.now=n}schedule(t,e=0,n){return new this.SchedulerAction(this,t).schedule(n,e)}}return t.now=()=>Date.now(),t})();class Dh extends Ah{constructor(t,e=Ah.now){super(t,()=>Dh.delegate&&Dh.delegate!==this?Dh.delegate.now():e()),this.actions=[],this.active=!1,this.scheduled=void 0}schedule(t,e=0,n){return Dh.delegate&&Dh.delegate!==this?Dh.delegate.schedule(t,e,n):super.schedule(t,e,n)}flush(t){const{actions:e}=this;if(this.active)return void e.push(t);let n;this.active=!0;do{if(n=t.execute(t.state,t.delay))break}while(t=e.shift());if(this.active=!1,n){for(;t=e.shift();)t.unsubscribe();throw n}}}const Ph=new Dh(Oh);function Mh(t,e=Ph){return n=>n.lift(new Nh(t,e))}class Nh{constructor(t,e){this.dueTime=t,this.scheduler=e}call(t,e){return e.subscribe(new Lh(t,this.dueTime,this.scheduler))}}class Lh extends m{constructor(t,e,n){super(t),this.dueTime=e,this.scheduler=n,this.debouncedSubscription=null,this.lastValue=null,this.hasValue=!1}_next(t){this.clearDebounce(),this.lastValue=t,this.hasValue=!0,this.add(this.debouncedSubscription=this.scheduler.schedule(Fh,this.dueTime,this))}_complete(){this.debouncedNext(),this.destination.complete()}debouncedNext(){if(this.clearDebounce(),this.hasValue){const{lastValue:t}=this;this.lastValue=null,this.hasValue=!1,this.destination.next(t)}}clearDebounce(){const t=this.debouncedSubscription;null!==t&&(this.remove(t),t.unsubscribe(),this.debouncedSubscription=null)}}function Fh(t){t.debouncedNext()}let Uh,Bh=(()=>{class t{create(t){return"undefined"==typeof MutationObserver?null:new MutationObserver(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=lt({factory:function(){return new t},token:t,providedIn:"root"}),t})(),jh=(()=>{class t{constructor(t){this._mutationObserverFactory=t,this._observedElements=new Map}ngOnDestroy(){this._observedElements.forEach((t,e)=>this._cleanupObserver(e))}observe(t){const e=Ih(t);return new y(t=>{const n=this._observeElement(e).subscribe(t);return()=>{n.unsubscribe(),this._unobserveElement(e)}})}_observeElement(t){if(this._observedElements.has(t))this._observedElements.get(t).count++;else{const e=new E,n=this._mutationObserverFactory.create(t=>e.next(t));n&&n.observe(t,{characterData:!0,childList:!0,subtree:!0}),this._observedElements.set(t,{observer:n,stream:e,count:1})}return this._observedElements.get(t).stream}_unobserveElement(t){this._observedElements.has(t)&&(this._observedElements.get(t).count--,this._observedElements.get(t).count||this._cleanupObserver(t))}_cleanupObserver(t){if(this._observedElements.has(t)){const{observer:e,stream:n}=this._observedElements.get(t);e&&e.disconnect(),n.complete(),this._observedElements.delete(t)}}}return t.\u0275fac=function(e){return new(e||t)(zt(Bh))},t.\u0275prov=lt({factory:function(){return new t(zt(Bh))},token:t,providedIn:"root"}),t})(),Vh=(()=>{class t{constructor(t,e,n){this._contentObserver=t,this._elementRef=e,this._ngZone=n,this.event=new jc,this._disabled=!1,this._currentSubscription=null}get disabled(){return this._disabled}set disabled(t){this._disabled=kh(t),this._disabled?this._unsubscribe():this._subscribe()}get debounce(){return this._debounce}set debounce(t){this._debounce=Ch(t),this._subscribe()}ngAfterContentInit(){this._currentSubscription||this.disabled||this._subscribe()}ngOnDestroy(){this._unsubscribe()}_subscribe(){this._unsubscribe();const t=this._contentObserver.observe(this._elementRef);this._ngZone.runOutsideAngular(()=>{this._currentSubscription=(this.debounce?t.pipe(Mh(this.debounce)):t).subscribe(this.event)})}_unsubscribe(){this._currentSubscription&&this._currentSubscription.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(Ao(jh),Ao(Ga),Ao(Rl))},t.\u0275dir=ye({type:t,selectors:[["","cdkObserveContent",""]],inputs:{disabled:["cdkObserveContentDisabled","disabled"],debounce:"debounce"},outputs:{event:"cdkObserveContent"},exportAs:["cdkObserveContent"]}),t})(),Kh=(()=>{class t{}return t.\u0275mod=ge({type:t}),t.\u0275inj=ut({factory:function(e){return new(e||t)},providers:[Bh]}),t})();try{Uh="undefined"!=typeof Intl&&Intl.v8BreakIterator}catch(uL){Uh=!1}let qh,Gh=(()=>{class t{constructor(t){this._platformId=t,this.isBrowser=this._platformId?"browser"===this._platformId:"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!Uh)&&"undefined"!=typeof CSS&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}}return t.\u0275fac=function(e){return new(e||t)(zt(ml))},t.\u0275prov=lt({factory:function(){return new t(zt(ml))},token:t,providedIn:"root"}),t})(),$h=(()=>{class t{}return t.\u0275mod=ge({type:t}),t.\u0275inj=ut({factory:function(e){return new(e||t)}}),t})();const Hh=["color","button","checkbox","date","datetime-local","email","file","hidden","image","month","number","password","radio","range","reset","search","submit","tel","text","time","url","week"];function zh(){if(qh)return qh;if("object"!=typeof document||!document)return qh=new Set(Hh),qh;let t=document.createElement("input");return qh=new Set(Hh.filter(e=>(t.setAttribute("type",e),t.type===e))),qh}let Wh,Yh,Xh;function Qh(t){return function(){if(null==Wh&&"undefined"!=typeof window)try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>Wh=!0}))}finally{Wh=Wh||!1}return Wh}()?t:!!t.capture}function Zh(){if("object"!=typeof document||!document)return 0;if(null==Yh){const t=document.createElement("div"),e=t.style;t.dir="rtl",e.width="1px",e.overflow="auto",e.visibility="hidden",e.pointerEvents="none",e.position="absolute";const n=document.createElement("div"),i=n.style;i.width="2px",i.height="1px",t.appendChild(n),document.body.appendChild(t),Yh=0,0===t.scrollLeft&&(t.scrollLeft=1,Yh=0===t.scrollLeft?1:2),t.parentNode.removeChild(t)}return Yh}function Jh(t){if(function(){if(null==Xh){const t="undefined"!=typeof document?document.head:null;Xh=!(!t||!t.createShadowRoot&&!t.attachShadow)}return Xh}()){const e=t.getRootNode?t.getRootNode():null;if("undefined"!=typeof ShadowRoot&&ShadowRoot&&e instanceof ShadowRoot)return e}return null}function td(...t){let e=t[t.length-1];return C(e)?(t.pop(),U(t,e)):G(t)}function ed(t,...e){return e.length?e.some(e=>t[e]):t.altKey||t.shiftKey||t.ctrlKey||t.metaKey}function nd(){}function id(t,e,n){return function(i){return i.lift(new rd(t,e,n))}}class rd{constructor(t,e,n){this.nextOrObserver=t,this.error=e,this.complete=n}call(t,e){return e.subscribe(new sd(t,this.nextOrObserver,this.error,this.complete))}}class sd extends m{constructor(t,e,n,r){super(t),this._tapNext=nd,this._tapError=nd,this._tapComplete=nd,this._tapError=n||nd,this._tapComplete=r||nd,i(e)?(this._context=this,this._tapNext=e):e&&(this._context=e,this._tapNext=e.next||nd,this._tapError=e.error||nd,this._tapComplete=e.complete||nd)}_next(t){try{this._tapNext.call(this._context,t)}catch(e){return void this.destination.error(e)}this.destination.next(t)}_error(t){try{this._tapError.call(this._context,t)}catch(t){return void this.destination.error(t)}this.destination.error(t)}_complete(){try{this._tapComplete.call(this._context)}catch(t){return void this.destination.error(t)}return this.destination.complete()}}function od(t,e){return function(n){return n.lift(new ad(t,e))}}class ad{constructor(t,e){this.predicate=t,this.thisArg=e}call(t,e){return e.subscribe(new cd(t,this.predicate,this.thisArg))}}class cd extends m{constructor(t,e,n){super(t),this.predicate=e,this.thisArg=n,this.count=0}_next(t){let e;try{e=this.predicate.call(this.thisArg,t,this.count++)}catch(n){return void this.destination.error(n)}e&&this.destination.next(t)}}const ld=(()=>{function t(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return t.prototype=Object.create(Error.prototype),t})(),ud=new y(t=>t.complete());function hd(t){return t?function(t){return new y(e=>t.schedule(()=>e.complete()))}(t):ud}function dd(t){return e=>0===t?hd():e.lift(new pd(t))}class pd{constructor(t){if(this.total=t,this.total<0)throw new ld}call(t,e){return e.subscribe(new md(t,this.total))}}class md extends m{constructor(t,e){super(t),this.total=e,this.count=0}_next(t){const e=this.total,n=++this.count;n<=e&&(this.destination.next(t),n===e&&(this.destination.complete(),this.unsubscribe()))}}class fd{constructor(t){this._items=t,this._activeItemIndex=-1,this._activeItem=null,this._wrap=!1,this._letterKeyStream=new E,this._typeaheadSubscription=h.EMPTY,this._vertical=!0,this._allowedModifierKeys=[],this._homeAndEnd=!1,this._skipPredicateFn=t=>t.disabled,this._pressedLetters=[],this.tabOut=new E,this.change=new E,t instanceof Kc&&t.changes.subscribe(t=>{if(this._activeItem){const e=t.toArray().indexOf(this._activeItem);e>-1&&e!==this._activeItemIndex&&(this._activeItemIndex=e)}})}skipPredicate(t){return this._skipPredicateFn=t,this}withWrap(t=!0){return this._wrap=t,this}withVerticalOrientation(t=!0){return this._vertical=t,this}withHorizontalOrientation(t){return this._horizontal=t,this}withAllowedModifierKeys(t){return this._allowedModifierKeys=t,this}withTypeAhead(t=200){if(this._items.length&&this._items.some(t=>"function"!=typeof t.getLabel))throw Error("ListKeyManager items in typeahead mode must implement the `getLabel` method.");return this._typeaheadSubscription.unsubscribe(),this._typeaheadSubscription=this._letterKeyStream.pipe(id(t=>this._pressedLetters.push(t)),Mh(t),od(()=>this._pressedLetters.length>0),N(()=>this._pressedLetters.join(""))).subscribe(t=>{const e=this._getItemsArray();for(let n=1;n<e.length+1;n++){const i=(this._activeItemIndex+n)%e.length,r=e[i];if(!this._skipPredicateFn(r)&&0===r.getLabel().toUpperCase().trim().indexOf(t)){this.setActiveItem(i);break}}this._pressedLetters=[]}),this}withHomeAndEnd(){return this._homeAndEnd=!0,this}setActiveItem(t){const e=this._activeItem;this.updateActiveItem(t),this._activeItem!==e&&this.change.next(this._activeItemIndex)}onKeydown(t){const e=t.keyCode,n=["altKey","ctrlKey","metaKey","shiftKey"].every(e=>!t[e]||this._allowedModifierKeys.indexOf(e)>-1);switch(e){case 9:return void this.tabOut.next();case 40:if(this._vertical&&n){this.setNextItemActive();break}return;case 38:if(this._vertical&&n){this.setPreviousItemActive();break}return;case 39:if(this._horizontal&&n){"rtl"===this._horizontal?this.setPreviousItemActive():this.setNextItemActive();break}return;case 37:if(this._horizontal&&n){"rtl"===this._horizontal?this.setNextItemActive():this.setPreviousItemActive();break}return;case 36:if(this._homeAndEnd&&n){this.setFirstItemActive();break}return;case 35:if(this._homeAndEnd&&n){this.setLastItemActive();break}return;default:return void((n||ed(t,"shiftKey"))&&(t.key&&1===t.key.length?this._letterKeyStream.next(t.key.toLocaleUpperCase()):(e>=65&&e<=90||e>=48&&e<=57)&&this._letterKeyStream.next(String.fromCharCode(e))))}this._pressedLetters=[],t.preventDefault()}get activeItemIndex(){return this._activeItemIndex}get activeItem(){return this._activeItem}isTyping(){return this._pressedLetters.length>0}setFirstItemActive(){this._setActiveItemByIndex(0,1)}setLastItemActive(){this._setActiveItemByIndex(this._items.length-1,-1)}setNextItemActive(){this._activeItemIndex<0?this.setFirstItemActive():this._setActiveItemByDelta(1)}setPreviousItemActive(){this._activeItemIndex<0&&this._wrap?this.setLastItemActive():this._setActiveItemByDelta(-1)}updateActiveItem(t){const e=this._getItemsArray(),n="number"==typeof t?t:e.indexOf(t),i=e[n];this._activeItem=null==i?null:i,this._activeItemIndex=n}_setActiveItemByDelta(t){this._wrap?this._setActiveInWrapMode(t):this._setActiveInDefaultMode(t)}_setActiveInWrapMode(t){const e=this._getItemsArray();for(let n=1;n<=e.length;n++){const i=(this._activeItemIndex+t*n+e.length)%e.length;if(!this._skipPredicateFn(e[i]))return void this.setActiveItem(i)}}_setActiveInDefaultMode(t){this._setActiveItemByIndex(this._activeItemIndex+t,t)}_setActiveItemByIndex(t,e){const n=this._getItemsArray();if(n[t]){for(;this._skipPredicateFn(n[t]);)if(!n[t+=e])return;this.setActiveItem(t)}}_getItemsArray(){return this._items instanceof Kc?this._items.toArray():this._items}}class gd extends fd{setActiveItem(t){this.activeItem&&this.activeItem.setInactiveStyles(),super.setActiveItem(t),this.activeItem&&this.activeItem.setActiveStyles()}}class _d extends fd{constructor(){super(...arguments),this._origin="program"}setFocusOrigin(t){return this._origin=t,this}setActiveItem(t){super.setActiveItem(t),this.activeItem&&this.activeItem.focus(this._origin)}}let yd=(()=>{class t{constructor(t){this._platform=t}isDisabled(t){return t.hasAttribute("disabled")}isVisible(t){return function(t){return!!(t.offsetWidth||t.offsetHeight||"function"==typeof t.getClientRects&&t.getClientRects().length)}(t)&&"visible"===getComputedStyle(t).visibility}isTabbable(t){if(!this._platform.isBrowser)return!1;const e=function(t){try{return t.frameElement}catch(uL){return null}}((n=t).ownerDocument&&n.ownerDocument.defaultView||window);var n;if(e){if(-1===bd(e))return!1;if(!this.isVisible(e))return!1}let i=t.nodeName.toLowerCase(),r=bd(t);return t.hasAttribute("contenteditable")?-1!==r:"iframe"!==i&&"object"!==i&&!(this._platform.WEBKIT&&this._platform.IOS&&!function(t){let e=t.nodeName.toLowerCase(),n="input"===e&&t.type;return"text"===n||"password"===n||"select"===e||"textarea"===e}(t))&&("audio"===i?!!t.hasAttribute("controls")&&-1!==r:"video"===i?-1!==r&&(null!==r||this._platform.FIREFOX||t.hasAttribute("controls")):t.tabIndex>=0)}isFocusable(t,e){return function(t){return!function(t){return function(t){return"input"==t.nodeName.toLowerCase()}(t)&&"hidden"==t.type}(t)&&(function(t){let e=t.nodeName.toLowerCase();return"input"===e||"select"===e||"button"===e||"textarea"===e}(t)||function(t){return function(t){return"a"==t.nodeName.toLowerCase()}(t)&&t.hasAttribute("href")}(t)||t.hasAttribute("contenteditable")||vd(t))}(t)&&!this.isDisabled(t)&&((null==e?void 0:e.ignoreVisibility)||this.isVisible(t))}}return t.\u0275fac=function(e){return new(e||t)(zt(Gh))},t.\u0275prov=lt({factory:function(){return new t(zt(Gh))},token:t,providedIn:"root"}),t})();function vd(t){if(!t.hasAttribute("tabindex")||void 0===t.tabIndex)return!1;let e=t.getAttribute("tabindex");return"-32768"!=e&&!(!e||isNaN(parseInt(e,10)))}function bd(t){if(!vd(t))return null;const e=parseInt(t.getAttribute("tabindex")||"",10);return isNaN(e)?-1:e}class wd{constructor(t,e,n,i,r=!1){this._element=t,this._checker=e,this._ngZone=n,this._document=i,this._hasAttached=!1,this.startAnchorListener=()=>this.focusLastTabbableElement(),this.endAnchorListener=()=>this.focusFirstTabbableElement(),this._enabled=!0,r||this.attachAnchors()}get enabled(){return this._enabled}set enabled(t){this._enabled=t,this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(t,this._startAnchor),this._toggleAnchorTabIndex(t,this._endAnchor))}destroy(){const t=this._startAnchor,e=this._endAnchor;t&&(t.removeEventListener("focus",this.startAnchorListener),t.parentNode&&t.parentNode.removeChild(t)),e&&(e.removeEventListener("focus",this.endAnchorListener),e.parentNode&&e.parentNode.removeChild(e)),this._startAnchor=this._endAnchor=null,this._hasAttached=!1}attachAnchors(){return!!this._hasAttached||(this._ngZone.runOutsideAngular(()=>{this._startAnchor||(this._startAnchor=this._createAnchor(),this._startAnchor.addEventListener("focus",this.startAnchorListener)),this._endAnchor||(this._endAnchor=this._createAnchor(),this._endAnchor.addEventListener("focus",this.endAnchorListener))}),this._element.parentNode&&(this._element.parentNode.insertBefore(this._startAnchor,this._element),this._element.parentNode.insertBefore(this._endAnchor,this._element.nextSibling),this._hasAttached=!0),this._hasAttached)}focusInitialElementWhenReady(){return new Promise(t=>{this._executeOnStable(()=>t(this.focusInitialElement()))})}focusFirstTabbableElementWhenReady(){return new Promise(t=>{this._executeOnStable(()=>t(this.focusFirstTabbableElement()))})}focusLastTabbableElementWhenReady(){return new Promise(t=>{this._executeOnStable(()=>t(this.focusLastTabbableElement()))})}_getRegionBoundary(t){let e=this._element.querySelectorAll(`[cdk-focus-region-${t}], [cdkFocusRegion${t}], [cdk-focus-${t}]`);for(let n=0;n<e.length;n++)e[n].hasAttribute("cdk-focus-"+t)?console.warn(`Found use of deprecated attribute 'cdk-focus-${t}', use 'cdkFocusRegion${t}' instead. The deprecated attribute will be removed in 8.0.0.`,e[n]):e[n].hasAttribute("cdk-focus-region-"+t)&&console.warn(`Found use of deprecated attribute 'cdk-focus-region-${t}', use 'cdkFocusRegion${t}' instead. The deprecated attribute will be removed in 8.0.0.`,e[n]);return"start"==t?e.length?e[0]:this._getFirstTabbableElement(this._element):e.length?e[e.length-1]:this._getLastTabbableElement(this._element)}focusInitialElement(){const t=this._element.querySelector("[cdk-focus-initial], [cdkFocusInitial]");return t?(t.hasAttribute("cdk-focus-initial")&&console.warn("Found use of deprecated attribute 'cdk-focus-initial', use 'cdkFocusInitial' instead. The deprecated attribute will be removed in 8.0.0",t),Ai()&&!this._checker.isFocusable(t)&&console.warn("Element matching '[cdkFocusInitial]' is not focusable.",t),t.focus(),!0):this.focusFirstTabbableElement()}focusFirstTabbableElement(){const t=this._getRegionBoundary("start");return t&&t.focus(),!!t}focusLastTabbableElement(){const t=this._getRegionBoundary("end");return t&&t.focus(),!!t}hasAttached(){return this._hasAttached}_getFirstTabbableElement(t){if(this._checker.isFocusable(t)&&this._checker.isTabbable(t))return t;let e=t.children||t.childNodes;for(let n=0;n<e.length;n++){let t=e[n].nodeType===this._document.ELEMENT_NODE?this._getFirstTabbableElement(e[n]):null;if(t)return t}return null}_getLastTabbableElement(t){if(this._checker.isFocusable(t)&&this._checker.isTabbable(t))return t;let e=t.children||t.childNodes;for(let n=e.length-1;n>=0;n--){let t=e[n].nodeType===this._document.ELEMENT_NODE?this._getLastTabbableElement(e[n]):null;if(t)return t}return null}_createAnchor(){const t=this._document.createElement("div");return this._toggleAnchorTabIndex(this._enabled,t),t.classList.add("cdk-visually-hidden"),t.classList.add("cdk-focus-trap-anchor"),t.setAttribute("aria-hidden","true"),t}_toggleAnchorTabIndex(t,e){t?e.setAttribute("tabindex","0"):e.removeAttribute("tabindex")}toggleAnchors(t){this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(t,this._startAnchor),this._toggleAnchorTabIndex(t,this._endAnchor))}_executeOnStable(t){this._ngZone.isStable?t():this._ngZone.onStable.asObservable().pipe(dd(1)).subscribe(t)}}let Sd=(()=>{class t{constructor(t,e,n){this._checker=t,this._ngZone=e,this._document=n}create(t,e=!1){return new wd(t,this._checker,this._ngZone,this._document,e)}}return t.\u0275fac=function(e){return new(e||t)(zt(yd),zt(Rl),zt(ou))},t.\u0275prov=lt({factory:function(){return new t(zt(yd),zt(Rl),zt(ou))},token:t,providedIn:"root"}),t})();"undefined"!=typeof Element&&Element;const Ed=new Ft("liveAnnouncerElement",{providedIn:"root",factory:function(){return null}}),kd=new Ft("LIVE_ANNOUNCER_DEFAULT_OPTIONS");let Cd=(()=>{class t{constructor(t,e,n,i){this._ngZone=e,this._defaultOptions=i,this._document=n,this._liveElement=t||this._createLiveElement()}announce(t,...e){const n=this._defaultOptions;let i,r;return 1===e.length&&"number"==typeof e[0]?r=e[0]:[i,r]=e,this.clear(),clearTimeout(this._previousTimeout),i||(i=n&&n.politeness?n.politeness:"polite"),null==r&&n&&(r=n.duration),this._liveElement.setAttribute("aria-live",i),this._ngZone.runOutsideAngular(()=>new Promise(e=>{clearTimeout(this._previousTimeout),this._previousTimeout=setTimeout(()=>{this._liveElement.textContent=t,e(),"number"==typeof r&&(this._previousTimeout=setTimeout(()=>this.clear(),r))},100)}))}clear(){this._liveElement&&(this._liveElement.textContent="")}ngOnDestroy(){clearTimeout(this._previousTimeout),this._liveElement&&this._liveElement.parentNode&&(this._liveElement.parentNode.removeChild(this._liveElement),this._liveElement=null)}_createLiveElement(){const t=this._document.getElementsByClassName("cdk-live-announcer-element"),e=this._document.createElement("div");for(let n=0;n<t.length;n++)t[n].parentNode.removeChild(t[n]);return e.classList.add("cdk-live-announcer-element"),e.classList.add("cdk-visually-hidden"),e.setAttribute("aria-atomic","true"),e.setAttribute("aria-live","polite"),this._document.body.appendChild(e),e}}return t.\u0275fac=function(e){return new(e||t)(zt(Ed,8),zt(Rl),zt(ou),zt(kd,8))},t.\u0275prov=lt({factory:function(){return new t(zt(Ed,8),zt(Rl),zt(ou),zt(kd,8))},token:t,providedIn:"root"}),t})();function xd(t){return 0===t.buttons}const Td=new Ft("cdk-focus-monitor-default-options"),Id=Qh({passive:!0,capture:!0});let Rd=(()=>{class t{constructor(t,e,n,i){this._ngZone=t,this._platform=e,this._origin=null,this._windowFocused=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._documentKeydownListener=()=>{this._lastTouchTarget=null,this._setOriginForCurrentEventQueue("keyboard")},this._documentMousedownListener=t=>{if(!this._lastTouchTarget){const e=xd(t)?"keyboard":"mouse";this._setOriginForCurrentEventQueue(e)}},this._documentTouchstartListener=t=>{null!=this._touchTimeoutId&&clearTimeout(this._touchTimeoutId),this._lastTouchTarget=Od(t),this._touchTimeoutId=setTimeout(()=>this._lastTouchTarget=null,650)},this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=setTimeout(()=>this._windowFocused=!1)},this._rootNodeFocusAndBlurListener=t=>{const e=Od(t),n="focus"===t.type?this._onFocus:this._onBlur;for(let i=e;i;i=i.parentElement)n.call(this,t,i)},this._document=n,this._detectionMode=(null==i?void 0:i.detectionMode)||0}monitor(t,e=!1){if(!this._platform.isBrowser)return td(null);const n=Ih(t),i=Jh(n)||this._getDocument(),r=this._elementInfo.get(n);if(r)return e&&(r.checkChildren=!0),r.subject.asObservable();const s={checkChildren:e,subject:new E,rootNode:i};return this._elementInfo.set(n,s),this._registerGlobalListeners(s),s.subject.asObservable()}stopMonitoring(t){const e=Ih(t),n=this._elementInfo.get(e);n&&(n.subject.complete(),this._setClasses(e),this._elementInfo.delete(e),this._removeGlobalListeners(n))}focusVia(t,e,n){const i=Ih(t);this._setOriginForCurrentEventQueue(e),"function"==typeof i.focus&&i.focus(n)}ngOnDestroy(){this._elementInfo.forEach((t,e)=>this.stopMonitoring(e))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_toggleClass(t,e,n){n?t.classList.add(e):t.classList.remove(e)}_getFocusOrigin(t){return this._origin?this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:this._wasCausedByTouch(t)?"touch":"program"}_setClasses(t,e){this._toggleClass(t,"cdk-focused",!!e),this._toggleClass(t,"cdk-touch-focused","touch"===e),this._toggleClass(t,"cdk-keyboard-focused","keyboard"===e),this._toggleClass(t,"cdk-mouse-focused","mouse"===e),this._toggleClass(t,"cdk-program-focused","program"===e)}_setOriginForCurrentEventQueue(t){this._ngZone.runOutsideAngular(()=>{this._origin=t,0===this._detectionMode&&(this._originTimeoutId=setTimeout(()=>this._origin=null,1))})}_wasCausedByTouch(t){const e=Od(t);return this._lastTouchTarget instanceof Node&&e instanceof Node&&(e===this._lastTouchTarget||e.contains(this._lastTouchTarget))}_onFocus(t,e){const n=this._elementInfo.get(e);if(!n||!n.checkChildren&&e!==Od(t))return;const i=this._getFocusOrigin(t);this._setClasses(e,i),this._emitOrigin(n.subject,i),this._lastFocusOrigin=i}_onBlur(t,e){const n=this._elementInfo.get(e);!n||n.checkChildren&&t.relatedTarget instanceof Node&&e.contains(t.relatedTarget)||(this._setClasses(e),this._emitOrigin(n.subject,null))}_emitOrigin(t,e){this._ngZone.run(()=>t.next(e))}_registerGlobalListeners(t){if(!this._platform.isBrowser)return;const e=t.rootNode,n=this._rootNodeFocusListenerCount.get(e)||0;n||this._ngZone.runOutsideAngular(()=>{e.addEventListener("focus",this._rootNodeFocusAndBlurListener,Id),e.addEventListener("blur",this._rootNodeFocusAndBlurListener,Id)}),this._rootNodeFocusListenerCount.set(e,n+1),1==++this._monitoredElementCount&&this._ngZone.runOutsideAngular(()=>{const t=this._getDocument(),e=this._getWindow();t.addEventListener("keydown",this._documentKeydownListener,Id),t.addEventListener("mousedown",this._documentMousedownListener,Id),t.addEventListener("touchstart",this._documentTouchstartListener,Id),e.addEventListener("focus",this._windowFocusListener)})}_removeGlobalListeners(t){const e=t.rootNode;if(this._rootNodeFocusListenerCount.has(e)){const t=this._rootNodeFocusListenerCount.get(e);t>1?this._rootNodeFocusListenerCount.set(e,t-1):(e.removeEventListener("focus",this._rootNodeFocusAndBlurListener,Id),e.removeEventListener("blur",this._rootNodeFocusAndBlurListener,Id),this._rootNodeFocusListenerCount.delete(e))}if(!--this._monitoredElementCount){const t=this._getDocument(),e=this._getWindow();t.removeEventListener("keydown",this._documentKeydownListener,Id),t.removeEventListener("mousedown",this._documentMousedownListener,Id),t.removeEventListener("touchstart",this._documentTouchstartListener,Id),e.removeEventListener("focus",this._windowFocusListener),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._touchTimeoutId),clearTimeout(this._originTimeoutId)}}}return t.\u0275fac=function(e){return new(e||t)(zt(Rl),zt(Gh),zt(ou,8),zt(Td,8))},t.\u0275prov=lt({factory:function(){return new t(zt(Rl),zt(Gh),zt(ou,8),zt(Td,8))},token:t,providedIn:"root"}),t})();function Od(t){return t.composedPath?t.composedPath()[0]:t.target}let Ad=(()=>{class t{constructor(t,e){this._elementRef=t,this._focusMonitor=e,this.cdkFocusChange=new jc}ngAfterViewInit(){this._monitorSubscription=this._focusMonitor.monitor(this._elementRef,this._elementRef.nativeElement.hasAttribute("cdkMonitorSubtreeFocus")).subscribe(t=>this.cdkFocusChange.emit(t))}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef),this._monitorSubscription&&this._monitorSubscription.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(Ao(Ga),Ao(Rd))},t.\u0275dir=ye({type:t,selectors:[["","cdkMonitorElementFocus",""],["","cdkMonitorSubtreeFocus",""]],outputs:{cdkFocusChange:"cdkFocusChange"}}),t})(),Dd=(()=>{class t{constructor(t,e){this._platform=t,this._document=e}getHighContrastMode(){if(!this._platform.isBrowser)return 0;const t=this._document.createElement("div");t.style.backgroundColor="rgb(1,2,3)",t.style.position="absolute",this._document.body.appendChild(t);const e=this._document.defaultView||window,n=e&&e.getComputedStyle?e.getComputedStyle(t):null,i=(n&&n.backgroundColor||"").replace(/ /g,"");switch(this._document.body.removeChild(t),i){case"rgb(0,0,0)":return 2;case"rgb(255,255,255)":return 1}return 0}_applyBodyHighContrastModeCssClasses(){if(this._platform.isBrowser&&this._document.body){const t=this._document.body.classList;t.remove("cdk-high-contrast-active"),t.remove("cdk-high-contrast-black-on-white"),t.remove("cdk-high-contrast-white-on-black");const e=this.getHighContrastMode();1===e?(t.add("cdk-high-contrast-active"),t.add("cdk-high-contrast-black-on-white")):2===e&&(t.add("cdk-high-contrast-active"),t.add("cdk-high-contrast-white-on-black"))}}}return t.\u0275fac=function(e){return new(e||t)(zt(Gh),zt(ou))},t.\u0275prov=lt({factory:function(){return new t(zt(Gh),zt(ou))},token:t,providedIn:"root"}),t})(),Pd=(()=>{class t{constructor(t){t._applyBodyHighContrastModeCssClasses()}}return t.\u0275mod=ge({type:t}),t.\u0275inj=ut({factory:function(e){return new(e||t)(zt(Dd))},imports:[[$h,Kh]]}),t})();const Md=new Ft("cdk-dir-doc",{providedIn:"root",factory:function(){return Wt(ou)}});let Nd=(()=>{class t{constructor(t){if(this.value="ltr",this.change=new jc,t){const e=t.documentElement?t.documentElement.dir:null,n=(t.body?t.body.dir:null)||e;this.value="ltr"===n||"rtl"===n?n:"ltr"}}ngOnDestroy(){this.change.complete()}}return t.\u0275fac=function(e){return new(e||t)(zt(Md,8))},t.\u0275prov=lt({factory:function(){return new t(zt(Md,8))},token:t,providedIn:"root"}),t})(),Ld=(()=>{class t{}return t.\u0275mod=ge({type:t}),t.\u0275inj=ut({factory:function(e){return new(e||t)}}),t})();const Fd=new Qa("10.1.1");function Ud(){return q(1)}function Bd(...t){return Ud()(td(...t))}function jd(...t){const e=t[t.length-1];return C(e)?(t.pop(),n=>Bd(t,n,e)):e=>Bd(t,e)}class Vd{}function Kd(t,e){return{type:7,name:t,definitions:e,options:{}}}function qd(t,e=null){return{type:4,styles:e,timings:t}}function Gd(t,e=null){return{type:2,steps:t,options:e}}function $d(t){return{type:6,styles:t,offset:null}}function Hd(t,e,n){return{type:0,name:t,styles:e,options:n}}function zd(t,e,n=null){return{type:1,expr:t,animation:e,options:n}}function Wd(t=null){return{type:9,options:t}}function Yd(t,e,n=null){return{type:11,selector:t,animation:e,options:n}}function Xd(t){Promise.resolve(null).then(t)}class Qd{constructor(t=0,e=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this.parentPlayer=null,this.totalTime=t+e}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}onStart(t){this._onStartFns.push(t)}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){Xd(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(t=>t()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}reset(){}setPosition(t){}getPosition(){return 0}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(t=>t()),e.length=0}}class Zd{constructor(t){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=t;let e=0,n=0,i=0;const r=this.players.length;0==r?Xd(()=>this._onFinish()):this.players.forEach(t=>{t.onDone(()=>{++e==r&&this._onFinish()}),t.onDestroy(()=>{++n==r&&this._onDestroy()}),t.onStart(()=>{++i==r&&this._onStart()})}),this.totalTime=this.players.reduce((t,e)=>Math.max(t,e.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}init(){this.players.forEach(t=>t.init())}onStart(t){this._onStartFns.push(t)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(t=>t()),this._onStartFns=[])}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(t=>t.play())}pause(){this.players.forEach(t=>t.pause())}restart(){this.players.forEach(t=>t.restart())}finish(){this._onFinish(),this.players.forEach(t=>t.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(t=>t.destroy()),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}reset(){this.players.forEach(t=>t.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(t){const e=t*this.totalTime;this.players.forEach(t=>{const n=t.totalTime?Math.min(1,e/t.totalTime):1;t.setPosition(n)})}getPosition(){let t=0;return this.players.forEach(e=>{const n=e.getPosition();t=Math.min(n,t)}),t}beforeDestroy(){this.players.forEach(t=>{t.beforeDestroy&&t.beforeDestroy()})}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(t=>t()),e.length=0}}function Jd(){return"undefined"!=typeof process&&"[object process]"==={}.toString.call(process)}function tp(t){switch(t.length){case 0:return new Qd;case 1:return t[0];default:return new Zd(t)}}function ep(t,e,n,i,r={},s={}){const o=[],a=[];let c=-1,l=null;if(i.forEach(t=>{const n=t.offset,i=n==c,u=i&&l||{};Object.keys(t).forEach(n=>{let i=n,a=t[n];if("offset"!==n)switch(i=e.normalizePropertyName(i,o),a){case"!":a=r[n];break;case"*":a=s[n];break;default:a=e.normalizeStyleValue(n,i,a,o)}u[i]=a}),i||a.push(u),l=u,c=n}),o.length){const t="\n - ";throw new Error(`Unable to animate due to the following errors:${t}${o.join(t)}`)}return a}function np(t,e,n,i){switch(e){case"start":t.onStart(()=>i(n&&ip(n,"start",t)));break;case"done":t.onDone(()=>i(n&&ip(n,"done",t)));break;case"destroy":t.onDestroy(()=>i(n&&ip(n,"destroy",t)))}}function ip(t,e,n){const i=n.totalTime,r=rp(t.element,t.triggerName,t.fromState,t.toState,e||t.phaseName,null==i?t.totalTime:i,!!n.disabled),s=t._data;return null!=s&&(r._data=s),r}function rp(t,e,n,i,r="",s=0,o){return{element:t,triggerName:e,fromState:n,toState:i,phaseName:r,totalTime:s,disabled:!!o}}function sp(t,e,n){let i;return t instanceof Map?(i=t.get(e),i||t.set(e,i=n)):(i=t[e],i||(i=t[e]=n)),i}function op(t){const e=t.indexOf(":");return[t.substring(1,e),t.substr(e+1)]}let ap=(t,e)=>!1,cp=(t,e)=>!1,lp=(t,e,n)=>[];const up=Jd();(up||"undefined"!=typeof Element)&&(ap=(t,e)=>t.contains(e),cp=(()=>{if(up||Element.prototype.matches)return(t,e)=>t.matches(e);{const t=Element.prototype,e=t.matchesSelector||t.mozMatchesSelector||t.msMatchesSelector||t.oMatchesSelector||t.webkitMatchesSelector;return e?(t,n)=>e.apply(t,[n]):cp}})(),lp=(t,e,n)=>{let i=[];if(n)i.push(...t.querySelectorAll(e));else{const n=t.querySelector(e);n&&i.push(n)}return i});let hp=null,dp=!1;function pp(t){hp||(hp=("undefined"!=typeof document?document.body:null)||{},dp=!!hp.style&&"WebkitAppearance"in hp.style);let e=!0;return hp.style&&!function(t){return"ebkit"==t.substring(1,6)}(t)&&(e=t in hp.style,!e&&dp)&&(e="Webkit"+t.charAt(0).toUpperCase()+t.substr(1)in hp.style),e}const mp=cp,fp=ap,gp=lp;function _p(t){const e={};return Object.keys(t).forEach(n=>{const i=n.replace(/([a-z])([A-Z])/g,"$1-$2");e[i]=t[n]}),e}let yp=(()=>{class t{validateStyleProperty(t){return pp(t)}matchesElement(t,e){return mp(t,e)}containsElement(t,e){return fp(t,e)}query(t,e,n){return gp(t,e,n)}computeStyle(t,e,n){return n||""}animate(t,e,n,i,r,s=[],o){return new Qd(n,i)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=lt({token:t,factory:t.\u0275fac}),t})(),vp=(()=>{class t{}return t.NOOP=new yp,t})();function bp(t){if("number"==typeof t)return t;const e=t.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:wp(parseFloat(e[1]),e[2])}function wp(t,e){switch(e){case"s":return 1e3*t;default:return t}}function Sp(t,e,n){return t.hasOwnProperty("duration")?t:function(t,e,n){let i,r=0,s="";if("string"==typeof t){const n=t.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===n)return e.push(`The provided timing value "${t}" is invalid.`),{duration:0,delay:0,easing:""};i=wp(parseFloat(n[1]),n[2]);const o=n[3];null!=o&&(r=wp(parseFloat(o),n[4]));const a=n[5];a&&(s=a)}else i=t;if(!n){let n=!1,s=e.length;i<0&&(e.push("Duration values below 0 are not allowed for this animation step."),n=!0),r<0&&(e.push("Delay values below 0 are not allowed for this animation step."),n=!0),n&&e.splice(s,0,`The provided timing value "${t}" is invalid.`)}return{duration:i,delay:r,easing:s}}(t,e,n)}function Ep(t,e={}){return Object.keys(t).forEach(n=>{e[n]=t[n]}),e}function kp(t,e,n={}){if(e)for(let i in t)n[i]=t[i];else Ep(t,n);return n}function Cp(t,e,n){return n?e+":"+n+";":""}function xp(t){let e="";for(let n=0;n<t.style.length;n++){const i=t.style.item(n);e+=Cp(0,i,t.style.getPropertyValue(i))}for(const n in t.style)t.style.hasOwnProperty(n)&&!n.startsWith("_")&&(e+=Cp(0,n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),t.style[n]));t.setAttribute("style",e)}function Tp(t,e,n){t.style&&(Object.keys(e).forEach(i=>{const r=Np(i);n&&!n.hasOwnProperty(i)&&(n[i]=t.style[r]),t.style[r]=e[i]}),Jd()&&xp(t))}function Ip(t,e){t.style&&(Object.keys(e).forEach(e=>{const n=Np(e);t.style[n]=""}),Jd()&&xp(t))}function Rp(t){return Array.isArray(t)?1==t.length?t[0]:Gd(t):t}const Op=new RegExp("{{\\s*(.+?)\\s*}}","g");function Ap(t){let e=[];if("string"==typeof t){let n;for(;n=Op.exec(t);)e.push(n[1]);Op.lastIndex=0}return e}function Dp(t,e,n){const i=t.toString(),r=i.replace(Op,(t,i)=>{let r=e[i];return e.hasOwnProperty(i)||(n.push("Please provide a value for the animation param "+i),r=""),r.toString()});return r==i?t:r}function Pp(t){const e=[];let n=t.next();for(;!n.done;)e.push(n.value),n=t.next();return e}const Mp=/-+([a-z0-9])/g;function Np(t){return t.replace(Mp,(...t)=>t[1].toUpperCase())}function Lp(t,e){return 0===t||0===e}function Fp(t,e,n){const i=Object.keys(n);if(i.length&&e.length){let s=e[0],o=[];if(i.forEach(t=>{s.hasOwnProperty(t)||o.push(t),s[t]=n[t]}),o.length)for(var r=1;r<e.length;r++){let n=e[r];o.forEach((function(e){n[e]=Bp(t,e)}))}}return e}function Up(t,e,n){switch(e.type){case 7:return t.visitTrigger(e,n);case 0:return t.visitState(e,n);case 1:return t.visitTransition(e,n);case 2:return t.visitSequence(e,n);case 3:return t.visitGroup(e,n);case 4:return t.visitAnimate(e,n);case 5:return t.visitKeyframes(e,n);case 6:return t.visitStyle(e,n);case 8:return t.visitReference(e,n);case 9:return t.visitAnimateChild(e,n);case 10:return t.visitAnimateRef(e,n);case 11:return t.visitQuery(e,n);case 12:return t.visitStagger(e,n);default:throw new Error("Unable to resolve animation metadata node #"+e.type)}}function Bp(t,e){return window.getComputedStyle(t)[e]}function jp(t,e){const n=[];return"string"==typeof t?t.split(/\s*,\s*/).forEach(t=>function(t,e,n){if(":"==t[0]){const i=function(t,e){switch(t){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,e)=>parseFloat(e)>parseFloat(t);case":decrement":return(t,e)=>parseFloat(e)<parseFloat(t);default:return e.push(`The transition alias value "${t}" is not supported`),"* => *"}}(t,n);if("function"==typeof i)return void e.push(i);t=i}const i=t.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==i||i.length<4)return n.push(`The provided transition expression "${t}" is not supported`),e;const r=i[1],s=i[2],o=i[3];e.push(qp(r,o)),"<"!=s[0]||"*"==r&&"*"==o||e.push(qp(o,r))}(t,n,e)):n.push(t),n}const Vp=new Set(["true","1"]),Kp=new Set(["false","0"]);function qp(t,e){const n=Vp.has(t)||Kp.has(t),i=Vp.has(e)||Kp.has(e);return(r,s)=>{let o="*"==t||t==r,a="*"==e||e==s;return!o&&n&&"boolean"==typeof r&&(o=r?Vp.has(t):Kp.has(t)),!a&&i&&"boolean"==typeof s&&(a=s?Vp.has(e):Kp.has(e)),o&&a}}const Gp=new RegExp("s*:selfs*,?","g");function $p(t,e,n){return new Hp(t).build(e,n)}class Hp{constructor(t){this._driver=t}build(t,e){const n=new zp(e);return this._resetContextStyleTimingState(n),Up(this,Rp(t),n)}_resetContextStyleTimingState(t){t.currentQuerySelector="",t.collectedStyles={},t.collectedStyles[""]={},t.currentTime=0}visitTrigger(t,e){let n=e.queryCount=0,i=e.depCount=0;const r=[],s=[];return"@"==t.name.charAt(0)&&e.errors.push("animation triggers cannot be prefixed with an `@` sign (e.g. trigger('@foo', [...]))"),t.definitions.forEach(t=>{if(this._resetContextStyleTimingState(e),0==t.type){const n=t,i=n.name;i.toString().split(/\s*,\s*/).forEach(t=>{n.name=t,r.push(this.visitState(n,e))}),n.name=i}else if(1==t.type){const r=this.visitTransition(t,e);n+=r.queryCount,i+=r.depCount,s.push(r)}else e.errors.push("only state() and transition() definitions can sit inside of a trigger()")}),{type:7,name:t.name,states:r,transitions:s,queryCount:n,depCount:i,options:null}}visitState(t,e){const n=this.visitStyle(t.styles,e),i=t.options&&t.options.params||null;if(n.containsDynamicStyles){const r=new Set,s=i||{};if(n.styles.forEach(t=>{if(Wp(t)){const e=t;Object.keys(e).forEach(t=>{Ap(e[t]).forEach(t=>{s.hasOwnProperty(t)||r.add(t)})})}}),r.size){const n=Pp(r.values());e.errors.push(`state("${t.name}", ...) must define default values for all the following style substitutions: ${n.join(", ")}`)}}return{type:0,name:t.name,style:n,options:i?{params:i}:null}}visitTransition(t,e){e.queryCount=0,e.depCount=0;const n=Up(this,Rp(t.animation),e);return{type:1,matchers:jp(t.expr,e.errors),animation:n,queryCount:e.queryCount,depCount:e.depCount,options:Yp(t.options)}}visitSequence(t,e){return{type:2,steps:t.steps.map(t=>Up(this,t,e)),options:Yp(t.options)}}visitGroup(t,e){const n=e.currentTime;let i=0;const r=t.steps.map(t=>{e.currentTime=n;const r=Up(this,t,e);return i=Math.max(i,e.currentTime),r});return e.currentTime=i,{type:3,steps:r,options:Yp(t.options)}}visitAnimate(t,e){const n=function(t,e){let n=null;if(t.hasOwnProperty("duration"))n=t;else if("number"==typeof t)return Xp(Sp(t,e).duration,0,"");const i=t;if(i.split(/\s+/).some(t=>"{"==t.charAt(0)&&"{"==t.charAt(1))){const t=Xp(0,0,"");return t.dynamic=!0,t.strValue=i,t}return n=n||Sp(i,e),Xp(n.duration,n.delay,n.easing)}(t.timings,e.errors);let i;e.currentAnimateTimings=n;let r=t.styles?t.styles:$d({});if(5==r.type)i=this.visitKeyframes(r,e);else{let r=t.styles,s=!1;if(!r){s=!0;const t={};n.easing&&(t.easing=n.easing),r=$d(t)}e.currentTime+=n.duration+n.delay;const o=this.visitStyle(r,e);o.isEmptyStep=s,i=o}return e.currentAnimateTimings=null,{type:4,timings:n,style:i,options:null}}visitStyle(t,e){const n=this._makeStyleAst(t,e);return this._validateStyleAst(n,e),n}_makeStyleAst(t,e){const n=[];Array.isArray(t.styles)?t.styles.forEach(t=>{"string"==typeof t?"*"==t?n.push(t):e.errors.push(`The provided style string value ${t} is not allowed.`):n.push(t)}):n.push(t.styles);let i=!1,r=null;return n.forEach(t=>{if(Wp(t)){const e=t,n=e.easing;if(n&&(r=n,delete e.easing),!i)for(let t in e)if(e[t].toString().indexOf("{{")>=0){i=!0;break}}}),{type:6,styles:n,easing:r,offset:t.offset,containsDynamicStyles:i,options:null}}_validateStyleAst(t,e){const n=e.currentAnimateTimings;let i=e.currentTime,r=e.currentTime;n&&r>0&&(r-=n.duration+n.delay),t.styles.forEach(t=>{"string"!=typeof t&&Object.keys(t).forEach(n=>{if(!this._driver.validateStyleProperty(n))return void e.errors.push(`The provided animation property "${n}" is not a supported CSS property for animations`);const s=e.collectedStyles[e.currentQuerySelector],o=s[n];let a=!0;o&&(r!=i&&r>=o.startTime&&i<=o.endTime&&(e.errors.push(`The CSS property "${n}" that exists between the times of "${o.startTime}ms" and "${o.endTime}ms" is also being animated in a parallel animation between the times of "${r}ms" and "${i}ms"`),a=!1),r=o.startTime),a&&(s[n]={startTime:r,endTime:i}),e.options&&function(t,e,n){const i=e.params||{},r=Ap(t);r.length&&r.forEach(t=>{i.hasOwnProperty(t)||n.push(`Unable to resolve the local animation param ${t} in the given list of values`)})}(t[n],e.options,e.errors)})})}visitKeyframes(t,e){const n={type:5,styles:[],options:null};if(!e.currentAnimateTimings)return e.errors.push("keyframes() must be placed inside of a call to animate()"),n;let i=0;const r=[];let s=!1,o=!1,a=0;const c=t.steps.map(t=>{const n=this._makeStyleAst(t,e);let c=null!=n.offset?n.offset:function(t){if("string"==typeof t)return null;let e=null;if(Array.isArray(t))t.forEach(t=>{if(Wp(t)&&t.hasOwnProperty("offset")){const n=t;e=parseFloat(n.offset),delete n.offset}});else if(Wp(t)&&t.hasOwnProperty("offset")){const n=t;e=parseFloat(n.offset),delete n.offset}return e}(n.styles),l=0;return null!=c&&(i++,l=n.offset=c),o=o||l<0||l>1,s=s||l<a,a=l,r.push(l),n});o&&e.errors.push("Please ensure that all keyframe offsets are between 0 and 1"),s&&e.errors.push("Please ensure that all keyframe offsets are in order");const l=t.steps.length;let u=0;i>0&&i<l?e.errors.push("Not all style() steps within the declared keyframes() contain offsets"):0==i&&(u=1/(l-1));const h=l-1,d=e.currentTime,p=e.currentAnimateTimings,m=p.duration;return c.forEach((t,i)=>{const s=u>0?i==h?1:u*i:r[i],o=s*m;e.currentTime=d+p.delay+o,p.duration=o,this._validateStyleAst(t,e),t.offset=s,n.styles.push(t)}),n}visitReference(t,e){return{type:8,animation:Up(this,Rp(t.animation),e),options:Yp(t.options)}}visitAnimateChild(t,e){return e.depCount++,{type:9,options:Yp(t.options)}}visitAnimateRef(t,e){return{type:10,animation:this.visitReference(t.animation,e),options:Yp(t.options)}}visitQuery(t,e){const n=e.currentQuerySelector,i=t.options||{};e.queryCount++,e.currentQuery=t;const[r,s]=function(t){const e=!!t.split(/\s*,\s*/).find(t=>":self"==t);return e&&(t=t.replace(Gp,"")),[t=t.replace(/@\*/g,".ng-trigger").replace(/@\w+/g,t=>".ng-trigger-"+t.substr(1)).replace(/:animating/g,".ng-animating"),e]}(t.selector);e.currentQuerySelector=n.length?n+" "+r:r,sp(e.collectedStyles,e.currentQuerySelector,{});const o=Up(this,Rp(t.animation),e);return e.currentQuery=null,e.currentQuerySelector=n,{type:11,selector:r,limit:i.limit||0,optional:!!i.optional,includeSelf:s,animation:o,originalSelector:t.selector,options:Yp(t.options)}}visitStagger(t,e){e.currentQuery||e.errors.push("stagger() can only be used inside of query()");const n="full"===t.timings?{duration:0,delay:0,easing:"full"}:Sp(t.timings,e.errors,!0);return{type:12,animation:Up(this,Rp(t.animation),e),timings:n,options:null}}}class zp{constructor(t){this.errors=t,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles={},this.options=null}}function Wp(t){return!Array.isArray(t)&&"object"==typeof t}function Yp(t){var e;return t?(t=Ep(t)).params&&(t.params=(e=t.params)?Ep(e):null):t={},t}function Xp(t,e,n){return{duration:t,delay:e,easing:n}}function Qp(t,e,n,i,r,s,o=null,a=!1){return{type:1,element:t,keyframes:e,preStyleProps:n,postStyleProps:i,duration:r,delay:s,totalTime:r+s,easing:o,subTimeline:a}}class Zp{constructor(){this._map=new Map}consume(t){let e=this._map.get(t);return e?this._map.delete(t):e=[],e}append(t,e){let n=this._map.get(t);n||this._map.set(t,n=[]),n.push(...e)}has(t){return this._map.has(t)}clear(){this._map.clear()}}const Jp=new RegExp(":enter","g"),tm=new RegExp(":leave","g");function em(t,e,n,i,r,s={},o={},a,c,l=[]){return(new nm).buildKeyframes(t,e,n,i,r,s,o,a,c,l)}class nm{buildKeyframes(t,e,n,i,r,s,o,a,c,l=[]){c=c||new Zp;const u=new rm(t,e,c,i,r,l,[]);u.options=a,u.currentTimeline.setStyles([s],null,u.errors,a),Up(this,n,u);const h=u.timelines.filter(t=>t.containsAnimation());if(h.length&&Object.keys(o).length){const t=h[h.length-1];t.allowOnlyTimelineStyles()||t.setStyles([o],null,u.errors,a)}return h.length?h.map(t=>t.buildKeyframes()):[Qp(e,[],[],[],0,0,"",!1)]}visitTrigger(t,e){}visitState(t,e){}visitTransition(t,e){}visitAnimateChild(t,e){const n=e.subInstructions.consume(e.element);if(n){const i=e.createSubContext(t.options),r=e.currentTimeline.currentTime,s=this._visitSubInstructions(n,i,i.options);r!=s&&e.transformIntoNewTimeline(s)}e.previousNode=t}visitAnimateRef(t,e){const n=e.createSubContext(t.options);n.transformIntoNewTimeline(),this.visitReference(t.animation,n),e.transformIntoNewTimeline(n.currentTimeline.currentTime),e.previousNode=t}_visitSubInstructions(t,e,n){let i=e.currentTimeline.currentTime;const r=null!=n.duration?bp(n.duration):null,s=null!=n.delay?bp(n.delay):null;return 0!==r&&t.forEach(t=>{const n=e.appendInstructionToTimeline(t,r,s);i=Math.max(i,n.duration+n.delay)}),i}visitReference(t,e){e.updateOptions(t.options,!0),Up(this,t.animation,e),e.previousNode=t}visitSequence(t,e){const n=e.subContextCount;let i=e;const r=t.options;if(r&&(r.params||r.delay)&&(i=e.createSubContext(r),i.transformIntoNewTimeline(),null!=r.delay)){6==i.previousNode.type&&(i.currentTimeline.snapshotCurrentStyles(),i.previousNode=im);const t=bp(r.delay);i.delayNextStep(t)}t.steps.length&&(t.steps.forEach(t=>Up(this,t,i)),i.currentTimeline.applyStylesToKeyframe(),i.subContextCount>n&&i.transformIntoNewTimeline()),e.previousNode=t}visitGroup(t,e){const n=[];let i=e.currentTimeline.currentTime;const r=t.options&&t.options.delay?bp(t.options.delay):0;t.steps.forEach(s=>{const o=e.createSubContext(t.options);r&&o.delayNextStep(r),Up(this,s,o),i=Math.max(i,o.currentTimeline.currentTime),n.push(o.currentTimeline)}),n.forEach(t=>e.currentTimeline.mergeTimelineCollectedStyles(t)),e.transformIntoNewTimeline(i),e.previousNode=t}_visitTiming(t,e){if(t.dynamic){const n=t.strValue;return Sp(e.params?Dp(n,e.params,e.errors):n,e.errors)}return{duration:t.duration,delay:t.delay,easing:t.easing}}visitAnimate(t,e){const n=e.currentAnimateTimings=this._visitTiming(t.timings,e),i=e.currentTimeline;n.delay&&(e.incrementTime(n.delay),i.snapshotCurrentStyles());const r=t.style;5==r.type?this.visitKeyframes(r,e):(e.incrementTime(n.duration),this.visitStyle(r,e),i.applyStylesToKeyframe()),e.currentAnimateTimings=null,e.previousNode=t}visitStyle(t,e){const n=e.currentTimeline,i=e.currentAnimateTimings;!i&&n.getCurrentStyleProperties().length&&n.forwardFrame();const r=i&&i.easing||t.easing;t.isEmptyStep?n.applyEmptyStep(r):n.setStyles(t.styles,r,e.errors,e.options),e.previousNode=t}visitKeyframes(t,e){const n=e.currentAnimateTimings,i=e.currentTimeline.duration,r=n.duration,s=e.createSubContext().currentTimeline;s.easing=n.easing,t.styles.forEach(t=>{s.forwardTime((t.offset||0)*r),s.setStyles(t.styles,t.easing,e.errors,e.options),s.applyStylesToKeyframe()}),e.currentTimeline.mergeTimelineCollectedStyles(s),e.transformIntoNewTimeline(i+r),e.previousNode=t}visitQuery(t,e){const n=e.currentTimeline.currentTime,i=t.options||{},r=i.delay?bp(i.delay):0;r&&(6===e.previousNode.type||0==n&&e.currentTimeline.getCurrentStyleProperties().length)&&(e.currentTimeline.snapshotCurrentStyles(),e.previousNode=im);let s=n;const o=e.invokeQuery(t.selector,t.originalSelector,t.limit,t.includeSelf,!!i.optional,e.errors);e.currentQueryTotal=o.length;let a=null;o.forEach((n,i)=>{e.currentQueryIndex=i;const o=e.createSubContext(t.options,n);r&&o.delayNextStep(r),n===e.element&&(a=o.currentTimeline),Up(this,t.animation,o),o.currentTimeline.applyStylesToKeyframe(),s=Math.max(s,o.currentTimeline.currentTime)}),e.currentQueryIndex=0,e.currentQueryTotal=0,e.transformIntoNewTimeline(s),a&&(e.currentTimeline.mergeTimelineCollectedStyles(a),e.currentTimeline.snapshotCurrentStyles()),e.previousNode=t}visitStagger(t,e){const n=e.parentContext,i=e.currentTimeline,r=t.timings,s=Math.abs(r.duration),o=s*(e.currentQueryTotal-1);let a=s*e.currentQueryIndex;switch(r.duration<0?"reverse":r.easing){case"reverse":a=o-a;break;case"full":a=n.currentStaggerTime}const c=e.currentTimeline;a&&c.delayNextStep(a);const l=c.currentTime;Up(this,t.animation,e),e.previousNode=t,n.currentStaggerTime=i.currentTime-l+(i.startTime-n.currentTimeline.startTime)}}const im={};class rm{constructor(t,e,n,i,r,s,o,a){this._driver=t,this.element=e,this.subInstructions=n,this._enterClassName=i,this._leaveClassName=r,this.errors=s,this.timelines=o,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=im,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=a||new sm(this._driver,e,0),o.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(t,e){if(!t)return;const n=t;let i=this.options;null!=n.duration&&(i.duration=bp(n.duration)),null!=n.delay&&(i.delay=bp(n.delay));const r=n.params;if(r){let t=i.params;t||(t=this.options.params={}),Object.keys(r).forEach(n=>{e&&t.hasOwnProperty(n)||(t[n]=Dp(r[n],t,this.errors))})}}_copyOptions(){const t={};if(this.options){const e=this.options.params;if(e){const n=t.params={};Object.keys(e).forEach(t=>{n[t]=e[t]})}}return t}createSubContext(t=null,e,n){const i=e||this.element,r=new rm(this._driver,i,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(i,n||0));return r.previousNode=this.previousNode,r.currentAnimateTimings=this.currentAnimateTimings,r.options=this._copyOptions(),r.updateOptions(t),r.currentQueryIndex=this.currentQueryIndex,r.currentQueryTotal=this.currentQueryTotal,r.parentContext=this,this.subContextCount++,r}transformIntoNewTimeline(t){return this.previousNode=im,this.currentTimeline=this.currentTimeline.fork(this.element,t),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(t,e,n){const i={duration:null!=e?e:t.duration,delay:this.currentTimeline.currentTime+(null!=n?n:0)+t.delay,easing:""},r=new om(this._driver,t.element,t.keyframes,t.preStyleProps,t.postStyleProps,i,t.stretchStartingKeyframe);return this.timelines.push(r),i}incrementTime(t){this.currentTimeline.forwardTime(this.currentTimeline.duration+t)}delayNextStep(t){t>0&&this.currentTimeline.delayNextStep(t)}invokeQuery(t,e,n,i,r,s){let o=[];if(i&&o.push(this.element),t.length>0){t=(t=t.replace(Jp,"."+this._enterClassName)).replace(tm,"."+this._leaveClassName);let e=this._driver.query(this.element,t,1!=n);0!==n&&(e=n<0?e.slice(e.length+n,e.length):e.slice(0,n)),o.push(...e)}return r||0!=o.length||s.push(`\`query("${e}")\` returned zero elements. (Use \`query("${e}", { optional: true })\` if you wish to allow this.)`),o}}class sm{constructor(t,e,n,i){this._driver=t,this.element=e,this.startTime=n,this._elementTimelineStylesLookup=i,this.duration=0,this._previousKeyframe={},this._currentKeyframe={},this._keyframes=new Map,this._styleSummary={},this._pendingStyles={},this._backFill={},this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._localTimelineStyles=Object.create(this._backFill,{}),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(e),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(e,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.getCurrentStyleProperties().length>0;default:return!0}}getCurrentStyleProperties(){return Object.keys(this._currentKeyframe)}get currentTime(){return this.startTime+this.duration}delayNextStep(t){const e=1==this._keyframes.size&&Object.keys(this._pendingStyles).length;this.duration||e?(this.forwardTime(this.currentTime+t),e&&this.snapshotCurrentStyles()):this.startTime+=t}fork(t,e){return this.applyStylesToKeyframe(),new sm(this._driver,t,e||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=Object.create(this._backFill,{}),this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(t){this.applyStylesToKeyframe(),this.duration=t,this._loadKeyframe()}_updateStyle(t,e){this._localTimelineStyles[t]=e,this._globalTimelineStyles[t]=e,this._styleSummary[t]={time:this.currentTime,value:e}}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(t){t&&(this._previousKeyframe.easing=t),Object.keys(this._globalTimelineStyles).forEach(t=>{this._backFill[t]=this._globalTimelineStyles[t]||"*",this._currentKeyframe[t]="*"}),this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(t,e,n,i){e&&(this._previousKeyframe.easing=e);const r=i&&i.params||{},s=function(t,e){const n={};let i;return t.forEach(t=>{"*"===t?(i=i||Object.keys(e),i.forEach(t=>{n[t]="*"})):kp(t,!1,n)}),n}(t,this._globalTimelineStyles);Object.keys(s).forEach(t=>{const e=Dp(s[t],r,n);this._pendingStyles[t]=e,this._localTimelineStyles.hasOwnProperty(t)||(this._backFill[t]=this._globalTimelineStyles.hasOwnProperty(t)?this._globalTimelineStyles[t]:"*"),this._updateStyle(t,e)})}applyStylesToKeyframe(){const t=this._pendingStyles,e=Object.keys(t);0!=e.length&&(this._pendingStyles={},e.forEach(e=>{this._currentKeyframe[e]=t[e]}),Object.keys(this._localTimelineStyles).forEach(t=>{this._currentKeyframe.hasOwnProperty(t)||(this._currentKeyframe[t]=this._localTimelineStyles[t])}))}snapshotCurrentStyles(){Object.keys(this._localTimelineStyles).forEach(t=>{const e=this._localTimelineStyles[t];this._pendingStyles[t]=e,this._updateStyle(t,e)})}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const t=[];for(let e in this._currentKeyframe)t.push(e);return t}mergeTimelineCollectedStyles(t){Object.keys(t._styleSummary).forEach(e=>{const n=this._styleSummary[e],i=t._styleSummary[e];(!n||i.time>n.time)&&this._updateStyle(e,i.value)})}buildKeyframes(){this.applyStylesToKeyframe();const t=new Set,e=new Set,n=1===this._keyframes.size&&0===this.duration;let i=[];this._keyframes.forEach((r,s)=>{const o=kp(r,!0);Object.keys(o).forEach(n=>{const i=o[n];"!"==i?t.add(n):"*"==i&&e.add(n)}),n||(o.offset=s/this.duration),i.push(o)});const r=t.size?Pp(t.values()):[],s=e.size?Pp(e.values()):[];if(n){const t=i[0],e=Ep(t);t.offset=0,e.offset=1,i=[t,e]}return Qp(this.element,i,r,s,this.duration,this.startTime,this.easing,!1)}}class om extends sm{constructor(t,e,n,i,r,s,o=!1){super(t,e,s.delay),this.element=e,this.keyframes=n,this.preStyleProps=i,this.postStyleProps=r,this._stretchStartingKeyframe=o,this.timings={duration:s.duration,delay:s.delay,easing:s.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let t=this.keyframes,{delay:e,duration:n,easing:i}=this.timings;if(this._stretchStartingKeyframe&&e){const r=[],s=n+e,o=e/s,a=kp(t[0],!1);a.offset=0,r.push(a);const c=kp(t[0],!1);c.offset=am(o),r.push(c);const l=t.length-1;for(let i=1;i<=l;i++){let o=kp(t[i],!1);o.offset=am((e+o.offset*n)/s),r.push(o)}n=s,e=0,i="",t=r}return Qp(this.element,t,this.preStyleProps,this.postStyleProps,n,e,i,!0)}}function am(t,e=3){const n=Math.pow(10,e-1);return Math.round(t*n)/n}class cm{}class lm extends cm{normalizePropertyName(t,e){return Np(t)}normalizeStyleValue(t,e,n,i){let r="";const s=n.toString().trim();if(um[e]&&0!==n&&"0"!==n)if("number"==typeof n)r="px";else{const e=n.match(/^[+-]?[\d\.]+([a-z]*)$/);e&&0==e[1].length&&i.push(`Please provide a CSS unit value for ${t}:${n}`)}return s+r}}const um=(()=>function(t){const e={};return t.forEach(t=>e[t]=!0),e}("width,height,minWidth,minHeight,maxWidth,maxHeight,left,top,bottom,right,fontSize,outlineWidth,outlineOffset,paddingTop,paddingLeft,paddingBottom,paddingRight,marginTop,marginLeft,marginBottom,marginRight,borderRadius,borderWidth,borderTopWidth,borderLeftWidth,borderRightWidth,borderBottomWidth,textIndent,perspective".split(",")))();function hm(t,e,n,i,r,s,o,a,c,l,u,h,d){return{type:0,element:t,triggerName:e,isRemovalTransition:r,fromState:n,fromStyles:s,toState:i,toStyles:o,timelines:a,queriedElements:c,preStyleProps:l,postStyleProps:u,totalTime:h,errors:d}}const dm={};class pm{constructor(t,e,n){this._triggerName=t,this.ast=e,this._stateStyles=n}match(t,e,n,i){return function(t,e,n,i,r){return t.some(t=>t(e,n,i,r))}(this.ast.matchers,t,e,n,i)}buildStyles(t,e,n){const i=this._stateStyles["*"],r=this._stateStyles[t],s=i?i.buildStyles(e,n):{};return r?r.buildStyles(e,n):s}build(t,e,n,i,r,s,o,a,c,l){const u=[],h=this.ast.options&&this.ast.options.params||dm,d=this.buildStyles(n,o&&o.params||dm,u),p=a&&a.params||dm,m=this.buildStyles(i,p,u),f=new Set,g=new Map,_=new Map,y="void"===i,v={params:Object.assign(Object.assign({},h),p)},b=l?[]:em(t,e,this.ast.animation,r,s,d,m,v,c,u);let w=0;if(b.forEach(t=>{w=Math.max(t.duration+t.delay,w)}),u.length)return hm(e,this._triggerName,n,i,y,d,m,[],[],g,_,w,u);b.forEach(t=>{const n=t.element,i=sp(g,n,{});t.preStyleProps.forEach(t=>i[t]=!0);const r=sp(_,n,{});t.postStyleProps.forEach(t=>r[t]=!0),n!==e&&f.add(n)});const S=Pp(f.values());return hm(e,this._triggerName,n,i,y,d,m,b,S,g,_,w)}}class mm{constructor(t,e){this.styles=t,this.defaultParams=e}buildStyles(t,e){const n={},i=Ep(this.defaultParams);return Object.keys(t).forEach(e=>{const n=t[e];null!=n&&(i[e]=n)}),this.styles.styles.forEach(t=>{if("string"!=typeof t){const r=t;Object.keys(r).forEach(t=>{let s=r[t];s.length>1&&(s=Dp(s,i,e)),n[t]=s})}}),n}}class fm{constructor(t,e){this.name=t,this.ast=e,this.transitionFactories=[],this.states={},e.states.forEach(t=>{this.states[t.name]=new mm(t.style,t.options&&t.options.params||{})}),gm(this.states,"true","1"),gm(this.states,"false","0"),e.transitions.forEach(e=>{this.transitionFactories.push(new pm(t,e,this.states))}),this.fallbackTransition=new pm(t,{type:1,animation:{type:2,steps:[],options:null},matchers:[(t,e)=>!0],options:null,queryCount:0,depCount:0},this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(t,e,n,i){return this.transitionFactories.find(r=>r.match(t,e,n,i))||null}matchStyles(t,e,n){return this.fallbackTransition.buildStyles(t,e,n)}}function gm(t,e,n){t.hasOwnProperty(e)?t.hasOwnProperty(n)||(t[n]=t[e]):t.hasOwnProperty(n)&&(t[e]=t[n])}const _m=new Zp;class ym{constructor(t,e,n){this.bodyNode=t,this._driver=e,this._normalizer=n,this._animations={},this._playersById={},this.players=[]}register(t,e){const n=[],i=$p(this._driver,e,n);if(n.length)throw new Error("Unable to build the animation due to the following errors: "+n.join("\n"));this._animations[t]=i}_buildPlayer(t,e,n){const i=t.element,r=ep(0,this._normalizer,0,t.keyframes,e,n);return this._driver.animate(i,r,t.duration,t.delay,t.easing,[],!0)}create(t,e,n={}){const i=[],r=this._animations[t];let s;const o=new Map;if(r?(s=em(this._driver,e,r,"ng-enter","ng-leave",{},{},n,_m,i),s.forEach(t=>{const e=sp(o,t.element,{});t.postStyleProps.forEach(t=>e[t]=null)})):(i.push("The requested animation doesn't exist or has already been destroyed"),s=[]),i.length)throw new Error("Unable to create the animation due to the following errors: "+i.join("\n"));o.forEach((t,e)=>{Object.keys(t).forEach(n=>{t[n]=this._driver.computeStyle(e,n,"*")})});const a=tp(s.map(t=>{const e=o.get(t.element);return this._buildPlayer(t,{},e)}));return this._playersById[t]=a,a.onDestroy(()=>this.destroy(t)),this.players.push(a),a}destroy(t){const e=this._getPlayer(t);e.destroy(),delete this._playersById[t];const n=this.players.indexOf(e);n>=0&&this.players.splice(n,1)}_getPlayer(t){const e=this._playersById[t];if(!e)throw new Error("Unable to find the timeline player referenced by "+t);return e}listen(t,e,n,i){const r=rp(e,"","","");return np(this._getPlayer(t),n,r,i),()=>{}}command(t,e,n,i){if("register"==n)return void this.register(t,i[0]);if("create"==n)return void this.create(t,e,i[0]||{});const r=this._getPlayer(t);switch(n){case"play":r.play();break;case"pause":r.pause();break;case"reset":r.reset();break;case"restart":r.restart();break;case"finish":r.finish();break;case"init":r.init();break;case"setPosition":r.setPosition(parseFloat(i[0]));break;case"destroy":this.destroy(t)}}}const vm=[],bm={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},wm={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0};class Sm{constructor(t,e=""){this.namespaceId=e;const n=t&&t.hasOwnProperty("value");if(this.value=null!=(i=n?t.value:t)?i:null,n){const e=Ep(t);delete e.value,this.options=e}else this.options={};var i;this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(t){const e=t.params;if(e){const t=this.options.params;Object.keys(e).forEach(n=>{null==t[n]&&(t[n]=e[n])})}}}const Em=new Sm("void");class km{constructor(t,e,n){this.id=t,this.hostElement=e,this._engine=n,this.players=[],this._triggers={},this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+t,Am(e,this._hostClassName)}listen(t,e,n,i){if(!this._triggers.hasOwnProperty(e))throw new Error(`Unable to listen on the animation trigger event "${n}" because the animation trigger "${e}" doesn't exist!`);if(null==n||0==n.length)throw new Error(`Unable to listen on the animation trigger "${e}" because the provided event is undefined!`);if("start"!=(r=n)&&"done"!=r)throw new Error(`The provided animation trigger event "${n}" for the animation trigger "${e}" is not supported!`);var r;const s=sp(this._elementListeners,t,[]),o={name:e,phase:n,callback:i};s.push(o);const a=sp(this._engine.statesByElement,t,{});return a.hasOwnProperty(e)||(Am(t,"ng-trigger"),Am(t,"ng-trigger-"+e),a[e]=Em),()=>{this._engine.afterFlush(()=>{const t=s.indexOf(o);t>=0&&s.splice(t,1),this._triggers[e]||delete a[e]})}}register(t,e){return!this._triggers[t]&&(this._triggers[t]=e,!0)}_getTrigger(t){const e=this._triggers[t];if(!e)throw new Error(`The provided animation trigger "${t}" has not been registered!`);return e}trigger(t,e,n,i=!0){const r=this._getTrigger(e),s=new xm(this.id,e,t);let o=this._engine.statesByElement.get(t);o||(Am(t,"ng-trigger"),Am(t,"ng-trigger-"+e),this._engine.statesByElement.set(t,o={}));let a=o[e];const c=new Sm(n,this.id);if(!(n&&n.hasOwnProperty("value"))&&a&&c.absorbOptions(a.options),o[e]=c,a||(a=Em),"void"!==c.value&&a.value===c.value){if(!function(t,e){const n=Object.keys(t),i=Object.keys(e);if(n.length!=i.length)return!1;for(let r=0;r<n.length;r++){const i=n[r];if(!e.hasOwnProperty(i)||t[i]!==e[i])return!1}return!0}(a.params,c.params)){const e=[],n=r.matchStyles(a.value,a.params,e),i=r.matchStyles(c.value,c.params,e);e.length?this._engine.reportError(e):this._engine.afterFlush(()=>{Ip(t,n),Tp(t,i)})}return}const l=sp(this._engine.playersByElement,t,[]);l.forEach(t=>{t.namespaceId==this.id&&t.triggerName==e&&t.queued&&t.destroy()});let u=r.matchTransition(a.value,c.value,t,c.params),h=!1;if(!u){if(!i)return;u=r.fallbackTransition,h=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:t,triggerName:e,transition:u,fromState:a,toState:c,player:s,isFallbackTransition:h}),h||(Am(t,"ng-animate-queued"),s.onStart(()=>{Dm(t,"ng-animate-queued")})),s.onDone(()=>{let e=this.players.indexOf(s);e>=0&&this.players.splice(e,1);const n=this._engine.playersByElement.get(t);if(n){let t=n.indexOf(s);t>=0&&n.splice(t,1)}}),this.players.push(s),l.push(s),s}deregister(t){delete this._triggers[t],this._engine.statesByElement.forEach((e,n)=>{delete e[t]}),this._elementListeners.forEach((e,n)=>{this._elementListeners.set(n,e.filter(e=>e.name!=t))})}clearElementCache(t){this._engine.statesByElement.delete(t),this._elementListeners.delete(t);const e=this._engine.playersByElement.get(t);e&&(e.forEach(t=>t.destroy()),this._engine.playersByElement.delete(t))}_signalRemovalForInnerTriggers(t,e){const n=this._engine.driver.query(t,".ng-trigger",!0);n.forEach(t=>{if(t.__ng_removed)return;const n=this._engine.fetchNamespacesByElement(t);n.size?n.forEach(n=>n.triggerLeaveAnimation(t,e,!1,!0)):this.clearElementCache(t)}),this._engine.afterFlushAnimationsDone(()=>n.forEach(t=>this.clearElementCache(t)))}triggerLeaveAnimation(t,e,n,i){const r=this._engine.statesByElement.get(t);if(r){const s=[];if(Object.keys(r).forEach(e=>{if(this._triggers[e]){const n=this.trigger(t,e,"void",i);n&&s.push(n)}}),s.length)return this._engine.markElementAsRemoved(this.id,t,!0,e),n&&tp(s).onDone(()=>this._engine.processLeaveNode(t)),!0}return!1}prepareLeaveAnimationListeners(t){const e=this._elementListeners.get(t);if(e){const n=new Set;e.forEach(e=>{const i=e.name;if(n.has(i))return;n.add(i);const r=this._triggers[i].fallbackTransition,s=this._engine.statesByElement.get(t)[i]||Em,o=new Sm("void"),a=new xm(this.id,i,t);this._engine.totalQueuedPlayers++,this._queue.push({element:t,triggerName:i,transition:r,fromState:s,toState:o,player:a,isFallbackTransition:!0})})}}removeNode(t,e){const n=this._engine;if(t.childElementCount&&this._signalRemovalForInnerTriggers(t,e),this.triggerLeaveAnimation(t,e,!0))return;let i=!1;if(n.totalAnimations){const e=n.players.length?n.playersByQueriedElement.get(t):[];if(e&&e.length)i=!0;else{let e=t;for(;e=e.parentNode;)if(n.statesByElement.get(e)){i=!0;break}}}if(this.prepareLeaveAnimationListeners(t),i)n.markElementAsRemoved(this.id,t,!1,e);else{const i=t.__ng_removed;i&&i!==bm||(n.afterFlush(()=>this.clearElementCache(t)),n.destroyInnerAnimations(t),n._onRemovalComplete(t,e))}}insertNode(t,e){Am(t,this._hostClassName)}drainQueuedTransitions(t){const e=[];return this._queue.forEach(n=>{const i=n.player;if(i.destroyed)return;const r=n.element,s=this._elementListeners.get(r);s&&s.forEach(e=>{if(e.name==n.triggerName){const i=rp(r,n.triggerName,n.fromState.value,n.toState.value);i._data=t,np(n.player,e.phase,i,e.callback)}}),i.markedForDestroy?this._engine.afterFlush(()=>{i.destroy()}):e.push(n)}),this._queue=[],e.sort((t,e)=>{const n=t.transition.ast.depCount,i=e.transition.ast.depCount;return 0==n||0==i?n-i:this._engine.driver.containsElement(t.element,e.element)?1:-1})}destroy(t){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,t)}elementContainsData(t){let e=!1;return this._elementListeners.has(t)&&(e=!0),e=!!this._queue.find(e=>e.element===t)||e,e}}class Cm{constructor(t,e,n){this.bodyNode=t,this.driver=e,this._normalizer=n,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(t,e)=>{}}_onRemovalComplete(t,e){this.onRemovalComplete(t,e)}get queuedPlayers(){const t=[];return this._namespaceList.forEach(e=>{e.players.forEach(e=>{e.queued&&t.push(e)})}),t}createNamespace(t,e){const n=new km(t,e,this);return e.parentNode?this._balanceNamespaceList(n,e):(this.newHostElements.set(e,n),this.collectEnterElement(e)),this._namespaceLookup[t]=n}_balanceNamespaceList(t,e){const n=this._namespaceList.length-1;if(n>=0){let i=!1;for(let r=n;r>=0;r--)if(this.driver.containsElement(this._namespaceList[r].hostElement,e)){this._namespaceList.splice(r+1,0,t),i=!0;break}i||this._namespaceList.splice(0,0,t)}else this._namespaceList.push(t);return this.namespacesByHostElement.set(e,t),t}register(t,e){let n=this._namespaceLookup[t];return n||(n=this.createNamespace(t,e)),n}registerTrigger(t,e,n){let i=this._namespaceLookup[t];i&&i.register(e,n)&&this.totalAnimations++}destroy(t,e){if(!t)return;const n=this._fetchNamespace(t);this.afterFlush(()=>{this.namespacesByHostElement.delete(n.hostElement),delete this._namespaceLookup[t];const e=this._namespaceList.indexOf(n);e>=0&&this._namespaceList.splice(e,1)}),this.afterFlushAnimationsDone(()=>n.destroy(e))}_fetchNamespace(t){return this._namespaceLookup[t]}fetchNamespacesByElement(t){const e=new Set,n=this.statesByElement.get(t);if(n){const t=Object.keys(n);for(let i=0;i<t.length;i++){const r=n[t[i]].namespaceId;if(r){const t=this._fetchNamespace(r);t&&e.add(t)}}}return e}trigger(t,e,n,i){if(Tm(e)){const r=this._fetchNamespace(t);if(r)return r.trigger(e,n,i),!0}return!1}insertNode(t,e,n,i){if(!Tm(e))return;const r=e.__ng_removed;if(r&&r.setForRemoval){r.setForRemoval=!1,r.setForMove=!0;const t=this.collectedLeaveElements.indexOf(e);t>=0&&this.collectedLeaveElements.splice(t,1)}if(t){const i=this._fetchNamespace(t);i&&i.insertNode(e,n)}i&&this.collectEnterElement(e)}collectEnterElement(t){this.collectedEnterElements.push(t)}markElementAsDisabled(t,e){e?this.disabledNodes.has(t)||(this.disabledNodes.add(t),Am(t,"ng-animate-disabled")):this.disabledNodes.has(t)&&(this.disabledNodes.delete(t),Dm(t,"ng-animate-disabled"))}removeNode(t,e,n,i){if(Tm(e)){const r=t?this._fetchNamespace(t):null;if(r?r.removeNode(e,i):this.markElementAsRemoved(t,e,!1,i),n){const n=this.namespacesByHostElement.get(e);n&&n.id!==t&&n.removeNode(e,i)}}else this._onRemovalComplete(e,i)}markElementAsRemoved(t,e,n,i){this.collectedLeaveElements.push(e),e.__ng_removed={namespaceId:t,setForRemoval:i,hasAnimation:n,removedBeforeQueried:!1}}listen(t,e,n,i,r){return Tm(e)?this._fetchNamespace(t).listen(e,n,i,r):()=>{}}_buildInstruction(t,e,n,i,r){return t.transition.build(this.driver,t.element,t.fromState.value,t.toState.value,n,i,t.fromState.options,t.toState.options,e,r)}destroyInnerAnimations(t){let e=this.driver.query(t,".ng-trigger",!0);e.forEach(t=>this.destroyActiveAnimationsForElement(t)),0!=this.playersByQueriedElement.size&&(e=this.driver.query(t,".ng-animating",!0),e.forEach(t=>this.finishActiveQueriedAnimationOnElement(t)))}destroyActiveAnimationsForElement(t){const e=this.playersByElement.get(t);e&&e.forEach(t=>{t.queued?t.markedForDestroy=!0:t.destroy()})}finishActiveQueriedAnimationOnElement(t){const e=this.playersByQueriedElement.get(t);e&&e.forEach(t=>t.finish())}whenRenderingDone(){return new Promise(t=>{if(this.players.length)return tp(this.players).onDone(()=>t());t()})}processLeaveNode(t){const e=t.__ng_removed;if(e&&e.setForRemoval){if(t.__ng_removed=bm,e.namespaceId){this.destroyInnerAnimations(t);const n=this._fetchNamespace(e.namespaceId);n&&n.clearElementCache(t)}this._onRemovalComplete(t,e.setForRemoval)}this.driver.matchesElement(t,".ng-animate-disabled")&&this.markElementAsDisabled(t,!1),this.driver.query(t,".ng-animate-disabled",!0).forEach(t=>{this.markElementAsDisabled(t,!1)})}flush(t=-1){let e=[];if(this.newHostElements.size&&(this.newHostElements.forEach((t,e)=>this._balanceNamespaceList(t,e)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let n=0;n<this.collectedEnterElements.length;n++)Am(this.collectedEnterElements[n],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const n=[];try{e=this._flushAnimations(n,t)}finally{for(let t=0;t<n.length;t++)n[t]()}}else for(let n=0;n<this.collectedLeaveElements.length;n++)this.processLeaveNode(this.collectedLeaveElements[n]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(t=>t()),this._flushFns=[],this._whenQuietFns.length){const t=this._whenQuietFns;this._whenQuietFns=[],e.length?tp(e).onDone(()=>{t.forEach(t=>t())}):t.forEach(t=>t())}}reportError(t){throw new Error("Unable to process animations due to the following failed trigger transitions\n "+t.join("\n"))}_flushAnimations(t,e){const n=new Zp,i=[],r=new Map,s=[],o=new Map,a=new Map,c=new Map,l=new Set;this.disabledNodes.forEach(t=>{l.add(t);const e=this.driver.query(t,".ng-animate-queued",!0);for(let n=0;n<e.length;n++)l.add(e[n])});const u=this.bodyNode,h=Array.from(this.statesByElement.keys()),d=Om(h,this.collectedEnterElements),p=new Map;let m=0;d.forEach((t,e)=>{const n="ng-enter"+m++;p.set(e,n),t.forEach(t=>Am(t,n))});const f=[],g=new Set,_=new Set;for(let O=0;O<this.collectedLeaveElements.length;O++){const t=this.collectedLeaveElements[O],e=t.__ng_removed;e&&e.setForRemoval&&(f.push(t),g.add(t),e.hasAnimation?this.driver.query(t,".ng-star-inserted",!0).forEach(t=>g.add(t)):_.add(t))}const y=new Map,v=Om(h,Array.from(g));v.forEach((t,e)=>{const n="ng-leave"+m++;y.set(e,n),t.forEach(t=>Am(t,n))}),t.push(()=>{d.forEach((t,e)=>{const n=p.get(e);t.forEach(t=>Dm(t,n))}),v.forEach((t,e)=>{const n=y.get(e);t.forEach(t=>Dm(t,n))}),f.forEach(t=>{this.processLeaveNode(t)})});const b=[],w=[];for(let O=this._namespaceList.length-1;O>=0;O--)this._namespaceList[O].drainQueuedTransitions(e).forEach(t=>{const e=t.player,r=t.element;if(b.push(e),this.collectedEnterElements.length){const t=r.__ng_removed;if(t&&t.setForMove)return void e.destroy()}const l=!u||!this.driver.containsElement(u,r),h=y.get(r),d=p.get(r),m=this._buildInstruction(t,n,d,h,l);if(m.errors&&m.errors.length)w.push(m);else{if(l)return e.onStart(()=>Ip(r,m.fromStyles)),e.onDestroy(()=>Tp(r,m.toStyles)),void i.push(e);if(t.isFallbackTransition)return e.onStart(()=>Ip(r,m.fromStyles)),e.onDestroy(()=>Tp(r,m.toStyles)),void i.push(e);m.timelines.forEach(t=>t.stretchStartingKeyframe=!0),n.append(r,m.timelines),s.push({instruction:m,player:e,element:r}),m.queriedElements.forEach(t=>sp(o,t,[]).push(e)),m.preStyleProps.forEach((t,e)=>{const n=Object.keys(t);if(n.length){let t=a.get(e);t||a.set(e,t=new Set),n.forEach(e=>t.add(e))}}),m.postStyleProps.forEach((t,e)=>{const n=Object.keys(t);let i=c.get(e);i||c.set(e,i=new Set),n.forEach(t=>i.add(t))})}});if(w.length){const t=[];w.forEach(e=>{t.push(`@${e.triggerName} has failed due to:\n`),e.errors.forEach(e=>t.push(`- ${e}\n`))}),b.forEach(t=>t.destroy()),this.reportError(t)}const S=new Map,E=new Map;s.forEach(t=>{const e=t.element;n.has(e)&&(E.set(e,e),this._beforeAnimationBuild(t.player.namespaceId,t.instruction,S))}),i.forEach(t=>{const e=t.element;this._getPreviousPlayers(e,!1,t.namespaceId,t.triggerName,null).forEach(t=>{sp(S,e,[]).push(t),t.destroy()})});const k=f.filter(t=>Mm(t,a,c)),C=new Map;Rm(C,this.driver,_,c,"*").forEach(t=>{Mm(t,a,c)&&k.push(t)});const x=new Map;d.forEach((t,e)=>{Rm(x,this.driver,new Set(t),a,"!")}),k.forEach(t=>{const e=C.get(t),n=x.get(t);C.set(t,Object.assign(Object.assign({},e),n))});const T=[],I=[],R={};s.forEach(t=>{const{element:e,player:s,instruction:o}=t;if(n.has(e)){if(l.has(e))return s.onDestroy(()=>Tp(e,o.toStyles)),s.disabled=!0,s.overrideTotalTime(o.totalTime),void i.push(s);let t=R;if(E.size>1){let n=e;const i=[];for(;n=n.parentNode;){const e=E.get(n);if(e){t=e;break}i.push(n)}i.forEach(e=>E.set(e,t))}const n=this._buildAnimation(s.namespaceId,o,S,r,x,C);if(s.setRealPlayer(n),t===R)T.push(s);else{const e=this.playersByElement.get(t);e&&e.length&&(s.parentPlayer=tp(e)),i.push(s)}}else Ip(e,o.fromStyles),s.onDestroy(()=>Tp(e,o.toStyles)),I.push(s),l.has(e)&&i.push(s)}),I.forEach(t=>{const e=r.get(t.element);if(e&&e.length){const n=tp(e);t.setRealPlayer(n)}}),i.forEach(t=>{t.parentPlayer?t.syncPlayerEvents(t.parentPlayer):t.destroy()});for(let O=0;O<f.length;O++){const t=f[O],e=t.__ng_removed;if(Dm(t,"ng-leave"),e&&e.hasAnimation)continue;let n=[];if(o.size){let e=o.get(t);e&&e.length&&n.push(...e);let i=this.driver.query(t,".ng-animating",!0);for(let t=0;t<i.length;t++){let e=o.get(i[t]);e&&e.length&&n.push(...e)}}const i=n.filter(t=>!t.destroyed);i.length?Pm(this,t,i):this.processLeaveNode(t)}return f.length=0,T.forEach(t=>{this.players.push(t),t.onDone(()=>{t.destroy();const e=this.players.indexOf(t);this.players.splice(e,1)}),t.play()}),T}elementContainsData(t,e){let n=!1;const i=e.__ng_removed;return i&&i.setForRemoval&&(n=!0),this.playersByElement.has(e)&&(n=!0),this.playersByQueriedElement.has(e)&&(n=!0),this.statesByElement.has(e)&&(n=!0),this._fetchNamespace(t).elementContainsData(e)||n}afterFlush(t){this._flushFns.push(t)}afterFlushAnimationsDone(t){this._whenQuietFns.push(t)}_getPreviousPlayers(t,e,n,i,r){let s=[];if(e){const e=this.playersByQueriedElement.get(t);e&&(s=e)}else{const e=this.playersByElement.get(t);if(e){const t=!r||"void"==r;e.forEach(e=>{e.queued||(t||e.triggerName==i)&&s.push(e)})}}return(n||i)&&(s=s.filter(t=>!(n&&n!=t.namespaceId||i&&i!=t.triggerName))),s}_beforeAnimationBuild(t,e,n){const i=e.element,r=e.isRemovalTransition?void 0:t,s=e.isRemovalTransition?void 0:e.triggerName;for(const o of e.timelines){const t=o.element,a=t!==i,c=sp(n,t,[]);this._getPreviousPlayers(t,a,r,s,e.toState).forEach(t=>{const e=t.getRealPlayer();e.beforeDestroy&&e.beforeDestroy(),t.destroy(),c.push(t)})}Ip(i,e.fromStyles)}_buildAnimation(t,e,n,i,r,s){const o=e.triggerName,a=e.element,c=[],l=new Set,u=new Set,h=e.timelines.map(e=>{const h=e.element;l.add(h);const d=h.__ng_removed;if(d&&d.removedBeforeQueried)return new Qd(e.duration,e.delay);const p=h!==a,m=function(t){const e=[];return function t(e,n){for(let i=0;i<e.length;i++){const r=e[i];r instanceof Zd?t(r.players,n):n.push(r)}}(t,e),e}((n.get(h)||vm).map(t=>t.getRealPlayer())).filter(t=>!!t.element&&t.element===h),f=r.get(h),g=s.get(h),_=ep(0,this._normalizer,0,e.keyframes,f,g),y=this._buildPlayer(e,_,m);if(e.subTimeline&&i&&u.add(h),p){const e=new xm(t,o,h);e.setRealPlayer(y),c.push(e)}return y});c.forEach(t=>{sp(this.playersByQueriedElement,t.element,[]).push(t),t.onDone(()=>function(t,e,n){let i;if(t instanceof Map){if(i=t.get(e),i){if(i.length){const t=i.indexOf(n);i.splice(t,1)}0==i.length&&t.delete(e)}}else if(i=t[e],i){if(i.length){const t=i.indexOf(n);i.splice(t,1)}0==i.length&&delete t[e]}return i}(this.playersByQueriedElement,t.element,t))}),l.forEach(t=>Am(t,"ng-animating"));const d=tp(h);return d.onDestroy(()=>{l.forEach(t=>Dm(t,"ng-animating")),Tp(a,e.toStyles)}),u.forEach(t=>{sp(i,t,[]).push(d)}),d}_buildPlayer(t,e,n){return e.length>0?this.driver.animate(t.element,e,t.duration,t.delay,t.easing,n):new Qd(t.duration,t.delay)}}class xm{constructor(t,e,n){this.namespaceId=t,this.triggerName=e,this.element=n,this._player=new Qd,this._containsRealPlayer=!1,this._queuedCallbacks={},this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(t){this._containsRealPlayer||(this._player=t,Object.keys(this._queuedCallbacks).forEach(e=>{this._queuedCallbacks[e].forEach(n=>np(t,e,void 0,n))}),this._queuedCallbacks={},this._containsRealPlayer=!0,this.overrideTotalTime(t.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(t){this.totalTime=t}syncPlayerEvents(t){const e=this._player;e.triggerCallback&&t.onStart(()=>e.triggerCallback("start")),t.onDone(()=>this.finish()),t.onDestroy(()=>this.destroy())}_queueEvent(t,e){sp(this._queuedCallbacks,t,[]).push(e)}onDone(t){this.queued&&this._queueEvent("done",t),this._player.onDone(t)}onStart(t){this.queued&&this._queueEvent("start",t),this._player.onStart(t)}onDestroy(t){this.queued&&this._queueEvent("destroy",t),this._player.onDestroy(t)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(t){this.queued||this._player.setPosition(t)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(t){const e=this._player;e.triggerCallback&&e.triggerCallback(t)}}function Tm(t){return t&&1===t.nodeType}function Im(t,e){const n=t.style.display;return t.style.display=null!=e?e:"none",n}function Rm(t,e,n,i,r){const s=[];n.forEach(t=>s.push(Im(t)));const o=[];i.forEach((n,i)=>{const s={};n.forEach(t=>{const n=s[t]=e.computeStyle(i,t,r);n&&0!=n.length||(i.__ng_removed=wm,o.push(i))}),t.set(i,s)});let a=0;return n.forEach(t=>Im(t,s[a++])),o}function Om(t,e){const n=new Map;if(t.forEach(t=>n.set(t,[])),0==e.length)return n;const i=new Set(e),r=new Map;return e.forEach(t=>{const e=function t(e){if(!e)return 1;let s=r.get(e);if(s)return s;const o=e.parentNode;return s=n.has(o)?o:i.has(o)?1:t(o),r.set(e,s),s}(t);1!==e&&n.get(e).push(t)}),n}function Am(t,e){if(t.classList)t.classList.add(e);else{let n=t.$$classes;n||(n=t.$$classes={}),n[e]=!0}}function Dm(t,e){if(t.classList)t.classList.remove(e);else{let n=t.$$classes;n&&delete n[e]}}function Pm(t,e,n){tp(n).onDone(()=>t.processLeaveNode(e))}function Mm(t,e,n){const i=n.get(t);if(!i)return!1;let r=e.get(t);return r?i.forEach(t=>r.add(t)):e.set(t,i),n.delete(t),!0}class Nm{constructor(t,e,n){this.bodyNode=t,this._driver=e,this._triggerCache={},this.onRemovalComplete=(t,e)=>{},this._transitionEngine=new Cm(t,e,n),this._timelineEngine=new ym(t,e,n),this._transitionEngine.onRemovalComplete=(t,e)=>this.onRemovalComplete(t,e)}registerTrigger(t,e,n,i,r){const s=t+"-"+i;let o=this._triggerCache[s];if(!o){const t=[],e=$p(this._driver,r,t);if(t.length)throw new Error(`The animation trigger "${i}" has failed to build due to the following errors:\n - ${t.join("\n - ")}`);o=function(t,e){return new fm(t,e)}(i,e),this._triggerCache[s]=o}this._transitionEngine.registerTrigger(e,i,o)}register(t,e){this._transitionEngine.register(t,e)}destroy(t,e){this._transitionEngine.destroy(t,e)}onInsert(t,e,n,i){this._transitionEngine.insertNode(t,e,n,i)}onRemove(t,e,n,i){this._transitionEngine.removeNode(t,e,i||!1,n)}disableAnimations(t,e){this._transitionEngine.markElementAsDisabled(t,e)}process(t,e,n,i){if("@"==n.charAt(0)){const[t,r]=op(n);this._timelineEngine.command(t,e,r,i)}else this._transitionEngine.trigger(t,e,n,i)}listen(t,e,n,i,r){if("@"==n.charAt(0)){const[t,i]=op(n);return this._timelineEngine.listen(t,e,i,r)}return this._transitionEngine.listen(t,e,n,i,r)}flush(t=-1){this._transitionEngine.flush(t)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}function Lm(t,e){let n=null,i=null;return Array.isArray(e)&&e.length?(n=Um(e[0]),e.length>1&&(i=Um(e[e.length-1]))):e&&(n=Um(e)),n||i?new Fm(t,n,i):null}let Fm=(()=>{class t{constructor(e,n,i){this._element=e,this._startStyles=n,this._endStyles=i,this._state=0;let r=t.initialStylesByElement.get(e);r||t.initialStylesByElement.set(e,r={}),this._initialStyles=r}start(){this._state<1&&(this._startStyles&&Tp(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(Tp(this._element,this._initialStyles),this._endStyles&&(Tp(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(t.initialStylesByElement.delete(this._element),this._startStyles&&(Ip(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(Ip(this._element,this._endStyles),this._endStyles=null),Tp(this._element,this._initialStyles),this._state=3)}}return t.initialStylesByElement=new WeakMap,t})();function Um(t){let e=null;const n=Object.keys(t);for(let i=0;i<n.length;i++){const r=n[i];Bm(r)&&(e=e||{},e[r]=t[r])}return e}function Bm(t){return"display"===t||"position"===t}class jm{constructor(t,e,n,i,r,s,o){this._element=t,this._name=e,this._duration=n,this._delay=i,this._easing=r,this._fillMode=s,this._onDoneFn=o,this._finished=!1,this._destroyed=!1,this._startTime=0,this._position=0,this._eventFn=t=>this._handleCallback(t)}apply(){!function(t,e){const n=Hm(t,"").trim();n.length&&(function(t,e){let n=0;for(let i=0;i<t.length;i++)","===t.charAt(i)&&n++}(n),e=`${n}, ${e}`),$m(t,"",e)}(this._element,`${this._duration}ms ${this._easing} ${this._delay}ms 1 normal ${this._fillMode} ${this._name}`),Gm(this._element,this._eventFn,!1),this._startTime=Date.now()}pause(){Vm(this._element,this._name,"paused")}resume(){Vm(this._element,this._name,"running")}setPosition(t){const e=Km(this._element,this._name);this._position=t*this._duration,$m(this._element,"Delay",`-${this._position}ms`,e)}getPosition(){return this._position}_handleCallback(t){const e=t._ngTestManualTimestamp||Date.now(),n=1e3*parseFloat(t.elapsedTime.toFixed(3));t.animationName==this._name&&Math.max(e-this._startTime,0)>=this._delay&&n>=this._duration&&this.finish()}finish(){this._finished||(this._finished=!0,this._onDoneFn(),Gm(this._element,this._eventFn,!0))}destroy(){this._destroyed||(this._destroyed=!0,this.finish(),function(t,e){const n=Hm(t,"").split(","),i=qm(n,e);i>=0&&(n.splice(i,1),$m(t,"",n.join(",")))}(this._element,this._name))}}function Vm(t,e,n){$m(t,"PlayState",n,Km(t,e))}function Km(t,e){const n=Hm(t,"");return n.indexOf(",")>0?qm(n.split(","),e):qm([n],e)}function qm(t,e){for(let n=0;n<t.length;n++)if(t[n].indexOf(e)>=0)return n;return-1}function Gm(t,e,n){n?t.removeEventListener("animationend",e):t.addEventListener("animationend",e)}function $m(t,e,n,i){const r="animation"+e;if(null!=i){const e=t.style[r];if(e.length){const t=e.split(",");t[i]=n,n=t.join(",")}}t.style[r]=n}function Hm(t,e){return t.style["animation"+e]}class zm{constructor(t,e,n,i,r,s,o,a){this.element=t,this.keyframes=e,this.animationName=n,this._duration=i,this._delay=r,this._finalStyles=o,this._specialStyles=a,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this.currentSnapshot={},this._state=0,this.easing=s||"linear",this.totalTime=i+r,this._buildStyler()}onStart(t){this._onStartFns.push(t)}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}destroy(){this.init(),this._state>=4||(this._state=4,this._styler.destroy(),this._flushStartFns(),this._flushDoneFns(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}_flushDoneFns(){this._onDoneFns.forEach(t=>t()),this._onDoneFns=[]}_flushStartFns(){this._onStartFns.forEach(t=>t()),this._onStartFns=[]}finish(){this.init(),this._state>=3||(this._state=3,this._styler.finish(),this._flushStartFns(),this._specialStyles&&this._specialStyles.finish(),this._flushDoneFns())}setPosition(t){this._styler.setPosition(t)}getPosition(){return this._styler.getPosition()}hasStarted(){return this._state>=2}init(){this._state>=1||(this._state=1,this._styler.apply(),this._delay&&this._styler.pause())}play(){this.init(),this.hasStarted()||(this._flushStartFns(),this._state=2,this._specialStyles&&this._specialStyles.start()),this._styler.resume()}pause(){this.init(),this._styler.pause()}restart(){this.reset(),this.play()}reset(){this._styler.destroy(),this._buildStyler(),this._styler.apply()}_buildStyler(){this._styler=new jm(this.element,this.animationName,this._duration,this._delay,this.easing,"forwards",()=>this.finish())}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(t=>t()),e.length=0}beforeDestroy(){this.init();const t={};if(this.hasStarted()){const e=this._state>=3;Object.keys(this._finalStyles).forEach(n=>{"offset"!=n&&(t[n]=e?this._finalStyles[n]:Bp(this.element,n))})}this.currentSnapshot=t}}class Wm extends Qd{constructor(t,e){super(),this.element=t,this._startingStyles={},this.__initialized=!1,this._styles=_p(e)}init(){!this.__initialized&&this._startingStyles&&(this.__initialized=!0,Object.keys(this._styles).forEach(t=>{this._startingStyles[t]=this.element.style[t]}),super.init())}play(){this._startingStyles&&(this.init(),Object.keys(this._styles).forEach(t=>this.element.style.setProperty(t,this._styles[t])),super.play())}destroy(){this._startingStyles&&(Object.keys(this._startingStyles).forEach(t=>{const e=this._startingStyles[t];e?this.element.style.setProperty(t,e):this.element.style.removeProperty(t)}),this._startingStyles=null,super.destroy())}}class Ym{constructor(){this._count=0,this._head=document.querySelector("head"),this._warningIssued=!1}validateStyleProperty(t){return pp(t)}matchesElement(t,e){return mp(t,e)}containsElement(t,e){return fp(t,e)}query(t,e,n){return gp(t,e,n)}computeStyle(t,e,n){return window.getComputedStyle(t)[e]}buildKeyframeElement(t,e,n){n=n.map(t=>_p(t));let i=`@keyframes ${e} {\n`,r="";n.forEach(t=>{r=" ";const e=parseFloat(t.offset);i+=`${r}${100*e}% {\n`,r+=" ",Object.keys(t).forEach(e=>{const n=t[e];switch(e){case"offset":return;case"easing":return void(n&&(i+=`${r}animation-timing-function: ${n};\n`));default:return void(i+=`${r}${e}: ${n};\n`)}}),i+=r+"}\n"}),i+="}\n";const s=document.createElement("style");return s.innerHTML=i,s}animate(t,e,n,i,r,s=[],o){o&&this._notifyFaultyScrubber();const a=s.filter(t=>t instanceof zm),c={};Lp(n,i)&&a.forEach(t=>{let e=t.currentSnapshot;Object.keys(e).forEach(t=>c[t]=e[t])});const l=function(t){let e={};return t&&(Array.isArray(t)?t:[t]).forEach(t=>{Object.keys(t).forEach(n=>{"offset"!=n&&"easing"!=n&&(e[n]=t[n])})}),e}(e=Fp(t,e,c));if(0==n)return new Wm(t,l);const u="gen_css_kf_"+this._count++,h=this.buildKeyframeElement(t,u,e);document.querySelector("head").appendChild(h);const d=Lm(t,e),p=new zm(t,e,u,n,i,r,l,d);return p.onDestroy(()=>{var t;(t=h).parentNode.removeChild(t)}),p}_notifyFaultyScrubber(){this._warningIssued||(console.warn("@angular/animations: please load the web-animations.js polyfill to allow programmatic access...\n","  visit http://bit.ly/IWukam to learn more about using the web-animation-js polyfill."),this._warningIssued=!0)}}class Xm{constructor(t,e,n,i){this.element=t,this.keyframes=e,this.options=n,this._specialStyles=i,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this.time=0,this.parentPlayer=null,this.currentSnapshot={},this._duration=n.duration,this._delay=n.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const t=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,t,this.options),this._finalKeyframe=t.length?t[t.length-1]:{},this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_triggerWebAnimation(t,e,n){return t.animate(e,n)}onStart(t){this._onStartFns.push(t)}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(t=>t()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}setPosition(t){this.domPlayer.currentTime=t*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const t={};this.hasStarted()&&Object.keys(this._finalKeyframe).forEach(e=>{"offset"!=e&&(t[e]=this._finished?this._finalKeyframe[e]:Bp(this.element,e))}),this.currentSnapshot=t}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(t=>t()),e.length=0}}class Qm{constructor(){this._isNativeImpl=/\{\s*\[native\s+code\]\s*\}/.test(Zm().toString()),this._cssKeyframesDriver=new Ym}validateStyleProperty(t){return pp(t)}matchesElement(t,e){return mp(t,e)}containsElement(t,e){return fp(t,e)}query(t,e,n){return gp(t,e,n)}computeStyle(t,e,n){return window.getComputedStyle(t)[e]}overrideWebAnimationsSupport(t){this._isNativeImpl=t}animate(t,e,n,i,r,s=[],o){if(!o&&!this._isNativeImpl)return this._cssKeyframesDriver.animate(t,e,n,i,r,s);const a={duration:n,delay:i,fill:0==i?"both":"forwards"};r&&(a.easing=r);const c={},l=s.filter(t=>t instanceof Xm);Lp(n,i)&&l.forEach(t=>{let e=t.currentSnapshot;Object.keys(e).forEach(t=>c[t]=e[t])});const u=Lm(t,e=Fp(t,e=e.map(t=>kp(t,!1)),c));return new Xm(t,e,a,u)}}function Zm(){return"undefined"!=typeof window&&void 0!==window.document&&Element.prototype.animate||{}}let Jm=(()=>{class t extends Vd{constructor(t,e){super(),this._nextAnimationId=0,this._renderer=t.createRenderer(e.body,{id:"0",encapsulation:ce.None,styles:[],data:{animation:[]}})}build(t){const e=this._nextAnimationId.toString();this._nextAnimationId++;const n=Array.isArray(t)?Gd(t):t;return nf(this._renderer,null,e,"register",[n]),new tf(e,this._renderer)}}return t.\u0275fac=function(e){return new(e||t)(zt(Ha),zt(ou))},t.\u0275prov=lt({token:t,factory:t.\u0275fac}),t})();class tf extends class{}{constructor(t,e){super(),this._id=t,this._renderer=e}create(t,e){return new ef(this._id,t,e||{},this._renderer)}}class ef{constructor(t,e,n,i){this.id=t,this.element=e,this._renderer=i,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",n)}_listen(t,e){return this._renderer.listen(this.element,`@@${this.id}:${t}`,e)}_command(t,...e){return nf(this._renderer,this.element,this.id,t,e)}onDone(t){this._listen("done",t)}onStart(t){this._listen("start",t)}onDestroy(t){this._listen("destroy",t)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset")}setPosition(t){this._command("setPosition",t)}getPosition(){return 0}}function nf(t,e,n,i,r){return t.setProperty(e,`@@${n}:${i}`,r)}let rf=(()=>{class t{constructor(t,e,n){this.delegate=t,this.engine=e,this._zone=n,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),e.onRemovalComplete=(t,e)=>{e&&e.parentNode(t)&&e.removeChild(t.parentNode,t)}}createRenderer(t,e){const n=this.delegate.createRenderer(t,e);if(!(t&&e&&e.data&&e.data.animation)){let t=this._rendererCache.get(n);return t||(t=new sf("",n,this.engine),this._rendererCache.set(n,t)),t}const i=e.id,r=e.id+"-"+this._currentId;this._currentId++,this.engine.register(r,t);const s=e=>{Array.isArray(e)?e.forEach(s):this.engine.registerTrigger(i,r,t,e.name,e)};return e.data.animation.forEach(s),new of(this,r,n,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(t,e,n){t>=0&&t<this._microtaskId?this._zone.run(()=>e(n)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(t=>{const[e,n]=t;e(n)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([e,n]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return t.\u0275fac=function(e){return new(e||t)(zt(Ha),zt(Nm),zt(Rl))},t.\u0275prov=lt({token:t,factory:t.\u0275fac}),t})();class sf{constructor(t,e,n){this.namespaceId=t,this.delegate=e,this.engine=n,this.destroyNode=this.delegate.destroyNode?t=>e.destroyNode(t):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()}createElement(t,e){return this.delegate.createElement(t,e)}createComment(t){return this.delegate.createComment(t)}createText(t){return this.delegate.createText(t)}appendChild(t,e){this.delegate.appendChild(t,e),this.engine.onInsert(this.namespaceId,e,t,!1)}insertBefore(t,e,n){this.delegate.insertBefore(t,e,n),this.engine.onInsert(this.namespaceId,e,t,!0)}removeChild(t,e,n){this.engine.onRemove(this.namespaceId,e,this.delegate,n)}selectRootElement(t,e){return this.delegate.selectRootElement(t,e)}parentNode(t){return this.delegate.parentNode(t)}nextSibling(t){return this.delegate.nextSibling(t)}setAttribute(t,e,n,i){this.delegate.setAttribute(t,e,n,i)}removeAttribute(t,e,n){this.delegate.removeAttribute(t,e,n)}addClass(t,e){this.delegate.addClass(t,e)}removeClass(t,e){this.delegate.removeClass(t,e)}setStyle(t,e,n,i){this.delegate.setStyle(t,e,n,i)}removeStyle(t,e,n){this.delegate.removeStyle(t,e,n)}setProperty(t,e,n){"@"==e.charAt(0)&&"@.disabled"==e?this.disableAnimations(t,!!n):this.delegate.setProperty(t,e,n)}setValue(t,e){this.delegate.setValue(t,e)}listen(t,e,n){return this.delegate.listen(t,e,n)}disableAnimations(t,e){this.engine.disableAnimations(t,e)}}class of extends sf{constructor(t,e,n,i){super(e,n,i),this.factory=t,this.namespaceId=e}setProperty(t,e,n){"@"==e.charAt(0)?"."==e.charAt(1)&&"@.disabled"==e?this.disableAnimations(t,n=void 0===n||!!n):this.engine.process(this.namespaceId,t,e.substr(1),n):this.delegate.setProperty(t,e,n)}listen(t,e,n){if("@"==e.charAt(0)){const i=function(t){switch(t){case"body":return document.body;case"document":return document;case"window":return window;default:return t}}(t);let r=e.substr(1),s="";return"@"!=r.charAt(0)&&([r,s]=function(t){const e=t.indexOf(".");return[t.substring(0,e),t.substr(e+1)]}(r)),this.engine.listen(this.namespaceId,i,r,s,t=>{this.factory.scheduleListenerCallback(t._data||-1,n,t)})}return this.delegate.listen(t,e,n)}}let af=(()=>{class t extends Nm{constructor(t,e,n){super(t.body,e,n)}}return t.\u0275fac=function(e){return new(e||t)(zt(ou),zt(vp),zt(cm))},t.\u0275prov=lt({token:t,factory:t.\u0275fac}),t})();const cf=new Ft("AnimationModuleType"),lf=[{provide:vp,useFactory:function(){return"function"==typeof Zm()?new Qm:new Ym}},{provide:cf,useValue:"BrowserAnimations"},{provide:Vd,useClass:Jm},{provide:cm,useFactory:function(){return new lm}},{provide:Nm,useClass:af},{provide:Ha,useFactory:function(t,e,n){return new rf(t,e,n)},deps:[lh,Nm,Rl]}];let uf=(()=>{class t{}return t.\u0275mod=ge({type:t}),t.\u0275inj=ut({factory:function(e){return new(e||t)},providers:lf,imports:[Eh]}),t})();function hf(t,e){if(1&t&&Fo(0,"mat-pseudo-checkbox",3),2&t){const t=Wo();Po("state",t.selected?"checked":"unchecked")("disabled",t.disabled)}}const df=["*"],pf=new Qa("10.1.1"),mf=new Ft("mat-sanity-checks",{providedIn:"root",factory:function(){return!0}});let ff,gf=(()=>{class t{constructor(t,e,n){this._hasDoneGlobalChecks=!1,this._document=n,t._applyBodyHighContrastModeCssClasses(),this._sanityChecks=e,this._hasDoneGlobalChecks||(this._checkDoctypeIsDefined(),this._checkThemeIsPresent(),this._checkCdkVersionMatch(),this._hasDoneGlobalChecks=!0)}_getDocument(){const t=this._document||document;return"object"==typeof t&&t?t:null}_getWindow(){const t=this._getDocument(),e=(null==t?void 0:t.defaultView)||window;return"object"==typeof e&&e?e:null}_checksAreEnabled(){return Ai()&&!this._isTestEnv()}_isTestEnv(){const t=this._getWindow();return t&&(t.__karma__||t.jasmine)}_checkDoctypeIsDefined(){const t=this._checksAreEnabled()&&(!0===this._sanityChecks||this._sanityChecks.doctype),e=this._getDocument();t&&e&&!e.doctype&&console.warn("Current document does not have a doctype. This may cause some Angular Material components not to behave as expected.")}_checkThemeIsPresent(){const t=!this._checksAreEnabled()||!1===this._sanityChecks||!this._sanityChecks.theme,e=this._getDocument();if(t||!e||!e.body||"function"!=typeof getComputedStyle)return;const n=e.createElement("div");n.classList.add("mat-theme-loaded-marker"),e.body.appendChild(n);const i=getComputedStyle(n);i&&"none"!==i.display&&console.warn("Could not find Angular Material core theme. Most Material components may not work as expected. For more info refer to the theming guide: https://material.angular.io/guide/theming"),e.body.removeChild(n)}_checkCdkVersionMatch(){this._checksAreEnabled()&&(!0===this._sanityChecks||this._sanityChecks.version)&&pf.full!==Fd.full&&console.warn("The Angular Material version ("+pf.full+") does not match the Angular CDK version ("+Fd.full+").\nPlease ensure the versions of these two packages exactly match.")}}return t.\u0275mod=ge({type:t}),t.\u0275inj=ut({factory:function(e){return new(e||t)(zt(Dd),zt(mf,8),zt(ou,8))},imports:[[Ld],Ld]}),t})();function _f(t){return class extends t{constructor(...t){super(...t),this._disabled=!1}get disabled(){return this._disabled}set disabled(t){this._disabled=kh(t)}}}function yf(t,e){return class extends t{constructor(...t){super(...t),this.color=e}get color(){return this._color}set color(t){const n=t||e;n!==this._color&&(this._color&&this._elementRef.nativeElement.classList.remove("mat-"+this._color),n&&this._elementRef.nativeElement.classList.add("mat-"+n),this._color=n)}}}function vf(t){return class extends t{constructor(...t){super(...t),this._disableRipple=!1}get disableRipple(){return this._disableRipple}set disableRipple(t){this._disableRipple=kh(t)}}}function bf(t,e=0){return class extends t{constructor(...t){super(...t),this._tabIndex=e}get tabIndex(){return this.disabled?-1:this._tabIndex}set tabIndex(t){this._tabIndex=null!=t?Ch(t):e}}}function wf(t){return class extends t{constructor(...t){super(...t),this.errorState=!1,this.stateChanges=new E}updateErrorState(){const t=this.errorState,e=(this.errorStateMatcher||this._defaultErrorStateMatcher).isErrorState(this.ngControl?this.ngControl.control:null,this._parentFormGroup||this._parentForm);e!==t&&(this.errorState=e,this.stateChanges.next())}}}try{ff="undefined"!=typeof Intl}catch(uL){ff=!1}let Sf=(()=>{class t{isErrorState(t,e){return!!(t&&t.invalid&&(t.touched||e&&e.submitted))}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=lt({factory:function(){return new t},token:t,providedIn:"root"}),t})(),Ef=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=ye({type:t,selectors:[["","mat-line",""],["","matLine",""]],hostAttrs:[1,"mat-line"]}),t})();function kf(t,e,n){const i=t.nativeElement.classList;n?i.add(e):i.remove(e)}let Cf=(()=>{class t{}return t.\u0275mod=ge({type:t}),t.\u0275inj=ut({factory:function(e){return new(e||t)},imports:[[gf],gf]}),t})();class xf{constructor(t,e,n){this._renderer=t,this.element=e,this.config=n,this.state=3}fadeOut(){this._renderer.fadeOutRipple(this)}}const Tf={enterDuration:450,exitDuration:400},If=Qh({passive:!0}),Rf=["mousedown","touchstart"],Of=["mouseup","mouseleave","touchend","touchcancel"];class Af{constructor(t,e,n,i){this._target=t,this._ngZone=e,this._isPointerDown=!1,this._activeRipples=new Set,this._pointerUpEventsRegistered=!1,i.isBrowser&&(this._containerElement=Ih(n))}fadeInRipple(t,e,n={}){const i=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),r=Object.assign(Object.assign({},Tf),n.animation);n.centered&&(t=i.left+i.width/2,e=i.top+i.height/2);const s=n.radius||function(t,e,n){const i=Math.max(Math.abs(t-n.left),Math.abs(t-n.right)),r=Math.max(Math.abs(e-n.top),Math.abs(e-n.bottom));return Math.sqrt(i*i+r*r)}(t,e,i),o=t-i.left,a=e-i.top,c=r.enterDuration,l=document.createElement("div");l.classList.add("mat-ripple-element"),l.style.left=o-s+"px",l.style.top=a-s+"px",l.style.height=2*s+"px",l.style.width=2*s+"px",null!=n.color&&(l.style.backgroundColor=n.color),l.style.transitionDuration=c+"ms",this._containerElement.appendChild(l),window.getComputedStyle(l).getPropertyValue("opacity"),l.style.transform="scale(1)";const u=new xf(this,l,n);return u.state=0,this._activeRipples.add(u),n.persistent||(this._mostRecentTransientRipple=u),this._runTimeoutOutsideZone(()=>{const t=u===this._mostRecentTransientRipple;u.state=1,n.persistent||t&&this._isPointerDown||u.fadeOut()},c),u}fadeOutRipple(t){const e=this._activeRipples.delete(t);if(t===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),this._activeRipples.size||(this._containerRect=null),!e)return;const n=t.element,i=Object.assign(Object.assign({},Tf),t.config.animation);n.style.transitionDuration=i.exitDuration+"ms",n.style.opacity="0",t.state=2,this._runTimeoutOutsideZone(()=>{t.state=3,n.parentNode.removeChild(n)},i.exitDuration)}fadeOutAll(){this._activeRipples.forEach(t=>t.fadeOut())}setupTriggerEvents(t){const e=Ih(t);e&&e!==this._triggerElement&&(this._removeTriggerEvents(),this._triggerElement=e,this._registerEvents(Rf))}handleEvent(t){"mousedown"===t.type?this._onMousedown(t):"touchstart"===t.type?this._onTouchStart(t):this._onPointerUp(),this._pointerUpEventsRegistered||(this._registerEvents(Of),this._pointerUpEventsRegistered=!0)}_onMousedown(t){const e=xd(t),n=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+800;this._target.rippleDisabled||e||n||(this._isPointerDown=!0,this.fadeInRipple(t.clientX,t.clientY,this._target.rippleConfig))}_onTouchStart(t){if(!this._target.rippleDisabled){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;const e=t.changedTouches;for(let t=0;t<e.length;t++)this.fadeInRipple(e[t].clientX,e[t].clientY,this._target.rippleConfig)}}_onPointerUp(){this._isPointerDown&&(this._isPointerDown=!1,this._activeRipples.forEach(t=>{!t.config.persistent&&(1===t.state||t.config.terminateOnPointerUp&&0===t.state)&&t.fadeOut()}))}_runTimeoutOutsideZone(t,e=0){this._ngZone.runOutsideAngular(()=>setTimeout(t,e))}_registerEvents(t){this._ngZone.runOutsideAngular(()=>{t.forEach(t=>{this._triggerElement.addEventListener(t,this,If)})})}_removeTriggerEvents(){this._triggerElement&&(Rf.forEach(t=>{this._triggerElement.removeEventListener(t,this,If)}),this._pointerUpEventsRegistered&&Of.forEach(t=>{this._triggerElement.removeEventListener(t,this,If)}))}}const Df=new Ft("mat-ripple-global-options");let Pf=(()=>{class t{constructor(t,e,n,i,r){this._elementRef=t,this._animationMode=r,this.radius=0,this._disabled=!1,this._isInitialized=!1,this._globalOptions=i||{},this._rippleRenderer=new Af(this,e,t,n)}get disabled(){return this._disabled}set disabled(t){this._disabled=t,this._setupTriggerEventsIfEnabled()}get trigger(){return this._trigger||this._elementRef.nativeElement}set trigger(t){this._trigger=t,this._setupTriggerEventsIfEnabled()}ngOnInit(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}ngOnDestroy(){this._rippleRenderer._removeTriggerEvents()}fadeOutAll(){this._rippleRenderer.fadeOutAll()}get rippleConfig(){return{centered:this.centered,radius:this.radius,color:this.color,animation:Object.assign(Object.assign(Object.assign({},this._globalOptions.animation),"NoopAnimations"===this._animationMode?{enterDuration:0,exitDuration:0}:{}),this.animation),terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}get rippleDisabled(){return this.disabled||!!this._globalOptions.disabled}_setupTriggerEventsIfEnabled(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}launch(t,e=0,n){return"number"==typeof t?this._rippleRenderer.fadeInRipple(t,e,Object.assign(Object.assign({},this.rippleConfig),n)):this._rippleRenderer.fadeInRipple(0,0,Object.assign(Object.assign({},this.rippleConfig),t))}}return t.\u0275fac=function(e){return new(e||t)(Ao(Ga),Ao(Rl),Ao(Gh),Ao(Df,8),Ao(cf,8))},t.\u0275dir=ye({type:t,selectors:[["","mat-ripple",""],["","matRipple",""]],hostAttrs:[1,"mat-ripple"],hostVars:2,hostBindings:function(t,e){2&t&&oa("mat-ripple-unbounded",e.unbounded)},inputs:{radius:["matRippleRadius","radius"],disabled:["matRippleDisabled","disabled"],trigger:["matRippleTrigger","trigger"],color:["matRippleColor","color"],unbounded:["matRippleUnbounded","unbounded"],centered:["matRippleCentered","centered"],animation:["matRippleAnimation","animation"]},exportAs:["matRipple"]}),t})(),Mf=(()=>{class t{}return t.\u0275mod=ge({type:t}),t.\u0275inj=ut({factory:function(e){return new(e||t)},imports:[[gf,$h],gf]}),t})(),Nf=(()=>{class t{constructor(t){this._animationMode=t,this.state="unchecked",this.disabled=!1}}return t.\u0275fac=function(e){return new(e||t)(Ao(cf,8))},t.\u0275cmp=de({type:t,selectors:[["mat-pseudo-checkbox"]],hostAttrs:[1,"mat-pseudo-checkbox"],hostVars:8,hostBindings:function(t,e){2&t&&oa("mat-pseudo-checkbox-indeterminate","indeterminate"===e.state)("mat-pseudo-checkbox-checked","checked"===e.state)("mat-pseudo-checkbox-disabled",e.disabled)("_mat-animation-noopable","NoopAnimations"===e._animationMode)},inputs:{state:"state",disabled:"disabled"},decls:0,vars:0,template:function(t,e){},styles:['.mat-pseudo-checkbox{width:16px;height:16px;border:2px solid;border-radius:2px;cursor:pointer;display:inline-block;vertical-align:middle;box-sizing:border-box;position:relative;flex-shrink:0;transition:border-color 90ms cubic-bezier(0, 0, 0.2, 0.1),background-color 90ms cubic-bezier(0, 0, 0.2, 0.1)}.mat-pseudo-checkbox::after{position:absolute;opacity:0;content:"";border-bottom:2px solid currentColor;transition:opacity 90ms cubic-bezier(0, 0, 0.2, 0.1)}.mat-pseudo-checkbox.mat-pseudo-checkbox-checked,.mat-pseudo-checkbox.mat-pseudo-checkbox-indeterminate{border-color:transparent}._mat-animation-noopable.mat-pseudo-checkbox{transition:none;animation:none}._mat-animation-noopable.mat-pseudo-checkbox::after{transition:none}.mat-pseudo-checkbox-disabled{cursor:default}.mat-pseudo-checkbox-indeterminate::after{top:5px;left:1px;width:10px;opacity:1;border-radius:2px}.mat-pseudo-checkbox-checked::after{top:2.4px;left:1px;width:8px;height:3px;border-left:2px solid currentColor;transform:rotate(-45deg);opacity:1;box-sizing:content-box}\n'],encapsulation:2,changeDetection:0}),t})(),Lf=(()=>{class t{}return t.\u0275mod=ge({type:t}),t.\u0275inj=ut({factory:function(e){return new(e||t)}}),t})();const Ff=new Ft("MatOptgroup");let Uf=0;class Bf{constructor(t,e=!1){this.source=t,this.isUserInput=e}}const jf=new Ft("MAT_OPTION_PARENT_COMPONENT");let Vf=(()=>{class t{constructor(t,e,n,i){this._element=t,this._changeDetectorRef=e,this._parent=n,this.group=i,this._selected=!1,this._active=!1,this._disabled=!1,this._mostRecentViewValue="",this.id="mat-option-"+Uf++,this.onSelectionChange=new jc,this._stateChanges=new E}get multiple(){return this._parent&&this._parent.multiple}get selected(){return this._selected}get disabled(){return this.group&&this.group.disabled||this._disabled}set disabled(t){this._disabled=kh(t)}get disableRipple(){return this._parent&&this._parent.disableRipple}get active(){return this._active}get viewValue(){return(this._getHostElement().textContent||"").trim()}select(){this._selected||(this._selected=!0,this._changeDetectorRef.markForCheck(),this._emitSelectionChangeEvent())}deselect(){this._selected&&(this._selected=!1,this._changeDetectorRef.markForCheck(),this._emitSelectionChangeEvent())}focus(t,e){const n=this._getHostElement();"function"==typeof n.focus&&n.focus(e)}setActiveStyles(){this._active||(this._active=!0,this._changeDetectorRef.markForCheck())}setInactiveStyles(){this._active&&(this._active=!1,this._changeDetectorRef.markForCheck())}getLabel(){return this.viewValue}_handleKeydown(t){13!==t.keyCode&&32!==t.keyCode||ed(t)||(this._selectViaInteraction(),t.preventDefault())}_selectViaInteraction(){this.disabled||(this._selected=!this.multiple||!this._selected,this._changeDetectorRef.markForCheck(),this._emitSelectionChangeEvent(!0))}_getAriaSelected(){return this.selected||!this.multiple&&null}_getTabIndex(){return this.disabled?"-1":"0"}_getHostElement(){return this._element.nativeElement}ngAfterViewChecked(){if(this._selected){const t=this.viewValue;t!==this._mostRecentViewValue&&(this._mostRecentViewValue=t,this._stateChanges.next())}}ngOnDestroy(){this._stateChanges.complete()}_emitSelectionChangeEvent(t=!1){this.onSelectionChange.emit(new Bf(this,t))}}return t.\u0275fac=function(e){return new(e||t)(Ao(Ga),Ao(Zs),Ao(jf,8),Ao(Ff,8))},t.\u0275cmp=de({type:t,selectors:[["mat-option"]],hostAttrs:["role","option",1,"mat-option","mat-focus-indicator"],hostVars:12,hostBindings:function(t,e){1&t&&qo("click",(function(){return e._selectViaInteraction()}))("keydown",(function(t){return e._handleKeydown(t)})),2&t&&(Ca("id",e.id),To("tabindex",e._getTabIndex())("aria-selected",e._getAriaSelected())("aria-disabled",e.disabled.toString()),oa("mat-selected",e.selected)("mat-option-multiple",e.multiple)("mat-active",e.active)("mat-option-disabled",e.disabled))},inputs:{id:"id",disabled:"disabled",value:"value"},outputs:{onSelectionChange:"onSelectionChange"},exportAs:["matOption"],ngContentSelectors:df,decls:4,vars:3,consts:[["class","mat-option-pseudo-checkbox",3,"state","disabled",4,"ngIf"],[1,"mat-option-text"],["mat-ripple","",1,"mat-option-ripple",3,"matRippleTrigger","matRippleDisabled"],[1,"mat-option-pseudo-checkbox",3,"state","disabled"]],template:function(t,e){1&t&&(Xo(),Ro(0,hf,1,2,"mat-pseudo-checkbox",0),No(1,"span",1),Qo(2),Lo(),Fo(3,"div",2)),2&t&&(Po("ngIf",e.multiple),kr(3),Po("matRippleTrigger",e._getHostElement())("matRippleDisabled",e.disabled||e.disableRipple))},directives:[Au,Pf,Nf],styles:[".mat-option{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block;line-height:48px;height:48px;padding:0 16px;text-align:left;text-decoration:none;max-width:100%;position:relative;cursor:pointer;outline:none;display:flex;flex-direction:row;max-width:100%;box-sizing:border-box;align-items:center;-webkit-tap-highlight-color:transparent}.mat-option[disabled]{cursor:default}[dir=rtl] .mat-option{text-align:right}.mat-option .mat-icon{margin-right:16px;vertical-align:middle}.mat-option .mat-icon svg{vertical-align:top}[dir=rtl] .mat-option .mat-icon{margin-left:16px;margin-right:0}.mat-option[aria-disabled=true]{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:default}.mat-optgroup .mat-option:not(.mat-option-multiple){padding-left:32px}[dir=rtl] .mat-optgroup .mat-option:not(.mat-option-multiple){padding-left:16px;padding-right:32px}.cdk-high-contrast-active .mat-option{margin:0 1px}.cdk-high-contrast-active .mat-option.mat-active{border:solid 1px currentColor;margin:0}.mat-option-text{display:inline-block;flex-grow:1;overflow:hidden;text-overflow:ellipsis}.mat-option .mat-option-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.cdk-high-contrast-active .mat-option .mat-option-ripple{opacity:.5}.mat-option-pseudo-checkbox{margin-right:8px}[dir=rtl] .mat-option-pseudo-checkbox{margin-left:8px;margin-right:0}\n"],encapsulation:2,changeDetection:0}),t})();function Kf(t,e,n){if(n.length){let i=e.toArray(),r=n.toArray(),s=0;for(let e=0;e<t+1;e++)i[e].group&&i[e].group===r[s]&&s++;return s}return 0}let qf=(()=>{class t{}return t.\u0275mod=ge({type:t}),t.\u0275inj=ut({factory:function(e){return new(e||t)},imports:[[Mf,$u,Lf]]}),t})();const Gf=new Ft("mat-label-global-options");function $f(t,e,n,r){return i(n)&&(r=n,n=void 0),r?$f(t,e,n).pipe(N(t=>c(t)?r(...t):r(t))):new y(i=>{!function t(e,n,i,r,s){let o;if(function(t){return t&&"function"==typeof t.addEventListener&&"function"==typeof t.removeEventListener}(e)){const t=e;e.addEventListener(n,i,s),o=()=>t.removeEventListener(n,i,s)}else if(function(t){return t&&"function"==typeof t.on&&"function"==typeof t.off}(e)){const t=e;e.on(n,i),o=()=>t.off(n,i)}else if(function(t){return t&&"function"==typeof t.addListener&&"function"==typeof t.removeListener}(e)){const t=e;e.addListener(n,i),o=()=>t.removeListener(n,i)}else{if(!e||!e.length)throw new TypeError("Invalid event target");for(let o=0,a=e.length;o<a;o++)t(e[o],n,i,r,s)}r.add(o)}(t,e,(function(t){i.next(arguments.length>1?Array.prototype.slice.call(arguments):t)}),i,n)})}function Hf(t){return e=>e.lift(new zf(t))}class zf{constructor(t){this.notifier=t}call(t,e){const n=new Wf(t),i=P(n,this.notifier);return i&&!n.seenValue?(n.add(i),e.subscribe(n)):n}}class Wf extends M{constructor(t){super(t),this.seenValue=!1}notifyNext(t,e,n,i,r){this.seenValue=!0,this.complete()}notifyComplete(){}}const Yf=["underline"],Xf=["connectionContainer"],Qf=["inputContainer"],Zf=["label"];function Jf(t,e){1&t&&(Uo(0),No(1,"div",14),Fo(2,"div",15),Fo(3,"div",16),Fo(4,"div",17),Lo(),No(5,"div",18),Fo(6,"div",15),Fo(7,"div",16),Fo(8,"div",17),Lo(),Bo())}function tg(t,e){1&t&&(No(0,"div",19),Qo(1,1),Lo())}function eg(t,e){if(1&t&&(Uo(0),Qo(1,2),No(2,"span"),ya(3),Lo(),Bo()),2&t){const t=Wo(2);kr(3),va(t._control.placeholder)}}function ng(t,e){1&t&&Qo(0,3,["*ngSwitchCase","true"])}function ig(t,e){1&t&&(No(0,"span",23),ya(1," *"),Lo())}function rg(t,e){if(1&t){const t=jo();No(0,"label",20,21),qo("cdkObserveContent",(function(){return nn(t),Wo().updateOutlineGap()})),Ro(2,eg,4,1,"ng-container",12),Ro(3,ng,1,0,"ng-content",12),Ro(4,ig,2,0,"span",22),Lo()}if(2&t){const t=Wo();oa("mat-empty",t._control.empty&&!t._shouldAlwaysFloat)("mat-form-field-empty",t._control.empty&&!t._shouldAlwaysFloat)("mat-accent","accent"==t.color)("mat-warn","warn"==t.color),Po("cdkObserveContentDisabled","outline"!=t.appearance)("id",t._labelId)("ngSwitch",t._hasLabel()),To("for",t._control.id)("aria-owns",t._control.id),kr(2),Po("ngSwitchCase",!1),kr(1),Po("ngSwitchCase",!0),kr(1),Po("ngIf",!t.hideRequiredMarker&&t._control.required&&!t._control.disabled)}}function sg(t,e){1&t&&(No(0,"div",24),Qo(1,4),Lo())}function og(t,e){if(1&t&&(No(0,"div",25,26),Fo(2,"span",27),Lo()),2&t){const t=Wo();kr(2),oa("mat-accent","accent"==t.color)("mat-warn","warn"==t.color)}}function ag(t,e){1&t&&(No(0,"div"),Qo(1,5),Lo()),2&t&&Po("@transitionMessages",Wo()._subscriptAnimationState)}function cg(t,e){if(1&t&&(No(0,"div",31),ya(1),Lo()),2&t){const t=Wo(2);Po("id",t._hintLabelId),kr(1),va(t.hintLabel)}}function lg(t,e){if(1&t&&(No(0,"div",28),Ro(1,cg,2,2,"div",29),Qo(2,6),Fo(3,"div",30),Qo(4,7),Lo()),2&t){const t=Wo();Po("@transitionMessages",t._subscriptAnimationState),kr(1),Po("ngIf",t.hintLabel)}}const ug=["*",[["","matPrefix",""]],[["mat-placeholder"]],[["mat-label"]],[["","matSuffix",""]],[["mat-error"]],[["mat-hint",3,"align","end"]],[["mat-hint","align","end"]]],hg=["*","[matPrefix]","mat-placeholder","mat-label","[matSuffix]","mat-error","mat-hint:not([align='end'])","mat-hint[align='end']"];let dg=0;const pg=new Ft("MatError");let mg=(()=>{class t{constructor(){this.id="mat-error-"+dg++}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=ye({type:t,selectors:[["mat-error"]],hostAttrs:["role","alert",1,"mat-error"],hostVars:1,hostBindings:function(t,e){2&t&&To("id",e.id)},inputs:{id:"id"},features:[ja([{provide:pg,useExisting:t}])]}),t})();const fg={transitionMessages:Kd("transitionMessages",[Hd("enter",$d({opacity:1,transform:"translateY(0%)"})),zd("void => enter",[$d({opacity:0,transform:"translateY(-100%)"}),qd("300ms cubic-bezier(0.55, 0, 0.55, 0.2)")])])};let gg=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=ye({type:t}),t})();function _g(t){return Error(`A hint was already declared for 'align="${t}"'.`)}const yg=new Ft("MatHint");let vg=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=ye({type:t,selectors:[["mat-label"]]}),t})(),bg=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=ye({type:t,selectors:[["mat-placeholder"]]}),t})();const wg=new Ft("MatPrefix"),Sg=new Ft("MatSuffix");let Eg=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=ye({type:t,selectors:[["","matSuffix",""]],features:[ja([{provide:Sg,useExisting:t}])]}),t})(),kg=0;class Cg{constructor(t){this._elementRef=t}}const xg=yf(Cg,"primary"),Tg=new Ft("MAT_FORM_FIELD_DEFAULT_OPTIONS"),Ig=new Ft("MatFormField");let Rg=(()=>{class t extends xg{constructor(t,e,n,i,r,s,o,a){super(t),this._elementRef=t,this._changeDetectorRef=e,this._dir=i,this._defaults=r,this._platform=s,this._ngZone=o,this._outlineGapCalculationNeededImmediately=!1,this._outlineGapCalculationNeededOnStable=!1,this._destroyed=new E,this._showAlwaysAnimate=!1,this._subscriptAnimationState="",this._hintLabel="",this._hintLabelId="mat-hint-"+kg++,this._labelId="mat-form-field-label-"+kg++,this._labelOptions=n||{},this.floatLabel=this._getDefaultFloatLabelState(),this._animationsEnabled="NoopAnimations"!==a,this.appearance=r&&r.appearance?r.appearance:"legacy",this._hideRequiredMarker=!(!r||null==r.hideRequiredMarker)&&r.hideRequiredMarker}get appearance(){return this._appearance}set appearance(t){const e=this._appearance;this._appearance=t||this._defaults&&this._defaults.appearance||"legacy","outline"===this._appearance&&e!==t&&(this._outlineGapCalculationNeededOnStable=!0)}get hideRequiredMarker(){return this._hideRequiredMarker}set hideRequiredMarker(t){this._hideRequiredMarker=kh(t)}get _shouldAlwaysFloat(){return"always"===this.floatLabel&&!this._showAlwaysAnimate}get _canLabelFloat(){return"never"!==this.floatLabel}get hintLabel(){return this._hintLabel}set hintLabel(t){this._hintLabel=t,this._processHints()}get floatLabel(){return"legacy"!==this.appearance&&"never"===this._floatLabel?"auto":this._floatLabel}set floatLabel(t){t!==this._floatLabel&&(this._floatLabel=t||this._getDefaultFloatLabelState(),this._changeDetectorRef.markForCheck())}get _control(){return this._explicitFormFieldControl||this._controlNonStatic||this._controlStatic}set _control(t){this._explicitFormFieldControl=t}get _labelChild(){return this._labelChildNonStatic||this._labelChildStatic}getConnectedOverlayOrigin(){return this._connectionContainerRef||this._elementRef}ngAfterContentInit(){this._validateControlChild();const t=this._control;t.controlType&&this._elementRef.nativeElement.classList.add("mat-form-field-type-"+t.controlType),t.stateChanges.pipe(jd(null)).subscribe(()=>{this._validatePlaceholders(),this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),t.ngControl&&t.ngControl.valueChanges&&t.ngControl.valueChanges.pipe(Hf(this._destroyed)).subscribe(()=>this._changeDetectorRef.markForCheck()),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.asObservable().pipe(Hf(this._destroyed)).subscribe(()=>{this._outlineGapCalculationNeededOnStable&&this.updateOutlineGap()})}),$(this._prefixChildren.changes,this._suffixChildren.changes).subscribe(()=>{this._outlineGapCalculationNeededOnStable=!0,this._changeDetectorRef.markForCheck()}),this._hintChildren.changes.pipe(jd(null)).subscribe(()=>{this._processHints(),this._changeDetectorRef.markForCheck()}),this._errorChildren.changes.pipe(jd(null)).subscribe(()=>{this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),this._dir&&this._dir.change.pipe(Hf(this._destroyed)).subscribe(()=>{"function"==typeof requestAnimationFrame?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>this.updateOutlineGap())}):this.updateOutlineGap()})}ngAfterContentChecked(){this._validateControlChild(),this._outlineGapCalculationNeededImmediately&&this.updateOutlineGap()}ngAfterViewInit(){this._subscriptAnimationState="enter",this._changeDetectorRef.detectChanges()}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete()}_shouldForward(t){const e=this._control?this._control.ngControl:null;return e&&e[t]}_hasPlaceholder(){return!!(this._control&&this._control.placeholder||this._placeholderChild)}_hasLabel(){return!!this._labelChild}_shouldLabelFloat(){return this._canLabelFloat&&(this._control&&this._control.shouldLabelFloat||this._shouldAlwaysFloat)}_hideControlPlaceholder(){return"legacy"===this.appearance&&!this._hasLabel()||this._hasLabel()&&!this._shouldLabelFloat()}_hasFloatingLabel(){return this._hasLabel()||"legacy"===this.appearance&&this._hasPlaceholder()}_getDisplayedMessages(){return this._errorChildren&&this._errorChildren.length>0&&this._control.errorState?"error":"hint"}_animateAndLockLabel(){this._hasFloatingLabel()&&this._canLabelFloat&&(this._animationsEnabled&&this._label&&(this._showAlwaysAnimate=!0,$f(this._label.nativeElement,"transitionend").pipe(dd(1)).subscribe(()=>{this._showAlwaysAnimate=!1})),this.floatLabel="always",this._changeDetectorRef.markForCheck())}_validatePlaceholders(){if(this._control.placeholder&&this._placeholderChild)throw Error("Placeholder attribute and child element were both specified.")}_processHints(){this._validateHints(),this._syncDescribedByIds()}_validateHints(){if(this._hintChildren){let t,e;this._hintChildren.forEach(n=>{if("start"===n.align){if(t||this.hintLabel)throw _g("start");t=n}else if("end"===n.align){if(e)throw _g("end");e=n}})}}_getDefaultFloatLabelState(){return this._defaults&&this._defaults.floatLabel||this._labelOptions.float||"auto"}_syncDescribedByIds(){if(this._control){let t=[];if("hint"===this._getDisplayedMessages()){const e=this._hintChildren?this._hintChildren.find(t=>"start"===t.align):null,n=this._hintChildren?this._hintChildren.find(t=>"end"===t.align):null;e?t.push(e.id):this._hintLabel&&t.push(this._hintLabelId),n&&t.push(n.id)}else this._errorChildren&&(t=this._errorChildren.map(t=>t.id));this._control.setDescribedByIds(t)}}_validateControlChild(){if(!this._control)throw Error("mat-form-field must contain a MatFormFieldControl.")}updateOutlineGap(){const t=this._label?this._label.nativeElement:null;if("outline"!==this.appearance||!t||!t.children.length||!t.textContent.trim())return;if(!this._platform.isBrowser)return;if(!this._isAttachedToDOM())return void(this._outlineGapCalculationNeededImmediately=!0);let e=0,n=0;const i=this._connectionContainerRef.nativeElement,r=i.querySelectorAll(".mat-form-field-outline-start"),s=i.querySelectorAll(".mat-form-field-outline-gap");if(this._label&&this._label.nativeElement.children.length){const r=i.getBoundingClientRect();if(0===r.width&&0===r.height)return this._outlineGapCalculationNeededOnStable=!0,void(this._outlineGapCalculationNeededImmediately=!1);const s=this._getStartEnd(r),o=t.children,a=this._getStartEnd(o[0].getBoundingClientRect());let c=0;for(let t=0;t<o.length;t++)c+=o[t].offsetWidth;e=Math.abs(a-s)-5,n=c>0?.75*c+10:0}for(let o=0;o<r.length;o++)r[o].style.width=e+"px";for(let o=0;o<s.length;o++)s[o].style.width=n+"px";this._outlineGapCalculationNeededOnStable=this._outlineGapCalculationNeededImmediately=!1}_getStartEnd(t){return this._dir&&"rtl"===this._dir.value?t.right:t.left}_isAttachedToDOM(){const t=this._elementRef.nativeElement;if(t.getRootNode){const e=t.getRootNode();return e&&e!==t}return document.documentElement.contains(t)}}return t.\u0275fac=function(e){return new(e||t)(Ao(Ga),Ao(Zs),Ao(Gf,8),Ao(Nd,8),Ao(Tg,8),Ao(Gh),Ao(Rl),Ao(cf,8))},t.\u0275cmp=de({type:t,selectors:[["mat-form-field"]],contentQueries:function(t,e,n){var i;1&t&&(el(n,gg,!0),nl(n,gg,!0),el(n,vg,!0),nl(n,vg,!0),el(n,bg,!0),el(n,pg,!0),el(n,yg,!0),el(n,wg,!0),el(n,Sg,!0)),2&t&&(Qc(i=rl())&&(e._controlNonStatic=i.first),Qc(i=rl())&&(e._controlStatic=i.first),Qc(i=rl())&&(e._labelChildNonStatic=i.first),Qc(i=rl())&&(e._labelChildStatic=i.first),Qc(i=rl())&&(e._placeholderChild=i.first),Qc(i=rl())&&(e._errorChildren=i),Qc(i=rl())&&(e._hintChildren=i),Qc(i=rl())&&(e._prefixChildren=i),Qc(i=rl())&&(e._suffixChildren=i))},viewQuery:function(t,e){var n;1&t&&(Jc(Yf,!0),Zc(Xf,!0),Jc(Qf,!0),Jc(Zf,!0)),2&t&&(Qc(n=rl())&&(e.underlineRef=n.first),Qc(n=rl())&&(e._connectionContainerRef=n.first),Qc(n=rl())&&(e._inputContainerRef=n.first),Qc(n=rl())&&(e._label=n.first))},hostAttrs:[1,"mat-form-field"],hostVars:44,hostBindings:function(t,e){2&t&&oa("mat-form-field-appearance-standard","standard"==e.appearance)("mat-form-field-appearance-fill","fill"==e.appearance)("mat-form-field-appearance-outline","outline"==e.appearance)("mat-form-field-appearance-legacy","legacy"==e.appearance)("mat-form-field-invalid",e._control.errorState)("mat-form-field-can-float",e._canLabelFloat)("mat-form-field-should-float",e._shouldLabelFloat())("mat-form-field-has-label",e._hasFloatingLabel())("mat-form-field-hide-placeholder",e._hideControlPlaceholder())("mat-form-field-disabled",e._control.disabled)("mat-form-field-autofilled",e._control.autofilled)("mat-focused",e._control.focused)("mat-accent","accent"==e.color)("mat-warn","warn"==e.color)("ng-untouched",e._shouldForward("untouched"))("ng-touched",e._shouldForward("touched"))("ng-pristine",e._shouldForward("pristine"))("ng-dirty",e._shouldForward("dirty"))("ng-valid",e._shouldForward("valid"))("ng-invalid",e._shouldForward("invalid"))("ng-pending",e._shouldForward("pending"))("_mat-animation-noopable",!e._animationsEnabled)},inputs:{color:"color",floatLabel:"floatLabel",appearance:"appearance",hideRequiredMarker:"hideRequiredMarker",hintLabel:"hintLabel"},exportAs:["matFormField"],features:[ja([{provide:Ig,useExisting:t}]),Ia],ngContentSelectors:hg,decls:15,vars:8,consts:[[1,"mat-form-field-wrapper"],[1,"mat-form-field-flex",3,"click"],["connectionContainer",""],[4,"ngIf"],["class","mat-form-field-prefix",4,"ngIf"],[1,"mat-form-field-infix"],["inputContainer",""],[1,"mat-form-field-label-wrapper"],["class","mat-form-field-label",3,"cdkObserveContentDisabled","id","mat-empty","mat-form-field-empty","mat-accent","mat-warn","ngSwitch","cdkObserveContent",4,"ngIf"],["class","mat-form-field-suffix",4,"ngIf"],["class","mat-form-field-underline",4,"ngIf"],[1,"mat-form-field-subscript-wrapper",3,"ngSwitch"],[4,"ngSwitchCase"],["class","mat-form-field-hint-wrapper",4,"ngSwitchCase"],[1,"mat-form-field-outline"],[1,"mat-form-field-outline-start"],[1,"mat-form-field-outline-gap"],[1,"mat-form-field-outline-end"],[1,"mat-form-field-outline","mat-form-field-outline-thick"],[1,"mat-form-field-prefix"],[1,"mat-form-field-label",3,"cdkObserveContentDisabled","id","ngSwitch","cdkObserveContent"],["label",""],["class","mat-placeholder-required mat-form-field-required-marker","aria-hidden","true",4,"ngIf"],["aria-hidden","true",1,"mat-placeholder-required","mat-form-field-required-marker"],[1,"mat-form-field-suffix"],[1,"mat-form-field-underline"],["underline",""],[1,"mat-form-field-ripple"],[1,"mat-form-field-hint-wrapper"],["class","mat-hint",3,"id",4,"ngIf"],[1,"mat-form-field-hint-spacer"],[1,"mat-hint",3,"id"]],template:function(t,e){1&t&&(Xo(ug),No(0,"div",0),No(1,"div",1,2),qo("click",(function(t){return e._control.onContainerClick&&e._control.onContainerClick(t)})),Ro(3,Jf,9,0,"ng-container",3),Ro(4,tg,2,0,"div",4),No(5,"div",5,6),Qo(7),No(8,"span",7),Ro(9,rg,5,16,"label",8),Lo(),Lo(),Ro(10,sg,2,0,"div",9),Lo(),Ro(11,og,3,4,"div",10),No(12,"div",11),Ro(13,ag,2,1,"div",12),Ro(14,lg,5,2,"div",13),Lo(),Lo()),2&t&&(kr(3),Po("ngIf","outline"==e.appearance),kr(1),Po("ngIf",e._prefixChildren.length),kr(5),Po("ngIf",e._hasFloatingLabel()),kr(1),Po("ngIf",e._suffixChildren.length),kr(1),Po("ngIf","outline"!=e.appearance),kr(1),Po("ngSwitch",e._getDisplayedMessages()),kr(1),Po("ngSwitchCase","error"),kr(1),Po("ngSwitchCase","hint"))},directives:[Au,Nu,Lu,Vh],styles:[".mat-form-field{display:inline-block;position:relative;text-align:left}[dir=rtl] .mat-form-field{text-align:right}.mat-form-field-wrapper{position:relative}.mat-form-field-flex{display:inline-flex;align-items:baseline;box-sizing:border-box;width:100%}.mat-form-field-prefix,.mat-form-field-suffix{white-space:nowrap;flex:none;position:relative}.mat-form-field-infix{display:block;position:relative;flex:auto;min-width:0;width:180px}.cdk-high-contrast-active .mat-form-field-infix{border-image:linear-gradient(transparent, transparent)}.mat-form-field-label-wrapper{position:absolute;left:0;box-sizing:content-box;width:100%;height:100%;overflow:hidden;pointer-events:none}[dir=rtl] .mat-form-field-label-wrapper{left:auto;right:0}.mat-form-field-label{position:absolute;left:0;font:inherit;pointer-events:none;width:100%;white-space:nowrap;text-overflow:ellipsis;overflow:hidden;transform-origin:0 0;transition:transform 400ms cubic-bezier(0.25, 0.8, 0.25, 1),color 400ms cubic-bezier(0.25, 0.8, 0.25, 1),width 400ms cubic-bezier(0.25, 0.8, 0.25, 1);display:none}[dir=rtl] .mat-form-field-label{transform-origin:100% 0;left:auto;right:0}.mat-form-field-empty.mat-form-field-label,.mat-form-field-can-float.mat-form-field-should-float .mat-form-field-label{display:block}.mat-form-field-autofill-control:-webkit-autofill+.mat-form-field-label-wrapper .mat-form-field-label{display:none}.mat-form-field-can-float .mat-form-field-autofill-control:-webkit-autofill+.mat-form-field-label-wrapper .mat-form-field-label{display:block;transition:none}.mat-input-server:focus+.mat-form-field-label-wrapper .mat-form-field-label,.mat-input-server[placeholder]:not(:placeholder-shown)+.mat-form-field-label-wrapper .mat-form-field-label{display:none}.mat-form-field-can-float .mat-input-server:focus+.mat-form-field-label-wrapper .mat-form-field-label,.mat-form-field-can-float .mat-input-server[placeholder]:not(:placeholder-shown)+.mat-form-field-label-wrapper .mat-form-field-label{display:block}.mat-form-field-label:not(.mat-form-field-empty){transition:none}.mat-form-field-underline{position:absolute;width:100%;pointer-events:none;transform:scale3d(1, 1.0001, 1)}.mat-form-field-ripple{position:absolute;left:0;width:100%;transform-origin:50%;transform:scaleX(0.5);opacity:0;transition:background-color 300ms cubic-bezier(0.55, 0, 0.55, 0.2)}.mat-form-field.mat-focused .mat-form-field-ripple,.mat-form-field.mat-form-field-invalid .mat-form-field-ripple{opacity:1;transform:scaleX(1);transition:transform 300ms cubic-bezier(0.25, 0.8, 0.25, 1),opacity 100ms cubic-bezier(0.25, 0.8, 0.25, 1),background-color 300ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-subscript-wrapper{position:absolute;box-sizing:border-box;width:100%;overflow:hidden}.mat-form-field-subscript-wrapper .mat-icon,.mat-form-field-label-wrapper .mat-icon{width:1em;height:1em;font-size:inherit;vertical-align:baseline}.mat-form-field-hint-wrapper{display:flex}.mat-form-field-hint-spacer{flex:1 0 1em}.mat-error{display:block}.mat-form-field-control-wrapper{position:relative}.mat-form-field._mat-animation-noopable .mat-form-field-label,.mat-form-field._mat-animation-noopable .mat-form-field-ripple{transition:none}\n",'.mat-form-field-appearance-fill .mat-form-field-flex{border-radius:4px 4px 0 0;padding:.75em .75em 0 .75em}.cdk-high-contrast-active .mat-form-field-appearance-fill .mat-form-field-flex{outline:solid 1px}.mat-form-field-appearance-fill .mat-form-field-underline::before{content:"";display:block;position:absolute;bottom:0;height:1px;width:100%}.mat-form-field-appearance-fill .mat-form-field-ripple{bottom:0;height:2px}.cdk-high-contrast-active .mat-form-field-appearance-fill .mat-form-field-ripple{height:0;border-top:solid 2px}.mat-form-field-appearance-fill:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{opacity:1;transform:none;transition:opacity 600ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-fill._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{transition:none}.mat-form-field-appearance-fill .mat-form-field-subscript-wrapper{padding:0 1em}\n','.mat-input-element{font:inherit;background:transparent;color:currentColor;border:none;outline:none;padding:0;margin:0;width:100%;max-width:100%;vertical-align:bottom;text-align:inherit}.mat-input-element:-moz-ui-invalid{box-shadow:none}.mat-input-element::-ms-clear,.mat-input-element::-ms-reveal{display:none}.mat-input-element,.mat-input-element::-webkit-search-cancel-button,.mat-input-element::-webkit-search-decoration,.mat-input-element::-webkit-search-results-button,.mat-input-element::-webkit-search-results-decoration{-webkit-appearance:none}.mat-input-element::-webkit-contacts-auto-fill-button,.mat-input-element::-webkit-caps-lock-indicator,.mat-input-element::-webkit-credentials-auto-fill-button{visibility:hidden}.mat-input-element[type=date],.mat-input-element[type=datetime],.mat-input-element[type=datetime-local],.mat-input-element[type=month],.mat-input-element[type=week],.mat-input-element[type=time]{line-height:1}.mat-input-element[type=date]::after,.mat-input-element[type=datetime]::after,.mat-input-element[type=datetime-local]::after,.mat-input-element[type=month]::after,.mat-input-element[type=week]::after,.mat-input-element[type=time]::after{content:" ";white-space:pre;width:1px}.mat-input-element::-webkit-inner-spin-button,.mat-input-element::-webkit-calendar-picker-indicator,.mat-input-element::-webkit-clear-button{font-size:.75em}.mat-input-element::placeholder{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element::placeholder:-ms-input-placeholder{-ms-user-select:text}.mat-input-element::-moz-placeholder{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element::-moz-placeholder:-ms-input-placeholder{-ms-user-select:text}.mat-input-element::-webkit-input-placeholder{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element::-webkit-input-placeholder:-ms-input-placeholder{-ms-user-select:text}.mat-input-element:-ms-input-placeholder{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element:-ms-input-placeholder:-ms-input-placeholder{-ms-user-select:text}.mat-form-field-hide-placeholder .mat-input-element::placeholder{color:transparent !important;-webkit-text-fill-color:transparent;transition:none}.mat-form-field-hide-placeholder .mat-input-element::-moz-placeholder{color:transparent !important;-webkit-text-fill-color:transparent;transition:none}.mat-form-field-hide-placeholder .mat-input-element::-webkit-input-placeholder{color:transparent !important;-webkit-text-fill-color:transparent;transition:none}.mat-form-field-hide-placeholder .mat-input-element:-ms-input-placeholder{color:transparent !important;-webkit-text-fill-color:transparent;transition:none}textarea.mat-input-element{resize:vertical;overflow:auto}textarea.mat-input-element.cdk-textarea-autosize{resize:none}textarea.mat-input-element{padding:2px 0;margin:-2px 0}select.mat-input-element{-moz-appearance:none;-webkit-appearance:none;position:relative;background-color:transparent;display:inline-flex;box-sizing:border-box;padding-top:1em;top:-1em;margin-bottom:-1em}select.mat-input-element::-ms-expand{display:none}select.mat-input-element::-moz-focus-inner{border:0}select.mat-input-element:not(:disabled){cursor:pointer}select.mat-input-element::-ms-value{color:inherit;background:none}.mat-focused .cdk-high-contrast-active select.mat-input-element::-ms-value{color:inherit}.mat-form-field-type-mat-native-select .mat-form-field-infix::after{content:"";width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid;position:absolute;top:50%;right:0;margin-top:-2.5px;pointer-events:none}[dir=rtl] .mat-form-field-type-mat-native-select .mat-form-field-infix::after{right:auto;left:0}.mat-form-field-type-mat-native-select .mat-input-element{padding-right:15px}[dir=rtl] .mat-form-field-type-mat-native-select .mat-input-element{padding-right:0;padding-left:15px}.mat-form-field-type-mat-native-select .mat-form-field-label-wrapper{max-width:calc(100% - 10px)}.mat-form-field-type-mat-native-select.mat-form-field-appearance-outline .mat-form-field-infix::after{margin-top:-5px}.mat-form-field-type-mat-native-select.mat-form-field-appearance-fill .mat-form-field-infix::after{margin-top:-10px}\n',".mat-form-field-appearance-legacy .mat-form-field-label{transform:perspective(100px);-ms-transform:none}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon{width:1em}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon-button,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon-button{font:inherit;vertical-align:baseline}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon-button .mat-icon{font-size:inherit}.mat-form-field-appearance-legacy .mat-form-field-underline{height:1px}.cdk-high-contrast-active .mat-form-field-appearance-legacy .mat-form-field-underline{height:0;border-top:solid 1px}.mat-form-field-appearance-legacy .mat-form-field-ripple{top:0;height:2px;overflow:hidden}.cdk-high-contrast-active .mat-form-field-appearance-legacy .mat-form-field-ripple{height:0;border-top:solid 2px}.mat-form-field-appearance-legacy.mat-form-field-disabled .mat-form-field-underline{background-position:0;background-color:transparent}.cdk-high-contrast-active .mat-form-field-appearance-legacy.mat-form-field-disabled .mat-form-field-underline{border-top-style:dotted;border-top-width:2px}.mat-form-field-appearance-legacy.mat-form-field-invalid:not(.mat-focused) .mat-form-field-ripple{height:1px}\n",".mat-form-field-appearance-outline .mat-form-field-wrapper{margin:.25em 0}.mat-form-field-appearance-outline .mat-form-field-flex{padding:0 .75em 0 .75em;margin-top:-0.25em;position:relative}.mat-form-field-appearance-outline .mat-form-field-prefix,.mat-form-field-appearance-outline .mat-form-field-suffix{top:.25em}.mat-form-field-appearance-outline .mat-form-field-outline{display:flex;position:absolute;top:.25em;left:0;right:0;bottom:0;pointer-events:none}.mat-form-field-appearance-outline .mat-form-field-outline-start,.mat-form-field-appearance-outline .mat-form-field-outline-end{border:1px solid currentColor;min-width:5px}.mat-form-field-appearance-outline .mat-form-field-outline-start{border-radius:5px 0 0 5px;border-right-style:none}[dir=rtl] .mat-form-field-appearance-outline .mat-form-field-outline-start{border-right-style:solid;border-left-style:none;border-radius:0 5px 5px 0}.mat-form-field-appearance-outline .mat-form-field-outline-end{border-radius:0 5px 5px 0;border-left-style:none;flex-grow:1}[dir=rtl] .mat-form-field-appearance-outline .mat-form-field-outline-end{border-left-style:solid;border-right-style:none;border-radius:5px 0 0 5px}.mat-form-field-appearance-outline .mat-form-field-outline-gap{border-radius:.000001px;border:1px solid currentColor;border-left-style:none;border-right-style:none}.mat-form-field-appearance-outline.mat-form-field-can-float.mat-form-field-should-float .mat-form-field-outline-gap{border-top-color:transparent}.mat-form-field-appearance-outline .mat-form-field-outline-thick{opacity:0}.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-start,.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-end,.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-gap{border-width:2px}.mat-form-field-appearance-outline.mat-focused .mat-form-field-outline,.mat-form-field-appearance-outline.mat-form-field-invalid .mat-form-field-outline{opacity:0;transition:opacity 100ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-outline.mat-focused .mat-form-field-outline-thick,.mat-form-field-appearance-outline.mat-form-field-invalid .mat-form-field-outline-thick{opacity:1}.mat-form-field-appearance-outline:not(.mat-form-field-disabled) .mat-form-field-flex:hover .mat-form-field-outline{opacity:0;transition:opacity 600ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-outline:not(.mat-form-field-disabled) .mat-form-field-flex:hover .mat-form-field-outline-thick{opacity:1}.mat-form-field-appearance-outline .mat-form-field-subscript-wrapper{padding:0 1em}.mat-form-field-appearance-outline._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-outline,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-start,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-end,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-gap{transition:none}\n",".mat-form-field-appearance-standard .mat-form-field-flex{padding-top:.75em}.mat-form-field-appearance-standard .mat-form-field-underline{height:1px}.cdk-high-contrast-active .mat-form-field-appearance-standard .mat-form-field-underline{height:0;border-top:solid 1px}.mat-form-field-appearance-standard .mat-form-field-ripple{bottom:0;height:2px}.cdk-high-contrast-active .mat-form-field-appearance-standard .mat-form-field-ripple{height:0;border-top:2px}.mat-form-field-appearance-standard.mat-form-field-disabled .mat-form-field-underline{background-position:0;background-color:transparent}.cdk-high-contrast-active .mat-form-field-appearance-standard.mat-form-field-disabled .mat-form-field-underline{border-top-style:dotted;border-top-width:2px}.mat-form-field-appearance-standard:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{opacity:1;transform:none;transition:opacity 600ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-standard._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{transition:none}\n"],encapsulation:2,data:{animation:[fg.transitionMessages]},changeDetection:0}),t})(),Og=(()=>{class t{}return t.\u0275mod=ge({type:t}),t.\u0275inj=ut({factory:function(e){return new(e||t)},imports:[[$u,gf,Kh],gf]}),t})();class Ag{constructor(t){this.durationSelector=t}call(t,e){return e.subscribe(new Dg(t,this.durationSelector))}}class Dg extends M{constructor(t,e){super(t),this.durationSelector=e,this.hasValue=!1}_next(t){if(this.value=t,this.hasValue=!0,!this.throttled){let n;try{const{durationSelector:e}=this;n=e(t)}catch(e){return this.destination.error(e)}const i=P(this,n);!i||i.closed?this.clearThrottle():this.add(this.throttled=i)}}clearThrottle(){const{value:t,hasValue:e,throttled:n}=this;n&&(this.remove(n),this.throttled=null,n.unsubscribe()),e&&(this.value=null,this.hasValue=!1,this.destination.next(t))}notifyNext(t,e,n,i){this.clearThrottle()}notifyComplete(){this.clearThrottle()}}function Pg(t){return!c(t)&&t-parseFloat(t)+1>=0}function Mg(t=0,e,n){let i=-1;return Pg(e)?i=Number(e)<1?1:Number(e):C(e)&&(n=e),C(n)||(n=Ph),new y(e=>{const r=Pg(t)?t:+t-n.now();return n.schedule(Ng,r,{index:0,period:i,subscriber:e})})}function Ng(t){const{index:e,period:n,subscriber:i}=t;if(i.next(e),!i.closed){if(-1===n)return i.complete();t.index=e+1,this.schedule(t,n)}}function Lg(t,e=Ph){return n=()=>Mg(t,e),function(t){return t.lift(new Ag(n))};var n}const Fg=Qh({passive:!0});let Ug=(()=>{class t{constructor(t,e){this._platform=t,this._ngZone=e,this._monitoredElements=new Map}monitor(t){if(!this._platform.isBrowser)return ud;const e=Ih(t),n=this._monitoredElements.get(e);if(n)return n.subject.asObservable();const i=new E,r="cdk-text-field-autofilled",s=t=>{"cdk-text-field-autofill-start"!==t.animationName||e.classList.contains(r)?"cdk-text-field-autofill-end"===t.animationName&&e.classList.contains(r)&&(e.classList.remove(r),this._ngZone.run(()=>i.next({target:t.target,isAutofilled:!1}))):(e.classList.add(r),this._ngZone.run(()=>i.next({target:t.target,isAutofilled:!0})))};return this._ngZone.runOutsideAngular(()=>{e.addEventListener("animationstart",s,Fg),e.classList.add("cdk-text-field-autofill-monitored")}),this._monitoredElements.set(e,{subject:i,unlisten:()=>{e.removeEventListener("animationstart",s,Fg)}}),i.asObservable()}stopMonitoring(t){const e=Ih(t),n=this._monitoredElements.get(e);n&&(n.unlisten(),n.subject.complete(),e.classList.remove("cdk-text-field-autofill-monitored"),e.classList.remove("cdk-text-field-autofilled"),this._monitoredElements.delete(e))}ngOnDestroy(){this._monitoredElements.forEach((t,e)=>this.stopMonitoring(e))}}return t.\u0275fac=function(e){return new(e||t)(zt(Gh),zt(Rl))},t.\u0275prov=lt({factory:function(){return new t(zt(Gh),zt(Rl))},token:t,providedIn:"root"}),t})(),Bg=(()=>{class t{}return t.\u0275mod=ge({type:t}),t.\u0275inj=ut({factory:function(e){return new(e||t)},imports:[[$h]]}),t})();function jg(...t){if(1===t.length){const e=t[0];if(c(e))return Vg(e,null);if(l(e)&&Object.getPrototypeOf(e)===Object.prototype){const t=Object.keys(e);return Vg(t.map(t=>e[t]),t)}}if("function"==typeof t[t.length-1]){const e=t.pop();return Vg(t=1===t.length&&c(t[0])?t[0]:t,null).pipe(N(t=>e(...t)))}return Vg(t,null)}function Vg(t,e){return new y(n=>{const i=t.length;if(0===i)return void n.complete();const r=new Array(i);let s=0,o=0;for(let a=0;a<i;a++){const c=B(t[a]);let l=!1;n.add(c.subscribe({next:t=>{l||(l=!0,o++),r[a]=t},error:t=>n.error(t),complete:()=>{s++,s!==i&&l||(o===i&&n.next(e?e.reduce((t,e,n)=>(t[e]=r[n],t),{}):r),n.complete())}}))}})}const Kg=new Ft("NgValueAccessor"),qg={provide:Kg,useExisting:St(()=>Gg),multi:!0};let Gg=(()=>{class t{constructor(t,e){this._renderer=t,this._elementRef=e,this.onChange=t=>{},this.onTouched=()=>{}}writeValue(t){this._renderer.setProperty(this._elementRef.nativeElement,"checked",t)}registerOnChange(t){this.onChange=t}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}}return t.\u0275fac=function(e){return new(e||t)(Ao(Wa),Ao(Ga))},t.\u0275dir=ye({type:t,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(t,e){1&t&&qo("change",(function(t){return e.onChange(t.target.checked)}))("blur",(function(){return e.onTouched()}))},features:[ja([qg])]}),t})();const $g={provide:Kg,useExisting:St(()=>zg),multi:!0},Hg=new Ft("CompositionEventMode");let zg=(()=>{class t{constructor(t,e,n){this._renderer=t,this._elementRef=e,this._compositionMode=n,this.onChange=t=>{},this.onTouched=()=>{},this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function(){const t=su()?su().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}())}writeValue(t){this._renderer.setProperty(this._elementRef.nativeElement,"value",null==t?"":t)}registerOnChange(t){this.onChange=t}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return t.\u0275fac=function(e){return new(e||t)(Ao(Wa),Ao(Ga),Ao(Hg,8))},t.\u0275dir=ye({type:t,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,e){1&t&&qo("input",(function(t){return e._handleInput(t.target.value)}))("blur",(function(){return e.onTouched()}))("compositionstart",(function(){return e._compositionStart()}))("compositionend",(function(t){return e._compositionEnd(t.target.value)}))},features:[ja([$g])]}),t})(),Wg=(()=>{class t{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}reset(t){this.control&&this.control.reset(t)}hasError(t,e){return!!this.control&&this.control.hasError(t,e)}getError(t,e){return this.control?this.control.getError(t,e):null}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=ye({type:t}),t})(),Yg=(()=>{class t extends Wg{get formDirective(){return null}get path(){return null}}return t.\u0275fac=function(e){return Xg(e||t)},t.\u0275dir=ye({type:t,features:[Ia]}),t})();const Xg=fi(Yg);function Qg(){throw new Error("unimplemented")}class Zg extends Wg{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null,this._rawValidators=[],this._rawAsyncValidators=[]}get validator(){return Qg()}get asyncValidator(){return Qg()}}let Jg=(()=>{class t extends class{constructor(t){this._cd=t}get ngClassUntouched(){return!!this._cd.control&&this._cd.control.untouched}get ngClassTouched(){return!!this._cd.control&&this._cd.control.touched}get ngClassPristine(){return!!this._cd.control&&this._cd.control.pristine}get ngClassDirty(){return!!this._cd.control&&this._cd.control.dirty}get ngClassValid(){return!!this._cd.control&&this._cd.control.valid}get ngClassInvalid(){return!!this._cd.control&&this._cd.control.invalid}get ngClassPending(){return!!this._cd.control&&this._cd.control.pending}}{constructor(t){super(t)}}return t.\u0275fac=function(e){return new(e||t)(Ao(Zg,2))},t.\u0275dir=ye({type:t,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,e){2&t&&oa("ng-untouched",e.ngClassUntouched)("ng-touched",e.ngClassTouched)("ng-pristine",e.ngClassPristine)("ng-dirty",e.ngClassDirty)("ng-valid",e.ngClassValid)("ng-invalid",e.ngClassInvalid)("ng-pending",e.ngClassPending)},features:[Ia]}),t})();function t_(t){return null==t||0===t.length}function e_(t){return null!=t&&"number"==typeof t.length}const n_=new Ft("NgValidators"),i_=new Ft("NgAsyncValidators"),r_=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class s_{static min(t){return e=>{if(t_(e.value)||t_(t))return null;const n=parseFloat(e.value);return!isNaN(n)&&n<t?{min:{min:t,actual:e.value}}:null}}static max(t){return e=>{if(t_(e.value)||t_(t))return null;const n=parseFloat(e.value);return!isNaN(n)&&n>t?{max:{max:t,actual:e.value}}:null}}static required(t){return t_(t.value)?{required:!0}:null}static requiredTrue(t){return!0===t.value?null:{required:!0}}static email(t){return t_(t.value)||r_.test(t.value)?null:{email:!0}}static minLength(t){return e=>t_(e.value)||!e_(e.value)?null:e.value.length<t?{minlength:{requiredLength:t,actualLength:e.value.length}}:null}static maxLength(t){return e=>e_(e.value)&&e.value.length>t?{maxlength:{requiredLength:t,actualLength:e.value.length}}:null}static pattern(t){if(!t)return s_.nullValidator;let e,n;return"string"==typeof t?(n="","^"!==t.charAt(0)&&(n+="^"),n+=t,"$"!==t.charAt(t.length-1)&&(n+="$"),e=new RegExp(n)):(n=t.toString(),e=t),t=>{if(t_(t.value))return null;const i=t.value;return e.test(i)?null:{pattern:{requiredPattern:n,actualValue:i}}}}static nullValidator(t){return null}static compose(t){if(!t)return null;const e=t.filter(o_);return 0==e.length?null:function(t){return c_(function(t,e){return e.map(e=>e(t))}(t,e))}}static composeAsync(t){if(!t)return null;const e=t.filter(o_);return 0==e.length?null:function(t){return jg(function(t,e){return e.map(e=>e(t))}(t,e).map(a_)).pipe(N(c_))}}}function o_(t){return null!=t}function a_(t){const e=Vo(t)?B(t):t;if(!Ko(e))throw new Error("Expected validator to return Promise or Observable.");return e}function c_(t){let e={};return t.forEach(t=>{e=null!=t?Object.assign(Object.assign({},e),t):e}),0===Object.keys(e).length?null:e}function l_(t){return t.validate?e=>t.validate(e):t}function u_(t){return t.validate?e=>t.validate(e):t}const h_={provide:Kg,useExisting:St(()=>d_),multi:!0};let d_=(()=>{class t{constructor(t,e){this._renderer=t,this._elementRef=e,this.onChange=t=>{},this.onTouched=()=>{}}writeValue(t){this._renderer.setProperty(this._elementRef.nativeElement,"value",null==t?"":t)}registerOnChange(t){this.onChange=e=>{t(""==e?null:parseFloat(e))}}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}}return t.\u0275fac=function(e){return new(e||t)(Ao(Wa),Ao(Ga))},t.\u0275dir=ye({type:t,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(t,e){1&t&&qo("input",(function(t){return e.onChange(t.target.value)}))("blur",(function(){return e.onTouched()}))},features:[ja([h_])]}),t})();const p_={provide:Kg,useExisting:St(()=>f_),multi:!0};let m_=(()=>{class t{constructor(){this._accessors=[]}add(t,e){this._accessors.push([t,e])}remove(t){for(let e=this._accessors.length-1;e>=0;--e)if(this._accessors[e][1]===t)return void this._accessors.splice(e,1)}select(t){this._accessors.forEach(e=>{this._isSameGroup(e,t)&&e[1]!==t&&e[1].fireUncheck(t.value)})}_isSameGroup(t,e){return!!t[0].control&&t[0]._parent===e._control._parent&&t[1].name===e.name}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=lt({token:t,factory:t.\u0275fac}),t})(),f_=(()=>{class t{constructor(t,e,n,i){this._renderer=t,this._elementRef=e,this._registry=n,this._injector=i,this.onChange=()=>{},this.onTouched=()=>{}}ngOnInit(){this._control=this._injector.get(Zg),this._checkName(),this._registry.add(this._control,this)}ngOnDestroy(){this._registry.remove(this)}writeValue(t){this._state=t===this.value,this._renderer.setProperty(this._elementRef.nativeElement,"checked",this._state)}registerOnChange(t){this._fn=t,this.onChange=()=>{t(this.value),this._registry.select(this)}}fireUncheck(t){this.writeValue(t)}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}_checkName(){this.name&&this.formControlName&&this.name!==this.formControlName&&this._throwNameError(),!this.name&&this.formControlName&&(this.name=this.formControlName)}_throwNameError(){throw new Error('\n      If you define both a name and a formControlName attribute on your radio button, their values\n      must match. Ex: <input type="radio" formControlName="food" name="food">\n    ')}}return t.\u0275fac=function(e){return new(e||t)(Ao(Wa),Ao(Ga),Ao(m_),Ao(go))},t.\u0275dir=ye({type:t,selectors:[["input","type","radio","formControlName",""],["input","type","radio","formControl",""],["input","type","radio","ngModel",""]],hostBindings:function(t,e){1&t&&qo("change",(function(){return e.onChange()}))("blur",(function(){return e.onTouched()}))},inputs:{name:"name",formControlName:"formControlName",value:"value"},features:[ja([p_])]}),t})();const g_={provide:Kg,useExisting:St(()=>__),multi:!0};let __=(()=>{class t{constructor(t,e){this._renderer=t,this._elementRef=e,this.onChange=t=>{},this.onTouched=()=>{}}writeValue(t){this._renderer.setProperty(this._elementRef.nativeElement,"value",parseFloat(t))}registerOnChange(t){this.onChange=e=>{t(""==e?null:parseFloat(e))}}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}}return t.\u0275fac=function(e){return new(e||t)(Ao(Wa),Ao(Ga))},t.\u0275dir=ye({type:t,selectors:[["input","type","range","formControlName",""],["input","type","range","formControl",""],["input","type","range","ngModel",""]],hostBindings:function(t,e){1&t&&qo("change",(function(t){return e.onChange(t.target.value)}))("input",(function(t){return e.onChange(t.target.value)}))("blur",(function(){return e.onTouched()}))},features:[ja([g_])]}),t})();const y_='\n    <div [formGroup]="myGroup">\n      <input formControlName="firstName">\n    </div>\n\n    In your class:\n\n    this.myGroup = new FormGroup({\n       firstName: new FormControl()\n    });',v_='\n    <div [formGroup]="myGroup">\n       <div formGroupName="person">\n          <input formControlName="firstName">\n       </div>\n    </div>\n\n    In your class:\n\n    this.myGroup = new FormGroup({\n       person: new FormGroup({ firstName: new FormControl() })\n    });',b_='\n    <form>\n       <div ngModelGroup="person">\n          <input [(ngModel)]="person.name" name="firstName">\n       </div>\n    </form>';class w_{static controlParentException(){throw new Error("formControlName must be used with a parent formGroup directive.  You'll want to add a formGroup\n       directive and pass it an existing FormGroup instance (you can create one in your class).\n\n      Example:\n\n      "+y_)}static ngModelGroupException(){throw new Error(`formControlName cannot be used with an ngModelGroup parent. It is only compatible with parents\n       that also have a "form" prefix: formGroupName, formArrayName, or formGroup.\n\n       Option 1:  Update the parent to be formGroupName (reactive form strategy)\n\n        ${v_}\n\n        Option 2: Use ngModel instead of formControlName (template-driven strategy)\n\n        ${b_}`)}static missingFormException(){throw new Error("formGroup expects a FormGroup instance. Please pass one in.\n\n       Example:\n\n       "+y_)}static groupParentException(){throw new Error("formGroupName must be used with a parent formGroup directive.  You'll want to add a formGroup\n      directive and pass it an existing FormGroup instance (you can create one in your class).\n\n      Example:\n\n      "+v_)}static arrayParentException(){throw new Error('formArrayName must be used with a parent formGroup directive.  You\'ll want to add a formGroup\n       directive and pass it an existing FormGroup instance (you can create one in your class).\n\n        Example:\n\n        \n    <div [formGroup]="myGroup">\n      <div formArrayName="cities">\n        <div *ngFor="let city of cityArray.controls; index as i">\n          <input [formControlName]="i">\n        </div>\n      </div>\n    </div>\n\n    In your class:\n\n    this.cityArray = new FormArray([new FormControl(\'SF\')]);\n    this.myGroup = new FormGroup({\n      cities: this.cityArray\n    });')}static disabledAttrWarning(){console.warn("\n      It looks like you're using the disabled attribute with a reactive form directive. If you set disabled to true\n      when you set up this control in your component class, the disabled attribute will actually be set in the DOM for\n      you. We recommend using this approach to avoid 'changed after checked' errors.\n\n      Example:\n      form = new FormGroup({\n        first: new FormControl({value: 'Nancy', disabled: true}, Validators.required),\n        last: new FormControl('Drew', Validators.required)\n      });\n    ")}static ngModelWarning(t){console.warn(`\n    It looks like you're using ngModel on the same form field as ${t}.\n    Support for using the ngModel input property and ngModelChange event with\n    reactive form directives has been deprecated in Angular v6 and will be removed\n    in a future version of Angular.\n\n    For more information on this, see our API docs here:\n    https://angular.io/api/forms/${"formControl"===t?"FormControlDirective":"FormControlName"}#use-with-ngmodel\n    `)}}const S_={provide:Kg,useExisting:St(()=>E_),multi:!0};let E_=(()=>{class t{constructor(t,e){this._renderer=t,this._elementRef=e,this._optionMap=new Map,this._idCounter=0,this.onChange=t=>{},this.onTouched=()=>{},this._compareWith=Object.is}set compareWith(t){if("function"!=typeof t)throw new Error("compareWith must be a function, but received "+JSON.stringify(t));this._compareWith=t}writeValue(t){this.value=t;const e=this._getOptionId(t);null==e&&this._renderer.setProperty(this._elementRef.nativeElement,"selectedIndex",-1);const n=function(t,e){return null==t?""+e:(e&&"object"==typeof e&&(e="Object"),`${t}: ${e}`.slice(0,50))}(e,t);this._renderer.setProperty(this._elementRef.nativeElement,"value",n)}registerOnChange(t){this.onChange=e=>{this.value=this._getOptionValue(e),t(this.value)}}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(const e of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(e),t))return e;return null}_getOptionValue(t){const e=function(t){return t.split(":")[0]}(t);return this._optionMap.has(e)?this._optionMap.get(e):t}}return t.\u0275fac=function(e){return new(e||t)(Ao(Wa),Ao(Ga))},t.\u0275dir=ye({type:t,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(t,e){1&t&&qo("change",(function(t){return e.onChange(t.target.value)}))("blur",(function(){return e.onTouched()}))},inputs:{compareWith:"compareWith"},features:[ja([S_])]}),t})();const k_={provide:Kg,useExisting:St(()=>C_),multi:!0};let C_=(()=>{class t{constructor(t,e){this._renderer=t,this._elementRef=e,this._optionMap=new Map,this._idCounter=0,this.onChange=t=>{},this.onTouched=()=>{},this._compareWith=Object.is}set compareWith(t){if("function"!=typeof t)throw new Error("compareWith must be a function, but received "+JSON.stringify(t));this._compareWith=t}writeValue(t){let e;if(this.value=t,Array.isArray(t)){const n=t.map(t=>this._getOptionId(t));e=(t,e)=>{t._setSelected(n.indexOf(e.toString())>-1)}}else e=(t,e)=>{t._setSelected(!1)};this._optionMap.forEach(e)}registerOnChange(t){this.onChange=e=>{const n=[];if(void 0!==e.selectedOptions){const t=e.selectedOptions;for(let e=0;e<t.length;e++){const i=t.item(e),r=this._getOptionValue(i.value);n.push(r)}}else{const t=e.options;for(let e=0;e<t.length;e++){const i=t.item(e);if(i.selected){const t=this._getOptionValue(i.value);n.push(t)}}}this.value=n,t(n)}}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}_registerOption(t){const e=(this._idCounter++).toString();return this._optionMap.set(e,t),e}_getOptionId(t){for(const e of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(e)._value,t))return e;return null}_getOptionValue(t){const e=function(t){return t.split(":")[0]}(t);return this._optionMap.has(e)?this._optionMap.get(e)._value:t}}return t.\u0275fac=function(e){return new(e||t)(Ao(Wa),Ao(Ga))},t.\u0275dir=ye({type:t,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(t,e){1&t&&qo("change",(function(t){return e.onChange(t.target)}))("blur",(function(){return e.onTouched()}))},inputs:{compareWith:"compareWith"},features:[ja([k_])]}),t})();function x_(t,e){return[...e.path,t]}function T_(t,e){t||A_(e,"Cannot find control with"),e.valueAccessor||A_(e,"No value accessor for form control with"),t.validator=s_.compose([t.validator,e.validator]),t.asyncValidator=s_.composeAsync([t.asyncValidator,e.asyncValidator]),e.valueAccessor.writeValue(t.value),function(t,e){e.valueAccessor.registerOnChange(n=>{t._pendingValue=n,t._pendingChange=!0,t._pendingDirty=!0,"change"===t.updateOn&&I_(t,e)})}(t,e),function(t,e){t.registerOnChange((t,n)=>{e.valueAccessor.writeValue(t),n&&e.viewToModelUpdate(t)})}(t,e),function(t,e){e.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,"blur"===t.updateOn&&t._pendingChange&&I_(t,e),"submit"!==t.updateOn&&t.markAsTouched()})}(t,e),e.valueAccessor.setDisabledState&&t.registerOnDisabledChange(t=>{e.valueAccessor.setDisabledState(t)}),e._rawValidators.forEach(e=>{e.registerOnValidatorChange&&e.registerOnValidatorChange(()=>t.updateValueAndValidity())}),e._rawAsyncValidators.forEach(e=>{e.registerOnValidatorChange&&e.registerOnValidatorChange(()=>t.updateValueAndValidity())})}function I_(t,e){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}function R_(t,e){null==t&&A_(e,"Cannot find control with"),t.validator=s_.compose([t.validator,e.validator]),t.asyncValidator=s_.composeAsync([t.asyncValidator,e.asyncValidator])}function O_(t){return A_(t,"There is no FormControl instance attached to form control element with")}function A_(t,e){let n;throw n=t.path.length>1?`path: '${t.path.join(" -> ")}'`:t.path[0]?`name: '${t.path}'`:"unspecified name attribute",new Error(`${e} ${n}`)}function D_(t){return null!=t?s_.compose(t.map(l_)):null}function P_(t){return null!=t?s_.composeAsync(t.map(u_)):null}function M_(t,e){if(!t.hasOwnProperty("model"))return!1;const n=t.model;return!!n.isFirstChange()||!Object.is(e,n.currentValue)}const N_=[Gg,__,d_,E_,C_,f_];function L_(t,e){t._syncPendingControls(),e.forEach(t=>{const e=t.control;"submit"===e.updateOn&&e._pendingChange&&(t.viewToModelUpdate(e._pendingValue),e._pendingChange=!1)})}function F_(t,e){if(!e)return null;Array.isArray(e)||A_(t,"Value accessor was not provided as an array for form control with");let n=void 0,i=void 0,r=void 0;return e.forEach(e=>{var s;e.constructor===zg?n=e:(s=e,N_.some(t=>s.constructor===t)?(i&&A_(t,"More than one built-in value accessor matches form control with"),i=e):(r&&A_(t,"More than one custom value accessor matches form control with"),r=e))}),r||i||n||(A_(t,"No valid value accessor for form control with"),null)}function U_(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}function B_(t){const e=V_(t)?t.validators:t;return Array.isArray(e)?D_(e):e||null}function j_(t,e){const n=V_(e)?e.asyncValidators:t;return Array.isArray(n)?P_(n):n||null}function V_(t){return null!=t&&!Array.isArray(t)&&"object"==typeof t}class K_{constructor(t,e){this.validator=t,this.asyncValidator=e,this._onCollectionChange=()=>{},this.pristine=!0,this.touched=!1,this._onDisabledChange=[]}get parent(){return this._parent}get valid(){return"VALID"===this.status}get invalid(){return"INVALID"===this.status}get pending(){return"PENDING"==this.status}get disabled(){return"DISABLED"===this.status}get enabled(){return"DISABLED"!==this.status}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this.validator=B_(t)}setAsyncValidators(t){this.asyncValidator=j_(t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){this.touched=!0,this._parent&&!t.onlySelf&&this._parent.markAsTouched(t)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(t=>t.markAllAsTouched())}markAsUntouched(t={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}markAsDirty(t={}){this.pristine=!1,this._parent&&!t.onlySelf&&this._parent.markAsDirty(t)}markAsPristine(t={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}markAsPending(t={}){this.status="PENDING",!1!==t.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!t.onlySelf&&this._parent.markAsPending(t)}disable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status="DISABLED",this.errors=null,this._forEachChild(e=>{e.disable(Object.assign(Object.assign({},t),{onlySelf:!0}))}),this._updateValue(),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},t),{skipPristineCheck:e})),this._onDisabledChange.forEach(t=>t(!0))}enable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status="VALID",this._forEachChild(e=>{e.enable(Object.assign(Object.assign({},t),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},t),{skipPristineCheck:e})),this._onDisabledChange.forEach(t=>t(!1))}_updateAncestors(t){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(t){this._parent=t}updateValueAndValidity(t={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),"VALID"!==this.status&&"PENDING"!==this.status||this._runAsyncValidator(t.emitEvent)),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(t)}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(e=>e._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?"DISABLED":"VALID"}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t){if(this.asyncValidator){this.status="PENDING";const e=a_(this.asyncValidator(this));this._asyncValidationSubscription=e.subscribe(e=>this.setErrors(e,{emitEvent:t}))}}_cancelExistingSubscription(){this._asyncValidationSubscription&&this._asyncValidationSubscription.unsubscribe()}setErrors(t,e={}){this.errors=t,this._updateControlsErrors(!1!==e.emitEvent)}get(t){return function(t,e,n){if(null==e)return null;if(Array.isArray(e)||(e=e.split(".")),Array.isArray(e)&&0===e.length)return null;let i=t;return e.forEach(t=>{i=i instanceof G_?i.controls.hasOwnProperty(t)?i.controls[t]:null:i instanceof $_&&i.at(t)||null}),i}(this,t)}getError(t,e){const n=e?this.get(e):this;return n&&n.errors?n.errors[t]:null}hasError(t,e){return!!this.getError(t,e)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(t)}_initObservables(){this.valueChanges=new jc,this.statusChanges=new jc}_calculateStatus(){return this._allControlsDisabled()?"DISABLED":this.errors?"INVALID":this._anyControlsHaveStatus("PENDING")?"PENDING":this._anyControlsHaveStatus("INVALID")?"INVALID":"VALID"}_anyControlsHaveStatus(t){return this._anyControls(e=>e.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t={}){this.pristine=!this._anyControlsDirty(),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}_updateTouched(t={}){this.touched=this._anyControlsTouched(),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}_isBoxedValue(t){return"object"==typeof t&&null!==t&&2===Object.keys(t).length&&"value"in t&&"disabled"in t}_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){V_(t)&&null!=t.updateOn&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){return!t&&this._parent&&this._parent.dirty&&!this._parent._anyControlsDirty()}}class q_ extends K_{constructor(t=null,e,n){super(B_(e),j_(n,e)),this._onChange=[],this._applyFormState(t),this._setUpdateStrategy(e),this.updateValueAndValidity({onlySelf:!0,emitEvent:!1}),this._initObservables()}setValue(t,e={}){this.value=this._pendingValue=t,this._onChange.length&&!1!==e.emitModelToViewChange&&this._onChange.forEach(t=>t(this.value,!1!==e.emitViewToModelChange)),this.updateValueAndValidity(e)}patchValue(t,e={}){this.setValue(t,e)}reset(t=null,e={}){this._applyFormState(t),this.markAsPristine(e),this.markAsUntouched(e),this.setValue(this.value,e),this._pendingChange=!1}_updateValue(){}_anyControls(t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(t){this._onChange.push(t)}_clearChangeFns(){this._onChange=[],this._onDisabledChange=[],this._onCollectionChange=()=>{}}registerOnDisabledChange(t){this._onDisabledChange.push(t)}_forEachChild(t){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(t){this._isBoxedValue(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}}class G_ extends K_{constructor(t,e,n){super(B_(e),j_(n,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!1})}registerControl(t,e){return this.controls[t]?this.controls[t]:(this.controls[t]=e,e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange),e)}addControl(t,e){this.registerControl(t,e),this.updateValueAndValidity(),this._onCollectionChange()}removeControl(t){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],this.updateValueAndValidity(),this._onCollectionChange()}setControl(t,e){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],e&&this.registerControl(t,e),this.updateValueAndValidity(),this._onCollectionChange()}contains(t){return this.controls.hasOwnProperty(t)&&this.controls[t].enabled}setValue(t,e={}){this._checkAllValuesPresent(t),Object.keys(t).forEach(n=>{this._throwIfControlMissing(n),this.controls[n].setValue(t[n],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){Object.keys(t).forEach(n=>{this.controls[n]&&this.controls[n].patchValue(t[n],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}reset(t={},e={}){this._forEachChild((n,i)=>{n.reset(t[i],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this._reduceChildren({},(t,e,n)=>(t[n]=e instanceof q_?e.value:e.getRawValue(),t))}_syncPendingControls(){let t=this._reduceChildren(!1,(t,e)=>!!e._syncPendingControls()||t);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_throwIfControlMissing(t){if(!Object.keys(this.controls).length)throw new Error("\n        There are no form controls registered with this group yet.  If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.controls[t])throw new Error(`Cannot find form control with name: ${t}.`)}_forEachChild(t){Object.keys(this.controls).forEach(e=>t(this.controls[e],e))}_setUpControls(){this._forEachChild(t=>{t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(t){for(const e of Object.keys(this.controls)){const n=this.controls[e];if(this.contains(e)&&t(n))return!0}return!1}_reduceValue(){return this._reduceChildren({},(t,e,n)=>((e.enabled||this.disabled)&&(t[n]=e.value),t))}_reduceChildren(t,e){let n=t;return this._forEachChild((t,i)=>{n=e(n,t,i)}),n}_allControlsDisabled(){for(const t of Object.keys(this.controls))if(this.controls[t].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_checkAllValuesPresent(t){this._forEachChild((e,n)=>{if(void 0===t[n])throw new Error(`Must supply a value for form control with name: '${n}'.`)})}}class $_ extends K_{constructor(t,e,n){super(B_(e),j_(n,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!1})}at(t){return this.controls[t]}push(t){this.controls.push(t),this._registerControl(t),this.updateValueAndValidity(),this._onCollectionChange()}insert(t,e){this.controls.splice(t,0,e),this._registerControl(e),this.updateValueAndValidity()}removeAt(t){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),this.controls.splice(t,1),this.updateValueAndValidity()}setControl(t,e){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),this.controls.splice(t,1),e&&(this.controls.splice(t,0,e),this._registerControl(e)),this.updateValueAndValidity(),this._onCollectionChange()}get length(){return this.controls.length}setValue(t,e={}){this._checkAllValuesPresent(t),t.forEach((t,n)=>{this._throwIfControlMissing(n),this.at(n).setValue(t,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){t.forEach((t,n)=>{this.at(n)&&this.at(n).patchValue(t,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}reset(t=[],e={}){this._forEachChild((n,i)=>{n.reset(t[i],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this.controls.map(t=>t instanceof q_?t.value:t.getRawValue())}clear(){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity())}_syncPendingControls(){let t=this.controls.reduce((t,e)=>!!e._syncPendingControls()||t,!1);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_throwIfControlMissing(t){if(!this.controls.length)throw new Error("\n        There are no form controls registered with this array yet.  If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.at(t))throw new Error("Cannot find form control at index "+t)}_forEachChild(t){this.controls.forEach((e,n)=>{t(e,n)})}_updateValue(){this.value=this.controls.filter(t=>t.enabled||this.disabled).map(t=>t.value)}_anyControls(t){return this.controls.some(e=>e.enabled&&t(e))}_setUpControls(){this._forEachChild(t=>this._registerControl(t))}_checkAllValuesPresent(t){this._forEachChild((e,n)=>{if(void 0===t[n])throw new Error(`Must supply a value for form control at index: ${n}.`)})}_allControlsDisabled(){for(const t of this.controls)if(t.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(t){t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)}}const H_={provide:Yg,useExisting:St(()=>W_)},z_=(()=>Promise.resolve(null))();let W_=(()=>{class t extends Yg{constructor(t,e){super(),this.submitted=!1,this._directives=[],this.ngSubmit=new jc,this.form=new G_({},D_(t),P_(e))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){z_.then(()=>{const e=this._findContainer(t.path);t.control=e.registerControl(t.name,t.control),T_(t.control,t),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.push(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){z_.then(()=>{const e=this._findContainer(t.path);e&&e.removeControl(t.name),U_(this._directives,t)})}addFormGroup(t){z_.then(()=>{const e=this._findContainer(t.path),n=new G_({});R_(n,t),e.registerControl(t.name,n),n.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){z_.then(()=>{const e=this._findContainer(t.path);e&&e.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,e){z_.then(()=>{this.form.get(t.path).setValue(e)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submitted=!0,L_(this.form,this._directives),this.ngSubmit.emit(t),!1}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}}return t.\u0275fac=function(e){return new(e||t)(Ao(n_,10),Ao(i_,10))},t.\u0275dir=ye({type:t,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(t,e){1&t&&qo("submit",(function(t){return e.onSubmit(t)}))("reset",(function(){return e.onReset()}))},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[ja([H_]),Ia]}),t})(),Y_=(()=>{class t extends Yg{ngOnInit(){this._checkParentType(),this.formDirective.addFormGroup(this)}ngOnDestroy(){this.formDirective&&this.formDirective.removeFormGroup(this)}get control(){return this.formDirective.getFormGroup(this)}get path(){return x_(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}get validator(){return D_(this._validators)}get asyncValidator(){return P_(this._asyncValidators)}_checkParentType(){}}return t.\u0275fac=function(e){return X_(e||t)},t.\u0275dir=ye({type:t,features:[Ia]}),t})();const X_=fi(Y_);class Q_{static modelParentException(){throw new Error(`\n      ngModel cannot be used to register form controls with a parent formGroup directive.  Try using\n      formGroup's partner directive "formControlName" instead.  Example:\n\n      ${y_}\n\n      Or, if you'd like to avoid registering this form control, indicate that it's standalone in ngModelOptions:\n\n      Example:\n\n      \n    <div [formGroup]="myGroup">\n       <input formControlName="firstName">\n       <input [(ngModel)]="showMoreControls" [ngModelOptions]="{standalone: true}">\n    </div>\n  `)}static formGroupNameException(){throw new Error(`\n      ngModel cannot be used to register form controls with a parent formGroupName or formArrayName directive.\n\n      Option 1: Use formControlName instead of ngModel (reactive strategy):\n\n      ${v_}\n\n      Option 2:  Update ngModel's parent be ngModelGroup (template-driven strategy):\n\n      ${b_}`)}static missingNameException(){throw new Error('If ngModel is used within a form tag, either the name attribute must be set or the form\n      control must be defined as \'standalone\' in ngModelOptions.\n\n      Example 1: <input [(ngModel)]="person.firstName" name="first">\n      Example 2: <input [(ngModel)]="person.firstName" [ngModelOptions]="{standalone: true}">')}static modelGroupParentException(){throw new Error(`\n      ngModelGroup cannot be used with a parent formGroup directive.\n\n      Option 1: Use formGroupName instead of ngModelGroup (reactive strategy):\n\n      ${v_}\n\n      Option 2:  Use a regular form tag instead of the formGroup directive (template-driven strategy):\n\n      ${b_}`)}}const Z_={provide:Yg,useExisting:St(()=>J_)};let J_=(()=>{class t extends Y_{constructor(t,e,n){super(),this._parent=t,this._validators=e,this._asyncValidators=n}_checkParentType(){this._parent instanceof t||this._parent instanceof W_||Q_.modelGroupParentException()}}return t.\u0275fac=function(e){return new(e||t)(Ao(Yg,5),Ao(n_,10),Ao(i_,10))},t.\u0275dir=ye({type:t,selectors:[["","ngModelGroup",""]],inputs:{name:["ngModelGroup","name"]},exportAs:["ngModelGroup"],features:[ja([Z_]),Ia]}),t})();const ty={provide:Zg,useExisting:St(()=>ny)},ey=(()=>Promise.resolve(null))();let ny=(()=>{class t extends Zg{constructor(t,e,n,i){super(),this.control=new q_,this._registered=!1,this.update=new jc,this._parent=t,this._rawValidators=e||[],this._rawAsyncValidators=n||[],this.valueAccessor=F_(this,i)}ngOnChanges(t){this._checkForErrors(),this._registered||this._setUpControl(),"isDisabled"in t&&this._updateDisabled(t),M_(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._parent?x_(this.name,this._parent):[this.name]}get formDirective(){return this._parent?this._parent.formDirective:null}get validator(){return D_(this._rawValidators)}get asyncValidator(){return P_(this._rawAsyncValidators)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){T_(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){!(this._parent instanceof J_)&&this._parent instanceof Y_?Q_.formGroupNameException():this._parent instanceof J_||this._parent instanceof W_||Q_.modelParentException()}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()||this.name||Q_.missingNameException()}_updateValue(t){ey.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1})})}_updateDisabled(t){const e=t.isDisabled.currentValue,n=""===e||e&&"false"!==e;ey.then(()=>{n&&!this.control.disabled?this.control.disable():!n&&this.control.disabled&&this.control.enable()})}}return t.\u0275fac=function(e){return new(e||t)(Ao(Yg,9),Ao(n_,10),Ao(i_,10),Ao(Kg,10))},t.\u0275dir=ye({type:t,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[ja([ty]),Ia,Ae]}),t})();const iy=new Ft("NgModelWithFormControlWarning"),ry={provide:Zg,useExisting:St(()=>sy)};let sy=(()=>{class t extends Zg{constructor(t,e,n,i){super(),this._ngModelWarningConfig=i,this.update=new jc,this._ngModelWarningSent=!1,this._rawValidators=t||[],this._rawAsyncValidators=e||[],this.valueAccessor=F_(this,n)}set isDisabled(t){w_.disabledAttrWarning()}ngOnChanges(e){var n,i;this._isControlChanged(e)&&(T_(this.form,this),this.control.disabled&&this.valueAccessor.setDisabledState&&this.valueAccessor.setDisabledState(!0),this.form.updateValueAndValidity({emitEvent:!1})),M_(e,this.viewModel)&&("formControl",n=t,this,i=this._ngModelWarningConfig,Ai()&&"never"!==i&&((null!==i&&"once"!==i||n._ngModelWarningSentOnce)&&("always"!==i||this._ngModelWarningSent)||(w_.ngModelWarning("formControl"),n._ngModelWarningSentOnce=!0,this._ngModelWarningSent=!0)),this.form.setValue(this.model),this.viewModel=this.model)}get path(){return[]}get validator(){return D_(this._rawValidators)}get asyncValidator(){return P_(this._rawAsyncValidators)}get control(){return this.form}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_isControlChanged(t){return t.hasOwnProperty("form")}}return t.\u0275fac=function(e){return new(e||t)(Ao(n_,10),Ao(i_,10),Ao(Kg,10),Ao(iy,8))},t.\u0275dir=ye({type:t,selectors:[["","formControl",""]],inputs:{isDisabled:["disabled","isDisabled"],form:["formControl","form"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},exportAs:["ngForm"],features:[ja([ry]),Ia,Ae]}),t._ngModelWarningSentOnce=!1,t})();const oy={provide:Yg,useExisting:St(()=>ay)};let ay=(()=>{class t extends Yg{constructor(t,e){super(),this._validators=t,this._asyncValidators=e,this.submitted=!1,this.directives=[],this.form=null,this.ngSubmit=new jc}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations())}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){const e=this.form.get(t.path);return T_(e,t),e.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),e}getControl(t){return this.form.get(t.path)}removeControl(t){U_(this.directives,t)}addFormGroup(t){const e=this.form.get(t.path);R_(e,t),e.updateValueAndValidity({emitEvent:!1})}removeFormGroup(t){}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){const e=this.form.get(t.path);R_(e,t),e.updateValueAndValidity({emitEvent:!1})}removeFormArray(t){}getFormArray(t){return this.form.get(t.path)}updateModel(t,e){this.form.get(t.path).setValue(e)}onSubmit(t){return this.submitted=!0,L_(this.form,this.directives),this.ngSubmit.emit(t),!1}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_updateDomValue(){this.directives.forEach(t=>{const e=this.form.get(t.path);t.control!==e&&(function(t,e){e.valueAccessor.registerOnChange(()=>O_(e)),e.valueAccessor.registerOnTouched(()=>O_(e)),e._rawValidators.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(null)}),e._rawAsyncValidators.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(null)}),t&&t._clearChangeFns()}(t.control,t),e&&T_(e,t),t.control=e)}),this.form._updateTreeValidity({emitEvent:!1})}_updateRegistrations(){this.form._registerOnCollectionChange(()=>this._updateDomValue()),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{}),this._oldForm=this.form}_updateValidators(){const t=D_(this._validators);this.form.validator=s_.compose([this.form.validator,t]);const e=P_(this._asyncValidators);this.form.asyncValidator=s_.composeAsync([this.form.asyncValidator,e])}_checkFormPresent(){this.form||w_.missingFormException()}}return t.\u0275fac=function(e){return new(e||t)(Ao(n_,10),Ao(i_,10))},t.\u0275dir=ye({type:t,selectors:[["","formGroup",""]],hostBindings:function(t,e){1&t&&qo("submit",(function(t){return e.onSubmit(t)}))("reset",(function(){return e.onReset()}))},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[ja([oy]),Ia,Ae]}),t})(),cy=(()=>{class t{}return t.\u0275mod=ge({type:t}),t.\u0275inj=ut({factory:function(e){return new(e||t)}}),t})(),ly=(()=>{class t{group(t,e=null){const n=this._reduceControls(t);let i=null,r=null,s=void 0;return null!=e&&(function(t){return void 0!==t.asyncValidators||void 0!==t.validators||void 0!==t.updateOn}(e)?(i=null!=e.validators?e.validators:null,r=null!=e.asyncValidators?e.asyncValidators:null,s=null!=e.updateOn?e.updateOn:void 0):(i=null!=e.validator?e.validator:null,r=null!=e.asyncValidator?e.asyncValidator:null)),new G_(n,{asyncValidators:r,updateOn:s,validators:i})}control(t,e,n){return new q_(t,e,n)}array(t,e,n){const i=t.map(t=>this._createControl(t));return new $_(i,e,n)}_reduceControls(t){const e={};return Object.keys(t).forEach(n=>{e[n]=this._createControl(t[n])}),e}_createControl(t){return t instanceof q_||t instanceof G_||t instanceof $_?t:Array.isArray(t)?this.control(t[0],t.length>1?t[1]:null,t.length>2?t[2]:null):this.control(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=lt({token:t,factory:t.\u0275fac}),t})(),uy=(()=>{class t{}return t.\u0275mod=ge({type:t}),t.\u0275inj=ut({factory:function(e){return new(e||t)},providers:[m_],imports:[cy]}),t})(),hy=(()=>{class t{static withConfig(e){return{ngModule:t,providers:[{provide:iy,useValue:e.warnOnNgModelWithFormControl}]}}}return t.\u0275mod=ge({type:t}),t.\u0275inj=ut({factory:function(e){return new(e||t)},providers:[ly,m_],imports:[cy]}),t})();const dy=new Ft("MAT_INPUT_VALUE_ACCESSOR"),py=["button","checkbox","file","hidden","image","radio","range","reset","submit"];let my=0;class fy{constructor(t,e,n,i){this._defaultErrorStateMatcher=t,this._parentForm=e,this._parentFormGroup=n,this.ngControl=i}}const gy=wf(fy);let _y=(()=>{class t extends gy{constructor(t,e,n,i,r,s,o,a,c,l){super(s,i,r,n),this._elementRef=t,this._platform=e,this.ngControl=n,this._autofillMonitor=a,this._formField=l,this._uid="mat-input-"+my++,this.focused=!1,this.stateChanges=new E,this.controlType="mat-input",this.autofilled=!1,this._disabled=!1,this._required=!1,this._type="text",this._readonly=!1,this._neverEmptyInputTypes=["date","datetime","datetime-local","month","time","week"].filter(t=>zh().has(t));const u=this._elementRef.nativeElement,h=u.nodeName.toLowerCase();this._inputValueAccessor=o||u,this._previousNativeValue=this.value,this.id=this.id,e.IOS&&c.runOutsideAngular(()=>{t.nativeElement.addEventListener("keyup",t=>{let e=t.target;e.value||e.selectionStart||e.selectionEnd||(e.setSelectionRange(1,1),e.setSelectionRange(0,0))})}),this._isServer=!this._platform.isBrowser,this._isNativeSelect="select"===h,this._isTextarea="textarea"===h,this._isNativeSelect&&(this.controlType=u.multiple?"mat-native-select-multiple":"mat-native-select")}get disabled(){return this.ngControl&&null!==this.ngControl.disabled?this.ngControl.disabled:this._disabled}set disabled(t){this._disabled=kh(t),this.focused&&(this.focused=!1,this.stateChanges.next())}get id(){return this._id}set id(t){this._id=t||this._uid}get required(){return this._required}set required(t){this._required=kh(t)}get type(){return this._type}set type(t){this._type=t||"text",this._validateType(),!this._isTextarea&&zh().has(this._type)&&(this._elementRef.nativeElement.type=this._type)}get value(){return this._inputValueAccessor.value}set value(t){t!==this.value&&(this._inputValueAccessor.value=t,this.stateChanges.next())}get readonly(){return this._readonly}set readonly(t){this._readonly=kh(t)}ngAfterViewInit(){this._platform.isBrowser&&this._autofillMonitor.monitor(this._elementRef.nativeElement).subscribe(t=>{this.autofilled=t.isAutofilled,this.stateChanges.next()})}ngOnChanges(){this.stateChanges.next()}ngOnDestroy(){this.stateChanges.complete(),this._platform.isBrowser&&this._autofillMonitor.stopMonitoring(this._elementRef.nativeElement)}ngDoCheck(){this.ngControl&&this.updateErrorState(),this._dirtyCheckNativeValue(),this._dirtyCheckPlaceholder()}focus(t){this._elementRef.nativeElement.focus(t)}_focusChanged(t){t===this.focused||this.readonly&&t||(this.focused=t,this.stateChanges.next())}_onInput(){}_dirtyCheckPlaceholder(){const t=this._formField,e=t&&t._hideControlPlaceholder()?null:this.placeholder;if(e!==this._previousPlaceholder){const t=this._elementRef.nativeElement;this._previousPlaceholder=e,e?t.setAttribute("placeholder",e):t.removeAttribute("placeholder")}}_dirtyCheckNativeValue(){const t=this._elementRef.nativeElement.value;this._previousNativeValue!==t&&(this._previousNativeValue=t,this.stateChanges.next())}_validateType(){if(py.indexOf(this._type)>-1)throw Error(`Input type "${this._type}" isn't supported by matInput.`)}_isNeverEmpty(){return this._neverEmptyInputTypes.indexOf(this._type)>-1}_isBadInput(){let t=this._elementRef.nativeElement.validity;return t&&t.badInput}get empty(){return!(this._isNeverEmpty()||this._elementRef.nativeElement.value||this._isBadInput()||this.autofilled)}get shouldLabelFloat(){if(this._isNativeSelect){const t=this._elementRef.nativeElement,e=t.options[0];return this.focused||t.multiple||!this.empty||!!(t.selectedIndex>-1&&e&&e.label)}return this.focused||!this.empty}setDescribedByIds(t){this._ariaDescribedby=t.join(" ")}onContainerClick(){this.focused||this.focus()}}return t.\u0275fac=function(e){return new(e||t)(Ao(Ga),Ao(Gh),Ao(Zg,10),Ao(W_,8),Ao(ay,8),Ao(Sf),Ao(dy,10),Ao(Ug),Ao(Rl),Ao(Rg,8))},t.\u0275dir=ye({type:t,selectors:[["input","matInput",""],["textarea","matInput",""],["select","matNativeControl",""],["input","matNativeControl",""],["textarea","matNativeControl",""]],hostAttrs:[1,"mat-input-element","mat-form-field-autofill-control"],hostVars:10,hostBindings:function(t,e){1&t&&qo("focus",(function(){return e._focusChanged(!0)}))("blur",(function(){return e._focusChanged(!1)}))("input",(function(){return e._onInput()})),2&t&&(Ca("disabled",e.disabled)("required",e.required),To("id",e.id)("data-placeholder",e.placeholder)("readonly",e.readonly&&!e._isNativeSelect||null)("aria-describedby",e._ariaDescribedby||null)("aria-invalid",e.errorState)("aria-required",e.required.toString()),oa("mat-input-server",e._isServer))},inputs:{id:"id",disabled:"disabled",required:"required",type:"type",value:"value",readonly:"readonly",placeholder:"placeholder",errorStateMatcher:"errorStateMatcher"},exportAs:["matInput"],features:[ja([{provide:gg,useExisting:t}]),Ia,Ae]}),t})(),yy=(()=>{class t{}return t.\u0275mod=ge({type:t}),t.\u0275inj=ut({factory:function(e){return new(e||t)},providers:[Sf],imports:[[Bg,Og],Bg,Og]}),t})();function vy(t,e){return new y(e?n=>e.schedule(by,0,{error:t,subscriber:n}):e=>e.error(t))}function by({error:t,subscriber:e}){e.error(t)}function wy(t){return function(e){const n=new Sy(t),i=e.lift(n);return n.caught=i}}class Sy{constructor(t){this.selector=t}call(t,e){return e.subscribe(new Ey(t,this.selector,this.caught))}}class Ey extends M{constructor(t,e,n){super(t),this.selector=e,this.caught=n}error(t){if(!this.isStopped){let n;try{n=this.selector(t,this.caught)}catch(e){return void super.error(e)}this._unsubscribeAndRecycle();const i=new x(this,void 0,void 0);this.add(i);const r=P(this,n,void 0,void 0,i);r!==i&&this.add(r)}}}function ky(t){return e=>e.lift(new Cy(t))}class Cy{constructor(t){this.callback=t}call(t,e){return e.subscribe(new xy(t,this.callback))}}class xy extends m{constructor(t,e){super(t),this.add(new h(e))}}function Ty(t,e){return j(t,e,1)}class Iy{}class Ry{constructor(t){this.normalizedNames=new Map,this.lazyUpdate=null,t?this.lazyInit="string"==typeof t?()=>{this.headers=new Map,t.split("\n").forEach(t=>{const e=t.indexOf(":");if(e>0){const n=t.slice(0,e),i=n.toLowerCase(),r=t.slice(e+1).trim();this.maybeSetNormalizedName(n,i),this.headers.has(i)?this.headers.get(i).push(r):this.headers.set(i,[r])}})}:()=>{this.headers=new Map,Object.keys(t).forEach(e=>{let n=t[e];const i=e.toLowerCase();"string"==typeof n&&(n=[n]),n.length>0&&(this.headers.set(i,n),this.maybeSetNormalizedName(e,i))})}:this.headers=new Map}has(t){return this.init(),this.headers.has(t.toLowerCase())}get(t){this.init();const e=this.headers.get(t.toLowerCase());return e&&e.length>0?e[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(t){return this.init(),this.headers.get(t.toLowerCase())||null}append(t,e){return this.clone({name:t,value:e,op:"a"})}set(t,e){return this.clone({name:t,value:e,op:"s"})}delete(t,e){return this.clone({name:t,value:e,op:"d"})}maybeSetNormalizedName(t,e){this.normalizedNames.has(e)||this.normalizedNames.set(e,t)}init(){this.lazyInit&&(this.lazyInit instanceof Ry?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(t=>this.applyUpdate(t)),this.lazyUpdate=null))}copyFrom(t){t.init(),Array.from(t.headers.keys()).forEach(e=>{this.headers.set(e,t.headers.get(e)),this.normalizedNames.set(e,t.normalizedNames.get(e))})}clone(t){const e=new Ry;return e.lazyInit=this.lazyInit&&this.lazyInit instanceof Ry?this.lazyInit:this,e.lazyUpdate=(this.lazyUpdate||[]).concat([t]),e}applyUpdate(t){const e=t.name.toLowerCase();switch(t.op){case"a":case"s":let n=t.value;if("string"==typeof n&&(n=[n]),0===n.length)return;this.maybeSetNormalizedName(t.name,e);const i=("a"===t.op?this.headers.get(e):void 0)||[];i.push(...n),this.headers.set(e,i);break;case"d":const r=t.value;if(r){let t=this.headers.get(e);if(!t)return;t=t.filter(t=>-1===r.indexOf(t)),0===t.length?(this.headers.delete(e),this.normalizedNames.delete(e)):this.headers.set(e,t)}else this.headers.delete(e),this.normalizedNames.delete(e)}}forEach(t){this.init(),Array.from(this.normalizedNames.keys()).forEach(e=>t(this.normalizedNames.get(e),this.headers.get(e)))}}class Oy{encodeKey(t){return Ay(t)}encodeValue(t){return Ay(t)}decodeKey(t){return decodeURIComponent(t)}decodeValue(t){return decodeURIComponent(t)}}function Ay(t){return encodeURIComponent(t).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/gi,"$").replace(/%2C/gi,",").replace(/%3B/gi,";").replace(/%2B/gi,"+").replace(/%3D/gi,"=").replace(/%3F/gi,"?").replace(/%2F/gi,"/")}class Dy{constructor(t={}){if(this.updates=null,this.cloneFrom=null,this.encoder=t.encoder||new Oy,t.fromString){if(t.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function(t,e){const n=new Map;return t.length>0&&t.split("&").forEach(t=>{const i=t.indexOf("="),[r,s]=-1==i?[e.decodeKey(t),""]:[e.decodeKey(t.slice(0,i)),e.decodeValue(t.slice(i+1))],o=n.get(r)||[];o.push(s),n.set(r,o)}),n}(t.fromString,this.encoder)}else t.fromObject?(this.map=new Map,Object.keys(t.fromObject).forEach(e=>{const n=t.fromObject[e];this.map.set(e,Array.isArray(n)?n:[n])})):this.map=null}has(t){return this.init(),this.map.has(t)}get(t){this.init();const e=this.map.get(t);return e?e[0]:null}getAll(t){return this.init(),this.map.get(t)||null}keys(){return this.init(),Array.from(this.map.keys())}append(t,e){return this.clone({param:t,value:e,op:"a"})}set(t,e){return this.clone({param:t,value:e,op:"s"})}delete(t,e){return this.clone({param:t,value:e,op:"d"})}toString(){return this.init(),this.keys().map(t=>{const e=this.encoder.encodeKey(t);return this.map.get(t).map(t=>e+"="+this.encoder.encodeValue(t)).join("&")}).filter(t=>""!==t).join("&")}clone(t){const e=new Dy({encoder:this.encoder});return e.cloneFrom=this.cloneFrom||this,e.updates=(this.updates||[]).concat([t]),e}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(t=>this.map.set(t,this.cloneFrom.map.get(t))),this.updates.forEach(t=>{switch(t.op){case"a":case"s":const e=("a"===t.op?this.map.get(t.param):void 0)||[];e.push(t.value),this.map.set(t.param,e);break;case"d":if(void 0===t.value){this.map.delete(t.param);break}{let e=this.map.get(t.param)||[];const n=e.indexOf(t.value);-1!==n&&e.splice(n,1),e.length>0?this.map.set(t.param,e):this.map.delete(t.param)}}}),this.cloneFrom=this.updates=null)}}function Py(t){return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer}function My(t){return"undefined"!=typeof Blob&&t instanceof Blob}function Ny(t){return"undefined"!=typeof FormData&&t instanceof FormData}class Ly{constructor(t,e,n,i){let r;if(this.url=e,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=t.toUpperCase(),function(t){switch(t){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||i?(this.body=void 0!==n?n:null,r=i):r=n,r&&(this.reportProgress=!!r.reportProgress,this.withCredentials=!!r.withCredentials,r.responseType&&(this.responseType=r.responseType),r.headers&&(this.headers=r.headers),r.params&&(this.params=r.params)),this.headers||(this.headers=new Ry),this.params){const t=this.params.toString();if(0===t.length)this.urlWithParams=e;else{const n=e.indexOf("?");this.urlWithParams=e+(-1===n?"?":n<e.length-1?"&":"")+t}}else this.params=new Dy,this.urlWithParams=e}serializeBody(){return null===this.body?null:Py(this.body)||My(this.body)||Ny(this.body)||"string"==typeof this.body?this.body:this.body instanceof Dy?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||Ny(this.body)?null:My(this.body)?this.body.type||null:Py(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof Dy?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||Array.isArray(this.body)?"application/json":null}clone(t={}){const e=t.method||this.method,n=t.url||this.url,i=t.responseType||this.responseType,r=void 0!==t.body?t.body:this.body,s=void 0!==t.withCredentials?t.withCredentials:this.withCredentials,o=void 0!==t.reportProgress?t.reportProgress:this.reportProgress;let a=t.headers||this.headers,c=t.params||this.params;return void 0!==t.setHeaders&&(a=Object.keys(t.setHeaders).reduce((e,n)=>e.set(n,t.setHeaders[n]),a)),t.setParams&&(c=Object.keys(t.setParams).reduce((e,n)=>e.set(n,t.setParams[n]),c)),new Ly(e,n,r,{params:c,headers:a,reportProgress:o,responseType:i,withCredentials:s})}}var Fy=function(t){return t[t.Sent=0]="Sent",t[t.UploadProgress=1]="UploadProgress",t[t.ResponseHeader=2]="ResponseHeader",t[t.DownloadProgress=3]="DownloadProgress",t[t.Response=4]="Response",t[t.User=5]="User",t}({});class Uy extends class{constructor(t,e=200,n="OK"){this.headers=t.headers||new Ry,this.status=void 0!==t.status?t.status:e,this.statusText=t.statusText||n,this.url=t.url||null,this.ok=this.status>=200&&this.status<300}}{constructor(t={}){super(t),this.type=Fy.Response,this.body=void 0!==t.body?t.body:null}clone(t={}){return new Uy({body:void 0!==t.body?t.body:this.body,headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}}function By(t,e){return{body:e,headers:t.headers,observe:t.observe,params:t.params,reportProgress:t.reportProgress,responseType:t.responseType,withCredentials:t.withCredentials}}let jy=(()=>{class t{constructor(t){this.handler=t}request(t,e,n={}){let i;if(t instanceof Ly)i=t;else{let r=void 0;r=n.headers instanceof Ry?n.headers:new Ry(n.headers);let s=void 0;n.params&&(s=n.params instanceof Dy?n.params:new Dy({fromObject:n.params})),i=new Ly(t,e,void 0!==n.body?n.body:null,{headers:r,params:s,reportProgress:n.reportProgress,responseType:n.responseType||"json",withCredentials:n.withCredentials})}const r=td(i).pipe(Ty(t=>this.handler.handle(t)));if(t instanceof Ly||"events"===n.observe)return r;const s=r.pipe(od(t=>t instanceof Uy));switch(n.observe||"body"){case"body":switch(i.responseType){case"arraybuffer":return s.pipe(N(t=>{if(null!==t.body&&!(t.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return t.body}));case"blob":return s.pipe(N(t=>{if(null!==t.body&&!(t.body instanceof Blob))throw new Error("Response is not a Blob.");return t.body}));case"text":return s.pipe(N(t=>{if(null!==t.body&&"string"!=typeof t.body)throw new Error("Response is not a string.");return t.body}));case"json":default:return s.pipe(N(t=>t.body))}case"response":return s;default:throw new Error(`Unreachable: unhandled observe type ${n.observe}}`)}}delete(t,e={}){return this.request("DELETE",t,e)}get(t,e={}){return this.request("GET",t,e)}head(t,e={}){return this.request("HEAD",t,e)}jsonp(t,e){return this.request("JSONP",t,{params:(new Dy).append(e,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,e={}){return this.request("OPTIONS",t,e)}patch(t,e,n={}){return this.request("PATCH",t,By(n,e))}post(t,e,n={}){return this.request("POST",t,By(n,e))}put(t,e,n={}){return this.request("PUT",t,By(n,e))}}return t.\u0275fac=function(e){return new(e||t)(zt(Iy))},t.\u0275prov=lt({token:t,factory:t.\u0275fac}),t})();const Vy=["*"];function Ky(t){return Error(`Unable to find icon with the name "${t}"`)}function qy(t){return Error(`The URL provided to MatIconRegistry was not trusted as a resource URL via Angular's DomSanitizer. Attempted URL was "${t}".`)}function Gy(t){return Error(`The literal provided to MatIconRegistry was not trusted as safe HTML by Angular's DomSanitizer. Attempted literal was "${t}".`)}class $y{constructor(t,e){this.options=e,t.nodeName?this.svgElement=t:this.url=t}}let Hy=(()=>{class t{constructor(t,e,n,i){this._httpClient=t,this._sanitizer=e,this._errorHandler=i,this._svgIconConfigs=new Map,this._iconSetConfigs=new Map,this._cachedIconsByUrl=new Map,this._inProgressUrlFetches=new Map,this._fontCssClassesByAlias=new Map,this._defaultFontSetClass="material-icons",this._document=n}addSvgIcon(t,e,n){return this.addSvgIconInNamespace("",t,e,n)}addSvgIconLiteral(t,e,n){return this.addSvgIconLiteralInNamespace("",t,e,n)}addSvgIconInNamespace(t,e,n,i){return this._addSvgIconConfig(t,e,new $y(n,i))}addSvgIconLiteralInNamespace(t,e,n,i){const r=this._sanitizer.sanitize(er.HTML,n);if(!r)throw Gy(n);const s=this._createSvgElementForSingleIcon(r,i);return this._addSvgIconConfig(t,e,new $y(s,i))}addSvgIconSet(t,e){return this.addSvgIconSetInNamespace("",t,e)}addSvgIconSetLiteral(t,e){return this.addSvgIconSetLiteralInNamespace("",t,e)}addSvgIconSetInNamespace(t,e,n){return this._addSvgIconSetConfig(t,new $y(e,n))}addSvgIconSetLiteralInNamespace(t,e,n){const i=this._sanitizer.sanitize(er.HTML,e);if(!i)throw Gy(e);const r=this._svgElementFromString(i);return this._addSvgIconSetConfig(t,new $y(r,n))}registerFontClassAlias(t,e=t){return this._fontCssClassesByAlias.set(t,e),this}classNameForFontAlias(t){return this._fontCssClassesByAlias.get(t)||t}setDefaultFontSetClass(t){return this._defaultFontSetClass=t,this}getDefaultFontSetClass(){return this._defaultFontSetClass}getSvgIconFromUrl(t){const e=this._sanitizer.sanitize(er.RESOURCE_URL,t);if(!e)throw qy(t);const n=this._cachedIconsByUrl.get(e);return n?td(zy(n)):this._loadSvgIconFromConfig(new $y(t)).pipe(id(t=>this._cachedIconsByUrl.set(e,t)),N(t=>zy(t)))}getNamedSvgIcon(t,e=""){const n=Wy(e,t),i=this._svgIconConfigs.get(n);if(i)return this._getSvgFromConfig(i);const r=this._iconSetConfigs.get(e);return r?this._getSvgFromIconSetConfigs(t,r):vy(Ky(n))}ngOnDestroy(){this._svgIconConfigs.clear(),this._iconSetConfigs.clear(),this._cachedIconsByUrl.clear()}_getSvgFromConfig(t){return t.svgElement?td(zy(t.svgElement)):this._loadSvgIconFromConfig(t).pipe(id(e=>t.svgElement=e),N(t=>zy(t)))}_getSvgFromIconSetConfigs(t,e){const n=this._extractIconWithNameFromAnySet(t,e);return n?td(n):jg(e.filter(t=>!t.svgElement).map(t=>this._loadSvgIconSetFromConfig(t).pipe(wy(e=>{const n=this._sanitizer.sanitize(er.RESOURCE_URL,t.url);return this._errorHandler.handleError(new Error(`Loading icon set URL: ${n} failed: ${e.message}`)),td(null)})))).pipe(N(()=>{const n=this._extractIconWithNameFromAnySet(t,e);if(!n)throw Ky(t);return n}))}_extractIconWithNameFromAnySet(t,e){for(let n=e.length-1;n>=0;n--){const i=e[n];if(i.svgElement){const e=this._extractSvgIconFromSet(i.svgElement,t,i.options);if(e)return e}}return null}_loadSvgIconFromConfig(t){return this._fetchIcon(t).pipe(N(e=>this._createSvgElementForSingleIcon(e,t.options)))}_loadSvgIconSetFromConfig(t){return t.svgElement?td(t.svgElement):this._fetchIcon(t).pipe(N(e=>(t.svgElement||(t.svgElement=this._svgElementFromString(e)),t.svgElement)))}_createSvgElementForSingleIcon(t,e){const n=this._svgElementFromString(t);return this._setSvgAttributes(n,e),n}_extractSvgIconFromSet(t,e,n){const i=t.querySelector(`[id="${e}"]`);if(!i)return null;const r=i.cloneNode(!0);if(r.removeAttribute("id"),"svg"===r.nodeName.toLowerCase())return this._setSvgAttributes(r,n);if("symbol"===r.nodeName.toLowerCase())return this._setSvgAttributes(this._toSvgElement(r),n);const s=this._svgElementFromString("<svg></svg>");return s.appendChild(r),this._setSvgAttributes(s,n)}_svgElementFromString(t){const e=this._document.createElement("DIV");e.innerHTML=t;const n=e.querySelector("svg");if(!n)throw Error("<svg> tag not found");return n}_toSvgElement(t){const e=this._svgElementFromString("<svg></svg>"),n=t.attributes;for(let i=0;i<n.length;i++){const{name:t,value:r}=n[i];"id"!==t&&e.setAttribute(t,r)}for(let i=0;i<t.childNodes.length;i++)t.childNodes[i].nodeType===this._document.ELEMENT_NODE&&e.appendChild(t.childNodes[i].cloneNode(!0));return e}_setSvgAttributes(t,e){return t.setAttribute("fit",""),t.setAttribute("height","100%"),t.setAttribute("width","100%"),t.setAttribute("preserveAspectRatio","xMidYMid meet"),t.setAttribute("focusable","false"),e&&e.viewBox&&t.setAttribute("viewBox",e.viewBox),t}_fetchIcon(t){var e;const{url:n,options:i}=t,r=null!==(e=null==i?void 0:i.withCredentials)&&void 0!==e&&e;if(!this._httpClient)throw Error("Could not find HttpClient provider for use with Angular Material icons. Please include the HttpClientModule from @angular/common/http in your app imports.");if(null==n)throw Error(`Cannot fetch icon from URL "${n}".`);const s=this._sanitizer.sanitize(er.RESOURCE_URL,n);if(!s)throw qy(n);const o=this._inProgressUrlFetches.get(s);if(o)return o;const a=this._httpClient.get(s,{responseType:"text",withCredentials:r}).pipe(ky(()=>this._inProgressUrlFetches.delete(s)),J());return this._inProgressUrlFetches.set(s,a),a}_addSvgIconConfig(t,e,n){return this._svgIconConfigs.set(Wy(t,e),n),this}_addSvgIconSetConfig(t,e){const n=this._iconSetConfigs.get(t);return n?n.push(e):this._iconSetConfigs.set(t,[e]),this}}return t.\u0275fac=function(e){return new(e||t)(zt(jy,8),zt(vh),zt(ou,8),zt(vi))},t.\u0275prov=lt({factory:function(){return new t(zt(jy,8),zt(vh),zt(ou,8),zt(vi))},token:t,providedIn:"root"}),t})();function zy(t){return t.cloneNode(!0)}function Wy(t,e){return t+":"+e}class Yy{constructor(t){this._elementRef=t}}const Xy=yf(Yy),Qy=new Ft("mat-icon-location",{providedIn:"root",factory:function(){const t=Wt(ou),e=t?t.location:null;return{getPathname:()=>e?e.pathname+e.search:""}}}),Zy=["clip-path","color-profile","src","cursor","fill","filter","marker","marker-start","marker-mid","marker-end","mask","stroke"],Jy=Zy.map(t=>`[${t}]`).join(", "),tv=/^url\(['"]?#(.*?)['"]?\)$/;let ev=(()=>{class t extends Xy{constructor(t,e,n,i,r){super(t),this._iconRegistry=e,this._location=i,this._errorHandler=r,this._inline=!1,this._currentIconFetch=h.EMPTY,n||t.nativeElement.setAttribute("aria-hidden","true")}get inline(){return this._inline}set inline(t){this._inline=kh(t)}get fontSet(){return this._fontSet}set fontSet(t){this._fontSet=this._cleanupFontValue(t)}get fontIcon(){return this._fontIcon}set fontIcon(t){this._fontIcon=this._cleanupFontValue(t)}_splitIconName(t){if(!t)return["",""];const e=t.split(":");switch(e.length){case 1:return["",e[0]];case 2:return e;default:throw Error(`Invalid icon name: "${t}"`)}}ngOnChanges(t){const e=t.svgIcon;if(e)if(this._currentIconFetch.unsubscribe(),this.svgIcon){const[t,e]=this._splitIconName(this.svgIcon);this._currentIconFetch=this._iconRegistry.getNamedSvgIcon(e,t).pipe(dd(1)).subscribe(t=>this._setSvgElement(t),n=>{this._errorHandler.handleError(new Error(`Error retrieving icon ${t}:${e}! ${n.message}`))})}else e.previousValue&&this._clearSvgElement();this._usingFontIcon()&&this._updateFontIconClasses()}ngOnInit(){this._usingFontIcon()&&this._updateFontIconClasses()}ngAfterViewChecked(){const t=this._elementsWithExternalReferences;if(t&&t.size){const t=this._location.getPathname();t!==this._previousPath&&(this._previousPath=t,this._prependPathToReferences(t))}}ngOnDestroy(){this._currentIconFetch.unsubscribe(),this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear()}_usingFontIcon(){return!this.svgIcon}_setSvgElement(t){this._clearSvgElement();const e=t.querySelectorAll("style");for(let i=0;i<e.length;i++)e[i].textContent+=" ";const n=this._location.getPathname();this._previousPath=n,this._cacheChildrenWithExternalReferences(t),this._prependPathToReferences(n),this._elementRef.nativeElement.appendChild(t)}_clearSvgElement(){const t=this._elementRef.nativeElement;let e=t.childNodes.length;for(this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear();e--;){const n=t.childNodes[e];1===n.nodeType&&"svg"!==n.nodeName.toLowerCase()||t.removeChild(n)}}_updateFontIconClasses(){if(!this._usingFontIcon())return;const t=this._elementRef.nativeElement,e=this.fontSet?this._iconRegistry.classNameForFontAlias(this.fontSet):this._iconRegistry.getDefaultFontSetClass();e!=this._previousFontSetClass&&(this._previousFontSetClass&&t.classList.remove(this._previousFontSetClass),e&&t.classList.add(e),this._previousFontSetClass=e),this.fontIcon!=this._previousFontIconClass&&(this._previousFontIconClass&&t.classList.remove(this._previousFontIconClass),this.fontIcon&&t.classList.add(this.fontIcon),this._previousFontIconClass=this.fontIcon)}_cleanupFontValue(t){return"string"==typeof t?t.trim().split(" ")[0]:t}_prependPathToReferences(t){const e=this._elementsWithExternalReferences;e&&e.forEach((e,n)=>{e.forEach(e=>{n.setAttribute(e.name,`url('${t}#${e.value}')`)})})}_cacheChildrenWithExternalReferences(t){const e=t.querySelectorAll(Jy),n=this._elementsWithExternalReferences=this._elementsWithExternalReferences||new Map;for(let i=0;i<e.length;i++)Zy.forEach(t=>{const r=e[i],s=r.getAttribute(t),o=s?s.match(tv):null;if(o){let e=n.get(r);e||(e=[],n.set(r,e)),e.push({name:t,value:o[1]})}})}}return t.\u0275fac=function(e){return new(e||t)(Ao(Ga),Ao(Hy),Do("aria-hidden"),Ao(Qy),Ao(vi))},t.\u0275cmp=de({type:t,selectors:[["mat-icon"]],hostAttrs:["role","img",1,"mat-icon","notranslate"],hostVars:4,hostBindings:function(t,e){2&t&&oa("mat-icon-inline",e.inline)("mat-icon-no-color","primary"!==e.color&&"accent"!==e.color&&"warn"!==e.color)},inputs:{color:"color",inline:"inline",fontSet:"fontSet",fontIcon:"fontIcon",svgIcon:"svgIcon"},exportAs:["matIcon"],features:[Ia,Ae],ngContentSelectors:Vy,decls:1,vars:0,template:function(t,e){1&t&&(Xo(),Qo(0))},styles:[".mat-icon{background-repeat:no-repeat;display:inline-block;fill:currentColor;height:24px;width:24px}.mat-icon.mat-icon-inline{font-size:inherit;height:inherit;line-height:inherit;width:inherit}[dir=rtl] .mat-icon-rtl-mirror{transform:scale(-1, 1)}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon{display:block}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button .mat-icon{margin:auto}\n"],encapsulation:2,changeDetection:0}),t})(),nv=(()=>{class t{}return t.\u0275mod=ge({type:t}),t.\u0275inj=ut({factory:function(e){return new(e||t)},imports:[[gf],gf]}),t})();const iv=["*",[["mat-card-footer"]]],rv=["*","mat-card-footer"];let sv=(()=>{class t{constructor(t){this._animationMode=t}}return t.\u0275fac=function(e){return new(e||t)(Ao(cf,8))},t.\u0275cmp=de({type:t,selectors:[["mat-card"]],hostAttrs:[1,"mat-card","mat-focus-indicator"],hostVars:2,hostBindings:function(t,e){2&t&&oa("_mat-animation-noopable","NoopAnimations"===e._animationMode)},exportAs:["matCard"],ngContentSelectors:rv,decls:2,vars:0,template:function(t,e){1&t&&(Xo(iv),Qo(0),Qo(1,1))},styles:[".mat-card{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);display:block;position:relative;padding:16px;border-radius:4px}._mat-animation-noopable.mat-card{transition:none;animation:none}.mat-card .mat-divider-horizontal{position:absolute;left:0;width:100%}[dir=rtl] .mat-card .mat-divider-horizontal{left:auto;right:0}.mat-card .mat-divider-horizontal.mat-divider-inset{position:static;margin:0}[dir=rtl] .mat-card .mat-divider-horizontal.mat-divider-inset{margin-right:0}.cdk-high-contrast-active .mat-card{outline:solid 1px}.mat-card-actions,.mat-card-subtitle,.mat-card-content{display:block;margin-bottom:16px}.mat-card-title{display:block;margin-bottom:8px}.mat-card-actions{margin-left:-8px;margin-right:-8px;padding:8px 0}.mat-card-actions-align-end{display:flex;justify-content:flex-end}.mat-card-image{width:calc(100% + 32px);margin:0 -16px 16px -16px}.mat-card-footer{display:block;margin:0 -16px -16px -16px}.mat-card-actions .mat-button,.mat-card-actions .mat-raised-button,.mat-card-actions .mat-stroked-button{margin:0 8px}.mat-card-header{display:flex;flex-direction:row}.mat-card-header .mat-card-title{margin-bottom:12px}.mat-card-header-text{margin:0 16px}.mat-card-avatar{height:40px;width:40px;border-radius:50%;flex-shrink:0;object-fit:cover}.mat-card-title-group{display:flex;justify-content:space-between}.mat-card-sm-image{width:80px;height:80px}.mat-card-md-image{width:112px;height:112px}.mat-card-lg-image{width:152px;height:152px}.mat-card-xl-image{width:240px;height:240px;margin:-8px}.mat-card-title-group>.mat-card-xl-image{margin:-8px 0 8px}@media(max-width: 599px){.mat-card-title-group{margin:0}.mat-card-xl-image{margin-left:0;margin-right:0}}.mat-card>:first-child,.mat-card-content>:first-child{margin-top:0}.mat-card>:last-child:not(.mat-card-footer),.mat-card-content>:last-child:not(.mat-card-footer){margin-bottom:0}.mat-card-image:first-child{margin-top:-16px;border-top-left-radius:inherit;border-top-right-radius:inherit}.mat-card>.mat-card-actions:last-child{margin-bottom:-8px;padding-bottom:0}.mat-card-actions .mat-button:first-child,.mat-card-actions .mat-raised-button:first-child,.mat-card-actions .mat-stroked-button:first-child{margin-left:0;margin-right:0}.mat-card-title:not(:first-child),.mat-card-subtitle:not(:first-child){margin-top:-4px}.mat-card-header .mat-card-subtitle:not(:first-child){margin-top:-8px}.mat-card>.mat-card-xl-image:first-child{margin-top:-8px}.mat-card>.mat-card-xl-image:last-child{margin-bottom:-8px}\n"],encapsulation:2,changeDetection:0}),t})(),ov=(()=>{class t{}return t.\u0275mod=ge({type:t}),t.\u0275inj=ut({factory:function(e){return new(e||t)},imports:[[gf],gf]}),t})();const av=["mat-button",""],cv=["*"],lv=["mat-button","mat-flat-button","mat-icon-button","mat-raised-button","mat-stroked-button","mat-mini-fab","mat-fab"];class uv{constructor(t){this._elementRef=t}}const hv=yf(_f(vf(uv)));let dv=(()=>{class t extends hv{constructor(t,e,n){super(t),this._focusMonitor=e,this._animationMode=n,this.isRoundButton=this._hasHostAttributes("mat-fab","mat-mini-fab"),this.isIconButton=this._hasHostAttributes("mat-icon-button");for(const i of lv)this._hasHostAttributes(i)&&this._getHostElement().classList.add(i);t.nativeElement.classList.add("mat-button-base"),this.isRoundButton&&(this.color="accent")}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0)}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef)}focus(t="program",e){this._focusMonitor.focusVia(this._getHostElement(),t,e)}_getHostElement(){return this._elementRef.nativeElement}_isRippleDisabled(){return this.disableRipple||this.disabled}_hasHostAttributes(...t){return t.some(t=>this._getHostElement().hasAttribute(t))}}return t.\u0275fac=function(e){return new(e||t)(Ao(Ga),Ao(Rd),Ao(cf,8))},t.\u0275cmp=de({type:t,selectors:[["button","mat-button",""],["button","mat-raised-button",""],["button","mat-icon-button",""],["button","mat-fab",""],["button","mat-mini-fab",""],["button","mat-stroked-button",""],["button","mat-flat-button",""]],viewQuery:function(t,e){var n;1&t&&Jc(Pf,!0),2&t&&Qc(n=rl())&&(e.ripple=n.first)},hostAttrs:[1,"mat-focus-indicator"],hostVars:5,hostBindings:function(t,e){2&t&&(To("disabled",e.disabled||null),oa("_mat-animation-noopable","NoopAnimations"===e._animationMode)("mat-button-disabled",e.disabled))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color"},exportAs:["matButton"],features:[Ia],attrs:av,ngContentSelectors:cv,decls:4,vars:5,consts:[[1,"mat-button-wrapper"],["matRipple","",1,"mat-button-ripple",3,"matRippleDisabled","matRippleCentered","matRippleTrigger"],[1,"mat-button-focus-overlay"]],template:function(t,e){1&t&&(Xo(),No(0,"span",0),Qo(1),Lo(),Fo(2,"div",1),Fo(3,"div",2)),2&t&&(kr(2),oa("mat-button-ripple-round",e.isRoundButton||e.isIconButton),Po("matRippleDisabled",e._isRippleDisabled())("matRippleCentered",e.isIconButton)("matRippleTrigger",e._getHostElement()))},directives:[Pf],styles:[".mat-button .mat-button-focus-overlay,.mat-icon-button .mat-button-focus-overlay{opacity:0}.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:.04}@media(hover: none){.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:0}}.mat-button,.mat-icon-button,.mat-stroked-button,.mat-flat-button{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-button.mat-button-disabled,.mat-icon-button.mat-button-disabled,.mat-stroked-button.mat-button-disabled,.mat-flat-button.mat-button-disabled{cursor:default}.mat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-button.cdk-program-focused .mat-button-focus-overlay,.mat-icon-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-icon-button.cdk-program-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-program-focused .mat-button-focus-overlay,.mat-flat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-flat-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-raised-button{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-raised-button::-moz-focus-inner{border:0}.mat-raised-button.mat-button-disabled{cursor:default}.mat-raised-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-raised-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-raised-button::-moz-focus-inner{border:0}._mat-animation-noopable.mat-raised-button{transition:none;animation:none}.mat-stroked-button{border:1px solid currentColor;padding:0 15px;line-height:34px}.mat-stroked-button .mat-button-ripple.mat-ripple,.mat-stroked-button .mat-button-focus-overlay{top:-1px;left:-1px;right:-1px;bottom:-1px}.mat-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:56px;height:56px;padding:0;flex-shrink:0}.mat-fab::-moz-focus-inner{border:0}.mat-fab.mat-button-disabled{cursor:default}.mat-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-fab::-moz-focus-inner{border:0}._mat-animation-noopable.mat-fab{transition:none;animation:none}.mat-fab .mat-button-wrapper{padding:16px 0;display:inline-block;line-height:24px}.mat-mini-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:40px;height:40px;padding:0;flex-shrink:0}.mat-mini-fab::-moz-focus-inner{border:0}.mat-mini-fab.mat-button-disabled{cursor:default}.mat-mini-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-mini-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-mini-fab::-moz-focus-inner{border:0}._mat-animation-noopable.mat-mini-fab{transition:none;animation:none}.mat-mini-fab .mat-button-wrapper{padding:8px 0;display:inline-block;line-height:24px}.mat-icon-button{padding:0;min-width:0;width:40px;height:40px;flex-shrink:0;line-height:40px;border-radius:50%}.mat-icon-button i,.mat-icon-button .mat-icon{line-height:24px}.mat-button-ripple.mat-ripple,.mat-button-focus-overlay{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-button-ripple.mat-ripple:not(:empty){transform:translateZ(0)}.mat-button-focus-overlay{opacity:0;transition:opacity 200ms cubic-bezier(0.35, 0, 0.25, 1),background-color 200ms cubic-bezier(0.35, 0, 0.25, 1)}._mat-animation-noopable .mat-button-focus-overlay{transition:none}.cdk-high-contrast-active .mat-button-focus-overlay{background-color:#fff}.cdk-high-contrast-black-on-white .mat-button-focus-overlay{background-color:#000}.mat-button-ripple-round{border-radius:50%;z-index:1}.mat-button .mat-button-wrapper>*,.mat-flat-button .mat-button-wrapper>*,.mat-stroked-button .mat-button-wrapper>*,.mat-raised-button .mat-button-wrapper>*,.mat-icon-button .mat-button-wrapper>*,.mat-fab .mat-button-wrapper>*,.mat-mini-fab .mat-button-wrapper>*{vertical-align:middle}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button{display:block;font-size:inherit;width:2.5em;height:2.5em}.cdk-high-contrast-active .mat-button,.cdk-high-contrast-active .mat-flat-button,.cdk-high-contrast-active .mat-raised-button,.cdk-high-contrast-active .mat-icon-button,.cdk-high-contrast-active .mat-fab,.cdk-high-contrast-active .mat-mini-fab{outline:solid 1px}\n"],encapsulation:2,changeDetection:0}),t})(),pv=(()=>{class t{}return t.\u0275mod=ge({type:t}),t.\u0275inj=ut({factory:function(e){return new(e||t)},imports:[[Mf,gf],gf]}),t})();function mv(t,e){return n=>n.lift(new fv(t,e))}class fv{constructor(t,e){this.compare=t,this.keySelector=e}call(t,e){return e.subscribe(new gv(t,this.compare,this.keySelector))}}class gv extends m{constructor(t,e,n){super(t),this.keySelector=n,this.hasKey=!1,"function"==typeof e&&(this.compare=e)}compare(t,e){return t===e}_next(t){let e;try{const{keySelector:n}=this;e=n?n(t):t}catch(i){return this.destination.error(i)}let n=!1;if(this.hasKey)try{const{compare:t}=this;n=t(this.key,e)}catch(i){return this.destination.error(i)}else this.hasKey=!0;n||(this.key=e,this.destination.next(t))}}function _v(t,e){return"function"==typeof e?n=>n.pipe(_v((n,i)=>B(t(n,i)).pipe(N((t,r)=>e(n,t,i,r))))):e=>e.lift(new yv(t))}class yv{constructor(t){this.project=t}call(t,e){return e.subscribe(new vv(t,this.project))}}class vv extends M{constructor(t,e){super(t),this.project=e,this.index=0}_next(t){let e;const n=this.index++;try{e=this.project(t,n)}catch(i){return void this.destination.error(i)}this._innerSub(e,t,n)}_innerSub(t,e,n){const i=this.innerSubscription;i&&i.unsubscribe();const r=new x(this,e,n),s=this.destination;s.add(r),this.innerSubscription=P(this,t,void 0,void 0,r),this.innerSubscription!==r&&s.add(this.innerSubscription)}_complete(){const{innerSubscription:t}=this;t&&!t.closed||super._complete(),this.unsubscribe()}_unsubscribe(){this.innerSubscription=null}notifyComplete(t){this.destination.remove(t),this.innerSubscription=null,this.isStopped&&super._complete()}notifyNext(t,e,n,i,r){this.destination.next(e)}}class bv extends Oh{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}schedule(t,e=0){return e>0?super.schedule(t,e):(this.delay=e,this.state=t,this.scheduler.flush(this),this)}execute(t,e){return e>0||this.closed?super.execute(t,e):this._execute(t,e)}requestAsyncId(t,e,n=0){return null!==n&&n>0||null===n&&this.delay>0?super.requestAsyncId(t,e,n):t.flush(this)}}class wv extends Dh{}const Sv=new wv(bv);let Ev=(()=>{class t{constructor(t,e,n){this.kind=t,this.value=e,this.error=n,this.hasValue="N"===t}observe(t){switch(this.kind){case"N":return t.next&&t.next(this.value);case"E":return t.error&&t.error(this.error);case"C":return t.complete&&t.complete()}}do(t,e,n){switch(this.kind){case"N":return t&&t(this.value);case"E":return e&&e(this.error);case"C":return n&&n()}}accept(t,e,n){return t&&"function"==typeof t.next?this.observe(t):this.do(t,e,n)}toObservable(){switch(this.kind){case"N":return td(this.value);case"E":return vy(this.error);case"C":return hd()}throw new Error("unexpected notification kind value")}static createNext(e){return void 0!==e?new t("N",e):t.undefinedValueNotification}static createError(e){return new t("E",void 0,e)}static createComplete(){return t.completeNotification}}return t.completeNotification=new t("C"),t.undefinedValueNotification=new t("N",void 0),t})();class kv extends m{constructor(t,e,n=0){super(t),this.scheduler=e,this.delay=n}static dispatch(t){const{notification:e,destination:n}=t;e.observe(n),this.unsubscribe()}scheduleMessage(t){this.destination.add(this.scheduler.schedule(kv.dispatch,this.delay,new Cv(t,this.destination)))}_next(t){this.scheduleMessage(Ev.createNext(t))}_error(t){this.scheduleMessage(Ev.createError(t)),this.unsubscribe()}_complete(){this.scheduleMessage(Ev.createComplete()),this.unsubscribe()}}class Cv{constructor(t,e){this.notification=t,this.destination=e}}class xv extends E{constructor(t=Number.POSITIVE_INFINITY,e=Number.POSITIVE_INFINITY,n){super(),this.scheduler=n,this._events=[],this._infiniteTimeWindow=!1,this._bufferSize=t<1?1:t,this._windowTime=e<1?1:e,e===Number.POSITIVE_INFINITY?(this._infiniteTimeWindow=!0,this.next=this.nextInfiniteTimeWindow):this.next=this.nextTimeWindow}nextInfiniteTimeWindow(t){const e=this._events;e.push(t),e.length>this._bufferSize&&e.shift(),super.next(t)}nextTimeWindow(t){this._events.push(new Tv(this._getNow(),t)),this._trimBufferThenGetEvents(),super.next(t)}_subscribe(t){const e=this._infiniteTimeWindow,n=e?this._events:this._trimBufferThenGetEvents(),i=this.scheduler,r=n.length;let s;if(this.closed)throw new b;if(this.isStopped||this.hasError?s=h.EMPTY:(this.observers.push(t),s=new w(this,t)),i&&t.add(t=new kv(t,i)),e)for(let o=0;o<r&&!t.closed;o++)t.next(n[o]);else for(let o=0;o<r&&!t.closed;o++)t.next(n[o].value);return this.hasError?t.error(this.thrownError):this.isStopped&&t.complete(),s}_getNow(){return(this.scheduler||Sv).now()}_trimBufferThenGetEvents(){const t=this._getNow(),e=this._bufferSize,n=this._windowTime,i=this._events,r=i.length;let s=0;for(;s<r&&!(t-i[s].time<n);)s++;return r>e&&(s=Math.max(s,r-e)),s>0&&i.splice(0,s),i}}class Tv{constructor(t,e){this.time=t,this.value=e}}function Iv(t,e,n){let i;return i=t&&"object"==typeof t?t:{bufferSize:t,windowTime:e,refCount:!1,scheduler:n},t=>t.lift(function({bufferSize:t=Number.POSITIVE_INFINITY,windowTime:e=Number.POSITIVE_INFINITY,refCount:n,scheduler:i}){let r,s,o=0,a=!1,c=!1;return function(l){o++,r&&!a||(a=!1,r=new xv(t,e,i),s=l.subscribe({next(t){r.next(t)},error(t){a=!0,r.error(t)},complete(){c=!0,s=void 0,r.complete()}}));const u=r.subscribe(this);this.add(()=>{o--,u.unsubscribe(),s&&!c&&n&&0===o&&(s.unsubscribe(),s=void 0,r=void 0)})}}(i))}class Rv{constructor(t=!1,e,n=!0){this._multiple=t,this._emitChanges=n,this._selection=new Set,this._deselectedToEmit=[],this._selectedToEmit=[],this.changed=new E,e&&e.length&&(t?e.forEach(t=>this._markSelected(t)):this._markSelected(e[0]),this._selectedToEmit.length=0)}get selected(){return this._selected||(this._selected=Array.from(this._selection.values())),this._selected}select(...t){this._verifyValueAssignment(t),t.forEach(t=>this._markSelected(t)),this._emitChangeEvent()}deselect(...t){this._verifyValueAssignment(t),t.forEach(t=>this._unmarkSelected(t)),this._emitChangeEvent()}toggle(t){this.isSelected(t)?this.deselect(t):this.select(t)}clear(){this._unmarkAll(),this._emitChangeEvent()}isSelected(t){return this._selection.has(t)}isEmpty(){return 0===this._selection.size}hasValue(){return!this.isEmpty()}sort(t){this._multiple&&this.selected&&this._selected.sort(t)}isMultipleSelection(){return this._multiple}_emitChangeEvent(){this._selected=null,(this._selectedToEmit.length||this._deselectedToEmit.length)&&(this.changed.next({source:this,added:this._selectedToEmit,removed:this._deselectedToEmit}),this._deselectedToEmit=[],this._selectedToEmit=[])}_markSelected(t){this.isSelected(t)||(this._multiple||this._unmarkAll(),this._selection.add(t),this._emitChanges&&this._selectedToEmit.push(t))}_unmarkSelected(t){this.isSelected(t)&&(this._selection.delete(t),this._emitChanges&&this._deselectedToEmit.push(t))}_unmarkAll(){this.isEmpty()||this._selection.forEach(t=>this._unmarkSelected(t))}_verifyValueAssignment(t){if(t.length>1&&!this._multiple)throw Error("Cannot pass multiple values into SelectionModel with single-value mode.")}}let Ov=(()=>{class t{constructor(t,e,n){this._ngZone=t,this._platform=e,this._scrolled=new E,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=n}register(t){this.scrollContainers.has(t)||this.scrollContainers.set(t,t.elementScrolled().subscribe(()=>this._scrolled.next(t)))}deregister(t){const e=this.scrollContainers.get(t);e&&(e.unsubscribe(),this.scrollContainers.delete(t))}scrolled(t=20){return this._platform.isBrowser?new y(e=>{this._globalSubscription||this._addGlobalListener();const n=t>0?this._scrolled.pipe(Lg(t)).subscribe(e):this._scrolled.subscribe(e);return this._scrolledCount++,()=>{n.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):td()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((t,e)=>this.deregister(e)),this._scrolled.complete()}ancestorScrolled(t,e){const n=this.getAncestorScrollContainers(t);return this.scrolled(e).pipe(od(t=>!t||n.indexOf(t)>-1))}getAncestorScrollContainers(t){const e=[];return this.scrollContainers.forEach((n,i)=>{this._scrollableContainsElement(i,t)&&e.push(i)}),e}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_scrollableContainsElement(t,e){let n=e.nativeElement,i=t.getElementRef().nativeElement;do{if(n==i)return!0}while(n=n.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>$f(this._getWindow().document,"scroll").subscribe(()=>this._scrolled.next()))}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}}return t.\u0275fac=function(e){return new(e||t)(zt(Rl),zt(Gh),zt(ou,8))},t.\u0275prov=lt({factory:function(){return new t(zt(Rl),zt(Gh),zt(ou,8))},token:t,providedIn:"root"}),t})(),Av=(()=>{class t{constructor(t,e,n,i){this.elementRef=t,this.scrollDispatcher=e,this.ngZone=n,this.dir=i,this._destroyed=new E,this._elementScrolled=new y(t=>this.ngZone.runOutsideAngular(()=>$f(this.elementRef.nativeElement,"scroll").pipe(Hf(this._destroyed)).subscribe(t)))}ngOnInit(){this.scrollDispatcher.register(this)}ngOnDestroy(){this.scrollDispatcher.deregister(this),this._destroyed.next(),this._destroyed.complete()}elementScrolled(){return this._elementScrolled}getElementRef(){return this.elementRef}scrollTo(t){const e=this.elementRef.nativeElement,n=this.dir&&"rtl"==this.dir.value;null==t.left&&(t.left=n?t.end:t.start),null==t.right&&(t.right=n?t.start:t.end),null!=t.bottom&&(t.top=e.scrollHeight-e.clientHeight-t.bottom),n&&0!=Zh()?(null!=t.left&&(t.right=e.scrollWidth-e.clientWidth-t.left),2==Zh()?t.left=t.right:1==Zh()&&(t.left=t.right?-t.right:t.right)):null!=t.right&&(t.left=e.scrollWidth-e.clientWidth-t.right),this._applyScrollToOptions(t)}_applyScrollToOptions(t){const e=this.elementRef.nativeElement;"object"==typeof document&&"scrollBehavior"in document.documentElement.style?e.scrollTo(t):(null!=t.top&&(e.scrollTop=t.top),null!=t.left&&(e.scrollLeft=t.left))}measureScrollOffset(t){const e=this.elementRef.nativeElement;if("top"==t)return e.scrollTop;if("bottom"==t)return e.scrollHeight-e.clientHeight-e.scrollTop;const n=this.dir&&"rtl"==this.dir.value;return"start"==t?t=n?"right":"left":"end"==t&&(t=n?"left":"right"),n&&2==Zh()?"left"==t?e.scrollWidth-e.clientWidth-e.scrollLeft:e.scrollLeft:n&&1==Zh()?"left"==t?e.scrollLeft+e.scrollWidth-e.clientWidth:-e.scrollLeft:"left"==t?e.scrollLeft:e.scrollWidth-e.clientWidth-e.scrollLeft}}return t.\u0275fac=function(e){return new(e||t)(Ao(Ga),Ao(Ov),Ao(Rl),Ao(Nd,8))},t.\u0275dir=ye({type:t,selectors:[["","cdk-scrollable",""],["","cdkScrollable",""]]}),t})(),Dv=(()=>{class t{constructor(t,e,n){this._platform=t,this._change=new E,this._changeListener=t=>{this._change.next(t)},this._document=n,e.runOutsideAngular(()=>{if(t.isBrowser){const t=this._getWindow();t.addEventListener("resize",this._changeListener),t.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._updateViewportSize())})}ngOnDestroy(){if(this._platform.isBrowser){const t=this._getWindow();t.removeEventListener("resize",this._changeListener),t.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();const t={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),t}getViewportRect(){const t=this.getViewportScrollPosition(),{width:e,height:n}=this.getViewportSize();return{top:t.top,left:t.left,bottom:t.top+n,right:t.left+e,height:n,width:e}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};const t=this._getDocument(),e=this._getWindow(),n=t.documentElement,i=n.getBoundingClientRect();return{top:-i.top||t.body.scrollTop||e.scrollY||n.scrollTop||0,left:-i.left||t.body.scrollLeft||e.scrollX||n.scrollLeft||0}}change(t=20){return t>0?this._change.pipe(Lg(t)):this._change}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_updateViewportSize(){const t=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:t.innerWidth,height:t.innerHeight}:{width:0,height:0}}}return t.\u0275fac=function(e){return new(e||t)(zt(Gh),zt(Rl),zt(ou,8))},t.\u0275prov=lt({factory:function(){return new t(zt(Gh),zt(Rl),zt(ou,8))},token:t,providedIn:"root"}),t})(),Pv=(()=>{class t{}return t.\u0275mod=ge({type:t}),t.\u0275inj=ut({factory:function(e){return new(e||t)}}),t})(),Mv=(()=>{class t{}return t.\u0275mod=ge({type:t}),t.\u0275inj=ut({factory:function(e){return new(e||t)},imports:[[Ld,$h,Pv],Ld,Pv]}),t})();function Nv(){throw Error("Host already has a portal attached")}class Lv{attach(t){return null==t&&function(){throw Error("Attempting to attach a portal to a null PortalOutlet")}(),t.hasAttached()&&Nv(),this._attachedHost=t,t.attach(this)}detach(){let t=this._attachedHost;null==t?function(){throw Error("Attempting to detach a portal that is not attached to a host")}():(this._attachedHost=null,t.detach())}get isAttached(){return null!=this._attachedHost}setAttachedHost(t){this._attachedHost=t}}class Fv extends Lv{constructor(t,e,n,i){super(),this.component=t,this.viewContainerRef=e,this.injector=n,this.componentFactoryResolver=i}}class Uv extends Lv{constructor(t,e,n){super(),this.templateRef=t,this.viewContainerRef=e,this.context=n}get origin(){return this.templateRef.elementRef}attach(t,e=this.context){return this.context=e,super.attach(t)}detach(){return this.context=void 0,super.detach()}}class Bv extends Lv{constructor(t){super(),this.element=t instanceof Ga?t.nativeElement:t}}class jv{constructor(){this._isDisposed=!1,this.attachDomPortal=null}hasAttached(){return!!this._attachedPortal}attach(t){return t||function(){throw Error("Must provide a portal to attach")}(),this.hasAttached()&&Nv(),this._isDisposed&&function(){throw Error("This PortalOutlet has already been disposed")}(),t instanceof Fv?(this._attachedPortal=t,this.attachComponentPortal(t)):t instanceof Uv?(this._attachedPortal=t,this.attachTemplatePortal(t)):this.attachDomPortal&&t instanceof Bv?(this._attachedPortal=t,this.attachDomPortal(t)):void function(){throw Error("Attempting to attach an unknown Portal type. BasePortalOutlet accepts either a ComponentPortal or a TemplatePortal.")}()}detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(t){this._disposeFn=t}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}}class Vv extends jv{constructor(t,e,n,i,r){super(),this.outletElement=t,this._componentFactoryResolver=e,this._appRef=n,this._defaultInjector=i,this.attachDomPortal=t=>{if(!this._document)throw Error("Cannot attach DOM portal without _document constructor parameter");const e=t.element;if(!e.parentNode)throw Error("DOM portal content must be attached to a parent node.");const n=this._document.createComment("dom-portal");e.parentNode.insertBefore(n,e),this.outletElement.appendChild(e),super.setDisposeFn(()=>{n.parentNode&&n.parentNode.replaceChild(e,n)})},this._document=r}attachComponentPortal(t){const e=(t.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(t.component);let n;return t.viewContainerRef?(n=t.viewContainerRef.createComponent(e,t.viewContainerRef.length,t.injector||t.viewContainerRef.injector),this.setDisposeFn(()=>n.destroy())):(n=e.create(t.injector||this._defaultInjector),this._appRef.attachView(n.hostView),this.setDisposeFn(()=>{this._appRef.detachView(n.hostView),n.destroy()})),this.outletElement.appendChild(this._getComponentRootNode(n)),n}attachTemplatePortal(t){let e=t.viewContainerRef,n=e.createEmbeddedView(t.templateRef,t.context);return n.detectChanges(),n.rootNodes.forEach(t=>this.outletElement.appendChild(t)),this.setDisposeFn(()=>{let t=e.indexOf(n);-1!==t&&e.remove(t)}),n}dispose(){super.dispose(),null!=this.outletElement.parentNode&&this.outletElement.parentNode.removeChild(this.outletElement)}_getComponentRootNode(t){return t.hostView.rootNodes[0]}}class Kv extends Vv{}let qv=(()=>{class t extends jv{constructor(t,e,n){super(),this._componentFactoryResolver=t,this._viewContainerRef=e,this._isInitialized=!1,this.attached=new jc,this.attachDomPortal=t=>{if(!this._document)throw Error("Cannot attach DOM portal without _document constructor parameter");const e=t.element;if(!e.parentNode)throw Error("DOM portal content must be attached to a parent node.");const n=this._document.createComment("dom-portal");t.setAttachedHost(this),e.parentNode.insertBefore(n,e),this._getRootNode().appendChild(e),super.setDisposeFn(()=>{n.parentNode&&n.parentNode.replaceChild(e,n)})},this._document=n}get portal(){return this._attachedPortal}set portal(t){(!this.hasAttached()||t||this._isInitialized)&&(this.hasAttached()&&super.detach(),t&&super.attach(t),this._attachedPortal=t)}get attachedRef(){return this._attachedRef}ngOnInit(){this._isInitialized=!0}ngOnDestroy(){super.dispose(),this._attachedPortal=null,this._attachedRef=null}attachComponentPortal(t){t.setAttachedHost(this);const e=null!=t.viewContainerRef?t.viewContainerRef:this._viewContainerRef,n=(t.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(t.component),i=e.createComponent(n,e.length,t.injector||e.injector);return e!==this._viewContainerRef&&this._getRootNode().appendChild(i.hostView.rootNodes[0]),super.setDisposeFn(()=>i.destroy()),this._attachedPortal=t,this._attachedRef=i,this.attached.emit(i),i}attachTemplatePortal(t){t.setAttachedHost(this);const e=this._viewContainerRef.createEmbeddedView(t.templateRef,t.context);return super.setDisposeFn(()=>this._viewContainerRef.clear()),this._attachedPortal=t,this._attachedRef=e,this.attached.emit(e),e}_getRootNode(){const t=this._viewContainerRef.element.nativeElement;return t.nodeType===t.ELEMENT_NODE?t:t.parentNode}}return t.\u0275fac=function(e){return new(e||t)(Ao(qa),Ao(gc),Ao(ou))},t.\u0275dir=ye({type:t,selectors:[["","cdkPortalOutlet",""]],inputs:{portal:["cdkPortalOutlet","portal"]},outputs:{attached:"attached"},exportAs:["cdkPortalOutlet"],features:[Ia]}),t})(),Gv=(()=>{class t extends qv{}return t.\u0275fac=function(e){return $v(e||t)},t.\u0275dir=ye({type:t,selectors:[["","cdkPortalHost",""],["","portalHost",""]],inputs:{portal:["cdkPortalHost","portal"]},exportAs:["cdkPortalHost"],features:[ja([{provide:qv,useExisting:t}]),Ia]}),t})();const $v=fi(Gv);let Hv=(()=>{class t{}return t.\u0275mod=ge({type:t}),t.\u0275inj=ut({factory:function(e){return new(e||t)}}),t})();class zv{constructor(t,e){this._viewportRuler=t,this._previousHTMLStyles={top:"",left:""},this._isEnabled=!1,this._document=e}attach(){}enable(){if(this._canBeEnabled()){const t=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=t.style.left||"",this._previousHTMLStyles.top=t.style.top||"",t.style.left=Th(-this._previousScrollPosition.left),t.style.top=Th(-this._previousScrollPosition.top),t.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){const t=this._document.documentElement,e=t.style,n=this._document.body.style,i=e.scrollBehavior||"",r=n.scrollBehavior||"";this._isEnabled=!1,e.left=this._previousHTMLStyles.left,e.top=this._previousHTMLStyles.top,t.classList.remove("cdk-global-scrollblock"),e.scrollBehavior=n.scrollBehavior="auto",window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),e.scrollBehavior=i,n.scrollBehavior=r}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;const t=this._document.body,e=this._viewportRuler.getViewportSize();return t.scrollHeight>e.height||t.scrollWidth>e.width}}function Wv(){return Error("Scroll strategy has already been attached.")}class Yv{constructor(t,e,n,i){this._scrollDispatcher=t,this._ngZone=e,this._viewportRuler=n,this._config=i,this._scrollSubscription=null,this._detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}}attach(t){if(this._overlayRef)throw Wv();this._overlayRef=t}enable(){if(this._scrollSubscription)return;const t=this._scrollDispatcher.scrolled(0);this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=t.subscribe(()=>{const t=this._viewportRuler.getViewportScrollPosition().top;Math.abs(t-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=t.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}class Xv{enable(){}disable(){}attach(){}}function Qv(t,e){return e.some(e=>t.bottom<e.top||t.top>e.bottom||t.right<e.left||t.left>e.right)}function Zv(t,e){return e.some(e=>t.top<e.top||t.bottom>e.bottom||t.left<e.left||t.right>e.right)}class Jv{constructor(t,e,n,i){this._scrollDispatcher=t,this._viewportRuler=e,this._ngZone=n,this._config=i,this._scrollSubscription=null}attach(t){if(this._overlayRef)throw Wv();this._overlayRef=t}enable(){this._scrollSubscription||(this._scrollSubscription=this._scrollDispatcher.scrolled(this._config?this._config.scrollThrottle:0).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){const t=this._overlayRef.overlayElement.getBoundingClientRect(),{width:e,height:n}=this._viewportRuler.getViewportSize();Qv(t,[{width:e,height:n,bottom:n,right:e,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}}))}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}let tb=(()=>{class t{constructor(t,e,n,i){this._scrollDispatcher=t,this._viewportRuler=e,this._ngZone=n,this.noop=()=>new Xv,this.close=t=>new Yv(this._scrollDispatcher,this._ngZone,this._viewportRuler,t),this.block=()=>new zv(this._viewportRuler,this._document),this.reposition=t=>new Jv(this._scrollDispatcher,this._viewportRuler,this._ngZone,t),this._document=i}}return t.\u0275fac=function(e){return new(e||t)(zt(Ov),zt(Dv),zt(Rl),zt(ou))},t.\u0275prov=lt({factory:function(){return new t(zt(Ov),zt(Dv),zt(Rl),zt(ou))},token:t,providedIn:"root"}),t})();class eb{constructor(t){if(this.scrollStrategy=new Xv,this.panelClass="",this.hasBackdrop=!1,this.backdropClass="cdk-overlay-dark-backdrop",this.disposeOnNavigation=!1,this.excludeFromOutsideClick=[],t){const e=Object.keys(t);for(const n of e)void 0!==t[n]&&(this[n]=t[n])}}}class nb{constructor(t,e,n,i,r){this.offsetX=n,this.offsetY=i,this.panelClass=r,this.originX=t.originX,this.originY=t.originY,this.overlayX=e.overlayX,this.overlayY=e.overlayY}}class ib{constructor(t,e){this.connectionPair=t,this.scrollableViewProperties=e}}function rb(t,e){if("top"!==e&&"bottom"!==e&&"center"!==e)throw Error(`ConnectedPosition: Invalid ${t} "${e}". Expected "top", "bottom" or "center".`)}function sb(t,e){if("start"!==e&&"end"!==e&&"center"!==e)throw Error(`ConnectedPosition: Invalid ${t} "${e}". Expected "start", "end" or "center".`)}let ob=(()=>{class t{constructor(t){this._attachedOverlays=[],this._document=t}ngOnDestroy(){this.detach()}add(t){this.remove(t),this._attachedOverlays.push(t)}remove(t){const e=this._attachedOverlays.indexOf(t);e>-1&&this._attachedOverlays.splice(e,1),0===this._attachedOverlays.length&&this.detach()}}return t.\u0275fac=function(e){return new(e||t)(zt(ou))},t.\u0275prov=lt({factory:function(){return new t(zt(ou))},token:t,providedIn:"root"}),t})(),ab=(()=>{class t extends ob{constructor(t){super(t),this._keydownListener=t=>{const e=this._attachedOverlays;for(let n=e.length-1;n>-1;n--)if(e[n]._keydownEvents.observers.length>0){e[n]._keydownEvents.next(t);break}}}add(t){super.add(t),this._isAttached||(this._document.body.addEventListener("keydown",this._keydownListener),this._isAttached=!0)}detach(){this._isAttached&&(this._document.body.removeEventListener("keydown",this._keydownListener),this._isAttached=!1)}}return t.\u0275fac=function(e){return new(e||t)(zt(ou))},t.\u0275prov=lt({factory:function(){return new t(zt(ou))},token:t,providedIn:"root"}),t})(),cb=(()=>{class t extends ob{constructor(t,e){super(t),this._platform=e,this._cursorStyleIsSet=!1,this._clickListener=t=>{const e=t.composedPath?t.composedPath()[0]:t.target,n=this._attachedOverlays;for(let i=n.length-1;i>-1;i--){const r=n[i];if(!(r._outsidePointerEvents.observers.length<1)){if([...r.getConfig().excludeFromOutsideClick,r.overlayElement].some(t=>t.contains(e)))break;r._outsidePointerEvents.next(t)}}}}add(t){super.add(t),this._isAttached||(this._document.body.addEventListener("click",this._clickListener,!0),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=this._document.body.style.cursor,this._document.body.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0)}detach(){this._isAttached&&(this._document.body.removeEventListener("click",this._clickListener,!0),this._platform.IOS&&this._cursorStyleIsSet&&(this._document.body.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1)}}return t.\u0275fac=function(e){return new(e||t)(zt(ou),zt(Gh))},t.\u0275prov=lt({factory:function(){return new t(zt(ou),zt(Gh))},token:t,providedIn:"root"}),t})();const lb=!("undefined"==typeof window||!window||!window.__karma__&&!window.jasmine);let ub=(()=>{class t{constructor(t,e){this._platform=e,this._document=t}ngOnDestroy(){const t=this._containerElement;t&&t.parentNode&&t.parentNode.removeChild(t)}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const t=this._platform?this._platform.isBrowser:"undefined"!=typeof window;if(t||lb){const t=this._document.querySelectorAll('.cdk-overlay-container[platform="server"], .cdk-overlay-container[platform="test"]');for(let e=0;e<t.length;e++)t[e].parentNode.removeChild(t[e])}const e=this._document.createElement("div");e.classList.add("cdk-overlay-container"),lb?e.setAttribute("platform","test"):t||e.setAttribute("platform","server"),this._document.body.appendChild(e),this._containerElement=e}}return t.\u0275fac=function(e){return new(e||t)(zt(ou),zt(Gh))},t.\u0275prov=lt({factory:function(){return new t(zt(ou),zt(Gh))},token:t,providedIn:"root"}),t})();class hb{constructor(t,e,n,i,r,s,o,a,c){this._portalOutlet=t,this._host=e,this._pane=n,this._config=i,this._ngZone=r,this._keyboardDispatcher=s,this._document=o,this._location=a,this._outsideClickDispatcher=c,this._backdropElement=null,this._backdropClick=new E,this._attachments=new E,this._detachments=new E,this._locationChanges=h.EMPTY,this._backdropClickHandler=t=>this._backdropClick.next(t),this._keydownEvents=new E,this._outsidePointerEvents=new E,i.scrollStrategy&&(this._scrollStrategy=i.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=i.positionStrategy}get overlayElement(){return this._pane}get backdropElement(){return this._backdropElement}get hostElement(){return this._host}attach(t){let e=this._portalOutlet.attach(t);return!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host),this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._ngZone.onStable.asObservable().pipe(dd(1)).subscribe(()=>{this.hasAttached()&&this.updatePosition()}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&this._location&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher&&this._outsideClickDispatcher.add(this),e}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();const t=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenStable(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher&&this._outsideClickDispatcher.remove(this),t}dispose(){const t=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this.detachBackdrop(),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher&&this._outsideClickDispatcher.remove(this),this._host&&this._host.parentNode&&(this._host.parentNode.removeChild(this._host),this._host=null),this._previousHostParent=this._pane=null,t&&this._detachments.next(),this._detachments.complete()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick.asObservable()}attachments(){return this._attachments.asObservable()}detachments(){return this._detachments.asObservable()}keydownEvents(){return this._keydownEvents.asObservable()}outsidePointerEvents(){return this._outsidePointerEvents.asObservable()}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(t){t!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=t,this.hasAttached()&&(t.attach(this),this.updatePosition()))}updateSize(t){this._config=Object.assign(Object.assign({},this._config),t),this._updateElementSize()}setDirection(t){this._config=Object.assign(Object.assign({},this._config),{direction:t}),this._updateElementDirection()}addPanelClass(t){this._pane&&this._toggleClasses(this._pane,t,!0)}removePanelClass(t){this._pane&&this._toggleClasses(this._pane,t,!1)}getDirection(){const t=this._config.direction;return t?"string"==typeof t?t:t.value:"ltr"}updateScrollStrategy(t){t!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=t,this.hasAttached()&&(t.attach(this),t.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;const t=this._pane.style;t.width=Th(this._config.width),t.height=Th(this._config.height),t.minWidth=Th(this._config.minWidth),t.minHeight=Th(this._config.minHeight),t.maxWidth=Th(this._config.maxWidth),t.maxHeight=Th(this._config.maxHeight)}_togglePointerEvents(t){this._pane.style.pointerEvents=t?"auto":"none"}_attachBackdrop(){this._backdropElement=this._document.createElement("div"),this._backdropElement.classList.add("cdk-overlay-backdrop"),this._config.backdropClass&&this._toggleClasses(this._backdropElement,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropElement,this._host),this._backdropElement.addEventListener("click",this._backdropClickHandler),"undefined"!=typeof requestAnimationFrame?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{this._backdropElement&&this._backdropElement.classList.add("cdk-overlay-backdrop-showing")})}):this._backdropElement.classList.add("cdk-overlay-backdrop-showing")}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){let t,e=this._backdropElement;if(!e)return;let n=()=>{e&&(e.removeEventListener("click",this._backdropClickHandler),e.removeEventListener("transitionend",n),e.parentNode&&e.parentNode.removeChild(e)),this._backdropElement==e&&(this._backdropElement=null),this._config.backdropClass&&this._toggleClasses(e,this._config.backdropClass,!1),clearTimeout(t)};e.classList.remove("cdk-overlay-backdrop-showing"),this._ngZone.runOutsideAngular(()=>{e.addEventListener("transitionend",n)}),e.style.pointerEvents="none",t=this._ngZone.runOutsideAngular(()=>setTimeout(n,500))}_toggleClasses(t,e,n){const i=t.classList;xh(e).forEach(t=>{t&&(n?i.add(t):i.remove(t))})}_detachContentWhenStable(){this._ngZone.runOutsideAngular(()=>{const t=this._ngZone.onStable.asObservable().pipe(Hf($(this._attachments,this._detachments))).subscribe(()=>{this._pane&&this._host&&0!==this._pane.children.length||(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._previousHostParent.removeChild(this._host)),t.unsubscribe())})})}_disposeScrollStrategy(){const t=this._scrollStrategy;t&&(t.disable(),t.detach&&t.detach())}}const db=/([A-Za-z%]+)$/;class pb{constructor(t,e,n,i,r){this._viewportRuler=e,this._document=n,this._platform=i,this._overlayContainer=r,this._lastBoundingBoxSize={width:0,height:0},this._isPushed=!1,this._canPush=!0,this._growAfterOpen=!1,this._hasFlexibleDimensions=!0,this._positionLocked=!1,this._viewportMargin=0,this._scrollables=[],this._preferredPositions=[],this._positionChanges=new E,this._resizeSubscription=h.EMPTY,this._offsetX=0,this._offsetY=0,this._appliedPanelClasses=[],this.positionChanges=this._positionChanges.asObservable(),this.setOrigin(t)}get positions(){return this._preferredPositions}attach(t){if(this._overlayRef&&t!==this._overlayRef)throw Error("This position strategy is already attached to an overlay");this._validatePositions(),t.hostElement.classList.add("cdk-overlay-connected-position-bounding-box"),this._overlayRef=t,this._boundingBox=t.hostElement,this._pane=t.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition)return void this.reapplyLastPosition();this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect();const t=this._originRect,e=this._overlayRect,n=this._viewportRect,i=[];let r;for(let s of this._preferredPositions){let o=this._getOriginPoint(t,s),a=this._getOverlayPoint(o,e,s),c=this._getOverlayFit(a,e,n,s);if(c.isCompletelyWithinViewport)return this._isPushed=!1,void this._applyPosition(s,o);this._canFitWithFlexibleDimensions(c,a,n)?i.push({position:s,origin:o,overlayRect:e,boundingBoxRect:this._calculateBoundingBoxRect(o,s)}):(!r||r.overlayFit.visibleArea<c.visibleArea)&&(r={overlayFit:c,overlayPoint:a,originPoint:o,position:s,overlayRect:e})}if(i.length){let t=null,e=-1;for(const n of i){const i=n.boundingBoxRect.width*n.boundingBoxRect.height*(n.position.weight||1);i>e&&(e=i,t=n)}return this._isPushed=!1,void this._applyPosition(t.position,t.origin)}if(this._canPush)return this._isPushed=!0,void this._applyPosition(r.position,r.originPoint);this._applyPosition(r.position,r.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&mb(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove("cdk-overlay-connected-position-bounding-box"),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(!this._isDisposed&&(!this._platform||this._platform.isBrowser)){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect();const t=this._lastPosition||this._preferredPositions[0],e=this._getOriginPoint(this._originRect,t);this._applyPosition(t,e)}}withScrollableContainers(t){return this._scrollables=t,this}withPositions(t){return this._preferredPositions=t,-1===t.indexOf(this._lastPosition)&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(t){return this._viewportMargin=t,this}withFlexibleDimensions(t=!0){return this._hasFlexibleDimensions=t,this}withGrowAfterOpen(t=!0){return this._growAfterOpen=t,this}withPush(t=!0){return this._canPush=t,this}withLockedPosition(t=!0){return this._positionLocked=t,this}setOrigin(t){return this._origin=t,this}withDefaultOffsetX(t){return this._offsetX=t,this}withDefaultOffsetY(t){return this._offsetY=t,this}withTransformOriginOn(t){return this._transformOriginSelector=t,this}_getOriginPoint(t,e){let n,i;if("center"==e.originX)n=t.left+t.width/2;else{const i=this._isRtl()?t.right:t.left,r=this._isRtl()?t.left:t.right;n="start"==e.originX?i:r}return i="center"==e.originY?t.top+t.height/2:"top"==e.originY?t.top:t.bottom,{x:n,y:i}}_getOverlayPoint(t,e,n){let i,r;return i="center"==n.overlayX?-e.width/2:"start"===n.overlayX?this._isRtl()?-e.width:0:this._isRtl()?0:-e.width,r="center"==n.overlayY?-e.height/2:"top"==n.overlayY?0:-e.height,{x:t.x+i,y:t.y+r}}_getOverlayFit(t,e,n,i){let{x:r,y:s}=t,o=this._getOffset(i,"x"),a=this._getOffset(i,"y");o&&(r+=o),a&&(s+=a);let c=0-s,l=s+e.height-n.height,u=this._subtractOverflows(e.width,0-r,r+e.width-n.width),h=this._subtractOverflows(e.height,c,l),d=u*h;return{visibleArea:d,isCompletelyWithinViewport:e.width*e.height===d,fitsInViewportVertically:h===e.height,fitsInViewportHorizontally:u==e.width}}_canFitWithFlexibleDimensions(t,e,n){if(this._hasFlexibleDimensions){const i=n.bottom-e.y,r=n.right-e.x,s=fb(this._overlayRef.getConfig().minHeight),o=fb(this._overlayRef.getConfig().minWidth),a=t.fitsInViewportHorizontally||null!=o&&o<=r;return(t.fitsInViewportVertically||null!=s&&s<=i)&&a}return!1}_pushOverlayOnScreen(t,e,n){if(this._previousPushAmount&&this._positionLocked)return{x:t.x+this._previousPushAmount.x,y:t.y+this._previousPushAmount.y};const i=this._viewportRect,r=Math.max(t.x+e.width-i.right,0),s=Math.max(t.y+e.height-i.bottom,0),o=Math.max(i.top-n.top-t.y,0),a=Math.max(i.left-n.left-t.x,0);let c=0,l=0;return c=e.width<=i.width?a||-r:t.x<this._viewportMargin?i.left-n.left-t.x:0,l=e.height<=i.height?o||-s:t.y<this._viewportMargin?i.top-n.top-t.y:0,this._previousPushAmount={x:c,y:l},{x:t.x+c,y:t.y+l}}_applyPosition(t,e){if(this._setTransformOrigin(t),this._setOverlayElementStyles(e,t),this._setBoundingBoxStyles(e,t),t.panelClass&&this._addPanelClasses(t.panelClass),this._lastPosition=t,this._positionChanges.observers.length){const e=this._getScrollVisibility(),n=new ib(t,e);this._positionChanges.next(n)}this._isInitialRender=!1}_setTransformOrigin(t){if(!this._transformOriginSelector)return;const e=this._boundingBox.querySelectorAll(this._transformOriginSelector);let n,i=t.overlayY;n="center"===t.overlayX?"center":this._isRtl()?"start"===t.overlayX?"right":"left":"start"===t.overlayX?"left":"right";for(let r=0;r<e.length;r++)e[r].style.transformOrigin=`${n} ${i}`}_calculateBoundingBoxRect(t,e){const n=this._viewportRect,i=this._isRtl();let r,s,o,a,c,l;if("top"===e.overlayY)s=t.y,r=n.height-s+this._viewportMargin;else if("bottom"===e.overlayY)o=n.height-t.y+2*this._viewportMargin,r=n.height-o+this._viewportMargin;else{const e=Math.min(n.bottom-t.y+n.top,t.y),i=this._lastBoundingBoxSize.height;r=2*e,s=t.y-e,r>i&&!this._isInitialRender&&!this._growAfterOpen&&(s=t.y-i/2)}if("end"===e.overlayX&&!i||"start"===e.overlayX&&i)l=n.width-t.x+this._viewportMargin,a=t.x-this._viewportMargin;else if("start"===e.overlayX&&!i||"end"===e.overlayX&&i)c=t.x,a=n.right-t.x;else{const e=Math.min(n.right-t.x+n.left,t.x),i=this._lastBoundingBoxSize.width;a=2*e,c=t.x-e,a>i&&!this._isInitialRender&&!this._growAfterOpen&&(c=t.x-i/2)}return{top:s,left:c,bottom:o,right:l,width:a,height:r}}_setBoundingBoxStyles(t,e){const n=this._calculateBoundingBoxRect(t,e);this._isInitialRender||this._growAfterOpen||(n.height=Math.min(n.height,this._lastBoundingBoxSize.height),n.width=Math.min(n.width,this._lastBoundingBoxSize.width));const i={};if(this._hasExactPosition())i.top=i.left="0",i.bottom=i.right=i.maxHeight=i.maxWidth="",i.width=i.height="100%";else{const t=this._overlayRef.getConfig().maxHeight,r=this._overlayRef.getConfig().maxWidth;i.height=Th(n.height),i.top=Th(n.top),i.bottom=Th(n.bottom),i.width=Th(n.width),i.left=Th(n.left),i.right=Th(n.right),i.alignItems="center"===e.overlayX?"center":"end"===e.overlayX?"flex-end":"flex-start",i.justifyContent="center"===e.overlayY?"center":"bottom"===e.overlayY?"flex-end":"flex-start",t&&(i.maxHeight=Th(t)),r&&(i.maxWidth=Th(r))}this._lastBoundingBoxSize=n,mb(this._boundingBox.style,i)}_resetBoundingBoxStyles(){mb(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){mb(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(t,e){const n={},i=this._hasExactPosition(),r=this._hasFlexibleDimensions,s=this._overlayRef.getConfig();if(i){const i=this._viewportRuler.getViewportScrollPosition();mb(n,this._getExactOverlayY(e,t,i)),mb(n,this._getExactOverlayX(e,t,i))}else n.position="static";let o="",a=this._getOffset(e,"x"),c=this._getOffset(e,"y");a&&(o+=`translateX(${a}px) `),c&&(o+=`translateY(${c}px)`),n.transform=o.trim(),s.maxHeight&&(i?n.maxHeight=Th(s.maxHeight):r&&(n.maxHeight="")),s.maxWidth&&(i?n.maxWidth=Th(s.maxWidth):r&&(n.maxWidth="")),mb(this._pane.style,n)}_getExactOverlayY(t,e,n){let i={top:"",bottom:""},r=this._getOverlayPoint(e,this._overlayRect,t);this._isPushed&&(r=this._pushOverlayOnScreen(r,this._overlayRect,n));let s=this._overlayContainer.getContainerElement().getBoundingClientRect().top;return r.y-=s,"bottom"===t.overlayY?i.bottom=this._document.documentElement.clientHeight-(r.y+this._overlayRect.height)+"px":i.top=Th(r.y),i}_getExactOverlayX(t,e,n){let i,r={left:"",right:""},s=this._getOverlayPoint(e,this._overlayRect,t);return this._isPushed&&(s=this._pushOverlayOnScreen(s,this._overlayRect,n)),i=this._isRtl()?"end"===t.overlayX?"left":"right":"end"===t.overlayX?"right":"left","right"===i?r.right=this._document.documentElement.clientWidth-(s.x+this._overlayRect.width)+"px":r.left=Th(s.x),r}_getScrollVisibility(){const t=this._getOriginRect(),e=this._pane.getBoundingClientRect(),n=this._scrollables.map(t=>t.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:Zv(t,n),isOriginOutsideView:Qv(t,n),isOverlayClipped:Zv(e,n),isOverlayOutsideView:Qv(e,n)}}_subtractOverflows(t,...e){return e.reduce((t,e)=>t-Math.max(e,0),t)}_getNarrowedViewportRect(){const t=this._document.documentElement.clientWidth,e=this._document.documentElement.clientHeight,n=this._viewportRuler.getViewportScrollPosition();return{top:n.top+this._viewportMargin,left:n.left+this._viewportMargin,right:n.left+t-this._viewportMargin,bottom:n.top+e-this._viewportMargin,width:t-2*this._viewportMargin,height:e-2*this._viewportMargin}}_isRtl(){return"rtl"===this._overlayRef.getDirection()}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(t,e){return"x"===e?null==t.offsetX?this._offsetX:t.offsetX:null==t.offsetY?this._offsetY:t.offsetY}_validatePositions(){if(!this._preferredPositions.length)throw Error("FlexibleConnectedPositionStrategy: At least one position is required.");this._preferredPositions.forEach(t=>{sb("originX",t.originX),rb("originY",t.originY),sb("overlayX",t.overlayX),rb("overlayY",t.overlayY)})}_addPanelClasses(t){this._pane&&xh(t).forEach(t=>{""!==t&&-1===this._appliedPanelClasses.indexOf(t)&&(this._appliedPanelClasses.push(t),this._pane.classList.add(t))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(t=>{this._pane.classList.remove(t)}),this._appliedPanelClasses=[])}_getOriginRect(){const t=this._origin;if(t instanceof Ga)return t.nativeElement.getBoundingClientRect();if(t instanceof Element)return t.getBoundingClientRect();const e=t.width||0,n=t.height||0;return{top:t.y,bottom:t.y+n,left:t.x,right:t.x+e,height:n,width:e}}}function mb(t,e){for(let n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}function fb(t){if("number"!=typeof t&&null!=t){const[e,n]=t.split(db);return n&&"px"!==n?null:parseFloat(e)}return t||null}class gb{constructor(t,e,n,i,r,s,o){this._preferredPositions=[],this._positionStrategy=new pb(n,i,r,s,o).withFlexibleDimensions(!1).withPush(!1).withViewportMargin(0),this.withFallbackPosition(t,e)}get _isRtl(){return"rtl"===this._overlayRef.getDirection()}get onPositionChange(){return this._positionStrategy.positionChanges}get positions(){return this._preferredPositions}attach(t){this._overlayRef=t,this._positionStrategy.attach(t),this._direction&&(t.setDirection(this._direction),this._direction=null)}dispose(){this._positionStrategy.dispose()}detach(){this._positionStrategy.detach()}apply(){this._positionStrategy.apply()}recalculateLastPosition(){this._positionStrategy.reapplyLastPosition()}withScrollableContainers(t){this._positionStrategy.withScrollableContainers(t)}withFallbackPosition(t,e,n,i){const r=new nb(t,e,n,i);return this._preferredPositions.push(r),this._positionStrategy.withPositions(this._preferredPositions),this}withDirection(t){return this._overlayRef?this._overlayRef.setDirection(t):this._direction=t,this}withOffsetX(t){return this._positionStrategy.withDefaultOffsetX(t),this}withOffsetY(t){return this._positionStrategy.withDefaultOffsetY(t),this}withLockedPosition(t){return this._positionStrategy.withLockedPosition(t),this}withPositions(t){return this._preferredPositions=t.slice(),this._positionStrategy.withPositions(this._preferredPositions),this}setOrigin(t){return this._positionStrategy.setOrigin(t),this}}class _b{constructor(){this._cssPosition="static",this._topOffset="",this._bottomOffset="",this._leftOffset="",this._rightOffset="",this._alignItems="",this._justifyContent="",this._width="",this._height=""}attach(t){const e=t.getConfig();this._overlayRef=t,this._width&&!e.width&&t.updateSize({width:this._width}),this._height&&!e.height&&t.updateSize({height:this._height}),t.hostElement.classList.add("cdk-global-overlay-wrapper"),this._isDisposed=!1}top(t=""){return this._bottomOffset="",this._topOffset=t,this._alignItems="flex-start",this}left(t=""){return this._rightOffset="",this._leftOffset=t,this._justifyContent="flex-start",this}bottom(t=""){return this._topOffset="",this._bottomOffset=t,this._alignItems="flex-end",this}right(t=""){return this._leftOffset="",this._rightOffset=t,this._justifyContent="flex-end",this}width(t=""){return this._overlayRef?this._overlayRef.updateSize({width:t}):this._width=t,this}height(t=""){return this._overlayRef?this._overlayRef.updateSize({height:t}):this._height=t,this}centerHorizontally(t=""){return this.left(t),this._justifyContent="center",this}centerVertically(t=""){return this.top(t),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;const t=this._overlayRef.overlayElement.style,e=this._overlayRef.hostElement.style,n=this._overlayRef.getConfig(),{width:i,height:r,maxWidth:s,maxHeight:o}=n,a=!("100%"!==i&&"100vw"!==i||s&&"100%"!==s&&"100vw"!==s),c=!("100%"!==r&&"100vh"!==r||o&&"100%"!==o&&"100vh"!==o);t.position=this._cssPosition,t.marginLeft=a?"0":this._leftOffset,t.marginTop=c?"0":this._topOffset,t.marginBottom=this._bottomOffset,t.marginRight=this._rightOffset,a?e.justifyContent="flex-start":"center"===this._justifyContent?e.justifyContent="center":"rtl"===this._overlayRef.getConfig().direction?"flex-start"===this._justifyContent?e.justifyContent="flex-end":"flex-end"===this._justifyContent&&(e.justifyContent="flex-start"):e.justifyContent=this._justifyContent,e.alignItems=c?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;const t=this._overlayRef.overlayElement.style,e=this._overlayRef.hostElement,n=e.style;e.classList.remove("cdk-global-overlay-wrapper"),n.justifyContent=n.alignItems=t.marginTop=t.marginBottom=t.marginLeft=t.marginRight=t.position="",this._overlayRef=null,this._isDisposed=!0}}let yb=(()=>{class t{constructor(t,e,n,i){this._viewportRuler=t,this._document=e,this._platform=n,this._overlayContainer=i}global(){return new _b}connectedTo(t,e,n){return new gb(e,n,t,this._viewportRuler,this._document,this._platform,this._overlayContainer)}flexibleConnectedTo(t){return new pb(t,this._viewportRuler,this._document,this._platform,this._overlayContainer)}}return t.\u0275fac=function(e){return new(e||t)(zt(Dv),zt(ou),zt(Gh),zt(ub))},t.\u0275prov=lt({factory:function(){return new t(zt(Dv),zt(ou),zt(Gh),zt(ub))},token:t,providedIn:"root"}),t})(),vb=0,bb=(()=>{class t{constructor(t,e,n,i,r,s,o,a,c,l,u){this.scrollStrategies=t,this._overlayContainer=e,this._componentFactoryResolver=n,this._positionBuilder=i,this._keyboardDispatcher=r,this._injector=s,this._ngZone=o,this._document=a,this._directionality=c,this._location=l,this._outsideClickDispatcher=u}create(t){const e=this._createHostElement(),n=this._createPaneElement(e),i=this._createPortalOutlet(n),r=new eb(t);return r.direction=r.direction||this._directionality.value,new hb(i,e,n,r,this._ngZone,this._keyboardDispatcher,this._document,this._location,this._outsideClickDispatcher)}position(){return this._positionBuilder}_createPaneElement(t){const e=this._document.createElement("div");return e.id="cdk-overlay-"+vb++,e.classList.add("cdk-overlay-pane"),t.appendChild(e),e}_createHostElement(){const t=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(t),t}_createPortalOutlet(t){return this._appRef||(this._appRef=this._injector.get(Wl)),new Vv(t,this._componentFactoryResolver,this._appRef,this._injector,this._document)}}return t.\u0275fac=function(e){return new(e||t)(zt(tb),zt(ub),zt(qa),zt(yb),zt(ab),zt(go),zt(Rl),zt(ou),zt(Nd),zt(wu,8),zt(cb,8))},t.\u0275prov=lt({token:t,factory:t.\u0275fac}),t})();const wb=[{originX:"start",originY:"bottom",overlayX:"start",overlayY:"top"},{originX:"start",originY:"top",overlayX:"start",overlayY:"bottom"},{originX:"end",originY:"top",overlayX:"end",overlayY:"bottom"},{originX:"end",originY:"bottom",overlayX:"end",overlayY:"top"}],Sb=new Ft("cdk-connected-overlay-scroll-strategy");let Eb=(()=>{class t{constructor(t){this.elementRef=t}}return t.\u0275fac=function(e){return new(e||t)(Ao(Ga))},t.\u0275dir=ye({type:t,selectors:[["","cdk-overlay-origin",""],["","overlay-origin",""],["","cdkOverlayOrigin",""]],exportAs:["cdkOverlayOrigin"]}),t})(),kb=(()=>{class t{constructor(t,e,n,i,r){this._overlay=t,this._dir=r,this._hasBackdrop=!1,this._lockPosition=!1,this._growAfterOpen=!1,this._flexibleDimensions=!1,this._push=!1,this._backdropSubscription=h.EMPTY,this._attachSubscription=h.EMPTY,this._detachSubscription=h.EMPTY,this.viewportMargin=0,this.open=!1,this.backdropClick=new jc,this.positionChange=new jc,this.attach=new jc,this.detach=new jc,this.overlayKeydown=new jc,this.overlayOutsideClick=new jc,this._templatePortal=new Uv(e,n),this._scrollStrategyFactory=i,this.scrollStrategy=this._scrollStrategyFactory()}get offsetX(){return this._offsetX}set offsetX(t){this._offsetX=t,this._position&&this._updatePositionStrategy(this._position)}get offsetY(){return this._offsetY}set offsetY(t){this._offsetY=t,this._position&&this._updatePositionStrategy(this._position)}get hasBackdrop(){return this._hasBackdrop}set hasBackdrop(t){this._hasBackdrop=kh(t)}get lockPosition(){return this._lockPosition}set lockPosition(t){this._lockPosition=kh(t)}get flexibleDimensions(){return this._flexibleDimensions}set flexibleDimensions(t){this._flexibleDimensions=kh(t)}get growAfterOpen(){return this._growAfterOpen}set growAfterOpen(t){this._growAfterOpen=kh(t)}get push(){return this._push}set push(t){this._push=kh(t)}get overlayRef(){return this._overlayRef}get dir(){return this._dir?this._dir.value:"ltr"}ngOnDestroy(){this._attachSubscription.unsubscribe(),this._detachSubscription.unsubscribe(),this._backdropSubscription.unsubscribe(),this._overlayRef&&this._overlayRef.dispose()}ngOnChanges(t){this._position&&(this._updatePositionStrategy(this._position),this._overlayRef.updateSize({width:this.width,minWidth:this.minWidth,height:this.height,minHeight:this.minHeight}),t.origin&&this.open&&this._position.apply()),t.open&&(this.open?this._attachOverlay():this._detachOverlay())}_createOverlay(){this.positions&&this.positions.length||(this.positions=wb);const t=this._overlayRef=this._overlay.create(this._buildConfig());this._attachSubscription=t.attachments().subscribe(()=>this.attach.emit()),this._detachSubscription=t.detachments().subscribe(()=>this.detach.emit()),t.keydownEvents().subscribe(t=>{this.overlayKeydown.next(t),27!==t.keyCode||ed(t)||(t.preventDefault(),this._detachOverlay())}),this._overlayRef.outsidePointerEvents().subscribe(t=>{this.overlayOutsideClick.next(t)})}_buildConfig(){const t=this._position=this.positionStrategy||this._createPositionStrategy(),e=new eb({direction:this._dir,positionStrategy:t,scrollStrategy:this.scrollStrategy,hasBackdrop:this.hasBackdrop});return(this.width||0===this.width)&&(e.width=this.width),(this.height||0===this.height)&&(e.height=this.height),(this.minWidth||0===this.minWidth)&&(e.minWidth=this.minWidth),(this.minHeight||0===this.minHeight)&&(e.minHeight=this.minHeight),this.backdropClass&&(e.backdropClass=this.backdropClass),this.panelClass&&(e.panelClass=this.panelClass),e}_updatePositionStrategy(t){const e=this.positions.map(t=>({originX:t.originX,originY:t.originY,overlayX:t.overlayX,overlayY:t.overlayY,offsetX:t.offsetX||this.offsetX,offsetY:t.offsetY||this.offsetY,panelClass:t.panelClass||void 0}));return t.setOrigin(this.origin.elementRef).withPositions(e).withFlexibleDimensions(this.flexibleDimensions).withPush(this.push).withGrowAfterOpen(this.growAfterOpen).withViewportMargin(this.viewportMargin).withLockedPosition(this.lockPosition).withTransformOriginOn(this.transformOriginSelector)}_createPositionStrategy(){const t=this._overlay.position().flexibleConnectedTo(this.origin.elementRef);return this._updatePositionStrategy(t),t.positionChanges.subscribe(t=>this.positionChange.emit(t)),t}_attachOverlay(){this._overlayRef?this._overlayRef.getConfig().hasBackdrop=this.hasBackdrop:this._createOverlay(),this._overlayRef.hasAttached()||this._overlayRef.attach(this._templatePortal),this.hasBackdrop?this._backdropSubscription=this._overlayRef.backdropClick().subscribe(t=>{this.backdropClick.emit(t)}):this._backdropSubscription.unsubscribe()}_detachOverlay(){this._overlayRef&&this._overlayRef.detach(),this._backdropSubscription.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(Ao(bb),Ao(mc),Ao(gc),Ao(Sb),Ao(Nd,8))},t.\u0275dir=ye({type:t,selectors:[["","cdk-connected-overlay",""],["","connected-overlay",""],["","cdkConnectedOverlay",""]],inputs:{viewportMargin:["cdkConnectedOverlayViewportMargin","viewportMargin"],open:["cdkConnectedOverlayOpen","open"],scrollStrategy:["cdkConnectedOverlayScrollStrategy","scrollStrategy"],offsetX:["cdkConnectedOverlayOffsetX","offsetX"],offsetY:["cdkConnectedOverlayOffsetY","offsetY"],hasBackdrop:["cdkConnectedOverlayHasBackdrop","hasBackdrop"],lockPosition:["cdkConnectedOverlayLockPosition","lockPosition"],flexibleDimensions:["cdkConnectedOverlayFlexibleDimensions","flexibleDimensions"],growAfterOpen:["cdkConnectedOverlayGrowAfterOpen","growAfterOpen"],push:["cdkConnectedOverlayPush","push"],positions:["cdkConnectedOverlayPositions","positions"],origin:["cdkConnectedOverlayOrigin","origin"],positionStrategy:["cdkConnectedOverlayPositionStrategy","positionStrategy"],width:["cdkConnectedOverlayWidth","width"],height:["cdkConnectedOverlayHeight","height"],minWidth:["cdkConnectedOverlayMinWidth","minWidth"],minHeight:["cdkConnectedOverlayMinHeight","minHeight"],backdropClass:["cdkConnectedOverlayBackdropClass","backdropClass"],panelClass:["cdkConnectedOverlayPanelClass","panelClass"],transformOriginSelector:["cdkConnectedOverlayTransformOriginOn","transformOriginSelector"]},outputs:{backdropClick:"backdropClick",positionChange:"positionChange",attach:"attach",detach:"detach",overlayKeydown:"overlayKeydown",overlayOutsideClick:"overlayOutsideClick"},exportAs:["cdkConnectedOverlay"],features:[Ae]}),t})();const Cb={provide:Sb,deps:[bb],useFactory:function(t){return()=>t.scrollStrategies.reposition()}};let xb=(()=>{class t{}return t.\u0275mod=ge({type:t}),t.\u0275inj=ut({factory:function(e){return new(e||t)},providers:[bb,Cb],imports:[[Ld,Hv,Mv],Mv]}),t})();function Tb(t){return new y(e=>{let n;try{n=t()}catch(i){return void e.error(i)}return(n?B(n):hd()).subscribe(e)})}const Ib=["trigger"],Rb=["panel"];function Ob(t,e){if(1&t&&(No(0,"span",8),ya(1),Lo()),2&t){const t=Wo();kr(1),va(t.placeholder||"\xa0")}}function Ab(t,e){if(1&t&&(No(0,"span"),ya(1),Lo()),2&t){const t=Wo(2);kr(1),va(t.triggerValue||"\xa0")}}function Db(t,e){1&t&&Qo(0,0,["*ngSwitchCase","true"])}function Pb(t,e){1&t&&(No(0,"span",9),Ro(1,Ab,2,1,"span",10),Ro(2,Db,1,0,"ng-content",11),Lo()),2&t&&(Po("ngSwitch",!!Wo().customTrigger),kr(2),Po("ngSwitchCase",!0))}function Mb(t,e){if(1&t){const t=jo();No(0,"div",12),No(1,"div",13,14),qo("@transformPanel.done",(function(e){return nn(t),Wo()._panelDoneAnimatingStream.next(e.toState)}))("keydown",(function(e){return nn(t),Wo()._handleKeydown(e)})),Qo(3,1),Lo(),Lo()}if(2&t){const t=Wo();Po("@transformPanelWrap",void 0),kr(1),ka("mat-select-panel ",t._getPanelTheme(),""),sa("transform-origin",t._transformOrigin)("font-size",t._triggerFontSize,"px"),Po("ngClass",t.panelClass)("@transformPanel",t.multiple?"showing-multiple":"showing"),To("id",t.id+"-panel")}}const Nb=[[["mat-select-trigger"]],"*"],Lb=["mat-select-trigger","*"],Fb={transformPanelWrap:Kd("transformPanelWrap",[zd("* => void",Yd("@transformPanel",[Wd()],{optional:!0}))]),transformPanel:Kd("transformPanel",[Hd("void",$d({transform:"scaleY(0.8)",minWidth:"100%",opacity:0})),Hd("showing",$d({opacity:1,minWidth:"calc(100% + 32px)",transform:"scaleY(1)"})),Hd("showing-multiple",$d({opacity:1,minWidth:"calc(100% + 64px)",transform:"scaleY(1)"})),zd("void => *",qd("120ms cubic-bezier(0, 0, 0.2, 1)")),zd("* => void",qd("100ms 25ms linear",$d({opacity:0})))])};let Ub=0;const Bb=new Ft("mat-select-scroll-strategy"),jb=new Ft("MAT_SELECT_CONFIG"),Vb={provide:Bb,deps:[bb],useFactory:function(t){return()=>t.scrollStrategies.reposition()}};class Kb{constructor(t,e){this.source=t,this.value=e}}class qb{constructor(t,e,n,i,r){this._elementRef=t,this._defaultErrorStateMatcher=e,this._parentForm=n,this._parentFormGroup=i,this.ngControl=r}}const Gb=vf(bf(_f(wf(qb)))),$b=new Ft("MatSelectTrigger");let Hb=(()=>{class t extends Gb{constructor(t,e,n,i,r,s,o,a,c,l,u,h,d,p){super(r,i,o,a,l),this._viewportRuler=t,this._changeDetectorRef=e,this._ngZone=n,this._dir=s,this._parentFormField=c,this.ngControl=l,this._liveAnnouncer=d,this._panelOpen=!1,this._required=!1,this._scrollTop=0,this._multiple=!1,this._compareWith=(t,e)=>t===e,this._uid="mat-select-"+Ub++,this._destroy=new E,this._triggerFontSize=0,this._onChange=()=>{},this._onTouched=()=>{},this._optionIds="",this._transformOrigin="top",this._panelDoneAnimatingStream=new E,this._offsetY=0,this._positions=[{originX:"start",originY:"top",overlayX:"start",overlayY:"top"},{originX:"start",originY:"bottom",overlayX:"start",overlayY:"bottom"}],this._disableOptionCentering=!1,this._focused=!1,this.controlType="mat-select",this.ariaLabel="",this.optionSelectionChanges=Tb(()=>{const t=this.options;return t?t.changes.pipe(jd(t),_v(()=>$(...t.map(t=>t.onSelectionChange)))):this._ngZone.onStable.asObservable().pipe(dd(1),_v(()=>this.optionSelectionChanges))}),this.openedChange=new jc,this._openedStream=this.openedChange.pipe(od(t=>t),N(()=>{})),this._closedStream=this.openedChange.pipe(od(t=>!t),N(()=>{})),this.selectionChange=new jc,this.valueChange=new jc,this.ngControl&&(this.ngControl.valueAccessor=this),this._scrollStrategyFactory=h,this._scrollStrategy=this._scrollStrategyFactory(),this.tabIndex=parseInt(u)||0,this.id=this.id,p&&(null!=p.disableOptionCentering&&(this.disableOptionCentering=p.disableOptionCentering),null!=p.typeaheadDebounceInterval&&(this.typeaheadDebounceInterval=p.typeaheadDebounceInterval))}get focused(){return this._focused||this._panelOpen}get placeholder(){return this._placeholder}set placeholder(t){this._placeholder=t,this.stateChanges.next()}get required(){return this._required}set required(t){this._required=kh(t),this.stateChanges.next()}get multiple(){return this._multiple}set multiple(t){if(this._selectionModel)throw Error("Cannot change `multiple` mode of select after initialization.");this._multiple=kh(t)}get disableOptionCentering(){return this._disableOptionCentering}set disableOptionCentering(t){this._disableOptionCentering=kh(t)}get compareWith(){return this._compareWith}set compareWith(t){if("function"!=typeof t)throw Error("`compareWith` must be a function.");this._compareWith=t,this._selectionModel&&this._initializeSelection()}get value(){return this._value}set value(t){t!==this._value&&(this.writeValue(t),this._value=t)}get typeaheadDebounceInterval(){return this._typeaheadDebounceInterval}set typeaheadDebounceInterval(t){this._typeaheadDebounceInterval=Ch(t)}get id(){return this._id}set id(t){this._id=t||this._uid,this.stateChanges.next()}ngOnInit(){this._selectionModel=new Rv(this.multiple),this.stateChanges.next(),this._panelDoneAnimatingStream.pipe(mv(),Hf(this._destroy)).subscribe(()=>{this.panelOpen?(this._scrollTop=0,this.openedChange.emit(!0)):(this.openedChange.emit(!1),this.overlayDir.offsetX=0,this._changeDetectorRef.markForCheck())}),this._viewportRuler.change().pipe(Hf(this._destroy)).subscribe(()=>{this._panelOpen&&(this._triggerRect=this.trigger.nativeElement.getBoundingClientRect(),this._changeDetectorRef.markForCheck())})}ngAfterContentInit(){this._initKeyManager(),this._selectionModel.changed.pipe(Hf(this._destroy)).subscribe(t=>{t.added.forEach(t=>t.select()),t.removed.forEach(t=>t.deselect())}),this.options.changes.pipe(jd(null),Hf(this._destroy)).subscribe(()=>{this._resetOptions(),this._initializeSelection()})}ngDoCheck(){this.ngControl&&this.updateErrorState()}ngOnChanges(t){t.disabled&&this.stateChanges.next(),t.typeaheadDebounceInterval&&this._keyManager&&this._keyManager.withTypeAhead(this._typeaheadDebounceInterval)}ngOnDestroy(){this._destroy.next(),this._destroy.complete(),this.stateChanges.complete()}toggle(){this.panelOpen?this.close():this.open()}open(){!this.disabled&&this.options&&this.options.length&&!this._panelOpen&&(this._triggerRect=this.trigger.nativeElement.getBoundingClientRect(),this._triggerFontSize=parseInt(getComputedStyle(this.trigger.nativeElement).fontSize||"0"),this._panelOpen=!0,this._keyManager.withHorizontalOrientation(null),this._calculateOverlayPosition(),this._highlightCorrectOption(),this._changeDetectorRef.markForCheck(),this._ngZone.onStable.asObservable().pipe(dd(1)).subscribe(()=>{this._triggerFontSize&&this.overlayDir.overlayRef&&this.overlayDir.overlayRef.overlayElement&&(this.overlayDir.overlayRef.overlayElement.style.fontSize=this._triggerFontSize+"px")}))}close(){this._panelOpen&&(this._panelOpen=!1,this._keyManager.withHorizontalOrientation(this._isRtl()?"rtl":"ltr"),this._changeDetectorRef.markForCheck(),this._onTouched())}writeValue(t){this.options&&this._setSelectionByValue(t)}registerOnChange(t){this._onChange=t}registerOnTouched(t){this._onTouched=t}setDisabledState(t){this.disabled=t,this._changeDetectorRef.markForCheck(),this.stateChanges.next()}get panelOpen(){return this._panelOpen}get selected(){return this.multiple?this._selectionModel.selected:this._selectionModel.selected[0]}get triggerValue(){if(this.empty)return"";if(this._multiple){const t=this._selectionModel.selected.map(t=>t.viewValue);return this._isRtl()&&t.reverse(),t.join(", ")}return this._selectionModel.selected[0].viewValue}_isRtl(){return!!this._dir&&"rtl"===this._dir.value}_handleKeydown(t){this.disabled||(this.panelOpen?this._handleOpenKeydown(t):this._handleClosedKeydown(t))}_handleClosedKeydown(t){const e=t.keyCode,n=40===e||38===e||37===e||39===e,i=13===e||32===e,r=this._keyManager;if(!r.isTyping()&&i&&!ed(t)||(this.multiple||t.altKey)&&n)t.preventDefault(),this.open();else if(!this.multiple){const n=this.selected;36===e||35===e?(36===e?r.setFirstItemActive():r.setLastItemActive(),t.preventDefault()):r.onKeydown(t);const i=this.selected;i&&n!==i&&this._liveAnnouncer.announce(i.viewValue,1e4)}}_handleOpenKeydown(t){const e=this._keyManager,n=t.keyCode,i=40===n||38===n,r=e.isTyping();if(36===n||35===n)t.preventDefault(),36===n?e.setFirstItemActive():e.setLastItemActive();else if(i&&t.altKey)t.preventDefault(),this.close();else if(r||13!==n&&32!==n||!e.activeItem||ed(t))if(!r&&this._multiple&&65===n&&t.ctrlKey){t.preventDefault();const e=this.options.some(t=>!t.disabled&&!t.selected);this.options.forEach(t=>{t.disabled||(e?t.select():t.deselect())})}else{const n=e.activeItemIndex;e.onKeydown(t),this._multiple&&i&&t.shiftKey&&e.activeItem&&e.activeItemIndex!==n&&e.activeItem._selectViaInteraction()}else t.preventDefault(),e.activeItem._selectViaInteraction()}_onFocus(){this.disabled||(this._focused=!0,this.stateChanges.next())}_onBlur(){this._focused=!1,this.disabled||this.panelOpen||(this._onTouched(),this._changeDetectorRef.markForCheck(),this.stateChanges.next())}_onAttached(){this.overlayDir.positionChange.pipe(dd(1)).subscribe(()=>{this._changeDetectorRef.detectChanges(),this._calculateOverlayOffsetX(),this.panel.nativeElement.scrollTop=this._scrollTop})}_getPanelTheme(){return this._parentFormField?"mat-"+this._parentFormField.color:""}get empty(){return!this._selectionModel||this._selectionModel.isEmpty()}_initializeSelection(){Promise.resolve().then(()=>{this._setSelectionByValue(this.ngControl?this.ngControl.value:this._value),this.stateChanges.next()})}_setSelectionByValue(t){if(this.multiple&&t){if(!Array.isArray(t))throw Error("Value must be an array in multiple-selection mode.");this._selectionModel.clear(),t.forEach(t=>this._selectValue(t)),this._sortValues()}else{this._selectionModel.clear();const e=this._selectValue(t);e?this._keyManager.updateActiveItem(e):this.panelOpen||this._keyManager.updateActiveItem(-1)}this._changeDetectorRef.markForCheck()}_selectValue(t){const e=this.options.find(e=>{try{return null!=e.value&&this._compareWith(e.value,t)}catch(n){return Ai()&&console.warn(n),!1}});return e&&this._selectionModel.select(e),e}_initKeyManager(){this._keyManager=new gd(this.options).withTypeAhead(this._typeaheadDebounceInterval).withVerticalOrientation().withHorizontalOrientation(this._isRtl()?"rtl":"ltr").withAllowedModifierKeys(["shiftKey"]),this._keyManager.tabOut.pipe(Hf(this._destroy)).subscribe(()=>{this.panelOpen&&(!this.multiple&&this._keyManager.activeItem&&this._keyManager.activeItem._selectViaInteraction(),this.focus(),this.close())}),this._keyManager.change.pipe(Hf(this._destroy)).subscribe(()=>{this._panelOpen&&this.panel?this._scrollActiveOptionIntoView():this._panelOpen||this.multiple||!this._keyManager.activeItem||this._keyManager.activeItem._selectViaInteraction()})}_resetOptions(){const t=$(this.options.changes,this._destroy);this.optionSelectionChanges.pipe(Hf(t)).subscribe(t=>{this._onSelect(t.source,t.isUserInput),t.isUserInput&&!this.multiple&&this._panelOpen&&(this.close(),this.focus())}),$(...this.options.map(t=>t._stateChanges)).pipe(Hf(t)).subscribe(()=>{this._changeDetectorRef.markForCheck(),this.stateChanges.next()}),this._setOptionIds()}_onSelect(t,e){const n=this._selectionModel.isSelected(t);null!=t.value||this._multiple?(n!==t.selected&&(t.selected?this._selectionModel.select(t):this._selectionModel.deselect(t)),e&&this._keyManager.setActiveItem(t),this.multiple&&(this._sortValues(),e&&this.focus())):(t.deselect(),this._selectionModel.clear(),this._propagateChanges(t.value)),n!==this._selectionModel.isSelected(t)&&this._propagateChanges(),this.stateChanges.next()}_sortValues(){if(this.multiple){const t=this.options.toArray();this._selectionModel.sort((e,n)=>this.sortComparator?this.sortComparator(e,n,t):t.indexOf(e)-t.indexOf(n)),this.stateChanges.next()}}_propagateChanges(t){let e=null;e=this.multiple?this.selected.map(t=>t.value):this.selected?this.selected.value:t,this._value=e,this.valueChange.emit(e),this._onChange(e),this.selectionChange.emit(new Kb(this,e)),this._changeDetectorRef.markForCheck()}_setOptionIds(){this._optionIds=this.options.map(t=>t.id).join(" ")}_highlightCorrectOption(){this._keyManager&&(this.empty?this._keyManager.setFirstItemActive():this._keyManager.setActiveItem(this._selectionModel.selected[0]))}_scrollActiveOptionIntoView(){const t=this._keyManager.activeItemIndex||0,e=Kf(t,this.options,this.optionGroups);this.panel.nativeElement.scrollTop=function(t,e,n,i){const r=t*e;return r<n?r:r+e>n+256?Math.max(0,r-256+e):n}(t+e,this._getItemHeight(),this.panel.nativeElement.scrollTop)}focus(t){this._elementRef.nativeElement.focus(t)}_getOptionIndex(t){return this.options.reduce((e,n,i)=>void 0!==e?e:t===n?i:void 0,void 0)}_calculateOverlayPosition(){const t=this._getItemHeight(),e=this._getItemCount(),n=Math.min(e*t,256),i=e*t-n;let r=this.empty?0:this._getOptionIndex(this._selectionModel.selected[0]);r+=Kf(r,this.options,this.optionGroups);const s=n/2;this._scrollTop=this._calculateOverlayScroll(r,s,i),this._offsetY=this._calculateOverlayOffsetY(r,s,i),this._checkOverlayWithinViewport(i)}_calculateOverlayScroll(t,e,n){const i=this._getItemHeight();return Math.min(Math.max(0,i*t-e+i/2),n)}_getAriaLabel(){return this.ariaLabelledby?null:this.ariaLabel||this.placeholder}_getAriaLabelledby(){return this.ariaLabelledby?this.ariaLabelledby:this._parentFormField&&this._parentFormField._hasFloatingLabel()&&!this._getAriaLabel()&&this._parentFormField._labelId||null}_getAriaActiveDescendant(){return this.panelOpen&&this._keyManager&&this._keyManager.activeItem?this._keyManager.activeItem.id:null}_calculateOverlayOffsetX(){const t=this.overlayDir.overlayRef.overlayElement.getBoundingClientRect(),e=this._viewportRuler.getViewportSize(),n=this._isRtl(),i=this.multiple?56:32;let r;if(this.multiple)r=40;else{let t=this._selectionModel.selected[0]||this.options.first;r=t&&t.group?32:16}n||(r*=-1);const s=0-(t.left+r-(n?i:0)),o=t.right+r-e.width+(n?0:i);s>0?r+=s+8:o>0&&(r-=o+8),this.overlayDir.offsetX=Math.round(r),this.overlayDir.overlayRef.updatePosition()}_calculateOverlayOffsetY(t,e,n){const i=this._getItemHeight(),r=(i-this._triggerRect.height)/2,s=Math.floor(256/i);let o;return this._disableOptionCentering?0:(o=0===this._scrollTop?t*i:this._scrollTop===n?(t-(this._getItemCount()-s))*i+(i-(this._getItemCount()*i-256)%i):e-i/2,Math.round(-1*o-r))}_checkOverlayWithinViewport(t){const e=this._getItemHeight(),n=this._viewportRuler.getViewportSize(),i=this._triggerRect.top-8,r=n.height-this._triggerRect.bottom-8,s=Math.abs(this._offsetY),o=Math.min(this._getItemCount()*e,256)-s-this._triggerRect.height;o>r?this._adjustPanelUp(o,r):s>i?this._adjustPanelDown(s,i,t):this._transformOrigin=this._getOriginBasedOnOption()}_adjustPanelUp(t,e){const n=Math.round(t-e);this._scrollTop-=n,this._offsetY-=n,this._transformOrigin=this._getOriginBasedOnOption(),this._scrollTop<=0&&(this._scrollTop=0,this._offsetY=0,this._transformOrigin="50% bottom 0px")}_adjustPanelDown(t,e,n){const i=Math.round(t-e);if(this._scrollTop+=i,this._offsetY+=i,this._transformOrigin=this._getOriginBasedOnOption(),this._scrollTop>=n)return this._scrollTop=n,this._offsetY=0,void(this._transformOrigin="50% top 0px")}_getOriginBasedOnOption(){const t=this._getItemHeight(),e=(t-this._triggerRect.height)/2;return`50% ${Math.abs(this._offsetY)-e+t/2}px 0px`}_getItemCount(){return this.options.length+this.optionGroups.length}_getItemHeight(){return 3*this._triggerFontSize}setDescribedByIds(t){this._ariaDescribedby=t.join(" ")}onContainerClick(){this.focus(),this.open()}get shouldLabelFloat(){return this._panelOpen||!this.empty}}return t.\u0275fac=function(e){return new(e||t)(Ao(Dv),Ao(Zs),Ao(Rl),Ao(Sf),Ao(Ga),Ao(Nd,8),Ao(W_,8),Ao(ay,8),Ao(Ig,8),Ao(Zg,10),Do("tabindex"),Ao(Bb),Ao(Cd),Ao(jb,8))},t.\u0275cmp=de({type:t,selectors:[["mat-select"]],contentQueries:function(t,e,n){var i;1&t&&(el(n,$b,!0),el(n,Vf,!0),el(n,Ff,!0)),2&t&&(Qc(i=rl())&&(e.customTrigger=i.first),Qc(i=rl())&&(e.options=i),Qc(i=rl())&&(e.optionGroups=i))},viewQuery:function(t,e){var n;1&t&&(Jc(Ib,!0),Jc(Rb,!0),Jc(kb,!0)),2&t&&(Qc(n=rl())&&(e.trigger=n.first),Qc(n=rl())&&(e.panel=n.first),Qc(n=rl())&&(e.overlayDir=n.first))},hostAttrs:["role","listbox",1,"mat-select"],hostVars:19,hostBindings:function(t,e){1&t&&qo("keydown",(function(t){return e._handleKeydown(t)}))("focus",(function(){return e._onFocus()}))("blur",(function(){return e._onBlur()})),2&t&&(To("id",e.id)("tabindex",e.tabIndex)("aria-label",e._getAriaLabel())("aria-labelledby",e._getAriaLabelledby())("aria-required",e.required.toString())("aria-disabled",e.disabled.toString())("aria-invalid",e.errorState)("aria-owns",e.panelOpen?e._optionIds:null)("aria-multiselectable",e.multiple)("aria-describedby",e._ariaDescribedby||null)("aria-activedescendant",e._getAriaActiveDescendant()),oa("mat-select-disabled",e.disabled)("mat-select-invalid",e.errorState)("mat-select-required",e.required)("mat-select-empty",e.empty))},inputs:{disabled:"disabled",disableRipple:"disableRipple",tabIndex:"tabIndex",ariaLabel:["aria-label","ariaLabel"],id:"id",disableOptionCentering:"disableOptionCentering",typeaheadDebounceInterval:"typeaheadDebounceInterval",placeholder:"placeholder",required:"required",multiple:"multiple",compareWith:"compareWith",value:"value",panelClass:"panelClass",ariaLabelledby:["aria-labelledby","ariaLabelledby"],errorStateMatcher:"errorStateMatcher",sortComparator:"sortComparator"},outputs:{openedChange:"openedChange",_openedStream:"opened",_closedStream:"closed",selectionChange:"selectionChange",valueChange:"valueChange"},exportAs:["matSelect"],features:[ja([{provide:gg,useExisting:t},{provide:jf,useExisting:t}]),Ia,Ae],ngContentSelectors:Lb,decls:9,vars:9,consts:[["cdk-overlay-origin","","aria-hidden","true",1,"mat-select-trigger",3,"click"],["origin","cdkOverlayOrigin","trigger",""],[1,"mat-select-value",3,"ngSwitch"],["class","mat-select-placeholder",4,"ngSwitchCase"],["class","mat-select-value-text",3,"ngSwitch",4,"ngSwitchCase"],[1,"mat-select-arrow-wrapper"],[1,"mat-select-arrow"],["cdk-connected-overlay","","cdkConnectedOverlayLockPosition","","cdkConnectedOverlayHasBackdrop","","cdkConnectedOverlayBackdropClass","cdk-overlay-transparent-backdrop",3,"cdkConnectedOverlayScrollStrategy","cdkConnectedOverlayOrigin","cdkConnectedOverlayOpen","cdkConnectedOverlayPositions","cdkConnectedOverlayMinWidth","cdkConnectedOverlayOffsetY","backdropClick","attach","detach"],[1,"mat-select-placeholder"],[1,"mat-select-value-text",3,"ngSwitch"],[4,"ngSwitchDefault"],[4,"ngSwitchCase"],[1,"mat-select-panel-wrap"],[3,"ngClass","keydown"],["panel",""]],template:function(t,e){if(1&t&&(Xo(Nb),No(0,"div",0,1),qo("click",(function(){return e.toggle()})),No(3,"div",2),Ro(4,Ob,2,1,"span",3),Ro(5,Pb,3,2,"span",4),Lo(),No(6,"div",5),Fo(7,"div",6),Lo(),Lo(),Ro(8,Mb,4,11,"ng-template",7),qo("backdropClick",(function(){return e.close()}))("attach",(function(){return e._onAttached()}))("detach",(function(){return e.close()}))),2&t){const t=Oo(1);kr(3),Po("ngSwitch",e.empty),kr(1),Po("ngSwitchCase",!0),kr(1),Po("ngSwitchCase",!1),kr(3),Po("cdkConnectedOverlayScrollStrategy",e._scrollStrategy)("cdkConnectedOverlayOrigin",t)("cdkConnectedOverlayOpen",e.panelOpen)("cdkConnectedOverlayPositions",e._positions)("cdkConnectedOverlayMinWidth",null==e._triggerRect?null:e._triggerRect.width)("cdkConnectedOverlayOffsetY",e._offsetY)}},directives:[Eb,Nu,Lu,kb,Fu,Tu],styles:[".mat-select{display:inline-block;width:100%;outline:none}.mat-select-trigger{display:inline-table;cursor:pointer;position:relative;box-sizing:border-box}.mat-select-disabled .mat-select-trigger{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:default}.mat-select-value{display:table-cell;max-width:0;width:100%;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.mat-select-value-text{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.mat-select-arrow-wrapper{display:table-cell;vertical-align:middle}.mat-form-field-appearance-fill .mat-select-arrow-wrapper{transform:translateY(-50%)}.mat-form-field-appearance-outline .mat-select-arrow-wrapper{transform:translateY(-25%)}.mat-form-field-appearance-standard.mat-form-field-has-label .mat-select:not(.mat-select-empty) .mat-select-arrow-wrapper{transform:translateY(-50%)}.mat-form-field-appearance-standard .mat-select.mat-select-empty .mat-select-arrow-wrapper{transition:transform 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}._mat-animation-noopable.mat-form-field-appearance-standard .mat-select.mat-select-empty .mat-select-arrow-wrapper{transition:none}.mat-select-arrow{width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid;margin:0 4px}.mat-select-panel-wrap{flex-basis:100%}.mat-select-panel{min-width:112px;max-width:280px;overflow:auto;-webkit-overflow-scrolling:touch;padding-top:0;padding-bottom:0;max-height:256px;min-width:100%;border-radius:4px}.cdk-high-contrast-active .mat-select-panel{outline:solid 1px}.mat-select-panel .mat-optgroup-label,.mat-select-panel .mat-option{font-size:inherit;line-height:3em;height:3em}.mat-form-field-type-mat-select:not(.mat-form-field-disabled) .mat-form-field-flex{cursor:pointer}.mat-form-field-type-mat-select .mat-form-field-label{width:calc(100% - 18px)}.mat-select-placeholder{transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}._mat-animation-noopable .mat-select-placeholder{transition:none}.mat-form-field-hide-placeholder .mat-select-placeholder{color:transparent;-webkit-text-fill-color:transparent;transition:none;display:block}\n"],encapsulation:2,data:{animation:[Fb.transformPanelWrap,Fb.transformPanel]},changeDetection:0}),t})(),zb=(()=>{class t{}return t.\u0275mod=ge({type:t}),t.\u0275inj=ut({factory:function(e){return new(e||t)},providers:[Vb],imports:[[$u,xb,qf,gf],Pv,Og,qf,gf]}),t})();function Wb(t,e){1&t&&Qo(0)}const Yb=["*"];function Xb(t,e){}const Qb=function(t){return{animationDuration:t}},Zb=function(t,e){return{value:t,params:e}},Jb=["tabBodyWrapper"],tw=["tabHeader"];function ew(t,e){}function nw(t,e){1&t&&Ro(0,ew,0,0,"ng-template",9),2&t&&Po("cdkPortalOutlet",Wo().$implicit.templateLabel)}function iw(t,e){1&t&&ya(0),2&t&&va(Wo().$implicit.textLabel)}function rw(t,e){if(1&t){const t=jo();No(0,"div",6),qo("click",(function(){nn(t);const n=e.$implicit,i=e.index,r=Wo(),s=Oo(1);return r._handleClick(n,s,i)})),No(1,"div",7),Ro(2,nw,1,1,"ng-template",8),Ro(3,iw,1,1,"ng-template",8),Lo(),Lo()}if(2&t){const t=e.$implicit,n=e.index,i=Wo();oa("mat-tab-label-active",i.selectedIndex==n),Po("id",i._getTabLabelId(n))("disabled",t.disabled)("matRippleDisabled",t.disabled||i.disableRipple),To("tabIndex",i._getTabIndex(t,n))("aria-posinset",n+1)("aria-setsize",i._tabs.length)("aria-controls",i._getTabContentId(n))("aria-selected",i.selectedIndex==n)("aria-label",t.ariaLabel||null)("aria-labelledby",!t.ariaLabel&&t.ariaLabelledby?t.ariaLabelledby:null),kr(2),Po("ngIf",t.templateLabel),kr(1),Po("ngIf",!t.templateLabel)}}function sw(t,e){if(1&t){const t=jo();No(0,"mat-tab-body",10),qo("_onCentered",(function(){return nn(t),Wo()._removeTabBodyWrapperHeight()}))("_onCentering",(function(e){return nn(t),Wo()._setTabBodyWrapperHeight(e)})),Lo()}if(2&t){const t=e.$implicit,n=e.index,i=Wo();oa("mat-tab-body-active",i.selectedIndex==n),Po("id",i._getTabContentId(n))("content",t.content)("position",t.position)("origin",t.origin)("animationDuration",i.animationDuration),To("aria-labelledby",i._getTabLabelId(n))}}const ow=["tabListContainer"],aw=["tabList"],cw=["nextPaginator"],lw=["previousPaginator"],uw=new Ft("MatInkBarPositioner",{providedIn:"root",factory:function(){return t=>({left:t?(t.offsetLeft||0)+"px":"0",width:t?(t.offsetWidth||0)+"px":"0"})}});let hw=(()=>{class t{constructor(t,e,n,i){this._elementRef=t,this._ngZone=e,this._inkBarPositioner=n,this._animationMode=i}alignToElement(t){this.show(),"undefined"!=typeof requestAnimationFrame?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>this._setStyles(t))}):this._setStyles(t)}show(){this._elementRef.nativeElement.style.visibility="visible"}hide(){this._elementRef.nativeElement.style.visibility="hidden"}_setStyles(t){const e=this._inkBarPositioner(t),n=this._elementRef.nativeElement;n.style.left=e.left,n.style.width=e.width}}return t.\u0275fac=function(e){return new(e||t)(Ao(Ga),Ao(Rl),Ao(uw),Ao(cf,8))},t.\u0275dir=ye({type:t,selectors:[["mat-ink-bar"]],hostAttrs:[1,"mat-ink-bar"],hostVars:2,hostBindings:function(t,e){2&t&&oa("_mat-animation-noopable","NoopAnimations"===e._animationMode)}}),t})();const dw=new Ft("MatTabContent"),pw=new Ft("MatTabLabel");class mw{}const fw=_f(mw),gw=new Ft("MAT_TAB_GROUP");let _w=(()=>{class t extends fw{constructor(t,e){super(),this._viewContainerRef=t,this._closestTabGroup=e,this.textLabel="",this._contentPortal=null,this._stateChanges=new E,this.position=null,this.origin=null,this.isActive=!1}get templateLabel(){return this._templateLabel}set templateLabel(t){t&&(this._templateLabel=t)}get content(){return this._contentPortal}ngOnChanges(t){(t.hasOwnProperty("textLabel")||t.hasOwnProperty("disabled"))&&this._stateChanges.next()}ngOnDestroy(){this._stateChanges.complete()}ngOnInit(){this._contentPortal=new Uv(this._explicitContent||this._implicitContent,this._viewContainerRef)}}return t.\u0275fac=function(e){return new(e||t)(Ao(gc),Ao(gw,8))},t.\u0275cmp=de({type:t,selectors:[["mat-tab"]],contentQueries:function(t,e,n){var i;1&t&&(el(n,pw,!0),nl(n,dw,!0,mc)),2&t&&(Qc(i=rl())&&(e.templateLabel=i.first),Qc(i=rl())&&(e._explicitContent=i.first))},viewQuery:function(t,e){var n;1&t&&Zc(mc,!0),2&t&&Qc(n=rl())&&(e._implicitContent=n.first)},inputs:{disabled:"disabled",textLabel:["label","textLabel"],ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"]},exportAs:["matTab"],features:[Ia,Ae],ngContentSelectors:Yb,decls:1,vars:0,template:function(t,e){1&t&&(Xo(),Ro(0,Wb,1,0,"ng-template"))},encapsulation:2}),t})();const yw={translateTab:Kd("translateTab",[Hd("center, void, left-origin-center, right-origin-center",$d({transform:"none"})),Hd("left",$d({transform:"translate3d(-100%, 0, 0)",minHeight:"1px"})),Hd("right",$d({transform:"translate3d(100%, 0, 0)",minHeight:"1px"})),zd("* => left, * => right, left => center, right => center",qd("{{animationDuration}} cubic-bezier(0.35, 0, 0.25, 1)")),zd("void => left-origin-center",[$d({transform:"translate3d(-100%, 0, 0)"}),qd("{{animationDuration}} cubic-bezier(0.35, 0, 0.25, 1)")]),zd("void => right-origin-center",[$d({transform:"translate3d(100%, 0, 0)"}),qd("{{animationDuration}} cubic-bezier(0.35, 0, 0.25, 1)")])])};let vw=(()=>{class t extends qv{constructor(t,e,n,i){super(t,e,i),this._host=n,this._centeringSub=h.EMPTY,this._leavingSub=h.EMPTY}ngOnInit(){super.ngOnInit(),this._centeringSub=this._host._beforeCentering.pipe(jd(this._host._isCenterPosition(this._host._position))).subscribe(t=>{t&&!this.hasAttached()&&this.attach(this._host._content)}),this._leavingSub=this._host._afterLeavingCenter.subscribe(()=>{this.detach()})}ngOnDestroy(){super.ngOnDestroy(),this._centeringSub.unsubscribe(),this._leavingSub.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(Ao(qa),Ao(gc),Ao(St(()=>ww)),Ao(ou))},t.\u0275dir=ye({type:t,selectors:[["","matTabBodyHost",""]],features:[Ia]}),t})(),bw=(()=>{class t{constructor(t,e,n){this._elementRef=t,this._dir=e,this._dirChangeSubscription=h.EMPTY,this._translateTabComplete=new E,this._onCentering=new jc,this._beforeCentering=new jc,this._afterLeavingCenter=new jc,this._onCentered=new jc(!0),this.animationDuration="500ms",e&&(this._dirChangeSubscription=e.change.subscribe(t=>{this._computePositionAnimationState(t),n.markForCheck()})),this._translateTabComplete.pipe(mv((t,e)=>t.fromState===e.fromState&&t.toState===e.toState)).subscribe(t=>{this._isCenterPosition(t.toState)&&this._isCenterPosition(this._position)&&this._onCentered.emit(),this._isCenterPosition(t.fromState)&&!this._isCenterPosition(this._position)&&this._afterLeavingCenter.emit()})}set position(t){this._positionIndex=t,this._computePositionAnimationState()}ngOnInit(){"center"==this._position&&null!=this.origin&&(this._position=this._computePositionFromOrigin(this.origin))}ngOnDestroy(){this._dirChangeSubscription.unsubscribe(),this._translateTabComplete.complete()}_onTranslateTabStarted(t){const e=this._isCenterPosition(t.toState);this._beforeCentering.emit(e),e&&this._onCentering.emit(this._elementRef.nativeElement.clientHeight)}_getLayoutDirection(){return this._dir&&"rtl"===this._dir.value?"rtl":"ltr"}_isCenterPosition(t){return"center"==t||"left-origin-center"==t||"right-origin-center"==t}_computePositionAnimationState(t=this._getLayoutDirection()){this._position=this._positionIndex<0?"ltr"==t?"left":"right":this._positionIndex>0?"ltr"==t?"right":"left":"center"}_computePositionFromOrigin(t){const e=this._getLayoutDirection();return"ltr"==e&&t<=0||"rtl"==e&&t>0?"left-origin-center":"right-origin-center"}}return t.\u0275fac=function(e){return new(e||t)(Ao(Ga),Ao(Nd,8),Ao(Zs))},t.\u0275dir=ye({type:t,inputs:{animationDuration:"animationDuration",position:"position",_content:["content","_content"],origin:"origin"},outputs:{_onCentering:"_onCentering",_beforeCentering:"_beforeCentering",_afterLeavingCenter:"_afterLeavingCenter",_onCentered:"_onCentered"}}),t})(),ww=(()=>{class t extends bw{constructor(t,e,n){super(t,e,n)}}return t.\u0275fac=function(e){return new(e||t)(Ao(Ga),Ao(Nd,8),Ao(Zs))},t.\u0275cmp=de({type:t,selectors:[["mat-tab-body"]],viewQuery:function(t,e){var n;1&t&&Jc(Gv,!0),2&t&&Qc(n=rl())&&(e._portalHost=n.first)},hostAttrs:[1,"mat-tab-body"],features:[Ia],decls:3,vars:6,consts:[[1,"mat-tab-body-content"],["content",""],["matTabBodyHost",""]],template:function(t,e){1&t&&(No(0,"div",0,1),qo("@translateTab.start",(function(t){return e._onTranslateTabStarted(t)}))("@translateTab.done",(function(t){return e._translateTabComplete.next(t)})),Ro(2,Xb,0,0,"ng-template",2),Lo()),2&t&&Po("@translateTab",Nc(3,Zb,e._position,Mc(1,Qb,e.animationDuration)))},directives:[vw],styles:[".mat-tab-body-content{height:100%;overflow:auto}.mat-tab-group-dynamic-height .mat-tab-body-content{overflow:hidden}\n"],encapsulation:2,data:{animation:[yw.translateTab]}}),t})();const Sw=new Ft("MAT_TABS_CONFIG");let Ew=0;class kw{}class Cw{constructor(t){this._elementRef=t}}const xw=yf(vf(Cw),"primary");let Tw=(()=>{class t extends xw{constructor(t,e,n,i){super(t),this._changeDetectorRef=e,this._animationMode=i,this._tabs=new Kc,this._indexToSelect=0,this._tabBodyWrapperHeight=0,this._tabsSubscription=h.EMPTY,this._tabLabelSubscription=h.EMPTY,this._dynamicHeight=!1,this._selectedIndex=null,this.headerPosition="above",this.selectedIndexChange=new jc,this.focusChange=new jc,this.animationDone=new jc,this.selectedTabChange=new jc(!0),this._groupId=Ew++,this.animationDuration=n&&n.animationDuration?n.animationDuration:"500ms",this.disablePagination=!(!n||null==n.disablePagination)&&n.disablePagination}get dynamicHeight(){return this._dynamicHeight}set dynamicHeight(t){this._dynamicHeight=kh(t)}get selectedIndex(){return this._selectedIndex}set selectedIndex(t){this._indexToSelect=Ch(t,null)}get animationDuration(){return this._animationDuration}set animationDuration(t){this._animationDuration=/^\d+$/.test(t)?t+"ms":t}get backgroundColor(){return this._backgroundColor}set backgroundColor(t){const e=this._elementRef.nativeElement;e.classList.remove("mat-background-"+this.backgroundColor),t&&e.classList.add("mat-background-"+t),this._backgroundColor=t}ngAfterContentChecked(){const t=this._indexToSelect=this._clampTabIndex(this._indexToSelect);if(this._selectedIndex!=t){const e=null==this._selectedIndex;e||this.selectedTabChange.emit(this._createChangeEvent(t)),Promise.resolve().then(()=>{this._tabs.forEach((e,n)=>e.isActive=n===t),e||this.selectedIndexChange.emit(t)})}this._tabs.forEach((e,n)=>{e.position=n-t,null==this._selectedIndex||0!=e.position||e.origin||(e.origin=t-this._selectedIndex)}),this._selectedIndex!==t&&(this._selectedIndex=t,this._changeDetectorRef.markForCheck())}ngAfterContentInit(){this._subscribeToAllTabChanges(),this._subscribeToTabLabels(),this._tabsSubscription=this._tabs.changes.subscribe(()=>{if(this._clampTabIndex(this._indexToSelect)===this._selectedIndex){const t=this._tabs.toArray();for(let e=0;e<t.length;e++)if(t[e].isActive){this._indexToSelect=this._selectedIndex=e;break}}this._changeDetectorRef.markForCheck()})}_subscribeToAllTabChanges(){this._allTabs.changes.pipe(jd(this._allTabs)).subscribe(t=>{this._tabs.reset(t.filter(t=>!t._closestTabGroup||t._closestTabGroup===this)),this._tabs.notifyOnChanges()})}ngOnDestroy(){this._tabs.destroy(),this._tabsSubscription.unsubscribe(),this._tabLabelSubscription.unsubscribe()}realignInkBar(){this._tabHeader&&this._tabHeader._alignInkBarToSelectedTab()}_focusChanged(t){this.focusChange.emit(this._createChangeEvent(t))}_createChangeEvent(t){const e=new kw;return e.index=t,this._tabs&&this._tabs.length&&(e.tab=this._tabs.toArray()[t]),e}_subscribeToTabLabels(){this._tabLabelSubscription&&this._tabLabelSubscription.unsubscribe(),this._tabLabelSubscription=$(...this._tabs.map(t=>t._stateChanges)).subscribe(()=>this._changeDetectorRef.markForCheck())}_clampTabIndex(t){return Math.min(this._tabs.length-1,Math.max(t||0,0))}_getTabLabelId(t){return`mat-tab-label-${this._groupId}-${t}`}_getTabContentId(t){return`mat-tab-content-${this._groupId}-${t}`}_setTabBodyWrapperHeight(t){if(!this._dynamicHeight||!this._tabBodyWrapperHeight)return;const e=this._tabBodyWrapper.nativeElement;e.style.height=this._tabBodyWrapperHeight+"px",this._tabBodyWrapper.nativeElement.offsetHeight&&(e.style.height=t+"px")}_removeTabBodyWrapperHeight(){const t=this._tabBodyWrapper.nativeElement;this._tabBodyWrapperHeight=t.clientHeight,t.style.height="",this.animationDone.emit()}_handleClick(t,e,n){t.disabled||(this.selectedIndex=e.focusIndex=n)}_getTabIndex(t,e){return t.disabled?null:this.selectedIndex===e?0:-1}}return t.\u0275fac=function(e){return new(e||t)(Ao(Ga),Ao(Zs),Ao(Sw,8),Ao(cf,8))},t.\u0275dir=ye({type:t,inputs:{headerPosition:"headerPosition",animationDuration:"animationDuration",disablePagination:"disablePagination",dynamicHeight:"dynamicHeight",selectedIndex:"selectedIndex",backgroundColor:"backgroundColor"},outputs:{selectedIndexChange:"selectedIndexChange",focusChange:"focusChange",animationDone:"animationDone",selectedTabChange:"selectedTabChange"},features:[Ia]}),t})(),Iw=(()=>{class t extends Tw{constructor(t,e,n,i){super(t,e,n,i)}}return t.\u0275fac=function(e){return new(e||t)(Ao(Ga),Ao(Zs),Ao(Sw,8),Ao(cf,8))},t.\u0275cmp=de({type:t,selectors:[["mat-tab-group"]],contentQueries:function(t,e,n){var i;1&t&&el(n,_w,!0),2&t&&Qc(i=rl())&&(e._allTabs=i)},viewQuery:function(t,e){var n;1&t&&(Jc(Jb,!0),Jc(tw,!0)),2&t&&(Qc(n=rl())&&(e._tabBodyWrapper=n.first),Qc(n=rl())&&(e._tabHeader=n.first))},hostAttrs:[1,"mat-tab-group"],hostVars:4,hostBindings:function(t,e){2&t&&oa("mat-tab-group-dynamic-height",e.dynamicHeight)("mat-tab-group-inverted-header","below"===e.headerPosition)},inputs:{color:"color",disableRipple:"disableRipple"},exportAs:["matTabGroup"],features:[ja([{provide:gw,useExisting:t}]),Ia],decls:6,vars:7,consts:[[3,"selectedIndex","disableRipple","disablePagination","indexFocused","selectFocusedIndex"],["tabHeader",""],["class","mat-tab-label mat-focus-indicator","role","tab","matTabLabelWrapper","","mat-ripple","","cdkMonitorElementFocus","",3,"id","mat-tab-label-active","disabled","matRippleDisabled","click",4,"ngFor","ngForOf"],[1,"mat-tab-body-wrapper"],["tabBodyWrapper",""],["role","tabpanel",3,"id","mat-tab-body-active","content","position","origin","animationDuration","_onCentered","_onCentering",4,"ngFor","ngForOf"],["role","tab","matTabLabelWrapper","","mat-ripple","","cdkMonitorElementFocus","",1,"mat-tab-label","mat-focus-indicator",3,"id","disabled","matRippleDisabled","click"],[1,"mat-tab-label-content"],[3,"ngIf"],[3,"cdkPortalOutlet"],["role","tabpanel",3,"id","content","position","origin","animationDuration","_onCentered","_onCentering"]],template:function(t,e){1&t&&(No(0,"mat-tab-header",0,1),qo("indexFocused",(function(t){return e._focusChanged(t)}))("selectFocusedIndex",(function(t){return e.selectedIndex=t})),Ro(2,rw,4,14,"div",2),Lo(),No(3,"div",3,4),Ro(5,sw,1,8,"mat-tab-body",5),Lo()),2&t&&(Po("selectedIndex",e.selectedIndex||0)("disableRipple",e.disableRipple)("disablePagination",e.disablePagination),kr(2),Po("ngForOf",e._tabs),kr(1),oa("_mat-animation-noopable","NoopAnimations"===e._animationMode),kr(2),Po("ngForOf",e._tabs))},directives:function(){return[Nw,Ru,Aw,Pf,Ad,Au,qv,ww]},styles:[".mat-tab-group{display:flex;flex-direction:column}.mat-tab-group.mat-tab-group-inverted-header{flex-direction:column-reverse}.mat-tab-label{height:48px;padding:0 24px;cursor:pointer;box-sizing:border-box;opacity:.6;min-width:160px;text-align:center;display:inline-flex;justify-content:center;align-items:center;white-space:nowrap;position:relative}.mat-tab-label:focus{outline:none}.mat-tab-label:focus:not(.mat-tab-disabled){opacity:1}.cdk-high-contrast-active .mat-tab-label:focus{outline:dotted 2px;outline-offset:-2px}.mat-tab-label.mat-tab-disabled{cursor:default}.cdk-high-contrast-active .mat-tab-label.mat-tab-disabled{opacity:.5}.mat-tab-label .mat-tab-label-content{display:inline-flex;justify-content:center;align-items:center;white-space:nowrap}.cdk-high-contrast-active .mat-tab-label{opacity:1}@media(max-width: 599px){.mat-tab-label{padding:0 12px}}@media(max-width: 959px){.mat-tab-label{padding:0 12px}}.mat-tab-group[mat-stretch-tabs]>.mat-tab-header .mat-tab-label{flex-basis:0;flex-grow:1}.mat-tab-body-wrapper{position:relative;overflow:hidden;display:flex;transition:height 500ms cubic-bezier(0.35, 0, 0.25, 1)}._mat-animation-noopable.mat-tab-body-wrapper{transition:none;animation:none}.mat-tab-body{top:0;left:0;right:0;bottom:0;position:absolute;display:block;overflow:hidden;flex-basis:100%}.mat-tab-body.mat-tab-body-active{position:relative;overflow-x:hidden;overflow-y:auto;z-index:1;flex-grow:1}.mat-tab-group.mat-tab-group-dynamic-height .mat-tab-body.mat-tab-body-active{overflow-y:hidden}\n"],encapsulation:2}),t})();class Rw{}const Ow=_f(Rw);let Aw=(()=>{class t extends Ow{constructor(t){super(),this.elementRef=t}focus(){this.elementRef.nativeElement.focus()}getOffsetLeft(){return this.elementRef.nativeElement.offsetLeft}getOffsetWidth(){return this.elementRef.nativeElement.offsetWidth}}return t.\u0275fac=function(e){return new(e||t)(Ao(Ga))},t.\u0275dir=ye({type:t,selectors:[["","matTabLabelWrapper",""]],hostVars:3,hostBindings:function(t,e){2&t&&(To("aria-disabled",!!e.disabled),oa("mat-tab-disabled",e.disabled))},inputs:{disabled:"disabled"},features:[Ia]}),t})();const Dw=Qh({passive:!0});let Pw=(()=>{class t{constructor(t,e,n,i,r,s,o){this._elementRef=t,this._changeDetectorRef=e,this._viewportRuler=n,this._dir=i,this._ngZone=r,this._platform=s,this._animationMode=o,this._scrollDistance=0,this._selectedIndexChanged=!1,this._destroyed=new E,this._showPaginationControls=!1,this._disableScrollAfter=!0,this._disableScrollBefore=!0,this._stopScrolling=new E,this.disablePagination=!1,this._selectedIndex=0,this.selectFocusedIndex=new jc,this.indexFocused=new jc,r.runOutsideAngular(()=>{$f(t.nativeElement,"mouseleave").pipe(Hf(this._destroyed)).subscribe(()=>{this._stopInterval()})})}get selectedIndex(){return this._selectedIndex}set selectedIndex(t){t=Ch(t),this._selectedIndex!=t&&(this._selectedIndexChanged=!0,this._selectedIndex=t,this._keyManager&&this._keyManager.updateActiveItem(t))}ngAfterViewInit(){$f(this._previousPaginator.nativeElement,"touchstart",Dw).pipe(Hf(this._destroyed)).subscribe(()=>{this._handlePaginatorPress("before")}),$f(this._nextPaginator.nativeElement,"touchstart",Dw).pipe(Hf(this._destroyed)).subscribe(()=>{this._handlePaginatorPress("after")})}ngAfterContentInit(){const t=this._dir?this._dir.change:td(null),e=this._viewportRuler.change(150),n=()=>{this.updatePagination(),this._alignInkBarToSelectedTab()};this._keyManager=new _d(this._items).withHorizontalOrientation(this._getLayoutDirection()).withWrap(),this._keyManager.updateActiveItem(0),"undefined"!=typeof requestAnimationFrame?requestAnimationFrame(n):n(),$(t,e,this._items.changes).pipe(Hf(this._destroyed)).subscribe(()=>{Promise.resolve().then(n),this._keyManager.withHorizontalOrientation(this._getLayoutDirection())}),this._keyManager.change.pipe(Hf(this._destroyed)).subscribe(t=>{this.indexFocused.emit(t),this._setTabFocus(t)})}ngAfterContentChecked(){this._tabLabelCount!=this._items.length&&(this.updatePagination(),this._tabLabelCount=this._items.length,this._changeDetectorRef.markForCheck()),this._selectedIndexChanged&&(this._scrollToLabel(this._selectedIndex),this._checkScrollingControls(),this._alignInkBarToSelectedTab(),this._selectedIndexChanged=!1,this._changeDetectorRef.markForCheck()),this._scrollDistanceChanged&&(this._updateTabScrollPosition(),this._scrollDistanceChanged=!1,this._changeDetectorRef.markForCheck())}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete(),this._stopScrolling.complete()}_handleKeydown(t){if(!ed(t))switch(t.keyCode){case 36:this._keyManager.setFirstItemActive(),t.preventDefault();break;case 35:this._keyManager.setLastItemActive(),t.preventDefault();break;case 13:case 32:this.focusIndex!==this.selectedIndex&&(this.selectFocusedIndex.emit(this.focusIndex),this._itemSelected(t));break;default:this._keyManager.onKeydown(t)}}_onContentChanges(){const t=this._elementRef.nativeElement.textContent;t!==this._currentTextContent&&(this._currentTextContent=t||"",this._ngZone.run(()=>{this.updatePagination(),this._alignInkBarToSelectedTab(),this._changeDetectorRef.markForCheck()}))}updatePagination(){this._checkPaginationEnabled(),this._checkScrollingControls(),this._updateTabScrollPosition()}get focusIndex(){return this._keyManager?this._keyManager.activeItemIndex:0}set focusIndex(t){this._isValidIndex(t)&&this.focusIndex!==t&&this._keyManager&&this._keyManager.setActiveItem(t)}_isValidIndex(t){if(!this._items)return!0;const e=this._items?this._items.toArray()[t]:null;return!!e&&!e.disabled}_setTabFocus(t){if(this._showPaginationControls&&this._scrollToLabel(t),this._items&&this._items.length){this._items.toArray()[t].focus();const e=this._tabListContainer.nativeElement,n=this._getLayoutDirection();e.scrollLeft="ltr"==n?0:e.scrollWidth-e.offsetWidth}}_getLayoutDirection(){return this._dir&&"rtl"===this._dir.value?"rtl":"ltr"}_updateTabScrollPosition(){if(this.disablePagination)return;const t=this.scrollDistance,e=this._platform,n="ltr"===this._getLayoutDirection()?-t:t;this._tabList.nativeElement.style.transform=`translateX(${Math.round(n)}px)`,e&&(e.TRIDENT||e.EDGE)&&(this._tabListContainer.nativeElement.scrollLeft=0)}get scrollDistance(){return this._scrollDistance}set scrollDistance(t){this._scrollTo(t)}_scrollHeader(t){return this._scrollTo(this._scrollDistance+("before"==t?-1:1)*this._tabListContainer.nativeElement.offsetWidth/3)}_handlePaginatorClick(t){this._stopInterval(),this._scrollHeader(t)}_scrollToLabel(t){if(this.disablePagination)return;const e=this._items?this._items.toArray()[t]:null;if(!e)return;const n=this._tabListContainer.nativeElement.offsetWidth,{offsetLeft:i,offsetWidth:r}=e.elementRef.nativeElement;let s,o;"ltr"==this._getLayoutDirection()?(s=i,o=s+r):(o=this._tabList.nativeElement.offsetWidth-i,s=o-r);const a=this.scrollDistance,c=this.scrollDistance+n;s<a?this.scrollDistance-=a-s+60:o>c&&(this.scrollDistance+=o-c+60)}_checkPaginationEnabled(){if(this.disablePagination)this._showPaginationControls=!1;else{const t=this._tabList.nativeElement.scrollWidth>this._elementRef.nativeElement.offsetWidth;t||(this.scrollDistance=0),t!==this._showPaginationControls&&this._changeDetectorRef.markForCheck(),this._showPaginationControls=t}}_checkScrollingControls(){this.disablePagination?this._disableScrollAfter=this._disableScrollBefore=!0:(this._disableScrollBefore=0==this.scrollDistance,this._disableScrollAfter=this.scrollDistance==this._getMaxScrollDistance(),this._changeDetectorRef.markForCheck())}_getMaxScrollDistance(){return this._tabList.nativeElement.scrollWidth-this._tabListContainer.nativeElement.offsetWidth||0}_alignInkBarToSelectedTab(){const t=this._items&&this._items.length?this._items.toArray()[this.selectedIndex]:null,e=t?t.elementRef.nativeElement:null;e?this._inkBar.alignToElement(e):this._inkBar.hide()}_stopInterval(){this._stopScrolling.next()}_handlePaginatorPress(t,e){e&&null!=e.button&&0!==e.button||(this._stopInterval(),Mg(650,100).pipe(Hf($(this._stopScrolling,this._destroyed))).subscribe(()=>{const{maxScrollDistance:e,distance:n}=this._scrollHeader(t);(0===n||n>=e)&&this._stopInterval()}))}_scrollTo(t){if(this.disablePagination)return{maxScrollDistance:0,distance:0};const e=this._getMaxScrollDistance();return this._scrollDistance=Math.max(0,Math.min(e,t)),this._scrollDistanceChanged=!0,this._checkScrollingControls(),{maxScrollDistance:e,distance:this._scrollDistance}}}return t.\u0275fac=function(e){return new(e||t)(Ao(Ga),Ao(Zs),Ao(Dv),Ao(Nd,8),Ao(Rl),Ao(Gh),Ao(cf,8))},t.\u0275dir=ye({type:t,inputs:{disablePagination:"disablePagination"}}),t})(),Mw=(()=>{class t extends Pw{constructor(t,e,n,i,r,s,o){super(t,e,n,i,r,s,o),this._disableRipple=!1}get disableRipple(){return this._disableRipple}set disableRipple(t){this._disableRipple=kh(t)}_itemSelected(t){t.preventDefault()}}return t.\u0275fac=function(e){return new(e||t)(Ao(Ga),Ao(Zs),Ao(Dv),Ao(Nd,8),Ao(Rl),Ao(Gh),Ao(cf,8))},t.\u0275dir=ye({type:t,inputs:{disableRipple:"disableRipple"},features:[Ia]}),t})(),Nw=(()=>{class t extends Mw{constructor(t,e,n,i,r,s,o){super(t,e,n,i,r,s,o)}}return t.\u0275fac=function(e){return new(e||t)(Ao(Ga),Ao(Zs),Ao(Dv),Ao(Nd,8),Ao(Rl),Ao(Gh),Ao(cf,8))},t.\u0275cmp=de({type:t,selectors:[["mat-tab-header"]],contentQueries:function(t,e,n){var i;1&t&&el(n,Aw,!1),2&t&&Qc(i=rl())&&(e._items=i)},viewQuery:function(t,e){var n;1&t&&(Zc(hw,!0),Zc(ow,!0),Zc(aw,!0),Jc(cw,!0),Jc(lw,!0)),2&t&&(Qc(n=rl())&&(e._inkBar=n.first),Qc(n=rl())&&(e._tabListContainer=n.first),Qc(n=rl())&&(e._tabList=n.first),Qc(n=rl())&&(e._nextPaginator=n.first),Qc(n=rl())&&(e._previousPaginator=n.first))},hostAttrs:[1,"mat-tab-header"],hostVars:4,hostBindings:function(t,e){2&t&&oa("mat-tab-header-pagination-controls-enabled",e._showPaginationControls)("mat-tab-header-rtl","rtl"==e._getLayoutDirection())},inputs:{selectedIndex:"selectedIndex"},outputs:{selectFocusedIndex:"selectFocusedIndex",indexFocused:"indexFocused"},features:[Ia],ngContentSelectors:Yb,decls:13,vars:8,consts:[["aria-hidden","true","mat-ripple","",1,"mat-tab-header-pagination","mat-tab-header-pagination-before","mat-elevation-z4",3,"matRippleDisabled","click","mousedown","touchend"],["previousPaginator",""],[1,"mat-tab-header-pagination-chevron"],[1,"mat-tab-label-container",3,"keydown"],["tabListContainer",""],["role","tablist",1,"mat-tab-list",3,"cdkObserveContent"],["tabList",""],[1,"mat-tab-labels"],["aria-hidden","true","mat-ripple","",1,"mat-tab-header-pagination","mat-tab-header-pagination-after","mat-elevation-z4",3,"matRippleDisabled","mousedown","click","touchend"],["nextPaginator",""]],template:function(t,e){1&t&&(Xo(),No(0,"div",0,1),qo("click",(function(){return e._handlePaginatorClick("before")}))("mousedown",(function(t){return e._handlePaginatorPress("before",t)}))("touchend",(function(){return e._stopInterval()})),Fo(2,"div",2),Lo(),No(3,"div",3,4),qo("keydown",(function(t){return e._handleKeydown(t)})),No(5,"div",5,6),qo("cdkObserveContent",(function(){return e._onContentChanges()})),No(7,"div",7),Qo(8),Lo(),Fo(9,"mat-ink-bar"),Lo(),Lo(),No(10,"div",8,9),qo("mousedown",(function(t){return e._handlePaginatorPress("after",t)}))("click",(function(){return e._handlePaginatorClick("after")}))("touchend",(function(){return e._stopInterval()})),Fo(12,"div",2),Lo()),2&t&&(oa("mat-tab-header-pagination-disabled",e._disableScrollBefore),Po("matRippleDisabled",e._disableScrollBefore||e.disableRipple),kr(5),oa("_mat-animation-noopable","NoopAnimations"===e._animationMode),kr(5),oa("mat-tab-header-pagination-disabled",e._disableScrollAfter),Po("matRippleDisabled",e._disableScrollAfter||e.disableRipple))},directives:[Pf,Vh,hw],styles:['.mat-tab-header{display:flex;overflow:hidden;position:relative;flex-shrink:0}.mat-tab-header-pagination{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;position:relative;display:none;justify-content:center;align-items:center;min-width:32px;cursor:pointer;z-index:2;-webkit-tap-highlight-color:transparent;touch-action:none}.mat-tab-header-pagination-controls-enabled .mat-tab-header-pagination{display:flex}.mat-tab-header-pagination-before,.mat-tab-header-rtl .mat-tab-header-pagination-after{padding-left:4px}.mat-tab-header-pagination-before .mat-tab-header-pagination-chevron,.mat-tab-header-rtl .mat-tab-header-pagination-after .mat-tab-header-pagination-chevron{transform:rotate(-135deg)}.mat-tab-header-rtl .mat-tab-header-pagination-before,.mat-tab-header-pagination-after{padding-right:4px}.mat-tab-header-rtl .mat-tab-header-pagination-before .mat-tab-header-pagination-chevron,.mat-tab-header-pagination-after .mat-tab-header-pagination-chevron{transform:rotate(45deg)}.mat-tab-header-pagination-chevron{border-style:solid;border-width:2px 2px 0 0;content:"";height:8px;width:8px}.mat-tab-header-pagination-disabled{box-shadow:none;cursor:default}.mat-tab-list{flex-grow:1;position:relative;transition:transform 500ms cubic-bezier(0.35, 0, 0.25, 1)}.mat-ink-bar{position:absolute;bottom:0;height:2px;transition:500ms cubic-bezier(0.35, 0, 0.25, 1)}._mat-animation-noopable.mat-ink-bar{transition:none;animation:none}.mat-tab-group-inverted-header .mat-ink-bar{bottom:auto;top:0}.cdk-high-contrast-active .mat-ink-bar{outline:solid 2px;height:0}.mat-tab-labels{display:flex}[mat-align-tabs=center]>.mat-tab-header .mat-tab-labels{justify-content:center}[mat-align-tabs=end]>.mat-tab-header .mat-tab-labels{justify-content:flex-end}.mat-tab-label-container{display:flex;flex-grow:1;overflow:hidden;z-index:1}._mat-animation-noopable.mat-tab-list{transition:none;animation:none}.mat-tab-label{height:48px;padding:0 24px;cursor:pointer;box-sizing:border-box;opacity:.6;min-width:160px;text-align:center;display:inline-flex;justify-content:center;align-items:center;white-space:nowrap;position:relative}.mat-tab-label:focus{outline:none}.mat-tab-label:focus:not(.mat-tab-disabled){opacity:1}.cdk-high-contrast-active .mat-tab-label:focus{outline:dotted 2px;outline-offset:-2px}.mat-tab-label.mat-tab-disabled{cursor:default}.cdk-high-contrast-active .mat-tab-label.mat-tab-disabled{opacity:.5}.mat-tab-label .mat-tab-label-content{display:inline-flex;justify-content:center;align-items:center;white-space:nowrap}.cdk-high-contrast-active .mat-tab-label{opacity:1}@media(max-width: 599px){.mat-tab-label{min-width:72px}}\n'],encapsulation:2}),t})(),Lw=(()=>{class t{}return t.\u0275mod=ge({type:t}),t.\u0275inj=ut({factory:function(e){return new(e||t)},imports:[[$u,gf,Hv,Mf,Kh,Pd],gf]}),t})();function Fw(t,e){}class Uw{constructor(){this.role="dialog",this.panelClass="",this.hasBackdrop=!0,this.backdropClass="",this.disableClose=!1,this.width="",this.height="",this.maxWidth="80vw",this.data=null,this.ariaDescribedBy=null,this.ariaLabelledBy=null,this.ariaLabel=null,this.autoFocus=!0,this.restoreFocus=!0,this.closeOnNavigation=!0}}const Bw={dialogContainer:Kd("dialogContainer",[Hd("void, exit",$d({opacity:0,transform:"scale(0.7)"})),Hd("enter",$d({transform:"none"})),zd("* => enter",qd("150ms cubic-bezier(0, 0, 0.2, 1)",$d({transform:"none",opacity:1}))),zd("* => void, * => exit",qd("75ms cubic-bezier(0.4, 0.0, 0.2, 1)",$d({opacity:0})))])};function jw(){throw Error("Attempting to attach dialog content after content is already attached")}let Vw=(()=>{class t extends jv{constructor(t,e,n,i,r,s){super(),this._elementRef=t,this._focusTrapFactory=e,this._changeDetectorRef=n,this._config=r,this._focusMonitor=s,this._elementFocusedBeforeDialogWasOpened=null,this._closeInteractionType=null,this._state="enter",this._animationStateChanged=new jc,this.attachDomPortal=t=>(this._portalOutlet.hasAttached()&&jw(),this._setupFocusTrap(),this._portalOutlet.attachDomPortal(t)),this._ariaLabelledBy=r.ariaLabelledBy||null,this._document=i}attachComponentPortal(t){return this._portalOutlet.hasAttached()&&jw(),this._setupFocusTrap(),this._portalOutlet.attachComponentPortal(t)}attachTemplatePortal(t){return this._portalOutlet.hasAttached()&&jw(),this._setupFocusTrap(),this._portalOutlet.attachTemplatePortal(t)}_recaptureFocus(){this._containsFocus()||(!this._config.autoFocus||!this._focusTrap.focusInitialElement())&&this._elementRef.nativeElement.focus()}_trapFocus(){this._config.autoFocus?this._focusTrap.focusInitialElementWhenReady():this._containsFocus()||this._elementRef.nativeElement.focus()}_restoreFocus(){const t=this._elementFocusedBeforeDialogWasOpened;if(this._config.restoreFocus&&t&&"function"==typeof t.focus){const e=this._document.activeElement,n=this._elementRef.nativeElement;e&&e!==this._document.body&&e!==n&&!n.contains(e)||(this._focusMonitor?(this._focusMonitor.focusVia(t,this._closeInteractionType),this._closeInteractionType=null):t.focus())}this._focusTrap&&this._focusTrap.destroy()}_setupFocusTrap(){this._focusTrap||(this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement)),this._document&&(this._elementFocusedBeforeDialogWasOpened=this._document.activeElement,this._elementRef.nativeElement.focus&&Promise.resolve().then(()=>this._elementRef.nativeElement.focus()))}_containsFocus(){const t=this._elementRef.nativeElement,e=this._document.activeElement;return t===e||t.contains(e)}_onAnimationDone(t){"enter"===t.toState?this._trapFocus():"exit"===t.toState&&this._restoreFocus(),this._animationStateChanged.emit(t)}_onAnimationStart(t){this._animationStateChanged.emit(t)}_startExitAnimation(){this._state="exit",this._changeDetectorRef.markForCheck()}}return t.\u0275fac=function(e){return new(e||t)(Ao(Ga),Ao(Sd),Ao(Zs),Ao(ou,8),Ao(Uw),Ao(Rd))},t.\u0275cmp=de({type:t,selectors:[["mat-dialog-container"]],viewQuery:function(t,e){var n;1&t&&Zc(qv,!0),2&t&&Qc(n=rl())&&(e._portalOutlet=n.first)},hostAttrs:["tabindex","-1","aria-modal","true",1,"mat-dialog-container"],hostVars:6,hostBindings:function(t,e){1&t&&Go("@dialogContainer.start",(function(t){return e._onAnimationStart(t)}))("@dialogContainer.done",(function(t){return e._onAnimationDone(t)})),2&t&&(To("id",e._id)("role",e._config.role)("aria-labelledby",e._config.ariaLabel?null:e._ariaLabelledBy)("aria-label",e._config.ariaLabel)("aria-describedby",e._config.ariaDescribedBy||null),xa("@dialogContainer",e._state))},features:[Ia],decls:1,vars:0,consts:[["cdkPortalOutlet",""]],template:function(t,e){1&t&&Ro(0,Fw,0,0,"ng-template",0)},directives:[qv],styles:[".mat-dialog-container{display:block;padding:24px;border-radius:4px;box-sizing:border-box;overflow:auto;outline:0;width:100%;height:100%;min-height:inherit;max-height:inherit}.cdk-high-contrast-active .mat-dialog-container{outline:solid 1px}.mat-dialog-content{display:block;margin:0 -24px;padding:0 24px;max-height:65vh;overflow:auto;-webkit-overflow-scrolling:touch}.mat-dialog-title{margin:0 0 20px;display:block}.mat-dialog-actions{padding:8px 0;display:flex;flex-wrap:wrap;min-height:52px;align-items:center;margin-bottom:-24px}.mat-dialog-actions[align=end]{justify-content:flex-end}.mat-dialog-actions[align=center]{justify-content:center}.mat-dialog-actions .mat-button-base+.mat-button-base,.mat-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:8px}[dir=rtl] .mat-dialog-actions .mat-button-base+.mat-button-base,[dir=rtl] .mat-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:0;margin-right:8px}\n"],encapsulation:2,data:{animation:[Bw.dialogContainer]}}),t})(),Kw=0;class qw{constructor(t,e,n="mat-dialog-"+Kw++){this._overlayRef=t,this._containerInstance=e,this.id=n,this.disableClose=this._containerInstance._config.disableClose,this._afterOpened=new E,this._afterClosed=new E,this._beforeClosed=new E,this._state=0,e._id=n,e._animationStateChanged.pipe(od(t=>"done"===t.phaseName&&"enter"===t.toState),dd(1)).subscribe(()=>{this._afterOpened.next(),this._afterOpened.complete()}),e._animationStateChanged.pipe(od(t=>"done"===t.phaseName&&"exit"===t.toState),dd(1)).subscribe(()=>{clearTimeout(this._closeFallbackTimeout),this._finishDialogClose()}),t.detachments().subscribe(()=>{this._beforeClosed.next(this._result),this._beforeClosed.complete(),this._afterClosed.next(this._result),this._afterClosed.complete(),this.componentInstance=null,this._overlayRef.dispose()}),t.keydownEvents().pipe(od(t=>27===t.keyCode&&!this.disableClose&&!ed(t))).subscribe(t=>{t.preventDefault(),Gw(this,"keyboard")}),t.backdropClick().subscribe(()=>{this.disableClose?this._containerInstance._recaptureFocus():Gw(this,"mouse")})}close(t){this._result=t,this._containerInstance._animationStateChanged.pipe(od(t=>"start"===t.phaseName),dd(1)).subscribe(e=>{this._beforeClosed.next(t),this._beforeClosed.complete(),this._overlayRef.detachBackdrop(),this._closeFallbackTimeout=setTimeout(()=>this._finishDialogClose(),e.totalTime+100)}),this._containerInstance._startExitAnimation(),this._state=1}afterOpened(){return this._afterOpened.asObservable()}afterClosed(){return this._afterClosed.asObservable()}beforeClosed(){return this._beforeClosed.asObservable()}backdropClick(){return this._overlayRef.backdropClick()}keydownEvents(){return this._overlayRef.keydownEvents()}updatePosition(t){let e=this._getPositionStrategy();return t&&(t.left||t.right)?t.left?e.left(t.left):e.right(t.right):e.centerHorizontally(),t&&(t.top||t.bottom)?t.top?e.top(t.top):e.bottom(t.bottom):e.centerVertically(),this._overlayRef.updatePosition(),this}updateSize(t="",e=""){return this._getPositionStrategy().width(t).height(e),this._overlayRef.updatePosition(),this}addPanelClass(t){return this._overlayRef.addPanelClass(t),this}removePanelClass(t){return this._overlayRef.removePanelClass(t),this}getState(){return this._state}_finishDialogClose(){this._state=2,this._overlayRef.dispose()}_getPositionStrategy(){return this._overlayRef.getConfig().positionStrategy}}function Gw(t,e,n){return void 0!==t._containerInstance&&(t._containerInstance._closeInteractionType=e),t.close(n)}const $w=new Ft("MatDialogData"),Hw=new Ft("mat-dialog-default-options"),zw=new Ft("mat-dialog-scroll-strategy"),Ww={provide:zw,deps:[bb],useFactory:function(t){return()=>t.scrollStrategies.block()}};let Yw=(()=>{class t{constructor(t,e,n,i,r,s,o){this._overlay=t,this._injector=e,this._defaultOptions=i,this._parentDialog=s,this._overlayContainer=o,this._openDialogsAtThisLevel=[],this._afterAllClosedAtThisLevel=new E,this._afterOpenedAtThisLevel=new E,this._ariaHiddenElements=new Map,this.afterAllClosed=Tb(()=>this.openDialogs.length?this._afterAllClosed:this._afterAllClosed.pipe(jd(void 0))),this._scrollStrategy=r}get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}get _afterAllClosed(){const t=this._parentDialog;return t?t._afterAllClosed:this._afterAllClosedAtThisLevel}open(t,e){if((e=function(t,e){return Object.assign(Object.assign({},e),t)}(e,this._defaultOptions||new Uw)).id&&this.getDialogById(e.id))throw Error(`Dialog with id "${e.id}" exists already. The dialog id must be unique.`);const n=this._createOverlay(e),i=this._attachDialogContainer(n,e),r=this._attachDialogContent(t,i,n,e);return this.openDialogs.length||this._hideNonDialogContentFromAssistiveTechnology(),this.openDialogs.push(r),r.afterClosed().subscribe(()=>this._removeOpenDialog(r)),this.afterOpened.next(r),r}closeAll(){this._closeDialogs(this.openDialogs)}getDialogById(t){return this.openDialogs.find(e=>e.id===t)}ngOnDestroy(){this._closeDialogs(this._openDialogsAtThisLevel),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete()}_createOverlay(t){const e=this._getOverlayConfig(t);return this._overlay.create(e)}_getOverlayConfig(t){const e=new eb({positionStrategy:this._overlay.position().global(),scrollStrategy:t.scrollStrategy||this._scrollStrategy(),panelClass:t.panelClass,hasBackdrop:t.hasBackdrop,direction:t.direction,minWidth:t.minWidth,minHeight:t.minHeight,maxWidth:t.maxWidth,maxHeight:t.maxHeight,disposeOnNavigation:t.closeOnNavigation});return t.backdropClass&&(e.backdropClass=t.backdropClass),e}_attachDialogContainer(t,e){const n=go.create({parent:e&&e.viewContainerRef&&e.viewContainerRef.injector||this._injector,providers:[{provide:Uw,useValue:e}]}),i=new Fv(Vw,e.viewContainerRef,n,e.componentFactoryResolver);return t.attach(i).instance}_attachDialogContent(t,e,n,i){const r=new qw(n,e,i.id);if(t instanceof mc)e.attachTemplatePortal(new Uv(t,null,{$implicit:i.data,dialogRef:r}));else{const n=this._createInjector(i,r,e),s=e.attachComponentPortal(new Fv(t,i.viewContainerRef,n));r.componentInstance=s.instance}return r.updateSize(i.width,i.height).updatePosition(i.position),r}_createInjector(t,e,n){const i=t&&t.viewContainerRef&&t.viewContainerRef.injector,r=[{provide:Vw,useValue:n},{provide:$w,useValue:t.data},{provide:qw,useValue:e}];return!t.direction||i&&i.get(Nd,null)||r.push({provide:Nd,useValue:{value:t.direction,change:td()}}),go.create({parent:i||this._injector,providers:r})}_removeOpenDialog(t){const e=this.openDialogs.indexOf(t);e>-1&&(this.openDialogs.splice(e,1),this.openDialogs.length||(this._ariaHiddenElements.forEach((t,e)=>{t?e.setAttribute("aria-hidden",t):e.removeAttribute("aria-hidden")}),this._ariaHiddenElements.clear(),this._afterAllClosed.next()))}_hideNonDialogContentFromAssistiveTechnology(){const t=this._overlayContainer.getContainerElement();if(t.parentElement){const e=t.parentElement.children;for(let n=e.length-1;n>-1;n--){let i=e[n];i===t||"SCRIPT"===i.nodeName||"STYLE"===i.nodeName||i.hasAttribute("aria-live")||(this._ariaHiddenElements.set(i,i.getAttribute("aria-hidden")),i.setAttribute("aria-hidden","true"))}}}_closeDialogs(t){let e=t.length;for(;e--;)t[e].close()}}return t.\u0275fac=function(e){return new(e||t)(zt(bb),zt(go),zt(wu,8),zt(Hw,8),zt(zw),zt(t,12),zt(ub))},t.\u0275prov=lt({token:t,factory:t.\u0275fac}),t})(),Xw=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=ye({type:t,selectors:[["","mat-dialog-content",""],["mat-dialog-content"],["","matDialogContent",""]],hostAttrs:[1,"mat-dialog-content"]}),t})(),Qw=(()=>{class t{}return t.\u0275mod=ge({type:t}),t.\u0275inj=ut({factory:function(e){return new(e||t)},providers:[Yw,Ww],imports:[[xb,Hv,gf],gf]}),t})(),Zw=(()=>{class t{}return t.\u0275mod=ge({type:t}),t.\u0275inj=ut({factory:function(e){return new(e||t)},imports:[[Mf,gf],gf]}),t})();const Jw=["*",[["mat-toolbar-row"]]],tS=["*","mat-toolbar-row"];class eS{constructor(t){this._elementRef=t}}const nS=yf(eS);let iS=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=ye({type:t,selectors:[["mat-toolbar-row"]],hostAttrs:[1,"mat-toolbar-row"],exportAs:["matToolbarRow"]}),t})(),rS=(()=>{class t extends nS{constructor(t,e,n){super(t),this._platform=e,this._document=n}ngAfterViewInit(){Ai()&&this._platform.isBrowser&&(this._checkToolbarMixedModes(),this._toolbarRows.changes.subscribe(()=>this._checkToolbarMixedModes()))}_checkToolbarMixedModes(){this._toolbarRows.length&&Array.from(this._elementRef.nativeElement.childNodes).filter(t=>!(t.classList&&t.classList.contains("mat-toolbar-row"))).filter(t=>t.nodeType!==(this._document?this._document.COMMENT_NODE:8)).some(t=>!(!t.textContent||!t.textContent.trim()))&&function(){throw Error("MatToolbar: Attempting to combine different toolbar modes. Either specify multiple `<mat-toolbar-row>` elements explicitly or just place content inside of a `<mat-toolbar>` for a single row.")}()}}return t.\u0275fac=function(e){return new(e||t)(Ao(Ga),Ao(Gh),Ao(ou))},t.\u0275cmp=de({type:t,selectors:[["mat-toolbar"]],contentQueries:function(t,e,n){var i;1&t&&el(n,iS,!0),2&t&&Qc(i=rl())&&(e._toolbarRows=i)},hostAttrs:[1,"mat-toolbar"],hostVars:4,hostBindings:function(t,e){2&t&&oa("mat-toolbar-multiple-rows",e._toolbarRows.length>0)("mat-toolbar-single-row",0===e._toolbarRows.length)},inputs:{color:"color"},exportAs:["matToolbar"],features:[Ia],ngContentSelectors:tS,decls:2,vars:0,template:function(t,e){1&t&&(Xo(Jw),Qo(0),Qo(1,1))},styles:[".cdk-high-contrast-active .mat-toolbar{outline:solid 1px}.mat-toolbar-row,.mat-toolbar-single-row{display:flex;box-sizing:border-box;padding:0 16px;width:100%;flex-direction:row;align-items:center;white-space:nowrap}.mat-toolbar-multiple-rows{display:flex;box-sizing:border-box;flex-direction:column;width:100%}\n"],encapsulation:2,changeDetection:0}),t})(),sS=(()=>{class t{}return t.\u0275mod=ge({type:t}),t.\u0275inj=ut({factory:function(e){return new(e||t)},imports:[[gf],gf]}),t})();const oS=["*"];function aS(t,e){if(1&t){const t=jo();No(0,"div",2),qo("click",(function(){return nn(t),Wo()._onBackdropClicked()})),Lo()}2&t&&oa("mat-drawer-shown",Wo()._isShowingBackdrop())}function cS(t,e){1&t&&(No(0,"mat-drawer-content"),Qo(1,2),Lo())}const lS=[[["mat-drawer"]],[["mat-drawer-content"]],"*"],uS=["mat-drawer","mat-drawer-content","*"];function hS(t,e){if(1&t){const t=jo();No(0,"div",2),qo("click",(function(){return nn(t),Wo()._onBackdropClicked()})),Lo()}2&t&&oa("mat-drawer-shown",Wo()._isShowingBackdrop())}function dS(t,e){1&t&&(No(0,"mat-sidenav-content",3),Qo(1,2),Lo())}const pS=[[["mat-sidenav"]],[["mat-sidenav-content"]],"*"],mS=["mat-sidenav","mat-sidenav-content","*"],fS={transformDrawer:Kd("transform",[Hd("open, open-instant",$d({transform:"none",visibility:"visible"})),Hd("void",$d({"box-shadow":"none",visibility:"hidden"})),zd("void => open-instant",qd("0ms")),zd("void <=> open, open-instant => void",qd("400ms cubic-bezier(0.25, 0.8, 0.25, 1)"))])};function gS(t){throw Error(`A drawer was already declared for 'position="${t}"'`)}const _S=new Ft("MAT_DRAWER_DEFAULT_AUTOSIZE",{providedIn:"root",factory:function(){return!1}}),yS=new Ft("MAT_DRAWER_CONTAINER");let vS=(()=>{class t extends Av{constructor(t,e,n,i,r){super(n,i,r),this._changeDetectorRef=t,this._container=e}ngAfterContentInit(){this._container._contentMarginChanges.subscribe(()=>{this._changeDetectorRef.markForCheck()})}}return t.\u0275fac=function(e){return new(e||t)(Ao(Zs),Ao(St(()=>wS)),Ao(Ga),Ao(Ov),Ao(Rl))},t.\u0275cmp=de({type:t,selectors:[["mat-drawer-content"]],hostAttrs:[1,"mat-drawer-content"],hostVars:4,hostBindings:function(t,e){2&t&&sa("margin-left",e._container._contentMargins.left,"px")("margin-right",e._container._contentMargins.right,"px")},features:[Ia],ngContentSelectors:oS,decls:1,vars:0,template:function(t,e){1&t&&(Xo(),Qo(0))},encapsulation:2,changeDetection:0}),t})(),bS=(()=>{class t{constructor(t,e,n,i,r,s,o){this._elementRef=t,this._focusTrapFactory=e,this._focusMonitor=n,this._platform=i,this._ngZone=r,this._doc=s,this._container=o,this._elementFocusedBeforeDrawerWasOpened=null,this._enableAnimations=!1,this._position="start",this._mode="over",this._disableClose=!1,this._opened=!1,this._animationStarted=new E,this._animationEnd=new E,this._animationState="void",this.openedChange=new jc(!0),this._destroyed=new E,this.onPositionChanged=new jc,this._modeChanged=new E,this.openedChange.subscribe(t=>{t?(this._doc&&(this._elementFocusedBeforeDrawerWasOpened=this._doc.activeElement),this._takeFocus()):this._isFocusWithinDrawer()&&this._restoreFocus()}),this._ngZone.runOutsideAngular(()=>{$f(this._elementRef.nativeElement,"keydown").pipe(od(t=>27===t.keyCode&&!this.disableClose&&!ed(t)),Hf(this._destroyed)).subscribe(t=>this._ngZone.run(()=>{this.close(),t.stopPropagation(),t.preventDefault()}))}),this._animationEnd.pipe(mv((t,e)=>t.fromState===e.fromState&&t.toState===e.toState)).subscribe(t=>{const{fromState:e,toState:n}=t;(0===n.indexOf("open")&&"void"===e||"void"===n&&0===e.indexOf("open"))&&this.openedChange.emit(this._opened)})}get position(){return this._position}set position(t){(t="end"===t?"end":"start")!=this._position&&(this._position=t,this.onPositionChanged.emit())}get mode(){return this._mode}set mode(t){this._mode=t,this._updateFocusTrapState(),this._modeChanged.next()}get disableClose(){return this._disableClose}set disableClose(t){this._disableClose=kh(t)}get autoFocus(){const t=this._autoFocus;return null==t?"side"!==this.mode:t}set autoFocus(t){this._autoFocus=kh(t)}get opened(){return this._opened}set opened(t){this.toggle(kh(t))}get _openedStream(){return this.openedChange.pipe(od(t=>t),N(()=>{}))}get openedStart(){return this._animationStarted.pipe(od(t=>t.fromState!==t.toState&&0===t.toState.indexOf("open")),N(()=>{}))}get _closedStream(){return this.openedChange.pipe(od(t=>!t),N(()=>{}))}get closedStart(){return this._animationStarted.pipe(od(t=>t.fromState!==t.toState&&"void"===t.toState),N(()=>{}))}_takeFocus(){this.autoFocus&&this._focusTrap&&this._focusTrap.focusInitialElementWhenReady().then(t=>{t||"function"!=typeof this._elementRef.nativeElement.focus||this._elementRef.nativeElement.focus()})}_restoreFocus(){this.autoFocus&&(this._elementFocusedBeforeDrawerWasOpened?this._focusMonitor.focusVia(this._elementFocusedBeforeDrawerWasOpened,this._openedVia):this._elementRef.nativeElement.blur(),this._elementFocusedBeforeDrawerWasOpened=null,this._openedVia=null)}_isFocusWithinDrawer(){var t;const e=null===(t=this._doc)||void 0===t?void 0:t.activeElement;return!!e&&this._elementRef.nativeElement.contains(e)}ngAfterContentInit(){this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement),this._updateFocusTrapState()}ngAfterContentChecked(){this._platform.isBrowser&&(this._enableAnimations=!0)}ngOnDestroy(){this._focusTrap&&this._focusTrap.destroy(),this._animationStarted.complete(),this._animationEnd.complete(),this._modeChanged.complete(),this._destroyed.next(),this._destroyed.complete()}open(t){return this.toggle(!0,t)}close(){return this.toggle(!1)}_closeViaBackdropClick(){return this._setOpen(!1,!0)}toggle(t=!this.opened,e){return this._setOpen(t,!t&&this._isFocusWithinDrawer(),e)}_setOpen(t,e,n="program"){return this._opened=t,t?(this._animationState=this._enableAnimations?"open":"open-instant",this._openedVia=n):(this._animationState="void",e&&this._restoreFocus()),this._updateFocusTrapState(),new Promise(t=>{this.openedChange.pipe(dd(1)).subscribe(e=>t(e?"open":"close"))})}get _width(){return this._elementRef.nativeElement&&this._elementRef.nativeElement.offsetWidth||0}_updateFocusTrapState(){this._focusTrap&&(this._focusTrap.enabled=this.opened&&"side"!==this.mode)}_animationStartListener(t){this._animationStarted.next(t)}_animationDoneListener(t){this._animationEnd.next(t)}}return t.\u0275fac=function(e){return new(e||t)(Ao(Ga),Ao(Sd),Ao(Rd),Ao(Gh),Ao(Rl),Ao(ou,8),Ao(yS,8))},t.\u0275cmp=de({type:t,selectors:[["mat-drawer"]],hostAttrs:["tabIndex","-1",1,"mat-drawer"],hostVars:12,hostBindings:function(t,e){1&t&&Go("@transform.start",(function(t){return e._animationStartListener(t)}))("@transform.done",(function(t){return e._animationDoneListener(t)})),2&t&&(To("align",null),xa("@transform",e._animationState),oa("mat-drawer-end","end"===e.position)("mat-drawer-over","over"===e.mode)("mat-drawer-push","push"===e.mode)("mat-drawer-side","side"===e.mode)("mat-drawer-opened",e.opened))},inputs:{position:"position",mode:"mode",disableClose:"disableClose",autoFocus:"autoFocus",opened:"opened"},outputs:{openedChange:"openedChange",onPositionChanged:"positionChanged",_openedStream:"opened",openedStart:"openedStart",_closedStream:"closed",closedStart:"closedStart"},exportAs:["matDrawer"],ngContentSelectors:oS,decls:2,vars:0,consts:[[1,"mat-drawer-inner-container"]],template:function(t,e){1&t&&(Xo(),No(0,"div",0),Qo(1),Lo())},encapsulation:2,data:{animation:[fS.transformDrawer]},changeDetection:0}),t})(),wS=(()=>{class t{constructor(t,e,n,i,r,s=!1,o){this._dir=t,this._element=e,this._ngZone=n,this._changeDetectorRef=i,this._animationMode=o,this._drawers=new Kc,this.backdropClick=new jc,this._destroyed=new E,this._doCheckSubject=new E,this._contentMargins={left:null,right:null},this._contentMarginChanges=new E,t&&t.change.pipe(Hf(this._destroyed)).subscribe(()=>{this._validateDrawers(),this.updateContentMargins()}),r.change().pipe(Hf(this._destroyed)).subscribe(()=>this.updateContentMargins()),this._autosize=s}get start(){return this._start}get end(){return this._end}get autosize(){return this._autosize}set autosize(t){this._autosize=kh(t)}get hasBackdrop(){return null==this._backdropOverride?!this._start||"side"!==this._start.mode||!this._end||"side"!==this._end.mode:this._backdropOverride}set hasBackdrop(t){this._backdropOverride=null==t?null:kh(t)}get scrollable(){return this._userContent||this._content}ngAfterContentInit(){this._allDrawers.changes.pipe(jd(this._allDrawers),Hf(this._destroyed)).subscribe(t=>{this._drawers.reset(t.filter(t=>!t._container||t._container===this)),this._drawers.notifyOnChanges()}),this._drawers.changes.pipe(jd(null)).subscribe(()=>{this._validateDrawers(),this._drawers.forEach(t=>{this._watchDrawerToggle(t),this._watchDrawerPosition(t),this._watchDrawerMode(t)}),(!this._drawers.length||this._isDrawerOpen(this._start)||this._isDrawerOpen(this._end))&&this.updateContentMargins(),this._changeDetectorRef.markForCheck()}),this._doCheckSubject.pipe(Mh(10),Hf(this._destroyed)).subscribe(()=>this.updateContentMargins())}ngOnDestroy(){this._contentMarginChanges.complete(),this._doCheckSubject.complete(),this._drawers.destroy(),this._destroyed.next(),this._destroyed.complete()}open(){this._drawers.forEach(t=>t.open())}close(){this._drawers.forEach(t=>t.close())}updateContentMargins(){let t=0,e=0;if(this._left&&this._left.opened)if("side"==this._left.mode)t+=this._left._width;else if("push"==this._left.mode){const n=this._left._width;t+=n,e-=n}if(this._right&&this._right.opened)if("side"==this._right.mode)e+=this._right._width;else if("push"==this._right.mode){const n=this._right._width;e+=n,t-=n}t=t||null,e=e||null,t===this._contentMargins.left&&e===this._contentMargins.right||(this._contentMargins={left:t,right:e},this._ngZone.run(()=>this._contentMarginChanges.next(this._contentMargins)))}ngDoCheck(){this._autosize&&this._isPushed()&&this._ngZone.runOutsideAngular(()=>this._doCheckSubject.next())}_watchDrawerToggle(t){t._animationStarted.pipe(od(t=>t.fromState!==t.toState),Hf(this._drawers.changes)).subscribe(t=>{"open-instant"!==t.toState&&"NoopAnimations"!==this._animationMode&&this._element.nativeElement.classList.add("mat-drawer-transition"),this.updateContentMargins(),this._changeDetectorRef.markForCheck()}),"side"!==t.mode&&t.openedChange.pipe(Hf(this._drawers.changes)).subscribe(()=>this._setContainerClass(t.opened))}_watchDrawerPosition(t){t&&t.onPositionChanged.pipe(Hf(this._drawers.changes)).subscribe(()=>{this._ngZone.onMicrotaskEmpty.asObservable().pipe(dd(1)).subscribe(()=>{this._validateDrawers()})})}_watchDrawerMode(t){t&&t._modeChanged.pipe(Hf($(this._drawers.changes,this._destroyed))).subscribe(()=>{this.updateContentMargins(),this._changeDetectorRef.markForCheck()})}_setContainerClass(t){const e=this._element.nativeElement.classList,n="mat-drawer-container-has-open";t?e.add(n):e.remove(n)}_validateDrawers(){this._start=this._end=null,this._drawers.forEach(t=>{"end"==t.position?(null!=this._end&&gS("end"),this._end=t):(null!=this._start&&gS("start"),this._start=t)}),this._right=this._left=null,this._dir&&"rtl"===this._dir.value?(this._left=this._end,this._right=this._start):(this._left=this._start,this._right=this._end)}_isPushed(){return this._isDrawerOpen(this._start)&&"over"!=this._start.mode||this._isDrawerOpen(this._end)&&"over"!=this._end.mode}_onBackdropClicked(){this.backdropClick.emit(),this._closeModalDrawersViaBackdrop()}_closeModalDrawersViaBackdrop(){[this._start,this._end].filter(t=>t&&!t.disableClose&&this._canHaveBackdrop(t)).forEach(t=>t._closeViaBackdropClick())}_isShowingBackdrop(){return this._isDrawerOpen(this._start)&&this._canHaveBackdrop(this._start)||this._isDrawerOpen(this._end)&&this._canHaveBackdrop(this._end)}_canHaveBackdrop(t){return"side"!==t.mode||!!this._backdropOverride}_isDrawerOpen(t){return null!=t&&t.opened}}return t.\u0275fac=function(e){return new(e||t)(Ao(Nd,8),Ao(Ga),Ao(Rl),Ao(Zs),Ao(Dv),Ao(_S),Ao(cf,8))},t.\u0275cmp=de({type:t,selectors:[["mat-drawer-container"]],contentQueries:function(t,e,n){var i;1&t&&(el(n,vS,!0),el(n,bS,!0)),2&t&&(Qc(i=rl())&&(e._content=i.first),Qc(i=rl())&&(e._allDrawers=i))},viewQuery:function(t,e){var n;1&t&&Jc(vS,!0),2&t&&Qc(n=rl())&&(e._userContent=n.first)},hostAttrs:[1,"mat-drawer-container"],hostVars:2,hostBindings:function(t,e){2&t&&oa("mat-drawer-container-explicit-backdrop",e._backdropOverride)},inputs:{autosize:"autosize",hasBackdrop:"hasBackdrop"},outputs:{backdropClick:"backdropClick"},exportAs:["matDrawerContainer"],features:[ja([{provide:yS,useExisting:t}])],ngContentSelectors:uS,decls:4,vars:2,consts:[["class","mat-drawer-backdrop",3,"mat-drawer-shown","click",4,"ngIf"],[4,"ngIf"],[1,"mat-drawer-backdrop",3,"click"]],template:function(t,e){1&t&&(Xo(lS),Ro(0,aS,1,2,"div",0),Qo(1),Qo(2,1),Ro(3,cS,2,0,"mat-drawer-content",1)),2&t&&(Po("ngIf",e.hasBackdrop),kr(3),Po("ngIf",!e._content))},directives:[Au,vS],styles:[".mat-drawer-container{position:relative;z-index:1;box-sizing:border-box;-webkit-overflow-scrolling:touch;display:block;overflow:hidden}.mat-drawer-container[fullscreen]{top:0;left:0;right:0;bottom:0;position:absolute}.mat-drawer-container[fullscreen].mat-drawer-container-has-open{overflow:hidden}.mat-drawer-container.mat-drawer-container-explicit-backdrop .mat-drawer-side{z-index:3}.mat-drawer-container.ng-animate-disabled .mat-drawer-backdrop,.mat-drawer-container.ng-animate-disabled .mat-drawer-content,.ng-animate-disabled .mat-drawer-container .mat-drawer-backdrop,.ng-animate-disabled .mat-drawer-container .mat-drawer-content{transition:none}.mat-drawer-backdrop{top:0;left:0;right:0;bottom:0;position:absolute;display:block;z-index:3;visibility:hidden}.mat-drawer-backdrop.mat-drawer-shown{visibility:visible}.mat-drawer-transition .mat-drawer-backdrop{transition-duration:400ms;transition-timing-function:cubic-bezier(0.25, 0.8, 0.25, 1);transition-property:background-color,visibility}.cdk-high-contrast-active .mat-drawer-backdrop{opacity:.5}.mat-drawer-content{position:relative;z-index:1;display:block;height:100%;overflow:auto}.mat-drawer-transition .mat-drawer-content{transition-duration:400ms;transition-timing-function:cubic-bezier(0.25, 0.8, 0.25, 1);transition-property:transform,margin-left,margin-right}.mat-drawer{position:relative;z-index:4;display:block;position:absolute;top:0;bottom:0;z-index:3;outline:0;box-sizing:border-box;overflow-y:auto;transform:translate3d(-100%, 0, 0)}.cdk-high-contrast-active .mat-drawer,.cdk-high-contrast-active [dir=rtl] .mat-drawer.mat-drawer-end{border-right:solid 1px currentColor}.cdk-high-contrast-active [dir=rtl] .mat-drawer,.cdk-high-contrast-active .mat-drawer.mat-drawer-end{border-left:solid 1px currentColor;border-right:none}.mat-drawer.mat-drawer-side{z-index:2}.mat-drawer.mat-drawer-end{right:0;transform:translate3d(100%, 0, 0)}[dir=rtl] .mat-drawer{transform:translate3d(100%, 0, 0)}[dir=rtl] .mat-drawer.mat-drawer-end{left:0;right:auto;transform:translate3d(-100%, 0, 0)}.mat-drawer-inner-container{width:100%;height:100%;overflow:auto;-webkit-overflow-scrolling:touch}.mat-sidenav-fixed{position:fixed}\n"],encapsulation:2,changeDetection:0}),t})(),SS=(()=>{class t extends vS{constructor(t,e,n,i,r){super(t,e,n,i,r)}}return t.\u0275fac=function(e){return new(e||t)(Ao(Zs),Ao(St(()=>CS)),Ao(Ga),Ao(Ov),Ao(Rl))},t.\u0275cmp=de({type:t,selectors:[["mat-sidenav-content"]],hostAttrs:[1,"mat-drawer-content","mat-sidenav-content"],hostVars:4,hostBindings:function(t,e){2&t&&sa("margin-left",e._container._contentMargins.left,"px")("margin-right",e._container._contentMargins.right,"px")},features:[Ia],ngContentSelectors:oS,decls:1,vars:0,template:function(t,e){1&t&&(Xo(),Qo(0))},encapsulation:2,changeDetection:0}),t})(),ES=(()=>{class t extends bS{constructor(){super(...arguments),this._fixedInViewport=!1,this._fixedTopGap=0,this._fixedBottomGap=0}get fixedInViewport(){return this._fixedInViewport}set fixedInViewport(t){this._fixedInViewport=kh(t)}get fixedTopGap(){return this._fixedTopGap}set fixedTopGap(t){this._fixedTopGap=Ch(t)}get fixedBottomGap(){return this._fixedBottomGap}set fixedBottomGap(t){this._fixedBottomGap=Ch(t)}}return t.\u0275fac=function(e){return kS(e||t)},t.\u0275cmp=de({type:t,selectors:[["mat-sidenav"]],hostAttrs:["tabIndex","-1",1,"mat-drawer","mat-sidenav"],hostVars:17,hostBindings:function(t,e){2&t&&(To("align",null),sa("top",e.fixedInViewport?e.fixedTopGap:null,"px")("bottom",e.fixedInViewport?e.fixedBottomGap:null,"px"),oa("mat-drawer-end","end"===e.position)("mat-drawer-over","over"===e.mode)("mat-drawer-push","push"===e.mode)("mat-drawer-side","side"===e.mode)("mat-drawer-opened",e.opened)("mat-sidenav-fixed",e.fixedInViewport))},inputs:{fixedInViewport:"fixedInViewport",fixedTopGap:"fixedTopGap",fixedBottomGap:"fixedBottomGap"},exportAs:["matSidenav"],features:[Ia],ngContentSelectors:oS,decls:2,vars:0,consts:[[1,"mat-drawer-inner-container"]],template:function(t,e){1&t&&(Xo(),No(0,"div",0),Qo(1),Lo())},encapsulation:2,data:{animation:[fS.transformDrawer]},changeDetection:0}),t})();const kS=fi(ES);let CS=(()=>{class t extends wS{}return t.\u0275fac=function(e){return xS(e||t)},t.\u0275cmp=de({type:t,selectors:[["mat-sidenav-container"]],contentQueries:function(t,e,n){var i;1&t&&(el(n,SS,!0),el(n,ES,!0)),2&t&&(Qc(i=rl())&&(e._content=i.first),Qc(i=rl())&&(e._allDrawers=i))},hostAttrs:[1,"mat-drawer-container","mat-sidenav-container"],hostVars:2,hostBindings:function(t,e){2&t&&oa("mat-drawer-container-explicit-backdrop",e._backdropOverride)},exportAs:["matSidenavContainer"],features:[ja([{provide:yS,useExisting:t}]),Ia],ngContentSelectors:mS,decls:4,vars:2,consts:[["class","mat-drawer-backdrop",3,"mat-drawer-shown","click",4,"ngIf"],["cdkScrollable","",4,"ngIf"],[1,"mat-drawer-backdrop",3,"click"],["cdkScrollable",""]],template:function(t,e){1&t&&(Xo(pS),Ro(0,hS,1,2,"div",0),Qo(1),Qo(2,1),Ro(3,dS,2,0,"mat-sidenav-content",1)),2&t&&(Po("ngIf",e.hasBackdrop),kr(3),Po("ngIf",!e._content))},directives:[Au,SS,Av],styles:[".mat-drawer-container{position:relative;z-index:1;box-sizing:border-box;-webkit-overflow-scrolling:touch;display:block;overflow:hidden}.mat-drawer-container[fullscreen]{top:0;left:0;right:0;bottom:0;position:absolute}.mat-drawer-container[fullscreen].mat-drawer-container-has-open{overflow:hidden}.mat-drawer-container.mat-drawer-container-explicit-backdrop .mat-drawer-side{z-index:3}.mat-drawer-container.ng-animate-disabled .mat-drawer-backdrop,.mat-drawer-container.ng-animate-disabled .mat-drawer-content,.ng-animate-disabled .mat-drawer-container .mat-drawer-backdrop,.ng-animate-disabled .mat-drawer-container .mat-drawer-content{transition:none}.mat-drawer-backdrop{top:0;left:0;right:0;bottom:0;position:absolute;display:block;z-index:3;visibility:hidden}.mat-drawer-backdrop.mat-drawer-shown{visibility:visible}.mat-drawer-transition .mat-drawer-backdrop{transition-duration:400ms;transition-timing-function:cubic-bezier(0.25, 0.8, 0.25, 1);transition-property:background-color,visibility}.cdk-high-contrast-active .mat-drawer-backdrop{opacity:.5}.mat-drawer-content{position:relative;z-index:1;display:block;height:100%;overflow:auto}.mat-drawer-transition .mat-drawer-content{transition-duration:400ms;transition-timing-function:cubic-bezier(0.25, 0.8, 0.25, 1);transition-property:transform,margin-left,margin-right}.mat-drawer{position:relative;z-index:4;display:block;position:absolute;top:0;bottom:0;z-index:3;outline:0;box-sizing:border-box;overflow-y:auto;transform:translate3d(-100%, 0, 0)}.cdk-high-contrast-active .mat-drawer,.cdk-high-contrast-active [dir=rtl] .mat-drawer.mat-drawer-end{border-right:solid 1px currentColor}.cdk-high-contrast-active [dir=rtl] .mat-drawer,.cdk-high-contrast-active .mat-drawer.mat-drawer-end{border-left:solid 1px currentColor;border-right:none}.mat-drawer.mat-drawer-side{z-index:2}.mat-drawer.mat-drawer-end{right:0;transform:translate3d(100%, 0, 0)}[dir=rtl] .mat-drawer{transform:translate3d(100%, 0, 0)}[dir=rtl] .mat-drawer.mat-drawer-end{left:0;right:auto;transform:translate3d(-100%, 0, 0)}.mat-drawer-inner-container{width:100%;height:100%;overflow:auto;-webkit-overflow-scrolling:touch}.mat-sidenav-fixed{position:fixed}\n"],encapsulation:2,changeDetection:0}),t})();const xS=fi(CS);let TS=(()=>{class t{}return t.\u0275mod=ge({type:t}),t.\u0275inj=ut({factory:function(e){return new(e||t)},imports:[[$u,gf,$h,Pv],Pv,gf]}),t})(),IS=(()=>{class t{constructor(){this._vertical=!1,this._inset=!1}get vertical(){return this._vertical}set vertical(t){this._vertical=kh(t)}get inset(){return this._inset}set inset(t){this._inset=kh(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=de({type:t,selectors:[["mat-divider"]],hostAttrs:["role","separator",1,"mat-divider"],hostVars:7,hostBindings:function(t,e){2&t&&(To("aria-orientation",e.vertical?"vertical":"horizontal"),oa("mat-divider-vertical",e.vertical)("mat-divider-horizontal",!e.vertical)("mat-divider-inset",e.inset))},inputs:{vertical:"vertical",inset:"inset"},decls:0,vars:0,template:function(t,e){},styles:[".mat-divider{display:block;margin:0;border-top-width:1px;border-top-style:solid}.mat-divider.mat-divider-vertical{border-top:0;border-right-width:1px;border-right-style:solid}.mat-divider.mat-divider-inset{margin-left:80px}[dir=rtl] .mat-divider.mat-divider-inset{margin-left:auto;margin-right:80px}\n"],encapsulation:2,changeDetection:0}),t})(),RS=(()=>{class t{}return t.\u0275mod=ge({type:t}),t.\u0275inj=ut({factory:function(e){return new(e||t)},imports:[[gf],gf]}),t})();const OS=["*"],AS=[[["","mat-list-avatar",""],["","mat-list-icon",""],["","matListAvatar",""],["","matListIcon",""]],[["","mat-line",""],["","matLine",""]],"*"],DS=["[mat-list-avatar], [mat-list-icon], [matListAvatar], [matListIcon]","[mat-line], [matLine]","*"];class PS{}const MS=_f(vf(PS));class NS{}const LS=vf(NS),FS=new Ft("MatList"),US=new Ft("MatNavList");let BS=(()=>{class t extends MS{constructor(){super(...arguments),this._stateChanges=new E}ngOnChanges(){this._stateChanges.next()}ngOnDestroy(){this._stateChanges.complete()}}return t.\u0275fac=function(e){return jS(e||t)},t.\u0275cmp=de({type:t,selectors:[["mat-nav-list"]],hostAttrs:["role","navigation",1,"mat-nav-list","mat-list-base"],inputs:{disableRipple:"disableRipple",disabled:"disabled"},exportAs:["matNavList"],features:[ja([{provide:US,useExisting:t}]),Ia,Ae],ngContentSelectors:OS,decls:1,vars:0,template:function(t,e){1&t&&(Xo(),Qo(0))},styles:['.mat-subheader{display:flex;box-sizing:border-box;padding:16px;align-items:center}.mat-list-base .mat-subheader{margin:0}.mat-list-base{padding-top:8px;display:block;-webkit-tap-highlight-color:transparent}.mat-list-base .mat-subheader{height:48px;line-height:16px}.mat-list-base .mat-subheader:first-child{margin-top:-8px}.mat-list-base .mat-list-item,.mat-list-base .mat-list-option{display:block;height:48px;-webkit-tap-highlight-color:transparent;width:100%;padding:0}.mat-list-base .mat-list-item .mat-list-item-content,.mat-list-base .mat-list-option .mat-list-item-content{display:flex;flex-direction:row;align-items:center;box-sizing:border-box;padding:0 16px;position:relative;height:inherit}.mat-list-base .mat-list-item .mat-list-item-content-reverse,.mat-list-base .mat-list-option .mat-list-item-content-reverse{display:flex;align-items:center;padding:0 16px;flex-direction:row-reverse;justify-content:space-around}.mat-list-base .mat-list-item .mat-list-item-ripple,.mat-list-base .mat-list-option .mat-list-item-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-list-base .mat-list-item.mat-list-item-with-avatar,.mat-list-base .mat-list-option.mat-list-item-with-avatar{height:56px}.mat-list-base .mat-list-item.mat-2-line,.mat-list-base .mat-list-option.mat-2-line{height:72px}.mat-list-base .mat-list-item.mat-3-line,.mat-list-base .mat-list-option.mat-3-line{height:88px}.mat-list-base .mat-list-item.mat-multi-line,.mat-list-base .mat-list-option.mat-multi-line{height:auto}.mat-list-base .mat-list-item.mat-multi-line .mat-list-item-content,.mat-list-base .mat-list-option.mat-multi-line .mat-list-item-content{padding-top:16px;padding-bottom:16px}.mat-list-base .mat-list-item .mat-list-text,.mat-list-base .mat-list-option .mat-list-text{display:flex;flex-direction:column;flex:auto;box-sizing:border-box;overflow:hidden;padding:0}.mat-list-base .mat-list-item .mat-list-text>*,.mat-list-base .mat-list-option .mat-list-text>*{margin:0;padding:0;font-weight:normal;font-size:inherit}.mat-list-base .mat-list-item .mat-list-text:empty,.mat-list-base .mat-list-option .mat-list-text:empty{display:none}.mat-list-base .mat-list-item.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,.mat-list-base .mat-list-item.mat-list-option .mat-list-item-content .mat-list-text,.mat-list-base .mat-list-option.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,.mat-list-base .mat-list-option.mat-list-option .mat-list-item-content .mat-list-text{padding-right:0;padding-left:16px}[dir=rtl] .mat-list-base .mat-list-item.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base .mat-list-item.mat-list-option .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base .mat-list-option.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base .mat-list-option.mat-list-option .mat-list-item-content .mat-list-text{padding-right:16px;padding-left:0}.mat-list-base .mat-list-item.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,.mat-list-base .mat-list-item.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base .mat-list-option.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,.mat-list-base .mat-list-option.mat-list-option .mat-list-item-content-reverse .mat-list-text{padding-left:0;padding-right:16px}[dir=rtl] .mat-list-base .mat-list-item.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base .mat-list-item.mat-list-option .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base .mat-list-option.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base .mat-list-option.mat-list-option .mat-list-item-content-reverse .mat-list-text{padding-right:0;padding-left:16px}.mat-list-base .mat-list-item.mat-list-item-with-avatar.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base .mat-list-item.mat-list-item-with-avatar.mat-list-option .mat-list-item-content .mat-list-text,.mat-list-base .mat-list-option.mat-list-item-with-avatar.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base .mat-list-option.mat-list-item-with-avatar.mat-list-option .mat-list-item-content .mat-list-text{padding-right:16px;padding-left:16px}.mat-list-base .mat-list-item .mat-list-avatar,.mat-list-base .mat-list-option .mat-list-avatar{flex-shrink:0;width:40px;height:40px;border-radius:50%;object-fit:cover}.mat-list-base .mat-list-item .mat-list-avatar~.mat-divider-inset,.mat-list-base .mat-list-option .mat-list-avatar~.mat-divider-inset{margin-left:72px;width:calc(100% - 72px)}[dir=rtl] .mat-list-base .mat-list-item .mat-list-avatar~.mat-divider-inset,[dir=rtl] .mat-list-base .mat-list-option .mat-list-avatar~.mat-divider-inset{margin-left:auto;margin-right:72px}.mat-list-base .mat-list-item .mat-list-icon,.mat-list-base .mat-list-option .mat-list-icon{flex-shrink:0;width:24px;height:24px;font-size:24px;box-sizing:content-box;border-radius:50%;padding:4px}.mat-list-base .mat-list-item .mat-list-icon~.mat-divider-inset,.mat-list-base .mat-list-option .mat-list-icon~.mat-divider-inset{margin-left:64px;width:calc(100% - 64px)}[dir=rtl] .mat-list-base .mat-list-item .mat-list-icon~.mat-divider-inset,[dir=rtl] .mat-list-base .mat-list-option .mat-list-icon~.mat-divider-inset{margin-left:auto;margin-right:64px}.mat-list-base .mat-list-item .mat-divider,.mat-list-base .mat-list-option .mat-divider{position:absolute;bottom:0;left:0;width:100%;margin:0}[dir=rtl] .mat-list-base .mat-list-item .mat-divider,[dir=rtl] .mat-list-base .mat-list-option .mat-divider{margin-left:auto;margin-right:0}.mat-list-base .mat-list-item .mat-divider.mat-divider-inset,.mat-list-base .mat-list-option .mat-divider.mat-divider-inset{position:absolute}.mat-list-base[dense]{padding-top:4px;display:block}.mat-list-base[dense] .mat-subheader{height:40px;line-height:8px}.mat-list-base[dense] .mat-subheader:first-child{margin-top:-4px}.mat-list-base[dense] .mat-list-item,.mat-list-base[dense] .mat-list-option{display:block;height:40px;-webkit-tap-highlight-color:transparent;width:100%;padding:0}.mat-list-base[dense] .mat-list-item .mat-list-item-content,.mat-list-base[dense] .mat-list-option .mat-list-item-content{display:flex;flex-direction:row;align-items:center;box-sizing:border-box;padding:0 16px;position:relative;height:inherit}.mat-list-base[dense] .mat-list-item .mat-list-item-content-reverse,.mat-list-base[dense] .mat-list-option .mat-list-item-content-reverse{display:flex;align-items:center;padding:0 16px;flex-direction:row-reverse;justify-content:space-around}.mat-list-base[dense] .mat-list-item .mat-list-item-ripple,.mat-list-base[dense] .mat-list-option .mat-list-item-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar,.mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar{height:48px}.mat-list-base[dense] .mat-list-item.mat-2-line,.mat-list-base[dense] .mat-list-option.mat-2-line{height:60px}.mat-list-base[dense] .mat-list-item.mat-3-line,.mat-list-base[dense] .mat-list-option.mat-3-line{height:76px}.mat-list-base[dense] .mat-list-item.mat-multi-line,.mat-list-base[dense] .mat-list-option.mat-multi-line{height:auto}.mat-list-base[dense] .mat-list-item.mat-multi-line .mat-list-item-content,.mat-list-base[dense] .mat-list-option.mat-multi-line .mat-list-item-content{padding-top:16px;padding-bottom:16px}.mat-list-base[dense] .mat-list-item .mat-list-text,.mat-list-base[dense] .mat-list-option .mat-list-text{display:flex;flex-direction:column;flex:auto;box-sizing:border-box;overflow:hidden;padding:0}.mat-list-base[dense] .mat-list-item .mat-list-text>*,.mat-list-base[dense] .mat-list-option .mat-list-text>*{margin:0;padding:0;font-weight:normal;font-size:inherit}.mat-list-base[dense] .mat-list-item .mat-list-text:empty,.mat-list-base[dense] .mat-list-option .mat-list-text:empty{display:none}.mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,.mat-list-base[dense] .mat-list-item.mat-list-option .mat-list-item-content .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-option .mat-list-item-content .mat-list-text{padding-right:0;padding-left:16px}[dir=rtl] .mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-item.mat-list-option .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-option.mat-list-option .mat-list-item-content .mat-list-text{padding-right:16px;padding-left:0}.mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,.mat-list-base[dense] .mat-list-item.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-option .mat-list-item-content-reverse .mat-list-text{padding-left:0;padding-right:16px}[dir=rtl] .mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-item.mat-list-option .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-option.mat-list-option .mat-list-item-content-reverse .mat-list-text{padding-right:0;padding-left:16px}.mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar.mat-list-option .mat-list-item-content .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar.mat-list-option .mat-list-item-content .mat-list-text{padding-right:16px;padding-left:16px}.mat-list-base[dense] .mat-list-item .mat-list-avatar,.mat-list-base[dense] .mat-list-option .mat-list-avatar{flex-shrink:0;width:36px;height:36px;border-radius:50%;object-fit:cover}.mat-list-base[dense] .mat-list-item .mat-list-avatar~.mat-divider-inset,.mat-list-base[dense] .mat-list-option .mat-list-avatar~.mat-divider-inset{margin-left:68px;width:calc(100% - 68px)}[dir=rtl] .mat-list-base[dense] .mat-list-item .mat-list-avatar~.mat-divider-inset,[dir=rtl] .mat-list-base[dense] .mat-list-option .mat-list-avatar~.mat-divider-inset{margin-left:auto;margin-right:68px}.mat-list-base[dense] .mat-list-item .mat-list-icon,.mat-list-base[dense] .mat-list-option .mat-list-icon{flex-shrink:0;width:20px;height:20px;font-size:20px;box-sizing:content-box;border-radius:50%;padding:4px}.mat-list-base[dense] .mat-list-item .mat-list-icon~.mat-divider-inset,.mat-list-base[dense] .mat-list-option .mat-list-icon~.mat-divider-inset{margin-left:60px;width:calc(100% - 60px)}[dir=rtl] .mat-list-base[dense] .mat-list-item .mat-list-icon~.mat-divider-inset,[dir=rtl] .mat-list-base[dense] .mat-list-option .mat-list-icon~.mat-divider-inset{margin-left:auto;margin-right:60px}.mat-list-base[dense] .mat-list-item .mat-divider,.mat-list-base[dense] .mat-list-option .mat-divider{position:absolute;bottom:0;left:0;width:100%;margin:0}[dir=rtl] .mat-list-base[dense] .mat-list-item .mat-divider,[dir=rtl] .mat-list-base[dense] .mat-list-option .mat-divider{margin-left:auto;margin-right:0}.mat-list-base[dense] .mat-list-item .mat-divider.mat-divider-inset,.mat-list-base[dense] .mat-list-option .mat-divider.mat-divider-inset{position:absolute}.mat-nav-list a{text-decoration:none;color:inherit}.mat-nav-list .mat-list-item{cursor:pointer;outline:none}mat-action-list button{background:none;color:inherit;border:none;font:inherit;outline:inherit;-webkit-tap-highlight-color:transparent;text-align:left}[dir=rtl] mat-action-list button{text-align:right}mat-action-list button::-moz-focus-inner{border:0}mat-action-list .mat-list-item{cursor:pointer;outline:inherit}.mat-list-option:not(.mat-list-item-disabled){cursor:pointer;outline:none}.mat-list-item-disabled{pointer-events:none}.cdk-high-contrast-active .mat-list-item-disabled{opacity:.5}.cdk-high-contrast-active :host .mat-list-item-disabled{opacity:.5}.cdk-high-contrast-active .mat-selection-list:focus{outline-style:dotted}.cdk-high-contrast-active .mat-list-option:hover,.cdk-high-contrast-active .mat-list-option:focus,.cdk-high-contrast-active .mat-nav-list .mat-list-item:hover,.cdk-high-contrast-active .mat-nav-list .mat-list-item:focus,.cdk-high-contrast-active mat-action-list .mat-list-item:hover,.cdk-high-contrast-active mat-action-list .mat-list-item:focus{outline:dotted 1px}.cdk-high-contrast-active .mat-list-single-selected-option::after{content:"";position:absolute;top:50%;right:16px;transform:translateY(-50%);width:10px;height:0;border-bottom:solid 10px;border-radius:10px}.cdk-high-contrast-active [dir=rtl] .mat-list-single-selected-option::after{right:auto;left:16px}@media(hover: none){.mat-list-option:not(.mat-list-single-selected-option):not(.mat-list-item-disabled):hover,.mat-nav-list .mat-list-item:not(.mat-list-item-disabled):hover,.mat-action-list .mat-list-item:not(.mat-list-item-disabled):hover{background:none}}\n'],encapsulation:2,changeDetection:0}),t})();const jS=fi(BS);let VS=(()=>{class t extends MS{constructor(t){super(),this._elementRef=t,this._stateChanges=new E,"action-list"===this._getListType()&&t.nativeElement.classList.add("mat-action-list")}_getListType(){const t=this._elementRef.nativeElement.nodeName.toLowerCase();return"mat-list"===t?"list":"mat-action-list"===t?"action-list":null}ngOnChanges(){this._stateChanges.next()}ngOnDestroy(){this._stateChanges.complete()}}return t.\u0275fac=function(e){return new(e||t)(Ao(Ga))},t.\u0275cmp=de({type:t,selectors:[["mat-list"],["mat-action-list"]],hostAttrs:[1,"mat-list","mat-list-base"],inputs:{disableRipple:"disableRipple",disabled:"disabled"},exportAs:["matList"],features:[ja([{provide:FS,useExisting:t}]),Ia,Ae],ngContentSelectors:OS,decls:1,vars:0,template:function(t,e){1&t&&(Xo(),Qo(0))},styles:['.mat-subheader{display:flex;box-sizing:border-box;padding:16px;align-items:center}.mat-list-base .mat-subheader{margin:0}.mat-list-base{padding-top:8px;display:block;-webkit-tap-highlight-color:transparent}.mat-list-base .mat-subheader{height:48px;line-height:16px}.mat-list-base .mat-subheader:first-child{margin-top:-8px}.mat-list-base .mat-list-item,.mat-list-base .mat-list-option{display:block;height:48px;-webkit-tap-highlight-color:transparent;width:100%;padding:0}.mat-list-base .mat-list-item .mat-list-item-content,.mat-list-base .mat-list-option .mat-list-item-content{display:flex;flex-direction:row;align-items:center;box-sizing:border-box;padding:0 16px;position:relative;height:inherit}.mat-list-base .mat-list-item .mat-list-item-content-reverse,.mat-list-base .mat-list-option .mat-list-item-content-reverse{display:flex;align-items:center;padding:0 16px;flex-direction:row-reverse;justify-content:space-around}.mat-list-base .mat-list-item .mat-list-item-ripple,.mat-list-base .mat-list-option .mat-list-item-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-list-base .mat-list-item.mat-list-item-with-avatar,.mat-list-base .mat-list-option.mat-list-item-with-avatar{height:56px}.mat-list-base .mat-list-item.mat-2-line,.mat-list-base .mat-list-option.mat-2-line{height:72px}.mat-list-base .mat-list-item.mat-3-line,.mat-list-base .mat-list-option.mat-3-line{height:88px}.mat-list-base .mat-list-item.mat-multi-line,.mat-list-base .mat-list-option.mat-multi-line{height:auto}.mat-list-base .mat-list-item.mat-multi-line .mat-list-item-content,.mat-list-base .mat-list-option.mat-multi-line .mat-list-item-content{padding-top:16px;padding-bottom:16px}.mat-list-base .mat-list-item .mat-list-text,.mat-list-base .mat-list-option .mat-list-text{display:flex;flex-direction:column;flex:auto;box-sizing:border-box;overflow:hidden;padding:0}.mat-list-base .mat-list-item .mat-list-text>*,.mat-list-base .mat-list-option .mat-list-text>*{margin:0;padding:0;font-weight:normal;font-size:inherit}.mat-list-base .mat-list-item .mat-list-text:empty,.mat-list-base .mat-list-option .mat-list-text:empty{display:none}.mat-list-base .mat-list-item.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,.mat-list-base .mat-list-item.mat-list-option .mat-list-item-content .mat-list-text,.mat-list-base .mat-list-option.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,.mat-list-base .mat-list-option.mat-list-option .mat-list-item-content .mat-list-text{padding-right:0;padding-left:16px}[dir=rtl] .mat-list-base .mat-list-item.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base .mat-list-item.mat-list-option .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base .mat-list-option.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base .mat-list-option.mat-list-option .mat-list-item-content .mat-list-text{padding-right:16px;padding-left:0}.mat-list-base .mat-list-item.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,.mat-list-base .mat-list-item.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base .mat-list-option.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,.mat-list-base .mat-list-option.mat-list-option .mat-list-item-content-reverse .mat-list-text{padding-left:0;padding-right:16px}[dir=rtl] .mat-list-base .mat-list-item.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base .mat-list-item.mat-list-option .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base .mat-list-option.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base .mat-list-option.mat-list-option .mat-list-item-content-reverse .mat-list-text{padding-right:0;padding-left:16px}.mat-list-base .mat-list-item.mat-list-item-with-avatar.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base .mat-list-item.mat-list-item-with-avatar.mat-list-option .mat-list-item-content .mat-list-text,.mat-list-base .mat-list-option.mat-list-item-with-avatar.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base .mat-list-option.mat-list-item-with-avatar.mat-list-option .mat-list-item-content .mat-list-text{padding-right:16px;padding-left:16px}.mat-list-base .mat-list-item .mat-list-avatar,.mat-list-base .mat-list-option .mat-list-avatar{flex-shrink:0;width:40px;height:40px;border-radius:50%;object-fit:cover}.mat-list-base .mat-list-item .mat-list-avatar~.mat-divider-inset,.mat-list-base .mat-list-option .mat-list-avatar~.mat-divider-inset{margin-left:72px;width:calc(100% - 72px)}[dir=rtl] .mat-list-base .mat-list-item .mat-list-avatar~.mat-divider-inset,[dir=rtl] .mat-list-base .mat-list-option .mat-list-avatar~.mat-divider-inset{margin-left:auto;margin-right:72px}.mat-list-base .mat-list-item .mat-list-icon,.mat-list-base .mat-list-option .mat-list-icon{flex-shrink:0;width:24px;height:24px;font-size:24px;box-sizing:content-box;border-radius:50%;padding:4px}.mat-list-base .mat-list-item .mat-list-icon~.mat-divider-inset,.mat-list-base .mat-list-option .mat-list-icon~.mat-divider-inset{margin-left:64px;width:calc(100% - 64px)}[dir=rtl] .mat-list-base .mat-list-item .mat-list-icon~.mat-divider-inset,[dir=rtl] .mat-list-base .mat-list-option .mat-list-icon~.mat-divider-inset{margin-left:auto;margin-right:64px}.mat-list-base .mat-list-item .mat-divider,.mat-list-base .mat-list-option .mat-divider{position:absolute;bottom:0;left:0;width:100%;margin:0}[dir=rtl] .mat-list-base .mat-list-item .mat-divider,[dir=rtl] .mat-list-base .mat-list-option .mat-divider{margin-left:auto;margin-right:0}.mat-list-base .mat-list-item .mat-divider.mat-divider-inset,.mat-list-base .mat-list-option .mat-divider.mat-divider-inset{position:absolute}.mat-list-base[dense]{padding-top:4px;display:block}.mat-list-base[dense] .mat-subheader{height:40px;line-height:8px}.mat-list-base[dense] .mat-subheader:first-child{margin-top:-4px}.mat-list-base[dense] .mat-list-item,.mat-list-base[dense] .mat-list-option{display:block;height:40px;-webkit-tap-highlight-color:transparent;width:100%;padding:0}.mat-list-base[dense] .mat-list-item .mat-list-item-content,.mat-list-base[dense] .mat-list-option .mat-list-item-content{display:flex;flex-direction:row;align-items:center;box-sizing:border-box;padding:0 16px;position:relative;height:inherit}.mat-list-base[dense] .mat-list-item .mat-list-item-content-reverse,.mat-list-base[dense] .mat-list-option .mat-list-item-content-reverse{display:flex;align-items:center;padding:0 16px;flex-direction:row-reverse;justify-content:space-around}.mat-list-base[dense] .mat-list-item .mat-list-item-ripple,.mat-list-base[dense] .mat-list-option .mat-list-item-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar,.mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar{height:48px}.mat-list-base[dense] .mat-list-item.mat-2-line,.mat-list-base[dense] .mat-list-option.mat-2-line{height:60px}.mat-list-base[dense] .mat-list-item.mat-3-line,.mat-list-base[dense] .mat-list-option.mat-3-line{height:76px}.mat-list-base[dense] .mat-list-item.mat-multi-line,.mat-list-base[dense] .mat-list-option.mat-multi-line{height:auto}.mat-list-base[dense] .mat-list-item.mat-multi-line .mat-list-item-content,.mat-list-base[dense] .mat-list-option.mat-multi-line .mat-list-item-content{padding-top:16px;padding-bottom:16px}.mat-list-base[dense] .mat-list-item .mat-list-text,.mat-list-base[dense] .mat-list-option .mat-list-text{display:flex;flex-direction:column;flex:auto;box-sizing:border-box;overflow:hidden;padding:0}.mat-list-base[dense] .mat-list-item .mat-list-text>*,.mat-list-base[dense] .mat-list-option .mat-list-text>*{margin:0;padding:0;font-weight:normal;font-size:inherit}.mat-list-base[dense] .mat-list-item .mat-list-text:empty,.mat-list-base[dense] .mat-list-option .mat-list-text:empty{display:none}.mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,.mat-list-base[dense] .mat-list-item.mat-list-option .mat-list-item-content .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-option .mat-list-item-content .mat-list-text{padding-right:0;padding-left:16px}[dir=rtl] .mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-item.mat-list-option .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-option.mat-list-option .mat-list-item-content .mat-list-text{padding-right:16px;padding-left:0}.mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,.mat-list-base[dense] .mat-list-item.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-option .mat-list-item-content-reverse .mat-list-text{padding-left:0;padding-right:16px}[dir=rtl] .mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-item.mat-list-option .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-option.mat-list-option .mat-list-item-content-reverse .mat-list-text{padding-right:0;padding-left:16px}.mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar.mat-list-option .mat-list-item-content .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar.mat-list-option .mat-list-item-content .mat-list-text{padding-right:16px;padding-left:16px}.mat-list-base[dense] .mat-list-item .mat-list-avatar,.mat-list-base[dense] .mat-list-option .mat-list-avatar{flex-shrink:0;width:36px;height:36px;border-radius:50%;object-fit:cover}.mat-list-base[dense] .mat-list-item .mat-list-avatar~.mat-divider-inset,.mat-list-base[dense] .mat-list-option .mat-list-avatar~.mat-divider-inset{margin-left:68px;width:calc(100% - 68px)}[dir=rtl] .mat-list-base[dense] .mat-list-item .mat-list-avatar~.mat-divider-inset,[dir=rtl] .mat-list-base[dense] .mat-list-option .mat-list-avatar~.mat-divider-inset{margin-left:auto;margin-right:68px}.mat-list-base[dense] .mat-list-item .mat-list-icon,.mat-list-base[dense] .mat-list-option .mat-list-icon{flex-shrink:0;width:20px;height:20px;font-size:20px;box-sizing:content-box;border-radius:50%;padding:4px}.mat-list-base[dense] .mat-list-item .mat-list-icon~.mat-divider-inset,.mat-list-base[dense] .mat-list-option .mat-list-icon~.mat-divider-inset{margin-left:60px;width:calc(100% - 60px)}[dir=rtl] .mat-list-base[dense] .mat-list-item .mat-list-icon~.mat-divider-inset,[dir=rtl] .mat-list-base[dense] .mat-list-option .mat-list-icon~.mat-divider-inset{margin-left:auto;margin-right:60px}.mat-list-base[dense] .mat-list-item .mat-divider,.mat-list-base[dense] .mat-list-option .mat-divider{position:absolute;bottom:0;left:0;width:100%;margin:0}[dir=rtl] .mat-list-base[dense] .mat-list-item .mat-divider,[dir=rtl] .mat-list-base[dense] .mat-list-option .mat-divider{margin-left:auto;margin-right:0}.mat-list-base[dense] .mat-list-item .mat-divider.mat-divider-inset,.mat-list-base[dense] .mat-list-option .mat-divider.mat-divider-inset{position:absolute}.mat-nav-list a{text-decoration:none;color:inherit}.mat-nav-list .mat-list-item{cursor:pointer;outline:none}mat-action-list button{background:none;color:inherit;border:none;font:inherit;outline:inherit;-webkit-tap-highlight-color:transparent;text-align:left}[dir=rtl] mat-action-list button{text-align:right}mat-action-list button::-moz-focus-inner{border:0}mat-action-list .mat-list-item{cursor:pointer;outline:inherit}.mat-list-option:not(.mat-list-item-disabled){cursor:pointer;outline:none}.mat-list-item-disabled{pointer-events:none}.cdk-high-contrast-active .mat-list-item-disabled{opacity:.5}.cdk-high-contrast-active :host .mat-list-item-disabled{opacity:.5}.cdk-high-contrast-active .mat-selection-list:focus{outline-style:dotted}.cdk-high-contrast-active .mat-list-option:hover,.cdk-high-contrast-active .mat-list-option:focus,.cdk-high-contrast-active .mat-nav-list .mat-list-item:hover,.cdk-high-contrast-active .mat-nav-list .mat-list-item:focus,.cdk-high-contrast-active mat-action-list .mat-list-item:hover,.cdk-high-contrast-active mat-action-list .mat-list-item:focus{outline:dotted 1px}.cdk-high-contrast-active .mat-list-single-selected-option::after{content:"";position:absolute;top:50%;right:16px;transform:translateY(-50%);width:10px;height:0;border-bottom:solid 10px;border-radius:10px}.cdk-high-contrast-active [dir=rtl] .mat-list-single-selected-option::after{right:auto;left:16px}@media(hover: none){.mat-list-option:not(.mat-list-single-selected-option):not(.mat-list-item-disabled):hover,.mat-nav-list .mat-list-item:not(.mat-list-item-disabled):hover,.mat-action-list .mat-list-item:not(.mat-list-item-disabled):hover{background:none}}\n'],encapsulation:2,changeDetection:0}),t})(),KS=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=ye({type:t,selectors:[["","mat-list-avatar",""],["","matListAvatar",""]],hostAttrs:[1,"mat-list-avatar"]}),t})(),qS=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=ye({type:t,selectors:[["","mat-list-icon",""],["","matListIcon",""]],hostAttrs:[1,"mat-list-icon"]}),t})(),GS=(()=>{class t extends LS{constructor(t,e,n,i){super(),this._element=t,this._isInteractiveList=!1,this._destroyed=new E,this._disabled=!1,this._isInteractiveList=!!(n||i&&"action-list"===i._getListType()),this._list=n||i;const r=this._getHostElement();"button"!==r.nodeName.toLowerCase()||r.hasAttribute("type")||r.setAttribute("type","button"),this._list&&this._list._stateChanges.pipe(Hf(this._destroyed)).subscribe(()=>{e.markForCheck()})}get disabled(){return this._disabled||!(!this._list||!this._list.disabled)}set disabled(t){this._disabled=kh(t)}ngAfterContentInit(){!function(t,e,n="mat"){t.changes.pipe(jd(t)).subscribe(({length:t})=>{kf(e,n+"-2-line",!1),kf(e,n+"-3-line",!1),kf(e,n+"-multi-line",!1),2===t||3===t?kf(e,`${n}-${t}-line`,!0):t>3&&kf(e,n+"-multi-line",!0)})}(this._lines,this._element)}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete()}_isRippleDisabled(){return!this._isInteractiveList||this.disableRipple||!(!this._list||!this._list.disableRipple)}_getHostElement(){return this._element.nativeElement}}return t.\u0275fac=function(e){return new(e||t)(Ao(Ga),Ao(Zs),Ao(US,8),Ao(FS,8))},t.\u0275cmp=de({type:t,selectors:[["mat-list-item"],["a","mat-list-item",""],["button","mat-list-item",""]],contentQueries:function(t,e,n){var i;1&t&&(el(n,KS,!0),el(n,qS,!0),el(n,Ef,!0)),2&t&&(Qc(i=rl())&&(e._avatar=i.first),Qc(i=rl())&&(e._icon=i.first),Qc(i=rl())&&(e._lines=i))},hostAttrs:[1,"mat-list-item","mat-focus-indicator"],hostVars:6,hostBindings:function(t,e){2&t&&oa("mat-list-item-disabled",e.disabled)("mat-list-item-avatar",e._avatar||e._icon)("mat-list-item-with-avatar",e._avatar||e._icon)},inputs:{disableRipple:"disableRipple",disabled:"disabled"},exportAs:["matListItem"],features:[Ia],ngContentSelectors:DS,decls:6,vars:2,consts:[[1,"mat-list-item-content"],["mat-ripple","",1,"mat-list-item-ripple",3,"matRippleTrigger","matRippleDisabled"],[1,"mat-list-text"]],template:function(t,e){1&t&&(Xo(AS),No(0,"div",0),Fo(1,"div",1),Qo(2),No(3,"div",2),Qo(4,1),Lo(),Qo(5,2),Lo()),2&t&&(kr(1),Po("matRippleTrigger",e._getHostElement())("matRippleDisabled",e._isRippleDisabled()))},directives:[Pf],encapsulation:2,changeDetection:0}),t})(),$S=(()=>{class t{}return t.\u0275mod=ge({type:t}),t.\u0275inj=ut({factory:function(e){return new(e||t)},imports:[[Cf,Mf,gf,Lf,$u],Cf,gf,Lf,RS]}),t})(),HS=(()=>{class t{}return t.\u0275mod=ge({type:t}),t.\u0275inj=ut({factory:function(e){return new(e||t)}}),t})(),zS=(()=>{class t{}return t.\u0275mod=ge({type:t}),t.\u0275inj=ut({factory:function(e){return new(e||t)},imports:[[HS,Mf,gf,Kh],HS,gf]}),t})();const WS=["input"],YS=function(){return{enterDuration:150}},XS=["*"],QS=new Ft("mat-checkbox-default-options",{providedIn:"root",factory:function(){return{color:"accent",clickAction:"check-indeterminate"}}}),ZS=new Ft("mat-checkbox-click-action");let JS=0;const tE={provide:Kg,useExisting:St(()=>rE),multi:!0};class eE{}class nE{constructor(t){this._elementRef=t}}const iE=bf(yf(vf(_f(nE))));let rE=(()=>{class t extends iE{constructor(t,e,n,i,r,s,o,a){super(t),this._changeDetectorRef=e,this._focusMonitor=n,this._ngZone=i,this._clickAction=s,this._animationMode=o,this._options=a,this.ariaLabel="",this.ariaLabelledby=null,this._uniqueId="mat-checkbox-"+ ++JS,this.id=this._uniqueId,this.labelPosition="after",this.name=null,this.change=new jc,this.indeterminateChange=new jc,this._onTouched=()=>{},this._currentAnimationClass="",this._currentCheckState=0,this._controlValueAccessorChangeFn=()=>{},this._checked=!1,this._disabled=!1,this._indeterminate=!1,this._options=this._options||{},this._options.color&&(this.color=this._options.color),this.tabIndex=parseInt(r)||0,this._clickAction=this._clickAction||this._options.clickAction}get inputId(){return(this.id||this._uniqueId)+"-input"}get required(){return this._required}set required(t){this._required=kh(t)}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0).subscribe(t=>{t||Promise.resolve().then(()=>{this._onTouched(),this._changeDetectorRef.markForCheck()})}),this._syncIndeterminate(this._indeterminate)}ngAfterViewChecked(){}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef)}get checked(){return this._checked}set checked(t){t!=this.checked&&(this._checked=t,this._changeDetectorRef.markForCheck())}get disabled(){return this._disabled}set disabled(t){const e=kh(t);e!==this.disabled&&(this._disabled=e,this._changeDetectorRef.markForCheck())}get indeterminate(){return this._indeterminate}set indeterminate(t){const e=t!=this._indeterminate;this._indeterminate=kh(t),e&&(this._transitionCheckState(this._indeterminate?3:this.checked?1:2),this.indeterminateChange.emit(this._indeterminate)),this._syncIndeterminate(this._indeterminate)}_isRippleDisabled(){return this.disableRipple||this.disabled}_onLabelTextChange(){this._changeDetectorRef.detectChanges()}writeValue(t){this.checked=!!t}registerOnChange(t){this._controlValueAccessorChangeFn=t}registerOnTouched(t){this._onTouched=t}setDisabledState(t){this.disabled=t}_getAriaChecked(){return this.checked?"true":this.indeterminate?"mixed":"false"}_transitionCheckState(t){let e=this._currentCheckState,n=this._elementRef.nativeElement;if(e!==t&&(this._currentAnimationClass.length>0&&n.classList.remove(this._currentAnimationClass),this._currentAnimationClass=this._getAnimationClassForCheckStateTransition(e,t),this._currentCheckState=t,this._currentAnimationClass.length>0)){n.classList.add(this._currentAnimationClass);const t=this._currentAnimationClass;this._ngZone.runOutsideAngular(()=>{setTimeout(()=>{n.classList.remove(t)},1e3)})}}_emitChangeEvent(){const t=new eE;t.source=this,t.checked=this.checked,this._controlValueAccessorChangeFn(this.checked),this.change.emit(t)}toggle(){this.checked=!this.checked}_onInputClick(t){t.stopPropagation(),this.disabled||"noop"===this._clickAction?this.disabled||"noop"!==this._clickAction||(this._inputElement.nativeElement.checked=this.checked,this._inputElement.nativeElement.indeterminate=this.indeterminate):(this.indeterminate&&"check"!==this._clickAction&&Promise.resolve().then(()=>{this._indeterminate=!1,this.indeterminateChange.emit(this._indeterminate)}),this.toggle(),this._transitionCheckState(this._checked?1:2),this._emitChangeEvent())}focus(t="keyboard",e){this._focusMonitor.focusVia(this._inputElement,t,e)}_onInteractionEvent(t){t.stopPropagation()}_getAnimationClassForCheckStateTransition(t,e){if("NoopAnimations"===this._animationMode)return"";let n="";switch(t){case 0:if(1===e)n="unchecked-checked";else{if(3!=e)return"";n="unchecked-indeterminate"}break;case 2:n=1===e?"unchecked-checked":"unchecked-indeterminate";break;case 1:n=2===e?"checked-unchecked":"checked-indeterminate";break;case 3:n=1===e?"indeterminate-checked":"indeterminate-unchecked"}return"mat-checkbox-anim-"+n}_syncIndeterminate(t){const e=this._inputElement;e&&(e.nativeElement.indeterminate=t)}}return t.\u0275fac=function(e){return new(e||t)(Ao(Ga),Ao(Zs),Ao(Rd),Ao(Rl),Do("tabindex"),Ao(ZS,8),Ao(cf,8),Ao(QS,8))},t.\u0275cmp=de({type:t,selectors:[["mat-checkbox"]],viewQuery:function(t,e){var n;1&t&&(Jc(WS,!0),Jc(Pf,!0)),2&t&&(Qc(n=rl())&&(e._inputElement=n.first),Qc(n=rl())&&(e.ripple=n.first))},hostAttrs:[1,"mat-checkbox"],hostVars:12,hostBindings:function(t,e){2&t&&(Ca("id",e.id),To("tabindex",null),oa("mat-checkbox-indeterminate",e.indeterminate)("mat-checkbox-checked",e.checked)("mat-checkbox-disabled",e.disabled)("mat-checkbox-label-before","before"==e.labelPosition)("_mat-animation-noopable","NoopAnimations"===e._animationMode))},inputs:{disableRipple:"disableRipple",color:"color",tabIndex:"tabIndex",ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"],id:"id",labelPosition:"labelPosition",name:"name",required:"required",checked:"checked",disabled:"disabled",indeterminate:"indeterminate",ariaDescribedby:["aria-describedby","ariaDescribedby"],value:"value"},outputs:{change:"change",indeterminateChange:"indeterminateChange"},exportAs:["matCheckbox"],features:[ja([tE]),Ia],ngContentSelectors:XS,decls:17,vars:20,consts:[[1,"mat-checkbox-layout"],["label",""],[1,"mat-checkbox-inner-container"],["type","checkbox",1,"mat-checkbox-input","cdk-visually-hidden",3,"id","required","checked","disabled","tabIndex","change","click"],["input",""],["matRipple","",1,"mat-checkbox-ripple","mat-focus-indicator",3,"matRippleTrigger","matRippleDisabled","matRippleRadius","matRippleCentered","matRippleAnimation"],[1,"mat-ripple-element","mat-checkbox-persistent-ripple"],[1,"mat-checkbox-frame"],[1,"mat-checkbox-background"],["version","1.1","focusable","false","viewBox","0 0 24 24",0,"xml","space","preserve",1,"mat-checkbox-checkmark"],["fill","none","stroke","white","d","M4.1,12.7 9,17.6 20.3,6.3",1,"mat-checkbox-checkmark-path"],[1,"mat-checkbox-mixedmark"],[1,"mat-checkbox-label",3,"cdkObserveContent"],["checkboxLabel",""],[2,"display","none"]],template:function(t,e){if(1&t&&(Xo(),No(0,"label",0,1),No(2,"div",2),No(3,"input",3,4),qo("change",(function(t){return e._onInteractionEvent(t)}))("click",(function(t){return e._onInputClick(t)})),Lo(),No(5,"div",5),Fo(6,"div",6),Lo(),Fo(7,"div",7),No(8,"div",8),Rn(),No(9,"svg",9),Fo(10,"path",10),Lo(),On(),Fo(11,"div",11),Lo(),Lo(),No(12,"span",12,13),qo("cdkObserveContent",(function(){return e._onLabelTextChange()})),No(14,"span",14),ya(15,"\xa0"),Lo(),Qo(16),Lo(),Lo()),2&t){const t=Oo(1),n=Oo(13);To("for",e.inputId),kr(2),oa("mat-checkbox-inner-container-no-side-margin",!n.textContent||!n.textContent.trim()),kr(1),Po("id",e.inputId)("required",e.required)("checked",e.checked)("disabled",e.disabled)("tabIndex",e.tabIndex),To("value",e.value)("name",e.name)("aria-label",e.ariaLabel||null)("aria-labelledby",e.ariaLabelledby)("aria-checked",e._getAriaChecked())("aria-describedby",e.ariaDescribedby),kr(2),Po("matRippleTrigger",t)("matRippleDisabled",e._isRippleDisabled())("matRippleRadius",20)("matRippleCentered",!0)("matRippleAnimation",function(t,e,n){const i=un()+19,r=tn();return r[i]===vr?ko(r,i,e()):function(t,e){return t[e]}(r,i)}(0,YS))}},directives:[Pf,Vh],styles:["@keyframes mat-checkbox-fade-in-background{0%{opacity:0}50%{opacity:1}}@keyframes mat-checkbox-fade-out-background{0%,50%{opacity:1}100%{opacity:0}}@keyframes mat-checkbox-unchecked-checked-checkmark-path{0%,50%{stroke-dashoffset:22.910259}50%{animation-timing-function:cubic-bezier(0, 0, 0.2, 0.1)}100%{stroke-dashoffset:0}}@keyframes mat-checkbox-unchecked-indeterminate-mixedmark{0%,68.2%{transform:scaleX(0)}68.2%{animation-timing-function:cubic-bezier(0, 0, 0, 1)}100%{transform:scaleX(1)}}@keyframes mat-checkbox-checked-unchecked-checkmark-path{from{animation-timing-function:cubic-bezier(0.4, 0, 1, 1);stroke-dashoffset:0}to{stroke-dashoffset:-22.910259}}@keyframes mat-checkbox-checked-indeterminate-checkmark{from{animation-timing-function:cubic-bezier(0, 0, 0.2, 0.1);opacity:1;transform:rotate(0deg)}to{opacity:0;transform:rotate(45deg)}}@keyframes mat-checkbox-indeterminate-checked-checkmark{from{animation-timing-function:cubic-bezier(0.14, 0, 0, 1);opacity:0;transform:rotate(45deg)}to{opacity:1;transform:rotate(360deg)}}@keyframes mat-checkbox-checked-indeterminate-mixedmark{from{animation-timing-function:cubic-bezier(0, 0, 0.2, 0.1);opacity:0;transform:rotate(-45deg)}to{opacity:1;transform:rotate(0deg)}}@keyframes mat-checkbox-indeterminate-checked-mixedmark{from{animation-timing-function:cubic-bezier(0.14, 0, 0, 1);opacity:1;transform:rotate(0deg)}to{opacity:0;transform:rotate(315deg)}}@keyframes mat-checkbox-indeterminate-unchecked-mixedmark{0%{animation-timing-function:linear;opacity:1;transform:scaleX(1)}32.8%,100%{opacity:0;transform:scaleX(0)}}.mat-checkbox-background,.mat-checkbox-frame{top:0;left:0;right:0;bottom:0;position:absolute;border-radius:2px;box-sizing:border-box;pointer-events:none}.mat-checkbox{transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);cursor:pointer;-webkit-tap-highlight-color:transparent}._mat-animation-noopable.mat-checkbox{transition:none;animation:none}.mat-checkbox .mat-ripple-element:not(.mat-checkbox-persistent-ripple){opacity:.16}.mat-checkbox-layout{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:inherit;align-items:baseline;vertical-align:middle;display:inline-flex;white-space:nowrap}.mat-checkbox-label{-webkit-user-select:auto;-moz-user-select:auto;-ms-user-select:auto;user-select:auto}.mat-checkbox-inner-container{display:inline-block;height:16px;line-height:0;margin:auto;margin-right:8px;order:0;position:relative;vertical-align:middle;white-space:nowrap;width:16px;flex-shrink:0}[dir=rtl] .mat-checkbox-inner-container{margin-left:8px;margin-right:auto}.mat-checkbox-inner-container-no-side-margin{margin-left:0;margin-right:0}.mat-checkbox-frame{background-color:transparent;transition:border-color 90ms cubic-bezier(0, 0, 0.2, 0.1);border-width:2px;border-style:solid}._mat-animation-noopable .mat-checkbox-frame{transition:none}.cdk-high-contrast-active .mat-checkbox.cdk-keyboard-focused .mat-checkbox-frame{border-style:dotted}.mat-checkbox-background{align-items:center;display:inline-flex;justify-content:center;transition:background-color 90ms cubic-bezier(0, 0, 0.2, 0.1),opacity 90ms cubic-bezier(0, 0, 0.2, 0.1)}._mat-animation-noopable .mat-checkbox-background{transition:none}.cdk-high-contrast-active .mat-checkbox .mat-checkbox-background{background:none}.mat-checkbox-persistent-ripple{width:100%;height:100%;transform:none}.mat-checkbox-inner-container:hover .mat-checkbox-persistent-ripple{opacity:.04}.mat-checkbox.cdk-keyboard-focused .mat-checkbox-persistent-ripple{opacity:.12}.mat-checkbox-persistent-ripple,.mat-checkbox.mat-checkbox-disabled .mat-checkbox-inner-container:hover .mat-checkbox-persistent-ripple{opacity:0}@media(hover: none){.mat-checkbox-inner-container:hover .mat-checkbox-persistent-ripple{display:none}}.mat-checkbox-checkmark{top:0;left:0;right:0;bottom:0;position:absolute;width:100%}.mat-checkbox-checkmark-path{stroke-dashoffset:22.910259;stroke-dasharray:22.910259;stroke-width:2.1333333333px}.cdk-high-contrast-black-on-white .mat-checkbox-checkmark-path{stroke:#000 !important}.mat-checkbox-mixedmark{width:calc(100% - 6px);height:2px;opacity:0;transform:scaleX(0) rotate(0deg);border-radius:2px}.cdk-high-contrast-active .mat-checkbox-mixedmark{height:0;border-top:solid 2px;margin-top:2px}.mat-checkbox-label-before .mat-checkbox-inner-container{order:1;margin-left:8px;margin-right:auto}[dir=rtl] .mat-checkbox-label-before .mat-checkbox-inner-container{margin-left:auto;margin-right:8px}.mat-checkbox-checked .mat-checkbox-checkmark{opacity:1}.mat-checkbox-checked .mat-checkbox-checkmark-path{stroke-dashoffset:0}.mat-checkbox-checked .mat-checkbox-mixedmark{transform:scaleX(1) rotate(-45deg)}.mat-checkbox-indeterminate .mat-checkbox-checkmark{opacity:0;transform:rotate(45deg)}.mat-checkbox-indeterminate .mat-checkbox-checkmark-path{stroke-dashoffset:0}.mat-checkbox-indeterminate .mat-checkbox-mixedmark{opacity:1;transform:scaleX(1) rotate(0deg)}.mat-checkbox-unchecked .mat-checkbox-background{background-color:transparent}.mat-checkbox-disabled{cursor:default}.cdk-high-contrast-active .mat-checkbox-disabled{opacity:.5}.mat-checkbox-anim-unchecked-checked .mat-checkbox-background{animation:180ms linear 0ms mat-checkbox-fade-in-background}.mat-checkbox-anim-unchecked-checked .mat-checkbox-checkmark-path{animation:180ms linear 0ms mat-checkbox-unchecked-checked-checkmark-path}.mat-checkbox-anim-unchecked-indeterminate .mat-checkbox-background{animation:180ms linear 0ms mat-checkbox-fade-in-background}.mat-checkbox-anim-unchecked-indeterminate .mat-checkbox-mixedmark{animation:90ms linear 0ms mat-checkbox-unchecked-indeterminate-mixedmark}.mat-checkbox-anim-checked-unchecked .mat-checkbox-background{animation:180ms linear 0ms mat-checkbox-fade-out-background}.mat-checkbox-anim-checked-unchecked .mat-checkbox-checkmark-path{animation:90ms linear 0ms mat-checkbox-checked-unchecked-checkmark-path}.mat-checkbox-anim-checked-indeterminate .mat-checkbox-checkmark{animation:90ms linear 0ms mat-checkbox-checked-indeterminate-checkmark}.mat-checkbox-anim-checked-indeterminate .mat-checkbox-mixedmark{animation:90ms linear 0ms mat-checkbox-checked-indeterminate-mixedmark}.mat-checkbox-anim-indeterminate-checked .mat-checkbox-checkmark{animation:500ms linear 0ms mat-checkbox-indeterminate-checked-checkmark}.mat-checkbox-anim-indeterminate-checked .mat-checkbox-mixedmark{animation:500ms linear 0ms mat-checkbox-indeterminate-checked-mixedmark}.mat-checkbox-anim-indeterminate-unchecked .mat-checkbox-background{animation:180ms linear 0ms mat-checkbox-fade-out-background}.mat-checkbox-anim-indeterminate-unchecked .mat-checkbox-mixedmark{animation:300ms linear 0ms mat-checkbox-indeterminate-unchecked-mixedmark}.mat-checkbox-input{bottom:0;left:50%}.mat-checkbox .mat-checkbox-ripple{position:absolute;left:calc(50% - 20px);top:calc(50% - 20px);height:40px;width:40px;z-index:1;pointer-events:none}\n"],encapsulation:2,changeDetection:0}),t})(),sE=(()=>{class t{}return t.\u0275mod=ge({type:t}),t.\u0275inj=ut({factory:function(e){return new(e||t)}}),t})(),oE=(()=>{class t{}return t.\u0275mod=ge({type:t}),t.\u0275inj=ut({factory:function(e){return new(e||t)},imports:[[Mf,gf,Kh,sE],gf,sE]}),t})();function aE(t,e){if(1&t&&(Rn(),Fo(0,"circle",3)),2&t){const t=Wo();sa("animation-name","mat-progress-spinner-stroke-rotate-"+t.diameter)("stroke-dashoffset",t._strokeDashOffset,"px")("stroke-dasharray",t._strokeCircumference,"px")("stroke-width",t._circleStrokeWidth,"%"),To("r",t._circleRadius)}}function cE(t,e){if(1&t&&(Rn(),Fo(0,"circle",3)),2&t){const t=Wo();sa("stroke-dashoffset",t._strokeDashOffset,"px")("stroke-dasharray",t._strokeCircumference,"px")("stroke-width",t._circleStrokeWidth,"%"),To("r",t._circleRadius)}}function lE(t,e){if(1&t&&(Rn(),Fo(0,"circle",3)),2&t){const t=Wo();sa("animation-name","mat-progress-spinner-stroke-rotate-"+t.diameter)("stroke-dashoffset",t._strokeDashOffset,"px")("stroke-dasharray",t._strokeCircumference,"px")("stroke-width",t._circleStrokeWidth,"%"),To("r",t._circleRadius)}}function uE(t,e){if(1&t&&(Rn(),Fo(0,"circle",3)),2&t){const t=Wo();sa("stroke-dashoffset",t._strokeDashOffset,"px")("stroke-dasharray",t._strokeCircumference,"px")("stroke-width",t._circleStrokeWidth,"%"),To("r",t._circleRadius)}}class hE{constructor(t){this._elementRef=t}}const dE=yf(hE,"primary"),pE=new Ft("mat-progress-spinner-default-options",{providedIn:"root",factory:function(){return{diameter:100}}});let mE=(()=>{class t extends dE{constructor(e,n,i,r,s){super(e),this._elementRef=e,this._document=i,this._diameter=100,this._value=0,this._fallbackAnimation=!1,this.mode="determinate";const o=t._diameters;o.has(i.head)||o.set(i.head,new Set([100])),this._fallbackAnimation=n.EDGE||n.TRIDENT,this._noopAnimations="NoopAnimations"===r&&!!s&&!s._forceAnimations,s&&(s.diameter&&(this.diameter=s.diameter),s.strokeWidth&&(this.strokeWidth=s.strokeWidth))}get diameter(){return this._diameter}set diameter(t){this._diameter=Ch(t),!this._fallbackAnimation&&this._styleRoot&&this._attachStyleNode()}get strokeWidth(){return this._strokeWidth||this.diameter/10}set strokeWidth(t){this._strokeWidth=Ch(t)}get value(){return"determinate"===this.mode?this._value:0}set value(t){this._value=Math.max(0,Math.min(100,Ch(t)))}ngOnInit(){const t=this._elementRef.nativeElement;this._styleRoot=Jh(t)||this._document.head,this._attachStyleNode(),t.classList.add(`mat-progress-spinner-indeterminate${this._fallbackAnimation?"-fallback":""}-animation`)}get _circleRadius(){return(this.diameter-10)/2}get _viewBox(){const t=2*this._circleRadius+this.strokeWidth;return`0 0 ${t} ${t}`}get _strokeCircumference(){return 2*Math.PI*this._circleRadius}get _strokeDashOffset(){return"determinate"===this.mode?this._strokeCircumference*(100-this._value)/100:this._fallbackAnimation&&"indeterminate"===this.mode?.2*this._strokeCircumference:null}get _circleStrokeWidth(){return this.strokeWidth/this.diameter*100}_attachStyleNode(){const e=this._styleRoot,n=this._diameter,i=t._diameters;let r=i.get(e);if(!r||!r.has(n)){const t=this._document.createElement("style");t.setAttribute("mat-spinner-animation",n+""),t.textContent=this._getAnimationText(),e.appendChild(t),r||(r=new Set,i.set(e,r)),r.add(n)}}_getAnimationText(){return"\n @keyframes mat-progress-spinner-stroke-rotate-DIAMETER {\n    0%      { stroke-dashoffset: START_VALUE;  transform: rotate(0); }\n    12.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(0); }\n    12.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(72.5deg); }\n    25%     { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(72.5deg); }\n\n    25.0001%   { stroke-dashoffset: START_VALUE;  transform: rotate(270deg); }\n    37.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(270deg); }\n    37.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(161.5deg); }\n    50%     { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(161.5deg); }\n\n    50.0001%  { stroke-dashoffset: START_VALUE;  transform: rotate(180deg); }\n    62.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(180deg); }\n    62.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(251.5deg); }\n    75%     { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(251.5deg); }\n\n    75.0001%  { stroke-dashoffset: START_VALUE;  transform: rotate(90deg); }\n    87.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(90deg); }\n    87.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(341.5deg); }\n    100%    { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(341.5deg); }\n  }\n".replace(/START_VALUE/g,""+.95*this._strokeCircumference).replace(/END_VALUE/g,""+.2*this._strokeCircumference).replace(/DIAMETER/g,""+this.diameter)}}return t.\u0275fac=function(e){return new(e||t)(Ao(Ga),Ao(Gh),Ao(ou,8),Ao(cf,8),Ao(pE))},t.\u0275cmp=de({type:t,selectors:[["mat-progress-spinner"]],hostAttrs:["role","progressbar",1,"mat-progress-spinner"],hostVars:10,hostBindings:function(t,e){2&t&&(To("aria-valuemin","determinate"===e.mode?0:null)("aria-valuemax","determinate"===e.mode?100:null)("aria-valuenow","determinate"===e.mode?e.value:null)("mode",e.mode),sa("width",e.diameter,"px")("height",e.diameter,"px"),oa("_mat-animation-noopable",e._noopAnimations))},inputs:{color:"color",mode:"mode",diameter:"diameter",strokeWidth:"strokeWidth",value:"value"},exportAs:["matProgressSpinner"],features:[Ia],decls:3,vars:8,consts:[["preserveAspectRatio","xMidYMid meet","focusable","false",3,"ngSwitch"],["cx","50%","cy","50%",3,"animation-name","stroke-dashoffset","stroke-dasharray","stroke-width",4,"ngSwitchCase"],["cx","50%","cy","50%",3,"stroke-dashoffset","stroke-dasharray","stroke-width",4,"ngSwitchCase"],["cx","50%","cy","50%"]],template:function(t,e){1&t&&(Rn(),No(0,"svg",0),Ro(1,aE,1,9,"circle",1),Ro(2,cE,1,7,"circle",2),Lo()),2&t&&(sa("width",e.diameter,"px")("height",e.diameter,"px"),Po("ngSwitch","indeterminate"===e.mode),To("viewBox",e._viewBox),kr(1),Po("ngSwitchCase",!0),kr(1),Po("ngSwitchCase",!1))},directives:[Nu,Lu],styles:[".mat-progress-spinner{display:block;position:relative}.mat-progress-spinner svg{position:absolute;transform:rotate(-90deg);top:0;left:0;transform-origin:center;overflow:visible}.mat-progress-spinner circle{fill:transparent;transform-origin:center;transition:stroke-dashoffset 225ms linear}._mat-animation-noopable.mat-progress-spinner circle{transition:none;animation:none}.cdk-high-contrast-active .mat-progress-spinner circle{stroke:currentColor}.mat-progress-spinner.mat-progress-spinner-indeterminate-animation[mode=indeterminate]{animation:mat-progress-spinner-linear-rotate 2000ms linear infinite}._mat-animation-noopable.mat-progress-spinner.mat-progress-spinner-indeterminate-animation[mode=indeterminate]{transition:none;animation:none}.mat-progress-spinner.mat-progress-spinner-indeterminate-animation[mode=indeterminate] circle{transition-property:stroke;animation-duration:4000ms;animation-timing-function:cubic-bezier(0.35, 0, 0.25, 1);animation-iteration-count:infinite}._mat-animation-noopable.mat-progress-spinner.mat-progress-spinner-indeterminate-animation[mode=indeterminate] circle{transition:none;animation:none}.mat-progress-spinner.mat-progress-spinner-indeterminate-fallback-animation[mode=indeterminate]{animation:mat-progress-spinner-stroke-rotate-fallback 10000ms cubic-bezier(0.87, 0.03, 0.33, 1) infinite}._mat-animation-noopable.mat-progress-spinner.mat-progress-spinner-indeterminate-fallback-animation[mode=indeterminate]{transition:none;animation:none}.mat-progress-spinner.mat-progress-spinner-indeterminate-fallback-animation[mode=indeterminate] circle{transition-property:stroke}._mat-animation-noopable.mat-progress-spinner.mat-progress-spinner-indeterminate-fallback-animation[mode=indeterminate] circle{transition:none;animation:none}@keyframes mat-progress-spinner-linear-rotate{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}@keyframes mat-progress-spinner-stroke-rotate-100{0%{stroke-dashoffset:268.606171575px;transform:rotate(0)}12.5%{stroke-dashoffset:56.5486677px;transform:rotate(0)}12.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(72.5deg)}25%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(72.5deg)}25.0001%{stroke-dashoffset:268.606171575px;transform:rotate(270deg)}37.5%{stroke-dashoffset:56.5486677px;transform:rotate(270deg)}37.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(161.5deg)}50%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(161.5deg)}50.0001%{stroke-dashoffset:268.606171575px;transform:rotate(180deg)}62.5%{stroke-dashoffset:56.5486677px;transform:rotate(180deg)}62.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(251.5deg)}75%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(251.5deg)}75.0001%{stroke-dashoffset:268.606171575px;transform:rotate(90deg)}87.5%{stroke-dashoffset:56.5486677px;transform:rotate(90deg)}87.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(341.5deg)}100%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(341.5deg)}}@keyframes mat-progress-spinner-stroke-rotate-fallback{0%{transform:rotate(0deg)}25%{transform:rotate(1170deg)}50%{transform:rotate(2340deg)}75%{transform:rotate(3510deg)}100%{transform:rotate(4680deg)}}\n"],encapsulation:2,changeDetection:0}),t._diameters=new WeakMap,t})(),fE=(()=>{class t extends mE{constructor(t,e,n,i,r){super(t,e,n,i,r),this.mode="indeterminate"}}return t.\u0275fac=function(e){return new(e||t)(Ao(Ga),Ao(Gh),Ao(ou,8),Ao(cf,8),Ao(pE))},t.\u0275cmp=de({type:t,selectors:[["mat-spinner"]],hostAttrs:["role","progressbar","mode","indeterminate",1,"mat-spinner","mat-progress-spinner"],hostVars:6,hostBindings:function(t,e){2&t&&(sa("width",e.diameter,"px")("height",e.diameter,"px"),oa("_mat-animation-noopable",e._noopAnimations))},inputs:{color:"color"},features:[Ia],decls:3,vars:8,consts:[["preserveAspectRatio","xMidYMid meet","focusable","false",3,"ngSwitch"],["cx","50%","cy","50%",3,"animation-name","stroke-dashoffset","stroke-dasharray","stroke-width",4,"ngSwitchCase"],["cx","50%","cy","50%",3,"stroke-dashoffset","stroke-dasharray","stroke-width",4,"ngSwitchCase"],["cx","50%","cy","50%"]],template:function(t,e){1&t&&(Rn(),No(0,"svg",0),Ro(1,lE,1,9,"circle",1),Ro(2,uE,1,7,"circle",2),Lo()),2&t&&(sa("width",e.diameter,"px")("height",e.diameter,"px"),Po("ngSwitch","indeterminate"===e.mode),To("viewBox",e._viewBox),kr(1),Po("ngSwitchCase",!0),kr(1),Po("ngSwitchCase",!1))},directives:[Nu,Lu],styles:[".mat-progress-spinner{display:block;position:relative}.mat-progress-spinner svg{position:absolute;transform:rotate(-90deg);top:0;left:0;transform-origin:center;overflow:visible}.mat-progress-spinner circle{fill:transparent;transform-origin:center;transition:stroke-dashoffset 225ms linear}._mat-animation-noopable.mat-progress-spinner circle{transition:none;animation:none}.cdk-high-contrast-active .mat-progress-spinner circle{stroke:currentColor}.mat-progress-spinner.mat-progress-spinner-indeterminate-animation[mode=indeterminate]{animation:mat-progress-spinner-linear-rotate 2000ms linear infinite}._mat-animation-noopable.mat-progress-spinner.mat-progress-spinner-indeterminate-animation[mode=indeterminate]{transition:none;animation:none}.mat-progress-spinner.mat-progress-spinner-indeterminate-animation[mode=indeterminate] circle{transition-property:stroke;animation-duration:4000ms;animation-timing-function:cubic-bezier(0.35, 0, 0.25, 1);animation-iteration-count:infinite}._mat-animation-noopable.mat-progress-spinner.mat-progress-spinner-indeterminate-animation[mode=indeterminate] circle{transition:none;animation:none}.mat-progress-spinner.mat-progress-spinner-indeterminate-fallback-animation[mode=indeterminate]{animation:mat-progress-spinner-stroke-rotate-fallback 10000ms cubic-bezier(0.87, 0.03, 0.33, 1) infinite}._mat-animation-noopable.mat-progress-spinner.mat-progress-spinner-indeterminate-fallback-animation[mode=indeterminate]{transition:none;animation:none}.mat-progress-spinner.mat-progress-spinner-indeterminate-fallback-animation[mode=indeterminate] circle{transition-property:stroke}._mat-animation-noopable.mat-progress-spinner.mat-progress-spinner-indeterminate-fallback-animation[mode=indeterminate] circle{transition:none;animation:none}@keyframes mat-progress-spinner-linear-rotate{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}@keyframes mat-progress-spinner-stroke-rotate-100{0%{stroke-dashoffset:268.606171575px;transform:rotate(0)}12.5%{stroke-dashoffset:56.5486677px;transform:rotate(0)}12.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(72.5deg)}25%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(72.5deg)}25.0001%{stroke-dashoffset:268.606171575px;transform:rotate(270deg)}37.5%{stroke-dashoffset:56.5486677px;transform:rotate(270deg)}37.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(161.5deg)}50%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(161.5deg)}50.0001%{stroke-dashoffset:268.606171575px;transform:rotate(180deg)}62.5%{stroke-dashoffset:56.5486677px;transform:rotate(180deg)}62.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(251.5deg)}75%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(251.5deg)}75.0001%{stroke-dashoffset:268.606171575px;transform:rotate(90deg)}87.5%{stroke-dashoffset:56.5486677px;transform:rotate(90deg)}87.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(341.5deg)}100%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(341.5deg)}}@keyframes mat-progress-spinner-stroke-rotate-fallback{0%{transform:rotate(0deg)}25%{transform:rotate(1170deg)}50%{transform:rotate(2340deg)}75%{transform:rotate(3510deg)}100%{transform:rotate(4680deg)}}\n"],encapsulation:2,changeDetection:0}),t})(),gE=(()=>{class t{}return t.\u0275mod=ge({type:t}),t.\u0275inj=ut({factory:function(e){return new(e||t)},imports:[[gf,$u],gf]}),t})();class _E extends E{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){const e=super._subscribe(t);return e&&!e.closed&&t.next(this._value),e}getValue(){if(this.hasError)throw this.thrownError;if(this.closed)throw new b;return this._value}next(t){super.next(this._value=t)}}const yE=(()=>{function t(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return t.prototype=Object.create(Error.prototype),t})(),vE={};function bE(...t){let e=null,n=null;return C(t[t.length-1])&&(n=t.pop()),"function"==typeof t[t.length-1]&&(e=t.pop()),1===t.length&&c(t[0])&&(t=t[0]),G(t,n).lift(new wE(e))}class wE{constructor(t){this.resultSelector=t}call(t,e){return e.subscribe(new SE(t,this.resultSelector))}}class SE extends M{constructor(t,e){super(t),this.resultSelector=e,this.active=0,this.values=[],this.observables=[]}_next(t){this.values.push(vE),this.observables.push(t)}_complete(){const t=this.observables,e=t.length;if(0===e)this.destination.complete();else{this.active=e,this.toRespond=e;for(let n=0;n<e;n++){const e=t[n];this.add(P(this,e,e,n))}}}notifyComplete(t){0==(this.active-=1)&&this.destination.complete()}notifyNext(t,e,n,i,r){const s=this.values,o=this.toRespond?s[n]===vE?--this.toRespond:this.toRespond:0;s[n]=e,0===o&&(this.resultSelector?this._tryResultSelector(s):this.destination.next(s.slice()))}_tryResultSelector(t){let e;try{e=this.resultSelector.apply(this,t)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}function EE(t){return function(e){return 0===t?hd():e.lift(new kE(t))}}class kE{constructor(t){if(this.total=t,this.total<0)throw new ld}call(t,e){return e.subscribe(new CE(t,this.total))}}class CE extends m{constructor(t,e){super(t),this.total=e,this.ring=new Array,this.count=0}_next(t){const e=this.ring,n=this.total,i=this.count++;e.length<n?e.push(t):e[i%n]=t}_complete(){const t=this.destination;let e=this.count;if(e>0){const n=this.count>=this.total?this.total:this.count,i=this.ring;for(let r=0;r<n;r++){const r=e++%n;t.next(i[r])}}t.complete()}}function xE(t=RE){return e=>e.lift(new TE(t))}class TE{constructor(t){this.errorFactory=t}call(t,e){return e.subscribe(new IE(t,this.errorFactory))}}class IE extends m{constructor(t,e){super(t),this.errorFactory=e,this.hasValue=!1}_next(t){this.hasValue=!0,this.destination.next(t)}_complete(){if(this.hasValue)return this.destination.complete();{let e;try{e=this.errorFactory()}catch(t){e=t}this.destination.error(e)}}}function RE(){return new yE}function OE(t=null){return e=>e.lift(new AE(t))}class AE{constructor(t){this.defaultValue=t}call(t,e){return e.subscribe(new DE(t,this.defaultValue))}}class DE extends m{constructor(t,e){super(t),this.defaultValue=e,this.isEmpty=!0}_next(t){this.isEmpty=!1,this.destination.next(t)}_complete(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}function PE(t,e){const n=arguments.length>=2;return i=>i.pipe(t?od((e,n)=>t(e,n,i)):_,dd(1),n?OE(e):xE(()=>new yE))}class ME{constructor(t,e,n){this.predicate=t,this.thisArg=e,this.source=n}call(t,e){return e.subscribe(new NE(t,this.predicate,this.thisArg,this.source))}}class NE extends m{constructor(t,e,n,i){super(t),this.predicate=e,this.thisArg=n,this.source=i,this.index=0,this.thisArg=n||this}notifyComplete(t){this.destination.next(t),this.destination.complete()}_next(t){let e=!1;try{e=this.predicate.call(this.thisArg,t,this.index++,this.source)}catch(n){return void this.destination.error(n)}e||this.notifyComplete(!1)}_complete(){this.notifyComplete(!0)}}class LE{constructor(t,e,n=!1){this.accumulator=t,this.seed=e,this.hasSeed=n}call(t,e){return e.subscribe(new FE(t,this.accumulator,this.seed,this.hasSeed))}}class FE extends m{constructor(t,e,n,i){super(t),this.accumulator=e,this._seed=n,this.hasSeed=i,this.index=0}get seed(){return this._seed}set seed(t){this.hasSeed=!0,this._seed=t}_next(t){if(this.hasSeed)return this._tryNext(t);this.seed=t,this.destination.next(t)}_tryNext(t){const e=this.index++;let n;try{n=this.accumulator(this.seed,t,e)}catch(i){this.destination.error(i)}this.seed=n,this.destination.next(n)}}class UE{constructor(t,e){this.id=t,this.url=e}}class BE extends UE{constructor(t,e,n="imperative",i=null){super(t,e),this.navigationTrigger=n,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class jE extends UE{constructor(t,e,n){super(t,e),this.urlAfterRedirects=n}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class VE extends UE{constructor(t,e,n){super(t,e),this.reason=n}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class KE extends UE{constructor(t,e,n){super(t,e),this.error=n}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class qE extends UE{constructor(t,e,n,i){super(t,e),this.urlAfterRedirects=n,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class GE extends UE{constructor(t,e,n,i){super(t,e),this.urlAfterRedirects=n,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class $E extends UE{constructor(t,e,n,i,r){super(t,e),this.urlAfterRedirects=n,this.state=i,this.shouldActivate=r}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class HE extends UE{constructor(t,e,n,i){super(t,e),this.urlAfterRedirects=n,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class zE extends UE{constructor(t,e,n,i){super(t,e),this.urlAfterRedirects=n,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class WE{constructor(t){this.route=t}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class YE{constructor(t){this.route=t}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class XE{constructor(t){this.snapshot=t}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class QE{constructor(t){this.snapshot=t}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ZE{constructor(t){this.snapshot=t}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class JE{constructor(t){this.snapshot=t}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class tk{constructor(t,e,n){this.routerEvent=t,this.position=e,this.anchor=n}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}let ek=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=de({type:t,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,e){1&t&&Fo(0,"router-outlet")},directives:function(){return[ix]},encapsulation:2}),t})();class nk{constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e[0]:e}return null}getAll(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e:[e]}return[]}get keys(){return Object.keys(this.params)}}function ik(t){return new nk(t)}function rk(t){const e=Error("NavigationCancelingError: "+t);return e.ngNavigationCancelingError=!0,e}function sk(t,e,n){const i=n.path.split("/");if(i.length>t.length)return null;if("full"===n.pathMatch&&(e.hasChildren()||i.length<t.length))return null;const r={};for(let s=0;s<i.length;s++){const e=i[s],n=t[s];if(e.startsWith(":"))r[e.substring(1)]=n;else if(e!==n.path)return null}return{consumed:t.slice(0,i.length),posParams:r}}class ok{constructor(t,e){this.routes=t,this.module=e}}function ak(t,e=""){for(let n=0;n<t.length;n++){const i=t[n];ck(i,lk(e,i))}}function ck(t,e){if(!t)throw new Error(`\n      Invalid configuration of route '${e}': Encountered undefined route.\n      The reason might be an extra comma.\n\n      Example:\n      const routes: Routes = [\n        { path: '', redirectTo: '/dashboard', pathMatch: 'full' },\n        { path: 'dashboard',  component: DashboardComponent },, << two commas\n        { path: 'detail/:id', component: HeroDetailComponent }\n      ];\n    `);if(Array.isArray(t))throw new Error(`Invalid configuration of route '${e}': Array cannot be specified`);if(!t.component&&!t.children&&!t.loadChildren&&t.outlet&&"primary"!==t.outlet)throw new Error(`Invalid configuration of route '${e}': a componentless route without children or loadChildren cannot have a named outlet set`);if(t.redirectTo&&t.children)throw new Error(`Invalid configuration of route '${e}': redirectTo and children cannot be used together`);if(t.redirectTo&&t.loadChildren)throw new Error(`Invalid configuration of route '${e}': redirectTo and loadChildren cannot be used together`);if(t.children&&t.loadChildren)throw new Error(`Invalid configuration of route '${e}': children and loadChildren cannot be used together`);if(t.redirectTo&&t.component)throw new Error(`Invalid configuration of route '${e}': redirectTo and component cannot be used together`);if(t.path&&t.matcher)throw new Error(`Invalid configuration of route '${e}': path and matcher cannot be used together`);if(void 0===t.redirectTo&&!t.component&&!t.children&&!t.loadChildren)throw new Error(`Invalid configuration of route '${e}'. One of the following must be provided: component, redirectTo, children or loadChildren`);if(void 0===t.path&&void 0===t.matcher)throw new Error(`Invalid configuration of route '${e}': routes must have either a path or a matcher specified`);if("string"==typeof t.path&&"/"===t.path.charAt(0))throw new Error(`Invalid configuration of route '${e}': path cannot start with a slash`);if(""===t.path&&void 0!==t.redirectTo&&void 0===t.pathMatch)throw new Error(`Invalid configuration of route '{path: "${e}", redirectTo: "${t.redirectTo}"}': please provide 'pathMatch'. The default value of 'pathMatch' is 'prefix', but often the intent is to use 'full'.`);if(void 0!==t.pathMatch&&"full"!==t.pathMatch&&"prefix"!==t.pathMatch)throw new Error(`Invalid configuration of route '${e}': pathMatch can only be set to 'prefix' or 'full'`);t.children&&ak(t.children,e)}function lk(t,e){return e?t||e.path?t&&!e.path?t+"/":!t&&e.path?e.path:`${t}/${e.path}`:"":t}function uk(t){const e=t.children&&t.children.map(uk),n=e?Object.assign(Object.assign({},t),{children:e}):Object.assign({},t);return!n.component&&(e||n.loadChildren)&&n.outlet&&"primary"!==n.outlet&&(n.component=ek),n}function hk(t,e){const n=Object.keys(t),i=Object.keys(e);if(!n||!i||n.length!=i.length)return!1;let r;for(let s=0;s<n.length;s++)if(r=n[s],!dk(t[r],e[r]))return!1;return!0}function dk(t,e){return Array.isArray(t)&&Array.isArray(e)?t.length==e.length&&t.every(t=>e.indexOf(t)>-1):t===e}function pk(t){return Array.prototype.concat.apply([],t)}function mk(t){return t.length>0?t[t.length-1]:null}function fk(t,e){for(const n in t)t.hasOwnProperty(n)&&e(t[n],n)}function gk(t){return Ko(t)?t:Vo(t)?B(Promise.resolve(t)):td(t)}function _k(t,e,n){return n?function(t,e){return hk(t,e)}(t.queryParams,e.queryParams)&&function t(e,n){if(!wk(e.segments,n.segments))return!1;if(e.numberOfChildren!==n.numberOfChildren)return!1;for(const i in n.children){if(!e.children[i])return!1;if(!t(e.children[i],n.children[i]))return!1}return!0}(t.root,e.root):function(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>dk(t[n],e[n]))}(t.queryParams,e.queryParams)&&function t(e,n){return function e(n,i,r){if(n.segments.length>r.length)return!!wk(n.segments.slice(0,r.length),r)&&!i.hasChildren();if(n.segments.length===r.length){if(!wk(n.segments,r))return!1;for(const e in i.children){if(!n.children[e])return!1;if(!t(n.children[e],i.children[e]))return!1}return!0}{const t=r.slice(0,n.segments.length),s=r.slice(n.segments.length);return!!wk(n.segments,t)&&!!n.children.primary&&e(n.children.primary,i,s)}}(e,n,n.segments)}(t.root,e.root)}class yk{constructor(t,e,n){this.root=t,this.queryParams=e,this.fragment=n}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=ik(this.queryParams)),this._queryParamMap}toString(){return Ck.serialize(this)}}class vk{constructor(t,e){this.segments=t,this.children=e,this.parent=null,fk(e,(t,e)=>t.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return xk(this)}}class bk{constructor(t,e){this.path=t,this.parameters=e}get parameterMap(){return this._parameterMap||(this._parameterMap=ik(this.parameters)),this._parameterMap}toString(){return Dk(this)}}function wk(t,e){return t.length===e.length&&t.every((t,n)=>t.path===e[n].path)}function Sk(t,e){let n=[];return fk(t.children,(t,i)=>{"primary"===i&&(n=n.concat(e(t,i)))}),fk(t.children,(t,i)=>{"primary"!==i&&(n=n.concat(e(t,i)))}),n}class Ek{}class kk{parse(t){const e=new Fk(t);return new yk(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())}serialize(t){return`${"/"+function t(e,n){if(!e.hasChildren())return xk(e);if(n){const n=e.children.primary?t(e.children.primary,!1):"",i=[];return fk(e.children,(e,n)=>{"primary"!==n&&i.push(`${n}:${t(e,!1)}`)}),i.length>0?`${n}(${i.join("//")})`:n}{const n=Sk(e,(n,i)=>"primary"===i?[t(e.children.primary,!1)]:[`${i}:${t(n,!1)}`]);return`${xk(e)}/(${n.join("//")})`}}(t.root,!0)}${function(t){const e=Object.keys(t).map(e=>{const n=t[e];return Array.isArray(n)?n.map(t=>`${Ik(e)}=${Ik(t)}`).join("&"):`${Ik(e)}=${Ik(n)}`});return e.length?"?"+e.join("&"):""}(t.queryParams)}${"string"==typeof t.fragment?"#"+encodeURI(t.fragment):""}`}}const Ck=new kk;function xk(t){return t.segments.map(t=>Dk(t)).join("/")}function Tk(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Ik(t){return Tk(t).replace(/%3B/gi,";")}function Rk(t){return Tk(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Ok(t){return decodeURIComponent(t)}function Ak(t){return Ok(t.replace(/\+/g,"%20"))}function Dk(t){return`${Rk(t.path)}${e=t.parameters,Object.keys(e).map(t=>`;${Rk(t)}=${Rk(e[t])}`).join("")}`;var e}const Pk=/^[^\/()?;=#]+/;function Mk(t){const e=t.match(Pk);return e?e[0]:""}const Nk=/^[^=?&#]+/,Lk=/^[^?&#]+/;class Fk{constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new vk([],{}):new vk([],this.parseChildren())}parseQueryParams(){const t={};if(this.consumeOptional("?"))do{this.parseQueryParam(t)}while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));let n={};return this.peekStartsWith("(")&&(n=this.parseParens(!1)),(t.length>0||Object.keys(e).length>0)&&(n.primary=new vk(t,e)),n}parseSegment(){const t=Mk(this.remaining);if(""===t&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(t),new bk(Ok(t),this.parseMatrixParams())}parseMatrixParams(){const t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){const e=Mk(this.remaining);if(!e)return;this.capture(e);let n="";if(this.consumeOptional("=")){const t=Mk(this.remaining);t&&(n=t,this.capture(n))}t[Ok(e)]=Ok(n)}parseQueryParam(t){const e=function(t){const e=t.match(Nk);return e?e[0]:""}(this.remaining);if(!e)return;this.capture(e);let n="";if(this.consumeOptional("=")){const t=function(t){const e=t.match(Lk);return e?e[0]:""}(this.remaining);t&&(n=t,this.capture(n))}const i=Ak(e),r=Ak(n);if(t.hasOwnProperty(i)){let e=t[i];Array.isArray(e)||(e=[e],t[i]=e),e.push(r)}else t[i]=r}parseParens(t){const e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const n=Mk(this.remaining),i=this.remaining[n.length];if("/"!==i&&")"!==i&&";"!==i)throw new Error(`Cannot parse url '${this.url}'`);let r=void 0;n.indexOf(":")>-1?(r=n.substr(0,n.indexOf(":")),this.capture(r),this.capture(":")):t&&(r="primary");const s=this.parseChildren();e[r]=1===Object.keys(s).length?s.primary:new vk([],s),this.consumeOptional("//")}return e}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return!!this.peekStartsWith(t)&&(this.remaining=this.remaining.substring(t.length),!0)}capture(t){if(!this.consumeOptional(t))throw new Error(`Expected "${t}".`)}}class Uk{constructor(t){this._root=t}get root(){return this._root.value}parent(t){const e=this.pathFromRoot(t);return e.length>1?e[e.length-2]:null}children(t){const e=Bk(t,this._root);return e?e.children.map(t=>t.value):[]}firstChild(t){const e=Bk(t,this._root);return e&&e.children.length>0?e.children[0].value:null}siblings(t){const e=jk(t,this._root);return e.length<2?[]:e[e.length-2].children.map(t=>t.value).filter(e=>e!==t)}pathFromRoot(t){return jk(t,this._root).map(t=>t.value)}}function Bk(t,e){if(t===e.value)return e;for(const n of e.children){const e=Bk(t,n);if(e)return e}return null}function jk(t,e){if(t===e.value)return[e];for(const n of e.children){const i=jk(t,n);if(i.length)return i.unshift(e),i}return[]}class Vk{constructor(t,e){this.value=t,this.children=e}toString(){return`TreeNode(${this.value})`}}function Kk(t){const e={};return t&&t.children.forEach(t=>e[t.value.outlet]=t),e}class qk extends Uk{constructor(t,e){super(t),this.snapshot=e,Yk(this,t)}toString(){return this.snapshot.toString()}}function Gk(t,e){const n=function(t,e){const n=new zk([],{},{},"",{},"primary",e,null,t.root,-1,{});return new Wk("",new Vk(n,[]))}(t,e),i=new _E([new bk("",{})]),r=new _E({}),s=new _E({}),o=new _E({}),a=new _E(""),c=new $k(i,r,o,a,s,"primary",e,n.root);return c.snapshot=n.root,new qk(new Vk(c,[]),n)}class $k{constructor(t,e,n,i,r,s,o,a){this.url=t,this.params=e,this.queryParams=n,this.fragment=i,this.data=r,this.outlet=s,this.component=o,this._futureSnapshot=a}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(N(t=>ik(t)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(N(t=>ik(t)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Hk(t,e="emptyOnly"){const n=t.pathFromRoot;let i=0;if("always"!==e)for(i=n.length-1;i>=1;){const t=n[i],e=n[i-1];if(t.routeConfig&&""===t.routeConfig.path)i--;else{if(e.component)break;i--}}return function(t){return t.reduce((t,e)=>({params:Object.assign(Object.assign({},t.params),e.params),data:Object.assign(Object.assign({},t.data),e.data),resolve:Object.assign(Object.assign({},t.resolve),e._resolvedData)}),{params:{},data:{},resolve:{}})}(n.slice(i))}class zk{constructor(t,e,n,i,r,s,o,a,c,l,u){this.url=t,this.params=e,this.queryParams=n,this.fragment=i,this.data=r,this.outlet=s,this.component=o,this.routeConfig=a,this._urlSegment=c,this._lastPathIndex=l,this._resolve=u}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=ik(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=ik(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(t=>t.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Wk extends Uk{constructor(t,e){super(e),this.url=t,Yk(this,e)}toString(){return Xk(this._root)}}function Yk(t,e){e.value._routerState=t,e.children.forEach(e=>Yk(t,e))}function Xk(t){const e=t.children.length>0?` { ${t.children.map(Xk).join(", ")} } `:"";return`${t.value}${e}`}function Qk(t){if(t.snapshot){const e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,hk(e.queryParams,n.queryParams)||t.queryParams.next(n.queryParams),e.fragment!==n.fragment&&t.fragment.next(n.fragment),hk(e.params,n.params)||t.params.next(n.params),function(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!hk(t[n],e[n]))return!1;return!0}(e.url,n.url)||t.url.next(n.url),hk(e.data,n.data)||t.data.next(n.data)}else t.snapshot=t._futureSnapshot,t.data.next(t._futureSnapshot.data)}function Zk(t,e){var n,i;return hk(t.params,e.params)&&wk(n=t.url,i=e.url)&&n.every((t,e)=>hk(t.parameters,i[e].parameters))&&!(!t.parent!=!e.parent)&&(!t.parent||Zk(t.parent,e.parent))}function Jk(t){return"object"==typeof t&&null!=t&&!t.outlets&&!t.segmentPath}function tC(t,e,n,i,r){let s={};return i&&fk(i,(t,e)=>{s[e]=Array.isArray(t)?t.map(t=>""+t):""+t}),new yk(n.root===t?e:function t(e,n,i){const r={};return fk(e.children,(e,s)=>{r[s]=e===n?i:t(e,n,i)}),new vk(e.segments,r)}(n.root,t,e),s,r)}class eC{constructor(t,e,n){if(this.isAbsolute=t,this.numberOfDoubleDots=e,this.commands=n,t&&n.length>0&&Jk(n[0]))throw new Error("Root segment cannot have matrix parameters");const i=n.find(t=>"object"==typeof t&&null!=t&&t.outlets);if(i&&i!==mk(n))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class nC{constructor(t,e,n){this.segmentGroup=t,this.processChildren=e,this.index=n}}function iC(t){return"object"==typeof t&&null!=t&&t.outlets?t.outlets.primary:""+t}function rC(t,e,n){if(t||(t=new vk([],{})),0===t.segments.length&&t.hasChildren())return sC(t,e,n);const i=function(t,e,n){let i=0,r=e;const s={match:!1,pathIndex:0,commandIndex:0};for(;r<t.segments.length;){if(i>=n.length)return s;const e=t.segments[r],o=iC(n[i]),a=i<n.length-1?n[i+1]:null;if(r>0&&void 0===o)break;if(o&&a&&"object"==typeof a&&void 0===a.outlets){if(!lC(o,a,e))return s;i+=2}else{if(!lC(o,{},e))return s;i++}r++}return{match:!0,pathIndex:r,commandIndex:i}}(t,e,n),r=n.slice(i.commandIndex);if(i.match&&i.pathIndex<t.segments.length){const e=new vk(t.segments.slice(0,i.pathIndex),{});return e.children.primary=new vk(t.segments.slice(i.pathIndex),t.children),sC(e,0,r)}return i.match&&0===r.length?new vk(t.segments,{}):i.match&&!t.hasChildren()?oC(t,e,n):i.match?sC(t,0,r):oC(t,e,n)}function sC(t,e,n){if(0===n.length)return new vk(t.segments,{});{const i=function(t){return"object"==typeof t[0]&&null!==t[0]&&t[0].outlets?t[0].outlets:{primary:t}}(n),r={};return fk(i,(n,i)=>{null!==n&&(r[i]=rC(t.children[i],e,n))}),fk(t.children,(t,e)=>{void 0===i[e]&&(r[e]=t)}),new vk(t.segments,r)}}function oC(t,e,n){const i=t.segments.slice(0,e);let r=0;for(;r<n.length;){if("object"==typeof n[r]&&null!==n[r]&&void 0!==n[r].outlets){const t=aC(n[r].outlets);return new vk(i,t)}if(0===r&&Jk(n[0])){i.push(new bk(t.segments[e].path,n[0])),r++;continue}const s=iC(n[r]),o=r<n.length-1?n[r+1]:null;s&&o&&Jk(o)?(i.push(new bk(s,cC(o))),r+=2):(i.push(new bk(s,{})),r++)}return new vk(i,{})}function aC(t){const e={};return fk(t,(t,n)=>{null!==t&&(e[n]=oC(new vk([],{}),0,t))}),e}function cC(t){const e={};return fk(t,(t,n)=>e[n]=""+t),e}function lC(t,e,n){return t==n.path&&hk(e,n.parameters)}class uC{constructor(t,e,n,i){this.routeReuseStrategy=t,this.futureState=e,this.currState=n,this.forwardEvent=i}activate(t){const e=this.futureState._root,n=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,n,t),Qk(this.futureState.root),this.activateChildRoutes(e,n,t)}deactivateChildRoutes(t,e,n){const i=Kk(e);t.children.forEach(t=>{const e=t.value.outlet;this.deactivateRoutes(t,i[e],n),delete i[e]}),fk(i,(t,e)=>{this.deactivateRouteAndItsChildren(t,n)})}deactivateRoutes(t,e,n){const i=t.value,r=e?e.value:null;if(i===r)if(i.component){const r=n.getContext(i.outlet);r&&this.deactivateChildRoutes(t,e,r.children)}else this.deactivateChildRoutes(t,e,n);else r&&this.deactivateRouteAndItsChildren(e,n)}deactivateRouteAndItsChildren(t,e){this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,e):this.deactivateRouteAndOutlet(t,e)}detachAndStoreRouteSubtree(t,e){const n=e.getContext(t.value.outlet);if(n&&n.outlet){const e=n.outlet.detach(),i=n.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:e,route:t,contexts:i})}}deactivateRouteAndOutlet(t,e){const n=e.getContext(t.value.outlet);if(n){const i=Kk(t),r=t.value.component?n.children:e;fk(i,(t,e)=>this.deactivateRouteAndItsChildren(t,r)),n.outlet&&(n.outlet.deactivate(),n.children.onOutletDeactivated())}}activateChildRoutes(t,e,n){const i=Kk(e);t.children.forEach(t=>{this.activateRoutes(t,i[t.value.outlet],n),this.forwardEvent(new JE(t.value.snapshot))}),t.children.length&&this.forwardEvent(new QE(t.value.snapshot))}activateRoutes(t,e,n){const i=t.value,r=e?e.value:null;if(Qk(i),i===r)if(i.component){const r=n.getOrCreateContext(i.outlet);this.activateChildRoutes(t,e,r.children)}else this.activateChildRoutes(t,e,n);else if(i.component){const e=n.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const t=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),e.children.onOutletReAttached(t.contexts),e.attachRef=t.componentRef,e.route=t.route.value,e.outlet&&e.outlet.attach(t.componentRef,t.route.value),hC(t.route)}else{const n=function(t){for(let e=t.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig;if(t&&t.component)return null}return null}(i.snapshot),r=n?n.module.componentFactoryResolver:null;e.attachRef=null,e.route=i,e.resolver=r,e.outlet&&e.outlet.activateWith(i,r),this.activateChildRoutes(t,null,e.children)}}else this.activateChildRoutes(t,null,n)}}function hC(t){Qk(t.value),t.children.forEach(hC)}function dC(t){return"function"==typeof t}function pC(t){return t instanceof yk}class mC{constructor(t){this.segmentGroup=t||null}}class fC{constructor(t){this.urlTree=t}}function gC(t){return new y(e=>e.error(new mC(t)))}function _C(t){return new y(e=>e.error(new fC(t)))}function yC(t){return new y(e=>e.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${t}'`)))}class vC{constructor(t,e,n,i,r){this.configLoader=e,this.urlSerializer=n,this.urlTree=i,this.config=r,this.allowRedirects=!0,this.ngModule=t.get(Zt)}apply(){return this.expandSegmentGroup(this.ngModule,this.config,this.urlTree.root,"primary").pipe(N(t=>this.createUrlTree(t,this.urlTree.queryParams,this.urlTree.fragment))).pipe(wy(t=>{if(t instanceof fC)return this.allowRedirects=!1,this.match(t.urlTree);if(t instanceof mC)throw this.noMatchError(t);throw t}))}match(t){return this.expandSegmentGroup(this.ngModule,this.config,t.root,"primary").pipe(N(e=>this.createUrlTree(e,t.queryParams,t.fragment))).pipe(wy(t=>{if(t instanceof mC)throw this.noMatchError(t);throw t}))}noMatchError(t){return new Error(`Cannot match any routes. URL Segment: '${t.segmentGroup}'`)}createUrlTree(t,e,n){const i=t.segments.length>0?new vk([],{primary:t}):t;return new yk(i,e,n)}expandSegmentGroup(t,e,n,i){return 0===n.segments.length&&n.hasChildren()?this.expandChildren(t,e,n).pipe(N(t=>new vk([],t))):this.expandSegment(t,n,e,n.segments,i,!0)}expandChildren(t,e,n){return function(t,e){if(0===Object.keys(t).length)return td({});const n=[],i=[],r={};return fk(t,(t,s)=>{const o=e(s,t).pipe(N(t=>r[s]=t));"primary"===s?n.push(o):i.push(o)}),td.apply(null,n.concat(i)).pipe(Ud(),function(t,e){const n=arguments.length>=2;return i=>i.pipe(t?od((e,n)=>t(e,n,i)):_,EE(1),n?OE(e):xE(()=>new yE))}(),N(()=>r))}(n.children,(n,i)=>this.expandSegmentGroup(t,e,i,n))}expandSegment(t,e,n,i,r,s){return td(...n).pipe(N(o=>this.expandSegmentAgainstRoute(t,e,n,o,i,r,s).pipe(wy(t=>{if(t instanceof mC)return td(null);throw t}))),Ud(),PE(t=>!!t),wy((t,n)=>{if(t instanceof yE||"EmptyError"===t.name){if(this.noLeftoversInUrl(e,i,r))return td(new vk([],{}));throw new mC(e)}throw t}))}noLeftoversInUrl(t,e,n){return 0===e.length&&!t.children[n]}expandSegmentAgainstRoute(t,e,n,i,r,s,o){return EC(i)!==s?gC(e):void 0===i.redirectTo?this.matchSegmentAgainstRoute(t,e,i,r):o&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(t,e,n,i,r,s):gC(e)}expandSegmentAgainstRouteUsingRedirect(t,e,n,i,r,s){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(t,n,i,s):this.expandRegularSegmentAgainstRouteUsingRedirect(t,e,n,i,r,s)}expandWildCardWithParamsAgainstRouteUsingRedirect(t,e,n,i){const r=this.applyRedirectCommands([],n.redirectTo,{});return n.redirectTo.startsWith("/")?_C(r):this.lineralizeSegments(n,r).pipe(j(n=>{const r=new vk(n,{});return this.expandSegment(t,r,e,n,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(t,e,n,i,r,s){const{matched:o,consumedSegments:a,lastChild:c,positionalParamSegments:l}=bC(e,i,r);if(!o)return gC(e);const u=this.applyRedirectCommands(a,i.redirectTo,l);return i.redirectTo.startsWith("/")?_C(u):this.lineralizeSegments(i,u).pipe(j(i=>this.expandSegment(t,e,n,i.concat(r.slice(c)),s,!1)))}matchSegmentAgainstRoute(t,e,n,i){if("**"===n.path)return n.loadChildren?this.configLoader.load(t.injector,n).pipe(N(t=>(n._loadedConfig=t,new vk(i,{})))):td(new vk(i,{}));const{matched:r,consumedSegments:s,lastChild:o}=bC(e,n,i);if(!r)return gC(e);const a=i.slice(o);return this.getChildConfig(t,n,i).pipe(j(t=>{const n=t.module,i=t.routes,{segmentGroup:r,slicedSegments:o}=function(t,e,n,i){return n.length>0&&function(t,e,n){return n.some(n=>SC(t,e,n)&&"primary"!==EC(n))}(t,n,i)?{segmentGroup:wC(new vk(e,function(t,e){const n={};n.primary=e;for(const i of t)""===i.path&&"primary"!==EC(i)&&(n[EC(i)]=new vk([],{}));return n}(i,new vk(n,t.children)))),slicedSegments:[]}:0===n.length&&function(t,e,n){return n.some(n=>SC(t,e,n))}(t,n,i)?{segmentGroup:wC(new vk(t.segments,function(t,e,n,i){const r={};for(const s of n)SC(t,e,s)&&!i[EC(s)]&&(r[EC(s)]=new vk([],{}));return Object.assign(Object.assign({},i),r)}(t,n,i,t.children))),slicedSegments:n}:{segmentGroup:t,slicedSegments:n}}(e,s,a,i);return 0===o.length&&r.hasChildren()?this.expandChildren(n,i,r).pipe(N(t=>new vk(s,t))):0===i.length&&0===o.length?td(new vk(s,{})):this.expandSegment(n,r,i,o,"primary",!0).pipe(N(t=>new vk(s.concat(t.segments),t.children)))}))}getChildConfig(t,e,n){return e.children?td(new ok(e.children,t)):e.loadChildren?void 0!==e._loadedConfig?td(e._loadedConfig):this.runCanLoadGuards(t.injector,e,n).pipe(j(n=>n?this.configLoader.load(t.injector,e).pipe(N(t=>(e._loadedConfig=t,t))):function(t){return new y(e=>e.error(rk(`Cannot load children because the guard of the route "path: '${t.path}'" returned false`)))}(e))):td(new ok([],t))}runCanLoadGuards(t,e,n){const i=e.canLoad;return i&&0!==i.length?B(i).pipe(N(i=>{const r=t.get(i);let s;if(function(t){return t&&dC(t.canLoad)}(r))s=r.canLoad(e,n);else{if(!dC(r))throw new Error("Invalid CanLoad guard");s=r(e,n)}return gk(s)})).pipe(Ud(),id(t=>{if(!pC(t))return;const e=rk(`Redirecting to "${this.urlSerializer.serialize(t)}"`);throw e.url=t,e}),(r=t=>!0===t,t=>t.lift(new ME(r,void 0,t)))):td(!0);var r}lineralizeSegments(t,e){let n=[],i=e.root;for(;;){if(n=n.concat(i.segments),0===i.numberOfChildren)return td(n);if(i.numberOfChildren>1||!i.children.primary)return yC(t.redirectTo);i=i.children.primary}}applyRedirectCommands(t,e,n){return this.applyRedirectCreatreUrlTree(e,this.urlSerializer.parse(e),t,n)}applyRedirectCreatreUrlTree(t,e,n,i){const r=this.createSegmentGroup(t,e.root,n,i);return new yk(r,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)}createQueryParams(t,e){const n={};return fk(t,(t,i)=>{if("string"==typeof t&&t.startsWith(":")){const r=t.substring(1);n[i]=e[r]}else n[i]=t}),n}createSegmentGroup(t,e,n,i){const r=this.createSegments(t,e.segments,n,i);let s={};return fk(e.children,(e,r)=>{s[r]=this.createSegmentGroup(t,e,n,i)}),new vk(r,s)}createSegments(t,e,n,i){return e.map(e=>e.path.startsWith(":")?this.findPosParam(t,e,i):this.findOrReturn(e,n))}findPosParam(t,e,n){const i=n[e.path.substring(1)];if(!i)throw new Error(`Cannot redirect to '${t}'. Cannot find '${e.path}'.`);return i}findOrReturn(t,e){let n=0;for(const i of e){if(i.path===t.path)return e.splice(n),i;n++}return t}}function bC(t,e,n){if(""===e.path)return"full"===e.pathMatch&&(t.hasChildren()||n.length>0)?{matched:!1,consumedSegments:[],lastChild:0,positionalParamSegments:{}}:{matched:!0,consumedSegments:[],lastChild:0,positionalParamSegments:{}};const i=(e.matcher||sk)(n,t,e);return i?{matched:!0,consumedSegments:i.consumed,lastChild:i.consumed.length,positionalParamSegments:i.posParams}:{matched:!1,consumedSegments:[],lastChild:0,positionalParamSegments:{}}}function wC(t){if(1===t.numberOfChildren&&t.children.primary){const e=t.children.primary;return new vk(t.segments.concat(e.segments),e.children)}return t}function SC(t,e,n){return(!(t.hasChildren()||e.length>0)||"full"!==n.pathMatch)&&""===n.path&&void 0!==n.redirectTo}function EC(t){return t.outlet||"primary"}class kC{constructor(t){this.path=t,this.route=this.path[this.path.length-1]}}class CC{constructor(t,e){this.component=t,this.route=e}}function xC(t,e,n){const i=t._root;return function t(e,n,i,r,s={canDeactivateChecks:[],canActivateChecks:[]}){const o=Kk(n);return e.children.forEach(e=>{!function(e,n,i,r,s={canDeactivateChecks:[],canActivateChecks:[]}){const o=e.value,a=n?n.value:null,c=i?i.getContext(e.value.outlet):null;if(a&&o.routeConfig===a.routeConfig){const l=function(t,e,n){if("function"==typeof n)return n(t,e);switch(n){case"pathParamsChange":return!wk(t.url,e.url);case"pathParamsOrQueryParamsChange":return!wk(t.url,e.url)||!hk(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Zk(t,e)||!hk(t.queryParams,e.queryParams);case"paramsChange":default:return!Zk(t,e)}}(a,o,o.routeConfig.runGuardsAndResolvers);l?s.canActivateChecks.push(new kC(r)):(o.data=a.data,o._resolvedData=a._resolvedData),t(e,n,o.component?c?c.children:null:i,r,s),l&&s.canDeactivateChecks.push(new CC(c&&c.outlet&&c.outlet.component||null,a))}else a&&IC(n,c,s),s.canActivateChecks.push(new kC(r)),t(e,null,o.component?c?c.children:null:i,r,s)}(e,o[e.value.outlet],i,r.concat([e.value]),s),delete o[e.value.outlet]}),fk(o,(t,e)=>IC(t,i.getContext(e),s)),s}(i,e?e._root:null,n,[i.value])}function TC(t,e,n){const i=function(t){if(!t)return null;for(let e=t.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig}return null}(e);return(i?i.module.injector:n).get(t)}function IC(t,e,n){const i=Kk(t),r=t.value;fk(i,(t,i)=>{IC(t,r.component?e?e.children.getContext(i):null:e,n)}),n.canDeactivateChecks.push(new CC(r.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,r))}const RC=Symbol("INITIAL_VALUE");function OC(){return _v(t=>bE(...t.map(t=>t.pipe(dd(1),jd(RC)))).pipe(function(t,e){let n=!1;return arguments.length>=2&&(n=!0),function(i){return i.lift(new LE(t,e,n))}}((t,e)=>{let n=!1;return e.reduce((t,i,r)=>{if(t!==RC)return t;if(i===RC&&(n=!0),!n){if(!1===i)return i;if(r===e.length-1||pC(i))return i}return t},t)},RC),od(t=>t!==RC),N(t=>pC(t)?t:!0===t),dd(1)))}function AC(t,e){return null!==t&&e&&e(new ZE(t)),td(!0)}function DC(t,e){return null!==t&&e&&e(new XE(t)),td(!0)}function PC(t,e,n){const i=e.routeConfig?e.routeConfig.canActivate:null;return i&&0!==i.length?td(i.map(i=>Tb(()=>{const r=TC(i,e,n);let s;if(function(t){return t&&dC(t.canActivate)}(r))s=gk(r.canActivate(e,t));else{if(!dC(r))throw new Error("Invalid CanActivate guard");s=gk(r(e,t))}return s.pipe(PE())}))).pipe(OC()):td(!0)}function MC(t,e,n){const i=e[e.length-1],r=e.slice(0,e.length-1).reverse().map(t=>function(t){const e=t.routeConfig?t.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:t,guards:e}:null}(t)).filter(t=>null!==t).map(e=>Tb(()=>td(e.guards.map(r=>{const s=TC(r,e.node,n);let o;if(function(t){return t&&dC(t.canActivateChild)}(s))o=gk(s.canActivateChild(i,t));else{if(!dC(s))throw new Error("Invalid CanActivateChild guard");o=gk(s(i,t))}return o.pipe(PE())})).pipe(OC())));return td(r).pipe(OC())}class NC{}class LC{constructor(t,e,n,i,r,s){this.rootComponentType=t,this.config=e,this.urlTree=n,this.url=i,this.paramsInheritanceStrategy=r,this.relativeLinkResolution=s}recognize(){try{const t=BC(this.urlTree.root,[],[],this.config,this.relativeLinkResolution).segmentGroup,e=this.processSegmentGroup(this.config,t,"primary"),n=new zk([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},"primary",this.rootComponentType,null,this.urlTree.root,-1,{}),i=new Vk(n,e),r=new Wk(this.url,i);return this.inheritParamsAndData(r._root),td(r)}catch(t){return new y(e=>e.error(t))}}inheritParamsAndData(t){const e=t.value,n=Hk(e,this.paramsInheritanceStrategy);e.params=Object.freeze(n.params),e.data=Object.freeze(n.data),t.children.forEach(t=>this.inheritParamsAndData(t))}processSegmentGroup(t,e,n){return 0===e.segments.length&&e.hasChildren()?this.processChildren(t,e):this.processSegment(t,e,e.segments,n)}processChildren(t,e){const n=Sk(e,(e,n)=>this.processSegmentGroup(t,e,n));return function(t){const e={};t.forEach(t=>{const n=e[t.value.outlet];if(n){const e=n.url.map(t=>t.toString()).join("/"),i=t.value.url.map(t=>t.toString()).join("/");throw new Error(`Two segments cannot have the same outlet name: '${e}' and '${i}'.`)}e[t.value.outlet]=t.value})}(n),n.sort((t,e)=>"primary"===t.value.outlet?-1:"primary"===e.value.outlet?1:t.value.outlet.localeCompare(e.value.outlet)),n}processSegment(t,e,n,i){for(const s of t)try{return this.processSegmentAgainstRoute(s,e,n,i)}catch(r){if(!(r instanceof NC))throw r}if(this.noLeftoversInUrl(e,n,i))return[];throw new NC}noLeftoversInUrl(t,e,n){return 0===e.length&&!t.children[n]}processSegmentAgainstRoute(t,e,n,i){if(t.redirectTo)throw new NC;if((t.outlet||"primary")!==i)throw new NC;let r,s=[],o=[];if("**"===t.path){const s=n.length>0?mk(n).parameters:{};r=new zk(n,s,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,KC(t),i,t.component,t,FC(e),UC(e)+n.length,qC(t))}else{const a=function(t,e,n){if(""===e.path){if("full"===e.pathMatch&&(t.hasChildren()||n.length>0))throw new NC;return{consumedSegments:[],lastChild:0,parameters:{}}}const i=(e.matcher||sk)(n,t,e);if(!i)throw new NC;const r={};fk(i.posParams,(t,e)=>{r[e]=t.path});const s=i.consumed.length>0?Object.assign(Object.assign({},r),i.consumed[i.consumed.length-1].parameters):r;return{consumedSegments:i.consumed,lastChild:i.consumed.length,parameters:s}}(e,t,n);s=a.consumedSegments,o=n.slice(a.lastChild),r=new zk(s,a.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,KC(t),i,t.component,t,FC(e),UC(e)+s.length,qC(t))}const a=function(t){return t.children?t.children:t.loadChildren?t._loadedConfig.routes:[]}(t),{segmentGroup:c,slicedSegments:l}=BC(e,s,o,a,this.relativeLinkResolution);if(0===l.length&&c.hasChildren()){const t=this.processChildren(a,c);return[new Vk(r,t)]}if(0===a.length&&0===l.length)return[new Vk(r,[])];const u=this.processSegment(a,c,l,"primary");return[new Vk(r,u)]}}function FC(t){let e=t;for(;e._sourceSegment;)e=e._sourceSegment;return e}function UC(t){let e=t,n=e._segmentIndexShift?e._segmentIndexShift:0;for(;e._sourceSegment;)e=e._sourceSegment,n+=e._segmentIndexShift?e._segmentIndexShift:0;return n-1}function BC(t,e,n,i,r){if(n.length>0&&function(t,e,n){return n.some(n=>jC(t,e,n)&&"primary"!==VC(n))}(t,n,i)){const r=new vk(e,function(t,e,n,i){const r={};r.primary=i,i._sourceSegment=t,i._segmentIndexShift=e.length;for(const s of n)if(""===s.path&&"primary"!==VC(s)){const n=new vk([],{});n._sourceSegment=t,n._segmentIndexShift=e.length,r[VC(s)]=n}return r}(t,e,i,new vk(n,t.children)));return r._sourceSegment=t,r._segmentIndexShift=e.length,{segmentGroup:r,slicedSegments:[]}}if(0===n.length&&function(t,e,n){return n.some(n=>jC(t,e,n))}(t,n,i)){const s=new vk(t.segments,function(t,e,n,i,r,s){const o={};for(const a of i)if(jC(t,n,a)&&!r[VC(a)]){const n=new vk([],{});n._sourceSegment=t,n._segmentIndexShift="legacy"===s?t.segments.length:e.length,o[VC(a)]=n}return Object.assign(Object.assign({},r),o)}(t,e,n,i,t.children,r));return s._sourceSegment=t,s._segmentIndexShift=e.length,{segmentGroup:s,slicedSegments:n}}const s=new vk(t.segments,t.children);return s._sourceSegment=t,s._segmentIndexShift=e.length,{segmentGroup:s,slicedSegments:n}}function jC(t,e,n){return(!(t.hasChildren()||e.length>0)||"full"!==n.pathMatch)&&""===n.path&&void 0===n.redirectTo}function VC(t){return t.outlet||"primary"}function KC(t){return t.data||{}}function qC(t){return t.resolve||{}}function GC(t){return function(e){return e.pipe(_v(e=>{const n=t(e);return n?B(n).pipe(N(()=>e)):B([e])}))}}class $C{shouldDetach(t){return!1}store(t,e){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,e){return t.routeConfig===e.routeConfig}}const HC=new Ft("ROUTES");class zC{constructor(t,e,n,i){this.loader=t,this.compiler=e,this.onLoadStartListener=n,this.onLoadEndListener=i}load(t,e){return this.onLoadStartListener&&this.onLoadStartListener(e),this.loadModuleFactory(e.loadChildren).pipe(N(n=>{this.onLoadEndListener&&this.onLoadEndListener(e);const i=n.create(t);return new ok(pk(i.injector.get(HC)).map(uk),i)}))}loadModuleFactory(t){return"string"==typeof t?B(this.loader.load(t)):gk(t()).pipe(j(t=>t instanceof Jt?td(t):B(this.compiler.compileModuleAsync(t))))}}class WC{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new YC,this.attachRef=null}}class YC{constructor(){this.contexts=new Map}onChildOutletCreated(t,e){const n=this.getOrCreateContext(t);n.outlet=e,this.contexts.set(t,n)}onChildOutletDestroyed(t){const e=this.getContext(t);e&&(e.outlet=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let e=this.getContext(t);return e||(e=new WC,this.contexts.set(t,e)),e}getContext(t){return this.contexts.get(t)||null}}class XC{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,e){return t}}function QC(t){throw t}function ZC(t,e,n){return e.parse("/")}function JC(t,e){return td(null)}let tx=(()=>{class t{constructor(t,e,n,i,r,s,o,a){this.rootComponentType=t,this.urlSerializer=e,this.rootContexts=n,this.location=i,this.config=a,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.navigationId=0,this.isNgZoneEnabled=!1,this.events=new E,this.errorHandler=QC,this.malformedUriErrorHandler=ZC,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:JC,afterPreactivation:JC},this.urlHandlingStrategy=new XC,this.routeReuseStrategy=new $C,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="legacy",this.ngModule=r.get(Zt),this.console=r.get(gl);const c=r.get(Rl);this.isNgZoneEnabled=c instanceof Rl,this.resetConfig(a),this.currentUrlTree=new yk(new vk([],{}),{},null),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new zC(s,o,t=>this.triggerEvent(new WE(t)),t=>this.triggerEvent(new YE(t))),this.routerState=Gk(this.currentUrlTree,this.rootComponentType),this.transitions=new _E({id:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}setupNavigations(t){const e=this.events;return t.pipe(od(t=>0!==t.id),N(t=>Object.assign(Object.assign({},t),{extractedUrl:this.urlHandlingStrategy.extract(t.rawUrl)})),_v(t=>{let n=!1,i=!1;return td(t).pipe(id(t=>{this.currentNavigation={id:t.id,initialUrl:t.currentRawUrl,extractedUrl:t.extractedUrl,trigger:t.source,extras:t.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),_v(t=>{const n=!this.navigated||t.extractedUrl.toString()!==this.browserUrlTree.toString();if(("reload"===this.onSameUrlNavigation||n)&&this.urlHandlingStrategy.shouldProcessUrl(t.rawUrl))return td(t).pipe(_v(t=>{const n=this.transitions.getValue();return e.next(new BE(t.id,this.serializeUrl(t.extractedUrl),t.source,t.restoredState)),n!==this.transitions.getValue()?ud:[t]}),_v(t=>Promise.resolve(t)),(i=this.ngModule.injector,r=this.configLoader,s=this.urlSerializer,o=this.config,function(t){return t.pipe(_v(t=>function(t,e,n,i,r){return new vC(t,e,n,i,r).apply()}(i,r,s,t.extractedUrl,o).pipe(N(e=>Object.assign(Object.assign({},t),{urlAfterRedirects:e})))))}),id(t=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:t.urlAfterRedirects})}),function(t,e,n,i,r){return function(s){return s.pipe(j(s=>function(t,e,n,i,r="emptyOnly",s="legacy"){return new LC(t,e,n,i,r,s).recognize()}(t,e,s.urlAfterRedirects,n(s.urlAfterRedirects),i,r).pipe(N(t=>Object.assign(Object.assign({},s),{targetSnapshot:t})))))}}(this.rootComponentType,this.config,t=>this.serializeUrl(t),this.paramsInheritanceStrategy,this.relativeLinkResolution),id(t=>{"eager"===this.urlUpdateStrategy&&(t.extras.skipLocationChange||this.setBrowserUrl(t.urlAfterRedirects,!!t.extras.replaceUrl,t.id,t.extras.state),this.browserUrlTree=t.urlAfterRedirects)}),id(t=>{const n=new qE(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);e.next(n)}));var i,r,s,o;if(n&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:n,extractedUrl:i,source:r,restoredState:s,extras:o}=t,a=new BE(n,this.serializeUrl(i),r,s);e.next(a);const c=Gk(i,this.rootComponentType).snapshot;return td(Object.assign(Object.assign({},t),{targetSnapshot:c,urlAfterRedirects:i,extras:Object.assign(Object.assign({},o),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=t.rawUrl,this.browserUrlTree=t.urlAfterRedirects,t.resolve(null),ud}),GC(t=>{const{targetSnapshot:e,id:n,extractedUrl:i,rawUrl:r,extras:{skipLocationChange:s,replaceUrl:o}}=t;return this.hooks.beforePreactivation(e,{navigationId:n,appliedUrlTree:i,rawUrlTree:r,skipLocationChange:!!s,replaceUrl:!!o})}),id(t=>{const e=new GE(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(e)}),N(t=>Object.assign(Object.assign({},t),{guards:xC(t.targetSnapshot,t.currentSnapshot,this.rootContexts)})),function(t,e){return function(n){return n.pipe(j(n=>{const{targetSnapshot:i,currentSnapshot:r,guards:{canActivateChecks:s,canDeactivateChecks:o}}=n;return 0===o.length&&0===s.length?td(Object.assign(Object.assign({},n),{guardsResult:!0})):function(t,e,n,i){return B(t).pipe(j(t=>function(t,e,n,i,r){const s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return s&&0!==s.length?td(s.map(s=>{const o=TC(s,e,r);let a;if(function(t){return t&&dC(t.canDeactivate)}(o))a=gk(o.canDeactivate(t,e,n,i));else{if(!dC(o))throw new Error("Invalid CanDeactivate guard");a=gk(o(t,e,n,i))}return a.pipe(PE())})).pipe(OC()):td(!0)}(t.component,t.route,n,e,i)),PE(t=>!0!==t,!0))}(o,i,r,t).pipe(j(n=>n&&"boolean"==typeof n?function(t,e,n,i){return B(e).pipe(Ty(e=>B([DC(e.route.parent,i),AC(e.route,i),MC(t,e.path,n),PC(t,e.route,n)]).pipe(Ud(),PE(t=>!0!==t,!0))),PE(t=>!0!==t,!0))}(i,s,t,e):td(n)),N(t=>Object.assign(Object.assign({},n),{guardsResult:t})))}))}}(this.ngModule.injector,t=>this.triggerEvent(t)),id(t=>{if(pC(t.guardsResult)){const e=rk(`Redirecting to "${this.serializeUrl(t.guardsResult)}"`);throw e.url=t.guardsResult,e}}),id(t=>{const e=new $E(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot,!!t.guardsResult);this.triggerEvent(e)}),od(t=>{if(!t.guardsResult){this.resetUrlToCurrentUrlTree();const n=new VE(t.id,this.serializeUrl(t.extractedUrl),"");return e.next(n),t.resolve(!1),!1}return!0}),GC(t=>{if(t.guards.canActivateChecks.length)return td(t).pipe(id(t=>{const e=new HE(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(e)}),_v(t=>{let n=!1;return td(t).pipe((i=this.paramsInheritanceStrategy,r=this.ngModule.injector,function(t){return t.pipe(j(t=>{const{targetSnapshot:e,guards:{canActivateChecks:n}}=t;if(!n.length)return td(t);let s=0;return B(n).pipe(Ty(t=>function(t,e,n,i){return function(t,e,n,i){const r=Object.keys(t);if(0===r.length)return td({});const s={};return B(r).pipe(j(r=>function(t,e,n,i){const r=TC(t,e,i);return gk(r.resolve?r.resolve(e,n):r(e,n))}(t[r],e,n,i).pipe(id(t=>{s[r]=t}))),EE(1),j(()=>Object.keys(s).length===r.length?td(s):ud))}(t._resolve,t,e,i).pipe(N(e=>(t._resolvedData=e,t.data=Object.assign(Object.assign({},t.data),Hk(t,n).resolve),null)))}(t.route,e,i,r)),id(()=>s++),EE(1),j(e=>s===n.length?td(t):ud))}))}),id({next:()=>n=!0,complete:()=>{if(!n){const n=new VE(t.id,this.serializeUrl(t.extractedUrl),"At least one route resolver didn't emit any value.");e.next(n),t.resolve(!1)}}}));var i,r}),id(t=>{const e=new zE(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(e)}))}),GC(t=>{const{targetSnapshot:e,id:n,extractedUrl:i,rawUrl:r,extras:{skipLocationChange:s,replaceUrl:o}}=t;return this.hooks.afterPreactivation(e,{navigationId:n,appliedUrlTree:i,rawUrlTree:r,skipLocationChange:!!s,replaceUrl:!!o})}),N(t=>{const e=function(t,e,n){const i=function t(e,n,i){if(i&&e.shouldReuseRoute(n.value,i.value.snapshot)){const r=i.value;r._futureSnapshot=n.value;const s=function(e,n,i){return n.children.map(n=>{for(const r of i.children)if(e.shouldReuseRoute(r.value.snapshot,n.value))return t(e,n,r);return t(e,n)})}(e,n,i);return new Vk(r,s)}{const i=e.retrieve(n.value);if(i){const t=i.route;return function t(e,n){if(e.value.routeConfig!==n.value.routeConfig)throw new Error("Cannot reattach ActivatedRouteSnapshot created from a different route");if(e.children.length!==n.children.length)throw new Error("Cannot reattach ActivatedRouteSnapshot with a different number of children");n.value._futureSnapshot=e.value;for(let i=0;i<e.children.length;++i)t(e.children[i],n.children[i])}(n,t),t}{const i=new $k(new _E((r=n.value).url),new _E(r.params),new _E(r.queryParams),new _E(r.fragment),new _E(r.data),r.outlet,r.component,r),s=n.children.map(n=>t(e,n));return new Vk(i,s)}}var r}(t,e._root,n?n._root:void 0);return new qk(i,e)}(this.routeReuseStrategy,t.targetSnapshot,t.currentRouterState);return Object.assign(Object.assign({},t),{targetRouterState:e})}),id(t=>{this.currentUrlTree=t.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl),this.routerState=t.targetRouterState,"deferred"===this.urlUpdateStrategy&&(t.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,!!t.extras.replaceUrl,t.id,t.extras.state),this.browserUrlTree=t.urlAfterRedirects)}),(r=this.rootContexts,s=this.routeReuseStrategy,o=t=>this.triggerEvent(t),N(t=>(new uC(s,t.targetRouterState,t.currentRouterState,o).activate(r),t))),id({next(){n=!0},complete(){n=!0}}),ky(()=>{if(!n&&!i){this.resetUrlToCurrentUrlTree();const n=new VE(t.id,this.serializeUrl(t.extractedUrl),`Navigation ID ${t.id} is not equal to the current navigation id ${this.navigationId}`);e.next(n),t.resolve(!1)}this.currentNavigation=null}),wy(n=>{if(i=!0,(r=n)&&r.ngNavigationCancelingError){const i=pC(n.url);i||(this.navigated=!0,this.resetStateAndUrl(t.currentRouterState,t.currentUrlTree,t.rawUrl));const r=new VE(t.id,this.serializeUrl(t.extractedUrl),n.message);e.next(r),i?setTimeout(()=>{const e=this.urlHandlingStrategy.merge(n.url,this.rawUrlTree);return this.scheduleNavigation(e,"imperative",null,{skipLocationChange:t.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy},{resolve:t.resolve,reject:t.reject,promise:t.promise})},0):t.resolve(!1)}else{this.resetStateAndUrl(t.currentRouterState,t.currentUrlTree,t.rawUrl);const i=new KE(t.id,this.serializeUrl(t.extractedUrl),n);e.next(i);try{t.resolve(this.errorHandler(n))}catch(s){t.reject(s)}}var r;return ud}));var r,s,o}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}getTransition(){const t=this.transitions.value;return t.urlAfterRedirects=this.browserUrlTree,t}setTransition(t){this.transitions.next(Object.assign(Object.assign({},this.getTransition()),t))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{let e=this.parseUrl(t.url);const n="popstate"===t.type?"popstate":"hashchange",i=t.state&&t.state.navigationId?t.state:null;setTimeout(()=>{this.scheduleNavigation(e,n,i,{replaceUrl:!0})},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){ak(t),this.config=t.map(uk),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=null)}createUrlTree(t,e={}){const{relativeTo:n,queryParams:i,fragment:r,preserveQueryParams:s,queryParamsHandling:o,preserveFragment:a}=e;Ai()&&s&&console&&console.warn&&console.warn("preserveQueryParams is deprecated, use queryParamsHandling instead.");const c=n||this.routerState.root,l=a?this.currentUrlTree.fragment:r;let u=null;if(o)switch(o){case"merge":u=Object.assign(Object.assign({},this.currentUrlTree.queryParams),i);break;case"preserve":u=this.currentUrlTree.queryParams;break;default:u=i||null}else u=s?this.currentUrlTree.queryParams:i||null;return null!==u&&(u=this.removeEmptyProps(u)),function(t,e,n,i,r){if(0===n.length)return tC(e.root,e.root,e,i,r);const s=function(t){if("string"==typeof t[0]&&1===t.length&&"/"===t[0])return new eC(!0,0,t);let e=0,n=!1;const i=t.reduce((t,i,r)=>{if("object"==typeof i&&null!=i){if(i.outlets){const e={};return fk(i.outlets,(t,n)=>{e[n]="string"==typeof t?t.split("/"):t}),[...t,{outlets:e}]}if(i.segmentPath)return[...t,i.segmentPath]}return"string"!=typeof i?[...t,i]:0===r?(i.split("/").forEach((i,r)=>{0==r&&"."===i||(0==r&&""===i?n=!0:".."===i?e++:""!=i&&t.push(i))}),t):[...t,i]},[]);return new eC(n,e,i)}(n);if(s.toRoot())return tC(e.root,new vk([],{}),e,i,r);const o=function(t,e,n){if(t.isAbsolute)return new nC(e.root,!0,0);if(-1===n.snapshot._lastPathIndex){const t=n.snapshot._urlSegment;return new nC(t,t===e.root,0)}const i=Jk(t.commands[0])?0:1;return function(t,e,n){let i=t,r=e,s=n;for(;s>r;){if(s-=r,i=i.parent,!i)throw new Error("Invalid number of '../'");r=i.segments.length}return new nC(i,!1,r-s)}(n.snapshot._urlSegment,n.snapshot._lastPathIndex+i,t.numberOfDoubleDots)}(s,e,t),a=o.processChildren?sC(o.segmentGroup,o.index,s.commands):rC(o.segmentGroup,o.index,s.commands);return tC(o.segmentGroup,a,e,i,r)}(c,this.currentUrlTree,t,u,l)}navigateByUrl(t,e={skipLocationChange:!1}){Ai()&&this.isNgZoneEnabled&&!Rl.isInAngularZone()&&this.console.warn("Navigation triggered outside Angular zone, did you forget to call 'ngZone.run()'?");const n=pC(t)?t:this.parseUrl(t),i=this.urlHandlingStrategy.merge(n,this.rawUrlTree);return this.scheduleNavigation(i,"imperative",null,e)}navigate(t,e={skipLocationChange:!1}){return function(t){for(let e=0;e<t.length;e++){const n=t[e];if(null==n)throw new Error(`The requested path contains ${n} segment at index ${e}`)}}(t),this.navigateByUrl(this.createUrlTree(t,e),e)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let e;try{e=this.urlSerializer.parse(t)}catch(n){e=this.malformedUriErrorHandler(n,this.urlSerializer,t)}return e}isActive(t,e){if(pC(t))return _k(this.currentUrlTree,t,e);const n=this.parseUrl(t);return _k(this.currentUrlTree,n,e)}removeEmptyProps(t){return Object.keys(t).reduce((e,n)=>{const i=t[n];return null!=i&&(e[n]=i),e},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.events.next(new jE(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,this.currentNavigation=null,t.resolve(!0)},t=>{this.console.warn("Unhandled Navigation Error: ")})}scheduleNavigation(t,e,n,i,r){const s=this.getTransition();if(s&&"imperative"!==e&&"imperative"===s.source&&s.rawUrl.toString()===t.toString())return Promise.resolve(!0);if(s&&"hashchange"==e&&"popstate"===s.source&&s.rawUrl.toString()===t.toString())return Promise.resolve(!0);if(s&&"popstate"==e&&"hashchange"===s.source&&s.rawUrl.toString()===t.toString())return Promise.resolve(!0);let o,a,c;r?(o=r.resolve,a=r.reject,c=r.promise):c=new Promise((t,e)=>{o=t,a=e});const l=++this.navigationId;return this.setTransition({id:l,source:e,restoredState:n,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:i,resolve:o,reject:a,promise:c,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),c.catch(t=>Promise.reject(t))}setBrowserUrl(t,e,n,i){const r=this.urlSerializer.serialize(t);i=i||{},this.location.isCurrentPathEqualTo(r)||e?this.location.replaceState(r,"",Object.assign(Object.assign({},i),{navigationId:n})):this.location.go(r,"",Object.assign(Object.assign({},i),{navigationId:n}))}resetStateAndUrl(t,e,n){this.routerState=t,this.currentUrlTree=e,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n),this.resetUrlToCurrentUrlTree()}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",{navigationId:this.lastSuccessfulId})}}return t.\u0275fac=function(e){return new(e||t)(zt(to),zt(Ek),zt(YC),zt(wu),zt(go),zt(Xl),zt(xl),zt(void 0))},t.\u0275prov=lt({token:t,factory:t.\u0275fac}),t})(),ex=(()=>{class t{constructor(t,e,n){this.router=t,this.route=e,this.locationStrategy=n,this.commands=[],this.subscription=t.events.subscribe(t=>{t instanceof jE&&this.updateTargetUrlAndHref()})}set routerLink(t){this.commands=null!=t?Array.isArray(t)?t:[t]:[]}set preserveQueryParams(t){Ai()&&console&&console.warn&&console.warn("preserveQueryParams is deprecated, use queryParamsHandling instead."),this.preserve=t}ngOnChanges(t){this.updateTargetUrlAndHref()}ngOnDestroy(){this.subscription.unsubscribe()}onClick(t,e,n,i){if(0!==t||e||n||i)return!0;if("string"==typeof this.target&&"_self"!=this.target)return!0;const r={skipLocationChange:nx(this.skipLocationChange),replaceUrl:nx(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,r),!1}updateTargetUrlAndHref(){this.href=this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree))}get urlTree(){return this.router.createUrlTree(this.commands,{relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,preserveQueryParams:nx(this.preserve),queryParamsHandling:this.queryParamsHandling,preserveFragment:nx(this.preserveFragment)})}}return t.\u0275fac=function(e){return new(e||t)(Ao(tx),Ao($k),Ao(gu))},t.\u0275dir=ye({type:t,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(t,e){1&t&&qo("click",(function(t){return e.onClick(t.button,t.ctrlKey,t.metaKey,t.shiftKey)})),2&t&&(Ca("href",e.href,ir),To("target",e.target))},inputs:{routerLink:"routerLink",preserveQueryParams:"preserveQueryParams",target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state"},features:[Ae]}),t})();function nx(t){return""===t||!!t}let ix=(()=>{class t{constructor(t,e,n,i,r){this.parentContexts=t,this.location=e,this.resolver=n,this.changeDetector=r,this.activated=null,this._activatedRoute=null,this.activateEvents=new jc,this.deactivateEvents=new jc,this.name=i||"primary",t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,t}attach(t,e){this.activated=t,this._activatedRoute=e,this.location.insert(t.hostView)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,e){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;const n=(e=e||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),i=this.parentContexts.getOrCreateContext(this.name).children,r=new rx(t,i,this.location.injector);this.activated=this.location.createComponent(n,this.location.length,r),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return t.\u0275fac=function(e){return new(e||t)(Ao(YC),Ao(gc),Ao(qa),Do("name"),Ao(Zs))},t.\u0275dir=ye({type:t,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate"},exportAs:["outlet"]}),t})();class rx{constructor(t,e,n){this.route=t,this.childContexts=e,this.parent=n}get(t,e){return t===$k?this.route:t===YC?this.childContexts:this.parent.get(t,e)}}class sx{}class ox{preload(t,e){return td(null)}}let ax=(()=>{class t{constructor(t,e,n,i,r){this.router=t,this.injector=i,this.preloadingStrategy=r,this.loader=new zC(e,n,e=>t.triggerEvent(new WE(e)),e=>t.triggerEvent(new YE(e)))}setUpPreloading(){this.subscription=this.router.events.pipe(od(t=>t instanceof jE),Ty(()=>this.preload())).subscribe(()=>{})}preload(){const t=this.injector.get(Zt);return this.processRoutes(t,this.router.config)}ngOnDestroy(){this.subscription.unsubscribe()}processRoutes(t,e){const n=[];for(const i of e)if(i.loadChildren&&!i.canLoad&&i._loadedConfig){const t=i._loadedConfig;n.push(this.processRoutes(t.module,t.routes))}else i.loadChildren&&!i.canLoad?n.push(this.preloadConfig(t,i)):i.children&&n.push(this.processRoutes(t,i.children));return B(n).pipe(q(),N(t=>{}))}preloadConfig(t,e){return this.preloadingStrategy.preload(e,()=>this.loader.load(t.injector,e).pipe(j(t=>(e._loadedConfig=t,this.processRoutes(t.module,t.routes)))))}}return t.\u0275fac=function(e){return new(e||t)(zt(tx),zt(Xl),zt(xl),zt(go),zt(sx))},t.\u0275prov=lt({token:t,factory:t.\u0275fac}),t})(),cx=(()=>{class t{constructor(t,e,n={}){this.router=t,this.viewportScroller=e,this.options=n,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},n.scrollPositionRestoration=n.scrollPositionRestoration||"disabled",n.anchorScrolling=n.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof BE?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof jE&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof tk&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,e){this.router.triggerEvent(new tk(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,e))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(zt(tx),zt(Hu),zt(void 0))},t.\u0275prov=lt({token:t,factory:t.\u0275fac}),t})();const lx=new Ft("ROUTER_CONFIGURATION"),ux=new Ft("ROUTER_FORROOT_GUARD"),hx=[wu,{provide:Ek,useClass:kk},{provide:tx,useFactory:function(t,e,n,i,r,s,o,a={},c,l){const u=new tx(null,t,e,n,i,r,s,pk(o));if(c&&(u.urlHandlingStrategy=c),l&&(u.routeReuseStrategy=l),a.errorHandler&&(u.errorHandler=a.errorHandler),a.malformedUriErrorHandler&&(u.malformedUriErrorHandler=a.malformedUriErrorHandler),a.enableTracing){const t=su();u.events.subscribe(e=>{t.logGroup("Router Event: "+e.constructor.name),t.log(e.toString()),t.log(e),t.logGroupEnd()})}return a.onSameUrlNavigation&&(u.onSameUrlNavigation=a.onSameUrlNavigation),a.paramsInheritanceStrategy&&(u.paramsInheritanceStrategy=a.paramsInheritanceStrategy),a.urlUpdateStrategy&&(u.urlUpdateStrategy=a.urlUpdateStrategy),a.relativeLinkResolution&&(u.relativeLinkResolution=a.relativeLinkResolution),u},deps:[Ek,YC,wu,go,Xl,xl,HC,lx,[class{},new it],[class{},new it]]},YC,{provide:$k,useFactory:function(t){return t.routerState.root},deps:[tx]},{provide:Xl,useClass:Jl},ax,ox,class{preload(t,e){return e().pipe(wy(()=>td(null)))}},{provide:lx,useValue:{enableTracing:!1}}];function dx(){return new ql("Router",tx)}let px=(()=>{class t{constructor(t,e){}static forRoot(e,n){return{ngModule:t,providers:[hx,_x(e),{provide:ux,useFactory:gx,deps:[[tx,new it,new st]]},{provide:lx,useValue:n||{}},{provide:gu,useFactory:fx,deps:[au,[new nt(yu),new it],lx]},{provide:cx,useFactory:mx,deps:[tx,Hu,lx]},{provide:sx,useExisting:n&&n.preloadingStrategy?n.preloadingStrategy:ox},{provide:ql,multi:!0,useFactory:dx},[yx,{provide:cl,multi:!0,useFactory:vx,deps:[yx]},{provide:wx,useFactory:bx,deps:[yx]},{provide:fl,multi:!0,useExisting:wx}]]}}static forChild(e){return{ngModule:t,providers:[_x(e)]}}}return t.\u0275mod=ge({type:t}),t.\u0275inj=ut({factory:function(e){return new(e||t)(zt(ux,8),zt(tx,8))}}),t})();function mx(t,e,n){return n.scrollOffset&&e.setOffset(n.scrollOffset),new cx(t,e,n)}function fx(t,e,n={}){return n.useHash?new bu(t,e):new vu(t,e)}function gx(t){if(t)throw new Error("RouterModule.forRoot() called twice. Lazy loaded modules should use RouterModule.forChild() instead.");return"guarded"}function _x(t){return[{provide:_o,multi:!0,useValue:t},{provide:HC,multi:!0,useValue:t}]}let yx=(()=>{class t{constructor(t){this.injector=t,this.initNavigation=!1,this.resultOfPreactivationDone=new E}appInitializer(){return this.injector.get(lu,Promise.resolve(null)).then(()=>{let t=null;const e=new Promise(e=>t=e),n=this.injector.get(tx),i=this.injector.get(lx);if(this.isLegacyDisabled(i)||this.isLegacyEnabled(i))t(!0);else if("disabled"===i.initialNavigation)n.setUpLocationChangeListener(),t(!0);else{if("enabled"!==i.initialNavigation)throw new Error(`Invalid initialNavigation options: '${i.initialNavigation}'`);n.hooks.afterPreactivation=()=>this.initNavigation?td(null):(this.initNavigation=!0,t(!0),this.resultOfPreactivationDone),n.initialNavigation()}return e})}bootstrapListener(t){const e=this.injector.get(lx),n=this.injector.get(ax),i=this.injector.get(cx),r=this.injector.get(tx),s=this.injector.get(Wl);t===s.components[0]&&(this.isLegacyEnabled(e)?r.initialNavigation():this.isLegacyDisabled(e)&&r.setUpLocationChangeListener(),n.setUpPreloading(),i.init(),r.resetRootComponentType(s.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}isLegacyEnabled(t){return"legacy_enabled"===t.initialNavigation||!0===t.initialNavigation||void 0===t.initialNavigation}isLegacyDisabled(t){return"legacy_disabled"===t.initialNavigation||!1===t.initialNavigation}}return t.\u0275fac=function(e){return new(e||t)(zt(go))},t.\u0275prov=lt({token:t,factory:t.\u0275fac}),t})();function vx(t){return t.appInitializer.bind(t)}function bx(t){return t.bootstrapListener.bind(t)}const wx=new Ft("Router Initializer");function Sx(t,e,n,i){return new(n||(n=Promise))((function(r,s){function o(t){try{c(i.next(t))}catch(e){s(e)}}function a(t){try{c(i.throw(t))}catch(e){s(e)}}function c(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(o,a)}c((i=i.apply(t,e||[])).next())}))}var Ex=function(t){return t[t.EUR=0]="EUR",t[t.USD=1]="USD",t}({});const kx=["\u20ac","$"],Cx=["EUR","USD"];class xx{constructor(t,e){this._contactId=t,this._name=e}get contactId(){return this._contactId}set contactId(t){this._contactId=t}get name(){return this._name}set name(t){this._name=t}}var Tx=function(t){return t[t.GERMAN=0]="GERMAN",t[t.ENGLISH=1]="ENGLISH",t}({});class Ix{constructor(t,e){this._contact=t,this._group=e,this._balance=0,this._active=!0}set active(t){this._active=t}get active(){return this._active}get contact(){return this._contact}get group(){return this._group}get balance(){return this._balance}set balance(t){this._balance=t}}class Rx{constructor(t,e,n,i,r,s,o,a){this._transactionType=t,this._transactionId=e,this._name=n,this._creationDate=i,this._group=r,this._payer=s,this._recipients=o,this._sender=a}get transactionType(){return this._transactionType}get transactionId(){return this._transactionId}get name(){return this._name}set name(t){this._name=t}get creationDate(){return this._creationDate}get group(){return this._group}get payer(){return this._payer}set payer(t){this._payer=t}get recipients(){return this._recipients}set recipients(t){this._recipients=t}get sender(){return this._sender}}var Ox=function(t){return t[t.EXPENSE=0]="EXPENSE",t[t.PAYBACK=1]="PAYBACK",t}({});class Ax{constructor(t,e){this._contact=t,this._amount=e}get contact(){return this._contact}get amount(){return this._amount}}class Dx{constructor(t,e,n,i){this._activityType=t,this._subject=e,this._actor=n,this._creationDate=i}get activityType(){return this._activityType}get subject(){return this._subject}get actor(){return this._actor}get creationDate(){return this._creationDate}}var Px=function(t){return t[t.NEWEXPENSE=0]="NEWEXPENSE",t[t.EXPENSECHANGE=1]="EXPENSECHANGE",t[t.NEWPAYBACK=2]="NEWPAYBACK",t[t.GROUPCREATION=3]="GROUPCREATION",t[t.NEWCONTACTINGROUP=4]="NEWCONTACTINGROUP",t[t.CONTACTLEFTGROUP=5]="CONTACTLEFTGROUP",t}({});let Mx=(()=>{class t{constructor(t,e){this.time=t,this.id=e}static getTransactionTimeByID(e){for(const n of t.transactionTimes)if(n.id===e)return n.time;return 0}}return t.transactionTimes=[],t.groupCreationTime=0,t})();var Nx=n("xPRb");let Lx=(()=>{class t{}return t.log=!0,t})();class Fx{}class Ux extends Fx{constructor(t,e){super(),this.error=t,this.message=e}getError(){return this.error}getMessage(){return this.message}getValue(){return null}wasSuccessful(){return!1}}class Bx extends Fx{constructor(t){super(),this.value=t}getError(){return null}getMessage(){return""}getValue(){return this.value}wasSuccessful(){return!0}}var jx=function(t){return t[t.Autodiscovery=0]="Autodiscovery",t[t.InvalidPassword=1]="InvalidPassword",t[t.Unknown=2]="Unknown",t}({}),Vx=function(t){return t[t.Setter=0]="Setter",t}({}),Kx=function(t){return t[t.SendEvent=0]="SendEvent",t[t.NoOriginal=1]="NoOriginal",t[t.InvalidUsers=2]="InvalidUsers",t[t.Unknown=3]="Unknown",t[t.InvalidName=4]="InvalidName",t[t.SetCurrency=5]="SetCurrency",t[t.InUse=6]="InUse",t[t.RoomNotFound=7]="RoomNotFound",t}({});let qx=(()=>{class t{constructor(){}findClientConfig(t){return Nx.AutoDiscovery.findClientConfig(t)}createClient(t,e,n){let i;return i=void 0!==n&&void 0!==e?{baseUrl:t,accessToken:n.accessToken,userId:n.account,store:e,useAutorizationHeader:!0}:void 0===n&&void 0!==e?{baseUrl:t,store:e,useAutorizationHeader:!0}:void 0!==n&&void 0===e?{baseUrl:t,accessToken:n.accessToken,userId:n.account,useAutorizationHeader:!0}:{baseUrl:t,useAutorizationHeader:!0},console.log(i),Object(Nx.createClient)(i)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=lt({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),Gx=(()=>{class t{constructor(t){this.matrixClassProviderService=t,this.loggedIn=!1,this.prepared=!1,this.loggedInEmitter=new jc,this.logoutEmitter=new jc}login(t,e,n){return Sx(this,void 0,void 0,(function*(){if(this.loggedIn)throw new Error("already logged in");const i=yield this.autodiscovery(t);if(i instanceof Ux)return i;try{yield this.authenticate(t,e,n)}catch(s){let t;return console.log(s),this.loggedIn=!1,t="string"==typeof s?s:s.data.errcode+": "+s.data.error,new Ux(jx.InvalidPassword,t)}yield this.setDefaultSettings();const r=(t,e,n)=>Sx(this,void 0,void 0,(function*(){this.prepared="PREPARED"===t||"SYNCING"===t,console.log("Matrix Client prepared: "+this.prepared),this.prepared&&this.matrixClient.removeListener("sync",r)}));return this.matrixClient.on("sync",r),this.isLoggedIn()&&this.loggedInEmitter.emit(),new Bx}))}autodiscovery(e){return Sx(this,void 0,void 0,(function*(){const n=localStorage.getItem("baseUrl");if(null!==n)return void(this.serverAddress=n);const i=e.split(t.ACCOUNT_SEPARATOR);if(2!==i.length||""===i[1]||void 0===i[1])throw new Error("wrong user id format");const r=i[1],s=yield this.matrixClassProviderService.findClientConfig(r);if(s["m.homeserver"].state!==t.AUTODISCOVERY_SUCCESS)return console.log(s),new Ux(jx.Autodiscovery,s["m.homeserver"].error);this.serverAddress=s["m.homeserver"].base_url,localStorage.setItem("baseUrl",this.serverAddress)}))}authenticate(t,e,n){return Sx(this,void 0,void 0,(function*(){if(void 0===e){if(void 0===n)return Promise.reject("No authentification data provided. Need either account/pw or accessToken.");this.matrixClient=yield this.matrixClassProviderService.createClient(this.serverAddress,void 0,{accessToken:n,account:t}),this.roomTypeMatrixClient=yield this.matrixClassProviderService.createClient(this.serverAddress,void 0,{accessToken:n,account:t}),this.loginInfo={access_token:n}}else{if(void 0===t)return Promise.reject("No authentification data provided. Need account, not only password.");this.matrixClient=yield this.matrixClassProviderService.createClient(this.serverAddress),this.roomTypeMatrixClient=yield this.matrixClassProviderService.createClient(this.serverAddress),this.loginInfo=yield this.matrixClient.loginWithPassword(t,e),yield this.roomTypeMatrixClient.loginWithPassword(t,e),localStorage.setItem("accessToken",this.loginInfo.access_token),localStorage.setItem("account",t)}console.log("token written"),console.log(this.loginInfo),this.loggedIn=!0}))}setDefaultSettings(){return Sx(this,void 0,void 0,(function*(){let e,n;try{e=yield this.matrixClient.getAccountDataFromServer(t.CURRENCY_KEY)}catch(i){console.log("caught "+i.message+" while getting currency setting")}try{n=yield this.matrixClient.getAccountDataFromServer(t.LANGUAGE_KEY)}catch(i){console.log("caught "+i.message+" while getting language setting")}console.log(e),null===e&&(yield this.matrixClient.setAccountData(t.CURRENCY_KEY,{currency:t.DEFAULT_CURRENCY})),null===n&&(yield this.matrixClient.setAccountData(t.LANGUAGE_KEY,{language:t.DEFAULT_LANGUAGE}))}))}getLoggedInEmitter(){return this.loggedInEmitter}getLogoutEmitter(){return this.logoutEmitter}logout(){return Sx(this,void 0,void 0,(function*(){return this.loggedIn&&(yield this.matrixClient.logout(),this.loggedIn=!1,this.prepared=!1),localStorage.clear(),this.loginInfo=void 0,this.logoutEmitter.emit(),new Bx}))}getClient(){if(!1===this.loggedIn)throw new Error("can only get Client if logged in");if(void 0===this.matrixClient)throw new Error("unknown error");return this.matrixClient}getRoomTypeClient(){if(!1===this.loggedIn)throw new Error("can only get Client if logged in");if(void 0===this.matrixClient)throw new Error("unknown error");return this.roomTypeMatrixClient}getNewClient(){return Sx(this,void 0,void 0,(function*(){const t={accessToken:localStorage.getItem("accessToken"),account:localStorage.getItem("account")};return console.log(t),yield this.matrixClassProviderService.createClient(this.serverAddress,void 0,t)}))}isLoggedIn(){return this.loggedIn}isPrepared(){return this.prepared}}return t.ACCOUNT_SEPARATOR=":",t.AUTODISCOVERY_SUCCESS="SUCCESS",t.CURRENCY_KEY="com.matrixpay.currency",t.LANGUAGE_KEY="com.matrixpay.language",t.DEFAULT_CURRENCY=Cx[0],t.DEFAULT_LANGUAGE="English",t.\u0275fac=function(e){return new(e||t)(zt(qx))},t.\u0275prov=lt({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),$x=(()=>{class t{constructor(t){this.filterCount=1,this.filterDefinition={room:{rooms:[],state:{types:["m.room.*","org.matrix.msc1840"]},timeline:{limit:10,types:["com.matrixpay.currency","com.matrixpay.language","com.matrixpay.payback","com.matrixpay.expense","m.room.create","m.room.member","org.matrix.msc1840"]},ephemeral:{not_types:["*"]}},presence:{not_types:["*"]}},this.transactions={},this.initializedPayRooms=new Set,this.clientService=t,this.userObservable=new E,this.groupsObservable=new E,this.balancesObservable=new E,this.recommendationsObservable=new E,this.settingsCurrencyObservable=new E,this.groupMembershipObservable=new E,this.newTransactionObservable=new E,this.modifiedTransactionsObservable=new E,this.multipleNewTransactionsObservable=new E,this.settingsLanguageObservable=new E,this.groupActivityObservable=new E,this.logoutObservable=new E,this.clientService.getLoggedInEmitter().subscribe(()=>Sx(this,void 0,void 0,(function*(){yield this.setUp()}))),this.clientService.getLogoutEmitter().subscribe(()=>this.logoutObservable.next())}setUp(){return Sx(this,void 0,void 0,(function*(){this.matrixClient=this.clientService.getClient(),this.roomTypeMatrixClient=this.clientService.getRoomTypeClient(),this.accountDataListener(),this.timelineListener(),this.roomListener(),this.membershipListener(),this.timelineResetListener(),this.roomStateListener(),this.roomTypeListener();const e=Nx.Filter.fromJson(this.matrixClient.credentials.userId,t.FILTER_ID+this.filterCount,this.filterDefinition),n=Nx.Filter.fromJson(this.roomTypeMatrixClient.credentials.userId,t.ROOM_TYPE_FILTER_ID,{room:{state:{types:["org.matrix.msc1840"]}}});yield this.matrixClient.startClient({includeArchivedRooms:!1,filter:e}),yield this.roomTypeMatrixClient.startClient({includeArchivedRooms:!1,roomTypeFilter:n});const i=this.matrixClient.getUserId(),r=yield this.matrixClient.getAccountDataFromServer("com.matrixpay.currency"),s=yield this.matrixClient.getAccountDataFromServer("com.matrixpay.language");null!==r&&(this.checkProperties(r,t.CHECK_CURRENCY_PROPERTIES)?this.userObservable.next({contactId:i,name:this.matrixClient.getUser(i).displayName,currency:r.currency,language:s.language}):console.log("Found invalid currency event"))}))}processNewRoom(e){return Sx(this,void 0,void 0,(function*(){const n=e.roomId,i=e.name,r=[],s=[],o=e.getLiveTimeline().getState(Nx.EventTimeline.FORWARDS).getStateEvents("com.matrixpay.currency","");let a;null===o?console.log("no currency set"):this.checkProperties(o.getContent(),t.CHECK_CURRENCY_PROPERTIES)?a=o.getContent().currency:console.log("Found invalid currency event"),Lx.log&&console.log("new room detected. groupName: "+i+" userIds: "+r+" userNames: "+s+" currency: "+a),this.groupsObservable.next({groupId:n,groupName:i,currency:a,userIds:r,userNames:s,isLeave:!1}),yield this.paginateBackwards(e)}))}paginateBackwards(t){return Sx(this,void 0,void 0,(function*(){const e=new Nx.TimelineWindow(this.matrixClient,t.getLiveTimeline().getTimelineSet());e.load(),yield this.paginateBackwardsUntilTheEnd(e),Lx.log&&console.log("found old transactions in room "+t.roomId+": "+this.transactions.hasOwnProperty(t.roomId)),this.transactions.hasOwnProperty(t.roomId)&&(this.initializedPayRooms.add(t.roomId),this.multipleNewTransactionsObservable.next(this.transactions[t.roomId]),Lx.log&&console.log("Number of transactions: "+this.transactions[t.roomId].length))}))}paginateBackwardsUntilTheEnd(t){return Sx(this,void 0,void 0,(function*(){(yield t.paginate(Nx.EventTimeline.BACKWARDS,10))&&(yield this.paginateBackwardsUntilTheEnd(t))}))}accountDataCallback(e,n){switch(e.getType()){case"com.matrixpay.currency":Lx.log&&console.log("got currency change to "+e.getContent().currency),this.checkProperties(e.getContent(),t.CHECK_CURRENCY_PROPERTIES)?(this.settingsCurrencyObservable.next({currency:e.getContent().currency}),console.log("currency sent")):console.log("found invalid currency event");break;case"com.matrixpay.language":this.checkProperties(e.getContent(),t.CHECK_LANGUAGE_PROPERTIES)?(Lx.log&&console.log("got language change to "+e.getContent().language),this.settingsLanguageObservable.next({language:e.getContent().language})):console.log("found invalid language event")}}accountDataListener(){this.matrixClient.on("accountData",(t,e)=>{this.accountDataCallback(t,e)})}timelineListener(){this.matrixClient.on("Room.timeline",(e,n,i,r,s)=>{if(!s.liveEvent)switch(e.getType()){case"com.matrixpay.payback":console.log("got an old payback. name: "+e.getContent().name+" room: "+n.name),this.checkProperties(e.getContent(),t.CHECK_TRANSACTION_PROPERTIES)?this.initializedPayRooms.has(n.roomId)?this.multipleNewTransactionsObservable.next([this.getPaybackFromEvent(n,e)]):(this.transactions.hasOwnProperty(n.roomId)||(this.transactions[n.roomId]=[]),this.transactions[n.roomId].push(this.getPaybackFromEvent(n,e))):console.log("Found invalid transaction");break;case"com.matrixpay.expense":this.checkProperties(e.getContent(),t.CHECK_TRANSACTION_PROPERTIES)?e.isRelation()?e.isRelation("m.replace")&&(Lx.log&&console.log("got an old editing of an expense. name: "+e.getContent().name),this.modifiedTransactionsObservable.next(this.getExpenseFromEvent(n,e))):(Lx.log&&console.log("got an old expense. name: "+e.getContent().name),this.initializedPayRooms.has(n.roomId)?this.multipleNewTransactionsObservable.next([this.getExpenseFromEvent(n,e)]):(this.transactions.hasOwnProperty(n.roomId)||(this.transactions[n.roomId]=[]),this.transactions[n.roomId].push(this.getExpenseFromEvent(n,e)))):console.log("Found invalid transaction");break;case"m.room.create":Lx.log&&console.log("got an old room creation. room: "+n.name+" creator: "+e.getContent().creator+" date: "+e.getDate()),this.groupActivityObservable.next({groupId:n.roomId,creatorId:e.getContent().creator,creationDate:e.getDate()});break;case"m.room.member":{let t;"join"===e.getContent().membership&&(Lx.log&&console.log("got an old room membership change: "+e.getStateKey()+" joined the room "+n.name),t=!1),"leave"===e.getContent().membership&&(Lx.log&&console.log("got an old room membership change: "+e.getStateKey()+" left the room "+n.name),t=!0),this.groupMembershipObservable.next({groupId:n.roomId,userId:e.getStateKey(),date:e.getDate(),isLeave:t,name:n.getMember(e.getStateKey()).user.displayName});break}}if(s.liveEvent)switch(e.getType()){case"com.matrixpay.payback":this.checkProperties(e.getContent(),t.CHECK_TRANSACTION_PROPERTIES)?this.multipleNewTransactionsObservable.next([this.getPaybackFromEvent(n,e)]):console.log("Found invalid transaction");break;case"com.matrixpay.expense":console.log(e),this.checkProperties(e.getContent(),t.CHECK_TRANSACTION_PROPERTIES)?e.isRelation()?e.isRelation("m.replace")&&(Lx.log&&console.log("got editing of payback. name: "+e.getContent().name),this.modifiedTransactionsObservable.next(this.getExpenseFromEvent(n,e))):(Lx.log&&console.log("got expense. name: "+e.getContent().name),this.multipleNewTransactionsObservable.next([this.getExpenseFromEvent(n,e)])):console.log("Found invalid transaction");break;case"m.room.create":Lx.log&&console.log("got a room creation. room: "+n.name+" creator: "+e.getContent().creator+" date: "+e.getDate()),this.groupActivityObservable.next({groupId:n.roomId,creatorId:e.getContent().creator,creationDate:e.getDate()})}})}roomListener(){this.matrixClient.on("Room",t=>Sx(this,void 0,void 0,(function*(){console.log("--- new Room ---"),console.log(t.getLiveTimeline().getState(Nx.EventTimeline.FORWARDS));const e=t.getLiveTimeline().getState(Nx.EventTimeline.FORWARDS).getMember(this.matrixClient.getUserId());Lx.log&&console.log(e),Lx.log&&console.log(this.matrixClient.getUserId()),"join"===e.membership&&(console.log("triggered"),yield this.processNewRoom(t)),"invite"===e.membership&&(yield this.matrixClient.joinRoom(t.roomId))})))}membershipListener(){this.matrixClient.on("RoomMember.membership",(t,e,n)=>{const i=e.userId,r=e.roomId;if(console.log("membership changed from "+n+" to "+e.membership+". room:  "+r+" member: "+e.userId),i===this.matrixClient.getUserId())"invite"!==n&&"leave"!==n&&null!==n||"join"!==e.membership||this.groupMembershipObservable.next({groupId:r,isLeave:!1,userId:i,date:t.getDate(),name:e.name}),"join"===n&&"leave"===e.membership&&(Lx.log&&console.log("user left the room "+r+" date: "+t.getDate()),this.groupsObservable.next({groupId:r,isLeave:!0,currency:void 0,groupName:void 0,userNames:void 0,userIds:void 0}));else{let s;"invite"===e.membership||"join"===e.membership?(s=!1,Lx.log&&console.log("membership change: userId: "+i+"isLeave: "+s+" date: "+t.getDate())):"join"===n&&"leave"===e.membership&&(s=!0,Lx.log&&console.log("membership change: userId: "+i+"isLeave: "+s+" date: "+t.getDate())),this.groupMembershipObservable.next({groupId:r,isLeave:s,userId:i,date:t.getDate(),name:e.name})}})}timelineResetListener(){this.matrixClient.on("Room.timelineReset",(t,e,n)=>Sx(this,void 0,void 0,(function*(){console.log("LiveTimeline in room "+t.roomId+" has been reset. Events may have been missed."),yield this.paginateBackwards(t)})))}roomStateListener(){this.matrixClient.on("RoomState.events",(t,e,n)=>{console.log(t.getType())})}roomTypeListener(){this.roomTypeMatrixClient.on("RoomState.events",(t,e,n,i,r)=>Sx(this,void 0,void 0,(function*(){if("org.matrix.msc1840"===t.getType()){this.matrixClient.stopClient(),this.matrixClient.removeAllListeners(),console.log(e.roomId),this.filterDefinition.room.rooms.push(e.roomId);const t=this.hashObject(this.filterDefinition),n=Nx.Filter.fromJson(this.matrixClient.credentials.userId,t,this.filterDefinition);console.log(n.filterId),console.log(this.filterDefinition.room.rooms),this.matrixClient=yield this.clientService.getNewClient(),yield this.matrixClient.startClient({includeArchivedRooms:!1,filter:n}),this.accountDataListener(),this.timelineListener(),this.roomListener(),this.membershipListener(),this.timelineResetListener(),this.roomStateListener()}})))}hashObject(t){const e=JSON.stringify(t);console.log(e);let n=0,i=0;const r=e.length;for(;i<r;)n=(n<<5)-n+e.charCodeAt(i++)<<0;return n}getExpenseFromEvent(e,n){const i=n.getContent();return console.log("content"),console.log(i),{transactionType:t.TRANSACTION_TYPE_EXPENSE,transactionId:n.getId(),name:i.name,creationDate:n.getDate(),groupId:e.roomId,payerId:i.payer,recipientIds:i.recipients,recipientAmounts:i.amounts,senderId:n.getSender()}}getPaybackFromEvent(e,n){console.log("this is getPaybackFromEvent");const i=n.getContent();return{transactionType:t.TRANSACTION_TYPE_PAYBACK,transactionId:n.getId(),name:i.name,creationDate:n.getDate(),groupId:e.roomId,payerId:i.payer,recipientIds:i.recipients,recipientAmounts:i.amounts,senderId:n.getSender()}}checkProperties(t,e){for(const n of e)if(console.log(n),console.log(t.hasOwnProperty(n)),!t.hasOwnProperty(n))return!1;return!0}getUserObservable(){return this.userObservable}getGroupsObservable(){return this.groupsObservable}getBalancesObservable(){return this.balancesObservable}getRecommendationsObservable(){return this.recommendationsObservable}getSettingsCurrencyObservable(){return this.settingsCurrencyObservable}getGroupMembershipObservable(){return this.groupMembershipObservable}getModifiedTransactionObservable(){return this.modifiedTransactionsObservable}getMultipleNewTransactionsObservable(){return this.multipleNewTransactionsObservable}getNewTransactionObservable(){return this.newTransactionObservable}getSettingsLanguageObservable(){return this.settingsLanguageObservable}getGroupActivityObservable(){return this.groupActivityObservable}getLogoutObservable(){return this.logoutObservable}}return t.TRANSACTION_TYPE_PAYBACK="PAYBACK",t.TRANSACTION_TYPE_EXPENSE="EXPENSE",t.FILTER_ID="edu.kit.tm.dsn.psess2020.matrixpay-v",t.ROOM_TYPE_FILTER_ID="edu.kit.tm.dsn.psess2020.matrixpay-roomType",t.CHECK_TRANSACTION_PROPERTIES=["name","recipients","payer","amounts"],t.CHECK_CURRENCY_PROPERTIES=["currency"],t.CHECK_LANGUAGE_PROPERTIES=["language"],t.AUTODISCOVERY_SUCCESS="SUCCESS",t.\u0275fac=function(e){return new(e||t)(zt(Gx))},t.\u0275prov=lt({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();class Hx{constructor(t,e,n){this.transactionChangeEmitter=new E,this.activityChangeEmitter=new E,this.memberChangeEmitter=new E,this._groupId=t,this._name=e,this._currency=n,this._groupmembers=[],this._transactions=[],this._recommendations=[],this._activities=[]}getTransactionChangeEmitter(){return this.transactionChangeEmitter}getActivityChangeEmitter(){return this.activityChangeEmitter}getMemberChangeEmitter(){return this.memberChangeEmitter}get groupId(){return this._groupId}get name(){return this._name}set name(t){this._name=t}get currency(){return this._currency}set currency(t){this._currency=t}get groupmembers(){return this._groupmembers}get transactions(){return this._transactions}get recommendations(){return this._recommendations}get activities(){return this._activities}addGroupmember(t){this._groupmembers.push(t),this.memberChangeEmitter.next()}removeGroupmember(t){this._groupmembers.forEach((e,n)=>{e.contact.contactId===t&&this._groupmembers.splice(n,1)}),this.memberChangeEmitter.next()}addTransaction(t){this._transactions.push(t),this.transactionChangeEmitter.next()}editTransaction(t,e,n,i){const r=this.getTransaction(t);null!=r&&(r.name=e,r.payer=n,r.recipients=i),this.transactionChangeEmitter.next()}getTransaction(t){for(const e of this._transactions)if(e.transactionId===t)return e;return null}getGroupmember(t){for(const e of this._groupmembers)if(e.contact.contactId===t)return e;return null}setRecommendations(t){this._recommendations=t}deleteRecommendation(t,e){this._recommendations.forEach((n,i)=>{n.payer.contact.contactId===t&&n.recipient.contact.contactId===e&&this._recommendations.splice(i,1)})}addActivity(t){this._activities.push(t),this._activities=this._activities.sort(this.compare),console.log(this._activities[0].creationDate),this.activityChangeEmitter.next()}compare(t,e){const n=t.creationDate,i=e.creationDate;let r=0;return n>i?r=1:n<i&&(r=-1),r}}let zx=(()=>{class t{constructor(e,n,i){this.groupChangeEmitter=new E,this._contact=e,this._currency=n,this._language=i,this._groups=[],t._singleUser=this}getGroupChangeEmitter(){return this.groupChangeEmitter}static get singleUser(){return this._singleUser}get contact(){return this._contact}set contact(t){this._contact=t}get currency(){return this._currency}set currency(t){this._currency=t}get language(){return this._language}set language(t){this._language=t}get groups(){return this._groups}getGroup(t){for(const e of this.groups)if(e.groupId===t)return e;return null}createGroup(t,e,n){const i=new Hx(t,e,n);return this._groups.push(i),this.groupChangeEmitter.next(),i}removeGroup(t){this._groups.forEach((e,n)=>{e.groupId===t&&this._groups.splice(n,1)})}resetUserData(){this._groups=[],this._contact.contactId="",this._contact.name="",this._currency=Ex.EUR,this._language=Tx.ENGLISH}}return t._singleUser=null,t})();class Wx{constructor(){this._responses=[]}get responses(){return this._responses}newResponse(t){this.responses.push(t)}}class Yx{constructor(t,e,n){this._group=t,this._payer=e,this._recipient=n}get group(){return this._group}get payer(){return this._payer}get recipient(){return this._recipient}}class Xx{constructor(t){this.contactIds=[],this.amounts=[];for(const e of t)this.contactIds.push(e.contact.contactId),this.amounts.push(e.balance)}getUsers(){return this.contactIds}getBalanceForUser(t){return this.amounts[t]}getBalances(){return this.amounts}}let Qx=(()=>{class t{constructor(){}calculateBalances(t,e){for(const n of e){let e=n.payer.contact.contactId,i=n.payer.amount;for(const r of t)if(r.contact.contactId===e&&r.group.groupId===n.group.groupId){r.balance+=i;break}for(const r of n.recipients){e=r.contact.contactId,i=r.amount;for(const r of t)if(r.contact.contactId===e&&r.group.groupId===n.group.groupId){r.balance-=i;break}}}return new Xx(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=lt({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();class Zx{constructor(t,e,n){this.payerIds=t,this.recipientIds=e,this.amounts=n}getPayerIds(){return this.payerIds}getRecipientIds(){return this.recipientIds}getAmounts(){return this.amounts}}let Jx=(()=>{class t{constructor(){}static getMinIndex(t){let e=0;for(let n=1;n<t.length;n++)t[n]<t[e]&&(e=n);return e}static getMaxIndex(t){let e=0;for(let n=1;n<t.length;n++)t[n]>t[e]&&(e=n);return e}calculateOptimisation(e){const n=[],i=[],r=[];for(;;){const s=e.getBalances(),o=e.getUsers(),a=t.getMaxIndex(s),c=t.getMinIndex(s);if(0===s[c]||0===s[a])break;const l=Math.min(-s[c],s[a]);s[a]-=l,s[c]+=l,n.push(o[c]),i.push(o[a]),r.push(l)}return new Zx(n,i,r)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=lt({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),tT=(()=>{class t{constructor(t,e){this.balanceCalculator=t,this.greedyOptimisation=e,this._userExists=!1,this.balanceChangeEmitter=new E,this.emitter=new E,this.navItem$=this.emitter.asObservable();const n=new xx("","");new zx(n,Ex.EUR,Tx.ENGLISH),this.status=new Wx,this._userExists=!0}getBalanceEmitter(){return this.balanceChangeEmitter}get userExists(){return this._userExists}get user(){return zx.singleUser}notifyViewModelWhenReady(){this.emitter.next(!0)}getUser(){return this.user}fillInUserData(t,e,n,i){const r=new xx(t,e);return this.user.contact=r,this.user.currency=n,this.user.language=i,this.notifyViewModelWhenReady(),this.user}initializeUserFirstTime(t,e){const n=new xx(t,e),i=new zx(n,Ex.EUR,Tx.GERMAN);return this.status=new Wx,i}getTransactions(t){return this.getGroup(t).transactions}getTransaction(t,e){return this.getGroup(t).getTransaction(e)}getGroups(){return this.user.groups}getGroup(t){return this.user.getGroup(t)}getStatus(){return this.status}calculateBalances(t,e,n){return Sx(this,void 0,void 0,(function*(){Date.now();const n=this.getGroup(t),i=this.balanceCalculator.calculateBalances(n.groupmembers,e),r=this.greedyOptimisation.calculateOptimisation(i),s=[];for(let t=0;t<r.getPayerIds().length;t++){const e=new Ax(n.getGroupmember(r.getPayerIds()[t]).contact,r.getAmounts()[t]),i=new Ax(n.getGroupmember(r.getRecipientIds()[t]).contact,r.getAmounts()[t]),o=new Yx(n,e,i);s.push(o)}n.setRecommendations(s),this.balanceChangeEmitter.next()}))}}return t.\u0275fac=function(e){return new(e||t)(zt(Qx),zt(Jx))},t.\u0275prov=lt({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),eT=(()=>{class t{constructor(t,e){this.dataModel=e,this.observables=t,this.createUser(),this.addGroup(),this.addGroupActivity(),this.updateDefaultCurrency(),this.updateDefaultLanguage(),this.addGroupMember(),this.updateNewGroupTransactions(),this.logout()}createUser(){this.observables.getUserObservable().subscribe(t=>{console.log("updateService: createUser: user filled in: "+t.contactId+" , "+t.name),this.dataModel.fillInUserData(t.contactId,t.name,this.currencyStringToEnum(t.currency),this.languageStringToEnum(t.language))})}addGroup(){return Sx(this,void 0,void 0,(function*(){this.observables.getGroupsObservable().subscribe(t=>{if(this.dataModel.userExists)if(null===this.dataModel.getGroup(t.groupId))if(t.isLeave)this.dataModel.user.removeGroup(t.groupId),console.log("updateService: addGroup: Group deleted: "+t.groupId+" , "+t.groupName);else{this.dataModel.getUser().createGroup(t.groupId,t.groupName,this.currencyStringToEnum(t.currency)),console.log("updateService: addGroup: group created: "+t.groupId+" , "+t.groupName);const e=Mx.groupCreationTime;e>0&&console.log("updateService: addGroup: time taken for group: "+t.groupName+": "+(Date.now()-e));const n=this.dataModel.getGroup(t.groupId);for(let i=0;i<t.userIds.length;i++)null===n.getGroupmember(t.userIds[i])?(n.addGroupmember(new Ix(new xx(t.userIds[i],t.userNames[i]),n)),console.log("updateService: addGroup: member created: "+t.userIds[i]+" , "+t.userNames[i]),this.dataModel.getBalanceEmitter().next()):""===n.getGroupmember(t.userIds[i]).contact.name&&(n.getGroupmember(t.userIds[i]).contact.name=t.userNames[i],console.log("updateService: addGroup: member filled in: "+t.userIds[i]+" , "+t.userNames[i]),this.dataModel.getBalanceEmitter().next())}else if(t.isLeave)this.dataModel.user.removeGroup(t.groupId),console.log("updateService: addGroup: Group deleted: "+t.groupId+" , "+t.groupName);else{const e=this.dataModel.getGroup(t.groupId);e.name=t.groupName,e.currency=this.currencyStringToEnum(t.currency),this.dataModel.getUser().getGroupChangeEmitter().next(),console.log("updateService: addGroup: group filled in: "+t.groupId+" , "+t.groupName);const n=Mx.groupCreationTime;n>0&&console.log("updateService: addGroup: time taken for group: "+t.groupName+": "+(Date.now()-n))}else console.log("updateService: addGroup: user wasnt ready yet. this should never happen.")})}))}addGroupActivity(){return Sx(this,void 0,void 0,(function*(){this.observables.getGroupActivityObservable().subscribe(e=>{let n=this.dataModel.getGroup(e.groupId);null===n&&(n=this.dataModel.user.createGroup(e.groupId,t.EMPTY_GROUP_NAME,Ex.EUR),console.log("updateService: addGroupActivity: added empty group: "+e.groupId+" , "+n.name));let i=!1;for(const t of n.activities)if(t.activityType===Px.GROUPCREATION){i=!0;break}if(!i){let t=n.getGroupmember(e.creatorId);null===t&&(t=new Ix(new xx(e.creatorId,""),n),n.addGroupmember(t));const i=new Dx(Px.GROUPCREATION,n,t.contact,e.creationDate);n.addActivity(i),console.log("updateService: addGroupActivity: "+e.groupId+" , "+n.name)}})}))}updateDefaultCurrency(){return Sx(this,void 0,void 0,(function*(){this.observables.getSettingsCurrencyObservable().subscribe(t=>{this.dataModel.getUser().currency=this.currencyStringToEnum(t.currency),console.log("updateService: updateDefaultCurrency: "+t.currency)})}))}updateDefaultLanguage(){return Sx(this,void 0,void 0,(function*(){this.observables.getSettingsLanguageObservable().subscribe(t=>{this.dataModel.getUser().language=this.languageStringToEnum(t.language),console.log("updateService: updateDefaultLanguage: "+t.language)})}))}addGroupMember(){return Sx(this,void 0,void 0,(function*(){this.observables.getGroupMembershipObservable().subscribe(t=>{let e=this.dataModel.getGroup(t.groupId);null===e&&(e=this.dataModel.user.createGroup(t.groupId,"",Ex.EUR),console.log("updateService: addGroupMember: created empty group: "+t.groupId+" , "+e.name));let n=e.getGroupmember(t.userId);if(t.isLeave)e.getGroupmember(t.userId).active=!1,console.log("updateService: addGroupMember: set member to inactive: "+t.userId+" , "+t.name),this.dataModel.getBalanceEmitter().next();else if(null===n){n=new Ix(new xx(t.userId,t.name),e),e.addGroupmember(n);const i=new Dx(Px.NEWCONTACTINGROUP,e,n.contact,t.date);e.addActivity(i),console.log("updateService: addGroupMember: created member: "+t.userId+" , "+t.name),this.dataModel.getBalanceEmitter().next()}else if(""===n.contact.name){n.contact.name=t.name;const i=new Dx(Px.NEWCONTACTINGROUP,e,n.contact,t.date);e.addActivity(i),console.log("updateService: addGroupMember: filled in member: "+t.userId+" , "+t.name),this.dataModel.getBalanceEmitter().next()}})}))}updateSingleTransaction(t){let e,n=this.dataModel.getGroup(t.groupId);null===n&&(n=this.dataModel.user.createGroup(t.groupId,"",Ex.EUR),console.log("updateService: updateSingleTransaction: crated empty group: "+t.groupId)),null===n.getGroupmember(t.payerId)?(e=new xx(t.payerId,""),n.addGroupmember(new Ix(e,n)),console.log("updateService: updateSingleTransaction: crated empty payer: "+t.payerId)):e=n.getGroupmember(t.payerId).contact;let i=0;for(const u of t.recipientAmounts)i+=u;const r=new Ax(e,i),s=[];for(let u=0;u<t.recipientIds.length;u++){let e;null===n.getGroupmember(t.recipientIds[u])?(e=new xx(t.recipientIds[u],""),n.addGroupmember(new Ix(e,n)),console.log("updateService: updateSingleTransaction: crated empty recipient: "+t.recipientIds[u])):e=n.getGroupmember(t.recipientIds[u]).contact,s.push(new Ax(e,t.recipientAmounts[u]))}let o;null===n.getGroupmember(t.senderId)?(o=new Ix(new xx(t.senderId,""),n),n.addGroupmember(o),console.log("updateService: updateSingleTransaction: crated empty sender: "+t.senderId)):o=n.getGroupmember(t.senderId);const a=new Rx(this.transactionStringToEnum(t.transactionType),t.transactionId,t.name,t.creationDate,n,r,s,o);let c;n.addTransaction(a),a.transactionType===Ox.EXPENSE&&(c=new Dx(Px.NEWEXPENSE,a,o.contact,t.creationDate),console.log("updateService: updateSingleTransaction: crated expense: "+t.transactionId+" + "+t.name)),a.transactionType===Ox.PAYBACK&&(c=new Dx(Px.NEWPAYBACK,a,o.contact,t.creationDate),console.log("updateService: updateSingleTransaction: crated payback: "+t.transactionId+" + "+t.name)),n.addActivity(c);const l=Mx.getTransactionTimeByID(t.groupId+t.name);return l>0&&console.log("updateService: updateSingleTransaction: Time Taken for Transaction "+t.transactionId+" + "+t.name+": "+(Date.now()-l)),a}updateNewGroupTransactions(){return Sx(this,void 0,void 0,(function*(){this.observables.getMultipleNewTransactionsObservable().subscribe(t=>{const e=[];for(const n of t)if(null===this.dataModel.getGroup(n.groupId)||null===this.dataModel.getGroup(n.groupId).getTransaction(n.transactionId)){const t=this.updateSingleTransaction(n);e.push(t)}this.dataModel.calculateBalances(t[0].groupId,e,t[t.length-1].groupId),console.log("updateService: updateNewGroupTransactions: calculated Balances: "+t[0].groupId)})}))}logout(){this.observables.getLogoutObservable().subscribe(()=>{this.dataModel.getUser().resetUserData()})}currencyStringToEnum(t){let e=Ex.EUR;switch(t){case Cx[0]:e=Ex.EUR;break;case Cx[1]:e=Ex.USD}return e}languageStringToEnum(t){let e=Tx.ENGLISH;switch(t){case"GERMAN":e=Tx.GERMAN;break;case"ENGLISH":e=Tx.ENGLISH}return e}transactionStringToEnum(t){let e=Ox.EXPENSE;switch(t){case"EXPENSE":e=Ox.EXPENSE;break;case"PAYBACK":e=Ox.PAYBACK}return e}}return t.EMPTY_GROUP_NAME="Empty Group",t.\u0275fac=function(e){return new(e||t)(zt($x),zt(tT))},t.\u0275prov=lt({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();class nT{constructor(t){this.total=t}call(t,e){return e.subscribe(new iT(t,this.total))}}class iT extends m{constructor(t,e){super(t),this.total=e,this.count=0}_next(t){++this.count>this.total&&this.destination.next(t)}}let rT=(()=>{class t{}return t.\u0275mod=ge({type:t}),t.\u0275inj=ut({factory:function(e){return new(e||t)}}),t})();const sT=new Set;let oT,aT=(()=>{class t{constructor(t){this._platform=t,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):cT}matchMedia(t){return this._platform.WEBKIT&&function(t){if(!sT.has(t))try{oT||(oT=document.createElement("style"),oT.setAttribute("type","text/css"),document.head.appendChild(oT)),oT.sheet&&(oT.sheet.insertRule(`@media ${t} {.fx-query-test{ }}`,0),sT.add(t))}catch(e){console.error(e)}}(t),this._matchMedia(t)}}return t.\u0275fac=function(e){return new(e||t)(zt(Gh))},t.\u0275prov=lt({factory:function(){return new t(zt(Gh))},token:t,providedIn:"root"}),t})();function cT(t){return{matches:"all"===t||""===t,media:t,addListener:()=>{},removeListener:()=>{}}}let lT=(()=>{class t{constructor(t,e){this._mediaMatcher=t,this._zone=e,this._queries=new Map,this._destroySubject=new E}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(t){return uT(xh(t)).some(t=>this._registerQuery(t).mql.matches)}observe(t){let e=bE(uT(xh(t)).map(t=>this._registerQuery(t).observable));return e=Bd(e.pipe(dd(1)),e.pipe(t=>t.lift(new nT(1)),Mh(0))),e.pipe(N(t=>{const e={matches:!1,breakpoints:{}};return t.forEach(t=>{e.matches=e.matches||t.matches,e.breakpoints[t.query]=t.matches}),e}))}_registerQuery(t){if(this._queries.has(t))return this._queries.get(t);const e=this._mediaMatcher.matchMedia(t),n={observable:new y(t=>{const n=e=>this._zone.run(()=>t.next(e));return e.addListener(n),()=>{e.removeListener(n)}}).pipe(jd(e),N(e=>({query:t,matches:e.matches})),Hf(this._destroySubject)),mql:e};return this._queries.set(t,n),n}}return t.\u0275fac=function(e){return new(e||t)(zt(aT),zt(Rl))},t.\u0275prov=lt({factory:function(){return new t(zt(aT),zt(Rl))},token:t,providedIn:"root"}),t})();function uT(t){return t.map(t=>t.split(",")).reduce((t,e)=>t.concat(e)).map(t=>t.trim())}const hT="(max-width: 599.99px) and (orientation: portrait), (max-width: 959.99px) and (orientation: landscape)";function dT(t,e){const n=new Promise((e,n)=>{const i=setTimeout(()=>{clearTimeout(i),n("Timed out in "+t+"ms.")},t)});return Promise.race([e,n])}let pT=(()=>{class t{constructor(t,e){this.dialogRef=t,this.data=e}onCancel(){this.dialogRef.close()}}return t.\u0275fac=function(e){return new(e||t)(Ao(qw),Ao($w))},t.\u0275cmp=de({type:t,selectors:[["app-error-modal"]],decls:7,vars:1,consts:[["mat-dialog-content",""],["mat-raised-button","",1,"button",3,"click"]],template:function(t,e){1&t&&(No(0,"h1"),ya(1,"Error"),Lo(),No(2,"div",0),No(3,"mat-label"),ya(4),Lo(),No(5,"button",1),qo("click",(function(){return e.onCancel()})),ya(6,"Ok"),Lo(),Lo()),2&t&&(kr(4),va(e.data.errorMessage))},directives:[Xw,vg,dv],styles:[".button[_ngcontent-%COMP%]{margin-bottom:10px}"]}),t})(),mT=(()=>{class t{constructor(){}openErrorModal(t,e){e.open(pT,{width:"300px",data:{errorMessage:t}})}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=lt({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function fT(t,e){if(1&t){const t=jo();No(0,"button",10),qo("click",(function(){return nn(t),Wo(),Oo(2).toggle()})),No(1,"mat-icon",11),ya(2,"menu"),Lo(),Lo()}}let gT=(()=>{class t{constructor(t,e,n,i,r){this.breakpointObserver=t,this.matrixClientService=e,this.dialog=n,this.dialogProviderService=i,this.dataModelService=r,this.loggedOut=new jc,this.loadingLogout=!1,this.userContact=new xx("",""),this.isHandset$=this.breakpointObserver.observe(hT).pipe(N(t=>t.matches),Iv())}ngOnInit(){this.userContact=this.dataModelService.getUser().contact}logout(){this.loadingLogout=!0,dT(1e5,this.matrixClientService.logout()).then(t=>{t.wasSuccessful()?this.loggedOut.emit(!1):this.dialogProviderService.openErrorModal("error logout 1: "+t.getMessage(),this.dialog),this.loadingLogout=!1},t=>{this.dialogProviderService.openErrorModal("error logout 2: "+t,this.dialog),this.loadingLogout=!1})}}return t.\u0275fac=function(e){return new(e||t)(Ao(lT),Ao(Gx),Ao(Yw),Ao(mT),Ao(tT))},t.\u0275cmp=de({type:t,selectors:[["app-navigation-menu"]],outputs:{loggedOut:"loggedOut"},decls:26,vars:13,consts:[[1,"sidenav-container"],["fixedInViewport","",1,"sidenav",3,"mode","opened"],["drawer",""],["mat-list-item","","routerLink","/home"],["mat-list-item","","routerLink","/groups"],["mat-list-item","","routerLink","/settings"],["color","primary"],["type","button","aria-label","Toggle sidenav","mat-icon-button","",3,"click",4,"ngIf"],[1,"userName"],["mat-raised-button","",1,"logout",3,"click"],["type","button","aria-label","Toggle sidenav","mat-icon-button","",3,"click"],["aria-label","Side nav toggle icon"]],template:function(t,e){1&t&&(No(0,"mat-sidenav-container",0),No(1,"mat-sidenav",1,2),Uc(3,"async"),Uc(4,"async"),Uc(5,"async"),No(6,"mat-toolbar"),ya(7,"Menu"),Lo(),No(8,"mat-nav-list"),No(9,"a",3),ya(10,"Home"),Lo(),No(11,"a",4),ya(12,"Groups"),Lo(),No(13,"a",5),ya(14,"Settings"),Lo(),Lo(),Lo(),No(15,"mat-sidenav-content"),No(16,"mat-toolbar",6),Ro(17,fT,3,0,"button",7),Uc(18,"async"),No(19,"span"),ya(20,"Matrix Pay"),Lo(),No(21,"mat-label",8),ya(22),Lo(),No(23,"button",9),qo("click",(function(){return e.logout()})),ya(24,"Logout"),Lo(),Lo(),Fo(25,"router-outlet"),Lo(),Lo()),2&t&&(kr(1),Po("mode",Bc(4,7,e.isHandset$)?"over":"side")("opened",!1===Bc(5,9,e.isHandset$)),To("role",Bc(3,5,e.isHandset$)?"dialog":"navigation"),kr(16),Po("ngIf",Bc(18,11,e.isHandset$)),kr(5),va(e.userContact.name))},directives:[CS,ES,rS,BS,GS,ex,SS,Au,vg,dv,ix,ev],pipes:[Gu],styles:[".sidenav-container[_ngcontent-%COMP%]{height:100%}.sidenav[_ngcontent-%COMP%]{width:200px}.sidenav[_ngcontent-%COMP%]   .mat-toolbar[_ngcontent-%COMP%]{background:inherit}.mat-toolbar.mat-primary[_ngcontent-%COMP%]{position:-webkit-sticky;position:sticky;top:0;z-index:1;height:11vh}.logout[_ngcontent-%COMP%]{top:30px}.logout[_ngcontent-%COMP%], .userName[_ngcontent-%COMP%]{position:absolute;right:10px}.userName[_ngcontent-%COMP%]{top:2px;font-size:small}@media only screen and (min-width:1200px){.userName[_ngcontent-%COMP%]{position:relative;margin-left:20px;font-size:small}.logout[_ngcontent-%COMP%]{position:absolute;right:10px;top:auto}}"]}),t})(),_T=(()=>{class t{constructor(t){this.matrixClientService=t}createTransaction(e,n,i,r,s,o){return Sx(this,void 0,void 0,(function*(){return this.sendTransaction(e,o?t.MESSAGE_TYPE_PAYBACK:t.MESSAGE_TYPE_EXPENSE,{name:n,payer:i,recipients:r,amounts:s})}))}modifyTransaction(t,e,n,i,r,s){return Sx(this,void 0,void 0,(function*(){const o=this.matrixClientService.getClient();let a;try{a=yield o.fetchRoomEvent(t,e)}catch(d){return new Ux(Kx.NoOriginal,d)}let c=n,l=i,u=r,h=s;return void 0===c&&(c=a.content.name),void 0===l&&(l=a.content.payer),void 0===u&&(u=a.content.recipients),void 0===h&&(h=a.content.amounts),this.sendTransaction(t,a.type,{new_content:{name:c,payer:l,recipients:u,amounts:h},relates_to:{rel_type:"replace",event_id:e}})}))}sendTransaction(t,e,n){return Sx(this,void 0,void 0,(function*(){const i=this.matrixClientService.getClient();let r;try{r=(yield i.sendEvent(t,e,n,"")).event_id}catch(s){return new Ux(Kx.SendEvent,s)}return new Bx(r)}))}}return t.MESSAGE_TYPE_EXPENSE="com.matrixpay.expense",t.MESSAGE_TYPE_PAYBACK="com.matrixpay.payback",t.\u0275fac=function(e){return new(e||t)(zt(Gx))},t.\u0275prov=lt({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),yT=(()=>{class t{constructor(t,e){this.transactionService=t,this.matrixClientService=e}addMember(e,n){return Sx(this,void 0,void 0,(function*(){if(!this.matrixClientService.isPrepared())throw new Error("Client is not prepared");const i=this.matrixClientService.getClient();try{yield i.invite(e,n)}catch(r){switch(r.data.errcode){case t.ERRCODE_UNKNOWN:case t.ERRCODE_UNRECOGNIZED:throw new Error("GroupId invalid");case t.ERRCODE_INVALID_PARAM:throw new Error("UserId invalid");default:throw new Error("unknown error")}}return new Bx}))}confirmRecommendation(e,n){return Sx(this,void 0,void 0,(function*(){if(!this.matrixClientService.isPrepared())throw new Error("Client is not prepared");const i=this.matrixClientService.getClient(),r=i.getRoom(e);if(null===r)throw new Error("room not found");const s=r[t.ACCOUNT_DATA_KEY][t.RECOMMENDATIONS_KEY];if(void 0===s)throw new Error("no recommendations have been saved yet");const o=s.getOriginalContent();if(!Number.isInteger(n)||n<0||n>=o.amounts.length)throw new Error("invalid recommendation id");const a=o.amounts,c=o.payers,l=o.recipients,u=a[n],h=c[n],d=l[n];if(h!==(yield i.getUserId()))throw new Error("user must be payer of the recommendation");const p="Payback from "+h+" to "+d+" for "+u,m=yield this.createTransaction(e,p,h,[d],[u],!0);if(!m.wasSuccessful())return m;const f=m.getValue();return a.splice(n,1),c.splice(n,1),l.splice(n,1),yield this.matrixEmergentDataService.setRecommendations(e,a,c,l,f),new Bx(f)}))}createGroup(e,n,i,r){return Sx(this,void 0,void 0,(function*(){const s=this.matrixClientService.getClient();void 0!==i&&(i.includes(" ")||i.includes(":"))&&(i=void 0);const o={room_alias_name:i,visibility:t.ROOM_VISIBILITY,invite:[],name:e,topic:r};let a;try{a=yield s.createRoom(o)}catch(l){let e=Kx.Unknown;const n=l.data.error;switch(l.data.errcode){case t.ERRCODE_UNKNOWN:e=Kx.InvalidName;break;case t.ERRCODE_INUSE:e=Kx.InUse}return new Ux(e,n)}const c=a.room_id;try{yield s.sendStateEvent(c,t.CURRENCY_KEY,{currency:n},"")}catch(u){return new Ux(Kx.SetCurrency,u)}try{yield s.sendStateEvent(c,t.ROOM_TYPE_KEY,{[t.ROOM_TYPE_CONTENT_KEY]:t.ROOM_TYPE_CONTENT_VALUE},"")}catch(u){return new Ux(Kx.SetCurrency,u)}return new Bx(c)}))}createTransaction(t,e,n,i,r,s){return Sx(this,void 0,void 0,(function*(){return this.transactionService.createTransaction(t,e,n,i,r,s)}))}fetchHistory(e){return Sx(this,void 0,void 0,(function*(){if(!this.matrixClientService.isPrepared())throw new Error("Client is not prepared");const n=this.matrixClientService.getClient(),i=yield n.getRoom(e);return yield n.scrollback(i,t.SCROLLBACK_LIMIT),new Bx}))}leaveGroup(e){return Sx(this,void 0,void 0,(function*(){if(!this.matrixClientService.isPrepared())throw new Error("Client is not prepared");const n=this.matrixClientService.getClient();if(void 0===n.getRoom(e))return new Ux(Kx.RoomNotFound);try{yield n.leave(e)}catch(i){let e=Kx.Unknown;const n=i.data.error;switch(i.data.errcode){case t.ERRCODE_UNKNOWN:e=Kx.RoomNotFound}return new Ux(e,n)}return new Bx}))}modifyTransaction(t,e,n,i,r,s){return Sx(this,void 0,void 0,(function*(){return this.transactionService.modifyTransaction(t,e,n,i,r,s)}))}}return t.ROOM_TYPE_CONTENT_KEY="room_type",t.ROOM_TYPE_CONTENT_VALUE="MatrixPay",t.ROOM_VISIBILITY="private",t.ERRCODE_UNKNOWN="M_UNKNOWN",t.ERRCODE_INUSE="M_ROOM_IN_USE",t.ERRCODE_UNRECOGNIZED="M_UNRECOGNIZED",t.ERRCODE_INVALID_PARAM="M_INVALID_PARAM",t.CURRENCY_KEY="com.matrixpay.currency",t.TYPE_KEY="org.matrix.msc1840",t.MATRIX_PAY_TYPE="MatrixPay",t.RECOMMENDATIONS_KEY="recommendations",t.ACCOUNT_DATA_KEY="accountData",t.SCROLLBACK_LIMIT=30,t.ROOM_TYPE_KEY="org.matrix.msc1840",t.\u0275fac=function(e){return new(e||t)(zt(_T),zt(Gx))},t.\u0275prov=lt({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),vT=(()=>{class t{constructor(t){this.matrixClientService=t}changeCurrency(e){return Sx(this,void 0,void 0,(function*(){if(!this.matrixClientService.isPrepared())throw new Error("Client is not prepared");const n=this.matrixClientService.getClient();try{yield n.setAccountData(t.CURRENCY_CONTENT_KEY,{currency:e})}catch(i){return new Ux(Vx.Setter,i)}return new Bx}))}changeLanguage(e){return Sx(this,void 0,void 0,(function*(){if(!this.matrixClientService.isPrepared())throw new Error("Client is not prepared");const n=this.matrixClientService.getClient();try{yield n.setAccountData(t.LANGUAGE_CONTENT_KEY,{language:e})}catch(i){return new Ux(Vx.Setter,i)}return new Bx}))}}return t.CURRENCY_CONTENT_KEY="com.matrixpay.currency",t.LANGUAGE_CONTENT_KEY="com.matrixpay.language",t.\u0275fac=function(e){return new(e||t)(zt(Gx))},t.\u0275prov=lt({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),bT=(()=>{class t{constructor(t,e){this.groupService=t,this.settingsService=e}confirmPayback(t,e){return this.groupService.confirmRecommendation(t,e)}createTransaction(t,e,n,i,r,s){return this.groupService.createTransaction(t,e,n,i,r,s)}fetchHistory(t){return this.groupService.fetchHistory(t)}groupAddMember(t,e){return this.groupService.addMember(t,e)}groupCreate(t,e){return this.groupService.createGroup(t,e)}leaveGroup(t){return this.groupService.leaveGroup(t)}modifyTransaction(t,e,n,i,r,s){return this.groupService.modifyTransaction(t,e,n,i,r,s)}userChangeDefaultCurrency(t){return this.settingsService.changeCurrency(t)}userChangeLanguage(t){return this.settingsService.changeLanguage(t)}}return t.\u0275fac=function(e){return new(e||t)(zt(yT),zt(vT))},t.\u0275prov=lt({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function wT(t,e){if(1&t&&(No(0,"mat-error"),ya(1),Lo()),2&t){const t=Wo(2);kr(1),va(t.getMatrixUrlErrorMessage())}}function ST(t,e){if(1&t&&(No(0,"mat-error"),ya(1),Lo()),2&t){const t=Wo(2);kr(1),va(t.getPasswordErrorMessage())}}function ET(t,e){1&t&&Fo(0,"mat-spinner",12),2&t&&Po("diameter",30)}function kT(t,e){if(1&t){const t=jo();No(0,"mat-card",3),No(1,"div",4),No(2,"mat-label"),ya(3,"Matrix Pay"),Lo(),Lo(),No(4,"div",5),No(5,"mat-form-field",6),No(6,"mat-label"),ya(7,"Matrix ID"),Lo(),Fo(8,"input",7),Ro(9,wT,2,1,"mat-error",2),Lo(),Lo(),No(10,"div",5),No(11,"mat-form-field",6),No(12,"mat-label"),ya(13,"Enter your password"),Lo(),No(14,"input",8),qo("keyup.enter",(function(){return nn(t),Wo().login()})),Lo(),Ro(15,ST,2,1,"mat-error",2),No(16,"button",9),qo("click",(function(){nn(t);const e=Wo();return e.hidePassword=!e.hidePassword})),No(17,"mat-icon"),ya(18),Lo(),Lo(),Lo(),Lo(),No(19,"div",5),No(20,"button",10),qo("click",(function(){return nn(t),Wo().login()})),ya(21,"Login"),Lo(),Ro(22,ET,1,1,"mat-spinner",11),Lo(),Lo()}if(2&t){const t=Wo();kr(8),Po("formControl",t.matrixUrlControl),kr(1),Po("ngIf",t.matrixUrlControl.invalid),kr(5),Po("type",t.hidePassword?"password":"text")("formControl",t.passwordControl),kr(1),Po("ngIf",t.passwordControl.invalid),kr(1),To("aria-label","Hide password")("aria-pressed",t.hidePassword),kr(2),va(t.hidePassword?"visibility_off":"visibility"),kr(2),Po("disabled",t.passwordControl.invalid||t.matrixUrlControl.invalid||t.loadingLogIn),kr(2),Po("ngIf",t.loadingLogIn)}}function CT(t,e){1&t&&(No(0,"div"),Fo(1,"mat-spinner",13),Lo()),2&t&&(kr(1),Po("diameter",50))}let xT=(()=>{class t{constructor(t,e,n,i,r){this.clientService=t,this.basicDataService=e,this.dataModelService=n,this.dialogProviderService=i,this.dialog=r,this.loggedIn=new jc,this.hidePassword=!0,this.loadingLogIn=!1,this.autoLogin=!1,this.matrixUrlControl=new q_("",[s_.required,s_.pattern("@[_a-z0-9-]+:[a-z0-9.-]+")]),this.passwordControl=new q_("",[s_.required])}ngOnInit(){this.subscription=this.dataModelService.navItem$.subscribe(t=>{t&&(this.loggedIn.emit(!0),this.loadingLogIn=!1)});const t=localStorage.getItem("account"),e=localStorage.getItem("accessToken");null!==t&&null!==e&&(this.autoLogin=!0,dT(1e5,this.clientService.login(t,void 0,e)).then(t=>{t.wasSuccessful()||(this.clientService.logout().then(()=>{this.autoLogin=!1},t=>{this.autoLogin=!1}),this.dialogProviderService.openErrorModal("error login 1: "+t.getMessage(),this.dialog))},t=>{this.clientService.logout().then(()=>{this.autoLogin=!1},t=>{this.autoLogin=!1}),this.dialogProviderService.openErrorModal("error login 2: "+t,this.dialog)}))}ngOnDestroy(){void 0!==this.subscription&&this.subscription.unsubscribe()}login(){this.loadingLogIn||this.passwordControl.invalid||this.matrixUrlControl.invalid||(this.loadingLogIn=!0,this.matrixUrlControl.markAllAsTouched(),this.passwordControl.markAllAsTouched(),this.matrixUrlControl.invalid||this.passwordControl.invalid||dT(1e5,this.clientService.login(this.matrixUrlControl.value,this.passwordControl.value)).then(t=>{t.wasSuccessful()||(this.clientService.logout().then(()=>{this.loadingLogIn=!1},t=>{this.loadingLogIn=!1}),this.dialogProviderService.openErrorModal("error login 1: "+t.getMessage(),this.dialog))},t=>{this.clientService.logout().then(()=>{this.loadingLogIn=!1},t=>{this.loadingLogIn=!1}),this.dialogProviderService.openErrorModal("error login 2: "+t,this.dialog)}))}getPasswordErrorMessage(){return"Please enter a password"}getMatrixUrlErrorMessage(){return this.matrixUrlControl.hasError("required")?"Please enter a matrixUrl":"Please enter a valid matrixUrl"}}return t.\u0275fac=function(e){return new(e||t)(Ao(Gx),Ao(bT),Ao(tT),Ao(mT),Ao(Yw))},t.\u0275cmp=de({type:t,selectors:[["app-login"]],outputs:{loggedIn:"loggedIn"},decls:3,vars:2,consts:[[1,"baseDiv"],["class","center",4,"ngIf"],[4,"ngIf"],[1,"center"],[1,"centerText"],[1,"row"],["appearance","fill",1,"full-width"],["matInput","","type","text","autocomplete","username","placeholder","@uxxxx:example.com",3,"formControl"],["matInput","","autocomplete","current-password","placeholder","password",3,"type","formControl","keyup.enter"],["mat-icon-button","","matSuffix","",3,"click"],["mat-raised-button","","color","primary",1,"row",3,"disabled","click"],[3,"diameter",4,"ngIf"],[3,"diameter"],[1,"centerspinner",3,"diameter"]],template:function(t,e){1&t&&(No(0,"div",0),Ro(1,kT,23,10,"mat-card",1),Ro(2,CT,2,1,"div",2),Lo()),2&t&&(kr(1),Po("ngIf",!e.autoLogin),kr(1),Po("ngIf",e.autoLogin))},directives:[Au,sv,vg,Rg,_y,zg,Jg,sy,dv,Eg,ev,mg,fE],styles:[".center[_ngcontent-%COMP%]{margin:auto;max-width:300px;padding:20px}.centerspinner[_ngcontent-%COMP%]{margin:auto;width:50%;padding:10px}.row[_ngcontent-%COMP%]{display:flex;flex-direction:row;margin:auto}.full-width[_ngcontent-%COMP%]{width:100%}.centerText[_ngcontent-%COMP%]{text-align:center;font-size:300%;padding:30px}.baseDiv[_ngcontent-%COMP%]{padding-top:25vh;background-color:#add8e6;height:75vh}"]}),t})();function TT(t,e){if(1&t){const t=jo();No(0,"app-navigation-menu",2),qo("loggedOut",(function(){return nn(t),Wo().logout()})),Lo()}}function IT(t,e){if(1&t){const t=jo();No(0,"app-login",3),qo("loggedIn",(function(){return nn(t),Wo().login()})),Lo()}}let RT=(()=>{class t{constructor(t,e){this.router=t,this.updateBasicData=e,this.title="Angular-MatrixMicroPayments-App",this.loggedIn=!1}logout(){this.loggedIn=!1}login(){this.loggedIn=!0}}return t.\u0275fac=function(e){return new(e||t)(Ao(tx),Ao(eT))},t.\u0275cmp=de({type:t,selectors:[["app-root"]],decls:2,vars:2,consts:[[3,"loggedOut",4,"ngIf"],[3,"loggedIn",4,"ngIf"],[3,"loggedOut"],[3,"loggedIn"]],template:function(t,e){1&t&&(Ro(0,TT,1,0,"app-navigation-menu",0),Ro(1,IT,1,0,"app-login",1)),2&t&&(Po("ngIf",e.loggedIn),kr(1),Po("ngIf",!e.loggedIn))},directives:[Au,gT,xT],styles:[""]}),t})();function OT(t,e){if(1&t&&(No(0,"mat-option",7),ya(1),Lo()),2&t){const t=e.$implicit;Po("value",e.index),kr(1),va(t)}}function AT(t,e){1&t&&Fo(0,"mat-spinner",8),2&t&&Po("diameter",30)}let DT=(()=>{class t{constructor(t,e,n,i){this.dataModelService=t,this.matrixBasicDataService=e,this.dialog=n,this.dialogProviderService=i,this.selectedCurrency=Ex.USD,this.currencyMap=kx,this.loadingCurrency=!1}ngOnInit(){this.initSettings()}initSettings(){this.selectedCurrency=this.dataModelService.getUser().currency,this.oldSelectedCurrency=this.selectedCurrency}applySettings(){this.oldSelectedCurrency!==this.selectedCurrency&&(this.oldSelectedCurrency=this.selectedCurrency,this.loadingCurrency=!0,dT(1e5,this.matrixBasicDataService.userChangeDefaultCurrency(Cx[this.selectedCurrency])).then(t=>{t.wasSuccessful()||this.dialogProviderService.openErrorModal("error currency 1: "+t.getMessage(),this.dialog),this.loadingCurrency=!1},t=>{this.dialogProviderService.openErrorModal("error currency 2: "+t,this.dialog),this.loadingCurrency=!1}))}}return t.\u0275fac=function(e){return new(e||t)(Ao(tT),Ao(bT),Ao(Yw),Ao(mT))},t.\u0275cmp=de({type:t,selectors:[["app-settings"]],decls:11,vars:3,consts:[[1,"absolute"],[1,"settings_label"],["appearance","fill"],[3,"value","valueChange"],[3,"value",4,"ngFor","ngForOf"],["mat-raised-button","","color","primary",1,"first",3,"click"],["class","second",3,"diameter",4,"ngIf"],[3,"value"],[1,"second",3,"diameter"]],template:function(t,e){1&t&&(No(0,"div",0),No(1,"div"),No(2,"mat-label",1),ya(3,"Default Currency"),Lo(),No(4,"mat-form-field",2),No(5,"mat-select",3),qo("valueChange",(function(t){return e.selectedCurrency=t})),Ro(6,OT,2,2,"mat-option",4),Lo(),Lo(),Lo(),No(7,"div"),No(8,"button",5),qo("click",(function(){return e.applySettings()})),ya(9,"Apply"),Lo(),Ro(10,AT,1,1,"mat-spinner",6),Lo(),Lo()),2&t&&(kr(5),Po("value",e.selectedCurrency),kr(1),Po("ngForOf",e.currencyMap),kr(4),Po("ngIf",e.loadingCurrency))},directives:[vg,Rg,Hb,Ru,dv,Au,Vf,fE],styles:[".first[_ngcontent-%COMP%]{float:left;margin-right:5px}.second[_ngcontent-%COMP%]{overflow:hidden}.absolute[_ngcontent-%COMP%]{position:absolute;margin-left:20px;margin-top:20px}.settings_label[_ngcontent-%COMP%]{font-size:15px;margin-right:10px}"]}),t})();function PT(t,e){if(1&t&&(No(0,"mat-error"),ya(1),Lo()),2&t){const t=Wo();kr(1),va(t.getInvalidGroupNameErrorMessage())}}function MT(t,e){if(1&t&&(No(0,"mat-option",8),ya(1),Lo()),2&t){const t=e.$implicit;Po("value",e.index),kr(1),va(t)}}function NT(t,e){if(1&t&&(No(0,"mat-error"),ya(1),Lo()),2&t){const t=Wo();kr(1),va(t.getInvalidGroupNameErrorMessage())}}let LT=(()=>{class t{constructor(t,e){this.dialogRef=t,this.data=e,this.formControlGroupName=new q_("",[s_.required,s_.maxLength(30)]),this.currencyMap=kx}ngOnInit(){this.selectedCurrency=this.data.currency,this.formControlGroupName.setValue(this.data.groupName)}onCancel(){this.dialogRef.close()}onSave(){this.formControlGroupName.invalid||this.dialogRef.close({groupName:this.formControlGroupName.value,currency:this.selectedCurrency})}getInvalidGroupNameErrorMessage(){return this.formControlGroupName.hasError("required")?"Please enter a group name":"The group name is too long"}}return t.\u0275fac=function(e){return new(e||t)(Ao(qw),Ao($w))},t.\u0275cmp=de({type:t,selectors:[["app-create-group-modal"]],decls:18,vars:5,consts:[["mat-dialog-content",""],["matInput","","placeholder","Insert Group Name","value","",3,"formControl"],[4,"ngIf"],["appearance","fill"],[3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["mat-raised-button","",1,"button_left",3,"click"],["mat-raised-button","",1,"button_right",3,"click"],[3,"value"]],template:function(t,e){1&t&&(No(0,"h1"),ya(1,"Create Group"),Lo(),No(2,"div",0),No(3,"mat-form-field"),No(4,"mat-label"),ya(5,"Group Name"),Lo(),Fo(6,"input",1),Ro(7,PT,2,1,"mat-error",2),Lo(),No(8,"mat-form-field",3),No(9,"mat-label"),ya(10,"Group Currency"),Lo(),No(11,"mat-select",4),qo("ngModelChange",(function(t){return e.selectedCurrency=t})),Ro(12,MT,2,2,"mat-option",5),Lo(),Lo(),No(13,"button",6),qo("click",(function(){return e.onCancel()})),ya(14,"Cancel"),Lo(),No(15,"button",7),qo("click",(function(){return e.onSave()})),ya(16,"Create Group"),Lo(),Ro(17,NT,2,1,"mat-error",2),Lo()),2&t&&(kr(6),Po("formControl",e.formControlGroupName),kr(1),Po("ngIf",e.formControlGroupName.invalid),kr(4),Po("ngModel",e.selectedCurrency),kr(1),Po("ngForOf",e.currencyMap),kr(5),Po("ngIf",e.formControlGroupName.invalid))},directives:[Xw,Rg,vg,_y,zg,Jg,sy,Au,Hb,ny,Ru,dv,mg,Vf],styles:[".button_left[_ngcontent-%COMP%], .button_right[_ngcontent-%COMP%]{margin-bottom:10px}.button_right[_ngcontent-%COMP%]{margin-left:10px}"]}),t})(),FT=(()=>{class t{constructor(t,e){this.dialogRef=t,this.data=e}ngOnInit(){}onCancel(){this.dialogRef.close()}onSave(){this.dialogRef.close(this.data)}}return t.\u0275fac=function(e){return new(e||t)(Ao(qw),Ao($w))},t.\u0275cmp=de({type:t,selectors:[["app-leave-group-modal"]],decls:7,vars:1,consts:[["mat-dialog-content",""],["mat-raised-button","",1,"button_left",3,"click"],["mat-raised-button","",1,"button_right",3,"click"]],template:function(t,e){1&t&&(No(0,"h1"),ya(1),Lo(),No(2,"div",0),No(3,"button",1),qo("click",(function(){return e.onCancel()})),ya(4,"Cancel"),Lo(),No(5,"button",2),qo("click",(function(){return e.onSave()})),ya(6,"Leave"),Lo(),Lo()),2&t&&(kr(1),ba("Leave ",e.data.group.name,""))},directives:[Xw,dv],styles:[".button_left[_ngcontent-%COMP%], .button_right[_ngcontent-%COMP%]{margin-bottom:10px}.button_right[_ngcontent-%COMP%]{margin-left:10px}"]}),t})();function UT(t,e){if(1&t&&(No(0,"mat-error"),ya(1),Lo()),2&t){const t=Wo();kr(1),va(t.getInvalidUserErrorMessage())}}function BT(t,e){if(1&t&&(No(0,"mat-error"),ya(1),Lo()),2&t){const t=Wo();kr(1),va(t.getInvalidUserErrorMessage())}}let jT=(()=>{class t{constructor(t,e){this.dialogRef=t,this.data=e,this.formControlUser=new q_("",[s_.required,s_.pattern("@[_a-z0-9-]+:[a-z0-9.-]+")])}ngOnInit(){this.formControlUser.setValue(this.data.user)}onCancel(){this.dialogRef.close()}onSave(){this.formControlUser.invalid||this.dialogRef.close({user:this.formControlUser.value,group:this.data.group})}getInvalidUserErrorMessage(){return"Not a valid user name"}}return t.\u0275fac=function(e){return new(e||t)(Ao(qw),Ao($w))},t.\u0275cmp=de({type:t,selectors:[["app-add-user-to-group-modal"]],decls:13,vars:4,consts:[["mat-dialog-content",""],["matInput","","placeholder","Insert User Name","value","",3,"formControl"],[4,"ngIf"],["mat-raised-button","",1,"button_left",3,"click"],["mat-raised-button","",1,"button_right",3,"click"]],template:function(t,e){1&t&&(No(0,"h1"),ya(1),Lo(),No(2,"div",0),No(3,"mat-form-field"),No(4,"mat-label"),ya(5,"User Name"),Lo(),Fo(6,"input",1),Ro(7,UT,2,1,"mat-error",2),Lo(),No(8,"button",3),qo("click",(function(){return e.onCancel()})),ya(9,"Cancel"),Lo(),No(10,"button",4),qo("click",(function(){return e.onSave()})),ya(11,"Add member"),Lo(),Ro(12,BT,2,1,"mat-error",2),Lo()),2&t&&(kr(1),ba("Add user to ",e.data.group.name,""),kr(5),Po("formControl",e.formControlUser),kr(1),Po("ngIf",e.formControlUser.invalid),kr(5),Po("ngIf",e.formControlUser.invalid))},directives:[Xw,Rg,vg,_y,zg,Jg,sy,Au,dv,mg],styles:[".button_left[_ngcontent-%COMP%], .button_right[_ngcontent-%COMP%]{margin-bottom:10px}.button_right[_ngcontent-%COMP%]{margin-left:10px}"]}),t})();function VT(t,e){if(1&t&&(No(0,"mat-error"),ya(1),Lo()),2&t){const t=Wo();kr(1),va(t.getInvalidDescriptionErrorMessage())}}function KT(t,e){if(1&t&&(No(0,"mat-option",9),ya(1),Lo()),2&t){const t=e.$implicit;Po("value",t),kr(1),va(t.name)}}function qT(t,e){if(1&t&&(No(0,"mat-error"),ya(1),Lo()),2&t){const t=Wo(3);kr(1),va(t.getInvalidNumberErrorMessage())}}function GT(t,e){if(1&t&&(No(0,"mat-form-field"),No(1,"mat-label"),ya(2,"Amount"),Lo(),Fo(3,"input",13),Ro(4,qT,2,1,"mat-error",2),Lo()),2&t){const t=Wo().index,e=Wo();kr(3),Po("formControl",e.formControlAmount[t]),kr(1),Po("ngIf",e.formControlAmount[t].invalid)}}function $T(t,e){if(1&t){const t=jo();No(0,"mat-list-item"),No(1,"div",10),No(2,"mat-checkbox",11),qo("ngModelChange",(function(n){nn(t);const i=e.index;return Wo().data.isAdded[i]=n})),Lo(),Lo(),No(3,"mat-label",12),ya(4),Lo(),Ro(5,GT,5,2,"mat-form-field",2),Lo()}if(2&t){const t=e.$implicit,n=e.index,i=Wo();kr(2),Po("ngModel",i.data.isAdded[n]),kr(2),va(t.name),kr(1),Po("ngIf",i.data.isAdded[n])}}function HT(t,e){if(1&t&&(No(0,"mat-error"),ya(1),Lo()),2&t){const t=Wo();kr(1),va(t.getInvalidFormErrorMessage())}}let zT=(()=>{class t{constructor(t,e){this.dialogRef=t,this.data=e,this.formInvalid=!1}ngOnInit(){this.formControlAmount=new Array(this.data.amount.length);for(let t=0;t<this.data.amount.length;t++)this.formControlAmount[t]=new q_(this.data.amount[t]/100,[s_.required,s_.pattern("[0-9]*[.]?[0-9]?[0-9]?")]);this.formControlDescription=new q_(this.data.description,[s_.required,s_.maxLength(60)])}checkForm(){let t=!1;for(let e=0;e<this.data.amount.length;e++)this.formControlAmount[e].invalid&&this.data.isAdded[e]&&(t=!0);return(this.formControlDescription.invalid||null==this.data.payer)&&(t=!0),t}onCancel(){this.dialogRef.close()}onSave(){this.formInvalid=this.checkForm(),this.formInvalid||this.dialogRef.close(this.createReturnData())}createReturnData(){const t=this.formControlDescription.value,e=this.data.payer,n=new Array(0),i=new Array(0);for(let r=0;r<this.data.amount.length;r++)n.push(this.data.recipients[r]),i.push(Math.round(100*this.formControlAmount[r].value));return{modalTitle:this.data.modalTitle,description:t,payer:e,recipients:n,amount:i,isAdded:this.data.isAdded,currency:this.data.currency}}getInvalidNumberErrorMessage(){return"Not a valid number"}getInvalidDescriptionErrorMessage(){return this.formControlDescription.hasError("required")?"Please enter a description":"The description is too long"}getInvalidFormErrorMessage(){return"Not all inputs are valid"}}return t.\u0275fac=function(e){return new(e||t)(Ao(qw),Ao($w))},t.\u0275cmp=de({type:t,selectors:[["app-payment-modal"]],decls:21,vars:7,consts:[["mat-dialog-content",""],["matInput","","placeholder","Insert Description","value","",3,"formControl"],[4,"ngIf"],[3,"value","valueChange"],[3,"value",4,"ngFor","ngForOf"],[4,"ngFor","ngForOf"],["mat-raised-button","",1,"button_distance",3,"click"],["mat-raised-button","",3,"click"],["height","1"],[3,"value"],[1,"checkbox"],[3,"ngModel","ngModelChange"],[1,"name_amount"],["matInput","",3,"formControl"]],template:function(t,e){1&t&&(No(0,"h1"),ya(1),Lo(),No(2,"div",0),No(3,"mat-form-field"),No(4,"mat-label"),ya(5,"Description"),Lo(),Fo(6,"input",1),Ro(7,VT,2,1,"mat-error",2),Lo(),No(8,"mat-form-field"),No(9,"mat-label"),ya(10,"Payer"),Lo(),No(11,"mat-select",3),qo("valueChange",(function(t){return e.data.payer=t})),Ro(12,KT,2,2,"mat-option",4),Lo(),Lo(),No(13,"mat-action-list"),Ro(14,$T,6,3,"mat-list-item",5),Lo(),No(15,"button",6),qo("click",(function(){return e.onCancel()})),ya(16,"Cancel"),Lo(),No(17,"button",7),qo("click",(function(){return e.onSave()})),ya(18,"Save"),Lo(),Fo(19,"canvas",8),Ro(20,HT,2,1,"mat-error",2),Lo()),2&t&&(kr(1),va(e.data.modalTitle),kr(5),Po("formControl",e.formControlDescription),kr(1),Po("ngIf",e.formControlDescription.invalid),kr(4),Po("value",e.data.payer),kr(1),Po("ngForOf",e.data.recipients),kr(2),Po("ngForOf",e.data.recipients),kr(6),Po("ngIf",e.formInvalid))},directives:[Xw,Rg,vg,_y,zg,Jg,sy,Au,Hb,Ru,VS,dv,mg,Vf,GS,rE,ny],styles:[".name_amount[_ngcontent-%COMP%]{margin-right:auto}.button_distance[_ngcontent-%COMP%], .checkbox[_ngcontent-%COMP%]{margin-right:10px}"]}),t})();function WT(t,e){if(1&t&&(No(0,"mat-list-item",2),No(1,"mat-card"),No(2,"mat-label",5),ya(3),Lo(),No(4,"mat-label"),ya(5),Lo(),Lo(),Lo()),2&t){const t=e.$implicit,n=e.index,i=Wo();kr(3),va(t.name),kr(2),wa("",i.data.amount[n]/100,"",i.currencyMap[i.data.currency.valueOf()],"")}}let YT=(()=>{class t{constructor(t,e){this.dialogRef=t,this.data=e,this.currencyMap=kx}ngOnInit(){const t=[],e=[];for(let n=0;n<this.data.amount.length;n++)this.data.isAdded[n]&&(t.push(this.data.recipients[n]),e.push(this.data.amount[n]));this.data.recipients=t,this.data.amount=e}onCancel(){this.dialogRef.close()}}return t.\u0275fac=function(e){return new(e||t)(Ao(qw),Ao($w))},t.\u0275cmp=de({type:t,selectors:[["app-payment-view"]],decls:14,vars:3,consts:[["mat-dialog-content",""],[1,"header"],[1,"bottom_margin"],["class","bottom_margin",4,"ngFor","ngForOf"],["mat-raised-button","",3,"click"],[1,"name_amount"]],template:function(t,e){1&t&&(No(0,"h1"),ya(1),Lo(),No(2,"div",0),No(3,"mat-label",1),ya(4,"Payer"),Lo(),No(5,"mat-card",2),No(6,"mat-label"),ya(7),Lo(),Lo(),No(8,"mat-label",1),ya(9,"Recipients"),Lo(),No(10,"mat-list"),Ro(11,WT,6,3,"mat-list-item",3),Lo(),No(12,"button",4),qo("click",(function(){return e.onCancel()})),ya(13,"Close"),Lo(),Lo()),2&t&&(kr(1),va(e.data.modalTitle),kr(6),va(e.data.payer.name),kr(4),Po("ngForOf",e.data.recipients))},directives:[Xw,vg,sv,VS,Ru,dv,GS],styles:[".name_amount[_ngcontent-%COMP%]{margin-right:10px}.header[_ngcontent-%COMP%]{font-size:20px;margin-bottom:10px}.bottom_margin[_ngcontent-%COMP%]{margin-bottom:8px}"]}),t})(),XT=(()=>{class t{transform(t){return t.slice().reverse()}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275pipe=ve({name:"reversePipe",type:t,pure:!1}),t})();function QT(t,e){1&t&&Fo(0,"mat-spinner",5),2&t&&Po("diameter",30)}const ZT=function(t){return{color:t}};function JT(t,e){if(1&t){const t=jo();No(0,"button",6),qo("click",(function(){nn(t);const n=e.$implicit;return Wo().editExpense(n)})),No(1,"mat-card"),No(2,"div"),No(3,"mat-label",7),ya(4),Lo(),No(5,"div",8),No(6,"mat-label",9),ya(7),Lo(),No(8,"mat-label"),ya(9),Lo(),Lo(),No(10,"mat-label",10),ya(11),Lo(),Lo(),Lo(),Lo()}if(2&t){const t=e.$implicit,n=Wo();kr(4),va(t.name),kr(3),Sa("",t.payer.amount/100,"",n.currencyMap[t.group.currency]," paid by ",t.payer.contact.name,""),kr(2),va(t.creationDate.toDateString()),kr(1),Po("ngStyle",Mc(8,ZT,n.userAmounts[t.transactionId]>=0?"green":"red")),kr(1),wa("",n.userAmounts[t.transactionId]/100,"",n.currencyMap[t.group.currency],"")}}let tI=(()=>{class t{constructor(t,e,n,i,r,s){this.dialog=t,this.matrixBasicDataService=e,this.dialogProviderService=n,this.ref=i,this.dataModelService=r,this.zone=s,this.transactions=[],this.loadingCreateExpense=!1,this.loadingEditExpense=!1,this.currencyMap=kx,this.userAmounts={}}calculateUserAmounts(){for(const t of this.transactions)if(null==this.userAmounts[t.transactionId]){let e=0;for(const n of t.recipients)if(n.contact.contactId===this.userContact.contactId){e=n.amount;break}this.userAmounts[t.transactionId]=t.payer.contact.contactId===this.userContact.contactId?t.payer.amount-e:-e}}ngOnChanges(){this.userContact=this.dataModelService.getUser().contact,this.transactions=this.group.transactions,this.calculateUserAmounts(),this.group.getTransactionChangeEmitter().subscribe(()=>{this.calculateUserAmounts(),this.ref.detectChanges()})}createExpense(){""===this.group.groupId?this.dialogProviderService.openErrorModal("Please select a group",this.dialog):this.dialog.open(zT,{width:"400px",data:this.generateCreateExpenseData()}).afterClosed().subscribe(t=>{if(this.data=t,void 0!==this.data){const t=[],e=[];for(let n=0;n<this.data.recipients.length;n++)!0===this.data.isAdded[n]&&(t.push(this.data.recipients[n].contactId),e.push(this.data.amount[n]));this.loadingCreateExpense=!0,Mx.transactionTimes.push(new Mx(Date.now(),this.group.groupId+this.data.description)),dT(1e5,this.matrixBasicDataService.createTransaction(this.group.groupId,this.data.description,this.data.payer.contactId,t,e,!1)).then(t=>{t.wasSuccessful()||this.dialogProviderService.openErrorModal("error create transaction 1: "+t.getMessage(),this.dialog),this.loadingCreateExpense=!1},t=>{this.dialogProviderService.openErrorModal("error create Transaction 2: "+t,this.dialog),this.loadingCreateExpense=!1})}})}editExpense(t){this.zone.run(()=>{this.dialog.open(YT,{width:"350px",data:this.generateEditExpenseData(t)})})}generateEditExpenseData(t){const e=t.name,n=Array(0),i=t.name,r=t.payer.contact,s=Array(0),o=Array(0);for(const a of this.group.groupmembers){n.push(a.contact);const e=this.getRecipientAmountFromTransaction(a.contact.contactId,t);s.push(e),o.push(0!==e)}return{modalTitle:e,description:i,payer:r,recipients:n,amount:s,isAdded:o,currency:this.group.currency}}generateCreateExpenseData(){const t=Array(0);let e=this.group.groupmembers[0].contact;for(const r of this.group.groupmembers)if(r.active){e=r.contact;break}const n=Array(0),i=Array(0);for(const r of this.group.groupmembers)r.active&&(t.push(r.contact),n.push(0),i.push(!0));return{modalTitle:"Create Transaction",description:"",payer:e,recipients:t,amount:n,isAdded:i,currency:this.group.currency}}getRecipientAmountFromTransaction(t,e){for(const n of e.recipients)if(n.contact.contactId===t)return n.amount;return 0}}return t.\u0275fac=function(e){return new(e||t)(Ao(Yw),Ao(bT),Ao(mT),Ao(Zs),Ao(tT),Ao(Rl))},t.\u0275cmp=de({type:t,selectors:[["app-group-transaction"]],inputs:{group:"group"},features:[Ae],decls:11,vars:4,consts:[[1,"createButtonDiv"],["class","first",3,"diameter",4,"ngIf"],["mat-raised-button","","color","primary",1,"second",3,"click"],["mat-list-item","","class","transaction",3,"click",4,"ngFor","ngForOf"],["width","1","height","100"],[1,"first",3,"diameter"],["mat-list-item","",1,"transaction",3,"click"],[1,"title"],[1,"description"],[1,"description_left"],[1,"payed_amount",3,"ngStyle"]],template:function(t,e){1&t&&(No(0,"div"),No(1,"div"),No(2,"div",0),Ro(3,QT,1,1,"mat-spinner",1),No(4,"button",2),qo("click",(function(){return e.createExpense()})),ya(5,"Create Transaction"),Lo(),Lo(),Lo(),No(6,"div"),No(7,"mat-action-list"),Ro(8,JT,12,10,"button",3),Uc(9,"reversePipe"),Fo(10,"canvas",4),Lo(),Lo(),Lo()),2&t&&(kr(3),Po("ngIf",e.loadingEditExpense||e.loadingCreateExpense),kr(5),Po("ngForOf",Bc(9,2,e.transactions)))},directives:[Au,dv,VS,Ru,fE,GS,sv,vg,Uu],pipes:[XT],styles:[".createButtonDiv[_ngcontent-%COMP%]{position:fixed;right:50%;bottom:20px;transform:translate(50%,-50%);margin:0 auto;z-index:50}.transaction[_ngcontent-%COMP%]{margin-top:100px;margin-bottom:100px}.mat-card[_ngcontent-%COMP%]{width:100%}.payed_amount[_ngcontent-%COMP%]{position:absolute;right:20px;bottom:30px;font-size:30px}.first[_ngcontent-%COMP%]{width:300px;float:left;margin-right:5px}.second[_ngcontent-%COMP%]{overflow:hidden}.title[_ngcontent-%COMP%]{font-size:20px;margin-right:130px}.description[_ngcontent-%COMP%]{color:grey;margin-bottom:50px}.description_left[_ngcontent-%COMP%]{margin-right:20px}@media only screen and (min-width:1200px){.createButtonDiv[_ngcontent-%COMP%]{position:fixed;right:40px;bottom:40px;transform:translate(0);z-index:50}.transaction[_ngcontent-%COMP%]{margin-top:50px;margin-bottom:25px}.description[_ngcontent-%COMP%]{margin-right:500px;margin-bottom:0;color:grey}.payed_amount[_ngcontent-%COMP%]{position:absolute;right:20px;top:30px;font-size:60px}}@media not all and (min-resolution:0.001dpcm){@supports (-webkit-appearance:none) and (stroke-color:transparent){.createButtonDiv[_ngcontent-%COMP%]{position:relative;left:5px;top:5px;transform:translate(0);margin:0 auto;z-index:50}}}"]}),t})(),eI=(()=>{class t{constructor(t,e){this.dialogRef=t,this.data=e,this.currencyMap=kx}onCancel(){this.dialogRef.close()}onSave(){this.dialogRef.close(this.data)}}return t.\u0275fac=function(e){return new(e||t)(Ao(qw),Ao($w))},t.\u0275cmp=de({type:t,selectors:[["app-confirm-payback-modal"]],decls:9,vars:4,consts:[["mat-dialog-content",""],[1,"text"],["mat-raised-button","",1,"button_left",3,"click"],["mat-raised-button","",1,"button_right",3,"click"]],template:function(t,e){1&t&&(No(0,"h1"),ya(1,"Approve Paypack"),Lo(),No(2,"div",0),No(3,"mat-label",1),ya(4),Lo(),No(5,"button",2),qo("click",(function(){return e.onCancel()})),ya(6,"Cancel"),Lo(),No(7,"button",3),qo("click",(function(){return e.onSave()})),ya(8,"Confirm"),Lo(),Lo()),2&t&&(kr(4),Ea("Have you really payed back ",e.data.recommendation.recipient.contact.name," ",e.data.recommendation.recipient.amount/100," ",e.currencyMap[e.data.recommendation.group.currency]," in Group ",e.data.recommendation.group.name,"?"))},directives:[Xw,vg,dv],styles:[".text[_ngcontent-%COMP%]{margin-right:100px}.button_left[_ngcontent-%COMP%], .button_right[_ngcontent-%COMP%]{margin-bottom:10px}.button_right[_ngcontent-%COMP%]{margin-left:10px}"]}),t})();function nI(t,e,n){return Math.ceil(t/e*n)}function iI(){}var rI=function(t){return null==t?iI:function(){return this.querySelector(t)}};function sI(){return[]}var oI=function(t){return null==t?sI:function(){return this.querySelectorAll(t)}},aI=function(t){return function(){return this.matches(t)}},cI=function(t){return new Array(t.length)};function lI(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}function uI(t,e,n,i,r,s){for(var o,a=0,c=e.length,l=s.length;a<l;++a)(o=e[a])?(o.__data__=s[a],i[a]=o):n[a]=new lI(t,s[a]);for(;a<c;++a)(o=e[a])&&(r[a]=o)}function hI(t,e,n,i,r,s,o){var a,c,l,u={},h=e.length,d=s.length,p=new Array(h);for(a=0;a<h;++a)(c=e[a])&&(p[a]=l="$"+o.call(c,c.__data__,a,e),l in u?r[a]=c:u[l]=c);for(a=0;a<d;++a)(c=u[l="$"+o.call(t,s[a],a,s)])?(i[a]=c,c.__data__=s[a],u[l]=null):n[a]=new lI(t,s[a]);for(a=0;a<h;++a)(c=e[a])&&u[p[a]]===c&&(r[a]=c)}function dI(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}lI.prototype={constructor:lI,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};var pI="http://www.w3.org/1999/xhtml",mI={svg:"http://www.w3.org/2000/svg",xhtml:pI,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},fI=function(t){var e=t+="",n=e.indexOf(":");return n>=0&&"xmlns"!==(e=t.slice(0,n))&&(t=t.slice(n+1)),mI.hasOwnProperty(e)?{space:mI[e],local:t}:t};function gI(t){return function(){this.removeAttribute(t)}}function _I(t){return function(){this.removeAttributeNS(t.space,t.local)}}function yI(t,e){return function(){this.setAttribute(t,e)}}function vI(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function bI(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttribute(t):this.setAttribute(t,n)}}function wI(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}var SI=function(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView};function EI(t){return function(){this.style.removeProperty(t)}}function kI(t,e,n){return function(){this.style.setProperty(t,e,n)}}function CI(t,e,n){return function(){var i=e.apply(this,arguments);null==i?this.style.removeProperty(t):this.style.setProperty(t,i,n)}}function xI(t,e){return t.style.getPropertyValue(e)||SI(t).getComputedStyle(t,null).getPropertyValue(e)}function TI(t){return function(){delete this[t]}}function II(t,e){return function(){this[t]=e}}function RI(t,e){return function(){var n=e.apply(this,arguments);null==n?delete this[t]:this[t]=n}}function OI(t){return t.trim().split(/^|\s+/)}function AI(t){return t.classList||new DI(t)}function DI(t){this._node=t,this._names=OI(t.getAttribute("class")||"")}function PI(t,e){for(var n=AI(t),i=-1,r=e.length;++i<r;)n.add(e[i])}function MI(t,e){for(var n=AI(t),i=-1,r=e.length;++i<r;)n.remove(e[i])}function NI(t){return function(){PI(this,t)}}function LI(t){return function(){MI(this,t)}}function FI(t,e){return function(){(e.apply(this,arguments)?PI:MI)(this,t)}}function UI(){this.textContent=""}function BI(t){return function(){this.textContent=t}}function jI(t){return function(){var e=t.apply(this,arguments);this.textContent=null==e?"":e}}function VI(){this.innerHTML=""}function KI(t){return function(){this.innerHTML=t}}function qI(t){return function(){var e=t.apply(this,arguments);this.innerHTML=null==e?"":e}}function GI(){this.nextSibling&&this.parentNode.appendChild(this)}function $I(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function HI(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===pI&&e.documentElement.namespaceURI===pI?e.createElement(t):e.createElementNS(n,t)}}function zI(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}DI.prototype={add:function(t){this._names.indexOf(t)<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};var WI=function(t){var e=fI(t);return(e.local?zI:HI)(e)};function YI(){return null}function XI(){var t=this.parentNode;t&&t.removeChild(this)}function QI(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function ZI(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}var JI={},tR=null;function eR(t,e,n){return t=nR(t,e,n),function(e){var n=e.relatedTarget;n&&(n===this||8&n.compareDocumentPosition(this))||t.call(this,e)}}function nR(t,e,n){return function(i){var r=tR;tR=i;try{t.call(this,this.__data__,e,n)}finally{tR=r}}}function iR(t){return t.trim().split(/^|\s+/).map((function(t){var e="",n=t.indexOf(".");return n>=0&&(e=t.slice(n+1),t=t.slice(0,n)),{type:t,name:e}}))}function rR(t){return function(){var e=this.__on;if(e){for(var n,i=0,r=-1,s=e.length;i<s;++i)n=e[i],t.type&&n.type!==t.type||n.name!==t.name?e[++r]=n:this.removeEventListener(n.type,n.listener,n.capture);++r?e.length=r:delete this.__on}}}function sR(t,e,n){var i=JI.hasOwnProperty(t.type)?eR:nR;return function(r,s,o){var a,c=this.__on,l=i(e,s,o);if(c)for(var u=0,h=c.length;u<h;++u)if((a=c[u]).type===t.type&&a.name===t.name)return this.removeEventListener(a.type,a.listener,a.capture),this.addEventListener(a.type,a.listener=l,a.capture=n),void(a.value=e);this.addEventListener(t.type,l,n),a={type:t.type,name:t.name,value:e,listener:l,capture:n},c?c.push(a):this.__on=[a]}}function oR(t,e,n){var i=SI(t),r=i.CustomEvent;"function"==typeof r?r=new r(e,n):(r=i.document.createEvent("Event"),n?(r.initEvent(e,n.bubbles,n.cancelable),r.detail=n.detail):r.initEvent(e,!1,!1)),t.dispatchEvent(r)}function aR(t,e){return function(){return oR(this,t,e)}}function cR(t,e){return function(){return oR(this,t,e.apply(this,arguments))}}"undefined"!=typeof document&&("onmouseenter"in document.documentElement||(JI={mouseenter:"mouseover",mouseleave:"mouseout"}));var lR=[null];function uR(t,e){this._groups=t,this._parents=e}function hR(){return new uR([[document.documentElement]],lR)}uR.prototype=hR.prototype={constructor:uR,select:function(t){"function"!=typeof t&&(t=rI(t));for(var e=this._groups,n=e.length,i=new Array(n),r=0;r<n;++r)for(var s,o,a=e[r],c=a.length,l=i[r]=new Array(c),u=0;u<c;++u)(s=a[u])&&(o=t.call(s,s.__data__,u,a))&&("__data__"in s&&(o.__data__=s.__data__),l[u]=o);return new uR(i,this._parents)},selectAll:function(t){"function"!=typeof t&&(t=oI(t));for(var e=this._groups,n=e.length,i=[],r=[],s=0;s<n;++s)for(var o,a=e[s],c=a.length,l=0;l<c;++l)(o=a[l])&&(i.push(t.call(o,o.__data__,l,a)),r.push(o));return new uR(i,r)},filter:function(t){"function"!=typeof t&&(t=aI(t));for(var e=this._groups,n=e.length,i=new Array(n),r=0;r<n;++r)for(var s,o=e[r],a=o.length,c=i[r]=[],l=0;l<a;++l)(s=o[l])&&t.call(s,s.__data__,l,o)&&c.push(s);return new uR(i,this._parents)},data:function(t,e){if(!t)return m=new Array(this.size()),u=-1,this.each((function(t){m[++u]=t})),m;var n,i=e?hI:uI,r=this._parents,s=this._groups;"function"!=typeof t&&(n=t,t=function(){return n});for(var o=s.length,a=new Array(o),c=new Array(o),l=new Array(o),u=0;u<o;++u){var h=r[u],d=s[u],p=d.length,m=t.call(h,h&&h.__data__,u,r),f=m.length,g=c[u]=new Array(f),_=a[u]=new Array(f);i(h,d,g,_,l[u]=new Array(p),m,e);for(var y,v,b=0,w=0;b<f;++b)if(y=g[b]){for(b>=w&&(w=b+1);!(v=_[w])&&++w<f;);y._next=v||null}}return(a=new uR(a,r))._enter=c,a._exit=l,a},enter:function(){return new uR(this._enter||this._groups.map(cI),this._parents)},exit:function(){return new uR(this._exit||this._groups.map(cI),this._parents)},join:function(t,e,n){var i=this.enter(),r=this,s=this.exit();return i="function"==typeof t?t(i):i.append(t+""),null!=e&&(r=e(r)),null==n?s.remove():n(s),i&&r?i.merge(r).order():r},merge:function(t){for(var e=this._groups,n=t._groups,i=e.length,r=Math.min(i,n.length),s=new Array(i),o=0;o<r;++o)for(var a,c=e[o],l=n[o],u=c.length,h=s[o]=new Array(u),d=0;d<u;++d)(a=c[d]||l[d])&&(h[d]=a);for(;o<i;++o)s[o]=e[o];return new uR(s,this._parents)},order:function(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var i,r=t[e],s=r.length-1,o=r[s];--s>=0;)(i=r[s])&&(o&&4^i.compareDocumentPosition(o)&&o.parentNode.insertBefore(i,o),o=i);return this},sort:function(t){function e(e,n){return e&&n?t(e.__data__,n.__data__):!e-!n}t||(t=dI);for(var n=this._groups,i=n.length,r=new Array(i),s=0;s<i;++s){for(var o,a=n[s],c=a.length,l=r[s]=new Array(c),u=0;u<c;++u)(o=a[u])&&(l[u]=o);l.sort(e)}return new uR(r,this._parents).order()},call:function(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this},nodes:function(){var t=new Array(this.size()),e=-1;return this.each((function(){t[++e]=this})),t},node:function(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var i=t[e],r=0,s=i.length;r<s;++r){var o=i[r];if(o)return o}return null},size:function(){var t=0;return this.each((function(){++t})),t},empty:function(){return!this.node()},each:function(t){for(var e=this._groups,n=0,i=e.length;n<i;++n)for(var r,s=e[n],o=0,a=s.length;o<a;++o)(r=s[o])&&t.call(r,r.__data__,o,s);return this},attr:function(t,e){var n=fI(t);if(arguments.length<2){var i=this.node();return n.local?i.getAttributeNS(n.space,n.local):i.getAttribute(n)}return this.each((null==e?n.local?_I:gI:"function"==typeof e?n.local?wI:bI:n.local?vI:yI)(n,e))},style:function(t,e,n){return arguments.length>1?this.each((null==e?EI:"function"==typeof e?CI:kI)(t,e,null==n?"":n)):xI(this.node(),t)},property:function(t,e){return arguments.length>1?this.each((null==e?TI:"function"==typeof e?RI:II)(t,e)):this.node()[t]},classed:function(t,e){var n=OI(t+"");if(arguments.length<2){for(var i=AI(this.node()),r=-1,s=n.length;++r<s;)if(!i.contains(n[r]))return!1;return!0}return this.each(("function"==typeof e?FI:e?NI:LI)(n,e))},text:function(t){return arguments.length?this.each(null==t?UI:("function"==typeof t?jI:BI)(t)):this.node().textContent},html:function(t){return arguments.length?this.each(null==t?VI:("function"==typeof t?qI:KI)(t)):this.node().innerHTML},raise:function(){return this.each(GI)},lower:function(){return this.each($I)},append:function(t){var e="function"==typeof t?t:WI(t);return this.select((function(){return this.appendChild(e.apply(this,arguments))}))},insert:function(t,e){var n="function"==typeof t?t:WI(t),i=null==e?YI:"function"==typeof e?e:rI(e);return this.select((function(){return this.insertBefore(n.apply(this,arguments),i.apply(this,arguments)||null)}))},remove:function(){return this.each(XI)},clone:function(t){return this.select(t?ZI:QI)},datum:function(t){return arguments.length?this.property("__data__",t):this.node().__data__},on:function(t,e,n){var i,r,s=iR(t+""),o=s.length;if(!(arguments.length<2)){for(a=e?sR:rR,null==n&&(n=!1),i=0;i<o;++i)this.each(a(s[i],e,n));return this}var a=this.node().__on;if(a)for(var c,l=0,u=a.length;l<u;++l)for(i=0,c=a[l];i<o;++i)if((r=s[i]).type===c.type&&r.name===c.name)return c.value},dispatch:function(t,e){return this.each(("function"==typeof e?cR:aR)(t,e))}};var dR=hR,pR={value:function(){}};function mR(){for(var t,e=0,n=arguments.length,i={};e<n;++e){if(!(t=arguments[e]+"")||t in i||/[\s.]/.test(t))throw new Error("illegal type: "+t);i[t]=[]}return new fR(i)}function fR(t){this._=t}function gR(t,e){return t.trim().split(/^|\s+/).map((function(t){var n="",i=t.indexOf(".");if(i>=0&&(n=t.slice(i+1),t=t.slice(0,i)),t&&!e.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:n}}))}function _R(t,e){for(var n,i=0,r=t.length;i<r;++i)if((n=t[i]).name===e)return n.value}function yR(t,e,n){for(var i=0,r=t.length;i<r;++i)if(t[i].name===e){t[i]=pR,t=t.slice(0,i).concat(t.slice(i+1));break}return null!=n&&t.push({name:e,value:n}),t}fR.prototype=mR.prototype={constructor:fR,on:function(t,e){var n,i=this._,r=gR(t+"",i),s=-1,o=r.length;if(!(arguments.length<2)){if(null!=e&&"function"!=typeof e)throw new Error("invalid callback: "+e);for(;++s<o;)if(n=(t=r[s]).type)i[n]=yR(i[n],t.name,e);else if(null==e)for(n in i)i[n]=yR(i[n],t.name,null);return this}for(;++s<o;)if((n=(t=r[s]).type)&&(n=_R(i[n],t.name)))return n},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new fR(t)},call:function(t,e){if((n=arguments.length-2)>0)for(var n,i,r=new Array(n),s=0;s<n;++s)r[s]=arguments[s+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(s=0,n=(i=this._[t]).length;s<n;++s)i[s].value.apply(e,r)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var i=this._[t],r=0,s=i.length;r<s;++r)i[r].value.apply(e,n)}};var vR=mR,bR=function(t,e,n){t.prototype=e.prototype=n,n.constructor=t};function wR(t,e){var n=Object.create(t.prototype);for(var i in e)n[i]=e[i];return n}function SR(){}var ER="\\s*([+-]?\\d+)\\s*",kR="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",CR="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",xR=/^#([0-9a-f]{3,8})$/,TR=new RegExp("^rgb\\("+[ER,ER,ER]+"\\)$"),IR=new RegExp("^rgb\\("+[CR,CR,CR]+"\\)$"),RR=new RegExp("^rgba\\("+[ER,ER,ER,kR]+"\\)$"),OR=new RegExp("^rgba\\("+[CR,CR,CR,kR]+"\\)$"),AR=new RegExp("^hsl\\("+[kR,CR,CR]+"\\)$"),DR=new RegExp("^hsla\\("+[kR,CR,CR,kR]+"\\)$"),PR={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function MR(){return this.rgb().formatHex()}function NR(){return this.rgb().formatRgb()}function LR(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=xR.exec(t))?(n=e[1].length,e=parseInt(e[1],16),6===n?FR(e):3===n?new VR(e>>8&15|e>>4&240,e>>4&15|240&e,(15&e)<<4|15&e,1):8===n?UR(e>>24&255,e>>16&255,e>>8&255,(255&e)/255):4===n?UR(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|240&e,((15&e)<<4|15&e)/255):null):(e=TR.exec(t))?new VR(e[1],e[2],e[3],1):(e=IR.exec(t))?new VR(255*e[1]/100,255*e[2]/100,255*e[3]/100,1):(e=RR.exec(t))?UR(e[1],e[2],e[3],e[4]):(e=OR.exec(t))?UR(255*e[1]/100,255*e[2]/100,255*e[3]/100,e[4]):(e=AR.exec(t))?$R(e[1],e[2]/100,e[3]/100,1):(e=DR.exec(t))?$R(e[1],e[2]/100,e[3]/100,e[4]):PR.hasOwnProperty(t)?FR(PR[t]):"transparent"===t?new VR(NaN,NaN,NaN,0):null}function FR(t){return new VR(t>>16&255,t>>8&255,255&t,1)}function UR(t,e,n,i){return i<=0&&(t=e=n=NaN),new VR(t,e,n,i)}function BR(t){return t instanceof SR||(t=LR(t)),t?new VR((t=t.rgb()).r,t.g,t.b,t.opacity):new VR}function jR(t,e,n,i){return 1===arguments.length?BR(t):new VR(t,e,n,null==i?1:i)}function VR(t,e,n,i){this.r=+t,this.g=+e,this.b=+n,this.opacity=+i}function KR(){return"#"+GR(this.r)+GR(this.g)+GR(this.b)}function qR(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===t?")":", "+t+")")}function GR(t){return((t=Math.max(0,Math.min(255,Math.round(t)||0)))<16?"0":"")+t.toString(16)}function $R(t,e,n,i){return i<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new zR(t,e,n,i)}function HR(t){if(t instanceof zR)return new zR(t.h,t.s,t.l,t.opacity);if(t instanceof SR||(t=LR(t)),!t)return new zR;if(t instanceof zR)return t;var e=(t=t.rgb()).r/255,n=t.g/255,i=t.b/255,r=Math.min(e,n,i),s=Math.max(e,n,i),o=NaN,a=s-r,c=(s+r)/2;return a?(o=e===s?(n-i)/a+6*(n<i):n===s?(i-e)/a+2:(e-n)/a+4,a/=c<.5?s+r:2-s-r,o*=60):a=c>0&&c<1?0:o,new zR(o,a,c,t.opacity)}function zR(t,e,n,i){this.h=+t,this.s=+e,this.l=+n,this.opacity=+i}function WR(t,e,n){return 255*(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)}function YR(t,e,n,i,r){var s=t*t,o=s*t;return((1-3*t+3*s-o)*e+(4-6*s+3*o)*n+(1+3*t+3*s-3*o)*i+o*r)/6}bR(SR,LR,{copy:function(t){return Object.assign(new this.constructor,this,t)},displayable:function(){return this.rgb().displayable()},hex:MR,formatHex:MR,formatHsl:function(){return HR(this).formatHsl()},formatRgb:NR,toString:NR}),bR(VR,jR,wR(SR,{brighter:function(t){return t=null==t?1/.7:Math.pow(1/.7,t),new VR(this.r*t,this.g*t,this.b*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new VR(this.r*t,this.g*t,this.b*t,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:KR,formatHex:KR,formatRgb:qR,toString:qR})),bR(zR,(function(t,e,n,i){return 1===arguments.length?HR(t):new zR(t,e,n,null==i?1:i)}),wR(SR,{brighter:function(t){return t=null==t?1/.7:Math.pow(1/.7,t),new zR(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new zR(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=this.h%360+360*(this.h<0),e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,i=n+(n<.5?n:1-n)*e,r=2*n-i;return new VR(WR(t>=240?t-240:t+120,r,i),WR(t,r,i),WR(t<120?t+240:t-120,r,i),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?"hsl(":"hsla(")+(this.h||0)+", "+100*(this.s||0)+"%, "+100*(this.l||0)+"%"+(1===t?")":", "+t+")")}}));var XR=function(t){return function(){return t}};function QR(t,e){var n=e-t;return n?function(t,e){return function(n){return t+n*e}}(t,n):XR(isNaN(t)?e:t)}var ZR=function t(e){var n=function(t){return 1==(t=+t)?QR:function(e,n){return n-e?function(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(i){return Math.pow(t+i*e,n)}}(e,n,t):XR(isNaN(e)?n:e)}}(e);function i(t,e){var i=n((t=jR(t)).r,(e=jR(e)).r),r=n(t.g,e.g),s=n(t.b,e.b),o=QR(t.opacity,e.opacity);return function(e){return t.r=i(e),t.g=r(e),t.b=s(e),t.opacity=o(e),t+""}}return i.gamma=t,i}(1);function JR(t){return function(e){var n,i,r=e.length,s=new Array(r),o=new Array(r),a=new Array(r);for(n=0;n<r;++n)i=jR(e[n]),s[n]=i.r||0,o[n]=i.g||0,a[n]=i.b||0;return s=t(s),o=t(o),a=t(a),i.opacity=1,function(t){return i.r=s(t),i.g=o(t),i.b=a(t),i+""}}}JR((function(t){var e=t.length-1;return function(n){var i=n<=0?n=0:n>=1?(n=1,e-1):Math.floor(n*e),r=t[i],s=t[i+1];return YR((n-i/e)*e,i>0?t[i-1]:2*r-s,r,s,i<e-1?t[i+2]:2*s-r)}})),JR((function(t){var e=t.length;return function(n){var i=Math.floor(((n%=1)<0?++n:n)*e);return YR((n-i/e)*e,t[(i+e-1)%e],t[i%e],t[(i+1)%e],t[(i+2)%e])}}));var tO=function(t,e){e||(e=[]);var n,i=t?Math.min(e.length,t.length):0,r=e.slice();return function(s){for(n=0;n<i;++n)r[n]=t[n]*(1-s)+e[n]*s;return r}};function eO(t,e){var n,i=e?e.length:0,r=t?Math.min(i,t.length):0,s=new Array(r),o=new Array(i);for(n=0;n<r;++n)s[n]=uO(t[n],e[n]);for(;n<i;++n)o[n]=e[n];return function(t){for(n=0;n<r;++n)o[n]=s[n](t);return o}}var nO,iO,rO=function(t,e){var n=new Date;return t=+t,e=+e,function(i){return n.setTime(t*(1-i)+e*i),n}},sO=function(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}},oO=function(t,e){var n,i={},r={};for(n in null!==t&&"object"==typeof t||(t={}),null!==e&&"object"==typeof e||(e={}),e)n in t?i[n]=uO(t[n],e[n]):r[n]=e[n];return function(t){for(n in i)r[n]=i[n](t);return r}},aO=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,cO=new RegExp(aO.source,"g"),lO=function(t,e){var n,i,r,s=aO.lastIndex=cO.lastIndex=0,o=-1,a=[],c=[];for(t+="",e+="";(n=aO.exec(t))&&(i=cO.exec(e));)(r=i.index)>s&&(r=e.slice(s,r),a[o]?a[o]+=r:a[++o]=r),(n=n[0])===(i=i[0])?a[o]?a[o]+=i:a[++o]=i:(a[++o]=null,c.push({i:o,x:sO(n,i)})),s=cO.lastIndex;return s<e.length&&(r=e.slice(s),a[o]?a[o]+=r:a[++o]=r),a.length<2?c[0]?function(t){return function(e){return t(e)+""}}(c[0].x):function(t){return function(){return t}}(e):(e=c.length,function(t){for(var n,i=0;i<e;++i)a[(n=c[i]).i]=n.x(t);return a.join("")})},uO=function(t,e){var n,i,r=typeof e;return null==e||"boolean"===r?XR(e):("number"===r?sO:"string"===r?(n=LR(e))?(e=n,ZR):lO:e instanceof LR?ZR:e instanceof Date?rO:(i=e,!ArrayBuffer.isView(i)||i instanceof DataView?Array.isArray(e)?eO:"function"!=typeof e.valueOf&&"function"!=typeof e.toString||isNaN(e)?oO:sO:tO))(t,e)},hO=0,dO=0,pO=0,mO=0,fO=0,gO=0,_O="object"==typeof performance&&performance.now?performance:Date,yO="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function vO(){return fO||(yO(bO),fO=_O.now()+gO)}function bO(){fO=0}function wO(){this._call=this._time=this._next=null}function SO(t,e,n){var i=new wO;return i.restart(t,e,n),i}function EO(){fO=(mO=_O.now())+gO,hO=dO=0;try{!function(){vO(),++hO;for(var t,e=nO;e;)(t=fO-e._time)>=0&&e._call.call(null,t),e=e._next;--hO}()}finally{hO=0,function(){for(var t,e,n=nO,i=1/0;n;)n._call?(i>n._time&&(i=n._time),t=n,n=n._next):(e=n._next,n._next=null,n=t?t._next=e:nO=e);iO=t,CO(i)}(),fO=0}}function kO(){var t=_O.now(),e=t-mO;e>1e3&&(gO-=e,mO=t)}function CO(t){hO||(dO&&(dO=clearTimeout(dO)),t-fO>24?(t<1/0&&(dO=setTimeout(EO,t-_O.now()-gO)),pO&&(pO=clearInterval(pO))):(pO||(mO=_O.now(),pO=setInterval(kO,1e3)),hO=1,yO(EO)))}wO.prototype=SO.prototype={constructor:wO,restart:function(t,e,n){if("function"!=typeof t)throw new TypeError("callback is not a function");n=(null==n?vO():+n)+(null==e?0:+e),this._next||iO===this||(iO?iO._next=this:nO=this,iO=this),this._call=t,this._time=n,CO()},stop:function(){this._call&&(this._call=null,this._time=1/0,CO())}};var xO=function(t,e,n){var i=new wO;return i.restart((function(n){i.stop(),t(n+e)}),e=null==e?0:+e,n),i},TO=vR("start","end","cancel","interrupt"),IO=[],RO=function(t,e,n,i,r,s){var o=t.__transition;if(o){if(n in o)return}else t.__transition={};!function(t,e,n){var i,r=t.__transition;function s(c){var l,u,h,d;if(1!==n.state)return a();for(l in r)if((d=r[l]).name===n.name){if(3===d.state)return xO(s);4===d.state?(d.state=6,d.timer.stop(),d.on.call("interrupt",t,t.__data__,d.index,d.group),delete r[l]):+l<e&&(d.state=6,d.timer.stop(),d.on.call("cancel",t,t.__data__,d.index,d.group),delete r[l])}if(xO((function(){3===n.state&&(n.state=4,n.timer.restart(o,n.delay,n.time),o(c))})),n.state=2,n.on.call("start",t,t.__data__,n.index,n.group),2===n.state){for(n.state=3,i=new Array(h=n.tween.length),l=0,u=-1;l<h;++l)(d=n.tween[l].value.call(t,t.__data__,n.index,n.group))&&(i[++u]=d);i.length=u+1}}function o(e){for(var r=e<n.duration?n.ease.call(null,e/n.duration):(n.timer.restart(a),n.state=5,1),s=-1,o=i.length;++s<o;)i[s].call(t,r);5===n.state&&(n.on.call("end",t,t.__data__,n.index,n.group),a())}function a(){for(var i in n.state=6,n.timer.stop(),delete r[e],r)return;delete t.__transition}r[e]=n,n.timer=SO((function(t){n.state=1,n.timer.restart(s,n.delay,n.time),n.delay<=t&&s(t-n.delay)}),0,n.time)}(t,n,{name:e,index:i,group:r,on:TO,tween:IO,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:0})};function OO(t,e){var n=DO(t,e);if(n.state>0)throw new Error("too late; already scheduled");return n}function AO(t,e){var n=DO(t,e);if(n.state>3)throw new Error("too late; already running");return n}function DO(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}var PO,MO,NO,LO,FO=180/Math.PI,UO={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1},BO=function(t,e,n,i,r,s){var o,a,c;return(o=Math.sqrt(t*t+e*e))&&(t/=o,e/=o),(c=t*n+e*i)&&(n-=t*c,i-=e*c),(a=Math.sqrt(n*n+i*i))&&(n/=a,i/=a,c/=a),t*i<e*n&&(t=-t,e=-e,c=-c,o=-o),{translateX:r,translateY:s,rotate:Math.atan2(e,t)*FO,skewX:Math.atan(c)*FO,scaleX:o,scaleY:a}};function jO(t,e,n,i){function r(t){return t.length?t.pop()+" ":""}return function(s,o){var a=[],c=[];return s=t(s),o=t(o),function(t,i,r,s,o,a){if(t!==r||i!==s){var c=o.push("translate(",null,e,null,n);a.push({i:c-4,x:sO(t,r)},{i:c-2,x:sO(i,s)})}else(r||s)&&o.push("translate("+r+e+s+n)}(s.translateX,s.translateY,o.translateX,o.translateY,a,c),function(t,e,n,s){t!==e?(t-e>180?e+=360:e-t>180&&(t+=360),s.push({i:n.push(r(n)+"rotate(",null,i)-2,x:sO(t,e)})):e&&n.push(r(n)+"rotate("+e+i)}(s.rotate,o.rotate,a,c),function(t,e,n,s){t!==e?s.push({i:n.push(r(n)+"skewX(",null,i)-2,x:sO(t,e)}):e&&n.push(r(n)+"skewX("+e+i)}(s.skewX,o.skewX,a,c),function(t,e,n,i,s,o){if(t!==n||e!==i){var a=s.push(r(s)+"scale(",null,",",null,")");o.push({i:a-4,x:sO(t,n)},{i:a-2,x:sO(e,i)})}else 1===n&&1===i||s.push(r(s)+"scale("+n+","+i+")")}(s.scaleX,s.scaleY,o.scaleX,o.scaleY,a,c),s=o=null,function(t){for(var e,n=-1,i=c.length;++n<i;)a[(e=c[n]).i]=e.x(t);return a.join("")}}}var VO=jO((function(t){return"none"===t?UO:(PO||(PO=document.createElement("DIV"),MO=document.documentElement,NO=document.defaultView),PO.style.transform=t,t=NO.getComputedStyle(MO.appendChild(PO),null).getPropertyValue("transform"),MO.removeChild(PO),t=t.slice(7,-1).split(","),BO(+t[0],+t[1],+t[2],+t[3],+t[4],+t[5]))}),"px, ","px)","deg)"),KO=jO((function(t){return null==t?UO:(LO||(LO=document.createElementNS("http://www.w3.org/2000/svg","g")),LO.setAttribute("transform",t),(t=LO.transform.baseVal.consolidate())?BO((t=t.matrix).a,t.b,t.c,t.d,t.e,t.f):UO)}),", ",")",")");function qO(t,e){var n,i;return function(){var r=AO(this,t),s=r.tween;if(s!==n)for(var o=0,a=(i=n=s).length;o<a;++o)if(i[o].name===e){(i=i.slice()).splice(o,1);break}r.tween=i}}function GO(t,e,n){var i,r;if("function"!=typeof n)throw new Error;return function(){var s=AO(this,t),o=s.tween;if(o!==i){r=(i=o).slice();for(var a={name:e,value:n},c=0,l=r.length;c<l;++c)if(r[c].name===e){r[c]=a;break}c===l&&r.push(a)}s.tween=r}}function $O(t,e,n){var i=t._id;return t.each((function(){var t=AO(this,i);(t.value||(t.value={}))[e]=n.apply(this,arguments)})),function(t){return DO(t,i).value[e]}}var HO=function(t,e){var n;return("number"==typeof e?sO:e instanceof LR?ZR:(n=LR(e))?(e=n,ZR):lO)(t,e)};function zO(t){return function(){this.removeAttribute(t)}}function WO(t){return function(){this.removeAttributeNS(t.space,t.local)}}function YO(t,e,n){var i,r,s=n+"";return function(){var o=this.getAttribute(t);return o===s?null:o===i?r:r=e(i=o,n)}}function XO(t,e,n){var i,r,s=n+"";return function(){var o=this.getAttributeNS(t.space,t.local);return o===s?null:o===i?r:r=e(i=o,n)}}function QO(t,e,n){var i,r,s;return function(){var o,a,c=n(this);if(null!=c)return(o=this.getAttribute(t))===(a=c+"")?null:o===i&&a===r?s:(r=a,s=e(i=o,c));this.removeAttribute(t)}}function ZO(t,e,n){var i,r,s;return function(){var o,a,c=n(this);if(null!=c)return(o=this.getAttributeNS(t.space,t.local))===(a=c+"")?null:o===i&&a===r?s:(r=a,s=e(i=o,c));this.removeAttributeNS(t.space,t.local)}}function JO(t,e){return function(n){this.setAttribute(t,e.call(this,n))}}function tA(t,e){return function(n){this.setAttributeNS(t.space,t.local,e.call(this,n))}}function eA(t,e){var n,i;function r(){var r=e.apply(this,arguments);return r!==i&&(n=(i=r)&&tA(t,r)),n}return r._value=e,r}function nA(t,e){var n,i;function r(){var r=e.apply(this,arguments);return r!==i&&(n=(i=r)&&JO(t,r)),n}return r._value=e,r}function iA(t,e){return function(){OO(this,t).delay=+e.apply(this,arguments)}}function rA(t,e){return e=+e,function(){OO(this,t).delay=e}}function sA(t,e){return function(){AO(this,t).duration=+e.apply(this,arguments)}}function oA(t,e){return e=+e,function(){AO(this,t).duration=e}}function aA(t,e){if("function"!=typeof e)throw new Error;return function(){AO(this,t).ease=e}}function cA(t,e,n){var i,r,s=function(t){return(t+"").trim().split(/^|\s+/).every((function(t){var e=t.indexOf(".");return e>=0&&(t=t.slice(0,e)),!t||"start"===t}))}(e)?OO:AO;return function(){var o=s(this,t),a=o.on;a!==i&&(r=(i=a).copy()).on(e,n),o.on=r}}var lA=dR.prototype.constructor;function uA(t){return function(){this.style.removeProperty(t)}}function hA(t,e,n){return function(i){this.style.setProperty(t,e.call(this,i),n)}}function dA(t,e,n){var i,r;function s(){var s=e.apply(this,arguments);return s!==r&&(i=(r=s)&&hA(t,s,n)),i}return s._value=e,s}function pA(t){return function(e){this.textContent=t.call(this,e)}}function mA(t){var e,n;function i(){var i=t.apply(this,arguments);return i!==n&&(e=(n=i)&&pA(i)),e}return i._value=t,i}var fA=0;function gA(t,e,n,i){this._groups=t,this._parents=e,this._name=n,this._id=i}function _A(){return++fA}var yA=dR.prototype;gA.prototype=(function(t){return dR().transition(t)}).prototype={constructor:gA,select:function(t){var e=this._name,n=this._id;"function"!=typeof t&&(t=rI(t));for(var i=this._groups,r=i.length,s=new Array(r),o=0;o<r;++o)for(var a,c,l=i[o],u=l.length,h=s[o]=new Array(u),d=0;d<u;++d)(a=l[d])&&(c=t.call(a,a.__data__,d,l))&&("__data__"in a&&(c.__data__=a.__data__),h[d]=c,RO(h[d],e,n,d,h,DO(a,n)));return new gA(s,this._parents,e,n)},selectAll:function(t){var e=this._name,n=this._id;"function"!=typeof t&&(t=oI(t));for(var i=this._groups,r=i.length,s=[],o=[],a=0;a<r;++a)for(var c,l=i[a],u=l.length,h=0;h<u;++h)if(c=l[h]){for(var d,p=t.call(c,c.__data__,h,l),m=DO(c,n),f=0,g=p.length;f<g;++f)(d=p[f])&&RO(d,e,n,f,p,m);s.push(p),o.push(c)}return new gA(s,o,e,n)},filter:function(t){"function"!=typeof t&&(t=aI(t));for(var e=this._groups,n=e.length,i=new Array(n),r=0;r<n;++r)for(var s,o=e[r],a=o.length,c=i[r]=[],l=0;l<a;++l)(s=o[l])&&t.call(s,s.__data__,l,o)&&c.push(s);return new gA(i,this._parents,this._name,this._id)},merge:function(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,i=e.length,r=Math.min(i,n.length),s=new Array(i),o=0;o<r;++o)for(var a,c=e[o],l=n[o],u=c.length,h=s[o]=new Array(u),d=0;d<u;++d)(a=c[d]||l[d])&&(h[d]=a);for(;o<i;++o)s[o]=e[o];return new gA(s,this._parents,this._name,this._id)},selection:function(){return new lA(this._groups,this._parents)},transition:function(){for(var t=this._name,e=this._id,n=_A(),i=this._groups,r=i.length,s=0;s<r;++s)for(var o,a=i[s],c=a.length,l=0;l<c;++l)if(o=a[l]){var u=DO(o,e);RO(o,t,n,l,a,{time:u.time+u.delay+u.duration,delay:0,duration:u.duration,ease:u.ease})}return new gA(i,this._parents,t,n)},call:yA.call,nodes:yA.nodes,node:yA.node,size:yA.size,empty:yA.empty,each:yA.each,on:function(t,e){var n=this._id;return arguments.length<2?DO(this.node(),n).on.on(t):this.each(cA(n,t,e))},attr:function(t,e){var n=fI(t),i="transform"===n?KO:HO;return this.attrTween(t,"function"==typeof e?(n.local?ZO:QO)(n,i,$O(this,"attr."+t,e)):null==e?(n.local?WO:zO)(n):(n.local?XO:YO)(n,i,e))},attrTween:function(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(null==e)return this.tween(n,null);if("function"!=typeof e)throw new Error;var i=fI(t);return this.tween(n,(i.local?eA:nA)(i,e))},style:function(t,e,n){var i="transform"==(t+="")?VO:HO;return null==e?this.styleTween(t,function(t,e){var n,i,r;return function(){var s=xI(this,t),o=(this.style.removeProperty(t),xI(this,t));return s===o?null:s===n&&o===i?r:r=e(n=s,i=o)}}(t,i)).on("end.style."+t,uA(t)):"function"==typeof e?this.styleTween(t,function(t,e,n){var i,r,s;return function(){var o=xI(this,t),a=n(this),c=a+"";return null==a&&(this.style.removeProperty(t),c=a=xI(this,t)),o===c?null:o===i&&c===r?s:(r=c,s=e(i=o,a))}}(t,i,$O(this,"style."+t,e))).each(function(t,e){var n,i,r,s,o="style."+e,a="end."+o;return function(){var c=AO(this,t),l=c.on,u=null==c.value[o]?s||(s=uA(e)):void 0;l===n&&r===u||(i=(n=l).copy()).on(a,r=u),c.on=i}}(this._id,t)):this.styleTween(t,function(t,e,n){var i,r,s=n+"";return function(){var o=xI(this,t);return o===s?null:o===i?r:r=e(i=o,n)}}(t,i,e),n).on("end.style."+t,null)},styleTween:function(t,e,n){var i="style."+(t+="");if(arguments.length<2)return(i=this.tween(i))&&i._value;if(null==e)return this.tween(i,null);if("function"!=typeof e)throw new Error;return this.tween(i,dA(t,e,null==n?"":n))},text:function(t){return this.tween("text","function"==typeof t?function(t){return function(){var e=t(this);this.textContent=null==e?"":e}}($O(this,"text",t)):function(t){return function(){this.textContent=t}}(null==t?"":t+""))},textTween:function(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(null==t)return this.tween(e,null);if("function"!=typeof t)throw new Error;return this.tween(e,mA(t))},remove:function(){return this.on("end.remove",(t=this._id,function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}));var t},tween:function(t,e){var n=this._id;if(t+="",arguments.length<2){for(var i,r=DO(this.node(),n).tween,s=0,o=r.length;s<o;++s)if((i=r[s]).name===t)return i.value;return null}return this.each((null==e?qO:GO)(n,t,e))},delay:function(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?iA:rA)(e,t)):DO(this.node(),e).delay},duration:function(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?sA:oA)(e,t)):DO(this.node(),e).duration},ease:function(t){var e=this._id;return arguments.length?this.each(aA(e,t)):DO(this.node(),e).ease},end:function(){var t,e,n=this,i=n._id,r=n.size();return new Promise((function(s,o){var a={value:o},c={value:function(){0==--r&&s()}};n.each((function(){var n=AO(this,i),r=n.on;r!==t&&((e=(t=r).copy())._.cancel.push(a),e._.interrupt.push(a),e._.end.push(c)),n.on=e}))}))}};var vA={time:null,delay:0,duration:250,ease:function(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}};function bA(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))return vA.time=vO(),vA;return n}function wA(t){return{type:t}}dR.prototype.interrupt=function(t){return this.each((function(){!function(t,e){var n,i,r,s=t.__transition,o=!0;if(s){for(r in e=null==e?null:e+"",s)(n=s[r]).name===e?(i=n.state>2&&n.state<5,n.state=6,n.timer.stop(),n.on.call(i?"interrupt":"cancel",t,t.__data__,n.index,n.group),delete s[r]):o=!1;o&&delete t.__transition}}(this,t)}))},dR.prototype.transition=function(t){var e,n;t instanceof gA?(e=t._id,t=t._name):(e=_A(),(n=vA).time=vO(),t=null==t?null:t+"");for(var i=this._groups,r=i.length,s=0;s<r;++s)for(var o,a=i[s],c=a.length,l=0;l<c;++l)(o=a[l])&&RO(o,t,e,l,a,n||bA(o,e));return new gA(i,this._parents,t,e)},["w","e"].map(wA),["n","s"].map(wA),["n","w","e","s","nw","ne","sw","se"].map(wA);var SA=function(t,e){return t<e?-1:t>e?1:t>=e?0:NaN},EA=Math.sqrt(50),kA=Math.sqrt(10),CA=Math.sqrt(2);function xA(t,e,n){var i=(e-t)/Math.max(0,n),r=Math.floor(Math.log(i)/Math.LN10),s=i/Math.pow(10,r);return r>=0?(s>=EA?10:s>=kA?5:s>=CA?2:1)*Math.pow(10,r):-Math.pow(10,-r)/(s>=EA?10:s>=kA?5:s>=CA?2:1)}var TA=new Date,IA=new Date;function RA(t,e,n,i){function r(e){return t(e=0===arguments.length?new Date:new Date(+e)),e}return r.floor=function(e){return t(e=new Date(+e)),e},r.ceil=function(n){return t(n=new Date(n-1)),e(n,1),t(n),n},r.round=function(t){var e=r(t),n=r.ceil(t);return t-e<n-t?e:n},r.offset=function(t,n){return e(t=new Date(+t),null==n?1:Math.floor(n)),t},r.range=function(n,i,s){var o,a=[];if(n=r.ceil(n),s=null==s?1:Math.floor(s),!(n<i&&s>0))return a;do{a.push(o=new Date(+n)),e(n,s),t(n)}while(o<n&&n<i);return a},r.filter=function(n){return RA((function(e){if(e>=e)for(;t(e),!n(e);)e.setTime(e-1)}),(function(t,i){if(t>=t)if(i<0)for(;++i<=0;)for(;e(t,-1),!n(t););else for(;--i>=0;)for(;e(t,1),!n(t););}))},n&&(r.count=function(e,i){return TA.setTime(+e),IA.setTime(+i),t(TA),t(IA),Math.floor(n(TA,IA))},r.every=function(t){return t=Math.floor(t),isFinite(t)&&t>0?t>1?r.filter(i?function(e){return i(e)%t==0}:function(e){return r.count(0,e)%t==0}):r:null}),r}var OA=RA((function(t){t.setMonth(0,1),t.setHours(0,0,0,0)}),(function(t,e){t.setFullYear(t.getFullYear()+e)}),(function(t,e){return e.getFullYear()-t.getFullYear()}),(function(t){return t.getFullYear()}));OA.every=function(t){return isFinite(t=Math.floor(t))&&t>0?RA((function(e){e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)}),(function(e,n){e.setFullYear(e.getFullYear()+n*t)})):null};var AA=OA;function DA(t){return RA((function(e){e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)}),(function(t,e){t.setDate(t.getDate()+7*e)}),(function(t,e){return(e-t-6e4*(e.getTimezoneOffset()-t.getTimezoneOffset()))/6048e5}))}RA((function(t){t.setDate(1),t.setHours(0,0,0,0)}),(function(t,e){t.setMonth(t.getMonth()+e)}),(function(t,e){return e.getMonth()-t.getMonth()+12*(e.getFullYear()-t.getFullYear())}),(function(t){return t.getMonth()}));var PA=DA(0),MA=DA(1),NA=(DA(2),DA(3),DA(4)),LA=(DA(5),DA(6),RA((function(t){t.setHours(0,0,0,0)}),(function(t,e){t.setDate(t.getDate()+e)}),(function(t,e){return(e-t-6e4*(e.getTimezoneOffset()-t.getTimezoneOffset()))/864e5}),(function(t){return t.getDate()-1}))),FA=(RA((function(t){t.setTime(t-t.getMilliseconds()-1e3*t.getSeconds()-6e4*t.getMinutes())}),(function(t,e){t.setTime(+t+36e5*e)}),(function(t,e){return(e-t)/36e5}),(function(t){return t.getHours()})),RA((function(t){t.setTime(t-t.getMilliseconds()-1e3*t.getSeconds())}),(function(t,e){t.setTime(+t+6e4*e)}),(function(t,e){return(e-t)/6e4}),(function(t){return t.getMinutes()})),RA((function(t){t.setTime(t-t.getMilliseconds())}),(function(t,e){t.setTime(+t+1e3*e)}),(function(t,e){return(e-t)/1e3}),(function(t){return t.getUTCSeconds()})),RA((function(){}),(function(t,e){t.setTime(+t+e)}),(function(t,e){return e-t})));function UA(t){return RA((function(e){e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)}),(function(t,e){t.setUTCDate(t.getUTCDate()+7*e)}),(function(t,e){return(e-t)/6048e5}))}FA.every=function(t){return t=Math.floor(t),isFinite(t)&&t>0?t>1?RA((function(e){e.setTime(Math.floor(e/t)*t)}),(function(e,n){e.setTime(+e+n*t)}),(function(e,n){return(n-e)/t})):FA:null};var BA=UA(0),jA=UA(1),VA=(UA(2),UA(3),UA(4)),KA=(UA(5),UA(6),RA((function(t){t.setUTCHours(0,0,0,0)}),(function(t,e){t.setUTCDate(t.getUTCDate()+e)}),(function(t,e){return(e-t)/864e5}),(function(t){return t.getUTCDate()-1}))),qA=RA((function(t){t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)}),(function(t,e){t.setUTCFullYear(t.getUTCFullYear()+e)}),(function(t,e){return e.getUTCFullYear()-t.getUTCFullYear()}),(function(t){return t.getUTCFullYear()}));qA.every=function(t){return isFinite(t=Math.floor(t))&&t>0?RA((function(e){e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)}),(function(e,n){e.setUTCFullYear(e.getUTCFullYear()+n*t)})):null};var GA=qA;var $A={"-":"",_:" ",0:"0"},HA=/[\\^$*+?|[\]().{}]/g;function zA(t,e,n){var i=t<0?"-":"",r=(i?-t:t)+"",s=r.length;return i+(s<n?new Array(n-s+1).join(e)+r:r)}function WA(t){return t.replace(HA,"\\$&")}function YA(t){return new RegExp("^(?:"+t.map(WA).join("|")+")","i")}function XA(t){for(var e={},n=-1,i=t.length;++n<i;)e[t[n].toLowerCase()]=n;return e}function QA(t,e){return zA(t.getDate(),e,2)}function ZA(t,e){return zA(t.getHours(),e,2)}function JA(t,e){return zA(t.getHours()%12||12,e,2)}function tD(t,e){return zA(1+LA.count(AA(t),t),e,3)}function eD(t,e){return zA(t.getMilliseconds(),e,3)}function nD(t,e){return eD(t,e)+"000"}function iD(t,e){return zA(t.getMonth()+1,e,2)}function rD(t,e){return zA(t.getMinutes(),e,2)}function sD(t,e){return zA(t.getSeconds(),e,2)}function oD(t){var e=t.getDay();return 0===e?7:e}function aD(t,e){return zA(PA.count(AA(t)-1,t),e,2)}function cD(t,e){var n=t.getDay();return t=n>=4||0===n?NA(t):NA.ceil(t),zA(NA.count(AA(t),t)+(4===AA(t).getDay()),e,2)}function lD(t){return t.getDay()}function uD(t,e){return zA(MA.count(AA(t)-1,t),e,2)}function hD(t,e){return zA(t.getFullYear()%100,e,2)}function dD(t,e){return zA(t.getFullYear()%1e4,e,4)}function pD(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+zA(e/60|0,"0",2)+zA(e%60,"0",2)}function mD(t,e){return zA(t.getUTCDate(),e,2)}function fD(t,e){return zA(t.getUTCHours(),e,2)}function gD(t,e){return zA(t.getUTCHours()%12||12,e,2)}function _D(t,e){return zA(1+KA.count(GA(t),t),e,3)}function yD(t,e){return zA(t.getUTCMilliseconds(),e,3)}function vD(t,e){return yD(t,e)+"000"}function bD(t,e){return zA(t.getUTCMonth()+1,e,2)}function wD(t,e){return zA(t.getUTCMinutes(),e,2)}function SD(t,e){return zA(t.getUTCSeconds(),e,2)}function ED(t){var e=t.getUTCDay();return 0===e?7:e}function kD(t,e){return zA(BA.count(GA(t)-1,t),e,2)}function CD(t,e){var n=t.getUTCDay();return t=n>=4||0===n?VA(t):VA.ceil(t),zA(VA.count(GA(t),t)+(4===GA(t).getUTCDay()),e,2)}function xD(t){return t.getUTCDay()}function TD(t,e){return zA(jA.count(GA(t)-1,t),e,2)}function ID(t,e){return zA(t.getUTCFullYear()%100,e,2)}function RD(t,e){return zA(t.getUTCFullYear()%1e4,e,4)}function OD(){return"+0000"}function AD(){return"%"}function DD(t){return+t}function PD(t){return Math.floor(+t/1e3)}!function(t){var e=t.dateTime,n=t.date,i=t.time,r=t.periods,s=t.days,o=t.shortDays,a=t.months,c=t.shortMonths,l=(YA(r),XA(r),YA(s),XA(s),YA(o),XA(o),YA(a),XA(a),YA(c),XA(c),{a:function(t){return o[t.getDay()]},A:function(t){return s[t.getDay()]},b:function(t){return c[t.getMonth()]},B:function(t){return a[t.getMonth()]},c:null,d:QA,e:QA,f:nD,H:ZA,I:JA,j:tD,L:eD,m:iD,M:rD,p:function(t){return r[+(t.getHours()>=12)]},q:function(t){return 1+~~(t.getMonth()/3)},Q:DD,s:PD,S:sD,u:oD,U:aD,V:cD,w:lD,W:uD,x:null,X:null,y:hD,Y:dD,Z:pD,"%":AD}),u={a:function(t){return o[t.getUTCDay()]},A:function(t){return s[t.getUTCDay()]},b:function(t){return c[t.getUTCMonth()]},B:function(t){return a[t.getUTCMonth()]},c:null,d:mD,e:mD,f:vD,H:fD,I:gD,j:_D,L:yD,m:bD,M:wD,p:function(t){return r[+(t.getUTCHours()>=12)]},q:function(t){return 1+~~(t.getUTCMonth()/3)},Q:DD,s:PD,S:SD,u:ED,U:kD,V:CD,w:xD,W:TD,x:null,X:null,y:ID,Y:RD,Z:OD,"%":AD};function h(t,e){return function(n){var i,r,s,o=[],a=-1,c=0,l=t.length;for(n instanceof Date||(n=new Date(+n));++a<l;)37===t.charCodeAt(a)&&(o.push(t.slice(c,a)),null!=(r=$A[i=t.charAt(++a)])?i=t.charAt(++a):r="e"===i?" ":"0",(s=e[i])&&(i=s(n,r)),o.push(i),c=a+1);return o.push(t.slice(c,a)),o.join("")}}l.x=h(n,l),l.X=h(i,l),l.c=h(e,l),u.x=h(n,u),u.X=h(i,u),u.c=h(e,u)}({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});var MD,ND,LD=(1===(MD=SA).length&&(ND=MD,MD=function(t,e){return SA(ND(t),e)}),{left:function(t,e,n,i){for(null==n&&(n=0),null==i&&(i=t.length);n<i;){var r=n+i>>>1;MD(t[r],e)<0?n=r+1:i=r}return n},right:function(t,e,n,i){for(null==n&&(n=0),null==i&&(i=t.length);n<i;){var r=n+i>>>1;MD(t[r],e)>0?i=r:n=r+1}return n}}).right,FD=function(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}},UD=function(t){return+t},BD=[0,1];function jD(t){return t}function VD(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:(n=isNaN(e)?NaN:.5,function(){return n});var n}function KD(t,e,n){var i=t[0],r=t[1],s=e[0],o=e[1];return r<i?(i=VD(r,i),s=n(o,s)):(i=VD(i,r),s=n(s,o)),function(t){return s(i(t))}}function qD(t,e,n){var i=Math.min(t.length,e.length)-1,r=new Array(i),s=new Array(i),o=-1;for(t[i]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++o<i;)r[o]=VD(t[o],t[o+1]),s[o]=n(e[o],e[o+1]);return function(e){var n=LD(t,e,1,i)-1;return s[n](r[n](e))}}function GD(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function $D(){return function(){var t,e,n,i,r,s,o=BD,a=BD,c=uO,l=jD;function u(){var t,e,n,c=Math.min(o.length,a.length);return l!==jD&&((t=o[0])>(e=o[c-1])&&(n=t,t=e,e=n),l=function(n){return Math.max(t,Math.min(e,n))}),i=c>2?qD:KD,r=s=null,h}function h(e){return isNaN(e=+e)?n:(r||(r=i(o.map(t),a,c)))(t(l(e)))}return h.invert=function(n){return l(e((s||(s=i(a,o.map(t),sO)))(n)))},h.domain=function(t){return arguments.length?(o=Array.from(t,UD),u()):o.slice()},h.range=function(t){return arguments.length?(a=Array.from(t),u()):a.slice()},h.rangeRound=function(t){return a=Array.from(t),c=FD,u()},h.clamp=function(t){return arguments.length?(l=!!t||jD,u()):l!==jD},h.interpolate=function(t){return arguments.length?(c=t,u()):c},h.unknown=function(t){return arguments.length?(n=t,h):n},function(n,i){return t=n,e=i,u()}}()(jD,jD)}function HD(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t)}return this}var zD=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function WD(t){if(!(e=zD.exec(t)))throw new Error("invalid format: "+t);var e;return new YD({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}function YD(t){this.fill=void 0===t.fill?" ":t.fill+"",this.align=void 0===t.align?">":t.align+"",this.sign=void 0===t.sign?"-":t.sign+"",this.symbol=void 0===t.symbol?"":t.symbol+"",this.zero=!!t.zero,this.width=void 0===t.width?void 0:+t.width,this.comma=!!t.comma,this.precision=void 0===t.precision?void 0:+t.precision,this.trim=!!t.trim,this.type=void 0===t.type?"":t.type+""}WD.prototype=YD.prototype,YD.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};var XD,QD,ZD,JD,tP=function(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,i=t.slice(0,n);return[i.length>1?i[0]+i.slice(2):i,+t.slice(n+1)]},eP=function(t){return(t=tP(Math.abs(t)))?t[1]:NaN},nP=function(t,e){var n=tP(t,e);if(!n)return t+"";var i=n[0],r=n[1];return r<0?"0."+new Array(-r).join("0")+i:i.length>r+1?i.slice(0,r+1)+"."+i.slice(r+1):i+new Array(r-i.length+2).join("0")},iP={"%":function(t,e){return(100*t).toFixed(e)},b:function(t){return Math.round(t).toString(2)},c:function(t){return t+""},d:function(t){return Math.round(t).toString(10)},e:function(t,e){return t.toExponential(e)},f:function(t,e){return t.toFixed(e)},g:function(t,e){return t.toPrecision(e)},o:function(t){return Math.round(t).toString(8)},p:function(t,e){return nP(100*t,e)},r:nP,s:function(t,e){var n=tP(t,e);if(!n)return t+"";var i=n[0],r=n[1],s=r-(XD=3*Math.max(-8,Math.min(8,Math.floor(r/3))))+1,o=i.length;return s===o?i:s>o?i+new Array(s-o+1).join("0"):s>0?i.slice(0,s)+"."+i.slice(s):"0."+new Array(1-s).join("0")+tP(t,Math.max(0,e+s-1))[0]},X:function(t){return Math.round(t).toString(16).toUpperCase()},x:function(t){return Math.round(t).toString(16)}},rP=function(t){return t},sP=Array.prototype.map,oP=["y","z","a","f","p","n","\xb5","m","","k","M","G","T","P","E","Z","Y"];QD=function(t){var e,n,i=void 0===t.grouping||void 0===t.thousands?rP:(e=sP.call(t.grouping,Number),n=t.thousands+"",function(t,i){for(var r=t.length,s=[],o=0,a=e[0],c=0;r>0&&a>0&&(c+a+1>i&&(a=Math.max(1,i-c)),s.push(t.substring(r-=a,r+a)),!((c+=a+1)>i));)a=e[o=(o+1)%e.length];return s.reverse().join(n)}),r=void 0===t.currency?"":t.currency[0]+"",s=void 0===t.currency?"":t.currency[1]+"",o=void 0===t.decimal?".":t.decimal+"",a=void 0===t.numerals?rP:function(t){return function(e){return e.replace(/[0-9]/g,(function(e){return t[+e]}))}}(sP.call(t.numerals,String)),c=void 0===t.percent?"%":t.percent+"",l=void 0===t.minus?"-":t.minus+"",u=void 0===t.nan?"NaN":t.nan+"";function h(t){var e=(t=WD(t)).fill,n=t.align,h=t.sign,d=t.symbol,p=t.zero,m=t.width,f=t.comma,g=t.precision,_=t.trim,y=t.type;"n"===y?(f=!0,y="g"):iP[y]||(void 0===g&&(g=12),_=!0,y="g"),(p||"0"===e&&"="===n)&&(p=!0,e="0",n="=");var v="$"===d?r:"#"===d&&/[boxX]/.test(y)?"0"+y.toLowerCase():"",b="$"===d?s:/[%p]/.test(y)?c:"",w=iP[y],S=/[defgprs%]/.test(y);function E(t){var r,s,c,d=v,E=b;if("c"===y)E=w(t)+E,t="";else{var k=(t=+t)<0||1/t<0;if(t=isNaN(t)?u:w(Math.abs(t),g),_&&(t=function(t){t:for(var e,n=t.length,i=1,r=-1;i<n;++i)switch(t[i]){case".":r=e=i;break;case"0":0===r&&(r=i),e=i;break;default:if(!+t[i])break t;r>0&&(r=0)}return r>0?t.slice(0,r)+t.slice(e+1):t}(t)),k&&0==+t&&"+"!==h&&(k=!1),d=(k?"("===h?h:l:"-"===h||"("===h?"":h)+d,E=("s"===y?oP[8+XD/3]:"")+E+(k&&"("===h?")":""),S)for(r=-1,s=t.length;++r<s;)if(48>(c=t.charCodeAt(r))||c>57){E=(46===c?o+t.slice(r+1):t.slice(r))+E,t=t.slice(0,r);break}}f&&!p&&(t=i(t,1/0));var C=d.length+t.length+E.length,x=C<m?new Array(m-C+1).join(e):"";switch(f&&p&&(t=i(x+t,x.length?m-E.length:1/0),x=""),n){case"<":t=d+t+E+x;break;case"=":t=d+x+t+E;break;case"^":t=x.slice(0,C=x.length>>1)+d+t+E+x.slice(C);break;default:t=x+d+t+E}return a(t)}return g=void 0===g?6:/[gprs]/.test(y)?Math.max(1,Math.min(21,g)):Math.max(0,Math.min(20,g)),E.toString=function(){return t+""},E}return{format:h,formatPrefix:function(t,e){var n=h(((t=WD(t)).type="f",t)),i=3*Math.max(-8,Math.min(8,Math.floor(eP(e)/3))),r=Math.pow(10,-i),s=oP[8+i/3];return function(t){return n(r*t)+s}}}}({decimal:".",thousands:",",grouping:[3],currency:["$",""],minus:"-"}),ZD=QD.format,JD=QD.formatPrefix;function aP(t){var e=t.domain;return t.ticks=function(t){var n=e();return function(t,e,n){var i,r,s,o,a=-1;if(n=+n,(t=+t)==(e=+e)&&n>0)return[t];if((i=e<t)&&(r=t,t=e,e=r),0===(o=xA(t,e,n))||!isFinite(o))return[];if(o>0)for(t=Math.ceil(t/o),e=Math.floor(e/o),s=new Array(r=Math.ceil(e-t+1));++a<r;)s[a]=(t+a)*o;else for(o=-o,t=Math.floor(t*o),e=Math.ceil(e*o),s=new Array(r=Math.ceil(e-t+1));++a<r;)s[a]=(t+a)/o;return i&&s.reverse(),s}(n[0],n[n.length-1],null==t?10:t)},t.tickFormat=function(t,n){var i=e();return function(t,e,n,i){var r,s=function(t,e,n){var i=Math.abs(e-t)/Math.max(0,n),r=Math.pow(10,Math.floor(Math.log(i)/Math.LN10)),s=i/r;return s>=EA?r*=10:s>=kA?r*=5:s>=CA&&(r*=2),e<t?-r:r}(t,e,n);switch((i=WD(null==i?",f":i)).type){case"s":var o=Math.max(Math.abs(t),Math.abs(e));return null!=i.precision||isNaN(r=function(t,e){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(eP(e)/3)))-eP(Math.abs(t)))}(s,o))||(i.precision=r),JD(i,o);case"":case"e":case"g":case"p":case"r":null!=i.precision||isNaN(r=function(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,eP(e)-eP(t))+1}(s,Math.max(Math.abs(t),Math.abs(e))))||(i.precision=r-("e"===i.type));break;case"f":case"%":null!=i.precision||isNaN(r=function(t){return Math.max(0,-eP(Math.abs(t)))}(s))||(i.precision=r-2*("%"===i.type))}return ZD(i)}(i[0],i[i.length-1],null==t?10:t,n)},t.nice=function(n){null==n&&(n=10);var i,r=e(),s=0,o=r.length-1,a=r[s],c=r[o];return c<a&&(i=a,a=c,c=i,i=s,s=o,o=i),(i=xA(a,c,n))>0?i=xA(a=Math.floor(a/i)*i,c=Math.ceil(c/i)*i,n):i<0&&(i=xA(a=Math.ceil(a*i)/i,c=Math.floor(c*i)/i,n)),i>0?(r[s]=Math.floor(a/i)*i,r[o]=Math.ceil(c/i)*i,e(r)):i<0&&(r[s]=Math.ceil(a*i)/i,r[o]=Math.floor(c*i)/i,e(r)),t},t}function cP(){var t=$D();return t.copy=function(){return GD(t,cP())},HD.apply(t,arguments),aP(t)}var lP=function(t,e,n){t=+t,e=+e,n=(r=arguments.length)<2?(e=t,t=0,1):r<3?1:+n;for(var i=-1,r=0|Math.max(0,Math.ceil((e-t)/n)),s=new Array(r);++i<r;)s[i]=t+i*n;return s};const uP=Symbol("implicit");function hP(){var t=new Map,e=[],n=[],i=uP;function r(r){var s=r+"",o=t.get(s);if(!o){if(i!==uP)return i;t.set(s,o=e.push(r))}return n[(o-1)%n.length]}return r.domain=function(n){if(!arguments.length)return e.slice();e=[],t=new Map;for(const i of n){const n=i+"";t.has(n)||t.set(n,e.push(i))}return r},r.range=function(t){return arguments.length?(n=Array.from(t),r):n.slice()},r.unknown=function(t){return arguments.length?(i=t,r):i},r.copy=function(){return hP(e,n).unknown(i)},HD.apply(r,arguments),r}function dP(){var t,e,n=hP().unknown(void 0),i=n.domain,r=n.range,s=0,o=1,a=!1,c=0,l=0,u=.5;function h(){var n=i().length,h=o<s,d=h?o:s,p=h?s:o;t=(p-d)/Math.max(1,n-c+2*l),a&&(t=Math.floor(t)),d+=(p-d-t*(n-c))*u,e=t*(1-c),a&&(d=Math.round(d),e=Math.round(e));var m=lP(n).map((function(e){return d+t*e}));return r(h?m.reverse():m)}return delete n.unknown,n.domain=function(t){return arguments.length?(i(t),h()):i()},n.range=function(t){return arguments.length?([s,o]=t,s=+s,o=+o,h()):[s,o]},n.rangeRound=function(t){return[s,o]=t,s=+s,o=+o,a=!0,h()},n.bandwidth=function(){return e},n.step=function(){return t},n.round=function(t){return arguments.length?(a=!!t,h()):a},n.padding=function(t){return arguments.length?(c=Math.min(1,l=+t),h()):c},n.paddingInner=function(t){return arguments.length?(c=Math.min(1,t),h()):c},n.paddingOuter=function(t){return arguments.length?(l=+t,h()):l},n.align=function(t){return arguments.length?(u=Math.max(0,Math.min(1,t)),h()):u},n.copy=function(){return dP(i(),[s,o]).round(a).paddingInner(c).paddingOuter(l).align(u)},HD.apply(h(),arguments)}function pP(t,e){let n;if(void 0===e)for(const i of t)null!=i&&(n<i||void 0===n&&i>=i)&&(n=i);else{let i=-1;for(let r of t)null!=(r=e(r,++i,t))&&(n<r||void 0===n&&r>=r)&&(n=r)}return n}function mP(t,e){let n;if(void 0===e)for(const i of t)null!=i&&(n>i||void 0===n&&i>=i)&&(n=i);else{let i=-1;for(let r of t)null!=(r=e(r,++i,t))&&(n>r||void 0===n&&r>=r)&&(n=r)}return n}function fP(t,e,n){const i=t[e];t[e]=t[n],t[n]=i}function gP(t,e,n){if(i=(t=Float64Array.from(function*(t,e){if(void 0===e)for(let n of t)null!=n&&(n=+n)>=n&&(yield n);else{let n=-1;for(let i of t)null!=(i=e(i,++n,t))&&(i=+i)>=i&&(yield i)}}(t,n))).length){if((e=+e)<=0||i<2)return mP(t);if(e>=1)return pP(t);var i,r=(i-1)*e,s=Math.floor(r),o=pP(function t(e,n,i=0,r=e.length-1,s=SA){for(;r>i;){if(r-i>600){const o=r-i+1,a=n-i+1,c=Math.log(o),l=.5*Math.exp(2*c/3),u=.5*Math.sqrt(c*l*(o-l)/o)*(a-o/2<0?-1:1);t(e,n,Math.max(i,Math.floor(n-a*l/o+u)),Math.min(r,Math.floor(n+(o-a)*l/o+u)),s)}const o=e[n];let a=i,c=r;for(fP(e,i,n),s(e[r],o)>0&&fP(e,i,r);a<c;){for(fP(e,a,c),++a,--c;s(e[a],o)<0;)++a;for(;s(e[c],o)>0;)--c}0===s(e[i],o)?fP(e,i,c):(++c,fP(e,c,r)),c<=n&&(i=c+1),n<=c&&(r=c-1)}return e}(t,s).subarray(0,s+1));return o+(mP(t.subarray(s+1))-o)*(r-s)}}function _P(t){this._context=t}_P.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e)}}};var yP=Math.PI,vP=2*yP,bP=vP-1e-6;function wP(){this._x0=this._y0=this._x1=this._y1=null,this._=""}wP.prototype=(function(){return new wP}).prototype={constructor:wP,moveTo:function(t,e){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(t,e){this._+="L"+(this._x1=+t)+","+(this._y1=+e)},quadraticCurveTo:function(t,e,n,i){this._+="Q"+ +t+","+ +e+","+(this._x1=+n)+","+(this._y1=+i)},bezierCurveTo:function(t,e,n,i,r,s){this._+="C"+ +t+","+ +e+","+ +n+","+ +i+","+(this._x1=+r)+","+(this._y1=+s)},arcTo:function(t,e,n,i,r){var s=this._x1,o=this._y1,a=(n=+n)-(t=+t),c=(i=+i)-(e=+e),l=s-t,u=o-e,h=l*l+u*u;if((r=+r)<0)throw new Error("negative radius: "+r);if(null===this._x1)this._+="M"+(this._x1=t)+","+(this._y1=e);else if(h>1e-6)if(Math.abs(u*a-c*l)>1e-6&&r){var d=n-s,p=i-o,m=a*a+c*c,f=d*d+p*p,g=Math.sqrt(m),_=Math.sqrt(h),y=r*Math.tan((yP-Math.acos((m+h-f)/(2*g*_)))/2),v=y/_,b=y/g;Math.abs(v-1)>1e-6&&(this._+="L"+(t+v*l)+","+(e+v*u)),this._+="A"+r+","+r+",0,0,"+ +(u*d>l*p)+","+(this._x1=t+b*a)+","+(this._y1=e+b*c)}else this._+="L"+(this._x1=t)+","+(this._y1=e)},arc:function(t,e,n,i,r,s){t=+t,e=+e,s=!!s;var o=(n=+n)*Math.cos(i),a=n*Math.sin(i),c=t+o,l=e+a,u=1^s,h=s?i-r:r-i;if(n<0)throw new Error("negative radius: "+n);null===this._x1?this._+="M"+c+","+l:(Math.abs(this._x1-c)>1e-6||Math.abs(this._y1-l)>1e-6)&&(this._+="L"+c+","+l),n&&(h<0&&(h=h%vP+vP),h>bP?this._+="A"+n+","+n+",0,1,"+u+","+(t-o)+","+(e-a)+"A"+n+","+n+",0,1,"+u+","+(this._x1=c)+","+(this._y1=l):h>1e-6&&(this._+="A"+n+","+n+",0,"+ +(h>=yP)+","+u+","+(this._x1=t+n*Math.cos(r))+","+(this._y1=e+n*Math.sin(r))))},rect:function(t,e,n,i){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)+"h"+ +n+"v"+ +i+"h"+-n+"Z"},toString:function(){return this._}};var SP=function(){};function EP(t,e,n){t._context.bezierCurveTo(t._x1+t._k*(t._x2-t._x0),t._y1+t._k*(t._y2-t._y0),t._x2+t._k*(t._x1-e),t._y2+t._k*(t._y1-n),t._x2,t._y2)}function kP(t,e){this._context=t,this._k=(1-e)/6}function CP(t,e){this._context=t,this._k=(1-e)/6}function xP(t){this._curve=t}kP.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:EP(this,this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2,this._x1=t,this._y1=e;break;case 2:this._point=3;default:EP(this,t,e)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}},function t(e){function n(t){return new kP(t,e)}return n.tension=function(e){return t(+e)},n}(0),CP.prototype={areaStart:SP,areaEnd:SP,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:EP(this,t,e)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}},function t(e){function n(t){return new CP(t,e)}return n.tension=function(e){return t(+e)},n}(0),xP.prototype={areaStart:function(){this._curve.areaStart()},areaEnd:function(){this._curve.areaEnd()},lineStart:function(){this._curve.lineStart()},lineEnd:function(){this._curve.lineEnd()},point:function(t,e){this._curve.point(e*Math.sin(t),e*-Math.cos(t))}},Math,Math,Math,Math,Math,Math,Math,Math;var TP=function(t,e,n,i,r){for(var s,o=t.children,a=-1,c=o.length,l=t.value&&(i-e)/t.value;++a<c;)(s=o[a]).y0=n,s.y1=r,s.x0=e,s.x1=e+=s.value*l},IP=function(t,e,n,i,r){for(var s,o=t.children,a=-1,c=o.length,l=t.value&&(r-n)/t.value;++a<c;)(s=o[a]).x0=e,s.x1=i,s.y0=n,s.y1=n+=s.value*l};function RP(t){var e=0,n=t.children,i=n&&n.length;if(i)for(;--i>=0;)e+=n[i].value;else e=1;t.value=e}function OP(t,e){var n,i,r,s,o,a=new MP(t),c=+t.value&&(a.value=t.value),l=[a];for(null==e&&(e=AP);n=l.pop();)if(c&&(n.value=+n.data.value),(r=e(n.data))&&(o=r.length))for(n.children=new Array(o),s=o-1;s>=0;--s)l.push(i=n.children[s]=new MP(r[s])),i.parent=n,i.depth=n.depth+1;return a.eachBefore(PP)}function AP(t){return t.children}function DP(t){t.data=t.data.data}function PP(t){var e=0;do{t.height=e}while((t=t.parent)&&t.height<++e)}function MP(t){this.data=t,this.depth=this.height=0,this.parent=null}!function t(e){function n(t,n,i,r,s){!function(t,e,n,i,r,s){for(var o,a,c,l,u,h,d,p,m,f,g,_=[],y=e.children,v=0,b=0,w=y.length,S=e.value;v<w;){c=r-n,l=s-i;do{u=y[b++].value}while(!u&&b<w);for(h=d=u,g=u*u*(f=Math.max(l/c,c/l)/(S*t)),m=Math.max(d/g,g/h);b<w;++b){if(u+=a=y[b].value,a<h&&(h=a),a>d&&(d=a),g=u*u*f,(p=Math.max(d/g,g/h))>m){u-=a;break}m=p}_.push(o={value:u,dice:c<l,children:y.slice(v,b)}),o.dice?TP(o,n,i,r,S?i+=l*u/S:s):IP(o,n,i,S?n+=c*u/S:r,s),S-=u,v=b}}(e,t,n,i,r,s)}return n.ratio=function(e){return t((e=+e)>1?e:1)},n}((1+Math.sqrt(5))/2),MP.prototype=OP.prototype={constructor:MP,count:function(){return this.eachAfter(RP)},each:function(t){var e,n,i,r,s=this,o=[s];do{for(e=o.reverse(),o=[];s=e.pop();)if(t(s),n=s.children)for(i=0,r=n.length;i<r;++i)o.push(n[i])}while(o.length);return this},eachAfter:function(t){for(var e,n,i,r=this,s=[r],o=[];r=s.pop();)if(o.push(r),e=r.children)for(n=0,i=e.length;n<i;++n)s.push(e[n]);for(;r=o.pop();)t(r);return this},eachBefore:function(t){for(var e,n,i=this,r=[i];i=r.pop();)if(t(i),e=i.children)for(n=e.length-1;n>=0;--n)r.push(e[n]);return this},sum:function(t){return this.eachAfter((function(e){for(var n=+t(e.data)||0,i=e.children,r=i&&i.length;--r>=0;)n+=i[r].value;e.value=n}))},sort:function(t){return this.eachBefore((function(e){e.children&&e.children.sort(t)}))},path:function(t){for(var e=this,n=function(t,e){if(t===e)return t;var n=t.ancestors(),i=e.ancestors(),r=null;for(t=n.pop(),e=i.pop();t===e;)r=t,t=n.pop(),e=i.pop();return r}(e,t),i=[e];e!==n;)i.push(e=e.parent);for(var r=i.length;t!==n;)i.splice(r,0,t),t=t.parent;return i},ancestors:function(){for(var t=this,e=[t];t=t.parent;)e.push(t);return e},descendants:function(){var t=[];return this.each((function(e){t.push(e)})),t},leaves:function(){var t=[];return this.eachBefore((function(e){e.children||t.push(e)})),t},links:function(){var t=this,e=[];return t.each((function(n){n!==t&&e.push({source:n.parent,target:n})})),e},copy:function(){return OP(this).eachBefore(DP)}};const NP=["caretElm"];function LP(t,e){}const FP=function(t){return{model:t}};function UP(t,e){if(1&t&&(No(0,"span"),Ro(1,LP,0,0,"ng-template",5),Lo()),2&t){const t=Wo();kr(1),Po("ngTemplateOutlet",t.template)("ngTemplateOutletContext",Mc(2,FP,t.context))}}function BP(t,e){1&t&&Fo(0,"span",6),2&t&&Po("innerHTML",Wo().title,nr)}function jP(t,e){if(1&t&&(Rn(),On(),Fo(0,"ngx-charts-scale-legend",4)),2&t){const t=Wo();Po("horizontal",t.legendOptions&&"below"===t.legendOptions.position)("valueRange",t.legendOptions.domain)("colors",t.legendOptions.colors)("height",t.view[1])("width",t.legendWidth)}}function VP(t,e){if(1&t){const t=jo();Rn(),On(),No(0,"ngx-charts-legend",5),qo("labelClick",(function(e){return nn(t),Wo().legendLabelClick.emit(e)}))("labelActivate",(function(e){return nn(t),Wo().legendLabelActivate.emit(e)}))("labelDeactivate",(function(e){return nn(t),Wo().legendLabelDeactivate.emit(e)})),Lo()}if(2&t){const t=Wo();Po("horizontal",t.legendOptions&&"below"===t.legendOptions.position)("data",t.legendOptions.domain)("title",t.legendOptions.title)("colors",t.legendOptions.colors)("height",t.view[1])("width",t.legendWidth)("activeEntries",t.activeEntries)}}const KP=["*"],qP=["ngx-charts-axis-label",""],GP=["ticksel"],$P=["ngx-charts-x-axis-ticks",""];function HP(t,e){if(1&t&&(Rn(),No(0,"g",3),No(1,"title"),ya(2),Lo(),No(3,"text",4),ya(4),Lo(),Lo()),2&t){const t=e.$implicit,n=Wo();To("transform",n.tickTransform(t)),kr(2),va(n.tickFormat(t)),kr(1),sa("font-size","12px"),To("text-anchor",n.textAnchor)("transform",n.textTransform),kr(1),ba(" ",n.tickTrim(n.tickFormat(t))," ")}}function zP(t,e){if(1&t&&(Rn(),No(0,"g"),Fo(1,"line",6),Lo()),2&t){const t=Wo(2);To("transform",t.gridLineTransform()),kr(1),To("y1",0-t.gridLineHeight)}}function WP(t,e){if(1&t&&(Rn(),No(0,"g"),Ro(1,zP,2,2,"g",5),Lo()),2&t){const t=e.$implicit,n=Wo();To("transform",n.tickTransform(t)),kr(1),Po("ngIf",n.showGridLines)}}const YP=["ngx-charts-x-axis",""];function XP(t,e){if(1&t){const t=jo();Rn(),No(0,"g",2),qo("dimensionsChanged",(function(e){return nn(t),Wo().emitTicksHeight(e)})),Lo()}if(2&t){const t=Wo();Po("trimTicks",t.trimTicks)("rotateTicks",t.rotateTicks)("maxTickLength",t.maxTickLength)("tickFormatting",t.tickFormatting)("tickArguments",t.tickArguments)("tickStroke",t.tickStroke)("scale",t.xScale)("orient",t.xOrient)("showGridLines",t.showGridLines)("gridLineHeight",t.dims.height)("width",t.dims.width)("tickValues",t.ticks)}}function QP(t,e){if(1&t&&(Rn(),Fo(0,"g",3)),2&t){const t=Wo();Po("label",t.labelText)("offset",t.labelOffset)("orient","bottom")("height",t.dims.height)("width",t.dims.width)}}const ZP=["ngx-charts-y-axis-ticks",""];function JP(t,e){if(1&t&&(Rn(),No(0,"g",4),No(1,"title"),ya(2),Lo(),No(3,"text",5),ya(4),Lo(),Lo()),2&t){const t=e.$implicit,n=Wo();To("transform",n.transform(t)),kr(2),va(n.tickFormat(t)),kr(1),sa("font-size","12px"),To("dy",n.dy)("x",n.x1)("y",n.y1)("text-anchor",n.textAnchor),kr(1),ba(" ",n.tickTrim(n.tickFormat(t))," ")}}function tM(t,e){if(1&t&&(Rn(),Fo(0,"path",6)),2&t){const t=Wo();To("d",t.referenceAreaPath)("transform",t.gridLineTransform())}}function eM(t,e){1&t&&(Rn(),Fo(0,"line",9)),2&t&&To("x2",Wo(3).gridLineWidth)}function nM(t,e){1&t&&(Rn(),Fo(0,"line",9)),2&t&&To("x2",0-Wo(3).gridLineWidth)}function iM(t,e){if(1&t&&(Rn(),No(0,"g"),Ro(1,eM,1,1,"line",8),Ro(2,nM,1,1,"line",8),Lo()),2&t){const t=Wo(2);To("transform",t.gridLineTransform()),kr(1),Po("ngIf","left"===t.orient),kr(1),Po("ngIf","right"===t.orient)}}function rM(t,e){if(1&t&&(Rn(),No(0,"g"),Ro(1,iM,3,3,"g",7),Lo()),2&t){const t=e.$implicit,n=Wo();To("transform",n.transform(t)),kr(1),Po("ngIf",n.showGridLines)}}function sM(t,e){if(1&t&&(Rn(),No(0,"g"),No(1,"title"),ya(2),Lo(),No(3,"text",11),ya(4),Lo(),Lo()),2&t){const t=Wo(2).$implicit,e=Wo();kr(2),va(e.tickTrim(e.tickFormat(t.value))),kr(1),To("dy",e.dy)("y",-6)("x",e.gridLineWidth)("text-anchor",e.textAnchor),kr(1),ba(" ",t.name," ")}}function oM(t,e){if(1&t&&(Rn(),No(0,"g"),Fo(1,"line",10),Ro(2,sM,5,6,"g",7),Lo()),2&t){const t=Wo().$implicit,e=Wo();To("transform",e.transform(t.value)),kr(1),To("x2",e.gridLineWidth)("transform",e.gridLineTransform()),kr(1),Po("ngIf",e.showRefLabels)}}function aM(t,e){if(1&t&&(Rn(),No(0,"g"),Ro(1,oM,3,4,"g",7),Lo()),2&t){const t=Wo();kr(1),Po("ngIf",t.showRefLines)}}const cM=["ngx-charts-y-axis",""];function lM(t,e){if(1&t){const t=jo();Rn(),No(0,"g",2),qo("dimensionsChanged",(function(e){return nn(t),Wo().emitTicksWidth(e)})),Lo()}if(2&t){const t=Wo();Po("trimTicks",t.trimTicks)("maxTickLength",t.maxTickLength)("tickFormatting",t.tickFormatting)("tickArguments",t.tickArguments)("tickValues",t.ticks)("tickStroke",t.tickStroke)("scale",t.yScale)("orient",t.yOrient)("showGridLines",t.showGridLines)("gridLineWidth",t.dims.width)("referenceLines",t.referenceLines)("showRefLines",t.showRefLines)("showRefLabels",t.showRefLabels)("height",t.dims.height)}}function uM(t,e){if(1&t&&(Rn(),Fo(0,"g",3)),2&t){const t=Wo();Po("label",t.labelText)("offset",t.labelOffset)("orient",t.yOrient)("height",t.dims.height)("width",t.dims.width)}}const hM=["ngx-charts-svg-linear-gradient",""];function dM(t,e){if(1&t&&(Rn(),Fo(0,"stop")),2&t){const t=e.$implicit;sa("stop-color",t.color)("stop-opacity",t.opacity),To("offset",t.offset+"%")}}function pM(t,e){if(1&t&&(No(0,"header",4),No(1,"span",5),ya(2),Lo(),Lo()),2&t){const t=Wo();kr(2),va(t.title)}}function mM(t,e){if(1&t){const t=jo();No(0,"li",6),No(1,"ngx-charts-legend-entry",7),qo("select",(function(e){return nn(t),Wo().labelClick.emit(e)}))("activate",(function(e){return nn(t),Wo().activate(e)}))("deactivate",(function(e){return nn(t),Wo().deactivate(e)})),Lo(),Lo()}if(2&t){const t=e.$implicit,n=Wo();kr(1),Po("label",t.label)("formattedLabel",t.formattedLabel)("color",t.color)("isActive",n.isActive(t))}}const fM=["tooltipTemplate"],gM=function(t,e){return[t,e]},_M=["ngx-charts-bar",""];function yM(t,e){if(1&t&&(Rn(),No(0,"defs"),Fo(1,"g",2),Lo()),2&t){const t=Wo();kr(1),Po("orientation",t.orientation)("name",t.gradientId)("stops",t.gradientStops)}}function vM(t,e){if(1&t){const t=jo();Rn(),No(0,"g",5),qo("dimensionsChanged",(function(e){return nn(t),Wo().updateXAxisHeight(e)})),Lo()}if(2&t){const t=Wo();Po("xScale",t.xScale)("dims",t.dims)("showGridLines",t.showGridLines)("showLabel",t.showXAxisLabel)("labelText",t.xAxisLabel)("trimTicks",t.trimXAxisTicks)("rotateTicks",t.rotateXAxisTicks)("maxTickLength",t.maxXAxisTickLength)("tickFormatting",t.xAxisTickFormatting)("ticks",t.xAxisTicks)}}function bM(t,e){if(1&t){const t=jo();Rn(),No(0,"g",6),qo("dimensionsChanged",(function(e){return nn(t),Wo().updateYAxisWidth(e)})),Lo()}if(2&t){const t=Wo();Po("yScale",t.yScale)("dims",t.dims)("showLabel",t.showYAxisLabel)("labelText",t.yAxisLabel)("trimTicks",t.trimYAxisTicks)("maxTickLength",t.maxYAxisTickLength)("tickFormatting",t.yAxisTickFormatting)("ticks",t.yAxisTicks)("yAxisOffset",t.dataLabelMaxWidth.negative)}}const wM=["ngx-charts-series-horizontal",""];function SM(t,e){if(1&t){const t=jo();Rn(),No(0,"g",2),qo("select",(function(e){return nn(t),Wo().click(e)}))("activate",(function(e){return nn(t),Wo().activate.emit(e)}))("deactivate",(function(e){return nn(t),Wo().deactivate.emit(e)})),Lo()}if(2&t){const t=e.$implicit,n=Wo();Po("@animationState","active")("width",t.width)("height",t.height)("x",t.x)("y",t.y)("fill",t.color)("stops",t.gradientStops)("data",t.data)("orientation","horizontal")("roundEdges",t.roundEdges)("gradient",n.gradient)("isActive",n.isActive(t.data))("ariaLabel",t.ariaLabel)("animations",n.animations)("tooltipDisabled",n.tooltipDisabled)("tooltipPlacement",n.tooltipPlacement)("tooltipType",n.tooltipType)("tooltipTitle",n.tooltipTemplate?void 0:t.tooltipText)("tooltipTemplate",n.tooltipTemplate)("tooltipContext",t.data)("noBarWhenZero",n.noBarWhenZero)}}function EM(t,e){if(1&t){const t=jo();Rn(),No(0,"g",4),qo("dimensionsChanged",(function(n){nn(t);const i=e.index;return Wo(2).dataLabelWidthChanged.emit({size:n,index:i})})),Lo()}if(2&t){const t=e.$implicit,n=Wo(2);Po("barX",t.x)("barY",t.y)("barWidth",t.width)("barHeight",t.height)("value",t.total)("valueFormatting",n.dataLabelFormatting)("orientation","horizontal")}}function kM(t,e){if(1&t&&(Rn(),No(0,"g"),Ro(1,EM,1,7,"g",3),Lo()),2&t){const t=Wo();kr(1),Po("ngForOf",t.barsForDataLabels)("ngForTrackBy",t.trackDataLabelBy)}}const CM=["ngx-charts-bar-label",""];var xM;let TM=(()=>{let t=xM=class{constructor(t,e,n){this.applicationRef=t,this.componentFactoryResolver=e,this.injector=n}static setGlobalRootViewContainer(t){xM.globalRootViewContainer=t}getRootViewContainer(){if(this._container)return this._container;if(xM.globalRootViewContainer)return xM.globalRootViewContainer;if(this.applicationRef.components.length)return this.applicationRef.components[0];throw new Error("View Container not found! ngUpgrade needs to manually set this via setRootViewContainer or setGlobalRootViewContainer.")}setRootViewContainer(t){this._container=t}getComponentRootNode(t){return t.element?t.element.nativeElement:t.hostView&&t.hostView.rootNodes.length>0?t.hostView.rootNodes[0]:t.location.nativeElement}getRootViewContainerNode(t){return this.getComponentRootNode(t)}projectComponentBindings(t,e){if(e){if(void 0!==e.inputs){const n=Object.getOwnPropertyNames(e.inputs);for(const i of n)t.instance[i]=e.inputs[i]}if(void 0!==e.outputs){const n=Object.getOwnPropertyNames(e.outputs);for(const i of n)t.instance[i]=e.outputs[i]}}return t}appendComponent(t,e={},n){n||(n=this.getRootViewContainer());const i=this.getComponentRootNode(n),r=new Kv(i,this.componentFactoryResolver,this.applicationRef,this.injector),s=new Fv(t),o=r.attach(s);return this.projectComponentBindings(o,e),o}};return t.\u0275fac=function(e){return new(e||t)(zt(Wl),zt(qa),zt(go))},t.\u0275prov=lt({token:t,factory:function(e){return t.\u0275fac(e)}}),t.globalRootViewContainer=null,t})();function IM(t,e,n){let i,r,s;n=n||{};let o=null,a=0;function c(){a=!1===n.leading?0:+new Date,o=null,s=t.apply(i,r)}return function(){const l=+new Date;a||!1!==n.leading||(a=l);const u=e-(l-a);return i=this,r=arguments,u<=0?(clearTimeout(o),o=null,a=l,s=t.apply(i,r)):o||!1===n.trailing||(o=setTimeout(c,u)),s}}var RM=function(t){return t[t.top="top"]="top",t[t.bottom="bottom"]="bottom",t[t.left="left"]="left",t[t.right="right"]="right",t}({});function OM(t,e,n){return"top"===n?t.top-7:"bottom"===n?t.top+t.height-e.height+7:"center"===n?t.top+t.height/2-e.height/2:void 0}function AM(t,e,n){return"left"===n?t.left-7:"right"===n?t.left+t.width-e.width+7:"center"===n?t.left+t.width/2-e.width/2:void 0}class DM{static calculateVerticalAlignment(t,e,n){let i=OM(t,e,n);return i+e.height>window.innerHeight&&(i=window.innerHeight-e.height),i}static calculateVerticalCaret(t,e,n,i){let r;"top"===i&&(r=t.height/2-n.height/2+7),"bottom"===i&&(r=e.height-t.height/2-n.height/2-7),"center"===i&&(r=e.height/2-n.height/2);const s=OM(t,e,i);return s+e.height>window.innerHeight&&(r+=s+e.height-window.innerHeight),r}static calculateHorizontalAlignment(t,e,n){let i=AM(t,e,n);return i+e.width>window.innerWidth&&(i=window.innerWidth-e.width),i}static calculateHorizontalCaret(t,e,n,i){let r;"left"===i&&(r=t.width/2-n.width/2+7),"right"===i&&(r=e.width-t.width/2-n.width/2-7),"center"===i&&(r=e.width/2-n.width/2);const s=AM(t,e,i);return s+e.width>window.innerWidth&&(r+=s+e.width-window.innerWidth),r}static shouldFlip(t,e,n,i){let r=!1;return"right"===n&&t.left+t.width+e.width+i>window.innerWidth&&(r=!0),"left"===n&&t.left-e.width-i<0&&(r=!0),"top"===n&&t.top-e.height-i<0&&(r=!0),"bottom"===n&&t.top+t.height+e.height+i>window.innerHeight&&(r=!0),r}static positionCaret(t,e,n,i,r){let s=0,o=0;return t===RM.right?(o=-7,s=DM.calculateVerticalCaret(n,e,i,r)):t===RM.left?(o=e.width,s=DM.calculateVerticalCaret(n,e,i,r)):t===RM.top?(s=e.height,o=DM.calculateHorizontalCaret(n,e,i,r)):t===RM.bottom&&(s=-7,o=DM.calculateHorizontalCaret(n,e,i,r)),{top:s,left:o}}static positionContent(t,e,n,i,r){let s=0,o=0;return t===RM.right?(o=n.left+n.width+i,s=DM.calculateVerticalAlignment(n,e,r)):t===RM.left?(o=n.left-e.width-i,s=DM.calculateVerticalAlignment(n,e,r)):t===RM.top?(s=n.top-e.height-i,o=DM.calculateHorizontalAlignment(n,e,r)):t===RM.bottom&&(s=n.top+n.height+i,o=DM.calculateHorizontalAlignment(n,e,r)),{top:s,left:o}}static determinePlacement(t,e,n,i){if(DM.shouldFlip(n,e,t,i)){if(t===RM.right)return RM.left;if(t===RM.left)return RM.right;if(t===RM.top)return RM.bottom;if(t===RM.bottom)return RM.top}return t}}let PM=(()=>{let t=class{constructor(t,e){this.element=t,this.renderer=e}get cssClasses(){let t="ngx-charts-tooltip-content";return t+=" position-"+this.placement,t+=" type-"+this.type,t+=" "+this.cssClass,t}ngAfterViewInit(){setTimeout(this.position.bind(this))}position(){const t=this.element.nativeElement,e=this.host.nativeElement.getBoundingClientRect();if(!e.height&&!e.width)return;const n=t.getBoundingClientRect();this.checkFlip(e,n),this.positionContent(t,e,n),this.showCaret&&this.positionCaret(e,n),setTimeout(()=>this.renderer.addClass(t,"animate"),1)}positionContent(t,e,n){const{top:i,left:r}=DM.positionContent(this.placement,n,e,this.spacing,this.alignment);this.renderer.setStyle(t,"top",i+"px"),this.renderer.setStyle(t,"left",r+"px")}positionCaret(t,e){const n=this.caretElm.nativeElement,i=n.getBoundingClientRect(),{top:r,left:s}=DM.positionCaret(this.placement,e,t,i,this.alignment);this.renderer.setStyle(n,"top",r+"px"),this.renderer.setStyle(n,"left",s+"px")}checkFlip(t,e){this.placement=DM.determinePlacement(this.placement,e,t,this.spacing)}onWindowResize(){this.position()}};return t.\u0275fac=function(e){return new(e||t)(Ao(Ga),Ao(Wa))},t.\u0275cmp=de({type:t,selectors:[["ngx-tooltip-content"]],viewQuery:function(t,e){var n;1&t&&Jc(NP,!0),2&t&&Qc(n=rl())&&(e.caretElm=n.first)},hostVars:2,hostBindings:function(t,e){1&t&&qo("resize",(function(){return e.onWindowResize()}),!1,Xn),2&t&&la(re,aa,e.cssClasses,!0)},inputs:{placement:"placement",host:"host",showCaret:"showCaret",type:"type",alignment:"alignment",spacing:"spacing",cssClass:"cssClass",title:"title",template:"template",context:"context"},decls:6,vars:6,consts:[[3,"hidden"],["caretElm",""],[1,"tooltip-content"],[4,"ngIf"],[3,"innerHTML",4,"ngIf"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],[3,"innerHTML"]],template:function(t,e){1&t&&(No(0,"div"),Fo(1,"span",0,1),No(3,"div",2),Ro(4,UP,2,4,"span",3),Ro(5,BP,1,1,"span",4),Lo(),Lo()),2&t&&(kr(1),ka("tooltip-caret position-",e.placement,""),Po("hidden",!e.showCaret),kr(3),Po("ngIf",!e.title),kr(1),Po("ngIf",e.title))},directives:[Au,Bu],styles:[".ngx-charts-tooltip-content{position:fixed;border-radius:3px;z-index:5000;display:block;font-weight:400;opacity:0;pointer-events:none!important}.ngx-charts-tooltip-content.type-popover{background:#fff;color:#060709;border:1px solid #72809b;box-shadow:0 1px 3px 0 rgba(0,0,0,.2),0 1px 1px 0 rgba(0,0,0,.14),0 2px 1px -1px rgba(0,0,0,.12);font-size:13px;padding:4px}.ngx-charts-tooltip-content.type-popover .tooltip-caret{position:absolute;z-index:5001;width:0;height:0}.ngx-charts-tooltip-content.type-popover .tooltip-caret.position-left{border-top:7px solid transparent;border-bottom:7px solid transparent;border-left:7px solid #fff}.ngx-charts-tooltip-content.type-popover .tooltip-caret.position-top{border-left:7px solid transparent;border-right:7px solid transparent;border-top:7px solid #fff}.ngx-charts-tooltip-content.type-popover .tooltip-caret.position-right{border-top:7px solid transparent;border-bottom:7px solid transparent;border-right:7px solid #fff}.ngx-charts-tooltip-content.type-popover .tooltip-caret.position-bottom{border-left:7px solid transparent;border-right:7px solid transparent;border-bottom:7px solid #fff}.ngx-charts-tooltip-content.type-tooltip{color:#fff;background:rgba(0,0,0,.75);font-size:12px;padding:0 10px;text-align:center;pointer-events:auto}.ngx-charts-tooltip-content.type-tooltip .tooltip-caret.position-left{border-top:7px solid transparent;border-bottom:7px solid transparent;border-left:7px solid rgba(0,0,0,.75)}.ngx-charts-tooltip-content.type-tooltip .tooltip-caret.position-top{border-left:7px solid transparent;border-right:7px solid transparent;border-top:7px solid rgba(0,0,0,.75)}.ngx-charts-tooltip-content.type-tooltip .tooltip-caret.position-right{border-top:7px solid transparent;border-bottom:7px solid transparent;border-right:7px solid rgba(0,0,0,.75)}.ngx-charts-tooltip-content.type-tooltip .tooltip-caret.position-bottom{border-left:7px solid transparent;border-right:7px solid transparent;border-bottom:7px solid rgba(0,0,0,.75)}.ngx-charts-tooltip-content .tooltip-label{display:block;line-height:1em;padding:8px 5px 5px;font-size:1em}.ngx-charts-tooltip-content .tooltip-val{display:block;font-size:1.3em;line-height:1em;padding:0 5px 8px}.ngx-charts-tooltip-content .tooltip-caret{position:absolute;z-index:5001;width:0;height:0}.ngx-charts-tooltip-content.position-right{transform:translate3d(10px,0,0)}.ngx-charts-tooltip-content.position-left{transform:translate3d(-10px,0,0)}.ngx-charts-tooltip-content.position-top{transform:translate3d(0,-10px,0)}.ngx-charts-tooltip-content.position-bottom{transform:translate3d(0,10px,0)}.ngx-charts-tooltip-content.animate{opacity:1;transition:opacity .3s,transform .3s;transform:translate3d(0,0,0);pointer-events:auto}.area-tooltip-container{padding:5px 0;pointer-events:none}.tooltip-item{text-align:left;line-height:1.2em;padding:5px 0}.tooltip-item .tooltip-item-color{display:inline-block;height:12px;width:12px;margin-right:5px;color:#5b646b;border-radius:3px}"],encapsulation:2}),function(t,e,n,i){var r,s=arguments.length,o=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(o=(s<3?r(o):s>3?r(e,n,o):r(e,n))||o);s>3&&o&&Object.defineProperty(e,n,o)}([function(t,e,n){return{configurable:!0,enumerable:n.enumerable,get:function(){return Object.defineProperty(this,e,{configurable:!0,enumerable:n.enumerable,value:IM(n.value,100,void 0)}),this[e]}}}],t.prototype,"onWindowResize",null),t})(),MM=(()=>{let t=class extends class{constructor(t){this.injectionService=t,this.defaults={},this.components=new Map}getByType(t=this.type){return this.components.get(t)}create(t){return this.createByType(this.type,t)}createByType(t,e){e=this.assignDefaults(e);const n=this.injectComponent(t,e);return this.register(t,n),n}destroy(t){const e=this.components.get(t.componentType);if(e&&e.length){const n=e.indexOf(t);n>-1&&(e[n].destroy(),e.splice(n,1))}}destroyAll(){this.destroyByType(this.type)}destroyByType(t){const e=this.components.get(t);if(e&&e.length){let t=e.length-1;for(;t>=0;)this.destroy(e[t--])}}injectComponent(t,e){return this.injectionService.appendComponent(t,e)}assignDefaults(t){const e=Object.assign({},this.defaults.inputs),n=Object.assign({},this.defaults.outputs);return t.inputs||t.outputs||(t={inputs:t}),e&&(t.inputs=Object.assign(Object.assign({},e),t.inputs)),n&&(t.outputs=Object.assign(Object.assign({},n),t.outputs)),t}register(t,e){this.components.has(t)||this.components.set(t,[]),this.components.get(t).push(e)}}{constructor(t){super(t),this.type=PM}};return t.\u0275fac=function(e){return new(e||t)(zt(TM))},t.\u0275prov=lt({token:t,factory:function(e){return t.\u0275fac(e)}}),t})(),NM=(()=>{let t=class{constructor(){this.showLegend=!1,this.animations=!0,this.legendLabelClick=new jc,this.legendLabelActivate=new jc,this.legendLabelDeactivate=new jc}ngOnChanges(t){this.update()}update(){let t=0;this.showLegend&&(this.legendType=this.getLegendType(),this.legendOptions&&"right"!==this.legendOptions.position||(t="scaleLegend"===this.legendType?1:2)),this.chartWidth=Math.floor(this.view[0]*(12-t)/12),this.legendWidth=this.legendOptions&&"right"!==this.legendOptions.position?this.chartWidth:Math.floor(this.view[0]*t/12)}getLegendType(){return"linear"===this.legendOptions.scaleType?"scaleLegend":"legend"}};return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=de({type:t,selectors:[["ngx-charts-chart"]],inputs:{showLegend:"showLegend",animations:"animations",legendType:"legendType",view:"view",legendOptions:"legendOptions",data:"data",legendData:"legendData",colors:"colors",activeEntries:"activeEntries"},outputs:{legendLabelClick:"legendLabelClick",legendLabelActivate:"legendLabelActivate",legendLabelDeactivate:"legendLabelDeactivate"},features:[ja([MM]),Ae],ngContentSelectors:KP,decls:5,vars:8,consts:[[1,"ngx-charts-outer"],[1,"ngx-charts"],["class","chart-legend",3,"horizontal","valueRange","colors","height","width",4,"ngIf"],["class","chart-legend",3,"horizontal","data","title","colors","height","width","activeEntries","labelClick","labelActivate","labelDeactivate",4,"ngIf"],[1,"chart-legend",3,"horizontal","valueRange","colors","height","width"],[1,"chart-legend",3,"horizontal","data","title","colors","height","width","activeEntries","labelClick","labelActivate","labelDeactivate"]],template:function(t,e){1&t&&(Xo(),No(0,"div",0),Rn(),No(1,"svg",1),Qo(2),Lo(),Ro(3,jP,1,5,"ngx-charts-scale-legend",2),Ro(4,VP,1,7,"ngx-charts-legend",3),Lo()),2&t&&(sa("width",e.view[0],"px"),Po("@animationState","active")("@.disabled",!e.animations),kr(1),To("width",e.chartWidth)("height",e.view[1]),kr(2),Po("ngIf",e.showLegend&&"scaleLegend"===e.legendType),kr(1),Po("ngIf",e.showLegend&&"legend"===e.legendType))},directives:function(){return[Au,rN,nN]},encapsulation:2,data:{animation:[Kd("animationState",[zd(":enter",[$d({opacity:0}),qd("500ms 100ms",$d({opacity:1}))])])]},changeDetection:0}),t})(),LM=(()=>{let t=class{constructor(t,e){this.element=t,this.zone=e,this.visible=new jc,this.isVisible=!1,this.runCheck()}destroy(){clearTimeout(this.timeout)}onVisibilityChange(){this.zone.run(()=>{this.isVisible=!0,this.visible.emit(!0)})}runCheck(){const t=()=>{if(!this.element)return;const{offsetHeight:e,offsetWidth:n}=this.element.nativeElement;e&&n?(clearTimeout(this.timeout),this.onVisibilityChange()):(clearTimeout(this.timeout),this.zone.runOutsideAngular(()=>{this.timeout=setTimeout(()=>t(),100)}))};this.zone.runOutsideAngular(()=>{this.timeout=setTimeout(()=>t())})}};return t.\u0275fac=function(e){return new(e||t)(Ao(Ga),Ao(Rl))},t.\u0275dir=ye({type:t,selectors:[["visibility-observer"]],outputs:{visible:"visible"}}),t})(),FM=(()=>{let t=class{constructor(t,e,n){this.chartElement=t,this.zone=e,this.cd=n,this.scheme="cool",this.schemeType="ordinal",this.animations=!0,this.select=new jc}ngAfterViewInit(){this.bindWindowResizeEvent(),this.visibilityObserver=new LM(this.chartElement,this.zone),this.visibilityObserver.visible.subscribe(this.update.bind(this))}ngOnDestroy(){this.unbindEvents(),this.visibilityObserver&&(this.visibilityObserver.visible.unsubscribe(),this.visibilityObserver.destroy())}ngOnChanges(t){this.update()}update(){if(this.results=this.results?this.cloneData(this.results):[],this.view)this.width=this.view[0],this.height=this.view[1];else{const t=this.getContainerDims();t&&(this.width=t.width,this.height=t.height)}this.width||(this.width=600),this.height||(this.height=400),this.width=Math.floor(this.width),this.height=Math.floor(this.height),this.cd&&this.cd.markForCheck()}getContainerDims(){let t,e;const n=this.chartElement.nativeElement;if(null!==n.parentNode){const i=n.parentNode.getBoundingClientRect();t=i.width,e=i.height}return t&&e?{width:t,height:e}:null}formatDates(){for(let t=0;t<this.results.length;t++){const e=this.results[t];if(e.label=e.name,e.label instanceof Date&&(e.label=e.label.toLocaleDateString()),e.series)for(let t=0;t<e.series.length;t++){const n=e.series[t];n.label=n.name,n.label instanceof Date&&(n.label=n.label.toLocaleDateString())}}}unbindEvents(){this.resizeSubscription&&this.resizeSubscription.unsubscribe()}bindWindowResizeEvent(){const t=$f(window,"resize").pipe(Mh(200)).subscribe(t=>{this.update(),this.cd&&this.cd.markForCheck()});this.resizeSubscription=t}cloneData(t){const e=[];for(const n of t){const t={name:n.name};if(void 0!==n.value&&(t.value=n.value),void 0!==n.series){t.series=[];for(const e of n.series){const n=Object.assign({},e);t.series.push(n)}}void 0!==n.extra&&(t.extra=JSON.parse(JSON.stringify(n.extra))),e.push(t)}return e}};return t.\u0275fac=function(e){return new(e||t)(Ao(Ga),Ao(Rl),Ao(Zs))},t.\u0275cmp=de({type:t,selectors:[["base-chart"]],inputs:{scheme:"scheme",schemeType:"schemeType",animations:"animations",results:"results",view:"view",customColors:"customColors"},outputs:{select:"select"},features:[Ae],decls:1,vars:0,template:function(t,e){1&t&&Fo(0,"div")},encapsulation:2}),t})(),UM=(()=>{let t=class{constructor(t){this.textHeight=25,this.margin=5,this.element=t.nativeElement}ngOnChanges(t){this.update()}update(){switch(this.strokeWidth="0.01",this.textAnchor="middle",this.transform="",this.orient){case"top":case"bottom":this.y=this.offset,this.x=this.width/2;break;case"left":this.y=-(this.offset+this.textHeight+this.margin),this.x=-this.height/2,this.transform="rotate(270)";break;case"right":this.y=this.offset+this.margin,this.x=-this.height/2,this.transform="rotate(270)"}}};return t.\u0275fac=function(e){return new(e||t)(Ao(Ga))},t.\u0275cmp=de({type:t,selectors:[["g","ngx-charts-axis-label",""]],inputs:{orient:"orient",label:"label",offset:"offset",width:"width",height:"height"},features:[Ae],attrs:qP,decls:2,vars:6,template:function(t,e){1&t&&(Rn(),No(0,"text"),ya(1),Lo()),2&t&&(To("stroke-width",e.strokeWidth)("x",e.x)("y",e.y)("text-anchor",e.textAnchor)("transform",e.transform),kr(1),ba(" ",e.label," "))},encapsulation:2,changeDetection:0}),t})();function BM(t,e=16){return"string"!=typeof t?"number"==typeof t?t+"":"":(t=t.trim()).length<=e?t:t.slice(0,e)+"..."}function jM(t,e){if(t.length>e){const n=[],i=Math.floor(t.length/e);for(let e=0;e<t.length;e++)e%i==0&&n.push(t[e]);t=n}return t}let VM=(()=>{let t=class{constructor(){this.tickArguments=[5],this.tickStroke="#ccc",this.trimTicks=!0,this.maxTickLength=16,this.showGridLines=!1,this.rotateTicks=!0,this.dimensionsChanged=new jc,this.verticalSpacing=20,this.rotateLabels=!1,this.innerTickSize=6,this.outerTickSize=6,this.tickPadding=3,this.textAnchor="middle",this.maxTicksLength=0,this.maxAllowedLength=16,this.height=0}ngOnChanges(t){this.update()}ngAfterViewInit(){setTimeout(()=>this.updateDims())}updateDims(){const t=parseInt(this.ticksElement.nativeElement.getBoundingClientRect().height,10);t!==this.height&&(this.height=t,this.dimensionsChanged.emit({height:t}),setTimeout(()=>this.updateDims()))}update(){const t=this.scale;this.ticks=this.getTicks(),this.tickFormat=this.tickFormatting?this.tickFormatting:t.tickFormat?t.tickFormat.apply(t,this.tickArguments):function(t){return"Date"===t.constructor.name?t.toLocaleDateString():t.toLocaleString()};const e=this.rotateTicks?this.getRotationAngle(this.ticks):null;this.adjustedScale=this.scale.bandwidth?function(t){return this.scale(t)+.5*this.scale.bandwidth()}:this.scale,this.textTransform="",e&&0!==e?(this.textTransform=`rotate(${e})`,this.textAnchor="end",this.verticalSpacing=10):this.textAnchor="middle",setTimeout(()=>this.updateDims())}getRotationAngle(t){let e=0;this.maxTicksLength=0;for(let s=0;s<t.length;s++){const e=this.tickFormat(t[s]).toString();let n=e.length;this.trimTicks&&(n=this.tickTrim(e).length),n>this.maxTicksLength&&(this.maxTicksLength=n)}const n=8*Math.min(this.maxTicksLength,this.maxAllowedLength);let i=n;const r=Math.floor(this.width/t.length);for(;i>r&&e>-90;)e-=30,i=Math.cos(e*(Math.PI/180))*n;return e}getTicks(){let t;const e=this.getMaxTicks(20),n=this.getMaxTicks(100);return this.tickValues?t=this.tickValues:this.scale.ticks?t=this.scale.ticks.apply(this.scale,[n]):(t=this.scale.domain(),t=jM(t,e)),t}getMaxTicks(t){return Math.floor(this.width/t)}tickTransform(t){return"translate("+this.adjustedScale(t)+","+this.verticalSpacing+")"}gridLineTransform(){return`translate(0,${-this.verticalSpacing-5})`}tickTrim(t){return this.trimTicks?BM(t,this.maxTickLength):t}};return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=de({type:t,selectors:[["g","ngx-charts-x-axis-ticks",""]],viewQuery:function(t,e){var n;1&t&&Jc(GP,!0),2&t&&Qc(n=rl())&&(e.ticksElement=n.first)},inputs:{tickArguments:"tickArguments",tickStroke:"tickStroke",trimTicks:"trimTicks",maxTickLength:"maxTickLength",showGridLines:"showGridLines",rotateTicks:"rotateTicks",scale:"scale",orient:"orient",tickValues:"tickValues",tickFormatting:"tickFormatting",gridLineHeight:"gridLineHeight",width:"width"},outputs:{dimensionsChanged:"dimensionsChanged"},features:[Ae],attrs:$P,decls:4,vars:2,consts:[["ticksel",""],["class","tick",4,"ngFor","ngForOf"],[4,"ngFor","ngForOf"],[1,"tick"],["stroke-width","0.01"],[4,"ngIf"],["y2","0",1,"gridline-path","gridline-path-vertical"]],template:function(t,e){1&t&&(Rn(),No(0,"g",null,0),Ro(2,HP,5,7,"g",1),Lo(),Ro(3,WP,2,2,"g",2)),2&t&&(kr(2),Po("ngForOf",e.ticks),kr(1),Po("ngForOf",e.ticks))},directives:[Ru,Au],encapsulation:2,changeDetection:0}),t})(),KM=(()=>{let t=class{constructor(){this.rotateTicks=!0,this.showGridLines=!1,this.xOrient="bottom",this.xAxisOffset=0,this.dimensionsChanged=new jc,this.xAxisClassName="x axis",this.labelOffset=0,this.fill="none",this.stroke="stroke",this.tickStroke="#ccc",this.strokeWidth="none",this.padding=5}ngOnChanges(t){this.update()}update(){this.transform=`translate(0,${this.xAxisOffset+this.padding+this.dims.height})`,void 0!==this.xAxisTickCount&&(this.tickArguments=[this.xAxisTickCount])}emitTicksHeight({height:t}){const e=t+25+5;e!==this.labelOffset&&(this.labelOffset=e,setTimeout(()=>{this.dimensionsChanged.emit({height:t})},0))}};return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=de({type:t,selectors:[["g","ngx-charts-x-axis",""]],viewQuery:function(t,e){var n;1&t&&Jc(VM,!0),2&t&&Qc(n=rl())&&(e.ticksComponent=n.first)},inputs:{rotateTicks:"rotateTicks",showGridLines:"showGridLines",xOrient:"xOrient",xAxisOffset:"xAxisOffset",xScale:"xScale",dims:"dims",trimTicks:"trimTicks",maxTickLength:"maxTickLength",tickFormatting:"tickFormatting",showLabel:"showLabel",labelText:"labelText",ticks:"ticks",xAxisTickInterval:"xAxisTickInterval",xAxisTickCount:"xAxisTickCount"},outputs:{dimensionsChanged:"dimensionsChanged"},features:[Ae],attrs:YP,decls:3,vars:4,consts:[["ngx-charts-x-axis-ticks","",3,"trimTicks","rotateTicks","maxTickLength","tickFormatting","tickArguments","tickStroke","scale","orient","showGridLines","gridLineHeight","width","tickValues","dimensionsChanged",4,"ngIf"],["ngx-charts-axis-label","",3,"label","offset","orient","height","width",4,"ngIf"],["ngx-charts-x-axis-ticks","",3,"trimTicks","rotateTicks","maxTickLength","tickFormatting","tickArguments","tickStroke","scale","orient","showGridLines","gridLineHeight","width","tickValues","dimensionsChanged"],["ngx-charts-axis-label","",3,"label","offset","orient","height","width"]],template:function(t,e){1&t&&(Rn(),No(0,"g"),Ro(1,XP,1,12,"g",0),Ro(2,QP,1,5,"g",1),Lo()),2&t&&(To("class",e.xAxisClassName)("transform",e.transform),kr(1),Po("ngIf",e.xScale),kr(1),Po("ngIf",e.showLabel))},directives:[Au,VM,UM],encapsulation:2,changeDetection:0}),t})();function qM(t,e,n,i,r,[s,o,a,c]){let l="";return l="M"+[t+r,e],l+="h"+((n=0===(n=Math.floor(n))?1:n)-2*r),l+=o?`a${[r,r]} 0 0 1 ${[r,r]}`:`h${r}v${r}`,l+="v"+((i=0===(i=Math.floor(i))?1:i)-2*r),l+=c?`a${[r,r]} 0 0 1 ${[-r,r]}`:`v${r}h${-r}`,l+="h"+(2*r-n),l+=a?`a${[r,r]} 0 0 1 ${[-r,-r]}`:`h${-r}v${-r}`,l+="v"+(2*r-i),l+=s?`a${[r,r]} 0 0 1 ${[r,-r]}`:`v${-r}h${r}`,l+="z",l}let GM=(()=>{let t=class{constructor(){this.tickArguments=[5],this.tickStroke="#ccc",this.trimTicks=!0,this.maxTickLength=16,this.showGridLines=!1,this.showRefLabels=!1,this.showRefLines=!1,this.dimensionsChanged=new jc,this.innerTickSize=6,this.tickPadding=3,this.verticalSpacing=20,this.textAnchor="middle",this.width=0,this.outerTickSize=6,this.rotateLabels=!1,this.referenceLineLength=0}ngOnChanges(t){this.update()}ngAfterViewInit(){setTimeout(()=>this.updateDims())}updateDims(){const t=parseInt(this.ticksElement.nativeElement.getBoundingClientRect().width,10);t!==this.width&&(this.width=t,this.dimensionsChanged.emit({width:t}),setTimeout(()=>this.updateDims()))}update(){let t;const e="top"===this.orient||"right"===this.orient?-1:1;switch(this.tickSpacing=Math.max(this.innerTickSize,0)+this.tickPadding,t=this.scale,this.ticks=this.getTicks(),this.tickFormat=this.tickFormatting?this.tickFormatting:t.tickFormat?t.tickFormat.apply(t,this.tickArguments):function(t){return"Date"===t.constructor.name?t.toLocaleDateString():t.toLocaleString()},this.adjustedScale=t.bandwidth?function(e){return t(e)+.5*t.bandwidth()}:t,this.showRefLines&&this.referenceLines&&this.setReferencelines(),this.orient){case"top":case"bottom":this.transform=function(t){return"translate("+this.adjustedScale(t)+",0)"},this.textAnchor="middle",this.y2=this.innerTickSize*e,this.y1=this.tickSpacing*e,this.dy=e<0?"0em":".71em";break;case"left":this.transform=function(t){return"translate(0,"+this.adjustedScale(t)+")"},this.textAnchor="end",this.x2=this.innerTickSize*-e,this.x1=this.tickSpacing*-e,this.dy=".32em";break;case"right":this.transform=function(t){return"translate(0,"+this.adjustedScale(t)+")"},this.textAnchor="start",this.x2=this.innerTickSize*-e,this.x1=this.tickSpacing*-e,this.dy=".32em"}setTimeout(()=>this.updateDims())}setReferencelines(){this.refMin=this.adjustedScale(Math.min.apply(null,this.referenceLines.map(t=>t.value))),this.refMax=this.adjustedScale(Math.max.apply(null,this.referenceLines.map(t=>t.value))),this.referenceLineLength=this.referenceLines.length,this.referenceAreaPath=qM(0,this.refMax,this.gridLineWidth,this.refMin-this.refMax,0,[!1,!1,!1,!1])}getTicks(){let t;const e=this.getMaxTicks(20),n=this.getMaxTicks(50);return this.tickValues?t=this.tickValues:this.scale.ticks?t=this.scale.ticks.apply(this.scale,[n]):(t=this.scale.domain(),t=jM(t,e)),t}getMaxTicks(t){return Math.floor(this.height/t)}tickTransform(t){return`translate(${this.adjustedScale(t)},${this.verticalSpacing})`}gridLineTransform(){return"translate(5,0)"}tickTrim(t){return this.trimTicks?BM(t,this.maxTickLength):t}};return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=de({type:t,selectors:[["g","ngx-charts-y-axis-ticks",""]],viewQuery:function(t,e){var n;1&t&&Jc(GP,!0),2&t&&Qc(n=rl())&&(e.ticksElement=n.first)},inputs:{tickArguments:"tickArguments",tickStroke:"tickStroke",trimTicks:"trimTicks",maxTickLength:"maxTickLength",showGridLines:"showGridLines",showRefLabels:"showRefLabels",showRefLines:"showRefLines",scale:"scale",orient:"orient",tickValues:"tickValues",tickFormatting:"tickFormatting",gridLineWidth:"gridLineWidth",height:"height",referenceLines:"referenceLines"},outputs:{dimensionsChanged:"dimensionsChanged"},features:[Ae],attrs:ZP,decls:6,vars:4,consts:[["ticksel",""],["class","tick",4,"ngFor","ngForOf"],["class","reference-area",4,"ngIf"],[4,"ngFor","ngForOf"],[1,"tick"],["stroke-width","0.01"],[1,"reference-area"],[4,"ngIf"],["class","gridline-path gridline-path-horizontal","x1","0",4,"ngIf"],["x1","0",1,"gridline-path","gridline-path-horizontal"],["x1","0",1,"refline-path","gridline-path-horizontal"],[1,"refline-label"]],template:function(t,e){1&t&&(Rn(),No(0,"g",null,0),Ro(2,JP,5,9,"g",1),Lo(),Ro(3,tM,1,2,"path",2),Ro(4,rM,2,2,"g",3),Ro(5,aM,2,1,"g",3)),2&t&&(kr(2),Po("ngForOf",e.ticks),kr(1),Po("ngIf",e.referenceLineLength>1&&e.refMax&&e.refMin&&e.showRefLines),kr(1),Po("ngForOf",e.ticks),kr(1),Po("ngForOf",e.referenceLines))},directives:[Ru,Au],encapsulation:2,changeDetection:0}),t})(),$M=(()=>{let t=class{constructor(){this.showGridLines=!1,this.yOrient="left",this.yAxisOffset=0,this.dimensionsChanged=new jc,this.yAxisClassName="y axis",this.labelOffset=15,this.fill="none",this.stroke="#CCC",this.tickStroke="#CCC",this.strokeWidth=1,this.padding=5}ngOnChanges(t){this.update()}update(){this.offset=-(this.yAxisOffset+this.padding),"right"===this.yOrient?(this.labelOffset=65,this.transform=`translate(${this.offset+this.dims.width} , 0)`):(this.offset=this.offset,this.transform=`translate(${this.offset} , 0)`),void 0!==this.yAxisTickCount&&(this.tickArguments=[this.yAxisTickCount])}emitTicksWidth({width:t}){t!==this.labelOffset&&"right"===this.yOrient?(this.labelOffset=t+this.labelOffset,setTimeout(()=>{this.dimensionsChanged.emit({width:t})},0)):t!==this.labelOffset&&(this.labelOffset=t,setTimeout(()=>{this.dimensionsChanged.emit({width:t})},0))}};return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=de({type:t,selectors:[["g","ngx-charts-y-axis",""]],viewQuery:function(t,e){var n;1&t&&Jc(GM,!0),2&t&&Qc(n=rl())&&(e.ticksComponent=n.first)},inputs:{showGridLines:"showGridLines",yOrient:"yOrient",yAxisOffset:"yAxisOffset",yScale:"yScale",dims:"dims",trimTicks:"trimTicks",maxTickLength:"maxTickLength",tickFormatting:"tickFormatting",ticks:"ticks",showLabel:"showLabel",labelText:"labelText",yAxisTickInterval:"yAxisTickInterval",yAxisTickCount:"yAxisTickCount",referenceLines:"referenceLines",showRefLines:"showRefLines",showRefLabels:"showRefLabels"},outputs:{dimensionsChanged:"dimensionsChanged"},features:[Ae],attrs:cM,decls:3,vars:4,consts:[["ngx-charts-y-axis-ticks","",3,"trimTicks","maxTickLength","tickFormatting","tickArguments","tickValues","tickStroke","scale","orient","showGridLines","gridLineWidth","referenceLines","showRefLines","showRefLabels","height","dimensionsChanged",4,"ngIf"],["ngx-charts-axis-label","",3,"label","offset","orient","height","width",4,"ngIf"],["ngx-charts-y-axis-ticks","",3,"trimTicks","maxTickLength","tickFormatting","tickArguments","tickValues","tickStroke","scale","orient","showGridLines","gridLineWidth","referenceLines","showRefLines","showRefLabels","height","dimensionsChanged"],["ngx-charts-axis-label","",3,"label","offset","orient","height","width"]],template:function(t,e){1&t&&(Rn(),No(0,"g"),Ro(1,lM,1,14,"g",0),Ro(2,uM,1,5,"g",1),Lo()),2&t&&(To("class",e.yAxisClassName)("transform",e.transform),kr(1),Po("ngIf",e.yScale),kr(1),Po("ngIf",e.showLabel))},directives:[Au,GM,UM],encapsulation:2,changeDetection:0}),t})(),HM=(()=>{let t=class{};return t.\u0275mod=ge({type:t}),t.\u0275inj=ut({factory:function(e){return new(e||t)},imports:[[$u]]}),t})();var zM=function(t){return t[t.popover="popover"]="popover",t[t.tooltip="tooltip"]="tooltip",t}({}),WM=function(t){return t[t.left="left"]="left",t[t.center="center"]="center",t[t.right="right"]="right",t}({}),YM=function(t){return t[t.all="all"]="all",t[t.focus="focus"]="focus",t[t.mouseover="mouseover"]="mouseover",t}({});let XM=(()=>{let t=class{constructor(t,e,n){this.tooltipService=t,this.viewContainerRef=e,this.renderer=n,this.tooltipCssClass="",this.tooltipTitle="",this.tooltipAppendToBody=!0,this.tooltipSpacing=10,this.tooltipDisabled=!1,this.tooltipShowCaret=!0,this.tooltipPlacement=RM.top,this.tooltipAlignment=WM.center,this.tooltipType=zM.popover,this.tooltipCloseOnClickOutside=!0,this.tooltipCloseOnMouseLeave=!0,this.tooltipHideTimeout=300,this.tooltipShowTimeout=100,this.tooltipShowEvent=YM.all,this.tooltipImmediateExit=!1,this.show=new jc,this.hide=new jc}get listensForFocus(){return this.tooltipShowEvent===YM.all||this.tooltipShowEvent===YM.focus}get listensForHover(){return this.tooltipShowEvent===YM.all||this.tooltipShowEvent===YM.mouseover}ngOnDestroy(){this.hideTooltip(!0)}onFocus(){this.listensForFocus&&this.showTooltip()}onBlur(){this.listensForFocus&&this.hideTooltip(!0)}onMouseEnter(){this.listensForHover&&this.showTooltip()}onMouseLeave(t){if(this.listensForHover&&this.tooltipCloseOnMouseLeave){if(clearTimeout(this.timeout),this.component&&this.component.instance.element.nativeElement.contains(t))return;this.hideTooltip(this.tooltipImmediateExit)}}onMouseClick(){this.listensForHover&&this.hideTooltip(!0)}showTooltip(t){if(this.component||this.tooltipDisabled)return;const e=t?0:this.tooltipShowTimeout;clearTimeout(this.timeout),this.timeout=setTimeout(()=>{this.tooltipService.destroyAll();const t=this.createBoundOptions();this.component=this.tooltipService.create(t),setTimeout(()=>{this.component&&this.addHideListeners(this.component.instance.element.nativeElement)},10),this.show.emit(!0)},e)}addHideListeners(t){this.mouseEnterContentEvent=this.renderer.listen(t,"mouseenter",()=>{clearTimeout(this.timeout)}),this.tooltipCloseOnMouseLeave&&(this.mouseLeaveContentEvent=this.renderer.listen(t,"mouseleave",()=>{this.hideTooltip(this.tooltipImmediateExit)})),this.tooltipCloseOnClickOutside&&(this.documentClickEvent=this.renderer.listen(document,"click",e=>{t.contains(e.target)||this.hideTooltip()}))}hideTooltip(t=!1){if(!this.component)return;const e=()=>{this.mouseLeaveContentEvent&&this.mouseLeaveContentEvent(),this.mouseEnterContentEvent&&this.mouseEnterContentEvent(),this.documentClickEvent&&this.documentClickEvent(),this.hide.emit(!0),this.tooltipService.destroy(this.component),this.component=void 0};clearTimeout(this.timeout),t?e():this.timeout=setTimeout(e,this.tooltipHideTimeout)}createBoundOptions(){return{title:this.tooltipTitle,template:this.tooltipTemplate,host:this.viewContainerRef.element,placement:this.tooltipPlacement,alignment:this.tooltipAlignment,type:this.tooltipType,showCaret:this.tooltipShowCaret,cssClass:this.tooltipCssClass,spacing:this.tooltipSpacing,context:this.tooltipContext}}};return t.\u0275fac=function(e){return new(e||t)(Ao(MM),Ao(gc),Ao(Wa))},t.\u0275dir=ye({type:t,selectors:[["","ngx-tooltip",""]],hostBindings:function(t,e){1&t&&qo("focusin",(function(){return e.onFocus()}))("blur",(function(){return e.onBlur()}))("mouseenter",(function(){return e.onMouseEnter()}))("mouseleave",(function(t){return e.onMouseLeave(t.target)}))("click",(function(){return e.onMouseClick()}))},inputs:{tooltipCssClass:"tooltipCssClass",tooltipTitle:"tooltipTitle",tooltipAppendToBody:"tooltipAppendToBody",tooltipSpacing:"tooltipSpacing",tooltipDisabled:"tooltipDisabled",tooltipShowCaret:"tooltipShowCaret",tooltipPlacement:"tooltipPlacement",tooltipAlignment:"tooltipAlignment",tooltipType:"tooltipType",tooltipCloseOnClickOutside:"tooltipCloseOnClickOutside",tooltipCloseOnMouseLeave:"tooltipCloseOnMouseLeave",tooltipHideTimeout:"tooltipHideTimeout",tooltipShowTimeout:"tooltipShowTimeout",tooltipShowEvent:"tooltipShowEvent",tooltipImmediateExit:"tooltipImmediateExit",tooltipTemplate:"tooltipTemplate",tooltipContext:"tooltipContext"},outputs:{show:"show",hide:"hide"}}),t})(),QM=(()=>{let t=class{};return t.\u0275mod=ge({type:t}),t.\u0275inj=ut({factory:function(e){return new(e||t)},providers:[TM,MM],imports:[[$u]]}),t})();function ZM(t){return t instanceof Date?t.toLocaleDateString():t.toLocaleString()}const JM={};let tN,eN=(()=>{let t=class{constructor(){this.orientation="vertical"}ngOnChanges(t){this.x1="0%",this.x2="0%",this.y1="0%",this.y2="0%","horizontal"===this.orientation?this.x2="100%":"vertical"===this.orientation&&(this.y1="100%")}};return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=de({type:t,selectors:[["g","ngx-charts-svg-linear-gradient",""]],inputs:{orientation:"orientation",name:"name",stops:"stops"},features:[Ae],attrs:hM,decls:2,vars:6,consts:[[3,"id"],[3,"stop-color","stop-opacity",4,"ngFor","ngForOf"]],template:function(t,e){1&t&&(Rn(),No(0,"linearGradient",0),Ro(1,dM,1,5,"stop",1),Lo()),2&t&&(Po("id",e.name),To("x1",e.x1)("y1",e.y1)("x2",e.x2)("y2",e.y2),kr(1),Po("ngForOf",e.stops))},directives:[Ru],encapsulation:2,changeDetection:0}),t})();"undefined"!=typeof window?tN=window:"undefined"!=typeof global&&(tN=global);let nN=(()=>{let t=class{constructor(t){this.cd=t,this.horizontal=!1,this.labelClick=new jc,this.labelActivate=new jc,this.labelDeactivate=new jc,this.legendEntries=[]}ngOnChanges(t){this.update()}update(){this.cd.markForCheck(),this.legendEntries=this.getLegendEntries()}getLegendEntries(){const t=[];for(const e of this.data){const n=ZM(e);-1===t.findIndex(t=>t.label===n)&&t.push({label:e,formattedLabel:n,color:this.colors.getColor(e)})}return t}isActive(t){return!!this.activeEntries&&void 0!==this.activeEntries.find(e=>t.label===e.name)}activate(t){this.labelActivate.emit(t)}deactivate(t){this.labelDeactivate.emit(t)}trackBy(t,e){return e.label}};return t.\u0275fac=function(e){return new(e||t)(Ao(Zs))},t.\u0275cmp=de({type:t,selectors:[["ngx-charts-legend"]],inputs:{horizontal:"horizontal",data:"data",title:"title",colors:"colors",height:"height",width:"width",activeEntries:"activeEntries"},outputs:{labelClick:"labelClick",labelActivate:"labelActivate",labelDeactivate:"labelDeactivate"},features:[Ae],decls:5,vars:9,consts:[["class","legend-title",4,"ngIf"],[1,"legend-wrap"],[1,"legend-labels"],["class","legend-label",4,"ngFor","ngForOf","ngForTrackBy"],[1,"legend-title"],[1,"legend-title-text"],[1,"legend-label"],[3,"label","formattedLabel","color","isActive","select","activate","deactivate"]],template:function(t,e){1&t&&(No(0,"div"),Ro(1,pM,3,1,"header",0),No(2,"div",1),No(3,"ul",2),Ro(4,mM,2,4,"li",3),Lo(),Lo(),Lo()),2&t&&(sa("width",e.width,"px"),kr(1),Po("ngIf",(null==e.title?null:e.title.length)>0),kr(2),sa("max-height",e.height-45,"px"),oa("horizontal-legend",e.horizontal),kr(1),Po("ngForOf",e.legendEntries)("ngForTrackBy",e.trackBy))},directives:function(){return[Au,Ru,iN]},styles:[".chart-legend{display:inline-block;padding:0;width:auto!important}.chart-legend .legend-title{white-space:nowrap;overflow:hidden;margin-left:10px;margin-bottom:5px;font-size:14px;font-weight:700}.chart-legend li,.chart-legend ul{padding:0;margin:0;list-style:none}.chart-legend .horizontal-legend li{display:inline-block}.chart-legend .legend-wrap{width:calc(100% - 10px)}.chart-legend .legend-labels{line-height:85%;list-style:none;text-align:left;float:left;width:100%;border-radius:3px;overflow-y:auto;overflow-x:hidden;white-space:nowrap;background:rgba(0,0,0,.05)}.chart-legend .legend-label{cursor:pointer;font-size:90%;margin:8px;color:#afb7c8}.chart-legend .legend-label:hover{color:#000;transition:.2s}.chart-legend .legend-label .active .legend-label-text{color:#000}.chart-legend .legend-label-color{display:inline-block;height:15px;width:15px;margin-right:5px;color:#5b646b;border-radius:3px}.chart-legend .legend-label-text{display:inline-block;vertical-align:top;line-height:15px;font-size:12px;width:calc(100% - 20px);text-overflow:ellipsis;white-space:nowrap;overflow:hidden}.chart-legend .legend-title-text{vertical-align:bottom;display:inline-block;line-height:16px;overflow:hidden;white-space:nowrap;text-overflow:ellipsis}"],encapsulation:2,changeDetection:0}),t})(),iN=(()=>{let t=class{constructor(){this.isActive=!1,this.select=new jc,this.activate=new jc,this.deactivate=new jc,this.toggle=new jc}get trimmedLabel(){return this.formattedLabel||"(empty)"}onMouseEnter(){this.activate.emit({name:this.label})}onMouseLeave(){this.deactivate.emit({name:this.label})}};return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=de({type:t,selectors:[["ngx-charts-legend-entry"]],hostBindings:function(t,e){1&t&&qo("mouseenter",(function(){return e.onMouseEnter()}))("mouseleave",(function(){return e.onMouseLeave()}))},inputs:{isActive:"isActive",color:"color",label:"label",formattedLabel:"formattedLabel"},outputs:{select:"select",activate:"activate",deactivate:"deactivate",toggle:"toggle"},decls:4,vars:6,consts:[["tabindex","-1",3,"title","click"],[1,"legend-label-color",3,"click"],[1,"legend-label-text"]],template:function(t,e){1&t&&(No(0,"span",0),qo("click",(function(){return e.select.emit(e.formattedLabel)})),No(1,"span",1),qo("click",(function(){return e.toggle.emit(e.formattedLabel)})),Lo(),No(2,"span",2),ya(3),Lo(),Lo()),2&t&&(oa("active",e.isActive),Po("title",e.formattedLabel),kr(1),sa("background-color",e.color),kr(2),ba(" ",e.trimmedLabel," "))},encapsulation:2,changeDetection:0}),t})(),rN=(()=>{let t=class{constructor(t){this.sanitizer=t,this.horizontal=!1}ngOnChanges(t){const e=this.gradientString(this.colors.range(),this.colors.domain());this.gradient=this.sanitizer.bypassSecurityTrustStyle(`linear-gradient(to ${this.horizontal?"right":"bottom"}, ${e})`)}gradientString(t,e){e.push(1);const n=[];return t.reverse().forEach((t,i)=>{n.push(`${t} ${Math.round(100*e[i])}%`)}),n.join(", ")}};return t.\u0275fac=function(e){return new(e||t)(Ao(vh))},t.\u0275cmp=de({type:t,selectors:[["ngx-charts-scale-legend"]],inputs:{horizontal:"horizontal",valueRange:"valueRange",colors:"colors",height:"height",width:"width"},features:[Ae],decls:8,vars:10,consts:[[1,"scale-legend"],[1,"scale-legend-label"],[1,"scale-legend-wrap"]],template:function(t,e){1&t&&(No(0,"div",0),No(1,"div",1),No(2,"span"),ya(3),Lo(),Lo(),Fo(4,"div",2),No(5,"div",1),No(6,"span"),ya(7),Lo(),Lo(),Lo()),2&t&&(sa("height",e.horizontal?void 0:e.height,"px")("width",e.width,"px"),oa("horizontal-legend",e.horizontal),kr(3),va(e.valueRange[1].toLocaleString()),kr(1),sa("background",e.gradient),kr(3),va(e.valueRange[0].toLocaleString()))},styles:[".chart-legend{display:inline-block;padding:0;width:auto!important}.chart-legend .scale-legend{text-align:center;display:flex;flex-direction:column}.chart-legend .scale-legend-wrap{display:inline-block;flex:1;width:30px;border-radius:5px;margin:0 auto}.chart-legend .scale-legend-label{font-size:12px}.chart-legend .horizontal-legend.scale-legend{flex-direction:row}.chart-legend .horizontal-legend .scale-legend-wrap{width:auto;height:30px;margin:0 16px}"],encapsulation:2,changeDetection:0}),t})(),sN=(()=>{let t=class{};return t.\u0275mod=ge({type:t}),t.\u0275inj=ut({factory:function(e){return new(e||t)},imports:[[$u,HM,QM],$u,HM,QM]}),t})(),oN=[{name:"vivid",selectable:!0,group:"Ordinal",domain:["#647c8a","#3f51b5","#2196f3","#00b862","#afdf0a","#a7b61a","#f3e562","#ff9800","#ff5722","#ff4514"]},{name:"natural",selectable:!0,group:"Ordinal",domain:["#bf9d76","#e99450","#d89f59","#f2dfa7","#a5d7c6","#7794b1","#afafaf","#707160","#ba9383","#d9d5c3"]},{name:"cool",selectable:!0,group:"Ordinal",domain:["#a8385d","#7aa3e5","#a27ea8","#aae3f5","#adcded","#a95963","#8796c0","#7ed3ed","#50abcc","#ad6886"]},{name:"fire",selectable:!0,group:"Ordinal",domain:["#ff3d00","#bf360c","#ff8f00","#ff6f00","#ff5722","#e65100","#ffca28","#ffab00"]},{name:"solar",selectable:!0,group:"Continuous",domain:["#fff8e1","#ffecb3","#ffe082","#ffd54f","#ffca28","#ffc107","#ffb300","#ffa000","#ff8f00","#ff6f00"]},{name:"air",selectable:!0,group:"Continuous",domain:["#e1f5fe","#b3e5fc","#81d4fa","#4fc3f7","#29b6f6","#03a9f4","#039be5","#0288d1","#0277bd","#01579b"]},{name:"aqua",selectable:!0,group:"Continuous",domain:["#e0f7fa","#b2ebf2","#80deea","#4dd0e1","#26c6da","#00bcd4","#00acc1","#0097a7","#00838f","#006064"]},{name:"flame",selectable:!1,group:"Ordinal",domain:["#A10A28","#D3342D","#EF6D49","#FAAD67","#FDDE90","#DBED91","#A9D770","#6CBA67","#2C9653","#146738"]},{name:"ocean",selectable:!1,group:"Ordinal",domain:["#1D68FB","#33C0FC","#4AFFFE","#AFFFFF","#FFFC63","#FDBD2D","#FC8A25","#FA4F1E","#FA141B","#BA38D1"]},{name:"forest",selectable:!1,group:"Ordinal",domain:["#55C22D","#C1F33D","#3CC099","#AFFFFF","#8CFC9D","#76CFFA","#BA60FB","#EE6490","#C42A1C","#FC9F32"]},{name:"horizon",selectable:!1,group:"Ordinal",domain:["#2597FB","#65EBFD","#99FDD0","#FCEE4B","#FEFCFA","#FDD6E3","#FCB1A8","#EF6F7B","#CB96E8","#EFDEE0"]},{name:"neons",selectable:!1,group:"Ordinal",domain:["#FF3333","#FF33FF","#CC33FF","#0000FF","#33CCFF","#33FFFF","#33FF66","#CCFF33","#FFCC00","#FF6600"]},{name:"picnic",selectable:!1,group:"Ordinal",domain:["#FAC51D","#66BD6D","#FAA026","#29BB9C","#E96B56","#55ACD2","#B7332F","#2C83C9","#9166B8","#92E7E8"]},{name:"night",selectable:!1,group:"Ordinal",domain:["#2B1B5A","#501356","#183356","#28203F","#391B3C","#1E2B3C","#120634","#2D0432","#051932","#453080","#75267D","#2C507D","#4B3880","#752F7D","#35547D"]},{name:"nightLights",selectable:!1,group:"Ordinal",domain:["#4e31a5","#9c25a7","#3065ab","#57468b","#904497","#46648b","#32118d","#a00fb3","#1052a2","#6e51bd","#b63cc3","#6c97cb","#8671c1","#b455be","#7496c3"]}];class aN{constructor(t,e,n,i){"string"==typeof t&&(t=oN.find(e=>e.name===t)),this.colorDomain=t.domain,this.scaleType=e,this.domain=n,this.customColors=i,this.scale=this.generateColorScheme(t,e,this.domain)}generateColorScheme(t,e,n){let i;if("string"==typeof t&&(t=oN.find(e=>e.name===t)),"quantile"===e)i=function t(){var e,n=[],i=[],r=[];function s(){var t=0,e=Math.max(1,i.length);for(r=new Array(e-1);++t<e;)r[t-1]=gP(n,t/e);return o}function o(t){return isNaN(t=+t)?e:i[LD(r,t)]}return o.invertExtent=function(t){var e=i.indexOf(t);return e<0?[NaN,NaN]:[e>0?r[e-1]:n[0],e<r.length?r[e]:n[n.length-1]]},o.domain=function(t){if(!arguments.length)return n.slice();n=[];for(let e of t)null==e||isNaN(e=+e)||n.push(e);return n.sort(SA),s()},o.range=function(t){return arguments.length?(i=Array.from(t),s()):i.slice()},o.unknown=function(t){return arguments.length?(e=t,o):e},o.quantiles=function(){return r.slice()},o.copy=function(){return t().domain(n).range(i).unknown(e)},HD.apply(o,arguments)}().range(t.domain).domain(n);else if("ordinal"===e)i=hP().range(t.domain).domain(n);else if("linear"===e){const e=[...t.domain];1===e.length&&(e.push(e[0]),this.colorDomain=e);const n=lP(0,1,1/e.length);i=cP().domain(n).range(e)}return i}getColor(t){if(null==t)throw new Error("Value can not be null");if("linear"===this.scaleType){const e=cP().domain(this.domain).range([0,1]);return this.scale(e(t))}{if("function"==typeof this.customColors)return this.customColors(t);const e=t.toString();let n;return this.customColors&&this.customColors.length>0&&(n=this.customColors.find(t=>t.name.toLowerCase()===e.toLowerCase())),n?n.value:this.scale(t)}}getLinearGradientStops(t,e){void 0===e&&(e=this.domain[0]);const n=cP().domain(this.domain).range([0,1]),i=dP().domain(this.colorDomain).range([0,1]),r=this.getColor(t),s=n(e),o=this.getColor(e),a=n(t);let c=1,l=s;const u=[];for(u.push({color:o,offset:s,originalOffset:s,opacity:1});l<a&&c<this.colorDomain.length;){const t=this.colorDomain[c],e=i(t);if(e<=s)c++;else{if(e.toFixed(4)>=(a-i.bandwidth()).toFixed(4))break;u.push({color:t,offset:e,opacity:1}),l=e,c++}}if(u[u.length-1].offset<100&&u.push({color:r,offset:a,opacity:1}),a===s)u[0].offset=0,u[1].offset=100;else if(100!==u[u.length-1].offset)for(const h of u)h.offset=(h.offset-s)/(a-s)*100;return u}}let cN=(()=>{let t=class{};return t.\u0275mod=ge({type:t}),t.\u0275inj=ut({factory:function(e){return new(e||t)},imports:[[sN]]}),t})(),lN=(()=>{let t=class{constructor(t){this.roundEdges=!0,this.gradient=!1,this.offset=0,this.isActive=!1,this.animations=!0,this.noBarWhenZero=!0,this.select=new jc,this.activate=new jc,this.deactivate=new jc,this.hasGradient=!1,this.hideBar=!1,this.element=t.nativeElement}ngOnChanges(t){t.roundEdges&&this.loadAnimation(),this.update()}update(){this.gradientId="grad"+function t(){let e=("0000"+(Math.random()*Math.pow(36,4)<<0).toString(36)).slice(-4);return e="a"+e,JM[e]?t():(JM[e]=!0,e)}().toString(),this.gradientFill=`url(#${this.gradientId})`,this.gradient||this.stops?(this.gradientStops=this.getGradient(),this.hasGradient=!0):this.hasGradient=!1,this.updatePathEl(),this.checkToHideBar()}loadAnimation(){this.path=this.getStartingPath(),setTimeout(this.update.bind(this),100)}updatePathEl(){const t=(n=this.element,"string"==typeof n?new uR([[document.querySelector(n)]],[document.documentElement]):new uR([[n]],lR)).select(".bar"),e=this.getPath();var n;this.animations?t.transition().duration(500).attr("d",e):t.attr("d",e)}getGradient(){return this.stops?this.stops:[{offset:0,color:this.fill,opacity:this.getStartOpacity()},{offset:100,color:this.fill,opacity:1}]}getStartingPath(){if(!this.animations)return this.getPath();let t,e=this.getRadius();return this.roundEdges?"vertical"===this.orientation?(e=Math.min(this.height,e),t=qM(this.x,this.y+this.height,this.width,1,0,this.edges)):"horizontal"===this.orientation&&(e=Math.min(this.width,e),t=qM(this.x,this.y,1,this.height,0,this.edges)):"vertical"===this.orientation?t=qM(this.x,this.y+this.height,this.width,1,0,this.edges):"horizontal"===this.orientation&&(t=qM(this.x,this.y,1,this.height,0,this.edges)),t}getPath(){let t,e=this.getRadius();return this.roundEdges?"vertical"===this.orientation?(e=Math.min(this.height,e),t=qM(this.x,this.y,this.width,this.height,e,this.edges)):"horizontal"===this.orientation&&(e=Math.min(this.width,e),t=qM(this.x,this.y,this.width,this.height,e,this.edges)):t=qM(this.x,this.y,this.width,this.height,e,this.edges),t}getRadius(){let t=0;return this.roundEdges&&this.height>5&&this.width>5&&(t=Math.floor(Math.min(5,this.height/2,this.width/2))),t}getStartOpacity(){return this.roundEdges?.2:.5}get edges(){let t=[!1,!1,!1,!1];return this.roundEdges&&("vertical"===this.orientation?t=this.data.value>0?[!0,!0,!1,!1]:[!1,!1,!0,!0]:"horizontal"===this.orientation&&(t=this.data.value>0?[!1,!0,!1,!0]:[!0,!1,!0,!1])),t}onMouseEnter(){this.activate.emit(this.data)}onMouseLeave(){this.deactivate.emit(this.data)}checkToHideBar(){this.hideBar=this.noBarWhenZero&&("vertical"===this.orientation&&0===this.height||"horizontal"===this.orientation&&0===this.width)}};return t.\u0275fac=function(e){return new(e||t)(Ao(Ga))},t.\u0275cmp=de({type:t,selectors:[["g","ngx-charts-bar",""]],hostBindings:function(t,e){1&t&&qo("mouseenter",(function(){return e.onMouseEnter()}))("mouseleave",(function(){return e.onMouseLeave()}))},inputs:{roundEdges:"roundEdges",gradient:"gradient",offset:"offset",isActive:"isActive",animations:"animations",noBarWhenZero:"noBarWhenZero",fill:"fill",data:"data",width:"width",height:"height",x:"x",y:"y",orientation:"orientation",stops:"stops",ariaLabel:"ariaLabel"},outputs:{select:"select",activate:"activate",deactivate:"deactivate"},features:[Ae],attrs:_M,decls:2,vars:8,consts:[[4,"ngIf"],["stroke","none","role","img","tabIndex","-1",1,"bar",3,"click"],["ngx-charts-svg-linear-gradient","",3,"orientation","name","stops"]],template:function(t,e){1&t&&(Ro(0,yM,2,3,"defs",0),Rn(),No(1,"path",1),qo("click",(function(){return e.select.emit(e.data)})),Lo()),2&t&&(Po("ngIf",e.hasGradient),kr(1),oa("active",e.isActive)("hidden",e.hideBar),To("d",e.path)("aria-label",e.ariaLabel)("fill",e.hasGradient?e.gradientFill:e.fill))},directives:[Au,eN],encapsulation:2,changeDetection:0}),t})(),uN=(()=>{let t=class extends FM{constructor(){super(...arguments),this.legend=!1,this.legendTitle="Legend",this.legendPosition="right",this.tooltipDisabled=!1,this.showGridLines=!0,this.activeEntries=[],this.trimXAxisTicks=!0,this.trimYAxisTicks=!0,this.rotateXAxisTicks=!0,this.maxXAxisTickLength=16,this.maxYAxisTickLength=16,this.barPadding=8,this.roundDomains=!1,this.roundEdges=!0,this.showDataLabel=!1,this.noBarWhenZero=!0,this.activate=new jc,this.deactivate=new jc,this.margin=[10,20,10,20],this.xAxisHeight=0,this.yAxisWidth=0,this.dataLabelMaxWidth={negative:0,positive:0}}update(){super.update(),this.showDataLabel||(this.dataLabelMaxWidth={negative:0,positive:0}),this.margin=[10,20+this.dataLabelMaxWidth.positive,10,20+this.dataLabelMaxWidth.negative],this.dims=function({width:t,height:e,margins:n,showXAxis:i=!1,showYAxis:r=!1,xAxisHeight:s=0,yAxisWidth:o=0,showXLabel:a=!1,showYLabel:c=!1,showLegend:l=!1,legendType:u="ordinal",legendPosition:h="right",columns:d=12}){let p=n[3],m=t,f=e-n[0]-n[2];if(l&&"right"===h&&(d-="ordinal"===u?2:1),m=m*d/12,m=m-n[1]-n[3],i&&(f-=5,f-=s,a)&&(f-=30),r&&(m-=5,m-=o,p+=o,p+=10,c)){const t=30;m-=t,p+=t}return m=Math.max(0,m),f=Math.max(0,f),{width:Math.floor(m),height:Math.floor(f),xOffset:Math.floor(p)}}({width:this.width,height:this.height,margins:this.margin,showXAxis:this.xAxis,showYAxis:this.yAxis,xAxisHeight:this.xAxisHeight,yAxisWidth:this.yAxisWidth,showXLabel:this.showXAxisLabel,showYLabel:this.showYAxisLabel,showLegend:this.legend,legendType:this.schemeType,legendPosition:this.legendPosition}),this.formatDates(),this.xScale=this.getXScale(),this.yScale=this.getYScale(),this.setColors(),this.legendOptions=this.getLegendOptions(),this.transform=`translate(${this.dims.xOffset} , ${this.margin[0]})`}getXScale(){this.xDomain=this.getXDomain();const t=cP().range([0,this.dims.width]).domain(this.xDomain);return this.roundDomains?t.nice():t}getYScale(){this.yDomain=this.getYDomain();const t=this.yDomain.length/(this.dims.height/this.barPadding+1);return dP().rangeRound([0,this.dims.height]).paddingInner(t).domain(this.yDomain)}getXDomain(){const t=this.results.map(t=>t.value);return[this.xScaleMin?Math.min(this.xScaleMin,...t):Math.min(0,...t),this.xScaleMax?Math.max(this.xScaleMax,...t):Math.max(0,...t)]}getYDomain(){return this.results.map(t=>t.label)}onClick(t){this.select.emit(t)}setColors(){let t;t="ordinal"===this.schemeType?this.yDomain:this.xDomain,this.colors=new aN(this.scheme,this.schemeType,t,this.customColors)}getLegendOptions(){const t={scaleType:this.schemeType,colors:void 0,domain:[],title:void 0,position:this.legendPosition};return"ordinal"===t.scaleType?(t.domain=this.yDomain,t.colors=this.colors,t.title=this.legendTitle):(t.domain=this.xDomain,t.colors=this.colors.scale),t}updateYAxisWidth({width:t}){this.yAxisWidth=t,this.update()}updateXAxisHeight({height:t}){this.xAxisHeight=t,this.update()}onDataLabelMaxWidthChanged(t){t.size.negative?this.dataLabelMaxWidth.negative=Math.max(this.dataLabelMaxWidth.negative,t.size.width):this.dataLabelMaxWidth.positive=Math.max(this.dataLabelMaxWidth.positive,t.size.width),t.index===this.results.length-1&&setTimeout(()=>this.update())}onActivate(t,e=!1){t=this.results.find(n=>e?n.label===t.name:n.name===t.name),this.activeEntries.findIndex(e=>e.name===t.name&&e.value===t.value&&e.series===t.series)>-1||(this.activeEntries=[t,...this.activeEntries],this.activate.emit({value:t,entries:this.activeEntries}))}onDeactivate(t,e=!1){t=this.results.find(n=>e?n.label===t.name:n.name===t.name);const n=this.activeEntries.findIndex(e=>e.name===t.name&&e.value===t.value&&e.series===t.series);this.activeEntries.splice(n,1),this.activeEntries=[...this.activeEntries],this.deactivate.emit({value:t,entries:this.activeEntries})}};return t.\u0275fac=function(e){return kN(e||t)},t.\u0275cmp=de({type:t,selectors:[["ngx-charts-bar-horizontal"]],contentQueries:function(t,e,n){var i;1&t&&el(n,fM,!0),2&t&&Qc(i=rl())&&(e.tooltipTemplate=i.first)},inputs:{legend:"legend",legendTitle:"legendTitle",legendPosition:"legendPosition",tooltipDisabled:"tooltipDisabled",showGridLines:"showGridLines",activeEntries:"activeEntries",trimXAxisTicks:"trimXAxisTicks",trimYAxisTicks:"trimYAxisTicks",rotateXAxisTicks:"rotateXAxisTicks",maxXAxisTickLength:"maxXAxisTickLength",maxYAxisTickLength:"maxYAxisTickLength",barPadding:"barPadding",roundDomains:"roundDomains",roundEdges:"roundEdges",showDataLabel:"showDataLabel",noBarWhenZero:"noBarWhenZero",xAxis:"xAxis",yAxis:"yAxis",showXAxisLabel:"showXAxisLabel",showYAxisLabel:"showYAxisLabel",xAxisLabel:"xAxisLabel",yAxisLabel:"yAxisLabel",gradient:"gradient",schemeType:"schemeType",xAxisTickFormatting:"xAxisTickFormatting",yAxisTickFormatting:"yAxisTickFormatting",xAxisTicks:"xAxisTicks",yAxisTicks:"yAxisTicks",xScaleMax:"xScaleMax",xScaleMin:"xScaleMin",dataLabelFormatting:"dataLabelFormatting"},outputs:{activate:"activate",deactivate:"deactivate"},features:[Ia],decls:5,vars:25,consts:[[3,"view","showLegend","legendOptions","activeEntries","animations","legendLabelClick","legendLabelActivate","legendLabelDeactivate"],[1,"bar-chart","chart"],["ngx-charts-x-axis","",3,"xScale","dims","showGridLines","showLabel","labelText","trimTicks","rotateTicks","maxTickLength","tickFormatting","ticks","dimensionsChanged",4,"ngIf"],["ngx-charts-y-axis","",3,"yScale","dims","showLabel","labelText","trimTicks","maxTickLength","tickFormatting","ticks","yAxisOffset","dimensionsChanged",4,"ngIf"],["ngx-charts-series-horizontal","",3,"xScale","yScale","colors","series","dims","gradient","tooltipDisabled","tooltipTemplate","activeEntries","roundEdges","animations","showDataLabel","dataLabelFormatting","noBarWhenZero","select","activate","deactivate","dataLabelWidthChanged"],["ngx-charts-x-axis","",3,"xScale","dims","showGridLines","showLabel","labelText","trimTicks","rotateTicks","maxTickLength","tickFormatting","ticks","dimensionsChanged"],["ngx-charts-y-axis","",3,"yScale","dims","showLabel","labelText","trimTicks","maxTickLength","tickFormatting","ticks","yAxisOffset","dimensionsChanged"]],template:function(t,e){1&t&&(No(0,"ngx-charts-chart",0),qo("legendLabelClick",(function(t){return e.onClick(t)}))("legendLabelActivate",(function(t){return e.onActivate(t,!0)}))("legendLabelDeactivate",(function(t){return e.onDeactivate(t,!0)})),Rn(),No(1,"g",1),Ro(2,vM,1,10,"g",2),Ro(3,bM,1,9,"g",3),No(4,"g",4),qo("select",(function(t){return e.onClick(t)}))("activate",(function(t){return e.onActivate(t)}))("deactivate",(function(t){return e.onDeactivate(t)}))("dataLabelWidthChanged",(function(t){return e.onDataLabelMaxWidthChanged(t)})),Lo(),Lo(),Lo()),2&t&&(Po("view",Nc(22,gM,e.width,e.height))("showLegend",e.legend)("legendOptions",e.legendOptions)("activeEntries",e.activeEntries)("animations",e.animations),kr(1),To("transform",e.transform),kr(1),Po("ngIf",e.xAxis),kr(1),Po("ngIf",e.yAxis),kr(1),Po("xScale",e.xScale)("yScale",e.yScale)("colors",e.colors)("series",e.results)("dims",e.dims)("gradient",e.gradient)("tooltipDisabled",e.tooltipDisabled)("tooltipTemplate",e.tooltipTemplate)("activeEntries",e.activeEntries)("roundEdges",e.roundEdges)("animations",e.animations)("showDataLabel",e.showDataLabel)("dataLabelFormatting",e.dataLabelFormatting)("noBarWhenZero",e.noBarWhenZero))},directives:function(){return[NM,Au,dN,KM,$M]},styles:[".ngx-charts{float:left;overflow:visible}.ngx-charts .arc,.ngx-charts .bar,.ngx-charts .circle{cursor:pointer}.ngx-charts .arc.active,.ngx-charts .arc:hover,.ngx-charts .bar.active,.ngx-charts .bar:hover,.ngx-charts .card.active,.ngx-charts .card:hover,.ngx-charts .cell.active,.ngx-charts .cell:hover{opacity:.8;transition:opacity .1s ease-in-out}.ngx-charts .arc:focus,.ngx-charts .bar:focus,.ngx-charts .card:focus,.ngx-charts .cell:focus{outline:0}.ngx-charts .arc.hidden,.ngx-charts .bar.hidden,.ngx-charts .card.hidden,.ngx-charts .cell.hidden{display:none}.ngx-charts g:focus{outline:0}.ngx-charts .area-series.inactive,.ngx-charts .line-series-range.inactive,.ngx-charts .line-series.inactive,.ngx-charts .polar-series-area.inactive,.ngx-charts .polar-series-path.inactive{transition:opacity .1s ease-in-out;opacity:.2}.ngx-charts .line-highlight{display:none}.ngx-charts .line-highlight.active{display:block}.ngx-charts .area{opacity:.6}.ngx-charts .circle:hover{cursor:pointer}.ngx-charts .label{font-size:12px;font-weight:400}.ngx-charts .tooltip-anchor{fill:#000}.ngx-charts .gridline-path{stroke:#ddd;stroke-width:1;fill:none}.ngx-charts .refline-path{stroke:#a8b2c7;stroke-width:1;stroke-dasharray:5;stroke-dashoffset:5}.ngx-charts .refline-label{font-size:9px}.ngx-charts .reference-area{fill-opacity:.05;fill:#000}.ngx-charts .gridline-path-dotted{stroke:#ddd;stroke-width:1;fill:none;stroke-dasharray:1,20;stroke-dashoffset:3}.ngx-charts .grid-panel rect{fill:none}.ngx-charts .grid-panel.odd rect{fill:rgba(0,0,0,.05)}"],encapsulation:2,changeDetection:0}),t})();var hN=function(t){return t.positive="positive",t.negative="negative",t}({});let dN=(()=>{let t=class{constructor(){this.barsForDataLabels=[],this.type="standard",this.tooltipDisabled=!1,this.animations=!0,this.showDataLabel=!1,this.noBarWhenZero=!0,this.select=new jc,this.activate=new jc,this.deactivate=new jc,this.dataLabelWidthChanged=new jc}ngOnChanges(t){this.update()}update(){this.updateTooltipSettings();const t={[hN.positive]:0,[hN.negative]:0};let e,n;e=hN.positive,"normalized"===this.type&&(n=this.series.map(t=>t.value).reduce((t,e)=>t+e,0));const i=Math.max(this.xScale.domain()[0],0);this.bars=this.series.map((r,s)=>{let o=r.value;const a=this.getLabel(r),c=ZM(a);e=o>0?hN.positive:hN.negative;const l={value:o,label:a,roundEdges:this.roundEdges,data:r,formattedLabel:c};if(l.height=this.yScale.bandwidth(),"standard"===this.type)l.width=Math.abs(this.xScale(o)-this.xScale(i)),l.x=this.xScale(o<0?o:i),l.y=this.yScale(a);else if("stacked"===this.type){const n=t[e],i=n+o;t[e]+=o,l.width=this.xScale(i)-this.xScale(n),l.x=this.xScale(n),l.y=0,l.offset0=n,l.offset1=i}else if("normalized"===this.type){let i=t[e],r=i+o;t[e]+=o,n>0?(i=100*i/n,r=100*r/n):(i=0,r=0),l.width=this.xScale(r)-this.xScale(i),l.x=this.xScale(i),l.y=0,l.offset0=i,l.offset1=r,o=(r-i).toFixed(2)+"%"}"ordinal"===this.colors.scaleType?l.color=this.colors.getColor(a):"standard"===this.type?(l.color=this.colors.getColor(o),l.gradientStops=this.colors.getLinearGradientStops(o)):(l.color=this.colors.getColor(l.offset1),l.gradientStops=this.colors.getLinearGradientStops(l.offset1,l.offset0));let u=c;return l.ariaLabel=c+" "+o.toLocaleString(),this.seriesName&&(u=`${this.seriesName} \u2022 ${c}`,l.data.series=this.seriesName,l.ariaLabel=this.seriesName+" "+l.ariaLabel),l.tooltipText=this.tooltipDisabled?void 0:`\n        <span class="tooltip-label">${function(t){return t.toLocaleString().replace(/[&'`"<>]/g,t=>({"&":"&amp;","'":"&#x27;","`":"&#x60;",'"':"&quot;","<":"&lt;",">":"&gt;"}[t]))}(u)}</span>\n        <span class="tooltip-val">${o.toLocaleString()}</span>\n      `,l}),this.updateDataLabels()}updateDataLabels(){if("stacked"===this.type){this.barsForDataLabels=[];const t={};t.series=this.seriesName;const e=this.series.map(t=>t.value).reduce((t,e)=>e>0?t+e:t,0),n=this.series.map(t=>t.value).reduce((t,e)=>e<0?t+e:t,0);t.total=e+n,t.x=0,t.y=0,t.width=this.xScale(t.total>0?e:n),t.height=this.yScale.bandwidth(),this.barsForDataLabels.push(t)}else this.barsForDataLabels=this.series.map(t=>{const e={};return e.series=this.seriesName?this.seriesName:t.label,e.total=t.value,e.x=this.xScale(0),e.y=this.yScale(t.label),e.width=this.xScale(e.total)-this.xScale(0),e.height=this.yScale.bandwidth(),e})}updateTooltipSettings(){this.tooltipPlacement=this.tooltipDisabled?void 0:"top",this.tooltipType=this.tooltipDisabled?void 0:"tooltip"}isActive(t){return!!this.activeEntries&&void 0!==this.activeEntries.find(e=>t.name===e.name&&t.series===e.series)}getLabel(t){return t.label?t.label:t.name}trackBy(t,e){return e.label}trackDataLabelBy(t,e){return t+"#"+e.series+"#"+e.total}click(t){this.select.emit(t)}};return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=de({type:t,selectors:[["g","ngx-charts-series-horizontal",""]],inputs:{type:"type",tooltipDisabled:"tooltipDisabled",animations:"animations",showDataLabel:"showDataLabel",noBarWhenZero:"noBarWhenZero",dims:"dims",series:"series",xScale:"xScale",yScale:"yScale",colors:"colors",gradient:"gradient",activeEntries:"activeEntries",seriesName:"seriesName",tooltipTemplate:"tooltipTemplate",roundEdges:"roundEdges",dataLabelFormatting:"dataLabelFormatting"},outputs:{select:"select",activate:"activate",deactivate:"deactivate",dataLabelWidthChanged:"dataLabelWidthChanged"},features:[Ae],attrs:wM,decls:2,vars:3,consts:[["ngx-charts-bar","","ngx-tooltip","",3,"width","height","x","y","fill","stops","data","orientation","roundEdges","gradient","isActive","ariaLabel","animations","tooltipDisabled","tooltipPlacement","tooltipType","tooltipTitle","tooltipTemplate","tooltipContext","noBarWhenZero","select","activate","deactivate",4,"ngFor","ngForOf","ngForTrackBy"],[4,"ngIf"],["ngx-charts-bar","","ngx-tooltip","",3,"width","height","x","y","fill","stops","data","orientation","roundEdges","gradient","isActive","ariaLabel","animations","tooltipDisabled","tooltipPlacement","tooltipType","tooltipTitle","tooltipTemplate","tooltipContext","noBarWhenZero","select","activate","deactivate"],["ngx-charts-bar-label","",3,"barX","barY","barWidth","barHeight","value","valueFormatting","orientation","dimensionsChanged",4,"ngFor","ngForOf","ngForTrackBy"],["ngx-charts-bar-label","",3,"barX","barY","barWidth","barHeight","value","valueFormatting","orientation","dimensionsChanged"]],template:function(t,e){1&t&&(Ro(0,SM,1,21,"g",0),Ro(1,kM,2,2,"g",1)),2&t&&(Po("ngForOf",e.bars)("ngForTrackBy",e.trackBy),kr(1),Po("ngIf",e.showDataLabel))},directives:function(){return[Ru,Au,lN,XM,pN]},encapsulation:2,data:{animation:[Kd("animationState",[zd(":leave",[$d({opacity:1}),qd(500,$d({opacity:0}))])])]},changeDetection:0}),t})(),pN=(()=>{let t=class{constructor(t){this.dimensionsChanged=new jc,this.horizontalPadding=2,this.verticalPadding=5,this.element=t.nativeElement}ngOnChanges(t){this.update()}getSize(){return{height:this.element.getBoundingClientRect().height,width:this.element.getBoundingClientRect().width,negative:this.value<0}}ngAfterViewInit(){this.dimensionsChanged.emit(this.getSize())}update(){this.formatedValue=this.valueFormatting?this.valueFormatting(this.value):ZM(this.value),"horizontal"===this.orientation?(this.x=this.barX+this.barWidth,this.value<0?(this.x=this.x-this.horizontalPadding,this.textAnchor="end"):(this.x=this.x+this.horizontalPadding,this.textAnchor="start"),this.y=this.barY+this.barHeight/2):(this.x=this.barX+this.barWidth/2,this.y=this.barY+this.barHeight,this.value<0?(this.y=this.y+this.verticalPadding,this.textAnchor="end"):(this.y=this.y-this.verticalPadding,this.textAnchor="start"),this.transform=`rotate(-45, ${this.x} , ${this.y})`)}};return t.\u0275fac=function(e){return new(e||t)(Ao(Ga))},t.\u0275cmp=de({type:t,selectors:[["g","ngx-charts-bar-label",""]],inputs:{value:"value",valueFormatting:"valueFormatting",barX:"barX",barY:"barY",barWidth:"barWidth",barHeight:"barHeight",orientation:"orientation"},outputs:{dimensionsChanged:"dimensionsChanged"},features:[Ae],attrs:CM,decls:2,vars:5,consts:[["alignment-baseline","middle",1,"textDataLabel"]],template:function(t,e){1&t&&(Rn(),No(0,"text",0),ya(1),Lo()),2&t&&(To("text-anchor",e.textAnchor)("transform",e.transform)("x",e.x)("y",e.y),kr(1),ba(" ",e.formatedValue," "))},styles:[".textDataLabel[_ngcontent-%COMP%]{font-size:11px}"],changeDetection:0}),t})(),mN=(()=>{let t=class{};return t.\u0275mod=ge({type:t}),t.\u0275inj=ut({factory:function(e){return new(e||t)},imports:[[sN]]}),t})(),fN=(()=>{let t=class{};return t.\u0275mod=ge({type:t}),t.\u0275inj=ut({factory:function(e){return new(e||t)},imports:[[sN]]}),t})(),gN=(()=>{let t=class{};return t.\u0275mod=ge({type:t}),t.\u0275inj=ut({factory:function(e){return new(e||t)},imports:[[sN]]}),t})(),_N=(()=>{let t=class{};return t.\u0275mod=ge({type:t}),t.\u0275inj=ut({factory:function(e){return new(e||t)},imports:[[sN]]}),t})();Math;let yN=(()=>{let t=class{};return t.\u0275mod=ge({type:t}),t.\u0275inj=ut({factory:function(e){return new(e||t)},imports:[[sN]]}),t})(),vN=(()=>{let t=class{};return t.\u0275mod=ge({type:t}),t.\u0275inj=ut({factory:function(e){return new(e||t)},imports:[[sN,yN,_N]]}),t})(),bN=(()=>{let t=class{};return t.\u0275mod=ge({type:t}),t.\u0275inj=ut({factory:function(e){return new(e||t)},imports:[[sN]]}),t})(),wN=(()=>{let t=class{};return t.\u0275mod=ge({type:t}),t.\u0275inj=ut({factory:function(e){return new(e||t)},imports:[[sN]]}),t})(),SN=(()=>{let t=class{};return t.\u0275mod=ge({type:t}),t.\u0275inj=ut({factory:function(e){return new(e||t)},imports:[[sN,yN,mN]]}),t})(),EN=(()=>{let t=class{constructor(){"undefined"!=typeof SVGElement&&void 0===SVGElement.prototype.contains&&(SVGElement.prototype.contains=HTMLDivElement.prototype.contains)}};return t.\u0275mod=ge({type:t}),t.\u0275inj=ut({factory:function(e){return new(e||t)},imports:[sN,cN,mN,fN,gN,_N,vN,bN,yN,wN,SN]}),t})();const kN=fi(uN),CN=["*"],xN=new Ft("MAT_GRID_LIST");let TN=(()=>{class t{constructor(t,e){this._element=t,this._gridList=e,this._rowspan=1,this._colspan=1}get rowspan(){return this._rowspan}set rowspan(t){this._rowspan=Math.round(Ch(t))}get colspan(){return this._colspan}set colspan(t){this._colspan=Math.round(Ch(t))}_setStyle(t,e){this._element.nativeElement.style[t]=e}}return t.\u0275fac=function(e){return new(e||t)(Ao(Ga),Ao(xN,8))},t.\u0275cmp=de({type:t,selectors:[["mat-grid-tile"]],hostAttrs:[1,"mat-grid-tile"],hostVars:2,hostBindings:function(t,e){2&t&&To("rowspan",e.rowspan)("colspan",e.colspan)},inputs:{rowspan:"rowspan",colspan:"colspan"},exportAs:["matGridTile"],ngContentSelectors:CN,decls:2,vars:0,consts:[[1,"mat-figure"]],template:function(t,e){1&t&&(Xo(),No(0,"figure",0),Qo(1),Lo())},styles:[".mat-grid-list{display:block;position:relative}.mat-grid-tile{display:block;position:absolute;overflow:hidden}.mat-grid-tile .mat-figure{top:0;left:0;right:0;bottom:0;position:absolute;display:flex;align-items:center;justify-content:center;height:100%;padding:0;margin:0}.mat-grid-tile .mat-grid-tile-header,.mat-grid-tile .mat-grid-tile-footer{display:flex;align-items:center;height:48px;color:#fff;background:rgba(0,0,0,.38);overflow:hidden;padding:0 16px;position:absolute;left:0;right:0}.mat-grid-tile .mat-grid-tile-header>*,.mat-grid-tile .mat-grid-tile-footer>*{margin:0;padding:0;font-weight:normal;font-size:inherit}.mat-grid-tile .mat-grid-tile-header.mat-2-line,.mat-grid-tile .mat-grid-tile-footer.mat-2-line{height:68px}.mat-grid-tile .mat-grid-list-text{display:flex;flex-direction:column;flex:auto;box-sizing:border-box;overflow:hidden}.mat-grid-tile .mat-grid-list-text>*{margin:0;padding:0;font-weight:normal;font-size:inherit}.mat-grid-tile .mat-grid-list-text:empty{display:none}.mat-grid-tile .mat-grid-tile-header{top:0}.mat-grid-tile .mat-grid-tile-footer{bottom:0}.mat-grid-tile .mat-grid-avatar{padding-right:16px}[dir=rtl] .mat-grid-tile .mat-grid-avatar{padding-right:0;padding-left:16px}.mat-grid-tile .mat-grid-avatar:empty{display:none}\n"],encapsulation:2,changeDetection:0}),t})();class IN{constructor(){this.columnIndex=0,this.rowIndex=0}get rowCount(){return this.rowIndex+1}get rowspan(){const t=Math.max(...this.tracker);return t>1?this.rowCount+t-1:this.rowCount}update(t,e){this.columnIndex=0,this.rowIndex=0,this.tracker=new Array(t),this.tracker.fill(0,0,this.tracker.length),this.positions=e.map(t=>this._trackTile(t))}_trackTile(t){const e=this._findMatchingGap(t.colspan);return this._markTilePosition(e,t),this.columnIndex=e+t.colspan,new RN(this.rowIndex,e)}_findMatchingGap(t){if(t>this.tracker.length)throw Error(`mat-grid-list: tile with colspan ${t} is wider than grid with cols="${this.tracker.length}".`);let e=-1,n=-1;do{this.columnIndex+t>this.tracker.length?(this._nextRow(),e=this.tracker.indexOf(0,this.columnIndex),n=this._findGapEndIndex(e)):(e=this.tracker.indexOf(0,this.columnIndex),-1!=e?(n=this._findGapEndIndex(e),this.columnIndex=e+1):(this._nextRow(),e=this.tracker.indexOf(0,this.columnIndex),n=this._findGapEndIndex(e)))}while(n-e<t||0==n);return Math.max(e,0)}_nextRow(){this.columnIndex=0,this.rowIndex++;for(let t=0;t<this.tracker.length;t++)this.tracker[t]=Math.max(0,this.tracker[t]-1)}_findGapEndIndex(t){for(let e=t+1;e<this.tracker.length;e++)if(0!=this.tracker[e])return e;return this.tracker.length}_markTilePosition(t,e){for(let n=0;n<e.colspan;n++)this.tracker[t+n]=e.rowspan}}class RN{constructor(t,e){this.row=t,this.col=e}}const ON=/^-?\d+((\.\d+)?[A-Za-z%$]?)+$/;class AN{constructor(){this._rows=0,this._rowspan=0}init(t,e,n,i){this._gutterSize=LN(t),this._rows=e.rowCount,this._rowspan=e.rowspan,this._cols=n,this._direction=i}getBaseTileSize(t,e){return`(${t}% - (${this._gutterSize} * ${e}))`}getTilePosition(t,e){return 0===e?"0":NN(`(${t} + ${this._gutterSize}) * ${e}`)}getTileSize(t,e){return`(${t} * ${e}) + (${e-1} * ${this._gutterSize})`}setStyle(t,e,n){let i=100/this._cols,r=(this._cols-1)/this._cols;this.setColStyles(t,n,i,r),this.setRowStyles(t,e,i,r)}setColStyles(t,e,n,i){let r=this.getBaseTileSize(n,i);t._setStyle("rtl"===this._direction?"right":"left",this.getTilePosition(r,e)),t._setStyle("width",NN(this.getTileSize(r,t.colspan)))}getGutterSpan(){return`${this._gutterSize} * (${this._rowspan} - 1)`}getTileSpan(t){return`${this._rowspan} * ${this.getTileSize(t,1)}`}getComputedHeight(){return null}}class DN extends AN{constructor(t){super(),this.fixedRowHeight=t}init(t,e,n,i){if(super.init(t,e,n,i),this.fixedRowHeight=LN(this.fixedRowHeight),!ON.test(this.fixedRowHeight))throw Error(`Invalid value "${this.fixedRowHeight}" set as rowHeight.`)}setRowStyles(t,e){t._setStyle("top",this.getTilePosition(this.fixedRowHeight,e)),t._setStyle("height",NN(this.getTileSize(this.fixedRowHeight,t.rowspan)))}getComputedHeight(){return["height",NN(`${this.getTileSpan(this.fixedRowHeight)} + ${this.getGutterSpan()}`)]}reset(t){t._setListStyle(["height",null]),t._tiles&&t._tiles.forEach(t=>{t._setStyle("top",null),t._setStyle("height",null)})}}class PN extends AN{constructor(t){super(),this._parseRatio(t)}setRowStyles(t,e,n,i){this.baseTileHeight=this.getBaseTileSize(n/this.rowHeightRatio,i),t._setStyle("marginTop",this.getTilePosition(this.baseTileHeight,e)),t._setStyle("paddingTop",NN(this.getTileSize(this.baseTileHeight,t.rowspan)))}getComputedHeight(){return["paddingBottom",NN(`${this.getTileSpan(this.baseTileHeight)} + ${this.getGutterSpan()}`)]}reset(t){t._setListStyle(["paddingBottom",null]),t._tiles.forEach(t=>{t._setStyle("marginTop",null),t._setStyle("paddingTop",null)})}_parseRatio(t){const e=t.split(":");if(2!==e.length)throw Error(`mat-grid-list: invalid ratio given for row-height: "${t}"`);this.rowHeightRatio=parseFloat(e[0])/parseFloat(e[1])}}class MN extends AN{setRowStyles(t,e){let n=this.getBaseTileSize(100/this._rowspan,(this._rows-1)/this._rows);t._setStyle("top",this.getTilePosition(n,e)),t._setStyle("height",NN(this.getTileSize(n,t.rowspan)))}reset(t){t._tiles&&t._tiles.forEach(t=>{t._setStyle("top",null),t._setStyle("height",null)})}}function NN(t){return`calc(${t})`}function LN(t){return t.match(/([A-Za-z%]+)$/)?t:t+"px"}let FN=(()=>{class t{constructor(t,e){this._element=t,this._dir=e,this._gutter="1px"}get cols(){return this._cols}set cols(t){this._cols=Math.max(1,Math.round(Ch(t)))}get gutterSize(){return this._gutter}set gutterSize(t){this._gutter=""+(null==t?"":t)}get rowHeight(){return this._rowHeight}set rowHeight(t){const e=""+(null==t?"":t);e!==this._rowHeight&&(this._rowHeight=e,this._setTileStyler(this._rowHeight))}ngOnInit(){this._checkCols(),this._checkRowHeight()}ngAfterContentChecked(){this._layoutTiles()}_checkCols(){if(!this.cols)throw Error('mat-grid-list: must pass in number of columns. Example: <mat-grid-list cols="3">')}_checkRowHeight(){this._rowHeight||this._setTileStyler("1:1")}_setTileStyler(t){this._tileStyler&&this._tileStyler.reset(this),this._tileStyler="fit"===t?new MN:t&&t.indexOf(":")>-1?new PN(t):new DN(t)}_layoutTiles(){this._tileCoordinator||(this._tileCoordinator=new IN);const t=this._tileCoordinator,e=this._tiles.filter(t=>!t._gridList||t._gridList===this),n=this._dir?this._dir.value:"ltr";this._tileCoordinator.update(this.cols,e),this._tileStyler.init(this.gutterSize,t,this.cols,n),e.forEach((e,n)=>{const i=t.positions[n];this._tileStyler.setStyle(e,i.row,i.col)}),this._setListStyle(this._tileStyler.getComputedHeight())}_setListStyle(t){t&&(this._element.nativeElement.style[t[0]]=t[1])}}return t.\u0275fac=function(e){return new(e||t)(Ao(Ga),Ao(Nd,8))},t.\u0275cmp=de({type:t,selectors:[["mat-grid-list"]],contentQueries:function(t,e,n){var i;1&t&&el(n,TN,!0),2&t&&Qc(i=rl())&&(e._tiles=i)},hostAttrs:[1,"mat-grid-list"],hostVars:1,hostBindings:function(t,e){2&t&&To("cols",e.cols)},inputs:{cols:"cols",gutterSize:"gutterSize",rowHeight:"rowHeight"},exportAs:["matGridList"],features:[ja([{provide:xN,useExisting:t}])],ngContentSelectors:CN,decls:2,vars:0,template:function(t,e){1&t&&(Xo(),No(0,"div"),Qo(1),Lo())},styles:[".mat-grid-list{display:block;position:relative}.mat-grid-tile{display:block;position:absolute;overflow:hidden}.mat-grid-tile .mat-figure{top:0;left:0;right:0;bottom:0;position:absolute;display:flex;align-items:center;justify-content:center;height:100%;padding:0;margin:0}.mat-grid-tile .mat-grid-tile-header,.mat-grid-tile .mat-grid-tile-footer{display:flex;align-items:center;height:48px;color:#fff;background:rgba(0,0,0,.38);overflow:hidden;padding:0 16px;position:absolute;left:0;right:0}.mat-grid-tile .mat-grid-tile-header>*,.mat-grid-tile .mat-grid-tile-footer>*{margin:0;padding:0;font-weight:normal;font-size:inherit}.mat-grid-tile .mat-grid-tile-header.mat-2-line,.mat-grid-tile .mat-grid-tile-footer.mat-2-line{height:68px}.mat-grid-tile .mat-grid-list-text{display:flex;flex-direction:column;flex:auto;box-sizing:border-box;overflow:hidden}.mat-grid-tile .mat-grid-list-text>*{margin:0;padding:0;font-weight:normal;font-size:inherit}.mat-grid-tile .mat-grid-list-text:empty{display:none}.mat-grid-tile .mat-grid-tile-header{top:0}.mat-grid-tile .mat-grid-tile-footer{bottom:0}.mat-grid-tile .mat-grid-avatar{padding-right:16px}[dir=rtl] .mat-grid-tile .mat-grid-avatar{padding-right:0;padding-left:16px}.mat-grid-tile .mat-grid-avatar:empty{display:none}\n"],encapsulation:2,changeDetection:0}),t})(),UN=(()=>{class t{}return t.\u0275mod=ge({type:t}),t.\u0275inj=ut({factory:function(e){return new(e||t)},imports:[[Cf,gf],Cf,gf]}),t})();function BN(t,e){if(1&t){const t=jo();No(0,"div"),No(1,"div",7),No(2,"mat-label",8),ya(3),Lo(),No(4,"button",9),qo("click",(function(){nn(t);const e=Wo().index;return Wo().confirmPayback(e)})),ya(5," Approve Payback "),Lo(),Lo(),No(6,"mat-label",10),ya(7),Lo(),Lo()}if(2&t){const t=Wo().$implicit,e=Wo();kr(3),ba("You owe ",t.recipient.contact.name,""),kr(4),wa(" ",t.payer.amount/100,"",e.currencyMap[e.group.currency]," ")}}function jN(t,e){if(1&t&&(No(0,"div"),No(1,"div",7),No(2,"mat-label",8),ya(3),Lo(),Lo(),No(4,"mat-label",10),ya(5),Lo(),Lo()),2&t){const t=Wo().$implicit,e=Wo();kr(3),ba("",t.payer.contact.name," owes you"),kr(2),wa(" ",t.payer.amount/100,"",e.currencyMap[e.group.currency]," ")}}function VN(t,e){if(1&t&&(No(0,"mat-grid-tile"),No(1,"mat-card"),Ro(2,BN,8,3,"div",6),Ro(3,jN,6,3,"div",6),Lo(),Lo()),2&t){const t=e.$implicit,n=Wo();kr(2),Po("ngIf",t.payer.contact.contactId===n.userContact.contactId),kr(1),Po("ngIf",t.payer.contact.contactId!==n.userContact.contactId)}}function KN(t,e){1&t&&Fo(0,"mat-spinner",11),2&t&&Po("diameter",30)}let qN=(()=>{class t{constructor(t,e,n,i,r,s){this.dialog=t,this.matrixBasicDataService=e,this.dialogProviderService=n,this.dataModelService=i,this.ref=r,this.zone=s,this.currencyMap=kx,this.loadingConfirmPayback=!1,this.recommendations=[],this.balanceData=[],this.chartHeight=0,this.barHeight=75,this.getCustomColor=t=>{for(const e of this.balanceData)if(e.name===t)return e.value>=0?"green":"red"}}ngOnChanges(){this.userContact=this.dataModelService.getUser().contact,this.initBalancesRecommendations(),this.dataModelService.getBalanceEmitter().subscribe(()=>{this.initBalancesRecommendations()}),this.group.getMemberChangeEmitter().subscribe(()=>{this.ref.detectChanges()}),this.breakpoint=nI(window.innerWidth,1920,3)}initBalancesRecommendations(){const t=[];for(const n of this.group.recommendations)n.payer.contact.contactId!==this.userContact.contactId&&n.recipient.contact.contactId!==this.userContact.contactId||t.push(n);this.recommendations=t,this.balanceData=[];const e=this.group.groupmembers;for(const n of e)n.active&&this.balanceData.push({name:n.contact.name,value:n.balance/100});this.chartHeight=this.balanceData.length*this.barHeight}onResize(t){this.breakpoint=nI(t.target.innerWidth,1920,3)}confirmPayback(t){this.zone.run(()=>{this.dialog.open(eI,{width:"350px",data:{recommendation:this.recommendations[t]}}).afterClosed().subscribe(t=>{this.dialogData=t,void 0!==this.dialogData&&(this.loadingConfirmPayback=!0,dT(1e5,this.matrixBasicDataService.createTransaction(this.dialogData.recommendation.group.groupId,"Payback from "+this.dialogData.recommendation.payer.contact.name+" to "+this.dialogData.recommendation.recipient.contact.name,this.dialogData.recommendation.payer.contact.contactId,[this.dialogData.recommendation.recipient.contact.contactId],[this.dialogData.recommendation.recipient.amount],!0)).then(t=>{t.wasSuccessful()||this.dialogProviderService.openErrorModal("error confirm payback 1: "+t.getMessage(),this.dialog),this.loadingConfirmPayback=!1},t=>{this.dialogProviderService.openErrorModal("error confirm payback 2: "+t,this.dialog),this.loadingConfirmPayback=!1}))})})}}return t.\u0275fac=function(e){return new(e||t)(Ao(Yw),Ao(bT),Ao(mT),Ao(tT),Ao(Zs),Ao(Rl))},t.\u0275cmp=de({type:t,selectors:[["app-group-balance"]],inputs:{group:"group"},features:[Ae],decls:8,vars:10,consts:[[1,"center"],[3,"results","xAxis","yAxis","xAxisLabel","customColors"],[1,"divider"],["rowHeight","2:1",3,"cols","resize"],[4,"ngFor","ngForOf"],[3,"diameter",4,"ngIf"],[4,"ngIf"],[1,"approve_div"],[1,"approve_person"],["mat-raised-button","","color","primary",1,"approve_button",3,"click"],[1,"approve_amount"],[3,"diameter"]],template:function(t,e){1&t&&(No(0,"div"),No(1,"div",0),Fo(2,"ngx-charts-bar-horizontal",1),Lo(),Fo(3,"mat-divider"),No(4,"div",2),No(5,"mat-grid-list",3),qo("resize",(function(t){return e.onResize(t)}),!1,Xn),Ro(6,VN,4,2,"mat-grid-tile",4),Lo(),Ro(7,KN,1,1,"mat-spinner",5),Lo(),Lo()),2&t&&(kr(2),sa("height",e.chartHeight,"px"),Po("results",e.balanceData)("xAxis",!0)("yAxis",!0)("xAxisLabel",!0)("customColors",e.getCustomColor),kr(3),Po("cols",e.breakpoint),kr(1),Po("ngForOf",e.recommendations),kr(1),Po("ngIf",e.loadingConfirmPayback))},directives:[uN,IS,FN,Ru,Au,TN,sv,vg,dv,fE],styles:[".approve_button[_ngcontent-%COMP%]{display:flex;flex-direction:row;margin-top:10px}.center[_ngcontent-%COMP%]{display:grid;width:50%;margin-left:auto;margin-right:auto}.center[_ngcontent-%COMP%], .item[_ngcontent-%COMP%]{margin-bottom:50px}.item[_ngcontent-%COMP%]{margin-top:50px}.approve_person[_ngcontent-%COMP%]{font-size:120%}.approve_group[_ngcontent-%COMP%]{margin-left:10px;color:grey}.approve_div[_ngcontent-%COMP%]{display:inline-block;margin-right:20px}.approve_amount[_ngcontent-%COMP%]{font-size:300%}.divider[_ngcontent-%COMP%]{margin-top:10px;margin-bottom:10px}.payback_div[_ngcontent-%COMP%]{display:block;margin-top:30px}"]}),t})();function GN(t,e){if(1&t&&(No(0,"div"),No(1,"mat-label"),ya(2),Lo(),Lo()),2&t){const t=Wo().$implicit;kr(2),va(t.subject.name)}}function $N(t,e){if(1&t&&(No(0,"div"),No(1,"mat-label"),ya(2),Lo(),Lo()),2&t){const t=Wo().$implicit;kr(2),wa("",t.actor.name," has been added to ",t.subject.name,"")}}function HN(t,e){if(1&t&&(No(0,"div"),No(1,"mat-label"),ya(2),Lo(),Lo()),2&t){const t=Wo().$implicit;kr(2),wa("",t.actor.name," created ",t.subject.name,"")}}function zN(t,e){if(1&t&&(No(0,"div"),No(1,"mat-label"),ya(2),Lo(),Lo()),2&t){const t=Wo().$implicit;kr(2),wa("",t.actor.name," left ",t.subject.name,"")}}function WN(t,e){if(1&t&&(No(0,"div"),No(1,"mat-label"),ya(2),Lo(),Lo()),2&t){const t=Wo().$implicit;kr(2),Sa("",t.actor.name," edited transaction ",t.subject.name," in ",t.subject.group.name,"")}}function YN(t,e){if(1&t&&(No(0,"div"),No(1,"mat-label"),ya(2),Lo(),Lo()),2&t){const t=Wo().$implicit;kr(2),Sa("",t.actor.name," created ",t.subject.name," in ",t.subject.group.name,"")}}function XN(t,e){if(1&t&&(No(0,"mat-list-item",1),No(1,"mat-card"),No(2,"div",2),Ro(3,GN,3,1,"div",3),Ro(4,$N,3,2,"div",3),Ro(5,HN,3,2,"div",3),Ro(6,zN,3,2,"div",3),Ro(7,WN,3,3,"div",3),Ro(8,YN,3,3,"div",3),Lo(),No(9,"mat-label",4),ya(10),Lo(),Lo(),Lo()),2&t){const t=e.$implicit,n=Wo();kr(3),Po("ngIf",t.activityType===n.activityTypes.NEWPAYBACK),kr(1),Po("ngIf",t.activityType===n.activityTypes.NEWCONTACTINGROUP),kr(1),Po("ngIf",t.activityType===n.activityTypes.GROUPCREATION),kr(1),Po("ngIf",t.activityType===n.activityTypes.CONTACTLEFTGROUP),kr(1),Po("ngIf",t.activityType===n.activityTypes.EXPENSECHANGE),kr(1),Po("ngIf",t.activityType===n.activityTypes.NEWEXPENSE),kr(2),va(t.creationDate.toDateString())}}let QN=(()=>{class t{constructor(t){this.ref=t,this.activities=[],this.activityTypes=Px}ngOnChanges(){this.activities=this.group.activities,this.group.getActivityChangeEmitter().subscribe(()=>{this.ref.detectChanges()})}}return t.\u0275fac=function(e){return new(e||t)(Ao(Zs))},t.\u0275cmp=de({type:t,selectors:[["app-history"]],inputs:{group:"group"},features:[Ae],decls:4,vars:3,consts:[["class","activity_item",4,"ngFor","ngForOf"],[1,"activity_item"],[1,"label_div"],[4,"ngIf"],[1,"date"]],template:function(t,e){1&t&&(No(0,"div"),No(1,"mat-list"),Ro(2,XN,11,7,"mat-list-item",0),Uc(3,"reversePipe"),Lo(),Lo()),2&t&&(kr(2),Po("ngForOf",Bc(3,1,e.activities)))},directives:[VS,Ru,GS,sv,Au,vg],pipes:[XT],styles:[".activity_item[_ngcontent-%COMP%]{margin-bottom:30px;margin-top:30px}.date[_ngcontent-%COMP%]{color:grey;position:absolute;right:18px;bottom:10px}.label_div[_ngcontent-%COMP%]{margin-bottom:15px}"]}),t})();function ZN(t,e){if(1&t){const t=jo();No(0,"a",18),qo("click",(function(){nn(t);const n=e.index;return Wo().selectGroup(n)})),ya(1),Lo()}if(2&t){const t=e.$implicit;kr(1),va(t.name)}}function JN(t,e){if(1&t){const t=jo();No(0,"button",19),qo("click",(function(){return nn(t),Wo(),Oo(2).toggle()})),No(1,"mat-icon",20),ya(2,"menu"),Lo(),Lo()}}function tL(t,e){1&t&&Fo(0,"mat-spinner",21),2&t&&Po("diameter",30)}const eL=function(t){return{color:t}};function nL(t,e){if(1&t&&(No(0,"mat-grid-tile"),No(1,"mat-card",6),No(2,"mat-label",7),ya(3),Lo(),No(4,"mat-label",8),ya(5),Lo(),Lo(),Lo()),2&t){const t=e.$implicit,n=Wo();kr(3),ba("Balance ",n.currencyMap[t.currency],""),kr(1),Po("ngStyle",Mc(3,eL,t.balance>=0?"green":"red")),kr(1),va(t.balance/100)}}function iL(t,e){if(1&t){const t=jo();No(0,"div"),No(1,"div",11),No(2,"mat-label",12),ya(3),Lo(),No(4,"button",13),qo("click",(function(){nn(t);const e=Wo().index;return Wo().confirmPayback(e)})),ya(5," Approve Payback "),Lo(),Lo(),No(6,"mat-label",14),ya(7),Lo(),No(8,"mat-label",15),ya(9),Lo(),Lo()}if(2&t){const t=Wo().$implicit,e=Wo();kr(3),ba("You owe ",t.recipient.contact.name,""),kr(4),wa("",t.payer.amount/100,"",e.currencyMap[t.group.currency],""),kr(2),va(t.group.name)}}function rL(t,e){if(1&t&&(No(0,"div"),No(1,"div",11),No(2,"mat-label",12),ya(3),Lo(),Lo(),No(4,"mat-label",14),ya(5),Lo(),No(6,"mat-label",15),ya(7),Lo(),Lo()),2&t){const t=Wo().$implicit,e=Wo();kr(3),ba("",t.payer.contact.name," owes you"),kr(2),wa("",t.payer.amount/100,"",e.currencyMap[t.group.currency],""),kr(2),va(t.group.name)}}function sL(t,e){if(1&t&&(No(0,"mat-grid-tile"),No(1,"mat-card",9),Ro(2,iL,10,4,"div",10),Ro(3,rL,8,4,"div",10),Lo(),Lo()),2&t){const t=e.$implicit,n=Wo();kr(2),Po("ngIf",t.payer.contact.contactId===n.userContact.contactId),kr(1),Po("ngIf",t.payer.contact.contactId!==n.userContact.contactId)}}function oL(t,e){1&t&&Fo(0,"mat-spinner",16),2&t&&Po("diameter",30)}const aL=[{path:"settings",component:DT},{path:"groups",component:(()=>{class t{constructor(t,e,n,i,r,s){this.breakpointObserver=t,this.dialog=e,this.dataModelService=n,this.matrixBasicDataService=i,this.dialogProviderService=r,this.ref=s,this.currentGroup=new Hx("","",null),this.loadingLeaveGroup=!1,this.loadingAddMember=!1,this.loadingAddGroup=!1,this.groups=[],this.isHandset$=this.breakpointObserver.observe(hT).pipe(N(t=>t.matches),Iv())}ngOnInit(){this.groups=this.dataModelService.getGroups(),this.groups.length>=1&&(this.currentGroup=this.groups[0]),this.dataModelService.getUser().getGroupChangeEmitter().subscribe(()=>{this.ref.detectChanges()})}selectGroup(t){this.currentGroup=0===this.groups.length?new Hx("","",null):this.groups[t],this.ref.detectChanges()}leaveGroup(){let t=null;for(const e of this.currentGroup.groupmembers)if(this.dataModelService.getUser().contact.contactId===e.contact.contactId){t=e;break}null===t?this.dialogProviderService.openErrorModal("Please select a group",this.dialog):0!==t.balance?this.dialogProviderService.openErrorModal("Your balance needs to be 0 to leave the group",this.dialog):this.dialog.open(FT,{width:"300px",data:{group:this.currentGroup}}).afterClosed().subscribe(t=>{this.leaveGroupData=t,void 0!==this.leaveGroupData&&(this.loadingLeaveGroup=!0,dT(1e5,this.matrixBasicDataService.leaveGroup(this.leaveGroupData.group.groupId)).then(t=>{t.wasSuccessful()?this.selectGroup(0):this.dialogProviderService.openErrorModal("error leave group 1: "+t.getMessage(),this.dialog),this.loadingLeaveGroup=!1},t=>{this.dialogProviderService.openErrorModal("error leave group 2: "+t,this.dialog),this.loadingLeaveGroup=!1}))})}addGroup(){this.dialog.open(LT,{width:"300px",data:{groupName:"",currency:this.dataModelService.getUser().currency}}).afterClosed().subscribe(t=>{this.createGroupData=t,void 0!==this.createGroupData&&(this.loadingAddGroup=!0,Mx.groupCreationTime=Date.now(),dT(1e5,this.matrixBasicDataService.groupCreate(this.createGroupData.groupName,Cx[this.createGroupData.currency])).then(t=>{t.wasSuccessful()||this.dialogProviderService.openErrorModal("error add group 1: "+t.getMessage(),this.dialog),this.loadingAddGroup=!1},t=>{this.dialogProviderService.openErrorModal("error add group 2: "+t,this.dialog),this.loadingAddGroup=!1}))})}addMemberToGroup(){""===this.currentGroup.groupId?this.dialogProviderService.openErrorModal("Please select a group to add a member",this.dialog):this.dialog.open(jT,{width:"300px",data:{group:this.currentGroup,user:""}}).afterClosed().subscribe(t=>{this.addUserToGroupData=t,void 0!==this.addUserToGroupData&&(this.loadingAddGroup=!0,dT(1e5,this.matrixBasicDataService.groupAddMember(this.addUserToGroupData.group.groupId,this.addUserToGroupData.user)).then(t=>{t.wasSuccessful()||this.dialogProviderService.openErrorModal("error add member 1: "+t.getMessage(),this.dialog),this.loadingAddGroup=!1},t=>{this.dialogProviderService.openErrorModal("error add member 2: "+t,this.dialog),this.loadingAddGroup=!1}))})}}return t.\u0275fac=function(e){return new(e||t)(Ao(lT),Ao(Yw),Ao(tT),Ao(bT),Ao(mT),Ao(Zs))},t.\u0275cmp=de({type:t,selectors:[["app-group-selection"]],decls:37,vars:18,consts:[[1,"sidenav-container"],[1,"sidenav",3,"mode","opened"],["drawer",""],["mat-list-item","",3,"click",4,"ngFor","ngForOf"],["color","primary",1,"toolbar"],[1,"group_title"],["type","button","aria-label","Toggle sidenav","mat-icon-button","",3,"click",4,"ngIf"],[1,"first"],[1,"second"],["class","spinner","color","accent",3,"diameter",4,"ngIf"],[1,"buttonDiv"],[1,"groupButtons"],["mat-raised-button","",3,"click"],["animationDuration","0ms"],["label","Transactions"],[3,"group"],["label","Balances"],["label","History"],["mat-list-item","",3,"click"],["type","button","aria-label","Toggle sidenav","mat-icon-button","",3,"click"],["aria-label","Side nav toggle icon"],["color","accent",1,"spinner",3,"diameter"]],template:function(t,e){1&t&&(No(0,"mat-sidenav-container",0),No(1,"mat-sidenav",1,2),Uc(3,"async"),Uc(4,"async"),Uc(5,"async"),No(6,"mat-toolbar"),ya(7,"Group Menu"),Lo(),No(8,"mat-action-list"),Ro(9,ZN,2,1,"a",3),Lo(),Lo(),No(10,"mat-sidenav-content"),No(11,"mat-toolbar",4),No(12,"div",5),Ro(13,JN,3,0,"button",6),Uc(14,"async"),No(15,"div",7),No(16,"mat-label"),ya(17),Lo(),Lo(),No(18,"div",8),Ro(19,tL,1,1,"mat-spinner",9),Lo(),Lo(),No(20,"div",10),No(21,"div",11),No(22,"button",12),qo("click",(function(){return e.leaveGroup()})),ya(23,"Leave Group"),Lo(),Lo(),No(24,"div",11),No(25,"button",12),qo("click",(function(){return e.addGroup()})),ya(26,"Create Group"),Lo(),Lo(),No(27,"div",11),No(28,"button",12),qo("click",(function(){return e.addMemberToGroup()})),ya(29,"Add User to Group"),Lo(),Lo(),Lo(),Lo(),No(30,"mat-tab-group",13),No(31,"mat-tab",14),Fo(32,"app-group-transaction",15),Lo(),No(33,"mat-tab",16),Fo(34,"app-group-balance",15),Lo(),No(35,"mat-tab",17),Fo(36,"app-history",15),Lo(),Lo(),Lo(),Lo()),2&t&&(kr(1),Po("mode",Bc(4,12,e.isHandset$)?"over":"side")("opened",!1===Bc(5,14,e.isHandset$)),To("role",Bc(3,10,e.isHandset$)?"dialog":"navigation"),kr(8),Po("ngForOf",e.groups),kr(4),Po("ngIf",Bc(14,16,e.isHandset$)),kr(4),va(e.currentGroup.name),kr(2),Po("ngIf",e.loadingAddGroup||e.loadingLeaveGroup||e.loadingAddMember),kr(13),Po("group",e.currentGroup),kr(2),Po("group",e.currentGroup),kr(2),Po("group",e.currentGroup))},directives:[CS,ES,rS,VS,Ru,SS,Au,vg,dv,Iw,_w,tI,qN,QN,GS,ev,fE],pipes:[Gu],styles:[".sidenav-container[_ngcontent-%COMP%]{height:89vh}.spinner[_ngcontent-%COMP%]{margin-left:10px}.sidenav[_ngcontent-%COMP%]{width:200px}.first[_ngcontent-%COMP%]{float:right;margin-right:5px;margin-top:5px}.second[_ngcontent-%COMP%]{overflow:hidden;margin-left:150px}.sidenav[_ngcontent-%COMP%]   .mat-toolbar[_ngcontent-%COMP%]{background:inherit}.mat-toolbar.mat-primary[_ngcontent-%COMP%]{position:-webkit-sticky;position:sticky;top:0;z-index:100}.group_title[_ngcontent-%COMP%]{position:absolute;top:8px;left:16px}.groupButtons[_ngcontent-%COMP%]{clear:both;margin-top:5px;margin-bottom:5px}.toolbar[_ngcontent-%COMP%]{height:180px}.buttonDiv[_ngcontent-%COMP%]{margin-top:35px}@media only screen and (min-width:1200px){.groupButtons[_ngcontent-%COMP%]{display:inline;position:relative;margin-left:10px}.toolbar[_ngcontent-%COMP%]{height:50px}.buttonDiv[_ngcontent-%COMP%]{margin-top:auto;position:absolute;right:10px}.first[_ngcontent-%COMP%]{float:left;margin-right:5px;margin-top:0}.second[_ngcontent-%COMP%]{overflow:hidden}}"]}),t})()},{path:"home",component:(()=>{class t{constructor(t,e,n,i,r,s){this.dataModelService=t,this.dialog=e,this.matrixBasicDataService=n,this.dialogProviderService=i,this.ref=r,this.zone=s,this.usedCurrencies=new Set,this.recommendations=[],this.currencyMap=kx,this.balanceList=[],this.loadingConfirmPayback=!1}ngOnInit(){this.userContact=this.dataModelService.getUser().contact,this.initBalancesRecommendations(),this.dataModelService.getBalanceEmitter().subscribe(()=>{this.initBalancesRecommendations()}),this.breakpoint=nI(window.innerWidth,2200,4)}initBalancesRecommendations(){const t=this.dataModelService.getGroups();this.recommendations=[];for(const e of t){for(const t of e.recommendations)t.payer.contact.contactId!==this.userContact.contactId&&t.recipient.contact.contactId!==this.userContact.contactId||this.recommendations.push(t);this.usedCurrencies.add(e.currency)}this.balanceList=[];for(const e of this.usedCurrencies){const t=this.getTotalBalance(e);this.balanceList=this.balanceList.concat({balance:t,currency:e})}this.ref.detectChanges()}onResize(t){this.breakpoint=nI(t.target.innerWidth,2200,4)}getTotalBalance(t){const e=this.dataModelService.getGroups();let n=0;for(const i of e)if(i.currency===t)for(const t of i.groupmembers)if(t.contact.contactId===this.userContact.contactId){n+=t.balance;break}return n}confirmPayback(t){this.zone.run(()=>{this.dialog.open(eI,{width:"350px",data:{recommendation:this.recommendations[t]}}).afterClosed().subscribe(t=>{this.dialogData=t,void 0!==this.dialogData&&(this.loadingConfirmPayback=!0,dT(1e5,this.matrixBasicDataService.createTransaction(this.dialogData.recommendation.group.groupId,"Payback from "+this.dialogData.recommendation.payer.contact.name+" to "+this.dialogData.recommendation.recipient.contact.name,this.dialogData.recommendation.payer.contact.contactId,[this.dialogData.recommendation.recipient.contact.contactId],[this.dialogData.recommendation.recipient.amount],!0)).then(t=>{t.wasSuccessful()||this.dialogProviderService.openErrorModal("error confirm payback 1: "+t.getMessage(),this.dialog),this.loadingConfirmPayback=!1},t=>{this.dialogProviderService.openErrorModal("error confirm payback 2: "+t,this.dialog),this.loadingConfirmPayback=!1}))})})}}return t.\u0275fac=function(e){return new(e||t)(Ao(tT),Ao(Yw),Ao(bT),Ao(mT),Ao(Zs),Ao(Rl))},t.\u0275cmp=de({type:t,selectors:[["app-home"]],decls:8,vars:5,consts:[[1,"balance"],["rowHeight","2:1",3,"cols","resize"],[4,"ngFor","ngForOf"],[1,"divider"],[1,"payback_div"],[3,"diameter",4,"ngIf"],[1,"center"],[1,"balance_label"],[1,"balance_number",3,"ngStyle"],[1,"card"],[4,"ngIf"],[1,"approve_div"],[1,"approve_person"],["mat-raised-button","","color","primary",1,"approve_button",3,"click"],[1,"approve_amount"],[1,"approve_group"],[3,"diameter"]],template:function(t,e){1&t&&(No(0,"div",0),No(1,"mat-grid-list",1),qo("resize",(function(t){return e.onResize(t)}),!1,Xn),Ro(2,nL,6,5,"mat-grid-tile",2),Lo(),Lo(),Fo(3,"mat-divider",3),No(4,"div",4),No(5,"mat-grid-list",1),qo("resize",(function(t){return e.onResize(t)}),!1,Xn),Ro(6,sL,4,2,"mat-grid-tile",2),Lo(),Ro(7,oL,1,1,"mat-spinner",5),Lo()),2&t&&(kr(1),Po("cols",e.breakpoint),kr(1),Po("ngForOf",e.balanceList),kr(3),Po("cols",e.breakpoint),kr(1),Po("ngForOf",e.recommendations),kr(1),Po("ngIf",e.loadingConfirmPayback))},directives:[FN,Ru,IS,Au,TN,sv,vg,Uu,dv,fE],styles:[".center[_ngcontent-%COMP%]{margin:auto;width:50%;padding:20px}.card[_ngcontent-%COMP%]{height:80px;width:320px}.balance[_ngcontent-%COMP%]{margin-bottom:10px}.balance_label[_ngcontent-%COMP%]{font-size:200%}.balance_number[_ngcontent-%COMP%]{display:flex;flex-direction:row;margin:auto;font-size:500%;line-height:100%}.approve_button[_ngcontent-%COMP%]{display:flex;flex-direction:row;margin-top:10px}.approve_person[_ngcontent-%COMP%]{font-size:120%}.approve_group[_ngcontent-%COMP%]{position:absolute;right:5px;bottom:5px;color:grey}.approve_div[_ngcontent-%COMP%]{display:inline-block;margin-right:20px}.approve_amount[_ngcontent-%COMP%]{font-size:300%;position:absolute;top:20px;left:auto}.divider[_ngcontent-%COMP%]{margin-top:10px;margin-bottom:10px}.payback_div[_ngcontent-%COMP%]{margin-top:30px}"]}),t})()},{path:"",redirectTo:"/home",pathMatch:"full"},{path:"**",component:(()=>{class t{constructor(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=de({type:t,selectors:[["app-page-not-found"]],decls:4,vars:0,consts:[[1,"baseDiv"],[1,"center"]],template:function(t,e){1&t&&(No(0,"div",0),No(1,"mat-card",1),No(2,"mat-label"),ya(3,"Error, page not found"),Lo(),Lo(),Lo())},directives:[sv,vg],styles:[".center[_ngcontent-%COMP%]{margin:auto;width:20%;padding:20px}.baseDiv[_ngcontent-%COMP%]{padding-top:150px;background-color:#add8e6;height:100%}"]}),t})()}];let cL=(()=>{class t{}return t.\u0275mod=ge({type:t}),t.\u0275inj=ut({factory:function(e){return new(e||t)},imports:[[px.forRoot(aL)],px]}),t})(),lL=(()=>{class t{}return t.\u0275mod=ge({type:t,bootstrap:[RT]}),t.\u0275inj=ut({factory:function(e){return new(e||t)},providers:[{provide:qw,useValue:{}},{provide:$w,useValue:[]},mT],imports:[[Eh,uf,Og,yy,nv,ov,uy,pv,zb,Zw,hy,rT,sS,TS,$S,Lw,Qw,cL,EN,zS,oE,gE,UN]]}),t})();(function(){if(Oi)throw new Error("Cannot enable prod mode after platform setup.");Ri=!1})(),wh().bootstrapModule(lL).catch(t=>console.error(t))},zn8P:function(t,e){function n(t){return Promise.resolve().then((function(){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}))}n.keys=function(){return[]},n.resolve=n,t.exports=n,n.id="zn8P"}},[[0,0]]]);